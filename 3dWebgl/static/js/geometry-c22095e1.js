import{m as K,F as N,a_ as U,E as V,P as $,V as J,S as Q,C as Z,a$ as Y,D as ee,p as ne,aY as W,X as te,d as S,b as oe,M as ie,b0 as re}from"./three.module-96598850.js";import{G as se}from"./dat.gui.module-798d8523.js";import{r as w}from"./webGLRenderer-38a6fef0.js";import{d as ae,k as ce,l as de,o as he,b as le}from"./index-5de0d8c7.js";import"./currency-1843da70.js";class ue extends K{constructor(n){super(n)}load(n,e,r,i){const t=this,o=new N(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(n,function(a){const h=t.parse(JSON.parse(a));e&&e(h)},r,i)}parse(n){return new pe(n)}}class pe{constructor(n){this.isFont=!0,this.type="Font",this.data=n}generateShapes(n,e=100){const r=[],i=fe(n,e,this.data);for(let t=0,o=i.length;t<o;t++)r.push(...i[t].toShapes());return r}}function fe(g,n,e){const r=Array.from(g),i=n/e.resolution,t=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*i,o=[];let a=0,h=0;for(let u=0;u<r.length;u++){const f=r[u];if(f===`
`)a=0,h-=t;else{const l=ge(f,i,a,h,e);a+=l.offsetX,o.push(l.path)}}return o}function ge(g,n,e,r,i){const t=i.glyphs[g]||i.glyphs["?"];if(!t){console.error('THREE.Font: character "'+g+'" does not exists in font family '+i.familyName+".");return}const o=new U;let a,h,u,f,l,m,y,v;if(t.o){const d=t._cachedOutline||(t._cachedOutline=t.o.split(" "));for(let c=0,L=d.length;c<L;)switch(d[c++]){case"m":a=d[c++]*n+e,h=d[c++]*n+r,o.moveTo(a,h);break;case"l":a=d[c++]*n+e,h=d[c++]*n+r,o.lineTo(a,h);break;case"q":u=d[c++]*n+e,f=d[c++]*n+r,l=d[c++]*n+e,m=d[c++]*n+r,o.quadraticCurveTo(l,m,u,f);break;case"b":u=d[c++]*n+e,f=d[c++]*n+r,l=d[c++]*n+e,m=d[c++]*n+r,y=d[c++]*n+e,v=d[c++]*n+r,o.bezierCurveTo(l,m,y,v,u,f);break}}return{offsetX:t.ha*n,path:o}}class me extends V{constructor(n,e={}){const r=e.font;if(r===void 0)super();else{const i=r.generateShapes(n,e.size);e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(i,e)}this.type="TextGeometry"}}const Pe=ae({__name:"geometry",setup(g){let n=ce(null);re.enabled=!0;let e,r,i,t,o,a,h,u,f=!0,l="mengyu",m=!0,y;const v=20,d=70,c=30,L=4,T=2,G=1.5;let M=0,_=0,z=0,D=0,C=window.innerWidth/2;de(()=>{R(),H()});function R(){e=new $(30,window.innerWidth/window.innerHeight,1,1500),e.position.set(0,400,700),r=new J(0,150,0),i=new Q,i.background=new Z(0),i.fog=new Y(0,250,1400);const s=new ee(16777215,.4);s.position.set(0,0,1).normalize(),i.add(s);const p=new ne(16777215,4.5,0,0);p.color.setHSL(Math.random(),1,.5),p.position.set(0,100,90),i.add(p),u=[new W({color:16777215,flatShading:!0}),new W({color:16777215})],t=new te,t.position.y=100,i.add(t),E();const x=new S(new oe(1e4,1e4),new ie({color:16777215,opacity:.5,transparent:!0}));x.position.y=100,x.rotation.x=-Math.PI/2,i.add(x),w.setPixelRatio(window.devicePixelRatio),w.useLegacyLights=!1,n.value.appendChild(w.domElement),n.value.addEventListener("pointerdown",X),document.addEventListener("keypress",I),document.addEventListener("keydown",q);const k={changeColor:function(){p.color.setHSL(Math.random(),1,.5)},changeFont:function(){E()},changeWeight:function(){E()},changeBevel:function(){m=!m,P()}},b=new se;b.add(k,"changeColor").name("change color"),b.add(k,"changeFont").name("change font"),b.add(k,"changeWeight").name("change weight"),b.add(k,"changeBevel").name("change bevel"),b.open(),window.addEventListener("resize",O)}function O(){C=window.innerWidth/2,e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight)}function q(s){if(f&&(f=!1,l=""),s.keyCode==8)return s.preventDefault(),l=l.substring(0,l.length-1),P(),!1}function I(s){const p=s.which;if(p==8)s.preventDefault();else{const x=String.fromCharCode(p);l+=x,P()}}function E(){new ue().load("/src/assets/fonts/optimer_bold.typeface.json",function(p){y=p,P()})}function A(){h=new me(l,{font:y,size:d,height:v,curveSegments:L,bevelThickness:T,bevelSize:G,bevelEnabled:m}),h.computeBoundingBox();const s=-.5*(h.boundingBox.max.x-h.boundingBox.min.x);o=new S(h,u),o.position.x=s,o.position.y=c,o.position.z=0,o.rotation.x=0,o.rotation.y=Math.PI*2,t.add(o),a=new S(h,u),a.position.x=s,a.position.y=-c,a.position.z=v,a.rotation.x=Math.PI,a.rotation.y=Math.PI*2,t.add(a)}function P(){t.remove(o),t.remove(a),l&&A()}function X(s){s.isPrimary!==!1&&(D=s.clientX-C,_=M,document.addEventListener("pointermove",F),document.addEventListener("pointerup",B))}function F(s){s.isPrimary!==!1&&(z=s.clientX-C,M=_+(z-D)*.02)}function B(s){s.isPrimary!==!1&&(document.removeEventListener("pointermove",F),document.removeEventListener("pointerup",B))}function H(){requestAnimationFrame(H),j()}function j(){t.rotation.y+=(M-t.rotation.y)*.05,e.lookAt(r),w.clear(),w.render(i,e)}return(s,p)=>(he(),le("div",{class:"canvas-container",ref_key:"screenDom",ref:n},null,512))}});export{Pe as default};
