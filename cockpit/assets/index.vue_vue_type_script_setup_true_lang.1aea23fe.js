import{X as ge,r as re,e as ie,w as me,m as ve,v as ye,u as ee,f as ae,h as se,j as te,B as _e,z as xe,H as be,J as le,K as ue,_ as he,t as ce,F as we,k as Te,Y as Se}from"./index.3a52be61.js";const Me="/cockpit/assets/map_bj.f1bc114b.jpg",Ae=(Ht=120)=>({map3dParam:{detailTexture:Me,autoRotate:!1},orthographicSize:{orthographicSize:Ht},zoomAnimationParam:{zoomSizeEnd:Ht}}),de=(Ht="")=>new Promise((Wt,jt)=>{const Vt=new XMLHttpRequest;Vt.open("GET",`json/${Ht||"340000"}.json`,!0),Vt.onreadystatechange=function(){Vt.readyState===4&&(Vt.status===200?Wt(JSON.parse(Vt.responseText)):jt("\u8D44\u6E90\u4E0D\u5B58\u5728"))},Vt.send()});var Kt={exports:{}};(function(Ht,Wt){(function(jt,Vt){Ht.exports=Vt()})(self,()=>(()=>{var jt={70596:(W,G,T)=>{var L=T(70492);(function(){for(var k in L){if(L==null||!L.hasOwnProperty(k)||k==="default"||k==="__esModule")return;G[k]=L[k]}})();var R=T(34151);(function(){for(var k in R){if(R==null||!R.hasOwnProperty(k)||k==="default"||k==="__esModule")return;G[k]=R[k]}})(),T(81768),T(46295),T(40451),T(94859),T(42213),T(48927),T(10064),T(81052),T(17831),T(44553),T(27539),T(66614),T(28571),T(90474),T(31978),T(83760),T(52755),T(64771),T(40055),T(59314),T(90110),T(13594),T(81741),T(82601),T(49225),T(48807),T(84066),T(75781),T(58362),T(78644),T(76093),T(83062),T(52528),T(17817),T(21865),T(56913),T(74482),T(34563),T(35598),T(77139),T(78511),T(53665),T(68569),T(32620),T(88067),T(23084),T(56720),T(62227),T(31663)},95899:(W,G,T)=>{var L=T(33051),R={};function k(){this._coordinateSystems=[]}k.prototype={constructor:k,create:function(D,E){var I=[];L.each(R,function(S,_){var g=S.create(D,E);I=I.concat(g||[])}),this._coordinateSystems=I},update:function(D,E){L.each(this._coordinateSystems,function(I){I.update&&I.update(D,E)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},k.register=function(D,E){R[D]=E},k.get=function(D){return R[D]};var O=k;W.exports=O},59935:(W,G,T)=>{var L=T(33051),R=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];W.exports=function(k){L.each(R,function(O){this[O]=L.bind(k[O],k)},this)}},75324:(W,G,T)=>{var L=T(70492),R=T(33051);W.exports=function(k,O){R.each(O,function(D){D.update="updateView",L.registerAction(D,function(E,I){var S={};return I.eachComponent({mainType:"series",subType:k,query:E},function(_){_[D.method]&&_[D.method](E.name,E.dataIndex);var g=_.getData();g.each(function(u){var c=g.getName(u);S[c]=_.isSelected(c)||!1})}),{name:E.name,selected:S,seriesId:E.seriesId}})})}},28401:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(60553).updateCenterAndZoom;L.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(O,D){var E=O.componentType||"series";D.eachComponent({mainType:E,query:O},function(I){var S=I.coordinateSystem;if(S.type==="geo"){var _=k(S,O,I.get("scaleLimit"));I.setCenter&&I.setCenter(_.center),I.setZoom&&I.setZoom(_.zoom),E==="series"&&R.each(I.seriesGroup,function(g){g.setCenter(_.center),g.setZoom(_.zoom)})}})})},60553:(W,G)=>{G.updateCenterAndZoom=function(T,L,R){var k=T.getZoom(),O=T.getCenter(),D=L.zoom,E=T.dataToPoint(O);if(L.dx!=null&&L.dy!=null&&(E[0]-=L.dx,E[1]-=L.dy,O=T.pointToData(E),T.setCenter(O)),D!=null){if(R){var I=R.min||0,S=R.max||1/0;D=Math.max(Math.min(k*D,S),I)/k}T.scale[0]*=D,T.scale[1]*=D;var _=T.position,g=(L.originX-_[0])*(D-1),u=(L.originY-_[1])*(D-1);_[0]-=g,_[1]-=u,T.updateTransform(),O=T.pointToData(E),T.setCenter(O),T.setZoom(D*k)}return{center:T.getCenter(),zoom:T.getZoom()}}},40451:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(79093),O=k.layout,D=k.largeLayout;T(77532),T(90791),T(33207),T(84617),L.registerLayout(L.PRIORITY.VISUAL.LAYOUT,R.curry(O,"bar")),L.registerLayout(L.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,D),L.registerVisual({seriesType:"bar",reset:function(E){E.getData().setVisual("legendSymbol","roundRect")}})},90791:(W,G,T)=>{var L=T(489).extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var R=this.get("progressiveThreshold"),k=this.get("largeThreshold");return k>R&&(R=k),R},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});W.exports=L},33207:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(33051),k=T(51177),O=T(7905).setLabel,D=T(4272),E=T(98378),I=T(10712),S=T(8524),_=T(270).throttle,g=T(22963).createClipPath,u=T(39529),c=["itemStyle","barBorderWidth"],l=[0,0];R.extend(D.prototype,E);var e=L.extendChartView({type:"bar",render:function(y,x,w){this._updateDrawMode(y);var M=y.get("coordinateSystem");return M!=="cartesian2d"&&M!=="polar"||(this._isLargeDraw?this._renderLarge(y,x,w):this._renderNormal(y,x,w)),this.group},incrementalPrepareRender:function(y,x,w){this._clear(),this._updateDrawMode(y)},incrementalRender:function(y,x,w,M){this._incrementalRenderLarge(y,x)},_updateDrawMode:function(y){var x=y.pipelineContext.large;(this._isLargeDraw==null||x^this._isLargeDraw)&&(this._isLargeDraw=x,this._clear())},_renderNormal:function(y,x,w){var M,C=this.group,A=y.getData(),P=this._data,b=y.coordinateSystem,N=b.getBaseAxis();b.type==="cartesian2d"?M=N.isHorizontal():b.type==="polar"&&(M=N.dim==="angle");var B=y.isAnimationEnabled()?y:null,z=y.get("clip",!0),F=function(Z,q){var tt=Z.getArea&&Z.getArea();if(Z.type==="cartesian2d"){var $=Z.getBaseAxis();if($.type!=="category"||!$.onBand){var rt=q.getLayout("bandWidth");$.isHorizontal()?(tt.x-=rt,tt.width+=2*rt):(tt.y-=rt,tt.height+=2*rt)}}return tt}(b,A);C.removeClipPath();var V=y.get("roundCap",!0),H=y.get("showBackground",!0),U=y.getModel("backgroundStyle"),j=U.get("barBorderRadius")||0,X=[],Y=this._backgroundEls||[],J=function(Z){var q=n[b.type](A,Z),tt=function($,rt,et){return new($.type==="polar"?k.Sector:k.Rect)({shape:m(rt,et,$),silent:!0,z2:0})}(b,M,q);return tt.useStyle(U.getBarItemStyle()),b.type==="cartesian2d"&&tt.setShape("r",j),X[Z]=tt,tt};A.diff(P).add(function(Z){var q=A.getItemModel(Z),tt=n[b.type](A,Z,q);if(H&&J(Z),A.hasValue(Z)){if(z&&s[b.type](F,tt))return void C.remove($);var $=a[b.type](Z,tt,M,B,!1,V);A.setItemGraphicEl(Z,$),C.add($),p($,A,Z,q,tt,y,M,b.type==="polar")}}).update(function(Z,q){var tt=A.getItemModel(Z),$=n[b.type](A,Z,tt);if(H){var rt;Y.length===0?rt=J(q):((rt=Y[q]).useStyle(U.getBarItemStyle()),b.type==="cartesian2d"&&rt.setShape("r",j),X[Z]=rt);var et=n[b.type](A,Z),it=m(M,et,b);k.updateProps(rt,{shape:it},B,Z)}var ot=P.getItemGraphicEl(q);if(A.hasValue(Z)){if(z&&s[b.type](F,$))return void C.remove(ot);ot?k.updateProps(ot,{shape:$},B,Z):ot=a[b.type](Z,$,M,B,!0,V),A.setItemGraphicEl(Z,ot),C.add(ot),p(ot,A,Z,tt,$,y,M,b.type==="polar")}else C.remove(ot)}).remove(function(Z){var q=P.getItemGraphicEl(Z);b.type==="cartesian2d"?q&&o(Z,B,q):q&&r(Z,B,q)}).execute();var K=this._backgroundGroup||(this._backgroundGroup=new S);K.removeAll();for(var Q=0;Q<X.length;++Q)K.add(X[Q]);C.add(K),this._backgroundEls=X,this._data=A},_renderLarge:function(y,x,w){this._clear(),f(y,this.group);var M=y.get("clip",!0)?g(y.coordinateSystem,!1,y):null;M?this.group.setClipPath(M):this.group.removeClipPath()},_incrementalRenderLarge:function(y,x){this._removeBackground(),f(x,this.group,!0)},dispose:R.noop,remove:function(y){this._clear(y)},_clear:function(y){var x=this.group,w=this._data;y&&y.get("animation")&&w&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],w.eachItemGraphicEl(function(M){M.type==="sector"?r(M.dataIndex,y,M):o(M.dataIndex,y,M)})):x.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}}),t=Math.max,i=Math.min,s={cartesian2d:function(y,x){var w=x.width<0?-1:1,M=x.height<0?-1:1;w<0&&(x.x+=x.width,x.width=-x.width),M<0&&(x.y+=x.height,x.height=-x.height);var C=t(x.x,y.x),A=i(x.x+x.width,y.x+y.width),P=t(x.y,y.y),b=i(x.y+x.height,y.y+y.height);x.x=C,x.y=P,x.width=A-C,x.height=b-P;var N=x.width<0||x.height<0;return w<0&&(x.x+=x.width,x.width=-x.width),M<0&&(x.y+=x.height,x.height=-x.height),N},polar:function(y,x){var w=x.r0<=x.r?1:-1;if(w<0){var M=x.r;x.r=x.r0,x.r0=M}M=i(x.r,y.r);var C=t(x.r0,y.r0);x.r=M,x.r0=C;var A=M-C<0;return w<0&&(M=x.r,x.r=x.r0,x.r0=M),A}},a={cartesian2d:function(y,x,w,M,C){var A=new k.Rect({shape:R.extend({},x),z2:1});if(A.name="item",M){var P=w?"height":"width",b={};A.shape[P]=0,b[P]=x[P],k[C?"updateProps":"initProps"](A,{shape:b},M,y)}return A},polar:function(y,x,w,M,C,A){var P=x.startAngle<x.endAngle,b=new(!w&&A?u:k.Sector)({shape:R.defaults({clockwise:P},x),z2:1});if(b.name="item",M){var N=w?"r":"endAngle",B={};b.shape[N]=w?0:x.startAngle,B[N]=x[N],k[C?"updateProps":"initProps"](b,{shape:B},M,y)}return b}};function o(y,x,w){w.style.text=null,k.updateProps(w,{shape:{width:0}},x,y,function(){w.parent&&w.parent.remove(w)})}function r(y,x,w){w.style.text=null,k.updateProps(w,{shape:{r:w.shape.r0}},x,y,function(){w.parent&&w.parent.remove(w)})}var n={cartesian2d:function(y,x,w){var M=y.getItemLayout(x),C=w?function(b,N){var B=b.get(c)||0,z=isNaN(N.width)?Number.MAX_VALUE:Math.abs(N.width),F=isNaN(N.height)?Number.MAX_VALUE:Math.abs(N.height);return Math.min(B,z,F)}(w,M):0,A=M.width>0?1:-1,P=M.height>0?1:-1;return{x:M.x+A*C/2,y:M.y+P*C/2,width:M.width-A*C,height:M.height-P*C}},polar:function(y,x,w){var M=y.getItemLayout(x);return{cx:M.cx,cy:M.cy,r0:M.r0,r:M.r,startAngle:M.startAngle,endAngle:M.endAngle}}};function h(y){return y.startAngle!=null&&y.endAngle!=null&&y.startAngle===y.endAngle}function p(y,x,w,M,C,A,P,b){var N=x.getItemVisual(w,"color"),B=x.getItemVisual(w,"opacity"),z=x.getVisual("borderColor"),F=M.getModel("itemStyle"),V=M.getModel("emphasis.itemStyle").getBarItemStyle();b||y.setShape("r",F.get("barBorderRadius")||0),y.useStyle(R.defaults({stroke:h(C)?"none":z,fill:h(C)?"none":N,opacity:B},F.getBarItemStyle()));var H=M.getShallow("cursor");H&&y.attr("cursor",H);var U=P?C.height>0?"bottom":"top":C.width>0?"left":"right";b||O(y.style,V,M,N,A,w,U),h(C)&&(V.fill=V.stroke="none"),k.setHoverStyle(y,V)}var d=I.extend({type:"largeBar",shape:{points:[]},buildPath:function(y,x){for(var w=x.points,M=this.__startPoint,C=this.__baseDimIdx,A=0;A<w.length;A+=2)M[C]=w[A+C],y.moveTo(M[0],M[1]),y.lineTo(w[A],w[A+1])}});function f(y,x,w){var M=y.getData(),C=[],A=M.getLayout("valueAxisHorizontal")?1:0;C[1-A]=M.getLayout("valueAxisStart");var P=M.getLayout("largeDataIndices"),b=M.getLayout("barWidth"),N=y.getModel("backgroundStyle");if(y.get("showBackground",!0)){var B=M.getLayout("largeBackgroundPoints"),z=[];z[1-A]=M.getLayout("backgroundStart");var F=new d({shape:{points:B},incremental:!!w,__startPoint:z,__baseDimIdx:A,__largeDataIndices:P,__barWidth:b,silent:!0,z2:0});(function(H,U,j){var X=U.get("borderColor")||U.get("color"),Y=U.getItemStyle(["color","borderColor"]);H.useStyle(Y),H.style.fill=null,H.style.stroke=X,H.style.lineWidth=j.getLayout("barWidth")})(F,N,M),x.add(F)}var V=new d({shape:{points:M.getLayout("largePoints")},incremental:!!w,__startPoint:C,__baseDimIdx:A,__largeDataIndices:P,__barWidth:b});x.add(V),function(H,U,j){var X=j.getVisual("borderColor")||j.getVisual("color"),Y=U.getModel("itemStyle").getItemStyle(["color","borderColor"]);H.useStyle(Y),H.style.fill=null,H.style.stroke=X,H.style.lineWidth=j.getLayout("barWidth")}(V,y,M),V.seriesIndex=y.seriesIndex,y.get("silent")||(V.on("mousedown",v),V.on("mousemove",v))}var v=_(function(y){var x=function(w,M,C){var A=w.__baseDimIdx,P=1-A,b=w.shape.points,N=w.__largeDataIndices,B=Math.abs(w.__barWidth/2),z=w.__startPoint[P];l[0]=M,l[1]=C;for(var F=l[A],V=l[1-A],H=F-B,U=F+B,j=0,X=b.length/2;j<X;j++){var Y=2*j,J=b[Y+A],K=b[Y+P];if(J>=H&&J<=U&&(z<=K?V>=z&&V<=K:V>=K&&V<=z))return N[j]}return-1}(this,y.offsetX,y.offsetY);this.dataIndex=x>=0?x:null},30,!1);function m(y,x,w){var M,C=w.type==="polar";return M=C?w.getArea():w.grid.getRect(),C?{cx:M.cx,cy:M.cy,r0:y?M.r0:x.r0,r:y?M.r:x.r,startAngle:y?x.startAngle:0,endAngle:y?x.endAngle:2*Math.PI}:{x:y?x.x:M.x,y:y?M.y:x.y,width:y?x.width:M.width,height:y?M.height:x.height}}W.exports=e},489:(W,G,T)=>{var L=T(93321),R=T(40488),k=L.extend({type:"series.__base_bar__",getInitialData:function(O,D){return R(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(O){var D=this.coordinateSystem;if(D){var E=D.dataToPoint(D.clampData(O)),I=this.getData(),S=I.getLayout("offset"),_=I.getLayout("size");return E[D.getBaseAxis().isHorizontal()?0:1]+=S+_/2,E}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});W.exports=k},77346:(W,G,T)=>{var L=T(489).extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(k){return k.stack=null,L.superApply(this,"getInitialData",arguments)}}),R=L;W.exports=R},25874:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(51177),O=T(41525).createSymbol,D=T(85669),E=D.parsePercent,I=D.isNumeric,S=T(7905).setLabel,_=["itemStyle","borderWidth"],g=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],u=new k.Circle;function c(M,C,A,P){var b=M.getItemLayout(C),N=A.get("symbolRepeat"),B=A.get("symbolClip"),z=A.get("symbolPosition")||"start",F=(A.get("symbolRotate")||0)*Math.PI/180||0,V=A.get("symbolPatternSize")||2,H=A.isAnimationEnabled(),U={dataIndex:C,layout:b,itemModel:A,symbolType:M.getItemVisual(C,"symbol")||"circle",color:M.getItemVisual(C,"color"),symbolClip:B,symbolRepeat:N,symbolRepeatDirection:A.get("symbolRepeatDirection"),symbolPatternSize:V,rotation:F,animationModel:H?A:null,hoverAnimation:H&&A.get("hoverAnimation"),z2:A.getShallow("z",!0)||0};(function(Y,J,K,Q,Z){var q,tt=Q.valueDim,$=Y.get("symbolBoundingData"),rt=Q.coordSys.getOtherAxis(Q.coordSys.getBaseAxis()),et=rt.toGlobalCoord(rt.dataToCoord(0)),it=1-+(K[tt.wh]<=0);if(R.isArray($)){var ot=[l(rt,$[0])-et,l(rt,$[1])-et];ot[1]<ot[0]&&ot.reverse(),q=ot[it]}else q=$!=null?l(rt,$)-et:J?Q.coordSysExtent[tt.index][it]-et:K[tt.wh];Z.boundingLength=q,J&&(Z.repeatCutLength=K[tt.wh]),Z.pxSign=q>0?1:q<0?-1:0})(A,N,b,P,U),function(Y,J,K,Q,Z,q,tt,$,rt,et){var it=rt.valueDim,ot=rt.categoryDim,st=Math.abs(K[ot.wh]),at=Y.getItemVisual(J,"symbolSize");R.isArray(at)?at=at.slice():(at==null&&(at="100%"),at=[at,at]),at[ot.index]=E(at[ot.index],st),at[it.index]=E(at[it.index],Q?st:Math.abs(q)),et.symbolSize=at,(et.symbolScale=[at[0]/$,at[1]/$])[it.index]*=(rt.isHorizontal?-1:1)*tt}(M,C,b,N,0,U.boundingLength,U.pxSign,V,P,U),function(Y,J,K,Q,Z){var q=Y.get(_)||0;q&&(u.attr({scale:J.slice(),rotation:K}),u.updateTransform(),q/=u.getLineScale(),q*=J[Q.valueDim.index]),Z.valueLineWidth=q}(A,U.symbolScale,F,P,U);var j=U.symbolSize,X=A.get("symbolOffset");return R.isArray(X)&&(X=[E(X[0],j[0]),E(X[1],j[1])]),function(Y,J,K,Q,Z,q,tt,$,rt,et,it,ot){var st=it.categoryDim,at=it.valueDim,vt=ot.pxSign,yt=Math.max(J[at.index]+$,0),gt=yt;if(Q){var pt=Math.abs(rt),bt=R.retrieve(Y.get("symbolMargin"),"15%")+"",mt=!1;bt.lastIndexOf("!")===bt.length-1&&(mt=!0,bt=bt.slice(0,bt.length-1)),bt=E(bt,J[at.index]);var nt=Math.max(yt+2*bt,0),lt=mt?0:2*bt,ct=I(Q),ht=ct?Q:x((pt+lt)/nt);nt=yt+2*(bt=(pt-ht*yt)/2/(mt?ht:ht-1)),lt=mt?0:2*bt,ct||Q==="fixed"||(ht=et?x((Math.abs(et)+lt)/nt):0),gt=ht*nt-lt,ot.repeatTimes=ht,ot.symbolMargin=bt}var ft=vt*(gt/2),_t=ot.pathPosition=[];_t[st.index]=K[st.wh]/2,_t[at.index]=tt==="start"?ft:tt==="end"?rt-ft:rt/2,q&&(_t[0]+=q[0],_t[1]+=q[1]);var wt=ot.bundlePosition=[];wt[st.index]=K[st.xy],wt[at.index]=K[at.xy];var Tt=ot.barRectShape=R.extend({},K);Tt[at.wh]=vt*Math.max(Math.abs(K[at.wh]),Math.abs(_t[at.index]+ft)),Tt[st.wh]=K[st.wh];var It=ot.clipShape={};It[st.xy]=-K[st.xy],It[st.wh]=it.ecSize[st.wh],It[at.xy]=0,It[at.wh]=K[at.wh]}(A,j,b,N,0,X,z,U.valueLineWidth,U.boundingLength,U.repeatCutLength,P,U),U}function l(M,C){return M.toGlobalCoord(M.dataToCoord(M.scale.parse(C)))}function e(M){var C=M.symbolPatternSize,A=O(M.symbolType,-C/2,-C/2,C,C,M.color);return A.attr({culling:!0}),A.type!=="image"&&A.setStyle({strokeNoScale:!0}),A}function t(M,C,A,P){var b=M.__pictorialBundle,N=A.symbolSize,B=A.valueLineWidth,z=A.pathPosition,F=C.valueDim,V=A.repeatTimes||0,H=0,U=N[C.valueDim.index]+B+2*A.symbolMargin;for(v(M,function(Q){Q.__pictorialAnimationIndex=H,Q.__pictorialRepeatTimes=V,H<V?m(Q,null,Y(H),A,P):m(Q,null,{scale:[0,0]},A,P,function(){b.remove(Q)}),h(Q,A),H++});H<V;H++){var j=e(A);j.__pictorialAnimationIndex=H,j.__pictorialRepeatTimes=V,b.add(j);var X=Y(H);m(j,{position:X.position,scale:[0,0]},{scale:X.scale,rotation:X.rotation},A,P),j.on("mouseover",J).on("mouseout",K),h(j,A)}function Y(Q){var Z=z.slice(),q=A.pxSign,tt=Q;return(A.symbolRepeatDirection==="start"?q>0:q<0)&&(tt=V-1-Q),Z[F.index]=U*(tt-V/2+.5)+z[F.index],{position:Z,scale:A.symbolScale.slice(),rotation:A.rotation}}function J(){v(M,function(Q){Q.trigger("emphasis")})}function K(){v(M,function(Q){Q.trigger("normal")})}}function i(M,C,A,P){var b=M.__pictorialBundle,N=M.__pictorialMainPath;N?m(N,null,{position:A.pathPosition.slice(),scale:A.symbolScale.slice(),rotation:A.rotation},A,P):(N=M.__pictorialMainPath=e(A),b.add(N),m(N,{position:A.pathPosition.slice(),scale:[0,0],rotation:A.rotation},{scale:A.symbolScale.slice()},A,P),N.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),h(N,A)}function s(M,C,A){var P=R.extend({},C.barRectShape),b=M.__pictorialBarRect;b?m(b,null,{shape:P},C,A):(b=M.__pictorialBarRect=new k.Rect({z2:2,shape:P,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),M.add(b))}function a(M,C,A,P){if(A.symbolClip){var b=M.__pictorialClipPath,N=R.extend({},A.clipShape),B=C.valueDim,z=A.animationModel,F=A.dataIndex;if(b)k.updateProps(b,{shape:N},z,F);else{N[B.wh]=0,b=new k.Rect({shape:N}),M.__pictorialBundle.setClipPath(b),M.__pictorialClipPath=b;var V={};V[B.wh]=A.clipShape[B.wh],k[P?"updateProps":"initProps"](b,{shape:V},z,F)}}}function o(M,C){var A=M.getItemModel(C);return A.getAnimationDelayParams=r,A.isAnimationEnabled=n,A}function r(M){return{index:M.__pictorialAnimationIndex,count:M.__pictorialRepeatTimes}}function n(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function h(M,C){M.off("emphasis").off("normal");var A=C.symbolScale.slice();C.hoverAnimation&&M.on("emphasis",function(){this.animateTo({scale:[1.1*A[0],1.1*A[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:A.slice()},400,"elasticOut")})}function p(M,C,A,P){var b=new k.Group,N=new k.Group;return b.add(N),b.__pictorialBundle=N,N.attr("position",A.bundlePosition.slice()),A.symbolRepeat?t(b,C,A):i(b,0,A),s(b,A,P),a(b,C,A,P),b.__pictorialShapeStr=f(M,A),b.__pictorialSymbolMeta=A,b}function d(M,C,A,P){var b=P.__pictorialBarRect;b&&(b.style.text=null);var N=[];v(P,function(B){N.push(B)}),P.__pictorialMainPath&&N.push(P.__pictorialMainPath),P.__pictorialClipPath&&(A=null),R.each(N,function(B){k.updateProps(B,{scale:[0,0]},A,C,function(){P.parent&&P.parent.remove(P)})}),M.setItemGraphicEl(C,null)}function f(M,C){return[M.getItemVisual(C.dataIndex,"symbol")||"none",!!C.symbolRepeat,!!C.symbolClip].join(":")}function v(M,C,A){R.each(M.__pictorialBundle.children(),function(P){P!==M.__pictorialBarRect&&C.call(A,P)})}function m(M,C,A,P,b,N){C&&M.attr(C),P.symbolClip&&!b?A&&M.attr(A):A&&k[b?"updateProps":"initProps"](M,A,P.animationModel,P.dataIndex,N)}function y(M,C,A){var P=A.color,b=A.dataIndex,N=A.itemModel,B=N.getModel("itemStyle").getItemStyle(["color"]),z=N.getModel("emphasis.itemStyle").getItemStyle(),F=N.getShallow("cursor");v(M,function(j){j.setColor(P),j.setStyle(R.defaults({fill:P,opacity:A.opacity},B)),k.setHoverStyle(j,z),F&&(j.cursor=F),j.z2=A.z2});var V={},H=C.valueDim.posDesc[+(A.boundingLength>0)],U=M.__pictorialBarRect;S(U.style,V,N,P,C.seriesModel,b,H),k.setHoverStyle(U,V)}function x(M){var C=Math.round(M);return Math.abs(M-C)<1e-4?C:Math.ceil(M)}var w=L.extendChartView({type:"pictorialBar",render:function(M,C,A){var P=this.group,b=M.getData(),N=this._data,B=M.coordinateSystem,z=!!B.getBaseAxis().isHorizontal(),F=B.grid.getRect(),V={ecSize:{width:A.getWidth(),height:A.getHeight()},seriesModel:M,coordSys:B,coordSysExtent:[[F.x,F.x+F.width],[F.y,F.y+F.height]],isHorizontal:z,valueDim:g[+z],categoryDim:g[1-z]};return b.diff(N).add(function(H){if(b.hasValue(H)){var U=o(b,H),j=c(b,H,U,V),X=p(b,V,j);b.setItemGraphicEl(H,X),P.add(X),y(X,V,j)}}).update(function(H,U){var j=N.getItemGraphicEl(U);if(b.hasValue(H)){var X=o(b,H),Y=c(b,H,X,V),J=f(b,Y);j&&J!==j.__pictorialShapeStr&&(P.remove(j),b.setItemGraphicEl(H,null),j=null),j?function(K,Q,Z){var q=Z.animationModel,tt=Z.dataIndex,$=K.__pictorialBundle;k.updateProps($,{position:Z.bundlePosition.slice()},q,tt),Z.symbolRepeat?t(K,Q,Z,!0):i(K,0,Z,!0),s(K,Z,!0),a(K,Q,Z,!0)}(j,V,Y):j=p(b,V,Y,!0),b.setItemGraphicEl(H,j),j.__pictorialSymbolMeta=Y,P.add(j),y(j,V,Y)}else P.remove(j)}).remove(function(H){var U=N.getItemGraphicEl(H);U&&d(N,H,U.__pictorialSymbolMeta.animationModel,U)}).execute(),this._data=b,this.group},dispose:R.noop,remove:function(M,C){var A=this.group,P=this._data;M.get("animation")?P&&P.eachItemGraphicEl(function(b){d(P,b.dataIndex,M,b)}):A.removeAll()}});W.exports=w},98378:(W,G,T)=>{var L=T(59066)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),R={getBarItemStyle:function(k){var O=L(this,k);if(this.getBorderLineDash){var D=this.getBorderLineDash();D&&(O.lineDash=D)}return O}};W.exports=R},7905:(W,G,T)=>{var L=T(51177),R=T(33140).getDefaultLabel;function k(O,D){O.textPosition==="outside"&&(O.textPosition=D)}G.setLabel=function(O,D,E,I,S,_,g){var u=E.getModel("label"),c=E.getModel("emphasis.label");L.setLabelStyle(O,D,u,c,{labelFetcher:S,labelDataIndex:_,defaultText:R(S.getData(),_),isRectText:!0,autoColor:I}),k(O),k(D)}},31978:(W,G,T)=>{var L=T(70492);T(57932),T(6010);var R=T(82655),k=T(42274);L.registerVisual(R),L.registerLayout(k)},57932:(W,G,T)=>{var L=T(33051),R=T(93321),k=T(4993).seriesModelMixin,O=R.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});L.mixin(O,k,!0);var D=O;W.exports=D},6010:(W,G,T)=>{var L=T(33051),R=T(75797),k=T(51177),O=T(10712),D=["itemStyle"],E=["emphasis","itemStyle"],I=R.extend({type:"boxplot",render:function(l,e,t){var i=l.getData(),s=this.group,a=this._data;this._data||s.removeAll();var o=l.get("layout")==="horizontal"?1:0;i.diff(a).add(function(r){if(i.hasValue(r)){var n=_(i.getItemLayout(r),i,r,o,!0);i.setItemGraphicEl(r,n),s.add(n)}}).update(function(r,n){var h=a.getItemGraphicEl(n);if(i.hasValue(r)){var p=i.getItemLayout(r);h?g(p,h,i,r):h=_(p,i,r,o),s.add(h),i.setItemGraphicEl(r,h)}else s.remove(h)}).remove(function(r){var n=a.getItemGraphicEl(r);n&&s.remove(n)}).execute(),this._data=i},remove:function(l){var e=this.group,t=this._data;this._data=null,t&&t.eachItemGraphicEl(function(i){i&&e.remove(i)})},dispose:L.noop}),S=O.extend({type:"boxplotBoxPath",shape:{},buildPath:function(l,e){var t=e.points,i=0;for(l.moveTo(t[i][0],t[i][1]),i++;i<4;i++)l.lineTo(t[i][0],t[i][1]);for(l.closePath();i<t.length;i++)l.moveTo(t[i][0],t[i][1]),i++,l.lineTo(t[i][0],t[i][1])}});function _(l,e,t,i,s){var a=l.ends,o=new S({shape:{points:s?u(a,i,l):a}});return g(l,o,e,t,s),o}function g(l,e,t,i,s){var a=t.hostModel;(0,k[s?"initProps":"updateProps"])(e,{shape:{points:l.ends}},a,i);var o=t.getItemModel(i),r=o.getModel(D),n=t.getItemVisual(i,"color"),h=r.getItemStyle(["borderColor"]);h.stroke=n,h.strokeNoScale=!0,e.useStyle(h),e.z2=100;var p=o.getModel(E).getItemStyle();k.setHoverStyle(e,p)}function u(l,e,t){return L.map(l,function(i){return(i=i.slice())[e]=t.initBaseline,i})}var c=I;W.exports=c},42274:(W,G,T)=>{var L=T(33051),R=T(85669).parsePercent,k=L.each;W.exports=function(O){var D=function(E){var I=[],S=[];return E.eachSeriesByType("boxplot",function(_){var g=_.getBaseAxis(),u=L.indexOf(S,g);u<0&&(u=S.length,S[u]=g,I[u]={axis:g,seriesModels:[]}),I[u].seriesModels.push(_)}),I}(O);k(D,function(E){var I=E.seriesModels;I.length&&(function(S){var _,g,u=S.axis,c=S.seriesModels,l=c.length,e=S.boxWidthList=[],t=S.boxOffsetList=[],i=[];if(u.type==="category")g=u.getBandWidth();else{var s=0;k(c,function(h){s=Math.max(s,h.getData().count())}),_=u.getExtent(),Math.abs(_[1]-_[0])}k(c,function(h){var p=h.get("boxWidth");L.isArray(p)||(p=[p,p]),i.push([R(p[0],g)||0,R(p[1],g)||0])});var a=.8*g-2,o=a/l*.3,r=(a-o*(l-1))/l,n=r/2-a/2;k(c,function(h,p){t.push(n),n+=o+r,e.push(Math.min(Math.max(r,i[p][0]),i[p][1]))})}(E),k(I,function(S,_){(function(g,u,c){var l=g.coordinateSystem,e=g.getData(),t=c/2,i=g.get("layout")==="horizontal"?0:1,s=1-i,a=["x","y"],o=e.mapDimension(a[i]),r=e.mapDimension(a[s],!0);if(!(o==null||r.length<5))for(var n=0;n<e.count();n++){var h=e.get(o,n),p=x(h,r[2],n),d=x(h,r[0],n),f=x(h,r[1],n),v=x(h,r[3],n),m=x(h,r[4],n),y=[];w(y,f,0),w(y,v,1),y.push(d,f,m,v),M(y,d),M(y,m),M(y,p),e.setItemLayout(n,{initBaseline:p[s],ends:y})}function x(C,A,P){var b,N=e.get(A,P),B=[];return B[i]=C,B[s]=N,isNaN(C)||isNaN(N)?b=[NaN,NaN]:(b=l.dataToPoint(B))[i]+=u,b}function w(C,A,P){var b=A.slice(),N=A.slice();b[i]+=t,N[i]-=t,P?C.push(b,N):C.push(N,b)}function M(C,A){var P=A.slice(),b=A.slice();P[i]-=t,b[i]+=t,C.push(P,b)}})(S,E.boxOffsetList[_],E.boxWidthList[_])}))})}},82655:W=>{var G=["itemStyle","borderColor"];W.exports=function(T,L){var R=T.get("color");T.eachRawSeriesByType("boxplot",function(k){var O=R[k.seriesIndex%R.length],D=k.getData();D.setVisual({legendSymbol:"roundRect",color:k.get(G)||O}),T.isSeriesFiltered(k)||D.each(function(E){var I=D.getItemModel(E);D.setItemVisual(E,{color:I.get(G,!0)})})})}},83760:(W,G,T)=>{var L=T(70492);T(27125),T(54835);var R=T(34470),k=T(45506),O=T(57018);L.registerPreprocessor(R),L.registerVisual(k),L.registerLayout(O)},27125:(W,G,T)=>{var L=T(33051),R=T(93321),k=T(4993).seriesModelMixin,O=R.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(E,I,S){var _=I.getItemLayout(E);return _&&S.rect(_.brushRect)}});L.mixin(O,k,!0);var D=O;W.exports=D},54835:(W,G,T)=>{var L=T(33051),R=T(75797),k=T(51177),O=T(10712),D=T(22963).createClipPath,E=["itemStyle"],I=["emphasis","itemStyle"],S=["color","color0","borderColor","borderColor0"],_=R.extend({type:"candlestick",render:function(o,r,n){this.group.removeClipPath(),this._updateDrawMode(o),this._isLargeDraw?this._renderLarge(o):this._renderNormal(o)},incrementalPrepareRender:function(o,r,n){this._clear(),this._updateDrawMode(o)},incrementalRender:function(o,r,n,h){this._isLargeDraw?this._incrementalRenderLarge(o,r):this._incrementalRenderNormal(o,r)},_updateDrawMode:function(o){var r=o.pipelineContext.large;(this._isLargeDraw==null||r^this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},_renderNormal:function(o){var r=o.getData(),n=this._data,h=this.group,p=r.getLayout("isSimpleBox"),d=o.get("clip",!0),f=o.coordinateSystem,v=f.getArea&&f.getArea();this._data||h.removeAll(),r.diff(n).add(function(m){if(r.hasValue(m)){var y,x=r.getItemLayout(m);if(d&&c(v,x))return;y=u(x,0,!0),k.initProps(y,{shape:{points:x.ends}},o,m),l(y,r,m,p),h.add(y),r.setItemGraphicEl(m,y)}}).update(function(m,y){var x=n.getItemGraphicEl(y);if(r.hasValue(m)){var w=r.getItemLayout(m);d&&c(v,w)?h.remove(x):(x?k.updateProps(x,{shape:{points:w.ends}},o,m):x=u(w),l(x,r,m,p),h.add(x),r.setItemGraphicEl(m,x))}else h.remove(x)}).remove(function(m){var y=n.getItemGraphicEl(m);y&&h.remove(y)}).execute(),this._data=r},_renderLarge:function(o){this._clear(),i(o,this.group);var r=o.get("clip",!0)?D(o.coordinateSystem,!1,o):null;r?this.group.setClipPath(r):this.group.removeClipPath()},_incrementalRenderNormal:function(o,r){for(var n,h=r.getData(),p=h.getLayout("isSimpleBox");(n=o.next())!=null;){var d;l(d=u(h.getItemLayout(n)),h,n,p),d.incremental=!0,this.group.add(d)}},_incrementalRenderLarge:function(o,r){i(r,this.group,!0)},remove:function(o){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:L.noop}),g=O.extend({type:"normalCandlestickBox",shape:{},buildPath:function(o,r){var n=r.points;this.__simpleBox?(o.moveTo(n[4][0],n[4][1]),o.lineTo(n[6][0],n[6][1])):(o.moveTo(n[0][0],n[0][1]),o.lineTo(n[1][0],n[1][1]),o.lineTo(n[2][0],n[2][1]),o.lineTo(n[3][0],n[3][1]),o.closePath(),o.moveTo(n[4][0],n[4][1]),o.lineTo(n[5][0],n[5][1]),o.moveTo(n[6][0],n[6][1]),o.lineTo(n[7][0],n[7][1]))}});function u(o,r,n){var h=o.ends;return new g({shape:{points:n?e(h,o):h},z2:100})}function c(o,r){for(var n=!0,h=0;h<r.ends.length;h++)if(o.contain(r.ends[h][0],r.ends[h][1])){n=!1;break}return n}function l(o,r,n,h){var p=r.getItemModel(n),d=p.getModel(E),f=r.getItemVisual(n,"color"),v=r.getItemVisual(n,"borderColor")||f,m=d.getItemStyle(S);o.useStyle(m),o.style.strokeNoScale=!0,o.style.fill=f,o.style.stroke=v,o.__simpleBox=h;var y=p.getModel(I).getItemStyle();k.setHoverStyle(o,y)}function e(o,r){return L.map(o,function(n){return(n=n.slice())[1]=r.initBaseline,n})}var t=O.extend({type:"largeCandlestickBox",shape:{},buildPath:function(o,r){for(var n=r.points,h=0;h<n.length;)if(this.__sign===n[h++]){var p=n[h++];o.moveTo(p,n[h++]),o.lineTo(p,n[h++])}else h+=3}});function i(o,r,n){var h=o.getData(),p=h.getLayout("largePoints"),d=new t({shape:{points:p},__sign:1});r.add(d);var f=new t({shape:{points:p},__sign:-1});r.add(f),s(1,d,o,h),s(-1,f,o,h),n&&(d.incremental=!0,f.incremental=!0)}function s(o,r,n,h){var p=o>0?"P":"N",d=h.getVisual("borderColor"+p)||h.getVisual("color"+p),f=n.getModel(E).getItemStyle(S);r.useStyle(f),r.style.fill=null,r.style.stroke=d}var a=_;W.exports=a},57018:(W,G,T)=>{var L=T(51177).subPixelOptimize,R=T(95682),k=T(85669).parsePercent,O=T(33051).retrieve2,D=typeof Float32Array<"u"?Float32Array:Array,E={seriesType:"candlestick",plan:R(),reset:function(S){var _=S.coordinateSystem,g=S.getData(),u=function(o,r){var n,h=o.getBaseAxis(),p=h.type==="category"?h.getBandWidth():(n=h.getExtent(),Math.abs(n[1]-n[0])/r.count()),d=k(O(o.get("barMaxWidth"),p),p),f=k(O(o.get("barMinWidth"),1),p),v=o.get("barWidth");return v!=null?k(v,p):Math.max(Math.min(p/2,d),f)}(S,g),c=["x","y"],l=g.mapDimension(c[0]),e=g.mapDimension(c[1],!0),t=e[0],i=e[1],s=e[2],a=e[3];if(g.setLayout({candleWidth:u,isSimpleBox:u<=1.3}),!(l==null||e.length<4))return{progress:S.pipelineContext.large?function(o,r){for(var n,h,p=new D(4*o.count),d=0,f=[],v=[];(h=o.next())!=null;){var m=r.get(l,h),y=r.get(t,h),x=r.get(i,h),w=r.get(s,h),M=r.get(a,h);isNaN(m)||isNaN(w)||isNaN(M)?(p[d++]=NaN,d+=3):(p[d++]=I(r,h,y,x,i),f[0]=m,f[1]=w,n=_.dataToPoint(f,null,v),p[d++]=n?n[0]:NaN,p[d++]=n?n[1]:NaN,f[1]=M,n=_.dataToPoint(f,null,v),p[d++]=n?n[1]:NaN)}r.setLayout("largePoints",p)}:function(o,r){for(var n;(n=o.next())!=null;){var h=r.get(l,n),p=r.get(t,n),d=r.get(i,n),f=r.get(s,n),v=r.get(a,n),m=Math.min(p,d),y=Math.max(p,d),x=P(m,h),w=P(y,h),M=P(f,h),C=P(v,h),A=[];b(A,w,0),b(A,x,1),A.push(B(C),B(w),B(M),B(x)),r.setItemLayout(n,{sign:I(r,n,p,d,i),initBaseline:p>d?w[1]:x[1],ends:A,brushRect:N(f,v,h)})}function P(z,F){var V=[];return V[0]=F,V[1]=z,isNaN(F)||isNaN(z)?[NaN,NaN]:_.dataToPoint(V)}function b(z,F,V){var H=F.slice(),U=F.slice();H[0]=L(H[0]+u/2,1,!1),U[0]=L(U[0]-u/2,1,!0),V?z.push(H,U):z.push(U,H)}function N(z,F,V){var H=P(z,V),U=P(F,V);return H[0]-=u/2,U[0]-=u/2,{x:H[0],y:H[1],width:u,height:U[1]-H[1]}}function B(z){return z[0]=L(z[0],1),z}}}}};function I(S,_,g,u,c){return g>u?-1:g<u?1:_>0?S.get(c,_-1)<=u?1:-1:1}W.exports=E},45506:(W,G,T)=>{var L=T(95682),R=["itemStyle","borderColor"],k=["itemStyle","borderColor0"],O=["itemStyle","color"],D=["itemStyle","color0"],E={seriesType:"candlestick",plan:L(),performRawSeries:!0,reset:function(I,S){if(I.getData().setVisual({legendSymbol:"roundRect",colorP:_(1,I),colorN:_(-1,I),borderColorP:g(1,I),borderColorN:g(-1,I)}),!S.isSeriesFiltered(I))return!I.pipelineContext.large&&{progress:function(u,c){for(var l;(l=u.next())!=null;){var e=c.getItemModel(l),t=c.getItemLayout(l).sign;c.setItemVisual(l,{color:_(t,e),borderColor:g(t,e)})}}};function _(u,c){return c.get(u>0?O:D)}function g(u,c){return c.get(u>0?R:k)}}};W.exports=E},34470:(W,G,T)=>{var L=T(33051);W.exports=function(R){R&&L.isArray(R.series)&&L.each(R.series,function(k){L.isObject(k)&&k.type==="k"&&(k.type="candlestick")})}},81741:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=T(51177),k=T(33140).getDefaultLabel,O=T(40488),D=T(79093).getLayoutOnAxis,E=T(4130),I=T(93321),S=T(4272),_=T(75797),g=T(22963).createClipPath,u=T(7409),c=T(55389),l=T(50878),e=T(54649),t=T(64888),i=R.CACHED_LABEL_STYLE_PROPERTIES,s=["itemStyle"],a=["emphasis","itemStyle"],o=["label"],r=["emphasis","label"],n={cartesian2d:u,geo:c,singleAxis:l,polar:e,calendar:t};function h(P,b,N,B,z){N[P]==null||z||(b[P]=N[P],N[P]=B[P])}function p(P,b,N,B){var z=P.get("renderItem"),F=P.coordinateSystem,V={};F&&(V=F.prepareCustoms?F.prepareCustoms():n[F.type](F));var H,U,j,X,Y,J=L.defaults({getWidth:B.getWidth,getHeight:B.getHeight,getZr:B.getZr,getDevicePixelRatio:B.getDevicePixelRatio,value:function(q,tt){return tt==null&&(tt=H),b.get(b.getDimension(q||0),tt)},style:function(q,tt){tt==null&&(tt=H),Z(tt);var $=U.getModel(s).getItemStyle();Y!=null&&($.fill=Y);var rt=b.getItemVisual(tt,"opacity");rt!=null&&($.opacity=rt);var et=q?x(q,j):j;return R.setTextStyle($,et,null,{autoColor:Y,isRectText:!0}),$.text=et.getShallow("show")?L.retrieve2(P.getFormattedLabel(tt,"normal"),k(b,tt)):null,q&&w($,q),$},styleEmphasis:function(q,tt){tt==null&&(tt=H),Z(tt);var $=U.getModel(a).getItemStyle(),rt=q?x(q,X):X;return R.setTextStyle($,rt,null,{isRectText:!0},!0),$.text=rt.getShallow("show")?L.retrieve3(P.getFormattedLabel(tt,"emphasis"),P.getFormattedLabel(tt,"normal"),k(b,tt)):null,q&&w($,q),$},visual:function(q,tt){return tt==null&&(tt=H),b.getItemVisual(tt,q)},barLayout:function(q){if(F.getBaseAxis){var tt=F.getBaseAxis();return D(L.defaults({axis:tt},q),B)}},currentSeriesIndices:function(){return N.getCurrentSeriesIndices()},font:function(q){return R.getFont(q,N)}},V.api||{}),K={context:{},seriesId:P.id,seriesName:P.name,seriesIndex:P.seriesIndex,coordSys:V.coordSys,dataInsideLength:b.count(),encode:d(P.getData())},Q=!0;return function(q,tt){return H=q,Q=!0,z&&z(L.defaults({dataIndexInside:q,dataIndex:b.getRawIndex(q),actionType:tt?tt.type:null},K),J)};function Z(q){q==null&&(q=H),Q&&(U=b.getItemModel(q),j=U.getModel(o),X=U.getModel(r),Y=b.getItemVisual(q,"color"),Q=!1)}}function d(P){var b={};return L.each(P.dimensions,function(N,B){var z=P.getDimensionInfo(N);if(!z.isExtraCoord){var F=z.coordDim;(b[F]=b[F]||[])[z.coordDimIndex]=B}}),b}function f(P,b,N,B,z,F){return(P=v(P,b,N,B,z,F,!0))&&F.setItemGraphicEl(b,P),P}function v(P,b,N,B,z,F,V){var H,U=!N,j=(N=N||{}).type,X=N.shape,Y=N.style;if(P&&(U||j!=null&&j!==P.__customGraphicType||j==="path"&&(H=X)&&(H.hasOwnProperty("pathData")||H.hasOwnProperty("d"))&&C(X)!==P.__customPathData||j==="image"&&A(Y,"image")&&Y.image!==P.__customImagePath||j==="text"&&A(X,"text")&&Y.text!==P.__customText)&&(z.remove(P),P=null),!U){var J=!P;return!P&&(P=function(K){var Q,Z=K.type;if(Z==="path"){var q=K.shape,tt=q.width!=null&&q.height!=null?{x:q.x||0,y:q.y||0,width:q.width,height:q.height}:null,$=C(q);(Q=R.makePath($,null,tt,q.layout||"center")).__customPathData=$}else if(Z==="image")(Q=new R.Image({})).__customImagePath=K.style.image;else if(Z==="text")(Q=new R.Text({})).__customText=K.style.text;else if(Z==="group")Q=new R.Group;else{if(Z==="compoundPath")throw new Error('"compoundPath" is not supported yet.');Q=new(R.getShapeClass(Z))}return Q.__customGraphicType=Z,Q.name=K.name,Q}(N)),function(K,Q,Z,q,tt,$,rt){var et={},it=Z.style||{};if(Z.shape&&(et.shape=L.clone(Z.shape)),Z.position&&(et.position=Z.position.slice()),Z.scale&&(et.scale=Z.scale.slice()),Z.origin&&(et.origin=Z.origin.slice()),Z.rotation&&(et.rotation=Z.rotation),K.type==="image"&&Z.style){var ot=et.style={};L.each(["x","y","width","height"],function(vt){h(vt,ot,it,K.style,$)})}if(K.type==="text"&&Z.style&&(ot=et.style={},L.each(["x","y"],function(vt){h(vt,ot,it,K.style,$)}),!it.hasOwnProperty("textFill")&&it.fill&&(it.textFill=it.fill),!it.hasOwnProperty("textStroke")&&it.stroke&&(it.textStroke=it.stroke)),K.type!=="group"&&(K.useStyle(it),$)){K.style.opacity=0;var st=it.opacity;st==null&&(st=1),R.initProps(K,{style:{opacity:st}},q,Q)}$?K.attr(et):R.updateProps(K,et,q,Q),Z.hasOwnProperty("z2")&&K.attr("z2",Z.z2||0),Z.hasOwnProperty("silent")&&K.attr("silent",Z.silent),Z.hasOwnProperty("invisible")&&K.attr("invisible",Z.invisible),Z.hasOwnProperty("ignore")&&K.attr("ignore",Z.ignore),Z.hasOwnProperty("info")&&K.attr("info",Z.info);var at=Z.styleEmphasis;R.setElementHoverStyle(K,at),rt&&R.setAsHighDownDispatcher(K,at!==!1)}(P,b,N,B,0,J,V),j==="group"&&function(K,Q,Z,q,tt){var $=Z.children,rt=$?$.length:0,et=Z.$mergeChildren,it=et==="byName"||Z.diffChildrenByName,ot=et===!1;if(rt||it||ot){if(it)return st={oldChildren:K.children()||[],newChildren:$||[],dataIndex:Q,animatableModel:q,group:K,data:tt},void new E(st.oldChildren,st.newChildren,m,m,st).add(y).update(y).remove(M).execute();var st;ot&&K.removeAll();for(var at=0;at<rt;at++)$[at]&&v(K.childAt(at),Q,$[at],q,K,tt)}}(P,b,N,B,F),z.add(P),P}}function m(P,b){var N=P&&P.name;return N!=null?N:"e\0\0"+b}function y(P,b){var N=this.context,B=P!=null?N.newChildren[P]:null;v(b!=null?N.oldChildren[b]:null,N.dataIndex,B,N.animatableModel,N.group,N.data)}function x(P,b){var N=new S({},b);return L.each(i,function(B,z){P.hasOwnProperty(B)&&(N.option[z]=P[B])}),N}function w(P,b){for(var N in b)!b.hasOwnProperty(N)&&i.hasOwnProperty(N)||(P[N]=b[N])}function M(P){var b=this.context,N=b.oldChildren[P];N&&b.group.remove(N)}function C(P){return P&&(P.pathData||P.d)}function A(P,b){return P&&P.hasOwnProperty(b)}I.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(P,b){return O(this.getSource(),this)},getDataParams:function(P,b,N){var B=I.prototype.getDataParams.apply(this,arguments);return N&&(B.info=N.info),B}}),_.extend({type:"custom",_data:null,render:function(P,b,N,B){var z=this._data,F=P.getData(),V=this.group,H=p(P,F,b,N);F.diff(z).add(function(j){f(null,j,H(j,B),P,V,F)}).update(function(j,X){f(z.getItemGraphicEl(X),j,H(j,B),P,V,F)}).remove(function(j){var X=z.getItemGraphicEl(j);X&&V.remove(X)}).execute();var U=P.get("clip",!0)?g(P.coordinateSystem,!1,P):null;U?V.setClipPath(U):V.removeClipPath(),this._data=F},incrementalPrepareRender:function(P,b,N){this.group.removeAll(),this._data=null},incrementalRender:function(P,b,N,B,z){var F=b.getData(),V=p(b,F,N,B);function H(j){j.isGroup||(j.incremental=!0,j.useHoverLayer=!0)}for(var U=P.start;U<P.end;U++)f(null,U,V(U,z),b,this.group,F).traverse(H)},dispose:L.noop,filterForExposedEvent:function(P,b,N,B){var z=b.element;if(z==null||N.name===z)return!0;for(;(N=N.parent)&&N!==this.group;)if(N.name===z)return!0;return!1}})},52755:(W,G,T)=>{var L=T(70492);T(6344),T(11243);var R=T(34586),k=T(21149);L.registerVisual(R("effectScatter","circle")),L.registerLayout(k("effectScatter"))},6344:(W,G,T)=>{var L=T(40488),R=T(93321).extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(k,O){return L(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});W.exports=R},11243:(W,G,T)=>{var L=T(70492),R=T(68162),k=T(53036),O=T(32892),D=T(21149),E=L.extendChartView({type:"effectScatter",init:function(){this._symbolDraw=new R(k)},render:function(I,S,_){var g=I.getData(),u=this._symbolDraw;u.updateData(g),this.group.add(u.group)},updateTransform:function(I,S,_){var g=I.getData();this.group.dirty();var u=D().reset(I);u.progress&&u.progress({start:0,end:g.count()},g),this._symbolDraw.updateLayout(g)},_updateGroupTransform:function(I){var S=I.coordinateSystem;S&&S.getRoamTransform&&(this.group.transform=O.clone(S.getRoamTransform()),this.group.decomposeTransform())},remove:function(I,S){this._symbolDraw&&this._symbolDraw.remove(S)},dispose:function(){}});W.exports=E},66614:(W,G,T)=>{var L=T(70492);T(51711),T(54260);var R=T(69274),k=T(95378),O=T(22528);L.registerVisual(R("funnel")),L.registerLayout(k),L.registerProcessor(O("funnel"))},51711:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(23263),O=T(32234).defaultEmphasis,D=T(61772).makeSeriesEncodeForNameBased,E=T(72019),I=L.extendSeriesModel({type:"series.funnel",init:function(_){I.superApply(this,"init",arguments),this.legendVisualProvider=new E(R.bind(this.getData,this),R.bind(this.getRawData,this)),this._defaultLabelLine(_)},getInitialData:function(_,g){return k(this,{coordDimensions:["value"],encodeDefaulter:R.curry(D,this)})},_defaultLabelLine:function(_){O(_,"labelLine",["show"]);var g=_.labelLine,u=_.emphasis.labelLine;g.show=g.show&&_.label.show,u.show=u.show&&_.emphasis.label.show},getDataParams:function(_){var g=this.getData(),u=I.superCall(this,"getDataParams",_),c=g.mapDimension("value"),l=g.getSum(c);return u.percent=l?+(g.get(c,_)/l*100).toFixed(2):0,u.$vars.push("percent"),u},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}),S=I;W.exports=S},54260:(W,G,T)=>{var L=T(51177),R=T(33051),k=T(75797);function O(S,_){L.Group.call(this);var g=new L.Polygon,u=new L.Polyline,c=new L.Text;this.add(g),this.add(u),this.add(c),this.highDownOnUpdate=function(l,e){e==="emphasis"?(u.ignore=u.hoverIgnore,c.ignore=c.hoverIgnore):(u.ignore=u.normalIgnore,c.ignore=c.normalIgnore)},this.updateData(S,_,!0)}var D=O.prototype,E=["itemStyle","opacity"];D.updateData=function(S,_,g){var u=this.childAt(0),c=S.hostModel,l=S.getItemModel(_),e=S.getItemLayout(_),t=S.getItemModel(_).get(E);t=t==null?1:t,u.useStyle({}),g?(u.setShape({points:e.points}),u.setStyle({opacity:0}),L.initProps(u,{style:{opacity:t}},c,_)):L.updateProps(u,{style:{opacity:t},shape:{points:e.points}},c,_);var i=l.getModel("itemStyle"),s=S.getItemVisual(_,"color");u.setStyle(R.defaults({lineJoin:"round",fill:s},i.getItemStyle(["opacity"]))),u.hoverStyle=i.getModel("emphasis").getItemStyle(),this._updateLabel(S,_),L.setHoverStyle(this)},D._updateLabel=function(S,_){var g=this.childAt(1),u=this.childAt(2),c=S.hostModel,l=S.getItemModel(_),e=S.getItemLayout(_).label,t=S.getItemVisual(_,"color");L.updateProps(g,{shape:{points:e.linePoints||e.linePoints}},c,_),L.updateProps(u,{style:{x:e.x,y:e.y}},c,_),u.attr({rotation:e.rotation,origin:[e.x,e.y],z2:10});var i=l.getModel("label"),s=l.getModel("emphasis.label"),a=l.getModel("labelLine"),o=l.getModel("emphasis.labelLine");t=S.getItemVisual(_,"color"),L.setLabelStyle(u.style,u.hoverStyle={},i,s,{labelFetcher:S.hostModel,labelDataIndex:_,defaultText:S.getName(_),autoColor:t,useInsideStyle:!!e.inside},{textAlign:e.textAlign,textVerticalAlign:e.verticalAlign}),u.ignore=u.normalIgnore=!i.get("show"),u.hoverIgnore=!s.get("show"),g.ignore=g.normalIgnore=!a.get("show"),g.hoverIgnore=!o.get("show"),g.setStyle({stroke:t}),g.setStyle(a.getModel("lineStyle").getLineStyle()),g.hoverStyle=o.getModel("lineStyle").getLineStyle()},R.inherits(O,L.Group);var I=k.extend({type:"funnel",render:function(S,_,g){var u=S.getData(),c=this._data,l=this.group;u.diff(c).add(function(e){var t=new O(u,e);u.setItemGraphicEl(e,t),l.add(t)}).update(function(e,t){var i=c.getItemGraphicEl(t);i.updateData(u,e),l.add(i),u.setItemGraphicEl(e,i)}).remove(function(e){var t=c.getItemGraphicEl(e);l.remove(t)}).execute(),this._data=u},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});W.exports=I},95378:(W,G,T)=>{T(38175).__DEV__;var L=T(76172),R=T(85669),k=R.parsePercent,O=R.linearMap;W.exports=function(D,E,I){D.eachSeriesByType("funnel",function(S){var _=S.getData(),g=_.mapDimension("value"),u=S.get("sort"),c=function(b,N){return L.getLayoutRect(b.getBoxLayoutParams(),{width:N.getWidth(),height:N.getHeight()})}(S,E),l=function(b,N){for(var B=b.mapDimension("value"),z=b.mapArray(B,function(j){return j}),F=[],V=N==="ascending",H=0,U=b.count();H<U;H++)F[H]=H;return typeof N=="function"?F.sort(N):N!=="none"&&F.sort(function(j,X){return V?z[j]-z[X]:z[X]-z[j]}),F}(_,u),e=S.get("orient"),t=c.width,i=c.height,s=c.x,a=c.y,o=e==="horizontal"?[k(S.get("minSize"),i),k(S.get("maxSize"),i)]:[k(S.get("minSize"),t),k(S.get("maxSize"),t)],r=_.getDataExtent(g),n=S.get("min"),h=S.get("max");n==null&&(n=Math.min(r[0],0)),h==null&&(h=r[1]);var p=S.get("funnelAlign"),d=S.get("gap"),f=((e==="horizontal"?t:i)-d*(_.count()-1))/_.count(),v=function(b,N){if(e==="horizontal"){var B,z=_.get(g,b)||0,F=O(z,[n,h],o,!0);switch(p){case"top":B=a;break;case"center":B=a+(i-F)/2;break;case"bottom":B=a+(i-F)}return[[N,B],[N,B+F]]}z=_.get(g,b)||0;var V,H=O(z,[n,h],o,!0);switch(p){case"left":V=s;break;case"center":V=s+(t-H)/2;break;case"right":V=s+t-H}return[[V,N],[V+H,N]]};u==="ascending"&&(f=-f,d=-d,e==="horizontal"?s+=t:a+=i,l=l.reverse());for(var m=0;m<l.length;m++){var y=l[m],x=l[m+1],w=_.getItemModel(y);if(e==="horizontal"){var M=w.get("itemStyle.width");M==null?M=f:(M=k(M,t),u==="ascending"&&(M=-M));var C=v(y,s),A=v(x,s+M);s+=M+d,_.setItemLayout(y,{points:C.concat(A.slice().reverse())})}else{var P=w.get("itemStyle.height");P==null?P=f:(P=k(P,i),u==="ascending"&&(P=-P)),C=v(y,e==="horizontal"?s:a),A=v(x,e==="horizontal"?s+M:a+P),a+=P+d,_.setItemLayout(y,{points:C.concat(A.slice().reverse())})}}(function(b){b.each(function(N){var B,z,F,V,H=b.getItemModel(N),U=H.getModel("label").get("position"),j=H.get("orient"),X=H.getModel("labelLine"),Y=b.getItemLayout(N),J=Y.points,K=U==="inner"||U==="inside"||U==="center"||U==="insideLeft"||U==="insideRight";if(K)U==="insideLeft"?(z=(J[0][0]+J[3][0])/2+5,F=(J[0][1]+J[3][1])/2,B="left"):U==="insideRight"?(z=(J[1][0]+J[2][0])/2-5,F=(J[1][1]+J[2][1])/2,B="right"):(z=(J[0][0]+J[1][0]+J[2][0]+J[3][0])/4,F=(J[0][1]+J[1][1]+J[2][1]+J[3][1])/4,B="center"),V=[[z,F],[z,F]];else{var Q,Z,q,tt,$=X.get("length");U==="left"?(Q=(J[3][0]+J[0][0])/2,Z=(J[3][1]+J[0][1])/2,z=(q=Q-$)-5,B="right"):U==="right"?(Q=(J[1][0]+J[2][0])/2,Z=(J[1][1]+J[2][1])/2,z=(q=Q+$)+5,B="left"):U==="top"?(Q=(J[3][0]+J[0][0])/2,F=(tt=(Z=(J[3][1]+J[0][1])/2)-$)-5,B="center"):U==="bottom"?(Q=(J[1][0]+J[2][0])/2,F=(tt=(Z=(J[1][1]+J[2][1])/2)+$)+5,B="center"):U==="rightTop"?(Q=j==="horizontal"?J[3][0]:J[1][0],Z=j==="horizontal"?J[3][1]:J[1][1],j==="horizontal"?(F=(tt=Z-$)-5,B="center"):(z=(q=Q+$)+5,B="top")):U==="rightBottom"?(Q=J[2][0],Z=J[2][1],j==="horizontal"?(F=(tt=Z+$)+5,B="center"):(z=(q=Q+$)+5,B="bottom")):U==="leftTop"?(Q=J[0][0],Z=j==="horizontal"?J[0][1]:J[1][1],j==="horizontal"?(F=(tt=Z-$)-5,B="center"):(z=(q=Q-$)-5,B="right")):U==="leftBottom"?(Q=j==="horizontal"?J[1][0]:J[3][0],Z=j==="horizontal"?J[1][1]:J[2][1],j==="horizontal"?(F=(tt=Z+$)+5,B="center"):(z=(q=Q-$)-5,B="right")):(Q=(J[1][0]+J[2][0])/2,Z=(J[1][1]+J[2][1])/2,j==="horizontal"?(F=(tt=Z+$)+5,B="center"):(z=(q=Q+$)+5,B="left")),j==="horizontal"?z=q=Q:F=tt=Z,V=[[Q,Z],[q,tt]]}Y.label={linePoints:V,x:z,y:F,verticalAlign:"middle",textAlign:B,inside:K}})})(_)})}},27539:(W,G,T)=>{T(37860),T(72826)},37860:(W,G,T)=>{var L=T(23263),R=T(93321).extend({type:"series.gauge",getInitialData:function(k,O){return L(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});W.exports=R},72826:(W,G,T)=>{var L=T(30931),R=T(51177),k=T(75797),O=T(85669),D=O.parsePercent,E=O.round,I=O.linearMap;function S(u,c){return c&&(typeof c=="string"?u=c.replace("{value}",u!=null?u:""):typeof c=="function"&&(u=c(u))),u}var _=2*Math.PI,g=k.extend({type:"gauge",render:function(u,c,l){this.group.removeAll();var e=u.get("axisLine.lineStyle.color"),t=function(i,s){var a=i.get("center"),o=s.getWidth(),r=s.getHeight(),n=Math.min(o,r);return{cx:D(a[0],s.getWidth()),cy:D(a[1],s.getHeight()),r:D(i.get("radius"),n/2)}}(u,l);this._renderMain(u,c,l,e,t)},dispose:function(){},_renderMain:function(u,c,l,e,t){for(var i=this.group,s=u.getModel("axisLine"),a=s.getModel("lineStyle"),o=u.get("clockwise"),r=-u.get("startAngle")/180*Math.PI,n=((v=-u.get("endAngle")/180*Math.PI)-r)%_,h=r,p=a.get("width"),d=s.get("show"),f=0;d&&f<e.length;f++){var v=r+n*Math.min(Math.max(e[f][0],0),1),m=new R.Sector({shape:{startAngle:h,endAngle:v,cx:t.cx,cy:t.cy,clockwise:o,r0:t.r-p,r:t.r},silent:!0});m.setStyle({fill:e[f][1]}),m.setStyle(a.getLineStyle(["color","borderWidth","borderColor"])),i.add(m),h=v}var y=function(w){if(w<=0)return e[0][1];for(var M=0;M<e.length;M++)if(e[M][0]>=w&&(M===0?0:e[M-1][0])<w)return e[M][1];return e[M-1][1]};if(!o){var x=r;r=v,v=x}this._renderTicks(u,c,l,y,t,r,v,o),this._renderPointer(u,c,l,y,t,r,v,o),this._renderTitle(u,c,l,y,t),this._renderDetail(u,c,l,y,t)},_renderTicks:function(u,c,l,e,t,i,s,a){for(var o=this.group,r=t.cx,n=t.cy,h=t.r,p=+u.get("min"),d=+u.get("max"),f=u.getModel("splitLine"),v=u.getModel("axisTick"),m=u.getModel("axisLabel"),y=u.get("splitNumber"),x=v.get("splitNumber"),w=D(f.get("length"),h),M=D(v.get("length"),h),C=i,A=(s-i)/y,P=A/x,b=f.getModel("lineStyle").getLineStyle(),N=v.getModel("lineStyle").getLineStyle(),B=0;B<=y;B++){var z=Math.cos(C),F=Math.sin(C);if(f.get("show")){var V=new R.Line({shape:{x1:z*h+r,y1:F*h+n,x2:z*(h-w)+r,y2:F*(h-w)+n},style:b,silent:!0});b.stroke==="auto"&&V.setStyle({stroke:e(B/y)}),o.add(V)}if(m.get("show")){var H=S(E(B/y*(d-p)+p),m.get("formatter")),U=m.get("distance"),j=e(B/y);o.add(new R.Text({style:R.setTextStyle({},m,{text:H,x:z*(h-w-U)+r,y:F*(h-w-U)+n,textVerticalAlign:F<-.4?"top":F>.4?"bottom":"middle",textAlign:z<-.4?"left":z>.4?"right":"center"},{autoColor:j}),silent:!0}))}if(v.get("show")&&B!==y){for(var X=0;X<=x;X++){z=Math.cos(C),F=Math.sin(C);var Y=new R.Line({shape:{x1:z*h+r,y1:F*h+n,x2:z*(h-M)+r,y2:F*(h-M)+n},silent:!0,style:N});N.stroke==="auto"&&Y.setStyle({stroke:e((B+X/x)/y)}),o.add(Y),C+=P}C-=P}else C+=A}},_renderPointer:function(u,c,l,e,t,i,s,a){var o=this.group,r=this._data;if(u.get("pointer.show")){var n=[+u.get("min"),+u.get("max")],h=[i,s],p=u.getData(),d=p.mapDimension("value");p.diff(r).add(function(f){var v=new L({shape:{angle:i}});R.initProps(v,{shape:{angle:I(p.get(d,f),n,h,!0)}},u),o.add(v),p.setItemGraphicEl(f,v)}).update(function(f,v){var m=r.getItemGraphicEl(v);R.updateProps(m,{shape:{angle:I(p.get(d,f),n,h,!0)}},u),o.add(m),p.setItemGraphicEl(f,m)}).remove(function(f){var v=r.getItemGraphicEl(f);o.remove(v)}).execute(),p.eachItemGraphicEl(function(f,v){var m=p.getItemModel(v),y=m.getModel("pointer");f.setShape({x:t.cx,y:t.cy,width:D(y.get("width"),t.r),r:D(y.get("length"),t.r)}),f.useStyle(m.getModel("itemStyle").getItemStyle()),f.style.fill==="auto"&&f.setStyle("fill",e(I(p.get(d,v),n,[0,1],!0))),R.setHoverStyle(f,m.getModel("emphasis.itemStyle").getItemStyle())}),this._data=p}else r&&r.eachItemGraphicEl(function(f){o.remove(f)})},_renderTitle:function(u,c,l,e,t){var i=u.getData(),s=i.mapDimension("value"),a=u.getModel("title");if(a.get("show")){var o=a.get("offsetCenter"),r=t.cx+D(o[0],t.r),n=t.cy+D(o[1],t.r),h=+u.get("min"),p=+u.get("max"),d=u.getData().get(s,0),f=e(I(d,[h,p],[0,1],!0));this.group.add(new R.Text({silent:!0,style:R.setTextStyle({},a,{x:r,y:n,text:i.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:f,forceRich:!0})}))}},_renderDetail:function(u,c,l,e,t){var i=u.getModel("detail"),s=+u.get("min"),a=+u.get("max");if(i.get("show")){var o=i.get("offsetCenter"),r=t.cx+D(o[0],t.r),n=t.cy+D(o[1],t.r),h=D(i.get("width"),t.r),p=D(i.get("height"),t.r),d=u.getData(),f=d.get(d.mapDimension("value"),0),v=e(I(f,[s,a],[0,1],!0));this.group.add(new R.Text({silent:!0,style:R.setTextStyle({},i,{x:r,y:n,text:S(f,i.get("formatter")),textWidth:isNaN(h)?null:h,textHeight:isNaN(p)?null:p,textAlign:"center",textVerticalAlign:"middle"},{autoColor:v,forceRich:!0})}))}}});W.exports=g},30931:(W,G,T)=>{var L=T(10712).extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(R,k){var O=Math.cos,D=Math.sin,E=k.r,I=k.width,S=k.angle,_=k.x-O(S)*I*(I>=E/3?1:2),g=k.y-D(S)*I*(I>=E/3?1:2);S=k.angle-Math.PI/2,R.moveTo(_,g),R.lineTo(k.x+O(S)*I,k.y+D(S)*I),R.lineTo(k.x+O(k.angle)*E,k.y+D(k.angle)*E),R.lineTo(k.x-O(S)*I,k.y-D(S)*I),R.lineTo(_,g)}});W.exports=L},44553:(W,G,T)=>{var L=T(70492);T(55269),T(39107),T(89562);var R=T(60548),k=T(34586),O=T(19918),D=T(86733),E=T(41241),I=T(36846),S=T(6921),_=T(53081);L.registerProcessor(R),L.registerVisual(k("graph","circle",null)),L.registerVisual(O),L.registerVisual(D),L.registerLayout(E),L.registerLayout(L.PRIORITY.VISUAL.POST_CHART_LAYOUT,I),L.registerLayout(S),L.registerCoordinateSystem("graphView",{create:_})},55269:(W,G,T)=>{var L=T(70492),R=T(87587),k=T(33051),O=T(32234).defaultEmphasis,D=T(4272),E=T(78988).encodeHTML,I=T(19638),S=T(72019),_=T(11516),g=_.initCurvenessList,u=_.createEdgeMapForCurveness,c=L.extendSeriesModel({type:"series.graph",init:function(e){c.superApply(this,"init",arguments);var t=this;function i(){return t._categoriesData}this.legendVisualProvider=new S(i,i),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){c.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){c.superApply(this,"mergeDefaultAndTheme",arguments),O(e,["edgeLabel"],["show"])},getInitialData:function(e,t){var i=e.edges||e.links||[],s=e.data||e.nodes||[],a=this;if(s&&i){g(this);var o=I(s,i,this,!0,function(r,n){r.wrapMethod("getItemModel",function(m){var y=a._categoriesModels[m.getShallow("category")];return y&&(y.parentModel=m.parentModel,m.parentModel=y),m});var h=a.getModel("edgeLabel"),p=new D({label:h.option},h.parentModel,t),d=a.getModel("emphasis.edgeLabel"),f=new D({emphasis:{label:d.option}},d.parentModel,t);function v(m){return(m=this.parsePath(m))&&m[0]==="label"?p:m&&m[0]==="emphasis"&&m[1]==="label"?f:this.parentModel}n.wrapMethod("getItemModel",function(m){return m.customizeGetParent(v),m})});return k.each(o.edges,function(r){u(r.node1,r.node2,this,r.dataIndex)},this),o.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,i){if(i==="edge"){var s=this.getData(),a=this.getDataParams(e,i),o=s.graph.getEdgeByIndex(e),r=s.getName(o.node1.dataIndex),n=s.getName(o.node2.dataIndex),h=[];return r!=null&&h.push(r),n!=null&&h.push(n),h=E(h.join(" > ")),a.value&&(h+=" : "+E(a.value)),h}return c.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var e=k.map(this.option.categories||[],function(i){return i.value!=null?i:k.extend({value:0},i)}),t=new R(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(i){return t.getItemModel(i,!0)})},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return c.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),l=c;W.exports=l},39107:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(68162),O=T(47145),D=T(9176),E=T(31194),I=T(61485).onIrrelevantElement,S=T(51177),_=T(13328),g=T(47181).getNodeGlobalScale,u="__focusNodeAdjacency",c="__unfocusNodeAdjacency",l=["itemStyle","opacity"],e=["lineStyle","opacity"];function t(o,r){var n=o.getVisual("opacity");return n!=null?n:o.getModel().get(r)}function i(o,r,n){var h=o.getGraphicEl(),p=t(o,r);n!=null&&(p==null&&(p=1),p*=n),h.downplay&&h.downplay(),h.traverse(function(d){if(!d.isGroup){var f=d.lineLabelOriginalOpacity;f!=null&&n==null||(f=p),d.setStyle("opacity",f)}})}function s(o,r){var n=t(o,r),h=o.getGraphicEl();h.traverse(function(p){!p.isGroup&&p.setStyle("opacity",n)}),h.highlight&&h.highlight()}var a=L.extendChartView({type:"graph",init:function(o,r){var n=new k,h=new O,p=this.group;this._controller=new D(r.getZr()),this._controllerHost={target:p},p.add(n.group),p.add(h.group),this._symbolDraw=n,this._lineDraw=h,this._firstRender=!0},render:function(o,r,n){var h=this,p=o.coordinateSystem;this._model=o;var d=this._symbolDraw,f=this._lineDraw,v=this.group;if(p.type==="view"){var m={position:p.position,scale:p.scale};this._firstRender?v.attr(m):S.updateProps(v,m,o)}_(o.getGraph(),g(o));var y=o.getData();d.updateData(y);var x=o.getEdgeData();f.updateData(x),this._updateNodeAndLinkScale(),this._updateController(o,r,n),clearTimeout(this._layoutTimeout);var w=o.forceLayout,M=o.get("force.layoutAnimation");w&&this._startForceLayoutIteration(w,M),y.eachItemGraphicEl(function(b,N){var B=y.getItemModel(N);b.off("drag").off("dragend");var z=B.get("draggable");z&&b.on("drag",function(){w&&(w.warmUp(),!this._layouting&&this._startForceLayoutIteration(w,M),w.setFixed(N),y.setItemLayout(N,b.position))},this).on("dragend",function(){w&&w.setUnfixed(N)},this),b.setDraggable(z&&w),b[u]&&b.off("mouseover",b[u]),b[c]&&b.off("mouseout",b[c]),B.get("focusNodeAdjacency")&&(b.on("mouseover",b[u]=function(){h._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:o.id,dataIndex:b.dataIndex})}),b.on("mouseout",b[c]=function(){h._dispatchUnfocus(n)}))},this),y.graph.eachEdge(function(b){var N=b.getGraphicEl();N[u]&&N.off("mouseover",N[u]),N[c]&&N.off("mouseout",N[c]),b.getModel().get("focusNodeAdjacency")&&(N.on("mouseover",N[u]=function(){h._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:o.id,edgeDataIndex:b.dataIndex})}),N.on("mouseout",N[c]=function(){h._dispatchUnfocus(n)}))});var C=o.get("layout")==="circular"&&o.get("circular.rotateLabel"),A=y.getLayout("cx"),P=y.getLayout("cy");y.eachItemGraphicEl(function(b,N){var B=y.getItemModel(N).get("label.rotate")||0,z=b.getSymbolPath();if(C){var F=y.getItemLayout(N),V=Math.atan2(F[1]-P,F[0]-A);V<0&&(V=2*Math.PI+V);var H=F[0]<A;H&&(V-=Math.PI);var U=H?"left":"right";S.modifyLabelStyle(z,{textRotation:-V,textPosition:U,textOrigin:"center"},{textPosition:U})}else S.modifyLabelStyle(z,{textRotation:B*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(o,r){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){n._unfocusDelayTimer=null,o.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(o,r,n,h){var p=o.getData().graph,d=h.dataIndex,f=h.edgeDataIndex,v=p.getNodeByIndex(d),m=p.getEdgeByIndex(f);(v||m)&&(p.eachNode(function(y){i(y,l,.1)}),p.eachEdge(function(y){i(y,e,.1)}),v&&(s(v,l),R.each(v.edges,function(y){y.dataIndex<0||(s(y,e),s(y.node1,l),s(y.node2,l))})),m&&(s(m,e),s(m.node1,l),s(m.node2,l)))},unfocusNodeAdjacency:function(o,r,n,h){var p=o.getData().graph;p.eachNode(function(d){i(d,l)}),p.eachEdge(function(d){i(d,e)})},_startForceLayoutIteration:function(o,r){var n=this;(function h(){o.step(function(p){n.updateLayout(n._model),(n._layouting=!p)&&(r?n._layoutTimeout=setTimeout(h,16):h())})})()},_updateController:function(o,r,n){var h=this._controller,p=this._controllerHost,d=this.group;h.setPointerChecker(function(f,v,m){var y=d.getBoundingRect();return y.applyTransform(d.transform),y.contain(v,m)&&!I(f,n,o)}),o.coordinateSystem.type==="view"?(h.enable(o.get("roam")),p.zoomLimit=o.get("scaleLimit"),p.zoom=o.coordinateSystem.getZoom(),h.off("pan").off("zoom").on("pan",function(f){E.updateViewOnPan(p,f.dx,f.dy),n.dispatchAction({seriesId:o.id,type:"graphRoam",dx:f.dx,dy:f.dy})}).on("zoom",function(f){E.updateViewOnZoom(p,f.scale,f.originX,f.originY),n.dispatchAction({seriesId:o.id,type:"graphRoam",zoom:f.scale,originX:f.originX,originY:f.originY}),this._updateNodeAndLinkScale(),_(o.getGraph(),g(o)),this._lineDraw.updateLayout()},this)):h.disable()},_updateNodeAndLinkScale:function(){var o=this._model,r=o.getData(),n=g(o),h=[n,n];r.eachItemGraphicEl(function(p,d){p.attr("scale",h)})},updateLayout:function(o){_(o.getGraph(),g(o)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(o,r){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}});W.exports=a},13328:(W,G,T)=>{var L=T(18554),R=T(45280),k=T(47181).getSymbolSize,O=[],D=[],E=[],I=L.quadraticAt,S=R.distSquare,_=Math.abs;function g(u,c,l){for(var e,t=u[0],i=u[1],s=u[2],a=1/0,o=l*l,r=.1,n=.1;n<=.9;n+=.1)O[0]=I(t[0],i[0],s[0],n),O[1]=I(t[1],i[1],s[1],n),(d=_(S(O,c)-o))<a&&(a=d,e=n);for(var h=0;h<32;h++){var p=e+r;D[0]=I(t[0],i[0],s[0],e),D[1]=I(t[1],i[1],s[1],e),E[0]=I(t[0],i[0],s[0],p),E[1]=I(t[1],i[1],s[1],p);var d=S(D,c)-o;if(_(d)<.01)break;var f=S(E,c)-o;r/=2,d<0?f>=0?e+=r:e-=r:f>=0?e-=r:e+=r}return e}W.exports=function(u,c){var l=[],e=L.quadraticSubdivide,t=[[],[],[]],i=[[],[]],s=[];c/=2,u.eachEdge(function(a,o){var r=a.getLayout(),n=a.getVisual("fromSymbol"),h=a.getVisual("toSymbol");r.__original||(r.__original=[R.clone(r[0]),R.clone(r[1])],r[2]&&r.__original.push(R.clone(r[2])));var p=r.__original;if(r[2]!=null){if(R.copy(t[0],p[0]),R.copy(t[1],p[2]),R.copy(t[2],p[1]),n&&n!=="none"){var d=k(a.node1),f=g(t,p[0],d*c);e(t[0][0],t[1][0],t[2][0],f,l),t[0][0]=l[3],t[1][0]=l[4],e(t[0][1],t[1][1],t[2][1],f,l),t[0][1]=l[3],t[1][1]=l[4]}h&&h!=="none"&&(d=k(a.node2),f=g(t,p[1],d*c),e(t[0][0],t[1][0],t[2][0],f,l),t[1][0]=l[1],t[2][0]=l[2],e(t[0][1],t[1][1],t[2][1],f,l),t[1][1]=l[1],t[2][1]=l[2]),R.copy(r[0],t[0]),R.copy(r[1],t[2]),R.copy(r[2],t[1])}else R.copy(i[0],p[0]),R.copy(i[1],p[1]),R.sub(s,i[1],i[0]),R.normalize(s,s),n&&n!=="none"&&(d=k(a.node1),R.scaleAndAdd(i[0],i[0],s,d*c)),h&&h!=="none"&&(d=k(a.node2),R.scaleAndAdd(i[1],i[1],s,-d*c)),R.copy(r[0],i[0]),R.copy(r[1],i[1])})}},60548:W=>{W.exports=function(G){var T=G.findComponents({mainType:"legend"});T&&T.length&&G.eachSeriesByType("graph",function(L){var R=L.getCategoriesData(),k=L.getGraph().data,O=R.mapArray(R.getName);k.filterSelf(function(D){var E=k.getItemModel(D).getShallow("category");if(E!=null){typeof E=="number"&&(E=O[E]);for(var I=0;I<T.length;I++)if(!T[I].isSelected(E))return!1}return!0})},this)}},19918:W=>{W.exports=function(G){var T={};G.eachSeriesByType("graph",function(L){var R=L.getCategoriesData(),k=L.getData(),O={};R.each(function(D){var E=R.getName(D);O["ec-"+E]=D;var I=R.getItemModel(D),S=I.get("itemStyle.color")||L.getColorFromPalette(E,T);R.setItemVisual(D,"color",S);for(var _=["opacity","symbol","symbolSize","symbolKeepAspect"],g=0;g<_.length;g++){var u=I.getShallow(_[g],!0);u!=null&&R.setItemVisual(D,_[g],u)}}),R.count()&&k.each(function(D){var E=k.getItemModel(D).getShallow("category");if(E!=null){typeof E=="string"&&(E=O["ec-"+E]);for(var I=["color","opacity","symbol","symbolSize","symbolKeepAspect"],S=0;S<I.length;S++)k.getItemVisual(D,I[S],!0)==null&&k.setItemVisual(D,I[S],R.getItemVisual(E,I[S]))}})})}},36846:(W,G,T)=>{var L=T(22663).circularLayout;W.exports=function(R){R.eachSeriesByType("graph",function(k){k.get("layout")==="circular"&&L(k,"symbolSize")})}},22663:(W,G,T)=>{var L=T(45280),R=T(47181),k=R.getSymbolSize,O=R.getNodeGlobalScale,D=T(33051),E=T(11516).getCurvenessForEdge,I=Math.PI,S=[],_={value:function(g,u,c,l,e,t,i,s){var a=0,o=l.getSum("value"),r=2*Math.PI/(o||s);c.eachNode(function(n){var h=n.getValue("value"),p=r*(o?h:1)/2;a+=p,n.setLayout([e*Math.cos(a)+t,e*Math.sin(a)+i]),a+=p})},symbolSize:function(g,u,c,l,e,t,i,s){var a=0;S.length=s;var o=O(g);c.eachNode(function(h){var p=k(h);isNaN(p)&&(p=2),p<0&&(p=0),p*=o;var d=Math.asin(p/2/e);isNaN(d)&&(d=I/2),S[h.dataIndex]=d,a+=2*d});var r=(2*I-a)/s/2,n=0;c.eachNode(function(h){var p=r+S[h.dataIndex];n+=p,h.setLayout([e*Math.cos(n)+t,e*Math.sin(n)+i]),n+=p})}};G.circularLayout=function(g,u){var c=g.coordinateSystem;if(!c||c.type==="view"){var l=c.getBoundingRect(),e=g.getData(),t=e.graph,i=l.width/2+l.x,s=l.height/2+l.y,a=Math.min(l.width,l.height)/2,o=e.count();e.setLayout({cx:i,cy:s}),o&&(_[u](g,c,t,e,a,i,s,o),t.eachEdge(function(r,n){var h,p=D.retrieve3(r.getModel().get("lineStyle.curveness"),E(r,g,n),0),d=L.clone(r.node1.getLayout()),f=L.clone(r.node2.getLayout()),v=(d[0]+f[0])/2,m=(d[1]+f[1])/2;+p&&(h=[i*(p*=3)+v*(1-p),s*p+m*(1-p)]),r.setLayout([d,f,h])}))}}},53081:(W,G,T)=>{var L=T(23845),R=T(76172).getLayoutRect,k=T(3726);W.exports=function(O,D){var E=[];return O.eachSeriesByType("graph",function(I){var S=I.get("coordinateSystem");if(!S||S==="view"){var _=I.getData(),g=_.mapArray(function(r){var n=_.getItemModel(r);return[+n.get("x"),+n.get("y")]}),u=[],c=[];k.fromPoints(g,u,c),c[0]-u[0]==0&&(c[0]+=1,u[0]-=1),c[1]-u[1]==0&&(c[1]+=1,u[1]-=1);var l=(c[0]-u[0])/(c[1]-u[1]),e=function(r,n,h){var p=r.getBoxLayoutParams();return p.aspect=h,R(p,{width:n.getWidth(),height:n.getHeight()})}(I,D,l);isNaN(l)&&(u=[e.x,e.y],c=[e.x+e.width,e.y+e.height]);var t=c[0]-u[0],i=c[1]-u[1],s=e.width,a=e.height,o=I.coordinateSystem=new L;o.zoomLimit=I.get("scaleLimit"),o.setBoundingRect(u[0],u[1],t,i),o.setViewRect(e.x,e.y,s,a),o.setCenter(I.get("center")),o.setZoom(I.get("zoom")),E.push(o)}}),E}},86733:W=>{function G(T){return T instanceof Array||(T=[T,T]),T}W.exports=function(T){T.eachSeriesByType("graph",function(L){var R=L.getGraph(),k=L.getEdgeData(),O=G(L.get("edgeSymbol")),D=G(L.get("edgeSymbolSize")),E="lineStyle.color".split("."),I="lineStyle.opacity".split(".");k.setVisual("fromSymbol",O&&O[0]),k.setVisual("toSymbol",O&&O[1]),k.setVisual("fromSymbolSize",D&&D[0]),k.setVisual("toSymbolSize",D&&D[1]),k.setVisual("color",L.get(E)),k.setVisual("opacity",L.get(I)),k.each(function(S){var _=k.getItemModel(S),g=R.getEdgeByIndex(S),u=G(_.getShallow("symbol",!0)),c=G(_.getShallow("symbolSize",!0)),l=_.get(E),e=_.get(I);switch(l){case"source":l=g.node1.getVisual("color");break;case"target":l=g.node2.getVisual("color")}u[0]&&g.setVisual("fromSymbol",u[0]),u[1]&&g.setVisual("toSymbol",u[1]),c[0]&&g.setVisual("fromSymbolSize",c[0]),c[1]&&g.setVisual("toSymbolSize",c[1]),g.setVisual("color",l),g.setVisual("opacity",e)})})}},33586:(W,G,T)=>{var L=T(45280),R=L.scaleAndAdd;G.forceLayout=function(k,O,D){for(var E=D.rect,I=E.width,S=E.height,_=[E.x+I/2,E.y+S/2],g=D.gravity==null?.1:D.gravity,u=0;u<k.length;u++){var c=k[u];c.p||(c.p=L.create(I*(Math.random()-.5)+_[0],S*(Math.random()-.5)+_[1])),c.pp=L.clone(c.p),c.edges=null}var l=D.friction==null?.6:D.friction,e=l;return{warmUp:function(){e=.8*l},setFixed:function(t){k[t].fixed=!0},setUnfixed:function(t){k[t].fixed=!1},step:function(t){for(var i=[],s=k.length,a=0;a<O.length;a++){var o=O[a];if(!o.ignoreForceLayout){var r=o.n1,n=o.n2;L.sub(i,n.p,r.p);var h=L.len(i)-o.d,p=n.w/(r.w+n.w);isNaN(p)&&(p=0),L.normalize(i,i),!r.fixed&&R(r.p,r.p,i,p*h*e),!n.fixed&&R(n.p,n.p,i,-(1-p)*h*e)}}for(a=0;a<s;a++)(m=k[a]).fixed||(L.sub(i,_,m.p),R(m.p,m.p,i,g*e));for(a=0;a<s;a++){r=k[a];for(var d=a+1;d<s;d++){n=k[d],L.sub(i,n.p,r.p),(h=L.len(i))===0&&(L.set(i,Math.random()-.5,Math.random()-.5),h=1);var f=(r.rep+n.rep)/h/h;!r.fixed&&R(r.pp,r.pp,i,f),!n.fixed&&R(n.pp,n.pp,i,-f)}}var v=[];for(a=0;a<s;a++){var m;(m=k[a]).fixed||(L.sub(v,m.p,m.pp),R(m.p,m.p,v,e),L.copy(m.pp,m.p))}e*=.992,t&&t(k,O,e<.01)}}}},6921:(W,G,T)=>{var L=T(33586).forceLayout,R=T(74107).simpleLayout,k=T(22663).circularLayout,O=T(85669).linearMap,D=T(45280),E=T(33051),I=T(11516).getCurvenessForEdge;W.exports=function(S){S.eachSeriesByType("graph",function(_){if(!(r=_.coordinateSystem)||r.type==="view")if(_.get("layout")==="force"){var g=_.preservedPoints||{},u=_.getGraph(),c=u.data,l=u.edgeData,e=_.getModel("force"),t=e.get("initLayout");_.preservedPoints?c.each(function(v){var m=c.getId(v);c.setItemLayout(v,g[m]||[NaN,NaN])}):t&&t!=="none"?t==="circular"&&k(_,"value"):R(_);var i=c.getDataExtent("value"),s=l.getDataExtent("value"),a=e.get("repulsion"),o=e.get("edgeLength");E.isArray(a)||(a=[a,a]),E.isArray(o)||(o=[o,o]),o=[o[1],o[0]];var r,n=c.mapArray("value",function(v,m){var y=c.getItemLayout(m),x=O(v,i,a);return isNaN(x)&&(x=(a[0]+a[1])/2),{w:x,rep:x,fixed:c.getItemModel(m).get("fixed"),p:!y||isNaN(y[0])||isNaN(y[1])?null:y}}),h=l.mapArray("value",function(v,m){var y=u.getEdgeByIndex(m),x=O(v,s,o);isNaN(x)&&(x=(o[0]+o[1])/2);var w=y.getModel(),M=E.retrieve3(w.get("lineStyle.curveness"),-I(y,_,m,!0),0);return{n1:n[y.node1.dataIndex],n2:n[y.node2.dataIndex],d:x,curveness:M,ignoreForceLayout:w.get("ignoreForceLayout")}}),p=(r=_.coordinateSystem).getBoundingRect(),d=L(n,h,{rect:p,gravity:e.get("gravity"),friction:e.get("friction")}),f=d.step;d.step=function(v){for(var m=0,y=n.length;m<y;m++)n[m].fixed&&D.copy(n[m].p,u.getNodeByIndex(m).getLayout());f(function(x,w,M){for(var C=0,A=x.length;C<A;C++)x[C].fixed||u.getNodeByIndex(C).setLayout(x[C].p),g[c.getId(C)]=x[C].p;for(C=0,A=w.length;C<A;C++){var P=w[C],b=u.getEdgeByIndex(C),N=P.n1.p,B=P.n2.p,z=b.getLayout();(z=z?z.slice():[])[0]=z[0]||[],z[1]=z[1]||[],D.copy(z[0],N),D.copy(z[1],B),+P.curveness&&(z[2]=[(N[0]+B[0])/2-(N[1]-B[1])*P.curveness,(N[1]+B[1])/2-(B[0]-N[0])*P.curveness]),b.setLayout(z)}v&&v(M)})},_.forceLayout=d,_.preservedPoints=g,d.step()}else _.forceLayout=null})}},89562:(W,G,T)=>{var L=T(70492),R=T(60553).updateCenterAndZoom;T(35540),L.registerAction({type:"graphRoam",event:"graphRoam",update:"none"},function(k,O){O.eachComponent({mainType:"series",query:k},function(D){var E=D.coordinateSystem,I=R(E,k);D.setCenter&&D.setCenter(I.center),D.setZoom&&D.setZoom(I.zoom)})})},47181:(W,G)=>{G.getNodeGlobalScale=function(T){var L=T.coordinateSystem;if(L.type!=="view")return 1;var R=T.option.nodeScaleRatio,k=L.scale,O=k&&k[0]||1;return((L.getZoom()-1)*R+1)/O},G.getSymbolSize=function(T){var L=T.getVisual("symbolSize");return L instanceof Array&&(L=(L[0]+L[1])/2),+L}},41241:(W,G,T)=>{var L=T(33051).each,R=T(74107),k=R.simpleLayout,O=R.simpleLayoutEdge;W.exports=function(D,E){D.eachSeriesByType("graph",function(I){var S=I.get("layout"),_=I.coordinateSystem;if(_&&_.type!=="view"){var g=I.getData(),u=[];L(_.dimensions,function(s){u=u.concat(g.mapDimension(s,!0))});for(var c=0;c<g.count();c++){for(var l=[],e=!1,t=0;t<u.length;t++){var i=g.get(u[t],c);isNaN(i)||(e=!0),l.push(i)}e?g.setItemLayout(c,_.dataToPoint(l)):g.setItemLayout(c,[NaN,NaN])}O(g.graph,I)}else S&&S!=="none"||k(I)})}},74107:(W,G,T)=>{var L=T(45280),R=T(33051),k=T(11516).getCurvenessForEdge;function O(D,E){D.eachEdge(function(I,S){var _=R.retrieve3(I.getModel().get("lineStyle.curveness"),-k(I,E,S,!0),0),g=L.clone(I.node1.getLayout()),u=L.clone(I.node2.getLayout()),c=[g,u];+_&&c.push([(g[0]+u[0])/2-(g[1]-u[1])*_,(g[1]+u[1])/2-(u[0]-g[0])*_]),I.setLayout(c)})}G.simpleLayout=function(D){var E=D.coordinateSystem;if(!E||E.type==="view"){var I=D.getGraph();I.eachNode(function(S){var _=S.getModel();S.setLayout([+_.get("x"),+_.get("y")])}),O(I,D)}},G.simpleLayoutEdge=O},40055:(W,G,T)=>{T(72404),T(55883)},93189:(W,G,T)=>{var L=T(33051);function R(){var O=L.createCanvas();this.canvas=O,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}R.prototype={update:function(O,D,E,I,S,_){var g=this._getBrush(),u=this._getGradient(O,S,"inRange"),c=this._getGradient(O,S,"outOfRange"),l=this.pointSize+this.blurSize,e=this.canvas,t=e.getContext("2d"),i=O.length;e.width=D,e.height=E;for(var s=0;s<i;++s){var a=O[s],o=a[0],r=a[1],n=I(a[2]);t.globalAlpha=n,t.drawImage(g,o-l,r-l)}if(!e.width||!e.height)return e;for(var h=t.getImageData(0,0,e.width,e.height),p=h.data,d=0,f=p.length,v=this.minOpacity,m=this.maxOpacity-v;d<f;){n=p[d+3]/256;var y=4*Math.floor(255*n);if(n>0){var x=_(n)?u:c;n>0&&(n=n*m+v),p[d++]=x[y],p[d++]=x[y+1],p[d++]=x[y+2],p[d++]=x[y+3]*n*256}else d+=4}return t.putImageData(h,0,0),e},_getBrush:function(){var O=this._brushCanvas||(this._brushCanvas=L.createCanvas()),D=this.pointSize+this.blurSize,E=2*D;O.width=E,O.height=E;var I=O.getContext("2d");return I.clearRect(0,0,E,E),I.shadowOffsetX=E,I.shadowBlur=this.blurSize,I.shadowColor="#000",I.beginPath(),I.arc(-D,D,this.pointSize,0,2*Math.PI,!0),I.closePath(),I.fill(),O},_getGradient:function(O,D,E){for(var I=this._gradientPixels,S=I[E]||(I[E]=new Uint8ClampedArray(1024)),_=[0,0,0,0],g=0,u=0;u<256;u++)D[E](u/255,!0,_),S[g++]=_[0],S[g++]=_[1],S[g++]=_[2],S[g++]=_[3];return S}};var k=R;W.exports=k},72404:(W,G,T)=>{var L=T(93321),R=T(40488),k=T(95899),O=L.extend({type:"series.heatmap",getInitialData:function(D,E){return R(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var D=k.get(this.get("coordinateSystem"));if(D&&D.dimensions)return D.dimensions[0]==="lng"&&D.dimensions[1]==="lat"},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});W.exports=O},55883:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(51177),k=T(93189),O=T(33051),D=L.extendChartView({type:"heatmap",render:function(E,I,S){var _;I.eachComponent("visualMap",function(u){u.eachTargetSeries(function(c){c===E&&(_=u)})}),this.group.removeAll(),this._incrementalDisplayable=null;var g=E.coordinateSystem;g.type==="cartesian2d"||g.type==="calendar"?this._renderOnCartesianAndCalendar(E,S,0,E.getData().count()):function(u){var c=u.dimensions;return c[0]==="lng"&&c[1]==="lat"}(g)&&this._renderOnGeo(g,E,_,S)},incrementalPrepareRender:function(E,I,S){this.group.removeAll()},incrementalRender:function(E,I,S,_){I.coordinateSystem&&this._renderOnCartesianAndCalendar(I,_,E.start,E.end,!0)},_renderOnCartesianAndCalendar:function(E,I,S,_,g){var u,c,l=E.coordinateSystem;if(l.type==="cartesian2d"){var e=l.getAxis("x"),t=l.getAxis("y");u=e.getBandWidth(),c=t.getBandWidth()}for(var i=this.group,s=E.getData(),a="itemStyle",o="emphasis.itemStyle",r="label",n="emphasis.label",h=E.getModel(a).getItemStyle(["color"]),p=E.getModel(o).getItemStyle(),d=E.getModel(r),f=E.getModel(n),v=l.type,m=v==="cartesian2d"?[s.mapDimension("x"),s.mapDimension("y"),s.mapDimension("value")]:[s.mapDimension("time"),s.mapDimension("value")],y=S;y<_;y++){var x;if(v==="cartesian2d"){if(isNaN(s.get(m[2],y)))continue;var w=l.dataToPoint([s.get(m[0],y),s.get(m[1],y)]);x=new R.Rect({shape:{x:Math.floor(Math.round(w[0])-u/2),y:Math.floor(Math.round(w[1])-c/2),width:Math.ceil(u),height:Math.ceil(c)},style:{fill:s.getItemVisual(y,"color"),opacity:s.getItemVisual(y,"opacity")}})}else{if(isNaN(s.get(m[1],y)))continue;x=new R.Rect({z2:1,shape:l.dataToRect([s.get(m[0],y)]).contentShape,style:{fill:s.getItemVisual(y,"color"),opacity:s.getItemVisual(y,"opacity")}})}var M=s.getItemModel(y);s.hasItemOption&&(h=M.getModel(a).getItemStyle(["color"]),p=M.getModel(o).getItemStyle(),d=M.getModel(r),f=M.getModel(n));var C=E.getRawValue(y),A="-";C&&C[2]!=null&&(A=C[2]),R.setLabelStyle(h,p,d,f,{labelFetcher:E,labelDataIndex:y,defaultText:A,isRectText:!0}),x.setStyle(h),R.setHoverStyle(x,s.hasItemOption?p:O.extend({},p)),x.incremental=g,g&&(x.useHoverLayer=!0),i.add(x),s.setItemGraphicEl(y,x)}},_renderOnGeo:function(E,I,S,_){var g=S.targetVisuals.inRange,u=S.targetVisuals.outOfRange,c=I.getData(),l=this._hmLayer||this._hmLayer||new k;l.blurSize=I.get("blurSize"),l.pointSize=I.get("pointSize"),l.minOpacity=I.get("minOpacity"),l.maxOpacity=I.get("maxOpacity");var e=E.getViewRect().clone(),t=E.getRoamTransform();e.applyTransform(t);var i=Math.max(e.x,0),s=Math.max(e.y,0),a=Math.min(e.width+e.x,_.getWidth()),o=Math.min(e.height+e.y,_.getHeight()),r=a-i,n=o-s,h=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],p=c.mapArray(h,function(m,y,x){var w=E.dataToPoint([m,y]);return w[0]-=i,w[1]-=s,w.push(x),w}),d=S.getExtent(),f=S.type==="visualMap.continuous"?function(m,y){var x=m[1]-m[0];return y=[(y[0]-m[0])/x,(y[1]-m[0])/x],function(w){return w>=y[0]&&w<=y[1]}}(d,S.option.range):function(m,y,x){var w=m[1]-m[0],M=(y=O.map(y,function(A){return{interval:[(A.interval[0]-m[0])/w,(A.interval[1]-m[0])/w]}})).length,C=0;return function(A){for(var P=C;P<M;P++)if((b=y[P].interval)[0]<=A&&A<=b[1]){C=P;break}if(P===M)for(P=C-1;P>=0;P--){var b;if((b=y[P].interval)[0]<=A&&A<=b[1]){C=P;break}}return P>=0&&P<M&&x[P]}}(d,S.getPieceList(),S.option.selected);l.update(p,r,n,g.color.getNormalizer(),{inRange:g.color.getColorMapper(),outOfRange:u.color.getColorMapper()},f);var v=new R.Image({style:{width:r,height:n,x:i,y:s,image:l.canvas},silent:!0});this.group.add(v)},dispose:function(){}});W.exports=D},99895:(W,G,T)=>{var L=T(51177),R=T(77159),k=T(33051),O=T(41525).createSymbol,D=T(45280),E=T(18554);function I(g,u,c){L.Group.call(this),this.add(this.createLine(g,u,c)),this._updateEffectSymbol(g,u)}var S=I.prototype;S.createLine=function(g,u,c){return new R(g,u,c)},S._updateEffectSymbol=function(g,u){var c=g.getItemModel(u).getModel("effect"),l=c.get("symbolSize"),e=c.get("symbol");k.isArray(l)||(l=[l,l]);var t=c.get("color")||g.getItemVisual(u,"color"),i=this.childAt(1);this._symbolType!==e&&(this.remove(i),(i=O(e,-.5,-.5,1,1,t)).z2=100,i.culling=!0,this.add(i)),i&&(i.setStyle("shadowColor",t),i.setStyle(c.getItemStyle(["color"])),i.attr("scale",l),i.setColor(t),i.attr("scale",l),this._symbolType=e,this._symbolScale=l,this._updateEffectAnimation(g,c,u))},S._updateEffectAnimation=function(g,u,c){var l=this.childAt(1);if(l){var e=this,t=g.getItemLayout(c),i=1e3*u.get("period"),s=u.get("loop"),a=u.get("constantSpeed"),o=k.retrieve(u.get("delay"),function(p){return p/g.count()*i/3}),r=typeof o=="function";if(l.ignore=!0,this.updateAnimationPoints(l,t),a>0&&(i=this.getLineLength(l)/a*1e3),i!==this._period||s!==this._loop){l.stopAnimation();var n=o;r&&(n=o(c)),l.__t>0&&(n=-i*l.__t),l.__t=0;var h=l.animate("",s).when(i,{__t:1}).delay(n).during(function(){e.updateSymbolPosition(l)});s||h.done(function(){e.remove(l)}),h.start()}this._period=i,this._loop=s}},S.getLineLength=function(g){return D.dist(g.__p1,g.__cp1)+D.dist(g.__cp1,g.__p2)},S.updateAnimationPoints=function(g,u){g.__p1=u[0],g.__p2=u[1],g.__cp1=u[2]||[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2]},S.updateData=function(g,u,c){this.childAt(0).updateData(g,u,c),this._updateEffectSymbol(g,u)},S.updateSymbolPosition=function(g){var u=g.__p1,c=g.__p2,l=g.__cp1,e=g.__t,t=g.position,i=[t[0],t[1]],s=E.quadraticAt,a=E.quadraticDerivativeAt;t[0]=s(u[0],l[0],c[0],e),t[1]=s(u[1],l[1],c[1],e);var o=a(u[0],l[0],c[0],e),r=a(u[1],l[1],c[1],e);if(g.rotation=-Math.atan2(r,o)-Math.PI/2,this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")if(g.__lastT!==void 0&&g.__lastT<g.__t){var n=1.05*D.dist(i,t);g.attr("scale",[g.scale[0],n]),e===1&&(t[0]=i[0]+(t[0]-i[0])/2,t[1]=i[1]+(t[1]-i[1])/2)}else g.__lastT===1?(n=2*D.dist(u,t),g.attr("scale",[g.scale[0],n])):g.attr("scale",this._symbolScale);g.__lastT=g.__t,g.ignore=!1},S.updateLayout=function(g,u){this.childAt(0).updateLayout(g,u);var c=g.getItemModel(u).getModel("effect");this._updateEffectAnimation(g,c,u)},k.inherits(I,L.Group);var _=I;W.exports=_},69121:(W,G,T)=>{var L=T(30146),R=T(33051),k=T(99895),O=T(45280);function D(S,_,g){k.call(this,S,_,g),this._lastFrame=0,this._lastFramePercent=0}var E=D.prototype;E.createLine=function(S,_,g){return new L(S,_,g)},E.updateAnimationPoints=function(S,_){this._points=_;for(var g=[0],u=0,c=1;c<_.length;c++){var l=_[c-1],e=_[c];u+=O.dist(l,e),g.push(u)}if(u!==0){for(c=0;c<g.length;c++)g[c]/=u;this._offsets=g,this._length=u}},E.getLineLength=function(S){return this._length},E.updateSymbolPosition=function(S){var _=S.__t,g=this._points,u=this._offsets,c=g.length;if(u){var l=this._lastFrame;if(_<this._lastFramePercent){for(e=Math.min(l+1,c-1);e>=0&&!(u[e]<=_);e--);e=Math.min(e,c-2)}else{for(var e=l;e<c&&!(u[e]>_);e++);e=Math.min(e-1,c-2)}O.lerp(S.position,g[e],g[e+1],(_-u[e])/(u[e+1]-u[e]));var t=g[e+1][0]-g[e][0],i=g[e+1][1]-g[e][1];S.rotation=-Math.atan2(i,t)-Math.PI/2,this._lastFrame=e,this._lastFramePercent=_,S.ignore=!1}},R.inherits(D,k);var I=D;W.exports=I},53036:(W,G,T)=>{var L=T(33051),R=T(41525).createSymbol,k=T(51177).Group,O=T(85669).parsePercent,D=T(66351);function E(g,u){var c=u.rippleEffectColor||u.color;g.eachChild(function(l){l.attr({z:u.z,zlevel:u.zlevel,style:{stroke:u.brushType==="stroke"?c:null,fill:u.brushType==="fill"?c:null}})})}function I(g,u){k.call(this);var c=new D(g,u),l=new k;this.add(c),this.add(l),l.beforeUpdate=function(){this.attr(c.getScale())},this.updateData(g,u)}var S=I.prototype;S.stopEffectAnimation=function(){this.childAt(1).removeAll()},S.startEffectAnimation=function(g){for(var u=g.symbolType,c=g.color,l=this.childAt(1),e=0;e<3;e++){var t=R(u,-1,-1,2,2,c);t.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var i=-e/3*g.period+g.effectOffset;t.animate("",!0).when(g.period,{scale:[g.rippleScale/2,g.rippleScale/2]}).delay(i).start(),t.animateStyle(!0).when(g.period,{opacity:0}).delay(i).start(),l.add(t)}E(l,g)},S.updateEffectAnimation=function(g){for(var u=this._effectCfg,c=this.childAt(1),l=["symbolType","period","rippleScale"],e=0;e<l.length;e++){var t=l[e];if(u[t]!==g[t])return this.stopEffectAnimation(),void this.startEffectAnimation(g)}E(c,g)},S.highlight=function(){this.trigger("emphasis")},S.downplay=function(){this.trigger("normal")},S.updateData=function(g,u){var c=g.hostModel;this.childAt(0).updateData(g,u);var l=this.childAt(1),e=g.getItemModel(u),t=g.getItemVisual(u,"symbol"),i=function(f){return L.isArray(f)||(f=[+f,+f]),f}(g.getItemVisual(u,"symbolSize")),s=g.getItemVisual(u,"color");l.attr("scale",i),l.traverse(function(f){f.attr({fill:s})});var a=e.getShallow("symbolOffset");if(a){var o=l.position;o[0]=O(a[0],i[0]),o[1]=O(a[1],i[1])}var r=g.getItemVisual(u,"symbolRotate");l.rotation=(r||0)*Math.PI/180||0;var n={};if(n.showEffectOn=c.get("showEffectOn"),n.rippleScale=e.get("rippleEffect.scale"),n.brushType=e.get("rippleEffect.brushType"),n.period=1e3*e.get("rippleEffect.period"),n.effectOffset=u/g.count(),n.z=e.getShallow("z")||0,n.zlevel=e.getShallow("zlevel")||0,n.symbolType=t,n.color=s,n.rippleEffectColor=e.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),n.showEffectOn==="render")this._effectCfg?this.updateEffectAnimation(n):this.startEffectAnimation(n),this._effectCfg=n;else{this._effectCfg=null,this.stopEffectAnimation();var h=this.childAt(0),p=function(){h.highlight(),n.showEffectOn!=="render"&&this.startEffectAnimation(n)},d=function(){h.downplay(),n.showEffectOn!=="render"&&this.stopEffectAnimation()};this.on("mouseover",p,this).on("mouseout",d,this).on("emphasis",p,this).on("normal",d,this)}this._effectCfg=n},S.fadeOut=function(g){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),g&&g()},L.inherits(I,k);var _=I;W.exports=_},34148:(W,G,T)=>{var L=T(51177),R=T(91754),k=T(33640),O=T(25674),D=L.extendShape({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(_,g){var u=g.segs,c=g.curveness;if(g.polyline)for(var l=0;l<u.length;){var e=u[l++];if(e>0){_.moveTo(u[l++],u[l++]);for(var t=1;t<e;t++)_.lineTo(u[l++],u[l++])}}else for(l=0;l<u.length;){var i=u[l++],s=u[l++],a=u[l++],o=u[l++];if(_.moveTo(i,s),c>0){var r=(i+a)/2-(s-o)*c,n=(s+o)/2-(a-i)*c;_.quadraticCurveTo(r,n,a,o)}else _.lineTo(a,o)}},findDataIndex:function(_,g){var u=this.shape,c=u.segs,l=u.curveness;if(u.polyline)for(var e=0,t=0;t<c.length;){var i=c[t++];if(i>0)for(var s=c[t++],a=c[t++],o=1;o<i;o++){var r=c[t++],n=c[t++];if(k.containStroke(s,a,r,n))return e}e++}else for(e=0,t=0;t<c.length;){if(s=c[t++],a=c[t++],r=c[t++],n=c[t++],l>0){var h=(s+r)/2-(a-n)*l,p=(a+n)/2-(r-s)*l;if(O.containStroke(s,a,h,p,r,n))return e}else if(k.containStroke(s,a,r,n))return e;e++}return-1}});function E(){this.group=new L.Group}var I=E.prototype;I.isPersistent=function(){return!this._incremental},I.updateData=function(_){this.group.removeAll();var g=new D({rectHover:!0,cursor:"default"});g.setShape({segs:_.getLayout("linesPoints")}),this._setCommon(g,_),this.group.add(g),this._incremental=null},I.incrementalPrepareUpdate=function(_){this.group.removeAll(),this._clearIncremental(),_.count()>5e5?(this._incremental||(this._incremental=new R({silent:!0})),this.group.add(this._incremental)):this._incremental=null},I.incrementalUpdate=function(_,g){var u=new D;u.setShape({segs:g.getLayout("linesPoints")}),this._setCommon(u,g,!!this._incremental),this._incremental?this._incremental.addDisplayable(u,!0):(u.rectHover=!0,u.cursor="default",u.__startIndex=_.start,this.group.add(u))},I.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},I._setCommon=function(_,g,u){var c=g.hostModel;_.setShape({polyline:c.get("polyline"),curveness:c.get("lineStyle.curveness")}),_.useStyle(c.getModel("lineStyle").getLineStyle()),_.style.strokeNoScale=!0;var l=g.getVisual("color");l&&_.setStyle("stroke",l),_.setStyle("fill"),u||(_.seriesIndex=c.seriesIndex,_.on("mousemove",function(e){_.dataIndex=null;var t=_.findDataIndex(e.offsetX,e.offsetY);t>0&&(_.dataIndex=t+_.__startIndex)}))},I._clearIncremental=function(){var _=this._incremental;_&&_.clearDisplaybles()};var S=E;W.exports=S},48066:(W,G,T)=>{var L=T(51177),R=T(41525).createSymbol,k=T(91754),O=L.extendShape({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(S,_){var g=_.points,u=_.size,c=this.symbolProxy,l=c.shape;if(!((S.getContext?S.getContext():S)&&u[0]<4))for(var e=0;e<g.length;){var t=g[e++],i=g[e++];isNaN(t)||isNaN(i)||this.softClipShape&&!this.softClipShape.contain(t,i)||(l.x=t-u[0]/2,l.y=i-u[1]/2,l.width=u[0],l.height=u[1],c.buildPath(S,l,!0))}},afterBrush:function(S){var _=this.shape,g=_.points,u=_.size;if(u[0]<4){this.setTransform(S);for(var c=0;c<g.length;){var l=g[c++],e=g[c++];isNaN(l)||isNaN(e)||this.softClipShape&&!this.softClipShape.contain(l,e)||S.fillRect(l-u[0]/2,e-u[1]/2,u[0],u[1])}this.restoreTransform(S)}},findDataIndex:function(S,_){for(var g=this.shape,u=g.points,c=g.size,l=Math.max(c[0],4),e=Math.max(c[1],4),t=u.length/2-1;t>=0;t--){var i=2*t,s=u[i]-l/2,a=u[i+1]-e/2;if(S>=s&&_>=a&&S<=s+l&&_<=a+e)return t}return-1}});function D(){this.group=new L.Group}var E=D.prototype;E.isPersistent=function(){return!this._incremental},E.updateData=function(S,_){this.group.removeAll();var g=new O({rectHover:!0,cursor:"default"});g.setShape({points:S.getLayout("symbolPoints")}),this._setCommon(g,S,!1,_),this.group.add(g),this._incremental=null},E.updateLayout=function(S){if(!this._incremental){var _=S.getLayout("symbolPoints");this.group.eachChild(function(g){if(g.startIndex!=null){var u=2*(g.endIndex-g.startIndex),c=4*g.startIndex*2;_=new Float32Array(_.buffer,c,u)}g.setShape("points",_)})}},E.incrementalPrepareUpdate=function(S){this.group.removeAll(),this._clearIncremental(),S.count()>2e6?(this._incremental||(this._incremental=new k({silent:!0})),this.group.add(this._incremental)):this._incremental=null},E.incrementalUpdate=function(S,_,g){var u;this._incremental?(u=new O,this._incremental.addDisplayable(u,!0)):((u=new O({rectHover:!0,cursor:"default",startIndex:S.start,endIndex:S.end})).incremental=!0,this.group.add(u)),u.setShape({points:_.getLayout("symbolPoints")}),this._setCommon(u,_,!!this._incremental,g)},E._setCommon=function(S,_,g,u){var c=_.hostModel;u=u||{};var l=_.getVisual("symbolSize");S.setShape("size",l instanceof Array?l:[l,l]),S.softClipShape=u.clipShape||null,S.symbolProxy=R(_.getVisual("symbol"),0,0,0,0),S.setColor=S.symbolProxy.setColor;var e=S.shape.size[0]<4;S.useStyle(c.getModel("itemStyle").getItemStyle(e?["color","shadowBlur","shadowColor"]:["color"]));var t=_.getVisual("color");t&&S.setColor(t),g||(S.seriesIndex=c.seriesIndex,S.on("mousemove",function(i){S.dataIndex=null;var s=S.findDataIndex(i.offsetX,i.offsetY);s>=0&&(S.dataIndex=s+(S.startIndex||0))}))},E.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},E._clearIncremental=function(){var S=this._incremental;S&&S.clearDisplaybles()};var I=D;W.exports=I},77159:(W,G,T)=>{var L=T(33051),R=T(45280),k=T(41525),O=T(93290),D=T(51177),E=T(85669).round,I=["fromSymbol","toSymbol"];function S(e){return"_"+e+"Type"}function _(e,t,i){var s=t.getItemVisual(i,e);if(s&&s!=="none"){var a=t.getItemVisual(i,"color"),o=t.getItemVisual(i,e+"Size"),r=t.getItemVisual(i,e+"Rotate");L.isArray(o)||(o=[o,o]);var n=k.createSymbol(s,-o[0]/2,-o[1]/2,o[0],o[1],a);return n.__specifiedRotation=r==null||isNaN(r)?void 0:+r*Math.PI/180||0,n.name=e,n}}function g(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var i=t[2];i?(e.cpx1=i[0],e.cpy1=i[1]):(e.cpx1=NaN,e.cpy1=NaN)}function u(e,t,i){D.Group.call(this),this._createLine(e,t,i)}var c=u.prototype;c.beforeUpdate=function(){var e=this,t=e.childOfName("fromSymbol"),i=e.childOfName("toSymbol"),s=e.childOfName("label");if(t||i||!s.ignore){for(var a=1,o=this.parent;o;)o.scale&&(a/=o.scale[0]),o=o.parent;var r=e.childOfName("line");if(this.__dirty||r.__dirty){var n,h=r.shape.percent,p=r.pointAt(0),d=r.pointAt(h),f=R.sub([],d,p);if(R.normalize(f,f),t){if(t.attr("position",p),(n=t.__specifiedRotation)==null){var v=r.tangentAt(0);t.attr("rotation",Math.PI/2-Math.atan2(v[1],v[0]))}else t.attr("rotation",n);t.attr("scale",[a*h,a*h])}if(i&&(i.attr("position",d),(n=i.__specifiedRotation)==null?(v=r.tangentAt(1),i.attr("rotation",-Math.PI/2-Math.atan2(v[1],v[0]))):i.attr("rotation",n),i.attr("scale",[a*h,a*h])),!s.ignore){var m,y,x,w;s.attr("position",d);var M=s.__labelDistance,C=M[0]*a,A=M[1]*a,P=h/2,b=[(v=r.tangentAt(P))[1],-v[0]],N=r.pointAt(P);b[1]>0&&(b[0]=-b[0],b[1]=-b[1]);var B,z=v[0]<0?-1:1;if(s.__position!=="start"&&s.__position!=="end"){var F=-Math.atan2(v[1],v[0]);d[0]<p[0]&&(F=Math.PI+F),s.attr("rotation",F)}switch(s.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":B=-A,x="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":B=A,x="top";break;default:B=0,x="middle"}switch(s.__position){case"end":m=[f[0]*C+d[0],f[1]*A+d[1]],y=f[0]>.8?"left":f[0]<-.8?"right":"center",x=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":m=[-f[0]*C+p[0],-f[1]*A+p[1]],y=f[0]>.8?"right":f[0]<-.8?"left":"center",x=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":m=[C*z+p[0],p[1]+B],y=v[0]<0?"right":"left",w=[-C*z,-B];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":m=[N[0],N[1]+B],y="center",w=[0,-B];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":m=[-C*z+d[0],d[1]+B],y=v[0]>=0?"right":"left",w=[C*z,-B]}s.attr({style:{textVerticalAlign:s.__verticalAlign||x,textAlign:s.__textAlign||y},position:m,scale:[a,a],origin:w})}}}},c._createLine=function(e,t,i){var s=e.hostModel,a=function(r){var n=new O({name:"line",subPixelOptimize:!0});return g(n.shape,r),n}(e.getItemLayout(t));a.shape.percent=0,D.initProps(a,{shape:{percent:1}},s,t),this.add(a);var o=new D.Text({name:"label",lineLabelOriginalOpacity:1});this.add(o),L.each(I,function(r){var n=_(r,e,t);this.add(n),this[S(r)]=e.getItemVisual(t,r)},this),this._updateCommonStl(e,t,i)},c.updateData=function(e,t,i){var s=e.hostModel,a=this.childOfName("line"),o=e.getItemLayout(t),r={shape:{}};g(r.shape,o),D.updateProps(a,r,s,t),L.each(I,function(n){var h=e.getItemVisual(t,n),p=S(n);if(this[p]!==h){this.remove(this.childOfName(n));var d=_(n,e,t);this.add(d)}this[p]=h},this),this._updateCommonStl(e,t,i)},c._updateCommonStl=function(e,t,i){var s=e.hostModel,a=this.childOfName("line"),o=i&&i.lineStyle,r=i&&i.hoverLineStyle,n=i&&i.labelModel,h=i&&i.hoverLabelModel;if(!i||e.hasItemOption){var p=e.getItemModel(t);o=p.getModel("lineStyle").getLineStyle(),r=p.getModel("emphasis.lineStyle").getLineStyle(),n=p.getModel("label"),h=p.getModel("emphasis.label")}var d=e.getItemVisual(t,"color"),f=L.retrieve3(e.getItemVisual(t,"opacity"),o.opacity,1);a.useStyle(L.defaults({strokeNoScale:!0,fill:"none",stroke:d,opacity:f},o)),a.hoverStyle=r,L.each(I,function(N){var B=this.childOfName(N);B&&(B.setColor(d),B.setStyle({opacity:f}))},this);var v,m,y=n.getShallow("show"),x=h.getShallow("show"),w=this.childOfName("label");if((y||x)&&(v=d||"#000",(m=s.getFormattedLabel(t,"normal",e.dataType))==null)){var M=s.getRawValue(t);m=M==null?e.getName(t):isFinite(M)?E(M):M}var C=y?m:null,A=x?L.retrieve2(s.getFormattedLabel(t,"emphasis",e.dataType),m):null,P=w.style;if(C!=null||A!=null){D.setTextStyle(w.style,n,{text:C},{autoColor:v}),w.__textAlign=P.textAlign,w.__verticalAlign=P.textVerticalAlign,w.__position=n.get("position")||"middle";var b=n.get("distance");L.isArray(b)||(b=[b,b]),w.__labelDistance=b}w.hoverStyle=A!=null?{text:A,textFill:h.getTextColor(!0),fontStyle:h.getShallow("fontStyle"),fontWeight:h.getShallow("fontWeight"),fontSize:h.getShallow("fontSize"),fontFamily:h.getShallow("fontFamily")}:{text:null},w.ignore=!y&&!x,D.setHoverStyle(this)},c.highlight=function(){this.trigger("emphasis")},c.downplay=function(){this.trigger("normal")},c.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},c.setLinePoints=function(e){var t=this.childOfName("line");g(t.shape,e),t.dirty()},L.inherits(u,D.Group);var l=u;W.exports=l},47145:(W,G,T)=>{var L=T(51177),R=T(77159);function k(_){this._ctor=_||R,this.group=new L.Group}var O=k.prototype;function D(_){var g=_.hostModel;return{lineStyle:g.getModel("lineStyle").getLineStyle(),hoverLineStyle:g.getModel("emphasis.lineStyle").getLineStyle(),labelModel:g.getModel("label"),hoverLabelModel:g.getModel("emphasis.label")}}function E(_){return isNaN(_[0])||isNaN(_[1])}function I(_){return!E(_[0])&&!E(_[1])}O.isPersistent=function(){return!0},O.updateData=function(_){var g=this,u=g.group,c=g._lineData;g._lineData=_,c||u.removeAll();var l=D(_);_.diff(c).add(function(e){(function(t,i,s,a){if(I(i.getItemLayout(s))){var o=new t._ctor(i,s,a);i.setItemGraphicEl(s,o),t.group.add(o)}})(g,_,e,l)}).update(function(e,t){(function(i,s,a,o,r,n){var h=s.getItemGraphicEl(o);I(a.getItemLayout(r))?(h?h.updateData(a,r,n):h=new i._ctor(a,r,n),a.setItemGraphicEl(r,h),i.group.add(h)):i.group.remove(h)})(g,c,_,t,e,l)}).remove(function(e){u.remove(c.getItemGraphicEl(e))}).execute()},O.updateLayout=function(){var _=this._lineData;_&&_.eachItemGraphicEl(function(g,u){g.updateLayout(_,u)},this)},O.incrementalPrepareUpdate=function(_){this._seriesScope=D(_),this._lineData=null,this.group.removeAll()},O.incrementalUpdate=function(_,g){function u(e){e.isGroup||function(t){return t.animators&&t.animators.length>0}(e)||(e.incremental=e.useHoverLayer=!0)}for(var c=_.start;c<_.end;c++)if(I(g.getItemLayout(c))){var l=new this._ctor(g,c,this._seriesScope);l.traverse(u),this.group.add(l),g.setItemGraphicEl(c,l)}},O.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},O._clearIncremental=function(){var _=this._incremental;_&&_.clearDisplaybles()};var S=k;W.exports=S},93290:(W,G,T)=>{var L=T(51177),R=T(45280),k=L.Line.prototype,O=L.BezierCurve.prototype;function D(I){return isNaN(+I.cpx1)||isNaN(+I.cpy1)}var E=L.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(I,S){this[D(S)?"_buildPathLine":"_buildPathCurve"](I,S)},_buildPathLine:k.buildPath,_buildPathCurve:O.buildPath,pointAt:function(I){return this[D(this.shape)?"_pointAtLine":"_pointAtCurve"](I)},_pointAtLine:k.pointAt,_pointAtCurve:O.pointAt,tangentAt:function(I){var S=this.shape,_=D(S)?[S.x2-S.x1,S.y2-S.y1]:this._tangentAtCurve(I);return R.normalize(_,_)},_tangentAtCurve:O.tangentAt});W.exports=E},30146:(W,G,T)=>{var L=T(51177),R=T(33051);function k(E,I,S){L.Group.call(this),this._createPolyline(E,I,S)}var O=k.prototype;O._createPolyline=function(E,I,S){var _=E.getItemLayout(I),g=new L.Polyline({shape:{points:_}});this.add(g),this._updateCommonStl(E,I,S)},O.updateData=function(E,I,S){var _=E.hostModel,g=this.childAt(0),u={shape:{points:E.getItemLayout(I)}};L.updateProps(g,u,_,I),this._updateCommonStl(E,I,S)},O._updateCommonStl=function(E,I,S){var _=this.childAt(0),g=E.getItemModel(I),u=E.getItemVisual(I,"color"),c=S&&S.lineStyle,l=S&&S.hoverLineStyle;S&&!E.hasItemOption||(c=g.getModel("lineStyle").getLineStyle(),l=g.getModel("emphasis.lineStyle").getLineStyle()),_.useStyle(R.defaults({strokeNoScale:!0,fill:"none",stroke:u},c)),_.hoverStyle=l,L.setHoverStyle(this)},O.updateLayout=function(E,I){this.childAt(0).setShape("points",E.getItemLayout(I))},R.inherits(k,L.Group);var D=k;W.exports=D},66351:(W,G,T)=>{var L=T(33051),R=T(41525).createSymbol,k=T(51177),O=T(85669).parsePercent,D=T(33140).getDefaultLabel;function E(s,a,o){k.Group.call(this),this.updateData(s,a,o)}var I=E.prototype,S=E.getSymbolSize=function(s,a){var o=s.getItemVisual(a,"symbolSize");return o instanceof Array?o.slice():[+o,+o]};function _(s){return[s[0]/2,s[1]/2]}function g(s,a){this.parent.drift(s,a)}I._createSymbol=function(s,a,o,r,n){this.removeAll();var h=a.getItemVisual(o,"color"),p=R(s,-1,-1,2,2,h,n);p.attr({z2:100,culling:!0,scale:_(r)}),p.drift=g,this._symbolType=s,this.add(p)},I.stopSymbolAnimation=function(s){this.childAt(0).stopAnimation(s)},I.getSymbolPath=function(){return this.childAt(0)},I.getScale=function(){return this.childAt(0).scale},I.highlight=function(){this.childAt(0).trigger("emphasis")},I.downplay=function(){this.childAt(0).trigger("normal")},I.setZ=function(s,a){var o=this.childAt(0);o.zlevel=s,o.z=a},I.setDraggable=function(s){var a=this.childAt(0);a.draggable=s,a.cursor=s?"move":a.cursor},I.updateData=function(s,a,o){this.silent=!1;var r=s.getItemVisual(a,"symbol")||"circle",n=s.hostModel,h=S(s,a),p=r!==this._symbolType;if(p){var d=s.getItemVisual(a,"symbolKeepAspect");this._createSymbol(r,s,a,h,d)}else(f=this.childAt(0)).silent=!1,k.updateProps(f,{scale:_(h)},n,a);if(this._updateCommon(s,a,h,o),p){var f=this.childAt(0),v=o&&o.fadeIn,m={scale:f.scale.slice()};v&&(m.style={opacity:f.style.opacity}),f.scale=[0,0],v&&(f.style.opacity=0),k.initProps(f,m,n,a)}this._seriesModel=n};var u=["itemStyle"],c=["emphasis","itemStyle"],l=["label"],e=["emphasis","label"];function t(s,a){if(!this.incremental&&!this.useHoverLayer)if(a==="emphasis"){var o=this.__symbolOriginalScale,r=o[1]/o[0],n={scale:[Math.max(1.1*o[0],o[0]+3),Math.max(1.1*o[1],o[1]+3*r)]};this.animateTo(n,400,"elasticOut")}else a==="normal"&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}I._updateCommon=function(s,a,o,r){var n=this.childAt(0),h=s.hostModel,p=s.getItemVisual(a,"color");n.type!=="image"?n.useStyle({strokeNoScale:!0}):n.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var d=r&&r.itemStyle,f=r&&r.hoverItemStyle,v=r&&r.symbolOffset,m=r&&r.labelModel,y=r&&r.hoverLabelModel,x=r&&r.hoverAnimation,w=r&&r.cursorStyle;if(!r||s.hasItemOption){var M=r&&r.itemModel?r.itemModel:s.getItemModel(a);d=M.getModel(u).getItemStyle(["color"]),f=M.getModel(c).getItemStyle(),v=M.getShallow("symbolOffset"),m=M.getModel(l),y=M.getModel(e),x=M.getShallow("hoverAnimation"),w=M.getShallow("cursor")}else f=L.extend({},f);var C=n.style,A=s.getItemVisual(a,"symbolRotate");n.attr("rotation",(A||0)*Math.PI/180||0),v&&n.attr("position",[O(v[0],o[0]),O(v[1],o[1])]),w&&n.attr("cursor",w),n.setColor(p,r&&r.symbolInnerColor),n.setStyle(d);var P=s.getItemVisual(a,"opacity");P!=null&&(C.opacity=P);var b=s.getItemVisual(a,"liftZ"),N=n.__z2Origin;b!=null?N==null&&(n.__z2Origin=n.z2,n.z2+=b):N!=null&&(n.z2=N,n.__z2Origin=null);var B=r&&r.useNameLabel;k.setLabelStyle(C,f,m,y,{labelFetcher:h,labelDataIndex:a,defaultText:function(z,F){return B?s.getName(z):D(s,z)},isRectText:!0,autoColor:p}),n.__symbolOriginalScale=_(o),n.hoverStyle=f,n.highDownOnUpdate=x&&h.isAnimationEnabled()?t:null,k.setHoverStyle(n)},I.fadeOut=function(s,a){var o=this.childAt(0);this.silent=o.silent=!0,(!a||!a.keepLabel)&&(o.style.text=null),k.updateProps(o,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,s)},L.inherits(E,k.Group);var i=E;W.exports=i},68162:(W,G,T)=>{var L=T(51177),R=T(66351),k=T(33051).isObject;function O(g){this.group=new L.Group,this._symbolCtor=g||R}var D=O.prototype;function E(g,u,c,l){return u&&!isNaN(u[0])&&!isNaN(u[1])&&!(l.isIgnore&&l.isIgnore(c))&&!(l.clipShape&&!l.clipShape.contain(u[0],u[1]))&&g.getItemVisual(c,"symbol")!=="none"}function I(g){return g==null||k(g)||(g={isIgnore:g}),g||{}}function S(g){var u=g.hostModel;return{itemStyle:u.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:u.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:u.get("symbolRotate"),symbolOffset:u.get("symbolOffset"),hoverAnimation:u.get("hoverAnimation"),labelModel:u.getModel("label"),hoverLabelModel:u.getModel("emphasis.label"),cursorStyle:u.get("cursor")}}D.updateData=function(g,u){u=I(u);var c=this.group,l=g.hostModel,e=this._data,t=this._symbolCtor,i=S(g);e||c.removeAll(),g.diff(e).add(function(s){var a=g.getItemLayout(s);if(E(g,a,s,u)){var o=new t(g,s,i);o.attr("position",a),g.setItemGraphicEl(s,o),c.add(o)}}).update(function(s,a){var o=e.getItemGraphicEl(a),r=g.getItemLayout(s);E(g,r,s,u)?(o?(o.updateData(g,s,i),L.updateProps(o,{position:r},l)):(o=new t(g,s)).attr("position",r),c.add(o),g.setItemGraphicEl(s,o)):c.remove(o)}).remove(function(s){var a=e.getItemGraphicEl(s);a&&a.fadeOut(function(){c.remove(a)})}).execute(),this._data=g},D.isPersistent=function(){return!0},D.updateLayout=function(){var g=this._data;g&&g.eachItemGraphicEl(function(u,c){var l=g.getItemLayout(c);u.attr("position",l)})},D.incrementalPrepareUpdate=function(g){this._seriesScope=S(g),this._data=null,this.group.removeAll()},D.incrementalUpdate=function(g,u,c){function l(s){s.isGroup||(s.incremental=s.useHoverLayer=!0)}c=I(c);for(var e=g.start;e<g.end;e++){var t=u.getItemLayout(e);if(E(u,t,e,c)){var i=new this._symbolCtor(u,e,this._seriesScope);i.traverse(l),i.attr("position",t),this.group.add(i),u.setItemGraphicEl(e,i)}}},D.remove=function(g){var u=this.group,c=this._data;c&&g?c.eachItemGraphicEl(function(l){l.fadeOut(function(){u.remove(l)})}):u.removeAll()};var _=O;W.exports=_},22963:(W,G,T)=>{var L=T(51177),R=T(85669).round;function k(D,E,I){var S=D.getArea(),_=D.getBaseAxis().isHorizontal(),g=S.x,u=S.y,c=S.width,l=S.height,e=I.get("lineStyle.width")||2;g-=e/2,u-=e/2,c+=e,l+=e,g=Math.floor(g),c=Math.round(c);var t=new L.Rect({shape:{x:g,y:u,width:c,height:l}});return E&&(t.shape[_?"width":"height"]=0,L.initProps(t,{shape:{width:c,height:l}},I)),t}function O(D,E,I){var S=D.getArea(),_=new L.Sector({shape:{cx:R(D.cx,1),cy:R(D.cy,1),r0:R(S.r0,1),r:R(S.r,1),startAngle:S.startAngle,endAngle:S.endAngle,clockwise:S.clockwise}});return E&&(_.shape.endAngle=S.startAngle,L.initProps(_,{shape:{endAngle:S.endAngle}},I)),_}G.createGridClipPath=k,G.createPolarClipPath=O,G.createClipPath=function(D,E,I){return D?D.type==="polar"?O(D,E,I):D.type==="cartesian2d"?k(D,E,I):null:null}},19638:(W,G,T)=>{var L=T(33051),R=T(87587),k=T(85446),O=T(63978),D=T(55623),E=T(95899),I=T(40488);W.exports=function(S,_,g,u,c){for(var l=new k(u),e=0;e<S.length;e++)l.addNode(L.retrieve(S[e].id,S[e].name,e),e);var t=[],i=[],s=0;for(e=0;e<_.length;e++){var a=_[e],o=a.source,r=a.target;l.addEdge(o,r,s)&&(i.push(a),t.push(L.retrieve(a.id,o+" > "+r)),s++)}var n,h=g.get("coordinateSystem");if(h==="cartesian2d"||h==="polar")n=I(S,g);else{var p=E.get(h),d=p&&p.type!=="view"&&p.dimensions||[];L.indexOf(d,"value")<0&&d.concat(["value"]);var f=D(S,{coordDimensions:d});(n=new R(f,g)).initData(S)}var v=new R(["value"],g);return v.initData(i,t),c&&c(n,v),O({mainData:n,struct:l,structAttr:"graph",datas:{node:n,edge:v},datasAttr:{node:"data",edge:"edgeData"}}),l.update(),l}},40488:(W,G,T)=>{var L=T(33051),R=T(87587),k=T(55623),O=T(93819).SOURCE_FORMAT_ORIGINAL,D=T(10381).getDimensionTypeByAxis,E=T(32234).getDataItemValue,I=T(95899),S=T(32702).getCoordSysInfoBySeries,_=T(99574),g=T(99936).enableDataStack,u=T(61772).makeSeriesEncodeForAxisCoordSys;W.exports=function(c,l,e){e=e||{},_.isInstance(c)||(c=_.seriesDataToSource(c));var t,i=l.get("coordinateSystem"),s=I.get(i),a=S(l);a&&(t=L.map(a.coordSysDims,function(f){var v={name:f},m=a.axisMap.get(f);if(m){var y=m.get("type");v.type=D(y)}return v})),t||(t=s&&(s.getDimensionsInfo?s.getDimensionsInfo():s.dimensions.slice())||["x","y"]);var o,r,n=k(c,{coordDimensions:t,generateCoord:e.generateCoord,encodeDefaulter:e.useEncodeDefaulter?L.curry(u,t,l):null});a&&L.each(n,function(f,v){var m=f.coordDim,y=a.categoryAxisMap.get(m);y&&(o==null&&(o=v),f.ordinalMeta=y.getOrdinalMeta()),f.otherDims.itemName!=null&&(r=!0)}),r||o==null||(n[o].otherDims.itemName=0);var h=g(l,n),p=new R(n,l);p.setCalculationInfo(h);var d=o!=null&&function(f){if(f.sourceFormat===O){var v=function(m){for(var y=0;y<m.length&&m[y]==null;)y++;return m[y]}(f.data||[]);return v!=null&&!L.isArray(E(v))}}(c)?function(f,v,m,y){return y===o?m:this.defaultDimValueGetter(f,v,m,y)}:null;return p.hasItemOption=!1,p.initData(c,null,d),p}},23263:(W,G,T)=>{var L=T(55623),R=T(87587),k=T(33051),O=k.extend,D=k.isArray;W.exports=function(E,I,S){I=D(I)&&{coordDimensions:I}||O({},I);var _=E.getSource(),g=L(_,I),u=new R(g,E);return u.initData(_,S),u}},95682:(W,G,T)=>{var L=T(32234).makeInner;W.exports=function(){var R=L();return function(k){var O=R(k),D=k.pipelineContext,E=O.large,I=O.progressiveRender,S=O.large=D&&D.large,_=O.progressiveRender=D&&D.progressiveRender;return!!(E^S||I^_)&&"reset"}}},35540:(W,G,T)=>{var L=T(70492);L.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),L.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){})},33140:(W,G,T)=>{var L=T(68540).retrieveRawValue;G.getDefaultLabel=function(R,k){var O=R.mapDimension("defaultedLabel",!0),D=O.length;if(D===1)return L(R,k,O[0]);if(D){for(var E=[],I=0;I<O.length;I++){var S=L(R,k,O[I]);E.push(S)}return E.join(" ")}}},11516:(W,G,T)=>{var L=T(33051),R="-->",k=function(S){return S.get("autoCurveness")||null},O=function(S,_){var g=k(S),u=20,c=[];if(typeof g=="number")u=g;else if(L.isArray(g))return void(S.__curvenessList=g);_>u&&(u=_);var l=u%2?u+2:u+3;c=[];for(var e=0;e<l;e++)c.push((e%2?e+1:e)/10*(e%2?-1:1));S.__curvenessList=c},D=function(S,_,g){var u=[S.id,S.dataIndex].join("."),c=[_.id,_.dataIndex].join(".");return[g.uid,u,c].join(R)},E=function(S){var _=S.split(R);return[_[0],_[2],_[1]].join(R)},I=function(S,_){var g=_.__edgeMap;return g[S]?g[S].length:0};G.initCurvenessList=function(S){k(S)&&(S.__curvenessList=[],S.__edgeMap={},O(S))},G.createEdgeMapForCurveness=function(S,_,g,u){if(k(g)){var c=D(S,_,g),l=g.__edgeMap,e=l[E(c)];l[c]&&!e?l[c].isForward=!0:e&&l[c]&&(e.isForward=!0,l[c].isForward=!1),l[c]=l[c]||[],l[c].push(u)}},G.getCurvenessForEdge=function(S,_,g,u){var c=k(_),l=L.isArray(c);if(!c)return null;var e=function(d,f){var v=D(d.node1,d.node2,f);return f.__edgeMap[v]}(S,_);if(!e)return null;for(var t=-1,i=0;i<e.length;i++)if(e[i]===g){t=i;break}var s=function(d,f){return I(D(d.node1,d.node2,f),f)+I(D(d.node2,d.node1,f),f)}(S,_);O(_,s),S.lineStyle=S.lineStyle||{};var a=D(S.node1,S.node2,_),o=_.__curvenessList,r=l||s%2?0:1;if(e.isForward)return o[r+t];var n=E(a),h=I(n,_),p=o[t+h+r];return u?l?c&&c[0]===0?(h+r)%2?p:-p:((h%2?0:1)+r)%2?p:-p:(h+r)%2?p:-p:o[t+h+r]}},68833:(W,G,T)=>{var L=T(33051);function R(k){for(var O=[];k;)(k=k.parentNode)&&O.push(k);return O.reverse()}G.retrieveTargetInfo=function(k,O,D){if(k&&L.indexOf(O,k.type)>=0){var E=D.getData().tree.root,I=k.targetNode;if(typeof I=="string"&&(I=E.getNodeById(I)),I&&E.contains(I))return{node:I};var S=k.targetNodeId;if(S!=null&&(I=E.getNodeById(S)))return{node:I}}},G.getPathToRoot=R,G.aboveViewRoot=function(k,O){var D=R(k);return L.indexOf(D,O)>=0},G.wrapTreePathInfo=function(k,O){for(var D=[];k;){var E=k.dataIndex;D.push({name:k.name,dataIndex:E,value:O.getRawValue(E)}),k=k.parentNode}return D.reverse(),D}},4993:(W,G,T)=>{var L=T(23263),R=T(33051),k=T(10381).getDimensionTypeByAxis,O=T(61772).makeSeriesEncodeForAxisCoordSys,D={_baseAxisDim:null,getInitialData:function(E,I){var S,_,g=I.getComponent("xAxis",this.get("xAxisIndex")),u=I.getComponent("yAxis",this.get("yAxisIndex")),c=g.get("type"),l=u.get("type");c==="category"?(E.layout="horizontal",S=g.getOrdinalMeta(),_=!0):l==="category"?(E.layout="vertical",S=u.getOrdinalMeta(),_=!0):E.layout=E.layout||"horizontal";var e=["x","y"],t=E.layout==="horizontal"?0:1,i=this._baseAxisDim=e[t],s=e[1-t],a=[g,u],o=a[t].get("type"),r=a[1-t].get("type"),n=E.data;if(n&&_){var h=[];R.each(n,function(f,v){var m;f.value&&R.isArray(f.value)?(m=f.value.slice(),f.value.unshift(v)):R.isArray(f)?(m=f.slice(),f.unshift(v)):m=f,h.push(m)}),E.data=h}var p=this.defaultValueDimensions,d=[{name:i,type:k(o),ordinalMeta:S,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:s,type:k(r),dimsDef:p.slice()}];return L(this,{coordDimensions:d,dimensionsCount:p.length+1,encodeDefaulter:R.curry(O,d,this)})},getBaseAxis:function(){var E=this._baseAxisDim;return this.ecModel.getComponent(E+"Axis",this.get(E+"AxisIndex")).axis}};G.seriesModelMixin=D},46295:(W,G,T)=>{var L=T(70492);T(39790),T(81950);var R=T(34586),k=T(21149),O=T(64088);T(84617),L.registerVisual(R("line","circle","line")),L.registerLayout(k("line")),L.registerProcessor(L.PRIORITY.PROCESSOR.STATISTIC,O("line"))},39790:(W,G,T)=>{T(38175).__DEV__;var L=T(40488),R=T(93321).extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(k,O){return L(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});W.exports=R},81950:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=T(3726).fromPoints,k=T(68162),O=T(66351),D=T(21068),E=T(51177),I=T(32234),S=T(30633),_=S.Polyline,g=S.Polygon,u=T(75797),c=T(89385),l=c.prepareDataCoordInfo,e=c.getStackedOnPoint,t=T(22963),i=t.createGridClipPath,s=t.createPolarClipPath;function a(d,f){if(d.length===f.length){for(var v=0;v<d.length;v++){var m=d[v],y=f[v];if(m[0]!==y[0]||m[1]!==y[1])return}return!0}}function o(d,f){var v=[],m=[],y=[],x=[];return R(d,v,m),R(f,y,x),Math.max(Math.abs(v[0]-y[0]),Math.abs(v[1]-y[1]),Math.abs(m[0]-x[0]),Math.abs(m[1]-x[1]))}function r(d){return typeof d=="number"?d:d?.5:0}function n(d,f,v){for(var m=f.getBaseAxis(),y=m.dim==="x"||m.dim==="radius"?0:1,x=[],w=0;w<d.length-1;w++){var M=d[w+1],C=d[w];x.push(C);var A=[];switch(v){case"end":A[y]=M[y],A[1-y]=C[1-y],x.push(A);break;case"middle":var P=(C[y]+M[y])/2,b=[];A[y]=b[y]=P,A[1-y]=C[1-y],b[1-y]=M[1-y],x.push(A),x.push(b);break;default:A[y]=C[y],A[1-y]=M[1-y],x.push(A)}}return d[w]&&x.push(d[w]),x}function h(d,f,v){if(d.type==="cartesian2d"){var m=d.getBaseAxis().isHorizontal(),y=i(d,f,v);if(!v.get("clip",!0)){var x=y.shape,w=Math.max(x.width,x.height);m?(x.y-=w,x.height+=2*w):(x.x-=w,x.width+=2*w)}return y}return s(d,f,v)}var p=u.extend({type:"line",init:function(){var d=new E.Group,f=new k;this.group.add(f.group),this._symbolDraw=f,this._lineGroup=d},render:function(d,f,v){var m=d.coordinateSystem,y=this.group,x=d.getData(),w=d.getModel("lineStyle"),M=d.getModel("areaStyle"),C=x.mapArray(x.getItemLayout),A=m.type==="polar",P=this._coordSys,b=this._symbolDraw,N=this._polyline,B=this._polygon,z=this._lineGroup,F=d.get("animation"),V=!M.isEmpty(),H=M.get("origin"),U=function($,rt,et){if(!et.valueDim)return[];for(var it=[],ot=0,st=rt.count();ot<st;ot++)it.push(e(et,$,rt,ot));return it}(m,x,l(m,x,H)),j=d.get("showSymbol"),X=j&&!A&&function($,rt,et){var it=$.get("showAllSymbol"),ot=it==="auto";if(!it||ot){var st=et.getAxesByScale("ordinal")[0];if(st&&(!ot||!function(yt,gt){var pt=yt.getExtent(),bt=Math.abs(pt[1]-pt[0])/yt.scale.count();isNaN(bt)&&(bt=0);for(var mt=gt.count(),nt=Math.max(1,Math.round(mt/5)),lt=0;lt<mt;lt+=nt)if(1.5*O.getSymbolSize(gt,lt)[yt.isHorizontal()?1:0]>bt)return!1;return!0}(st,rt))){var at=rt.mapDimension(st.dim),vt={};return L.each(st.getViewLabels(),function(yt){vt[yt.tickValue]=1}),function(yt){return!vt.hasOwnProperty(rt.get(at,yt))}}}}(d,x,m),Y=this._data;Y&&Y.eachItemGraphicEl(function($,rt){$.__temp&&(y.remove($),Y.setItemGraphicEl(rt,null))}),j||b.remove(),y.add(z);var J,K=!A&&d.get("step");m&&m.getArea&&d.get("clip",!0)&&((J=m.getArea()).width!=null?(J.x-=.1,J.y-=.1,J.width+=.2,J.height+=.2):J.r0&&(J.r0-=.5,J.r1+=.5)),this._clipShapeForSymbol=J,N&&P.type===m.type&&K===this._step?(V&&!B?B=this._newPolygon(C,U,m,F):B&&!V&&(z.remove(B),B=this._polygon=null),z.setClipPath(h(m,!1,d)),j&&b.updateData(x,{isIgnore:X,clipShape:J}),x.eachItemGraphicEl(function($){$.stopAnimation(!0)}),a(this._stackedOnPoints,U)&&a(this._points,C)||(F?this._updateAnimation(x,U,m,v,K,H):(K&&(C=n(C,m,K),U=n(U,m,K)),N.setShape({points:C}),B&&B.setShape({points:C,stackedOnPoints:U})))):(j&&b.updateData(x,{isIgnore:X,clipShape:J}),K&&(C=n(C,m,K),U=n(U,m,K)),N=this._newPolyline(C,m,F),V&&(B=this._newPolygon(C,U,m,F)),z.setClipPath(h(m,!0,d)));var Q=function($,rt){var et=$.getVisual("visualMeta");if(et&&et.length&&$.count()&&rt.type==="cartesian2d"){for(var it,ot,st=et.length-1;st>=0;st--){var at=et[st].dimension,vt=$.dimensions[at],yt=$.getDimensionInfo(vt);if((it=yt&&yt.coordDim)==="x"||it==="y"){ot=et[st];break}}if(ot){var gt=rt.getAxis(it),pt=L.map(ot.stops,function(ft){return{coord:gt.toGlobalCoord(gt.dataToCoord(ft.value)),color:ft.color}}),bt=pt.length,mt=ot.outerColors.slice();bt&&pt[0].coord>pt[bt-1].coord&&(pt.reverse(),mt.reverse());var nt=pt[0].coord-10,lt=pt[bt-1].coord+10,ct=lt-nt;if(ct<.001)return"transparent";L.each(pt,function(ft){ft.offset=(ft.coord-nt)/ct}),pt.push({offset:bt?pt[bt-1].offset:.5,color:mt[1]||"transparent"}),pt.unshift({offset:bt?pt[0].offset:.5,color:mt[0]||"transparent"});var ht=new E.LinearGradient(0,0,0,0,pt,!0);return ht[it]=nt,ht[it+"2"]=lt,ht}}}(x,m)||x.getVisual("color");N.useStyle(L.defaults(w.getLineStyle(),{fill:"none",stroke:Q,lineJoin:"bevel"}));var Z=d.get("smooth");if(Z=r(d.get("smooth")),N.setShape({smooth:Z,smoothMonotone:d.get("smoothMonotone"),connectNulls:d.get("connectNulls")}),B){var q=x.getCalculationInfo("stackedOnSeries"),tt=0;B.useStyle(L.defaults(M.getAreaStyle(),{fill:Q,opacity:.7,lineJoin:"bevel"})),q&&(tt=r(q.get("smooth"))),B.setShape({smooth:Z,stackedOnSmooth:tt,smoothMonotone:d.get("smoothMonotone"),connectNulls:d.get("connectNulls")})}this._data=x,this._coordSys=m,this._stackedOnPoints=U,this._points=C,this._step=K,this._valueOrigin=H},dispose:function(){},highlight:function(d,f,v,m){var y=d.getData(),x=I.queryDataIndex(y,m);if(!(x instanceof Array)&&x!=null&&x>=0){var w=y.getItemGraphicEl(x);if(!w){var M=y.getItemLayout(x);if(!M||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(M[0],M[1]))return;(w=new O(y,x)).position=M,w.setZ(d.get("zlevel"),d.get("z")),w.ignore=isNaN(M[0])||isNaN(M[1]),w.__temp=!0,y.setItemGraphicEl(x,w),w.stopSymbolAnimation(!0),this.group.add(w)}w.highlight()}else u.prototype.highlight.call(this,d,f,v,m)},downplay:function(d,f,v,m){var y=d.getData(),x=I.queryDataIndex(y,m);if(x!=null&&x>=0){var w=y.getItemGraphicEl(x);w&&(w.__temp?(y.setItemGraphicEl(x,null),this.group.remove(w)):w.downplay())}else u.prototype.downplay.call(this,d,f,v,m)},_newPolyline:function(d){var f=this._polyline;return f&&this._lineGroup.remove(f),f=new _({shape:{points:d},silent:!0,z2:10}),this._lineGroup.add(f),this._polyline=f,f},_newPolygon:function(d,f){var v=this._polygon;return v&&this._lineGroup.remove(v),v=new g({shape:{points:d,stackedOnPoints:f},silent:!0}),this._lineGroup.add(v),this._polygon=v,v},_updateAnimation:function(d,f,v,m,y,x){var w=this._polyline,M=this._polygon,C=d.hostModel,A=D(this._data,d,this._stackedOnPoints,f,this._coordSys,v,this._valueOrigin,x),P=A.current,b=A.stackedOnCurrent,N=A.next,B=A.stackedOnNext;if(y&&(P=n(A.current,v,y),b=n(A.stackedOnCurrent,v,y),N=n(A.next,v,y),B=n(A.stackedOnNext,v,y)),o(P,N)>3e3||M&&o(b,B)>3e3)return w.setShape({points:N}),void(M&&M.setShape({points:N,stackedOnPoints:B}));w.shape.__points=A.current,w.shape.points=P,E.updateProps(w,{shape:{points:N}},C),M&&(M.setShape({points:P,stackedOnPoints:b}),E.updateProps(M,{shape:{points:N,stackedOnPoints:B}},C));for(var z=[],F=A.status,V=0;V<F.length;V++)if(F[V].cmd==="="){var H=d.getItemGraphicEl(F[V].idx1);H&&z.push({el:H,ptIdx:V})}w.animators&&w.animators.length&&w.animators[0].during(function(){for(var U=0;U<z.length;U++)z[U].el.attr("position",w.shape.__points[z[U].ptIdx])})},remove:function(d){var f=this.group,v=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),v&&v.eachItemGraphicEl(function(m,y){m.__temp&&(f.remove(m),v.setItemGraphicEl(y,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});W.exports=p},89385:(W,G,T)=>{var L=T(99936).isDimensionStacked,R=T(33051).map;G.prepareDataCoordInfo=function(k,O,D){var E,I=k.getBaseAxis(),S=k.getOtherAxis(I),_=function(s,a){var o=0,r=s.scale.getExtent();return a==="start"?o=r[0]:a==="end"?o=r[1]:r[0]>0?o=r[0]:r[1]<0&&(o=r[1]),o}(S,D),g=I.dim,u=S.dim,c=O.mapDimension(u),l=O.mapDimension(g),e=u==="x"||u==="radius"?1:0,t=R(k.dimensions,function(s){return O.mapDimension(s)}),i=O.getCalculationInfo("stackResultDimension");return(E|=L(O,t[0]))&&(t[0]=i),(E|=L(O,t[1]))&&(t[1]=i),{dataDimsForPoint:t,valueStart:_,valueAxisDim:u,baseAxisDim:g,stacked:!!E,valueDim:c,baseDim:l,baseDataOffset:e,stackedOverDimension:O.getCalculationInfo("stackedOverDimension")}},G.getStackedOnPoint=function(k,O,D,E){var I=NaN;k.stacked&&(I=D.get(D.getCalculationInfo("stackedOverDimension"),E)),isNaN(I)&&(I=k.valueStart);var S=k.baseDataOffset,_=[];return _[S]=D.get(k.baseDim,E),_[1-S]=I,O.dataToPoint(_)}},21068:(W,G,T)=>{var L=T(89385),R=L.prepareDataCoordInfo,k=L.getStackedOnPoint;W.exports=function(O,D,E,I,S,_,g,u){for(var c=function(P,b){var N=[];return b.diff(P).add(function(B){N.push({cmd:"+",idx:B})}).update(function(B,z){N.push({cmd:"=",idx:z,idx1:B})}).remove(function(B){N.push({cmd:"-",idx:B})}).execute(),N}(O,D),l=[],e=[],t=[],i=[],s=[],a=[],o=[],r=R(S,D,g),n=R(_,O,u),h=0;h<c.length;h++){var p=c[h],d=!0;switch(p.cmd){case"=":var f=O.getItemLayout(p.idx),v=D.getItemLayout(p.idx1);(isNaN(f[0])||isNaN(f[1]))&&(f=v.slice()),l.push(f),e.push(v),t.push(E[p.idx]),i.push(I[p.idx1]),o.push(D.getRawIndex(p.idx1));break;case"+":var m=p.idx;l.push(S.dataToPoint([D.get(r.dataDimsForPoint[0],m),D.get(r.dataDimsForPoint[1],m)])),e.push(D.getItemLayout(m).slice()),t.push(k(r,S,D,m)),i.push(I[m]),o.push(D.getRawIndex(m));break;case"-":m=p.idx;var y=O.getRawIndex(m);y!==m?(l.push(O.getItemLayout(m)),e.push(_.dataToPoint([O.get(n.dataDimsForPoint[0],m),O.get(n.dataDimsForPoint[1],m)])),t.push(E[m]),i.push(k(n,_,O,m)),o.push(y)):d=!1}d&&(s.push(p),a.push(a.length))}a.sort(function(P,b){return o[P]-o[b]});var x=[],w=[],M=[],C=[],A=[];for(h=0;h<a.length;h++)m=a[h],x[h]=l[m],w[h]=e[m],M[h]=t[m],C[h]=i[m],A[h]=s[m];return{current:x,next:w,stackedOnCurrent:M,stackedOnNext:C,status:A}}},30633:(W,G,T)=>{var L=T(10712),R=T(45280),k=T(60873),O=R.min,D=R.max,E=R.scaleAndAdd,I=R.copy,S=[],_=[],g=[];function u(a){return isNaN(a[0])||isNaN(a[1])}function c(a,o,r,n,h,p,d,f,v,m,y){return m!=="none"&&m?l.apply(this,arguments):e.apply(this,arguments)}function l(a,o,r,n,h,p,d,f,v,m,y){for(var x=0,w=r,M=0;M<n;M++){var C=o[w];if(w>=h||w<0)break;if(u(C)){if(y){w+=p;continue}break}if(w===r)a[p>0?"moveTo":"lineTo"](C[0],C[1]);else if(v>0){var A=o[x],P=m==="y"?1:0,b=(C[P]-A[P])*v;I(_,A),_[P]=A[P]+b,I(g,C),g[P]=C[P]-b,a.bezierCurveTo(_[0],_[1],g[0],g[1],C[0],C[1])}else a.lineTo(C[0],C[1]);x=w,w+=p}return M}function e(a,o,r,n,h,p,d,f,v,m,y){for(var x=0,w=r,M=0;M<n;M++){var C=o[w];if(w>=h||w<0)break;if(u(C)){if(y){w+=p;continue}break}if(w===r)a[p>0?"moveTo":"lineTo"](C[0],C[1]),I(_,C);else if(v>0){var A=w+p,P=o[A];if(y)for(;P&&u(o[A]);)P=o[A+=p];var b=.5,N=o[x];if(!(P=o[A])||u(P))I(g,C);else{var B,z;if(u(P)&&!y&&(P=C),R.sub(S,P,N),m==="x"||m==="y"){var F=m==="x"?0:1;B=Math.abs(C[F]-N[F]),z=Math.abs(C[F]-P[F])}else B=R.dist(C,N),z=R.dist(C,P);E(g,C,S,-v*(1-(b=z/(z+B))))}O(_,_,f),D(_,_,d),O(g,g,f),D(g,g,d),a.bezierCurveTo(_[0],_[1],g[0],g[1],C[0],C[1]),E(_,C,S,v*b)}else a.lineTo(C[0],C[1]);x=w,w+=p}return M}function t(a,o){var r=[1/0,1/0],n=[-1/0,-1/0];if(o)for(var h=0;h<a.length;h++){var p=a[h];p[0]<r[0]&&(r[0]=p[0]),p[1]<r[1]&&(r[1]=p[1]),p[0]>n[0]&&(n[0]=p[0]),p[1]>n[1]&&(n[1]=p[1])}return{min:o?r:n,max:o?n:r}}var i=L.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:k(L.prototype.brush),buildPath:function(a,o){var r=o.points,n=0,h=r.length,p=t(r,o.smoothConstraint);if(o.connectNulls){for(;h>0&&u(r[h-1]);h--);for(;n<h&&u(r[n]);n++);}for(;n<h;)n+=c(a,r,n,h,h,1,p.min,p.max,o.smooth,o.smoothMonotone,o.connectNulls)+1}}),s=L.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:k(L.prototype.brush),buildPath:function(a,o){var r=o.points,n=o.stackedOnPoints,h=0,p=r.length,d=o.smoothMonotone,f=t(r,o.smoothConstraint),v=t(n,o.smoothConstraint);if(o.connectNulls){for(;p>0&&u(r[p-1]);p--);for(;h<p&&u(r[h]);h++);}for(;h<p;){var m=c(a,r,h,p,p,1,f.min,f.max,o.smooth,d,o.connectNulls);c(a,n,h+m-1,m,p,-1,v.min,v.max,o.stackedOnSmooth,d,o.connectNulls),h+=m+1,a.closePath()}}});G.Polyline=i,G.Polygon=s},64771:(W,G,T)=>{var L=T(70492);T(40142),T(68192);var R=T(43850),k=T(62503);L.registerLayout(R),L.registerVisual(k)},40142:(W,G,T)=>{T(38175).__DEV__;var L=T(93321),R=T(87587),k=T(33051),O=k.concatArray,D=k.mergeAll,E=k.map,I=T(78988).encodeHTML,S=(T(95899),typeof Uint32Array>"u"?Array:Uint32Array),_=typeof Float64Array>"u"?Array:Float64Array;function g(l){var e=l.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(l.data=E(e,function(t){var i={coords:[t[0].coord,t[1].coord]};return t[0].name&&(i.fromName=t[0].name),t[1].name&&(i.toName=t[1].name),D([i,t[0],t[1]])}))}var u=L.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(l){l.data=l.data||[],g(l);var e=this._processFlatCoordsArray(l.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(l.data=new Float32Array(e.count)),u.superApply(this,"init",arguments)},mergeOption:function(l){if(g(l),l.data){var e=this._processFlatCoordsArray(l.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(l.data=new Float32Array(e.count))}u.superApply(this,"mergeOption",arguments)},appendData:function(l){var e=this._processFlatCoordsArray(l.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=O(this._flatCoords,e.flatCoords),this._flatCoordsOffset=O(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),l.data=new Float32Array(e.count)),this.getRawData().appendData(l.data)},_getCoordsFromItemModel:function(l){var e=this.getData().getItemModel(l);return e.option instanceof Array?e.option:e.getShallow("coords")},getLineCoordsCount:function(l){return this._flatCoordsOffset?this._flatCoordsOffset[2*l+1]:this._getCoordsFromItemModel(l).length},getLineCoords:function(l,e){if(this._flatCoordsOffset){for(var t=this._flatCoordsOffset[2*l],i=this._flatCoordsOffset[2*l+1],s=0;s<i;s++)e[s]=e[s]||[],e[s][0]=this._flatCoords[t+2*s],e[s][1]=this._flatCoords[t+2*s+1];return i}var a=this._getCoordsFromItemModel(l);for(s=0;s<a.length;s++)e[s]=e[s]||[],e[s][0]=a[s][0],e[s][1]=a[s][1];return a.length},_processFlatCoordsArray:function(l){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),typeof l[0]=="number"){for(var t=l.length,i=new S(t),s=new _(t),a=0,o=0,r=0,n=0;n<t;){r++;var h=l[n++];i[o++]=a+e,i[o++]=h;for(var p=0;p<h;p++){var d=l[n++],f=l[n++];s[a++]=d,s[a++]=f}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,o),flatCoords:s,count:r}}return{flatCoordsOffset:null,flatCoords:null,count:l.length}},getInitialData:function(l,e){var t=new R(["value"],this);return t.hasItemOption=!1,t.initData(l.data,[],function(i,s,a,o){if(i instanceof Array)return NaN;t.hasItemOption=!0;var r=i.value;return r!=null?r instanceof Array?r[o]:r:void 0}),t},formatTooltip:function(l){var e=this.getData().getItemModel(l),t=e.get("name");if(t)return t;var i=e.get("fromName"),s=e.get("toName"),a=[];return i!=null&&a.push(i),s!=null&&a.push(s),I(a.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var l=this.option.progressive;return l==null?this.option.large?1e4:this.get("progressive"):l},getProgressiveThreshold:function(){var l=this.option.progressiveThreshold;return l==null?this.option.large?2e4:this.get("progressiveThreshold"):l},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}}),c=u;W.exports=c},68192:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(47145),k=T(99895),O=T(77159),D=T(30146),E=T(69121),I=T(34148),S=T(43850),_=T(22963).createClipPath,g=L.extendChartView({type:"lines",init:function(){},render:function(u,c,l){var e=u.getData(),t=this._updateLineDraw(e,u),i=u.get("zlevel"),s=u.get("effect.trailLength"),a=l.getZr(),o=a.painter.getType()==="svg";o||a.painter.getLayer(i).clear(!0),this._lastZlevel==null||o||a.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(u)&&s&&(o||a.configLayer(i,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(s/10+.9,1),0)})),t.updateData(e);var r=u.get("clip",!0)&&_(u.coordinateSystem,!1,u);r?this.group.setClipPath(r):this.group.removeClipPath(),this._lastZlevel=i,this._finished=!0},incrementalPrepareRender:function(u,c,l){var e=u.getData();this._updateLineDraw(e,u).incrementalPrepareUpdate(e),this._clearLayer(l),this._finished=!1},incrementalRender:function(u,c,l){this._lineDraw.incrementalUpdate(u,c.getData()),this._finished=u.end===c.getData().count()},updateTransform:function(u,c,l){var e=u.getData(),t=u.pipelineContext;if(!this._finished||t.large||t.progressiveRender)return{update:!0};var i=S.reset(u);i.progress&&i.progress({start:0,end:e.count()},e),this._lineDraw.updateLayout(),this._clearLayer(l)},_updateLineDraw:function(u,c){var l=this._lineDraw,e=this._showEffect(c),t=!!c.get("polyline"),i=c.pipelineContext.large;return l&&e===this._hasEffet&&t===this._isPolyline&&i===this._isLargeDraw||(l&&l.remove(),l=this._lineDraw=i?new I:new R(t?e?E:D:e?k:O),this._hasEffet=e,this._isPolyline=t,this._isLargeDraw=i,this.group.removeAll()),this.group.add(l.group),l},_showEffect:function(u){return!!u.get("effect.show")},_clearLayer:function(u){var c=u.getZr();c.painter.getType()==="svg"||this._lastZlevel==null||c.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(u,c){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(c)},dispose:function(){}});W.exports=g},43850:(W,G,T)=>{var L={seriesType:"lines",plan:T(95682)(),reset:function(R){var k=R.coordinateSystem,O=R.get("polyline"),D=R.pipelineContext.large;return{progress:function(E,I){var S=[];if(D){var _,g=E.end-E.start;if(O){for(var u=0,c=E.start;c<E.end;c++)u+=R.getLineCoordsCount(c);_=new Float32Array(g+2*u)}else _=new Float32Array(4*g);var l=0,e=[];for(c=E.start;c<E.end;c++){var t=R.getLineCoords(c,S);O&&(_[l++]=t);for(var i=0;i<t;i++)e=k.dataToPoint(S[i],!1,e),_[l++]=e[0],_[l++]=e[1]}I.setLayout("linesPoints",_)}else for(c=E.start;c<E.end;c++){var s=I.getItemModel(c),a=(t=R.getLineCoords(c,S),[]);if(O)for(var o=0;o<t;o++)a.push(k.dataToPoint(S[o]));else{a[0]=k.dataToPoint(S[0]),a[1]=k.dataToPoint(S[1]);var r=s.get("lineStyle.curveness");+r&&(a[2]=[(a[0][0]+a[1][0])/2-(a[0][1]-a[1][1])*r,(a[0][1]+a[1][1])/2-(a[1][0]-a[0][0])*r])}I.setItemLayout(c,a)}}}}};W.exports=L},62503:W=>{function G(R){return R instanceof Array||(R=[R,R]),R}var T="lineStyle.opacity".split("."),L={seriesType:"lines",reset:function(R,k,O){var D=G(R.get("symbol")),E=G(R.get("symbolSize")),I=R.getData();return I.setVisual("fromSymbol",D&&D[0]),I.setVisual("toSymbol",D&&D[1]),I.setVisual("fromSymbolSize",E&&E[0]),I.setVisual("toSymbolSize",E&&E[1]),I.setVisual("opacity",R.get(T)),{dataEach:I.hasItemOption?function(S,_){var g=S.getItemModel(_),u=G(g.getShallow("symbol",!0)),c=G(g.getShallow("symbolSize",!0)),l=g.get(T);u[0]&&S.setItemVisual(_,"fromSymbol",u[0]),u[1]&&S.setItemVisual(_,"toSymbol",u[1]),c[0]&&S.setItemVisual(_,"fromSymbolSize",c[0]),c[1]&&S.setItemVisual(_,"toSymbolSize",c[1]),S.setItemVisual(_,"opacity",l)}:null}}};W.exports=L},10064:(W,G,T)=>{var L=T(70492);T(42980),T(5249),T(28401),T(18958);var R=T(34804),k=T(80685),O=T(31293),D=T(87949),E=T(75324);L.registerLayout(R),L.registerVisual(k),L.registerProcessor(L.PRIORITY.PROCESSOR.STATISTIC,O),L.registerPreprocessor(D),E("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}])},42980:(W,G,T)=>{var L=T(33051),R=T(23263),k=T(93321),O=T(78988),D=O.encodeHTML,E=O.addCommas,I=T(1501),S=T(68540).retrieveRawAttr,_=T(11194),g=T(61772).makeSeriesEncodeForNameBased,u=k.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(l){for(var e=R(this,{coordDimensions:["value"],encodeDefaulter:L.curry(g,this)}),t=e.mapDimension("value"),i=L.createHashMap(),s=[],a=[],o=0,r=e.count();o<r;o++){var n=e.getName(o);i.set(n,!0),s.push({name:n,value:e.get(t,o),selected:S(e,o,"selected")})}var h=_.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return L.each(h.regions,function(p){var d=p.name;i.get(d)||(s.push({name:d}),a.push(d))}),this.updateSelectedMap(s),e.appendValues([],a),e},getHostGeoModel:function(){var l=this.option.geoIndex;return l!=null?this.dependentModels.geo[l]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(l){var e=this.getData();return e.get(e.mapDimension("value"),l)},getRegionModel:function(l){var e=this.getData();return e.getItemModel(e.indexOfName(l))},formatTooltip:function(l,e,t,i){for(var s=this.getData(),a=E(this.getRawValue(l)),o=s.getName(l),r=this.seriesGroup,n=[],h=0;h<r.length;h++){var p=r[h].originalData.indexOfName(o),d=s.mapDimension("value");isNaN(r[h].originalData.get(d,p))||n.push(D(r[h].name))}var f=i==="html"?"<br/>":`
`;return n.join(", ")+f+D(o+" : "+a)},getTooltipPosition:function(l){if(l!=null){var e=this.getData().getName(l),t=this.coordinateSystem,i=t.getRegion(e);return i&&t.dataToPoint(i.center)}},setZoom:function(l){this.option.zoom=l},setCenter:function(l){this.option.center=l},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}});L.mixin(u,I);var c=u;W.exports=c},5249:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(51177),O=T(44121),D="__seriesMapHighDown",E=L.extendChartView({type:"map",render:function(_,g,u,c){if(!c||c.type!=="mapToggleSelect"||c.from!==this.uid){var l=this.group;if(l.removeAll(),!_.getHostGeoModel()){if(c&&c.type==="geoRoam"&&c.componentType==="series"&&c.seriesId===_.id)(e=this._mapDraw)&&l.add(e.group);else if(_.needsDrawMap){var e=this._mapDraw||new O(u,!0);l.add(e.group),e.draw(_,g,u,this,c),this._mapDraw=e}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;_.get("showLegendSymbol")&&g.getComponent("legend")&&this._renderSymbols(_,g,u)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(_,g,u){var c=_.originalData,l=this.group;c.each(c.mapDimension("value"),function(e,t){if(!isNaN(e)){var i=c.getItemLayout(t);if(i&&i.point){var s=i.point,a=i.offset,o=new k.Circle({style:{fill:_.getData().getVisual("color")},shape:{cx:s[0]+9*a,cy:s[1],r:3},silent:!0,z2:8+(a?0:k.Z2_EMPHASIS_LIFT+1)});if(!a){var r=_.mainSeries.getData(),n=c.getName(t),h=r.indexOfName(n),p=c.getItemModel(t),d=p.getModel("label"),f=p.getModel("emphasis.label"),v=r.getItemGraphicEl(h),m=R.retrieve2(_.getFormattedLabel(h,"normal"),n),y=R.retrieve2(_.getFormattedLabel(h,"emphasis"),m),x=v[D],w=Math.random();if(!x){x=v[D]={};var M=R.curry(I,!0),C=R.curry(I,!1);v.on("mouseover",M).on("mouseout",C).on("emphasis",M).on("normal",C)}v.__seriesMapCallKey=w,R.extend(x,{recordVersion:w,circle:o,labelModel:d,hoverLabelModel:f,emphasisText:y,normalText:m}),S(x,!1)}l.add(o)}}})}});function I(_){var g=this[D];g&&g.recordVersion===this.__seriesMapCallKey&&S(g,_)}function S(_,g){var u=_.circle,c=_.labelModel,l=_.hoverLabelModel,e=_.emphasisText,t=_.normalText;g?(u.style.extendFrom(k.setTextStyle({},l,{text:l.get("show")?e:null},{isRectText:!0,useInsideStyle:!1},!0)),u.__mapOriginalZ2=u.z2,u.z2+=k.Z2_EMPHASIS_LIFT):(k.setTextStyle(u.style,c,{text:c.get("show")?t:null,textPosition:c.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),u.dirty(!1),u.__mapOriginalZ2!=null&&(u.z2=u.__mapOriginalZ2,u.__mapOriginalZ2=null))}W.exports=E},87949:(W,G,T)=>{var L=T(33051);W.exports=function(R){L.each(R.series,function(k){k&&k.type==="map"&&(k.map=k.map||k.mapType,L.defaults(k,k.mapLocation))})}},31293:(W,G,T)=>{var L=T(33051);W.exports=function(R){var k={};R.eachSeriesByType("map",function(O){var D=O.getHostGeoModel(),E=D?"o"+D.id:"i"+O.getMapType();(k[E]=k[E]||[]).push(O)}),L.each(k,function(O,D){for(var E,I,S,_=(E=L.map(O,function(u){return u.getData()}),I=O[0].get("mapValueCalculation"),S={},L.each(E,function(u){u.each(u.mapDimension("value"),function(c,l){var e="ec-"+u.getName(l);S[e]=S[e]||[],isNaN(c)||S[e].push(c)})}),E[0].map(E[0].mapDimension("value"),function(u,c){for(var l="ec-"+E[0].getName(c),e=0,t=1/0,i=-1/0,s=S[l].length,a=0;a<s;a++)t=Math.min(t,S[l][a]),i=Math.max(i,S[l][a]),e+=S[l][a];return s===0?NaN:I==="min"?t:I==="max"?i:I==="average"?e/s:e})),g=0;g<O.length;g++)O[g].originalData=O[g].getData();for(g=0;g<O.length;g++)O[g].seriesGroup=O,O[g].needsDrawMap=g===0&&!O[g].getHostGeoModel(),O[g].setData(_.cloneShallow()),O[g].mainSeries=O[0]})}},34804:(W,G,T)=>{var L=T(33051);W.exports=function(R){var k={};R.eachSeriesByType("map",function(O){var D=O.getMapType();if(!O.getHostGeoModel()&&!k[D]){var E={};L.each(O.seriesGroup,function(S){var _=S.coordinateSystem,g=S.originalData;S.get("showLegendSymbol")&&R.getComponent("legend")&&g.each(g.mapDimension("value"),function(u,c){var l=g.getName(c),e=_.getRegion(l);if(e&&!isNaN(u)){var t=E[l]||0,i=_.dataToPoint(e.center);E[l]=t+1,g.setItemLayout(c,{point:i,offset:t})}})});var I=O.getData();I.each(function(S){var _=I.getName(S),g=I.getItemLayout(S)||{};g.showLabel=!E[_],I.setItemLayout(S,g)}),k[D]=!0}})}},80685:W=>{W.exports=function(G){G.eachSeriesByType("map",function(T){var L=T.get("color"),R=T.getModel("itemStyle"),k=R.get("areaColor"),O=R.get("color")||L[T.seriesIndex%L.length];T.getData().setVisual({areaColor:k,color:O})})}},28571:(W,G,T)=>{var L=T(70492);T(75781),T(20710),T(6335);var R=T(75608);L.registerVisual(R)},20710:(W,G,T)=>{var L=T(33051),R=L.each,k=L.createHashMap,O=T(93321),D=T(40488),E=O.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(I,S){var _=this.getSource();return function(g,u){if(!g.encodeDefine){var c=u.ecModel.getComponent("parallel",u.get("parallelIndex"));if(c){var l=g.encodeDefine=k();R(c.dimensions,function(e){var t=+e.replace("dim","");l.set(e,t)})}}}(_,this),D(_,this)},getRawIndicesByActiveState:function(I){var S=this.coordinateSystem,_=this.getData(),g=[];return S.eachActiveState(_,function(u,c){I===u&&g.push(_.getRawIndex(c))}),g},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}});W.exports=E},6335:(W,G,T)=>{var L=T(51177);function R(I,S,_,g){for(var u,c=[],l=0;l<_.length;l++){var e=_[l],t=I.get(I.mapDimension(e),S);u=t,(g.getAxis(e).type==="category"?u==null:u==null||isNaN(u))||c.push(g.dataToPoint(t,e))}return c}function k(I,S,_,g,u){var c=R(I,_,g,u),l=new L.Polyline({shape:{points:c},silent:!0,z2:10});return S.add(l),I.setItemGraphicEl(_,l),l}function O(I){var S=I.get("smooth",!0);return S===!0&&(S=.3),{lineStyle:I.getModel("lineStyle").getLineStyle(),smooth:S!=null?S:.3}}function D(I,S,_,g){var u=g.lineStyle;S.hasItemOption&&(u=S.getItemModel(_).getModel("lineStyle").getLineStyle()),I.useStyle(u);var c=I.style;c.fill=null,c.stroke=S.getItemVisual(_,"color"),c.opacity=S.getItemVisual(_,"opacity"),g.smooth&&(I.shape.smooth=g.smooth)}var E=T(75797).extend({type:"parallel",init:function(){this._dataGroup=new L.Group,this.group.add(this._dataGroup),this._data,this._initialized},render:function(I,S,_,g){var u=this._dataGroup,c=I.getData(),l=this._data,e=I.coordinateSystem,t=e.dimensions,i=O(I);if(c.diff(l).add(function(a){D(k(c,u,a,t,e),c,a,i)}).update(function(a,o){var r=l.getItemGraphicEl(o),n=R(c,a,t,e);c.setItemGraphicEl(a,r);var h=g&&g.animation===!1?null:I;L.updateProps(r,{shape:{points:n}},h,a),D(r,c,a,i)}).remove(function(a){var o=l.getItemGraphicEl(a);u.remove(o)}).execute(),!this._initialized){this._initialized=!0;var s=function(a,o,r){var n=a.model,h=a.getRect(),p=new L.Rect({shape:{x:h.x,y:h.y,width:h.width,height:h.height}}),d=n.get("layout")==="horizontal"?"width":"height";return p.setShape(d,0),L.initProps(p,{shape:{width:h.width,height:h.height}},o,function(){setTimeout(function(){u.removeClipPath()})}),p}(e,I);u.setClipPath(s)}this._data=c},incrementalPrepareRender:function(I,S,_){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(I,S,_){for(var g=S.getData(),u=S.coordinateSystem,c=u.dimensions,l=O(S),e=I.start;e<I.end;e++){var t=k(g,this._dataGroup,e,c,u);t.incremental=!0,D(t,g,e,l)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});W.exports=E},75608:W=>{var G=["lineStyle","normal","opacity"],T={seriesType:"parallel",reset:function(L,R,k){var O=L.getModel("itemStyle"),D=L.getModel("lineStyle"),E=R.get("color"),I=D.get("color")||O.get("color")||E[L.seriesIndex%E.length],S=L.get("inactiveOpacity"),_=L.get("activeOpacity"),g=L.getModel("lineStyle").getLineStyle(),u=L.coordinateSystem,c=L.getData(),l={normal:g.opacity,active:_,inactive:S};return c.setVisual("color",I),{progress:function(e,t){u.eachActiveState(t,function(i,s){var a=l[i];if(i==="normal"&&t.hasItemOption){var o=t.getItemModel(s).get(G,!0);o!=null&&(a=o)}t.setItemVisual(s,"opacity",a)},e.start,e.end)}}}};W.exports=T},59314:(W,G,T)=>{var L=T(70492),R=T(33051);T(77532),T(77346),T(25874);var k=T(79093).layout,O=T(34586);T(84617),L.registerLayout(R.curry(k,"pictorialBar")),L.registerVisual(O("pictorialBar","roundRect"))},94859:(W,G,T)=>{var L=T(70492),R=T(33051);T(52702),T(42471);var k=T(75324),O=T(69274),D=T(63798),E=T(22528);k("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),L.registerVisual(O("pie")),L.registerLayout(R.curry(D,"pie")),L.registerProcessor(E("pie"))},52702:(W,G,T)=>{var L=T(70492),R=T(23263),k=T(33051),O=T(32234),D=T(85669).getPercentWithPrecision,E=T(1501),I=T(68540).retrieveRawAttr,S=T(61772).makeSeriesEncodeForNameBased,_=T(72019),g=L.extendSeriesModel({type:"series.pie",init:function(c){g.superApply(this,"init",arguments),this.legendVisualProvider=new _(k.bind(this.getData,this),k.bind(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(c)},mergeOption:function(c){g.superCall(this,"mergeOption",c),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(c,l){return R(this,{coordDimensions:["value"],encodeDefaulter:k.curry(S,this)})},_createSelectableList:function(){for(var c=this.getRawData(),l=c.mapDimension("value"),e=[],t=0,i=c.count();t<i;t++)e.push({name:c.getName(t),value:c.get(l,t),selected:I(c,t,"selected")});return e},getDataParams:function(c){var l=this.getData(),e=g.superCall(this,"getDataParams",c),t=[];return l.each(l.mapDimension("value"),function(i){t.push(i)}),e.percent=D(t,c,l.hostModel.get("percentPrecision")),e.$vars.push("percent"),e},_defaultLabelLine:function(c){O.defaultEmphasis(c,"labelLine",["show"]);var l=c.labelLine,e=c.emphasis.labelLine;l.show=l.show&&c.label.show,e.show=e.show&&c.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});k.mixin(g,E);var u=g;W.exports=u},42471:(W,G,T)=>{var L=T(33051),R=T(51177),k=T(75797);function O(_,g,u,c){var l=g.getData(),e=this.dataIndex,t=l.getName(e),i=g.get("selectedOffset");c.dispatchAction({type:"pieToggleSelect",from:_,name:t,seriesId:g.id}),l.each(function(s){D(l.getItemGraphicEl(s),l.getItemLayout(s),g.isSelected(l.getName(s)),i,u)})}function D(_,g,u,c,l){var e=(g.startAngle+g.endAngle)/2,t=u?c:0,i=[Math.cos(e)*t,Math.sin(e)*t];l?_.animate().when(200,{position:i}).start("bounceOut"):_.attr("position",i)}function E(_,g){R.Group.call(this);var u=new R.Sector({z2:2}),c=new R.Polyline,l=new R.Text;this.add(u),this.add(c),this.add(l),this.updateData(_,g,!0)}var I=E.prototype;I.updateData=function(_,g,u){var c=this.childAt(0),l=this.childAt(1),e=this.childAt(2),t=_.hostModel,i=_.getItemModel(g),s=_.getItemLayout(g),a=L.extend({},s);a.label=null;var o=t.getShallow("animationTypeUpdate");u?(c.setShape(a),t.getShallow("animationType")==="scale"?(c.shape.r=s.r0,R.initProps(c,{shape:{r:s.r}},t,g)):(c.shape.endAngle=s.startAngle,R.updateProps(c,{shape:{endAngle:s.endAngle}},t,g))):o==="expansion"?c.setShape(a):R.updateProps(c,{shape:a},t,g);var r=_.getItemVisual(g,"color");c.useStyle(L.defaults({lineJoin:"bevel",fill:r},i.getModel("itemStyle").getItemStyle())),c.hoverStyle=i.getModel("emphasis.itemStyle").getItemStyle();var n=i.getShallow("cursor");n&&c.attr("cursor",n),D(this,_.getItemLayout(g),t.isSelected(_.getName(g)),t.get("selectedOffset"),t.get("animation"));var h=!u&&o==="transition";this._updateLabel(_,g,h),this.highDownOnUpdate=t.get("silent")?null:function(p,d){var f=t.isAnimationEnabled()&&i.get("hoverAnimation");d==="emphasis"?(l.ignore=l.hoverIgnore,e.ignore=e.hoverIgnore,f&&(c.stopAnimation(!0),c.animateTo({shape:{r:s.r+t.get("hoverOffset")}},300,"elasticOut"))):(l.ignore=l.normalIgnore,e.ignore=e.normalIgnore,f&&(c.stopAnimation(!0),c.animateTo({shape:{r:s.r}},300,"elasticOut")))},R.setHoverStyle(this)},I._updateLabel=function(_,g,u){var c=this.childAt(1),l=this.childAt(2),e=_.hostModel,t=_.getItemModel(g),i=_.getItemLayout(g).label,s=_.getItemVisual(g,"color");if(!i||isNaN(i.x)||isNaN(i.y))l.ignore=l.normalIgnore=l.hoverIgnore=c.ignore=c.normalIgnore=c.hoverIgnore=!0;else{var a={points:i.linePoints||[[i.x,i.y],[i.x,i.y],[i.x,i.y]]},o={x:i.x,y:i.y};u?(R.updateProps(c,{shape:a},e,g),R.updateProps(l,{style:o},e,g)):(c.attr({shape:a}),l.attr({style:o})),l.attr({rotation:i.rotation,origin:[i.x,i.y],z2:10});var r=t.getModel("label"),n=t.getModel("emphasis.label"),h=t.getModel("labelLine"),p=t.getModel("emphasis.labelLine");s=_.getItemVisual(g,"color"),R.setLabelStyle(l.style,l.hoverStyle={},r,n,{labelFetcher:_.hostModel,labelDataIndex:g,defaultText:i.text,autoColor:s,useInsideStyle:!!i.inside},{textAlign:i.textAlign,textVerticalAlign:i.verticalAlign,opacity:_.getItemVisual(g,"opacity")}),l.ignore=l.normalIgnore=!r.get("show"),l.hoverIgnore=!n.get("show"),c.ignore=c.normalIgnore=!h.get("show"),c.hoverIgnore=!p.get("show"),c.setStyle({stroke:s,opacity:_.getItemVisual(g,"opacity")}),c.setStyle(h.getModel("lineStyle").getLineStyle()),c.hoverStyle=p.getModel("lineStyle").getLineStyle();var d=h.get("smooth");d&&d===!0&&(d=.4),c.setShape({smooth:d})}},L.inherits(E,R.Group);var S=k.extend({type:"pie",init:function(){var _=new R.Group;this._sectorGroup=_},render:function(_,g,u,c){if(!c||c.from!==this.uid){var l=_.getData(),e=this._data,t=this.group,i=g.get("animation"),s=!e,a=_.get("animationType"),o=_.get("animationTypeUpdate"),r=L.curry(O,this.uid,_,i,u),n=_.get("selectedMode");if(l.diff(e).add(function(v){var m=new E(l,v);s&&a!=="scale"&&m.eachChild(function(y){y.stopAnimation(!0)}),n&&m.on("click",r),l.setItemGraphicEl(v,m),t.add(m)}).update(function(v,m){var y=e.getItemGraphicEl(m);s||o==="transition"||y.eachChild(function(x){x.stopAnimation(!0)}),y.updateData(l,v),y.off("click"),n&&y.on("click",r),t.add(y),l.setItemGraphicEl(v,y)}).remove(function(v){var m=e.getItemGraphicEl(v);t.remove(m)}).execute(),i&&l.count()>0&&(s?a!=="scale":o!=="transition")){for(var h=l.getItemLayout(0),p=1;isNaN(h.startAngle)&&p<l.count();++p)h=l.getItemLayout(p);var d=Math.max(u.getWidth(),u.getHeight())/2,f=L.bind(t.removeClipPath,t);t.setClipPath(this._createClipPath(h.cx,h.cy,d,h.startAngle,h.clockwise,f,_,s))}else t.removeClipPath();this._data=l}},dispose:function(){},_createClipPath:function(_,g,u,c,l,e,t,i){var s=new R.Sector({shape:{cx:_,cy:g,r0:0,r:u,startAngle:c,endAngle:c,clockwise:l}});return(i?R.initProps:R.updateProps)(s,{shape:{endAngle:c+(l?1:-1)*Math.PI*2}},t,e),s},containPoint:function(_,g){var u=g.getData().getItemLayout(0);if(u){var c=_[0]-u.cx,l=_[1]-u.cy,e=Math.sqrt(c*c+l*l);return e<=u.r&&e>=u.r0}}});W.exports=S},17659:(W,G,T)=>{var L=T(80423),R=T(85669).parsePercent,k=Math.PI/180;function O(E,I,S,_,g,u,c,l,e,t){function i(v,m,y,x){for(var w=v;w<m&&!(E[w].y+y>e+c);w++)if(E[w].y+=y,w>v&&w+1<m&&E[w+1].y>E[w].y+E[w].height)return void s(w,y/2);s(m-1,y/2)}function s(v,m){for(var y=v;y>=0&&!(E[y].y-m<e)&&(E[y].y-=m,!(y>0&&E[y].y>E[y-1].y+E[y-1].height));y--);}function a(v,m,y,x,w,M){for(var C=m?Number.MAX_VALUE:0,A=0,P=v.length;A<P;A++)if(v[A].labelAlignTo==="none"){var b=Math.abs(v[A].y-x),N=v[A].len,B=v[A].len2,z=b<w+N?Math.sqrt((w+N+B)*(w+N+B)-b*b):Math.abs(v[A].x-y);m&&z>=C&&(z=C-10),!m&&z<=C&&(z=C+10),v[A].x=y+z*M,C=z}}E.sort(function(v,m){return v.y-m.y});for(var o,r=0,n=E.length,h=[],p=[],d=0;d<n;d++){if(E[d].position==="outer"&&E[d].labelAlignTo==="labelLine"){var f=E[d].x-t;E[d].linePoints[1][0]+=f,E[d].x=t}(o=E[d].y-r)<0&&i(d,n,-o),r=E[d].y+E[d].height}for(c-r<0&&s(n-1,r-c),d=0;d<n;d++)E[d].y>=S?p.push(E[d]):h.push(E[d]);a(h,!1,I,S,_,g),a(p,!0,I,S,_,g)}function D(E){return E.position==="center"}W.exports=function(E,I,S,_,g,u){var c,l,e=E.getData(),t=[],i=!1,s=(E.get("minShowLabelAngle")||0)*k;e.each(function(a){var o=e.getItemLayout(a),r=e.getItemModel(a),n=r.getModel("label"),h=n.get("position")||r.get("emphasis.label.position"),p=n.get("distanceToLabelLine"),d=n.get("alignTo"),f=R(n.get("margin"),S),v=n.get("bleedMargin"),m=n.getFont(),y=r.getModel("labelLine"),x=y.get("length");x=R(x,S);var w=y.get("length2");if(w=R(w,S),!(o.angle<s)){var M,C,A,P,b=(o.startAngle+o.endAngle)/2,N=Math.cos(b),B=Math.sin(b);c=o.cx,l=o.cy;var z,F=E.getFormattedLabel(a,"normal")||e.getName(a),V=L.getBoundingRect(F,m,P,"top"),H=h==="inside"||h==="inner";if(h==="center")M=o.cx,C=o.cy,P="center";else{var U=(H?(o.r+o.r0)/2*N:o.r*N)+c,j=(H?(o.r+o.r0)/2*B:o.r*B)+l;if(M=U+3*N,C=j+3*B,!H){var X=U+N*(x+I-o.r),Y=j+B*(x+I-o.r),J=X+(N<0?-1:1)*w;M=d==="edge"?N<0?g+f:g+S-f:J+(N<0?-p:p),C=Y,A=[[U,j],[X,Y],[J,Y]]}P=H?"center":d==="edge"?N>0?"right":"left":N>0?"left":"right"}var K=n.get("rotate");z=typeof K=="number"?K*(Math.PI/180):K?N<0?-b+Math.PI:-b:0,i=!!z,o.label={x:M,y:C,position:h,height:V.height,len:x,len2:w,linePoints:A,textAlign:P,verticalAlign:"middle",rotation:z,inside:H,labelDistance:p,labelAlignTo:d,labelMargin:f,bleedMargin:v,textRect:V,text:F,font:m},H||t.push(o.label)}}),!i&&E.get("avoidLabelOverlap")&&function(a,o,r,n,h,p,d,f){for(var v=[],m=[],y=Number.MAX_VALUE,x=-Number.MAX_VALUE,w=0;w<a.length;w++)D(a[w])||(a[w].x<o?(y=Math.min(y,a[w].x),v.push(a[w])):(x=Math.max(x,a[w].x),m.push(a[w])));for(O(m,o,r,n,1,0,p,0,f,x),O(v,o,r,n,-1,0,p,0,f,y),w=0;w<a.length;w++){var M=a[w];if(!D(M)){var C=M.linePoints;if(C){var A,P=M.labelAlignTo==="edge",b=M.textRect.width;(A=P?M.x<o?C[2][0]-M.labelDistance-d-M.labelMargin:d+h-M.labelMargin-C[2][0]-M.labelDistance:M.x<o?M.x-d-M.bleedMargin:d+h-M.x-M.bleedMargin)<M.textRect.width&&(M.text=L.truncateText(M.text,A,M.font),M.labelAlignTo==="edge"&&(b=L.getWidth(M.text,M.font)));var N=C[1][0]-C[2][0];P?M.x<o?C[2][0]=d+M.labelMargin+b+M.labelDistance:C[2][0]=d+h-M.labelMargin-b-M.labelDistance:(M.x<o?C[2][0]=M.x+M.labelDistance:C[2][0]=M.x-M.labelDistance,C[1][0]=C[2][0]+N),C[1][1]=C[2][1]=M.y}}}}(t,c,l,I,S,_,g,u)}},63798:(W,G,T)=>{var L=T(85669),R=L.parsePercent,k=L.linearMap,O=T(76172),D=T(17659),E=T(33051),I=2*Math.PI,S=Math.PI/180;W.exports=function(_,g,u,c){g.eachSeriesByType(_,function(l){var e=l.getData(),t=e.mapDimension("value"),i=function(V,H){return O.getLayoutRect(V.getBoxLayoutParams(),{width:H.getWidth(),height:H.getHeight()})}(l,u),s=l.get("center"),a=l.get("radius");E.isArray(a)||(a=[0,a]),E.isArray(s)||(s=[s,s]);var o=R(i.width,u.getWidth()),r=R(i.height,u.getHeight()),n=Math.min(o,r),h=R(s[0],o)+i.x,p=R(s[1],r)+i.y,d=R(a[0],n/2),f=R(a[1],n/2),v=-l.get("startAngle")*S,m=l.get("minAngle")*S,y=0;e.each(t,function(V){!isNaN(V)&&y++});var x=e.getSum(t),w=Math.PI/(x||y)*2,M=l.get("clockwise"),C=l.get("roseType"),A=l.get("stillShowZeroSum"),P=e.getDataExtent(t);P[0]=0;var b=I,N=0,B=v,z=M?1:-1;if(e.each(t,function(V,H){var U;if(isNaN(V))e.setItemLayout(H,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:M,cx:h,cy:p,r0:d,r:C?NaN:f,viewRect:i});else{(U=C!=="area"?x===0&&A?w:V*w:I/y)<m?(U=m,b-=m):N+=V;var j=B+z*U;e.setItemLayout(H,{angle:U,startAngle:B,endAngle:j,clockwise:M,cx:h,cy:p,r0:d,r:C?k(V,P,[d,f]):f,viewRect:i}),B=j}}),b<I&&y)if(b<=.001){var F=I/y;e.each(t,function(V,H){if(!isNaN(V)){var U=e.getItemLayout(H);U.angle=F,U.startAngle=v+z*H*F,U.endAngle=v+z*(H+1)*F}})}else w=b/N,B=v,e.each(t,function(V,H){if(!isNaN(V)){var U=e.getItemLayout(H),j=U.angle===m?m:V*w;U.startAngle=B,U.endAngle=B+z*j,B+=z*j}});D(l,f,i.width,i.height,i.x,i.y)})}},48927:(W,G,T)=>{var L=T(70492);T(22881),T(57345),T(36158);var R=T(69274),k=T(34586),O=T(34263),D=T(22528),E=T(17144);L.registerVisual(R("radar")),L.registerVisual(k("radar","circle")),L.registerLayout(O),L.registerProcessor(D("radar")),L.registerPreprocessor(E)},57345:(W,G,T)=>{var L=T(93321),R=T(23263),k=T(33051),O=T(78988).encodeHTML,D=T(72019),E=L.extend({type:"series.radar",dependencies:["radar"],init:function(S){E.superApply(this,"init",arguments),this.legendVisualProvider=new D(k.bind(this.getData,this),k.bind(this.getRawData,this))},getInitialData:function(S,_){return R(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(S,_,g,u){var c=this.getData(),l=this.coordinateSystem.getIndicatorAxes(),e=this.getData().getName(S),t=u==="html"?"<br/>":`
`;return O(e===""?this.name:e)+t+k.map(l,function(i,s){var a=c.get(c.mapDimension(i.dim),S);return O(i.name+" : "+a)}).join(t)},getTooltipPosition:function(S){if(S!=null){for(var _=this.getData(),g=this.coordinateSystem,u=_.getValues(k.map(g.dimensions,function(t){return _.mapDimension(t)}),S,!0),c=0,l=u.length;c<l;c++)if(!isNaN(u[c])){var e=g.getIndicatorAxes();return g.coordToPoint(e[c].dataToCoord(u[c]),c)}}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}}),I=E;W.exports=I},36158:(W,G,T)=>{var L=T(70492),R=T(51177),k=T(33051),O=T(41525),D=L.extendChartView({type:"radar",render:function(E,I,S){var _=E.coordinateSystem,g=this.group,u=E.getData(),c=this._data;function l(i,s){var a=i.getItemVisual(s,"symbol")||"circle",o=i.getItemVisual(s,"color");if(a!=="none"){var r=function(p){return k.isArray(p)||(p=[+p,+p]),p}(i.getItemVisual(s,"symbolSize")),n=O.createSymbol(a,-1,-1,2,2,o),h=i.getItemVisual(s,"symbolRotate")||0;return n.attr({style:{strokeNoScale:!0},z2:100,scale:[r[0]/2,r[1]/2],rotation:h*Math.PI/180||0}),n}}function e(i,s,a,o,r,n){a.removeAll();for(var h=0;h<s.length-1;h++){var p=l(o,r);p&&(p.__dimIdx=h,i[h]?(p.attr("position",i[h]),R[n?"initProps":"updateProps"](p,{position:s[h]},E,r)):p.attr("position",s[h]),a.add(p))}}function t(i){return k.map(i,function(s){return[_.cx,_.cy]})}u.diff(c).add(function(i){var s=u.getItemLayout(i);if(s){var a=new R.Polygon,o=new R.Polyline,r={shape:{points:s}};a.shape.points=t(s),o.shape.points=t(s),R.initProps(a,r,E,i),R.initProps(o,r,E,i);var n=new R.Group,h=new R.Group;n.add(o),n.add(a),n.add(h),e(o.shape.points,s,h,u,i,!0),u.setItemGraphicEl(i,n)}}).update(function(i,s){var a=c.getItemGraphicEl(s),o=a.childAt(0),r=a.childAt(1),n=a.childAt(2),h={shape:{points:u.getItemLayout(i)}};h.shape.points&&(e(o.shape.points,h.shape.points,n,u,i,!1),R.updateProps(o,h,E),R.updateProps(r,h,E),u.setItemGraphicEl(i,a))}).remove(function(i){g.remove(c.getItemGraphicEl(i))}).execute(),u.eachItemGraphicEl(function(i,s){var a=u.getItemModel(s),o=i.childAt(0),r=i.childAt(1),n=i.childAt(2),h=u.getItemVisual(s,"color");g.add(i),o.useStyle(k.defaults(a.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:h})),o.hoverStyle=a.getModel("emphasis.lineStyle").getLineStyle();var p=a.getModel("areaStyle"),d=a.getModel("emphasis.areaStyle"),f=p.isEmpty()&&p.parentModel.isEmpty(),v=d.isEmpty()&&d.parentModel.isEmpty();v=v&&f,r.ignore=f,r.useStyle(k.defaults(p.getAreaStyle(),{fill:h,opacity:.7})),r.hoverStyle=d.getAreaStyle();var m=a.getModel("itemStyle").getItemStyle(["color"]),y=a.getModel("emphasis.itemStyle").getItemStyle(),x=a.getModel("label"),w=a.getModel("emphasis.label");n.eachChild(function(M){M.setStyle(m),M.hoverStyle=k.clone(y);var C=u.get(u.dimensions[M.__dimIdx],s);(C==null||isNaN(C))&&(C=""),R.setLabelStyle(M.style,M.hoverStyle,x,w,{labelFetcher:u.hostModel,labelDataIndex:s,labelDimIndex:M.__dimIdx,defaultText:C,autoColor:h,isRectText:!0})}),i.highDownOnUpdate=function(M,C){r.attr("ignore",C==="emphasis"?v:f)},R.setHoverStyle(i)}),this._data=u},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});W.exports=D},17144:(W,G,T)=>{var L=T(33051);W.exports=function(R){var k=R.polar;if(k){L.isArray(k)||(k=[k]);var O=[];L.each(k,function(D,E){D.indicator?(D.type&&!D.shape&&(D.shape=D.type),R.radar=R.radar||[],L.isArray(R.radar)||(R.radar=[R.radar]),R.radar.push(D)):O.push(D)}),R.polar=O}L.each(R.series,function(D){D&&D.type==="radar"&&D.polarIndex&&(D.radarIndex=D.polarIndex)})}},34263:(W,G,T)=>{var L=T(33051);function R(O){return!isNaN(O[0])&&!isNaN(O[1])}function k(O){return[O.cx,O.cy]}W.exports=function(O){O.eachSeriesByType("radar",function(D){var E=D.getData(),I=[],S=D.coordinateSystem;if(S){var _=S.getIndicatorAxes();L.each(_,function(g,u){E.each(E.mapDimension(_[u].dim),function(c,l){I[l]=I[l]||[];var e=S.dataToPoint(c,u);I[l][u]=R(e)?e:k(S)})}),E.each(function(g){var u=L.find(I[g],function(c){return R(c)})||k(S);I[g].push(u.slice()),E.setItemLayout(g,I[g])})}})}},90474:(W,G,T)=>{var L=T(70492);T(55341),T(42978),T(37655);var R=T(55776),k=T(66028);L.registerLayout(R),L.registerVisual(k)},55341:(W,G,T)=>{var L=T(93321),R=T(19638),k=T(78988).encodeHTML,O=T(4272),D=(T(38175).__DEV__,L.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(I,S){for(var _=I.edges||I.links,g=I.data||I.nodes,u=I.levels,c=this.levelModels={},l=0;l<u.length;l++)u[l].depth!=null&&u[l].depth>=0&&(c[u[l].depth]=new O(u[l],this,S));if(g&&_)return R(g,_,this,!0,function(e,t){e.wrapMethod("getItemModel",function(i,s){return i.customizeGetParent(function(a){var o=this.parentModel,r=o.getData().getItemLayout(s).depth;return o.levelModels[r]||this.parentModel}),i}),t.wrapMethod("getItemModel",function(i,s){return i.customizeGetParent(function(a){var o=this.parentModel,r=o.getGraph().getEdgeByIndex(s).node1.getLayout().depth;return o.levelModels[r]||this.parentModel}),i})}).data},setNodePosition:function(I,S){var _=this.option.data[I];_.localX=S[0],_.localY=S[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(I,S,_){if(_==="edge"){var g=this.getDataParams(I,_),u=g.data,c=u.source+" -- "+u.target;return g.value&&(c+=" : "+g.value),k(c)}if(_==="node"){var l=this.getGraph().getNodeByIndex(I).getLayout().value,e=this.getDataParams(I,_).data.name;return l&&(c=e+" : "+l),k(c)}return D.superCall(this,"formatTooltip",I,S)},optionUpdated:function(){var I=this.option;I.focusNodeAdjacency===!0&&(I.focusNodeAdjacency="allEdges")},getDataParams:function(I,S){var _=D.superCall(this,"getDataParams",I,S);if(_.value==null&&S==="node"){var g=this.getGraph().getNodeByIndex(I).getLayout().value;_.value=g}return _},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}})),E=D;W.exports=E},42978:(W,G,T)=>{var L=T(51177),R=T(70492),k=T(33051),O=["itemStyle","opacity"],D=["emphasis","itemStyle","opacity"],E=["lineStyle","opacity"],I=["emphasis","lineStyle","opacity"];function S(l,e){return l.getVisual("opacity")||l.getModel().get(e)}function _(l,e,t){var i=l.getGraphicEl(),s=S(l,e);t!=null&&(s==null&&(s=1),s*=t),i.downplay&&i.downplay(),i.traverse(function(a){a.type!=="group"&&a.setStyle("opacity",s)})}function g(l,e){var t=S(l,e),i=l.getGraphicEl();i.traverse(function(s){s.type!=="group"&&s.setStyle("opacity",t)}),i.highlight&&i.highlight()}var u=L.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(l,e){var t=e.extent;l.moveTo(e.x1,e.y1),l.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),e.orient==="vertical"?(l.lineTo(e.x2+t,e.y2),l.bezierCurveTo(e.cpx2+t,e.cpy2,e.cpx1+t,e.cpy1,e.x1+t,e.y1)):(l.lineTo(e.x2,e.y2+t),l.bezierCurveTo(e.cpx2,e.cpy2+t,e.cpx1,e.cpy1+t,e.x1,e.y1+t)),l.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}}),c=R.extendChartView({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(l,e,t){var i=this,s=l.getGraph(),a=this.group,o=l.layoutInfo,r=o.width,n=o.height,h=l.getData(),p=l.getData("edge"),d=l.get("orient");this._model=l,a.removeAll(),a.attr("position",[o.x,o.y]),s.eachEdge(function(f){var v=new u;v.dataIndex=f.dataIndex,v.seriesIndex=l.seriesIndex,v.dataType="edge";var m,y,x,w,M,C,A,P,b=f.getModel("lineStyle"),N=b.get("curveness"),B=f.node1.getLayout(),z=f.node1.getModel(),F=z.get("localX"),V=z.get("localY"),H=f.node2.getLayout(),U=f.node2.getModel(),j=U.get("localX"),X=U.get("localY"),Y=f.getLayout();switch(v.shape.extent=Math.max(1,Y.dy),v.shape.orient=d,d==="vertical"?(m=(F!=null?F*r:B.x)+Y.sy,y=(V!=null?V*n:B.y)+B.dy,x=(j!=null?j*r:H.x)+Y.ty,M=m,C=y*(1-N)+(w=X!=null?X*n:H.y)*N,A=x,P=y*N+w*(1-N)):(m=(F!=null?F*r:B.x)+B.dx,y=(V!=null?V*n:B.y)+Y.sy,M=m*(1-N)+(x=j!=null?j*r:H.x)*N,C=y,A=m*N+x*(1-N),P=w=(X!=null?X*n:H.y)+Y.ty),v.setShape({x1:m,y1:y,x2:x,y2:w,cpx1:M,cpy1:C,cpx2:A,cpy2:P}),v.setStyle(b.getItemStyle()),v.style.fill){case"source":v.style.fill=f.node1.getVisual("color");break;case"target":v.style.fill=f.node2.getVisual("color")}L.setHoverStyle(v,f.getModel("emphasis.lineStyle").getItemStyle()),a.add(v),p.setItemGraphicEl(f.dataIndex,v)}),s.eachNode(function(f){var v=f.getLayout(),m=f.getModel(),y=m.get("localX"),x=m.get("localY"),w=m.getModel("label"),M=m.getModel("emphasis.label"),C=new L.Rect({shape:{x:y!=null?y*r:v.x,y:x!=null?x*n:v.y,width:v.dx,height:v.dy},style:m.getModel("itemStyle").getItemStyle()}),A=f.getModel("emphasis.itemStyle").getItemStyle();L.setLabelStyle(C.style,A,w,M,{labelFetcher:l,labelDataIndex:f.dataIndex,defaultText:f.id,isRectText:!0}),C.setStyle("fill",f.getVisual("color")),L.setHoverStyle(C,A),a.add(C),h.setItemGraphicEl(f.dataIndex,C),C.dataType="node"}),h.eachItemGraphicEl(function(f,v){var m=h.getItemModel(v);m.get("draggable")&&(f.drift=function(y,x){i._focusAdjacencyDisabled=!0,this.shape.x+=y,this.shape.y+=x,this.dirty(),t.dispatchAction({type:"dragNode",seriesId:l.id,dataIndex:h.getRawIndex(v),localX:this.shape.x/r,localY:this.shape.y/n})},f.ondragend=function(){i._focusAdjacencyDisabled=!1},f.draggable=!0,f.cursor="move"),f.highlight=function(){this.trigger("emphasis")},f.downplay=function(){this.trigger("normal")},f.focusNodeAdjHandler&&f.off("mouseover",f.focusNodeAdjHandler),f.unfocusNodeAdjHandler&&f.off("mouseout",f.unfocusNodeAdjHandler),m.get("focusNodeAdjacency")&&(f.on("mouseover",f.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),t.dispatchAction({type:"focusNodeAdjacency",seriesId:l.id,dataIndex:f.dataIndex}))}),f.on("mouseout",f.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(t)}))}),p.eachItemGraphicEl(function(f,v){var m=p.getItemModel(v);f.focusNodeAdjHandler&&f.off("mouseover",f.focusNodeAdjHandler),f.unfocusNodeAdjHandler&&f.off("mouseout",f.unfocusNodeAdjHandler),m.get("focusNodeAdjacency")&&(f.on("mouseover",f.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),t.dispatchAction({type:"focusNodeAdjacency",seriesId:l.id,edgeDataIndex:f.dataIndex}))}),f.on("mouseout",f.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(t)}))}),!this._data&&l.get("animation")&&a.setClipPath(function(f,v,m){var y=new L.Rect({shape:{x:f.x-10,y:f.y-10,width:0,height:f.height+20}});return L.initProps(y,{shape:{width:f.width+20}},v,function(){a.removeClipPath()}),y}(a.getBoundingRect(),l)),this._data=l.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(l){var e=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){e._unfocusDelayTimer=null,l.dispatchAction({type:"unfocusNodeAdjacency",seriesId:e._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(l,e,t,i){var s=l.getData(),a=s.graph,o=i.dataIndex,r=s.getItemModel(o),n=i.edgeDataIndex;if(o!=null||n!=null){var h=a.getNodeByIndex(o),p=a.getEdgeByIndex(n);if(a.eachNode(function(f){_(f,O,.1)}),a.eachEdge(function(f){_(f,E,.1)}),h){g(h,D);var d=r.get("focusNodeAdjacency");d==="outEdges"?k.each(h.outEdges,function(f){f.dataIndex<0||(g(f,I),g(f.node2,D))}):d==="inEdges"?k.each(h.inEdges,function(f){f.dataIndex<0||(g(f,I),g(f.node1,D))}):d==="allEdges"&&k.each(h.edges,function(f){f.dataIndex<0||(g(f,I),f.node1!==h&&g(f.node1,D),f.node2!==h&&g(f.node2,D))})}p&&(g(p,I),g(p.node1,D),g(p.node2,D))}},unfocusNodeAdjacency:function(l,e,t,i){var s=l.getGraph();s.eachNode(function(a){_(a,O)}),s.eachEdge(function(a){_(a,E)})}});W.exports=c},37655:(W,G,T)=>{var L=T(70492);T(35540),L.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(R,k){k.eachComponent({mainType:"series",subType:"sankey",query:R},function(O){O.setNodePosition(R.dataIndex,[R.localX,R.localY])})})},55776:(W,G,T)=>{var L=T(76172),R=T(33051),k=T(32234).groupData;function O(t){var i=t.hostGraph.data.getRawDataItem(t.dataIndex);return i.depth!=null&&i.depth>=0}function D(t,i,s,a,o){var r=o==="vertical"?"x":"y";R.each(t,function(n){var h,p,d;n.sort(function(x,w){return x.getLayout()[r]-w.getLayout()[r]});for(var f=0,v=n.length,m=o==="vertical"?"dx":"dy",y=0;y<v;y++)(d=f-(p=n[y]).getLayout()[r])>0&&(h=p.getLayout()[r]+d,o==="vertical"?p.setLayout({x:h},!0):p.setLayout({y:h},!0)),f=p.getLayout()[r]+p.getLayout()[m]+i;if((d=f-i-(o==="vertical"?a:s))>0)for(h=p.getLayout()[r]-d,o==="vertical"?p.setLayout({x:h},!0):p.setLayout({y:h},!0),f=h,y=v-2;y>=0;--y)(d=(p=n[y]).getLayout()[r]+p.getLayout()[m]+i-f)>0&&(h=p.getLayout()[r]-d,o==="vertical"?p.setLayout({x:h},!0):p.setLayout({y:h},!0)),f=p.getLayout()[r]})}function E(t,i,s){R.each(t.slice().reverse(),function(a){R.each(a,function(o){if(o.outEdges.length){var r=l(o.outEdges,I,s)/l(o.outEdges,c,s);if(isNaN(r)){var n=o.outEdges.length;r=n?l(o.outEdges,S,s)/n:0}if(s==="vertical"){var h=o.getLayout().x+(r-u(o,s))*i;o.setLayout({x:h},!0)}else{var p=o.getLayout().y+(r-u(o,s))*i;o.setLayout({y:p},!0)}}})})}function I(t,i){return u(t.node2,i)*t.getValue()}function S(t,i){return u(t.node2,i)}function _(t,i){return u(t.node1,i)*t.getValue()}function g(t,i){return u(t.node1,i)}function u(t,i){return i==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function c(t){return t.getValue()}function l(t,i,s){for(var a=0,o=t.length,r=-1;++r<o;){var n=+i.call(t,t[r],s);isNaN(n)||(a+=n)}return a}function e(t,i,s){R.each(t,function(a){R.each(a,function(o){if(o.inEdges.length){var r=l(o.inEdges,_,s)/l(o.inEdges,c,s);if(isNaN(r)){var n=o.inEdges.length;r=n?l(o.inEdges,g,s)/n:0}if(s==="vertical"){var h=o.getLayout().x+(r-u(o,s))*i;o.setLayout({x:h},!0)}else{var p=o.getLayout().y+(r-u(o,s))*i;o.setLayout({y:p},!0)}}})})}W.exports=function(t,i,s){t.eachSeriesByType("sankey",function(a){var o=a.get("nodeWidth"),r=a.get("nodeGap"),n=function(m,y){return L.getLayoutRect(m.getBoxLayoutParams(),{width:y.getWidth(),height:y.getHeight()})}(a,i);a.layoutInfo=n;var h=n.width,p=n.height,d=a.getGraph(),f=d.nodes,v=d.edges;(function(m){R.each(m,function(y){var x=l(y.outEdges,c),w=l(y.inEdges,c),M=y.getValue()||0,C=Math.max(x,w,M);y.setLayout({value:C},!0)})})(f),function(m,y,x,w,M,C,A,P,b){(function(N,B,z,F,V,H,U){for(var j=[],X=[],Y=[],J=[],K=0,Q=0;Q<B.length;Q++)j[Q]=1;for(Q=0;Q<N.length;Q++)X[Q]=N[Q].inEdges.length,X[Q]===0&&Y.push(N[Q]);for(var Z=-1;Y.length;){for(var q=0;q<Y.length;q++){var tt=Y[q],$=tt.hostGraph.data.getRawDataItem(tt.dataIndex),rt=$.depth!=null&&$.depth>=0;rt&&$.depth>Z&&(Z=$.depth),tt.setLayout({depth:rt?$.depth:K},!0),H==="vertical"?tt.setLayout({dy:z},!0):tt.setLayout({dx:z},!0);for(var et=0;et<tt.outEdges.length;et++){var it=tt.outEdges[et];j[B.indexOf(it)]=0;var ot=it.node2;--X[N.indexOf(ot)]==0&&J.indexOf(ot)<0&&J.push(ot)}}++K,Y=J,J=[]}for(Q=0;Q<j.length;Q++)if(j[Q]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var st=Z>K-1?Z:K-1;U&&U!=="left"&&function(at,vt,yt,gt){if(vt==="right"){for(var pt=[],bt=at,mt=0;bt.length;){for(var nt=0;nt<bt.length;nt++){var lt=bt[nt];lt.setLayout({skNodeHeight:mt},!0);for(var ct=0;ct<lt.inEdges.length;ct++){var ht=lt.inEdges[ct];pt.indexOf(ht.node1)<0&&pt.push(ht.node1)}}bt=pt,pt=[],++mt}R.each(at,function(ft){O(ft)||ft.setLayout({depth:Math.max(0,gt-ft.getLayout().skNodeHeight)},!0)})}else vt==="justify"&&function(ft,_t){R.each(ft,function(wt){O(wt)||wt.outEdges.length||wt.setLayout({depth:_t},!0)})}(at,gt)}(N,U,0,st),function(at,vt,yt){R.each(at,function(gt){var pt=gt.getLayout().depth*vt;yt==="vertical"?gt.setLayout({y:pt},!0):gt.setLayout({x:pt},!0)})}(N,H==="vertical"?(V-z)/st:(F-z)/st,H)})(m,y,x,M,C,P,b),function(N,B,z,F,V,H,U){var j=function(Y,J){var K=[],Q=J==="vertical"?"y":"x",Z=k(Y,function(q){return q.getLayout()[Q]});return Z.keys.sort(function(q,tt){return q-tt}),R.each(Z.keys,function(q){K.push(Z.buckets.get(q))}),K}(N,U);(function(Y,J,K,Q,Z,q){var tt=1/0;R.each(Y,function($){var rt=$.length,et=0;R.each($,function(ot){et+=ot.getLayout().value});var it=q==="vertical"?(Q-(rt-1)*Z)/et:(K-(rt-1)*Z)/et;it<tt&&(tt=it)}),R.each(Y,function($){R.each($,function(rt,et){var it=rt.getLayout().value*tt;q==="vertical"?(rt.setLayout({x:et},!0),rt.setLayout({dx:it},!0)):(rt.setLayout({y:et},!0),rt.setLayout({dy:it},!0))})}),R.each(J,function($){var rt=+$.getValue()*tt;$.setLayout({dy:rt},!0)})})(j,B,z,F,V,U),D(j,V,z,F,U);for(var X=1;H>0;H--)E(j,X*=.99,U),D(j,V,z,F,U),e(j,X,U),D(j,V,z,F,U)}(m,y,C,M,w,A,P),function(N,B){var z=B==="vertical"?"x":"y";R.each(N,function(F){F.outEdges.sort(function(V,H){return V.node2.getLayout()[z]-H.node2.getLayout()[z]}),F.inEdges.sort(function(V,H){return V.node1.getLayout()[z]-H.node1.getLayout()[z]})}),R.each(N,function(F){var V=0,H=0;R.each(F.outEdges,function(U){U.setLayout({sy:V},!0),V+=U.getLayout().dy}),R.each(F.inEdges,function(U){U.setLayout({ty:H},!0),H+=U.getLayout().dy})})}(m,P)}(f,v,o,r,h,p,R.filter(f,function(m){return m.getLayout().value===0}).length!==0?0:a.get("layoutIterations"),a.get("orient"),a.get("nodeAlign"))})}},66028:(W,G,T)=>{var L=T(59937),R=T(33051);W.exports=function(k,O){k.eachSeriesByType("sankey",function(D){var E=D.getGraph().nodes;if(E.length){var I=1/0,S=-1/0;R.each(E,function(_){var g=_.getLayout().value;g<I&&(I=g),g>S&&(S=g)}),R.each(E,function(_){var g=new L({type:"color",mappingMethod:"linear",dataExtent:[I,S],visual:D.get("color")}).mapValueToVisual(_.getLayout().value),u=_.getModel().get("itemStyle.color");u!=null?_.setVisual("color",u):_.setVisual("color",g)})}})}},42213:(W,G,T)=>{var L=T(70492);T(517),T(79002);var R=T(34586),k=T(21149);T(84617),L.registerVisual(R("scatter","circle")),L.registerLayout(k("scatter"))},517:(W,G,T)=>{var L=T(40488),R=T(93321).extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(k,O){return L(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var k=this.option.progressive;return k==null?this.option.large?5e3:this.get("progressive"):k},getProgressiveThreshold:function(){var k=this.option.progressiveThreshold;return k==null?this.option.large?1e4:this.get("progressiveThreshold"):k},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});W.exports=R},79002:(W,G,T)=>{var L=T(70492),R=T(68162),k=T(48066),O=T(21149);L.extendChartView({type:"scatter",render:function(D,E,I){var S=D.getData();this._updateSymbolDraw(S,D).updateData(S,{clipShape:this._getClipShape(D)}),this._finished=!0},incrementalPrepareRender:function(D,E,I){var S=D.getData();this._updateSymbolDraw(S,D).incrementalPrepareUpdate(S),this._finished=!1},incrementalRender:function(D,E,I){this._symbolDraw.incrementalUpdate(D,E.getData(),{clipShape:this._getClipShape(E)}),this._finished=D.end===E.getData().count()},updateTransform:function(D,E,I){var S=D.getData();if(this.group.dirty(),!this._finished||S.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var _=O().reset(D);_.progress&&_.progress({start:0,end:S.count()},S),this._symbolDraw.updateLayout(S)},_getClipShape:function(D){var E=D.coordinateSystem,I=E&&E.getArea&&E.getArea();return D.get("clip",!0)?I:null},_updateSymbolDraw:function(D,E){var I=this._symbolDraw,S=E.pipelineContext.large;return I&&S===this._isLargeDraw||(I&&I.remove(),I=this._symbolDraw=S?new k:new R,this._isLargeDraw=S,this.group.removeAll()),this.group.add(I.group),I},remove:function(D,E){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}})},13594:(W,G,T)=>{var L=T(70492),R=T(33051);T(12906),T(25787),T(74026);var k=T(69274),O=T(23509),D=T(22528);L.registerVisual(R.curry(k,"sunburst")),L.registerLayout(R.curry(O,"sunburst")),L.registerProcessor(R.curry(D,"sunburst"))},54313:(W,G,T)=>{var L=T(33051),R=T(51177),k="none";function O(I,S,_){R.Group.call(this);var g=new R.Sector({z2:2});g.seriesIndex=S.seriesIndex;var u=new R.Text({z2:4,silent:I.getModel("label").get("silent")});function c(){u.ignore=u.hoverIgnore}function l(){u.ignore=u.normalIgnore}this.add(g),this.add(u),this.updateData(!0,I,"normal",S,_),this.on("emphasis",c).on("normal",l).on("mouseover",c).on("mouseout",l)}var D=O.prototype;D.updateData=function(I,S,_,g,u){this.node=S,S.piece=this,g=g||this._seriesModel,u=u||this._ecModel;var c=this.childAt(0);c.dataIndex=S.dataIndex;var l=S.getModel(),e=S.getLayout(),t=L.extend({},e);t.label=null;var i=function(h,p,d){var f=h.getVisual("color"),v=h.getVisual("visualMeta");v&&v.length!==0||(f=null);var m=h.getModel("itemStyle").get("color");if(m)return m;if(f)return f;if(h.depth===0)return d.option.color[0];var y=d.option.color.length;return m=d.option.color[function(x){for(var w=x;w.depth>1;)w=w.parentNode;var M=x.getAncestors()[0];return L.indexOf(M.children,w)}(h)%y],m}(S,0,u);(function(h,p,d){p.getData().setItemVisual(h.dataIndex,"color",d)})(S,g,i);var s,a=l.getModel("itemStyle").getItemStyle();if(_==="normal")s=a;else{var o=l.getModel(_+".itemStyle").getItemStyle();s=L.merge(o,a)}s=L.defaults({lineJoin:"bevel",fill:s.fill||i},s),I?(c.setShape(t),c.shape.r=e.r0,R.updateProps(c,{shape:{r:e.r}},g,S.dataIndex),c.useStyle(s)):typeof s.fill=="object"&&s.fill.type||typeof c.style.fill=="object"&&c.style.fill.type?(R.updateProps(c,{shape:t},g),c.useStyle(s)):R.updateProps(c,{shape:t,style:s},g),this._updateLabel(g,i,_);var r=l.getShallow("cursor");if(r&&c.attr("cursor",r),I){var n=g.getShallow("highlightPolicy");this._initEvents(c,S,g,n)}this._seriesModel=g||this._seriesModel,this._ecModel=u||this._ecModel,R.setHoverStyle(this)},D.onEmphasis=function(I){var S=this;this.node.hostTree.root.eachNode(function(_){var g,u,c;_.piece&&(S.node===_?_.piece.updateData(!1,_,"emphasis"):(g=_,u=S.node,(c=I)!==k&&(c==="self"?g===u:c==="ancestor"?g===u||g.isAncestorOf(u):g===u||g.isDescendantOf(u))?_.piece.childAt(0).trigger("highlight"):I!==k&&_.piece.childAt(0).trigger("downplay")))})},D.onNormal=function(){this.node.hostTree.root.eachNode(function(I){I.piece&&I.piece.updateData(!1,I,"normal")})},D.onHighlight=function(){this.updateData(!1,this.node,"highlight")},D.onDownplay=function(){this.updateData(!1,this.node,"downplay")},D._updateLabel=function(I,S,_){var g=this.node.getModel(),u=g.getModel("label"),c=_==="normal"||_==="emphasis"?u:g.getModel(_+".label"),l=g.getModel("emphasis.label"),e=c.get("formatter")?_:"normal",t=L.retrieve(I.getFormattedLabel(this.node.dataIndex,e,null,null,"label"),this.node.name);M("show")===!1&&(t="");var i=this.node.getLayout(),s=c.get("minAngle");s==null&&(s=u.get("minAngle")),s=s/180*Math.PI;var a=i.endAngle-i.startAngle;s!=null&&Math.abs(a)<s&&(t="");var o=this.childAt(1);R.setLabelStyle(o.style,o.hoverStyle||{},u,l,{defaultText:c.getShallow("show")?t:null,autoColor:S,useInsideStyle:!0});var r,n=(i.startAngle+i.endAngle)/2,h=Math.cos(n),p=Math.sin(n),d=M("position"),f=M("distance")||0,v=M("align");d==="outside"?(r=i.r+f,v=n>Math.PI/2?"right":"left"):v&&v!=="center"?v==="left"?(r=i.r0+f,n>Math.PI/2&&(v="right")):v==="right"&&(r=i.r-f,n>Math.PI/2&&(v="left")):(r=(i.r+i.r0)/2,v="center"),o.attr("style",{text:t,textAlign:v,textVerticalAlign:M("verticalAlign")||"middle",opacity:M("opacity")});var m=r*h+i.cx,y=r*p+i.cy;o.attr("position",[m,y]);var x=M("rotate"),w=0;function M(C){var A=c.get(C);return A==null?u.get(C):A}x==="radial"?(w=-n)<-Math.PI/2&&(w+=Math.PI):x==="tangential"?(w=Math.PI/2-n)>Math.PI/2?w-=Math.PI:w<-Math.PI/2&&(w+=Math.PI):typeof x=="number"&&(w=x*Math.PI/180),o.attr("rotation",w)},D._initEvents=function(I,S,_,g){I.off("mouseover").off("mouseout").off("emphasis").off("normal");var u=this,c=function(){u.onEmphasis(g)},l=function(){u.onNormal()};_.isAnimationEnabled()&&I.on("mouseover",c).on("mouseout",l).on("emphasis",c).on("normal",l).on("downplay",function(){u.onDownplay()}).on("highlight",function(){u.onHighlight()})},L.inherits(O,R.Group);var E=O;W.exports=E},12906:(W,G,T)=>{var L=T(33051),R=T(93321),k=T(9327),O=T(4272),D=T(68833).wrapTreePathInfo,E=R.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(S,_){var g={name:S.name,children:S.data};I(g);var u=L.map(S.levels||[],function(l){return new O(l,this,_)},this),c=k.createTree(g,this,function(l){l.wrapMethod("getItemModel",function(e,t){var i=c.getNodeByDataIndex(t),s=u[i.depth];return s&&(e.parentModel=s),e})});return c.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(S){var _=R.prototype.getDataParams.apply(this,arguments),g=this.getData().tree.getNodeByDataIndex(S);return _.treePathInfo=D(g,this),_},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(S){S?this._viewRoot=S:S=this._viewRoot;var _=this.getRawData().tree.root;S&&(S===_||_.contains(S))||(this._viewRoot=_)}});function I(S){var _=0;L.each(S.children,function(u){I(u);var c=u.value;L.isArray(c)&&(c=c[0]),_+=c});var g=S.value;L.isArray(g)&&(g=g[0]),(g==null||isNaN(g))&&(g=_),g<0&&(g=0),L.isArray(S.value)?S.value[0]=g:S.value=g}W.exports=E},25787:(W,G,T)=>{var L=T(33051),R=T(75797),k=T(54313),O=T(4130),D=T(78988).windowOpen,E=R.extend({type:"sunburst",init:function(){},render:function(I,S,_,g){var u=this;this.seriesModel=I,this.api=_,this.ecModel=S;var c=I.getData(),l=c.tree.root,e=I.getViewRoot(),t=this.group,i=I.get("renderLabelForZeroData"),s=[];e.eachNode(function(n){s.push(n)});var a=this._oldChildren||[];if(function(n,h){function p(f){return f.getId()}function d(f,v){(function(m,y){if(i||!m||m.getValue()||(m=null),m!==l&&y!==l){if(y&&y.piece)m?(y.piece.updateData(!1,m,"normal",I,S),c.setItemGraphicEl(m.dataIndex,y.piece)):(w=y)&&w.piece&&(t.remove(w.piece),w.piece=null);else if(m){var x=new k(m,I,S);t.add(x),c.setItemGraphicEl(m.dataIndex,x)}}var w})(f==null?null:n[f],v==null?null:h[v])}n.length===0&&h.length===0||new O(h,n,p,p).add(d).update(d).remove(L.curry(d,null)).execute()}(s,a),function(n,h){if(h.depth>0){u.virtualPiece?u.virtualPiece.updateData(!1,n,"normal",I,S):(u.virtualPiece=new k(n,I,S),t.add(u.virtualPiece)),h.piece._onclickEvent&&h.piece.off("click",h.piece._onclickEvent);var p=function(d){u._rootToNode(h.parentNode)};h.piece._onclickEvent=p,u.virtualPiece.on("click",p)}else u.virtualPiece&&(t.remove(u.virtualPiece),u.virtualPiece=null)}(l,e),g&&g.highlight&&g.highlight.piece){var o=I.getShallow("highlightPolicy");g.highlight.piece.onEmphasis(o)}else if(g&&g.unhighlight){var r=this.virtualPiece;!r&&l.children.length&&(r=l.children[0].piece),r&&r.onNormal()}this._initEvents(),this._oldChildren=s},dispose:function(){},_initEvents:function(){var I=this,S=function(_){var g=!1;I.seriesModel.getViewRoot().eachNode(function(u){if(!g&&u.piece&&u.piece.childAt(0)===_.target){var c=u.getModel().get("nodeClick");if(c==="rootToNode")I._rootToNode(u);else if(c==="link"){var l=u.getModel(),e=l.get("link");if(e){var t=l.get("target",!0)||"_blank";D(e,t)}}g=!0}})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",S),this.group._onclickEvent=S},_rootToNode:function(I){I!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:I})},containPoint:function(I,S){var _=S.getData().getItemLayout(0);if(_){var g=I[0]-_.cx,u=I[1]-_.cy,c=Math.sqrt(g*g+u*u);return c<=_.r&&c>=_.r0}}});W.exports=E},74026:(W,G,T)=>{var L=T(70492),R=T(68833),k="sunburstRootToNode";L.registerAction({type:k,update:"updateView"},function(D,E){E.eachComponent({mainType:"series",subType:"sunburst",query:D},function(I,S){var _=R.retrieveTargetInfo(D,[k],I);if(_){var g=I.getViewRoot();g&&(D.direction=R.aboveViewRoot(g,_.node)?"rollUp":"drillDown"),I.resetViewRoot(_.node)}})});var O="sunburstHighlight";L.registerAction({type:O,update:"updateView"},function(D,E){E.eachComponent({mainType:"series",subType:"sunburst",query:D},function(I,S){var _=R.retrieveTargetInfo(D,[O],I);_&&(D.highlight=_.node)})}),L.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(D,E){E.eachComponent({mainType:"series",subType:"sunburst",query:D},function(I,S){D.unhighlight=!0})})},23509:(W,G,T)=>{var L=T(85669).parsePercent,R=T(33051),k=Math.PI/180;function O(D,E){var I=D.children||[];D.children=function(S,_){if(typeof _=="function")return S.sort(_);var g=_==="asc";return S.sort(function(u,c){var l=(u.getValue()-c.getValue())*(g?1:-1);return l===0?(u.dataIndex-c.dataIndex)*(g?-1:1):l})}(I,E),I.length&&R.each(D.children,function(S){O(S,E)})}W.exports=function(D,E,I,S){E.eachSeriesByType(D,function(_){var g=_.get("center"),u=_.get("radius");R.isArray(u)||(u=[0,u]),R.isArray(g)||(g=[g,g]);var c=I.getWidth(),l=I.getHeight(),e=Math.min(c,l),t=L(g[0],c),i=L(g[1],l),s=L(u[0],e/2),a=L(u[1],e/2),o=-_.get("startAngle")*k,r=_.get("minAngle")*k,n=_.getData().tree.root,h=_.getViewRoot(),p=h.depth,d=_.get("sort");d!=null&&O(h,d);var f=0;R.each(h.children,function(z){!isNaN(z.getValue())&&f++});var v=h.getValue(),m=Math.PI/(v||f)*2,y=h.depth>0,x=h.height-(y?-1:1),w=(a-s)/(x||1),M=_.get("clockwise"),C=_.get("stillShowZeroSum"),A=M?1:-1,P=function(z,F){if(z){var V=F;if(z!==n){var H=z.getValue(),U=v===0&&C?m:H*m;U<r&&(U=r),V=F+A*U;var j=z.depth-p-(y?-1:1),X=s+w*j,Y=s+w*(j+1),J=z.getModel();J.get("r0")!=null&&(X=L(J.get("r0"),e/2)),J.get("r")!=null&&(Y=L(J.get("r"),e/2)),z.setLayout({angle:U,startAngle:F,endAngle:V,clockwise:M,cx:t,cy:i,r0:X,r:Y})}if(z.children&&z.children.length){var K=0;R.each(z.children,function(Q){K+=P(Q,F+K)})}return V-F}};if(y){var b=s,N=s+w,B=2*Math.PI;n.setLayout({angle:B,startAngle:o,endAngle:o+B,clockwise:M,cx:t,cy:i,r0:b,r:N})}P(h,o)})}},90110:(W,G,T)=>{var L=T(70492);T(84066),T(16140),T(78244);var R=T(21330),k=T(9496),O=T(22528);L.registerLayout(R),L.registerVisual(k),L.registerProcessor(O("themeRiver"))},16140:(W,G,T)=>{var L=T(93321),R=T(55623),k=T(10381).getDimensionTypeByAxis,O=T(87587),D=T(33051),E=T(32234).groupData,I=T(78988).encodeHTML,S=T(72019),_=L.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(u){_.superApply(this,"init",arguments),this.legendVisualProvider=new S(D.bind(this.getData,this),D.bind(this.getRawData,this))},fixData:function(u){var c=u.length,l={},e=E(u,function(n){return l.hasOwnProperty(n[0])||(l[n[0]]=-1),n[2]}),t=[];e.buckets.each(function(n,h){t.push({name:h,dataList:n})});for(var i=t.length,s=0;s<i;++s){for(var a=t[s].name,o=0;o<t[s].dataList.length;++o){var r=t[s].dataList[o][0];l[r]=s}for(var r in l)l.hasOwnProperty(r)&&l[r]!==s&&(l[r]=s,u[c]=[],u[c][0]=r,u[c][1]=0,u[c][2]=a,c++)}return u},getInitialData:function(u,c){for(var l=c.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),e=D.filter(u.data,function(h){return h[2]!==void 0}),t=this.fixData(e||[]),i=[],s=this.nameMap=D.createHashMap(),a=0,o=0;o<t.length;++o)i.push(t[o][2]),s.get(t[o][2])||(s.set(t[o][2],a),a++);var r=R(t,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:k(l)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),n=new O(r,this);return n.initData(t),n},getLayerSeries:function(){for(var u=this.getData(),c=u.count(),l=[],e=0;e<c;++e)l[e]=e;var t=u.mapDimension("single"),i=E(l,function(a){return u.get("name",a)}),s=[];return i.buckets.each(function(a,o){a.sort(function(r,n){return u.get(t,r)-u.get(t,n)}),s.push({name:o,indices:a})}),s},getAxisTooltipData:function(u,c,l){D.isArray(u)||(u=u?[u]:[]);for(var e,t=this.getData(),i=this.getLayerSeries(),s=[],a=i.length,o=0;o<a;++o){for(var r=Number.MAX_VALUE,n=-1,h=i[o].indices.length,p=0;p<h;++p){var d=t.get(u[0],i[o].indices[p]),f=Math.abs(d-c);f<=r&&(e=d,r=f,n=i[o].indices[p])}s.push(n)}return{dataIndices:s,nestestValue:e}},formatTooltip:function(u){var c=this.getData(),l=c.getName(u),e=c.get(c.mapDimension("value"),u);return(isNaN(e)||e==null)&&(e="-"),I(l+" : "+e)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}}),g=_;W.exports=g},78244:(W,G,T)=>{var L=T(70492),R=T(30633).Polygon,k=T(51177),O=T(33051),D=O.bind,E=O.extend,I=T(4130),S=L.extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(_,g,u){var c=_.getData(),l=this.group,e=_.getLayerSeries(),t=c.getLayout("layoutInfo"),i=t.rect,s=t.boundaryGap;function a(h){return h.name}l.attr("position",[0,i.y+s[0]]);var o=new I(this._layersSeries||[],e,a,a),r={};function n(h,p,d){var f=this._layers;if(h!=="remove"){for(var v,m,y,x=[],w=[],M=e[p].indices,C=0;C<M.length;C++){var A=c.getItemLayout(M[C]),P=A.x,b=A.y0,N=A.y;x.push([P,b]),w.push([P,b+N]),v=c.getItemVisual(M[C],"color")}var B=c.getItemLayout(M[0]),z=c.getItemModel(M[C-1]),F=z.getModel("label"),V=F.get("margin");if(h==="add"){var H=r[p]=new k.Group;m=new R({shape:{points:x,stackedOnPoints:w,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),y=new k.Text({style:{x:B.x-V,y:B.y0+B.y/2}}),H.add(m),H.add(y),l.add(H),m.setClipPath(function(X,Y,J){var K=new k.Rect({shape:{x:X.x-10,y:X.y-10,width:0,height:X.height+20}});return k.initProps(K,{shape:{width:X.width+20,height:X.height+20}},Y,function(){m.removeClipPath()}),K}(m.getBoundingRect(),_))}else H=f[d],m=H.childAt(0),y=H.childAt(1),l.add(H),r[p]=H,k.updateProps(m,{shape:{points:x,stackedOnPoints:w}},_),k.updateProps(y,{style:{x:B.x-V,y:B.y0+B.y/2}},_);var U=z.getModel("emphasis.itemStyle"),j=z.getModel("itemStyle");k.setTextStyle(y.style,F,{text:F.get("show")?_.getFormattedLabel(M[C-1],"normal")||c.getName(M[C-1]):null,textVerticalAlign:"middle"}),m.setStyle(E({fill:v},j.getItemStyle(["color"]))),k.setHoverStyle(m,U.getItemStyle())}else l.remove(f[p])}o.add(D(n,this,"add")).update(D(n,this,"update")).remove(D(n,this,"remove")).execute(),this._layersSeries=e,this._layers=r},dispose:function(){}});W.exports=S},21330:(W,G,T)=>{var L=T(33051),R=T(85669);function k(O,D,E){if(O.count())for(var I,S=D.coordinateSystem,_=D.getLayerSeries(),g=O.mapDimension("single"),u=O.mapDimension("value"),c=L.map(_,function(r){return L.map(r.indices,function(n){var h=S.dataToPoint(O.get(g,n));return h[1]=O.get(u,n),h})}),l=function(r){for(var n=r.length,h=r[0].length,p=[],d=[],f=0,v={},m=0;m<h;++m){for(var y=0,x=0;y<n;++y)x+=r[y][m][1];x>f&&(f=x),p.push(x)}for(var w=0;w<h;++w)d[w]=(f-p[w])/2;f=0;for(var M=0;M<h;++M){var C=p[M]+d[M];C>f&&(f=C)}return v.y0=d,v.max=f,v}(c),e=l.y0,t=E/l.max,i=_.length,s=_[0].indices.length,a=0;a<s;++a){I=e[a]*t,O.setItemLayout(_[0].indices[a],{layerIndex:0,x:c[0][a][0],y0:I,y:c[0][a][1]*t});for(var o=1;o<i;++o)I+=c[o-1][a][1]*t,O.setItemLayout(_[o].indices[a],{layerIndex:o,x:c[o][a][0],y0:I,y:c[o][a][1]*t})}}W.exports=function(O,D){O.eachSeriesByType("themeRiver",function(E){var I=E.getData(),S=E.coordinateSystem,_={},g=S.getRect();_.rect=g;var u=E.get("boundaryGap"),c=S.getAxis();_.boundaryGap=u,c.orient==="horizontal"?(u[0]=R.parsePercent(u[0],g.height),u[1]=R.parsePercent(u[1],g.height),k(I,E,g.height-u[0]-u[1])):(u[0]=R.parsePercent(u[0],g.width),u[1]=R.parsePercent(u[1],g.width),k(I,E,g.width-u[0]-u[1])),I.setLayout("layoutInfo",_)})}},9496:(W,G,T)=>{var L=T(33051).createHashMap;W.exports=function(R){R.eachSeriesByType("themeRiver",function(k){var O=k.getData(),D=k.getRawData(),E=k.get("color"),I=L();O.each(function(S){I.set(O.getRawIndex(S),S)}),D.each(function(S){var _=D.getName(S),g=E[(k.nameMap.get(_)-1)%E.length];D.setItemVisual(S,"color",g);var u=I.get(S);u!=null&&O.setItemVisual(u,"color",g)})})}},81052:(W,G,T)=>{var L=T(70492);T(97908),T(37732),T(1969);var R=T(34586),k=T(92961);L.registerVisual(R("tree","circle")),L.registerLayout(k)},97908:(W,G,T)=>{var L=T(93321),R=T(9327),k=T(78988).encodeHTML,O=T(4272),D=L.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(E){var I={name:E.name,children:E.data},S=E.leaves||{},_=new O(S,this,this.ecModel),g=R.createTree(I,this,function(l){l.wrapMethod("getItemModel",function(e,t){var i=g.getNodeByDataIndex(t);return i.children.length&&i.isExpand||(e.parentModel=_),e})}),u=0;g.eachNode("preorder",function(l){l.depth>u&&(u=l.depth)});var c=E.expandAndCollapse&&E.initialTreeDepth>=0?E.initialTreeDepth:u;return g.root.eachNode("preorder",function(l){var e=l.hostTree.data.getRawDataItem(l.dataIndex);l.isExpand=e&&e.collapsed!=null?!e.collapsed:l.depth<=c}),g.data},getOrient:function(){var E=this.get("orient");return E==="horizontal"?E="LR":E==="vertical"&&(E="TB"),E},setZoom:function(E){this.option.zoom=E},setCenter:function(E){this.option.center=E},formatTooltip:function(E){for(var I=this.getData().tree,S=I.root.children[0],_=I.getNodeByDataIndex(E),g=_.getValue(),u=_.name;_&&_!==S;)u=_.parentNode.name+"."+u,_=_.parentNode;return k(u+(isNaN(g)||g==null?"":" : "+g))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});W.exports=D},37732:(W,G,T)=>{var L=T(33051),R=T(51177),k=T(66351),O=T(69387).radialCoordinate,D=T(70492),E=T(3726),I=T(23845),S=T(31194),_=T(9176),g=T(61485).onIrrelevantElement,u=(T(38175).__DEV__,T(85669).parsePercent),c=R.extendShape({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(o,r){var n=r.childPoints,h=n.length,p=r.parentPoint,d=n[0],f=n[h-1];if(h===1)return o.moveTo(p[0],p[1]),void o.lineTo(d[0],d[1]);var v=r.orient,m=v==="TB"||v==="BT"?0:1,y=1-m,x=u(r.forkPosition,1),w=[];w[m]=p[m],w[y]=p[y]+(f[y]-p[y])*x,o.moveTo(p[0],p[1]),o.lineTo(w[0],w[1]),o.moveTo(d[0],d[1]),w[m]=d[m],o.lineTo(w[0],w[1]),w[m]=f[m],o.lineTo(w[0],w[1]),o.lineTo(f[0],f[1]);for(var M=1;M<h-1;M++){var C=n[M];o.moveTo(C[0],C[1]),w[m]=C[m],o.lineTo(w[0],w[1])}}}),l=D.extendChartView({type:"tree",init:function(o,r){this._oldTree,this._mainGroup=new R.Group,this._controller=new _(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(o,r,n,h){var p=o.getData(),d=o.layoutInfo,f=this._mainGroup,v=o.get("layout");v==="radial"?f.attr("position",[d.x+d.width/2,d.y+d.height/2]):f.attr("position",[d.x,d.y]),this._updateViewCoordSys(o,d,v),this._updateController(o,r,n);var m=this._data,y={expandAndCollapse:o.get("expandAndCollapse"),layout:v,edgeShape:o.get("edgeShape"),edgeForkPosition:o.get("edgeForkPosition"),orient:o.getOrient(),curvature:o.get("lineStyle.curveness"),symbolRotate:o.get("symbolRotate"),symbolOffset:o.get("symbolOffset"),hoverAnimation:o.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};p.diff(m).add(function(x){e(p,x)&&i(p,x,null,f,o,y)}).update(function(x,w){var M=m.getItemGraphicEl(w);e(p,x)?i(p,x,M,f,o,y):M&&s(m,w,M,f,o,y)}).remove(function(x){var w=m.getItemGraphicEl(x);w&&s(m,x,w,f,o,y)}).execute(),this._nodeScaleRatio=o.get("nodeScaleRatio"),this._updateNodeAndLinkScale(o),y.expandAndCollapse===!0&&p.eachItemGraphicEl(function(x,w){x.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:o.id,dataIndex:w})})}),this._data=p},_updateViewCoordSys:function(o){var r=o.getData(),n=[];r.each(function(m){var y=r.getItemLayout(m);!y||isNaN(y.x)||isNaN(y.y)||n.push([+y.x,+y.y])});var h=[],p=[];E.fromPoints(n,h,p);var d=this._min,f=this._max;p[0]-h[0]==0&&(h[0]=d?d[0]:h[0]-1,p[0]=f?f[0]:p[0]+1),p[1]-h[1]==0&&(h[1]=d?d[1]:h[1]-1,p[1]=f?f[1]:p[1]+1);var v=o.coordinateSystem=new I;v.zoomLimit=o.get("scaleLimit"),v.setBoundingRect(h[0],h[1],p[0]-h[0],p[1]-h[1]),v.setCenter(o.get("center")),v.setZoom(o.get("zoom")),this.group.attr({position:v.position,scale:v.scale}),this._viewCoordSys=v,this._min=h,this._max=p},_updateController:function(o,r,n){var h=this._controller,p=this._controllerHost,d=this.group;h.setPointerChecker(function(f,v,m){var y=d.getBoundingRect();return y.applyTransform(d.transform),y.contain(v,m)&&!g(f,n,o)}),h.enable(o.get("roam")),p.zoomLimit=o.get("scaleLimit"),p.zoom=o.coordinateSystem.getZoom(),h.off("pan").off("zoom").on("pan",function(f){S.updateViewOnPan(p,f.dx,f.dy),n.dispatchAction({seriesId:o.id,type:"treeRoam",dx:f.dx,dy:f.dy})},this).on("zoom",function(f){S.updateViewOnZoom(p,f.scale,f.originX,f.originY),n.dispatchAction({seriesId:o.id,type:"treeRoam",zoom:f.scale,originX:f.originX,originY:f.originY}),this._updateNodeAndLinkScale(o)},this)},_updateNodeAndLinkScale:function(o){var r=o.getData(),n=this._getNodeGlobalScale(o),h=[n,n];r.eachItemGraphicEl(function(p,d){p.attr("scale",h)})},_getNodeGlobalScale:function(o){var r=o.coordinateSystem;if(r.type!=="view")return 1;var n=this._nodeScaleRatio,h=r.scale,p=h&&h[0]||1;return((r.getZoom()-1)*n+1)/p},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}});function e(o,r){var n=o.getItemLayout(r);return n&&!isNaN(n.x)&&!isNaN(n.y)&&o.getItemVisual(r,"symbol")!=="none"}function t(o,r,n){return n.itemModel=r,n.itemStyle=r.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=r.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=r.getModel("lineStyle").getLineStyle(),n.labelModel=r.getModel("label"),n.hoverLabelModel=r.getModel("emphasis.label"),o.isExpand===!1&&o.children.length!==0?n.symbolInnerColor=n.itemStyle.fill:n.symbolInnerColor="#fff",n}function i(o,r,n,h,p,d){var f=!n,v=o.tree.getNodeByDataIndex(r),m=v.getModel(),y=(d=t(v,m,d),o.tree.root),x=v.parentNode===y?v:v.parentNode||v,w=o.getItemGraphicEl(x.dataIndex),M=x.getLayout(),C=w?{x:w.position[0],y:w.position[1],rawX:w.__radialOldRawX,rawY:w.__radialOldRawY}:M,A=v.getLayout();f?(n=new k(o,r,d)).attr("position",[C.x,C.y]):n.updateData(o,r,d),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=A.rawX,n.__radialRawY=A.rawY,h.add(n),o.setItemGraphicEl(r,n),R.updateProps(n,{position:[A.x,A.y]},p);var P=n.getSymbolPath();if(d.layout==="radial"){var b,N,B=y.children[0],z=B.getLayout(),F=B.children.length;if(A.x===z.x&&v.isExpand===!0){var V={};V.x=(B.children[0].getLayout().x+B.children[F-1].getLayout().x)/2,V.y=(B.children[0].getLayout().y+B.children[F-1].getLayout().y)/2,(b=Math.atan2(V.y-z.y,V.x-z.x))<0&&(b=2*Math.PI+b),(N=V.x<z.x)&&(b-=Math.PI)}else(b=Math.atan2(A.y-z.y,A.x-z.x))<0&&(b=2*Math.PI+b),v.children.length===0||v.children.length!==0&&v.isExpand===!1?(N=A.x<z.x)&&(b-=Math.PI):(N=A.x>z.x)||(b-=Math.PI);var H=N?"left":"right",U=d.labelModel.get("rotate"),j=U*(Math.PI/180);P.setStyle({textPosition:d.labelModel.get("position")||H,textRotation:U==null?-b:j,textOrigin:"center",verticalAlign:"middle"})}(function(X,Y,J,K,Q,Z,q,tt,$){var rt=$.edgeShape,et=K.__edge;if(rt==="curve")Y.parentNode&&Y.parentNode!==J&&(et||(et=K.__edge=new R.BezierCurve({shape:a($,Q,Q),style:L.defaults({opacity:0,strokeNoScale:!0},$.lineStyle)})),R.updateProps(et,{shape:a($,Z,q),style:L.defaults({opacity:1},$.lineStyle)},X));else if(rt==="polyline"&&$.layout==="orthogonal"&&Y!==J&&Y.children&&Y.children.length!==0&&Y.isExpand===!0){for(var it=Y.children,ot=[],st=0;st<it.length;st++){var at=it[st].getLayout();ot.push([at.x,at.y])}et||(et=K.__edge=new c({shape:{parentPoint:[q.x,q.y],childPoints:[[q.x,q.y]],orient:$.orient,forkPosition:$.edgeForkPosition},style:L.defaults({opacity:0,strokeNoScale:!0},$.lineStyle)})),R.updateProps(et,{shape:{parentPoint:[q.x,q.y],childPoints:ot},style:L.defaults({opacity:1},$.lineStyle)},X)}tt.add(et)})(p,v,y,n,C,M,A,h,d)}function s(o,r,n,h,p,d){for(var f,v=o.tree.getNodeByDataIndex(r),m=o.tree.root,y=v.getModel(),x=(d=t(v,y,d),v.parentNode===m?v:v.parentNode||v),w=d.edgeShape;(f=x.getLayout())==null;)x=x.parentNode===m?x:x.parentNode||x;R.updateProps(n,{position:[f.x+1,f.y+1]},p,function(){h.remove(n),o.setItemGraphicEl(r,null)}),n.fadeOut(null,{keepLabel:!0});var M=o.getItemGraphicEl(x.dataIndex).__edge,C=n.__edge||(x.isExpand===!1||x.children.length===1?M:void 0);w=d.edgeShape,C&&(w==="curve"?R.updateProps(C,{shape:a(d,f,f),style:{opacity:0}},p,function(){h.remove(C)}):w==="polyline"&&d.layout==="orthogonal"&&R.updateProps(C,{shape:{parentPoint:[f.x,f.y],childPoints:[[f.x,f.y]]},style:{opacity:0}},p,function(){h.remove(C)}))}function a(o,r,n){var h,p,d,f,v,m,y,x,w=o.orient;if(o.layout==="radial"){v=r.rawX,y=r.rawY,m=n.rawX,x=n.rawY;var M=O(v,y),C=O(v,y+(x-y)*o.curvature),A=O(m,x+(y-x)*o.curvature),P=O(m,x);return{x1:M.x,y1:M.y,x2:P.x,y2:P.y,cpx1:C.x,cpy1:C.y,cpx2:A.x,cpy2:A.y}}return v=r.x,y=r.y,m=n.x,x=n.y,w!=="LR"&&w!=="RL"||(h=v+(m-v)*o.curvature,p=y,d=m+(v-m)*o.curvature,f=x),w!=="TB"&&w!=="BT"||(h=v,p=y+(x-y)*o.curvature,d=m,f=x+(y-x)*o.curvature),{x1:v,y1:y,x2:m,y2:x,cpx1:h,cpy1:p,cpx2:d,cpy2:f}}W.exports=l},69387:(W,G,T)=>{var L=T(76172);function R(I){var S=I.children;return S.length&&I.isExpand?S[S.length-1]:I.hierNode.thread}function k(I){var S=I.children;return S.length&&I.isExpand?S[0]:I.hierNode.thread}function O(I,S,_){return I.hierNode.ancestor.parentNode===S.parentNode?I.hierNode.ancestor:_}function D(I,S,_){var g=_/(S.hierNode.i-I.hierNode.i);S.hierNode.change-=g,S.hierNode.shift+=_,S.hierNode.modifier+=_,S.hierNode.prelim+=_,I.hierNode.change+=g}function E(I,S){return I.parentNode===S.parentNode?1:2}G.init=function(I){I.hierNode={defaultAncestor:null,ancestor:I,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var S,_,g=[I];S=g.pop();)if(_=S.children,S.isExpand&&_.length)for(var u=_.length-1;u>=0;u--){var c=_[u];c.hierNode={defaultAncestor:null,ancestor:c,prelim:0,modifier:0,change:0,shift:0,i:u,thread:null},g.push(c)}},G.firstWalk=function(I,S){var _=I.isExpand?I.children:[],g=I.parentNode.children,u=I.hierNode.i?g[I.hierNode.i-1]:null;if(_.length){(function(l){for(var e=l.children,t=e.length,i=0,s=0;--t>=0;){var a=e[t];a.hierNode.prelim+=i,a.hierNode.modifier+=i,s+=a.hierNode.change,i+=a.hierNode.shift+s}})(I);var c=(_[0].hierNode.prelim+_[_.length-1].hierNode.prelim)/2;u?(I.hierNode.prelim=u.hierNode.prelim+S(I,u),I.hierNode.modifier=I.hierNode.prelim-c):I.hierNode.prelim=c}else u&&(I.hierNode.prelim=u.hierNode.prelim+S(I,u));I.parentNode.hierNode.defaultAncestor=function(l,e,t,i){if(e){for(var s=l,a=l,o=a.parentNode.children[0],r=e,n=s.hierNode.modifier,h=a.hierNode.modifier,p=o.hierNode.modifier,d=r.hierNode.modifier;r=R(r),a=k(a),r&&a;){s=R(s),o=k(o),s.hierNode.ancestor=l;var f=r.hierNode.prelim+d-a.hierNode.prelim-h+i(r,a);f>0&&(D(O(r,l,t),l,f),h+=f,n+=f),d+=r.hierNode.modifier,h+=a.hierNode.modifier,n+=s.hierNode.modifier,p+=o.hierNode.modifier}r&&!R(s)&&(s.hierNode.thread=r,s.hierNode.modifier+=d-n),a&&!k(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=h-p,t=l)}return t}(I,u,I.parentNode.hierNode.defaultAncestor||g[0],S)},G.secondWalk=function(I){var S=I.hierNode.prelim+I.parentNode.hierNode.modifier;I.setLayout({x:S},!0),I.hierNode.modifier+=I.parentNode.hierNode.modifier},G.separation=function(I){return arguments.length?I:E},G.radialCoordinate=function(I,S){var _={};return I-=Math.PI/2,_.x=S*Math.cos(I),_.y=S*Math.sin(I),_},G.getViewRect=function(I,S){return L.getLayoutRect(I.getBoxLayoutParams(),{width:S.getWidth(),height:S.getHeight()})}},55128:(W,G)=>{G.eachAfter=function(T,L,R){for(var k,O=[T],D=[];k=O.pop();)if(D.push(k),k.isExpand){var E=k.children;if(E.length)for(var I=0;I<E.length;I++)O.push(E[I])}for(;k=D.pop();)L(k,R)},G.eachBefore=function(T,L){for(var R,k=[T];R=k.pop();)if(L(R),R.isExpand){var O=R.children;if(O.length)for(var D=O.length-1;D>=0;D--)k.push(O[D])}}},1969:(W,G,T)=>{var L=T(70492),R=T(60553).updateCenterAndZoom;L.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(k,O){O.eachComponent({mainType:"series",subType:"tree",query:k},function(D){var E=k.dataIndex,I=D.getData().tree.getNodeByDataIndex(E);I.isExpand=!I.isExpand})}),L.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(k,O){O.eachComponent({mainType:"series",subType:"tree",query:k},function(D){var E=D.coordinateSystem,I=R(E,k);D.setCenter&&D.setCenter(I.center),D.setZoom&&D.setZoom(I.zoom)})})},92961:(W,G,T)=>{var L=T(55128),R=L.eachAfter,k=L.eachBefore,O=T(69387),D=O.init,E=O.firstWalk,I=O.secondWalk,S=O.separation,_=O.radialCoordinate,g=O.getViewRect;W.exports=function(u,c){u.eachSeriesByType("tree",function(l){(function(e,t){var i=g(e,t);e.layoutInfo=i;var s=e.get("layout"),a=0,o=0,r=null;s==="radial"?(a=2*Math.PI,o=Math.min(i.height,i.width)/2,r=S(function(A,P){return(A.parentNode===P.parentNode?1:2)/A.depth})):(a=i.width,o=i.height,r=S());var n=e.getData().tree.root,h=n.children[0];if(h){D(n),R(h,E,r),n.hierNode.modifier=-h.hierNode.prelim,k(h,I);var p=h,d=h,f=h;k(h,function(A){var P=A.getLayout().x;P<p.getLayout().x&&(p=A),P>d.getLayout().x&&(d=A),A.depth>f.depth&&(f=A)});var v=p===d?1:r(p,d)/2,m=v-p.getLayout().x,y=0,x=0,w=0,M=0;if(s==="radial")y=a/(d.getLayout().x+v+m),x=o/(f.depth-1||1),k(h,function(A){w=(A.getLayout().x+m)*y,M=(A.depth-1)*x;var P=_(w,M);A.setLayout({x:P.x,y:P.y,rawX:w,rawY:M},!0)});else{var C=e.getOrient();C==="RL"||C==="LR"?(x=o/(d.getLayout().x+v+m),y=a/(f.depth-1||1),k(h,function(A){M=(A.getLayout().x+m)*x,w=C==="LR"?(A.depth-1)*y:a-(A.depth-1)*y,A.setLayout({x:w,y:M},!0)})):C!=="TB"&&C!=="BT"||(y=a/(d.getLayout().x+v+m),x=o/(f.depth-1||1),k(h,function(A){w=(A.getLayout().x+m)*y,M=C==="TB"?(A.depth-1)*x:o-(A.depth-1)*x,A.setLayout({x:w,y:M},!0)}))}}})(l,c)})}},17831:(W,G,T)=>{var L=T(70492);T(37670),T(45255),T(93663);var R=T(46188),k=T(29605);L.registerVisual(R),L.registerLayout(k)},2711:(W,G,T)=>{var L=T(51177),R=T(76172),k=T(33051),O=T(68833).wrapTreePathInfo;function D(_){this.group=new L.Group,_.add(this.group)}function E(_,g,u,c,l,e){var t=[[l?_:_-5,g],[_+u,g],[_+u,g+c],[l?_:_-5,g+c]];return!e&&t.splice(2,0,[_+u+5,g+c/2]),!l&&t.push([_,g+c/2]),t}function I(_,g,u){_.eventData={componentType:"series",componentSubType:"treemap",componentIndex:g.componentIndex,seriesIndex:g.componentIndex,seriesName:g.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:u&&u.dataIndex,name:u&&u.name},treePathInfo:u&&O(u,g)}}D.prototype={constructor:D,render:function(_,g,u,c){var l=_.getModel("breadcrumb"),e=this.group;if(e.removeAll(),l.get("show")&&u){var t=l.getModel("itemStyle"),i=t.getModel("textStyle"),s={pos:{left:l.get("left"),right:l.get("right"),top:l.get("top"),bottom:l.get("bottom")},box:{width:g.getWidth(),height:g.getHeight()},emptyItemWidth:l.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(u,s,i),this._renderContent(_,s,t,i,c),R.positionElement(e,s.pos,s.box)}},_prepare:function(_,g,u){for(var c=_;c;c=c.parentNode){var l=c.getModel().get("name"),e=u.getTextRect(l),t=Math.max(e.width+16,g.emptyItemWidth);g.totalWidth+=t+8,g.renderList.push({node:c,text:l,width:t})}},_renderContent:function(_,g,u,c,l){for(var e=0,t=g.emptyItemWidth,i=_.get("breadcrumb.height"),s=R.getAvailableSize(g.pos,g.box),a=g.totalWidth,o=g.renderList,r=o.length-1;r>=0;r--){var n=o[r],h=n.node,p=n.width,d=n.text;a>s.width&&(a-=p-t,p=t,d=null);var f=new L.Polygon({shape:{points:E(e,0,p,i,r===o.length-1,r===0)},style:k.defaults(u.getItemStyle(),{lineJoin:"bevel",text:d,textFill:c.getTextColor(),textFont:c.getFont()}),z:10,onclick:k.curry(l,h)});this.group.add(f),I(f,_,h),e+=p+8}},remove:function(){this.group.removeAll()}};var S=D;W.exports=S},37670:(W,G,T)=>{var L=T(33051),R=T(93321),k=T(9327),O=T(4272),D=T(78988),E=D.encodeHTML,I=D.addCommas,S=T(68833).wrapTreePathInfo,_=R.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(u,c){var l={name:u.name,children:u.data};g(l);var e=u.levels||[],t=this.designatedVisualItemStyle={},i=new O({itemStyle:t},this,c);e=u.levels=function(o,r){var n,h=r.get("color");if(h)return o=o||[],L.each(o,function(p){var d=new O(p),f=d.get("color");(d.get("itemStyle.color")||f&&f!=="none")&&(n=!0)}),n||((o[0]||(o[0]={})).color=h.slice()),o}(e,c);var s=L.map(e||[],function(o){return new O(o,i,c)},this),a=k.createTree(l,this,function(o){o.wrapMethod("getItemModel",function(r,n){var h=a.getNodeByDataIndex(n),p=s[h.depth];return r.parentModel=p||i,r})});return a.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(u){var c=this.getData(),l=this.getRawValue(u),e=L.isArray(l)?I(l[0]):I(l),t=c.getName(u);return E(t+": "+e)},getDataParams:function(u){var c=R.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(u);return c.treePathInfo=S(l,this),c},setLayoutInfo:function(u){this.layoutInfo=this.layoutInfo||{},L.extend(this.layoutInfo,u)},mapIdToIndex:function(u){var c=this._idIndexMap;c||(c=this._idIndexMap=L.createHashMap(),this._idIndexMapCount=0);var l=c.get(u);return l==null&&c.set(u,l=this._idIndexMapCount++),l},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(u){u?this._viewRoot=u:u=this._viewRoot;var c=this.getRawData().tree.root;u&&(u===c||c.contains(u))||(this._viewRoot=c)}});function g(u){var c=0;L.each(u.children,function(e){g(e);var t=e.value;L.isArray(t)&&(t=t[0]),c+=t});var l=u.value;L.isArray(l)&&(l=l[0]),(l==null||isNaN(l))&&(l=c),l<0&&(l=0),L.isArray(u.value)?u.value[0]=l:u.value=l}W.exports=_},45255:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(51177),O=T(4130),D=T(68833),E=T(2711),I=T(9176),S=T(60479),_=T(32892),g=T(34584),u=T(59066),c=T(78988).windowOpen,l=R.bind,e=k.Group,t=k.Rect,i=R.each,s=["label"],a=["emphasis","label"],o=["upperLabel"],r=["emphasis","upperLabel"],n=u([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),h=function(v){var m=n(v);return m.stroke=m.fill=m.lineWidth=null,m},p=L.extendChartView({type:"treemap",init:function(v,m){this._containerGroup,this._storage={nodeGroup:[],background:[],content:[]},this._oldTree,this._breadcrumb,this._controller,this._state="ready"},render:function(v,m,y,x){var w=m.findComponents({mainType:"series",subType:"treemap",query:x});if(!(R.indexOf(w,v)<0)){this.seriesModel=v,this.api=y,this.ecModel=m;var M=D.retrieveTargetInfo(x,["treemapZoomToNode","treemapRootToNode"],v),C=x&&x.type,A=v.layoutInfo,P=!this._oldTree,b=this._storage,N=C==="treemapRootToNode"&&M&&b?{rootNodeGroup:b.nodeGroup[M.node.getRawIndex()],direction:x.direction}:null,B=this._giveContainerGroup(A),z=this._doRender(B,v,N);P||C&&C!=="treemapZoomToNode"&&C!=="treemapRootToNode"?z.renderFinally():this._doAnimation(B,z,v,N),this._resetController(y),this._renderBreadcrumb(v,y,M)}},_giveContainerGroup:function(v){var m=this._containerGroup;return m||(m=this._containerGroup=new e,this._initEvents(m),this.group.add(m)),m.attr("position",[v.x,v.y]),m},_doRender:function(v,m,y){var x=m.getData().tree,w=this._oldTree,M={nodeGroup:[],background:[],content:[]},C={nodeGroup:[],background:[],content:[]},A=this._storage,P=[],b=R.curry(d,m,C,A,y,M,P);(function B(z,F,V,H,U){function j(Y){return Y.getId()}function X(Y,J){var K=Y!=null?z[Y]:null,Q=J!=null?F[J]:null,Z=b(K,Q,V,U);Z&&B(K&&K.viewChildren||[],Q&&Q.viewChildren||[],Z,H,U+1)}H?(F=z,i(z,function(Y,J){!Y.isRemoved()&&X(J,J)})):new O(F,z,j,j).add(X).update(X).remove(R.curry(X,null)).execute()})(x.root?[x.root]:[],w&&w.root?[w.root]:[],v,x===w||!w,0);var N=function(B){var z={nodeGroup:[],background:[],content:[]};return B&&i(B,function(F,V){var H=z[V];i(F,function(U){U&&(H.push(U),U.__tmWillDelete=1)})}),z}(A);return this._oldTree=x,this._storage=C,{lastsForAnimation:M,willDeleteEls:N,renderFinally:function(){i(N,function(B){i(B,function(z){z.parent&&z.parent.remove(z)})}),i(P,function(B){B.invisible=!0,B.dirty()})}}},_doAnimation:function(v,m,y,x){if(y.get("animation")){var w=y.get("animationDurationUpdate"),M=y.get("animationEasing"),C=g.createWrap();i(m.willDeleteEls,function(A,P){i(A,function(b,N){if(!b.invisible){var B,z=b.parent;if(x&&x.direction==="drillDown")B=z===x.rootNodeGroup?{shape:{x:0,y:0,width:z.__tmNodeWidth,height:z.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var F=0,V=0;z.__tmWillDelete||(F=z.__tmNodeWidth/2,V=z.__tmNodeHeight/2),B=P==="nodeGroup"?{position:[F,V],style:{opacity:0}}:{shape:{x:F,y:V,width:0,height:0},style:{opacity:0}}}B&&C.add(b,B,w,M)}})}),i(this._storage,function(A,P){i(A,function(b,N){var B=m.lastsForAnimation[P][N],z={};B&&(P==="nodeGroup"?B.old&&(z.position=b.position.slice(),b.attr("position",B.old)):(B.old&&(z.shape=R.extend({},b.shape),b.setShape(B.old)),B.fadein?(b.setStyle("opacity",0),z.style={opacity:1}):b.style.opacity!==1&&(z.style={opacity:1})),C.add(b,z,w,M))})},this),this._state="animating",C.done(l(function(){this._state="ready",m.renderFinally()},this)).start()}},_resetController:function(v){var m=this._controller;m||((m=this._controller=new I(v.getZr())).enable(this.seriesModel.get("roam")),m.on("pan",l(this._onPan,this)),m.on("zoom",l(this._onZoom,this)));var y=new S(0,0,v.getWidth(),v.getHeight());m.setPointerChecker(function(x,w,M){return y.contain(w,M)})},_clearController:function(){var v=this._controller;v&&(v.dispose(),v=null)},_onPan:function(v){if(this._state!=="animating"&&(Math.abs(v.dx)>3||Math.abs(v.dy)>3)){var m=this.seriesModel.getData().tree.root;if(!m)return;var y=m.getLayout();if(!y)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:y.x+v.dx,y:y.y+v.dy,width:y.width,height:y.height}})}},_onZoom:function(v){var m=v.originX,y=v.originY;if(this._state!=="animating"){var x=this.seriesModel.getData().tree.root;if(!x)return;var w=x.getLayout();if(!w)return;var M=new S(w.x,w.y,w.width,w.height),C=this.seriesModel.layoutInfo;m-=C.x,y-=C.y;var A=_.create();_.translate(A,A,[-m,-y]),_.scale(A,A,[v.scale,v.scale]),_.translate(A,A,[m,y]),M.applyTransform(A),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:M.x,y:M.y,width:M.width,height:M.height}})}},_initEvents:function(v){v.on("click",function(m){if(this._state==="ready"){var y=this.seriesModel.get("nodeClick",!0);if(y){var x=this.findTarget(m.offsetX,m.offsetY);if(x){var w=x.node;if(w.getLayout().isLeafRoot)this._rootToNode(x);else if(y==="zoomToNode")this._zoomToNode(x);else if(y==="link"){var M=w.hostTree.data.getItemModel(w.dataIndex),C=M.get("link",!0),A=M.get("target",!0)||"blank";C&&c(C,A)}}}}},this)},_renderBreadcrumb:function(v,m,y){y||(y=v.get("leafDepth",!0)!=null?{node:v.getViewRoot()}:this.findTarget(m.getWidth()/2,m.getHeight()/2))||(y={node:v.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new E(this.group))).render(v,m,y.node,l(function(x){this._state!=="animating"&&(D.aboveViewRoot(v.getViewRoot(),x)?this._rootToNode({node:x}):this._zoomToNode({node:x}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(v){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:v.node})},_rootToNode:function(v){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:v.node})},findTarget:function(v,m){var y;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(x){var w=this._storage.background[x.getRawIndex()];if(w){var M=w.transformCoordToLocal(v,m),C=w.shape;if(!(C.x<=M[0]&&M[0]<=C.x+C.width&&C.y<=M[1]&&M[1]<=C.y+C.height))return!1;y={node:x,offsetX:M[0],offsetY:M[1]}}},this),y}});function d(v,m,y,x,w,M,C,A,P,b){if(C){var N=C.getLayout(),B=v.getData();if(B.setItemGraphicEl(C.dataIndex,null),N&&N.isInView){var z=N.width,F=N.height,V=N.borderWidth,H=N.invisible,U=C.getRawIndex(),j=A&&A.getRawIndex(),X=C.viewChildren,Y=N.upperHeight,J=X&&X.length,K=C.getModel("itemStyle"),Q=C.getModel("emphasis.itemStyle"),Z=ot("nodeGroup",e);if(Z){if(P.add(Z),Z.attr("position",[N.x||0,N.y||0]),Z.__tmNodeWidth=z,Z.__tmNodeHeight=F,N.isAboveViewRoot)return Z;var q=C.getModel(),tt=ot("background",t,b,1);if(tt&&function(st,at,vt){if(at.dataIndex=C.dataIndex,at.seriesIndex=v.seriesIndex,at.setShape({x:0,y:0,width:z,height:F}),H)rt(at);else{at.invisible=!1;var yt=C.getVisual("borderColor",!0),gt=Q.get("borderColor"),pt=h(K);pt.fill=yt;var bt=n(Q);if(bt.fill=gt,vt){var mt=z-2*V;et(pt,bt,yt,mt,Y,{x:V,y:0,width:mt,height:Y})}else pt.text=bt.text=null;at.setStyle(pt),k.setElementHoverStyle(at,bt)}st.add(at)}(Z,tt,J&&N.upperLabelHeight),J)k.isHighDownDispatcher(Z)&&k.setAsHighDownDispatcher(Z,!1),tt&&(k.setAsHighDownDispatcher(tt,!0),B.setItemGraphicEl(C.dataIndex,tt));else{var $=ot("content",t,b,2);$&&function(st,at){at.dataIndex=C.dataIndex,at.seriesIndex=v.seriesIndex;var vt=Math.max(z-2*V,0),yt=Math.max(F-2*V,0);if(at.culling=!0,at.setShape({x:V,y:V,width:vt,height:yt}),H)rt(at);else{at.invisible=!1;var gt=C.getVisual("color",!0),pt=h(K);pt.fill=gt;var bt=n(Q);et(pt,bt,gt,vt,yt),at.setStyle(pt),k.setElementHoverStyle(at,bt)}st.add(at)}(Z,$),tt&&k.isHighDownDispatcher(tt)&&k.setAsHighDownDispatcher(tt,!1),k.setAsHighDownDispatcher(Z,!0),B.setItemGraphicEl(C.dataIndex,Z)}return Z}}}function rt(st){!st.invisible&&M.push(st)}function et(st,at,vt,yt,gt,pt){var bt=q.get("name"),mt=q.getModel(pt?o:s),nt=q.getModel(pt?r:a),lt=mt.getShallow("show");k.setLabelStyle(st,at,mt,nt,{defaultText:lt?bt:null,autoColor:vt,isRectText:!0,labelFetcher:v,labelDataIndex:C.dataIndex,labelProp:pt?"upperLabel":"label"}),it(st,pt,N),it(at,pt,N),pt&&(st.textRect=R.clone(pt)),st.truncate=lt&&mt.get("ellipsis")?{outerWidth:yt,outerHeight:gt,minChar:2}:null}function it(st,at,vt){var yt=st.text;if(!at&&vt.isLeafRoot&&yt!=null){var gt=v.get("drillDownIcon",!0);st.text=gt?gt+" "+yt:yt}}function ot(st,at,vt,yt){var gt=j!=null&&y[st][j],pt=w[st];return gt?(y[st][j]=null,function(bt,mt,nt){(bt[U]={}).old=nt==="nodeGroup"?mt.position.slice():R.extend({},mt.shape)}(pt,gt,st)):H||((gt=new at({z:f(vt,yt)})).__tmDepth=vt,gt.__tmStorageName=st,function(bt,mt,nt){var lt=bt[U]={},ct=C.parentNode;if(ct&&(!x||x.direction==="drillDown")){var ht=0,ft=0,_t=w.background[ct.getRawIndex()];!x&&_t&&_t.old&&(ht=_t.old.width,ft=_t.old.height),lt.old=nt==="nodeGroup"?[0,ft]:{x:ht,y:ft,width:0,height:0}}lt.fadein=nt!=="nodeGroup"}(pt,0,st)),m[st][U]=gt}}function f(v,m){var y=10*v+m;return(y-1)/y}W.exports=p},93663:(W,G,T)=>{for(var L=T(70492),R=T(68833),k=function(){},O=["treemapZoomToNode","treemapRender","treemapMove"],D=0;D<O.length;D++)L.registerAction({type:O[D],update:"updateView"},k);L.registerAction({type:"treemapRootToNode",update:"updateView"},function(E,I){I.eachComponent({mainType:"series",subType:"treemap",query:E},function(S,_){var g=R.retrieveTargetInfo(E,["treemapZoomToNode","treemapRootToNode"],S);if(g){var u=S.getViewRoot();u&&(E.direction=R.aboveViewRoot(u,g.node)?"rollUp":"drillDown"),S.resetViewRoot(g.node)}})})},29605:(W,G,T)=>{var L=T(33051),R=T(60479),k=T(85669),O=k.parsePercent,D=k.MAX_SAFE_INTEGER,E=T(76172),I=T(68833),S=Math.max,_=Math.min,g=L.retrieve,u=L.each,c=["itemStyle","borderWidth"],l=["itemStyle","gapWidth"],e=["upperLabel","show"],t=["upperLabel","height"],i={seriesType:"treemap",reset:function(h,p,d,f){var v=d.getWidth(),m=d.getHeight(),y=h.option,x=E.getLayoutRect(h.getBoxLayoutParams(),{width:d.getWidth(),height:d.getHeight()}),w=y.size||[],M=O(g(x.width,w[0]),v),C=O(g(x.height,w[1]),m),A=f&&f.type,P=I.retrieveTargetInfo(f,["treemapZoomToNode","treemapRootToNode"],h),b=A==="treemapRender"||A==="treemapMove"?f.rootRect:null,N=h.getViewRoot(),B=I.getPathToRoot(N);if(A!=="treemapMove"){var z=A==="treemapZoomToNode"?function(j,X,Y,J,K){var Q,Z=(X||{}).node,q=[J,K];if(!Z||Z===Y)return q;for(var tt=J*K,$=tt*j.option.zoomToNodeRatio;Q=Z.parentNode;){for(var rt=0,et=Q.children,it=0,ot=et.length;it<ot;it++)rt+=et[it].getValue();var st=Z.getValue();if(st===0)return q;$*=rt/st;var at=Q.getModel(),vt=at.get(c);($+=4*vt*vt+(3*vt+Math.max(vt,n(at)))*Math.pow($,.5))>D&&($=D),Z=Q}$<tt&&($=tt);var yt=Math.pow($/tt,.5);return[J*yt,K*yt]}(h,P,N,M,C):b?[b.width,b.height]:[M,C],F=y.sort;F&&F!=="asc"&&F!=="desc"&&(F="desc");var V={squareRatio:y.squareRatio,sort:F,leafDepth:y.leafDepth};N.hostTree.clearLayouts();var H={x:0,y:0,width:z[0],height:z[1],area:z[0]*z[1]};N.setLayout(H),s(N,V,!1,0),H=N.getLayout(),u(B,function(j,X){var Y=(B[X+1]||N).getValue();j.setLayout(L.extend({dataExtent:[Y,Y],borderWidth:0,upperHeight:0},H))})}var U=h.getData().tree.root;U.setLayout(function(j,X,Y){if(X)return{x:X.x,y:X.y};var J={x:0,y:0};if(!Y)return J;var K=Y.node,Q=K.getLayout();if(!Q)return J;for(var Z=[Q.width/2,Q.height/2],q=K;q;){var tt=q.getLayout();Z[0]+=tt.x,Z[1]+=tt.y,q=q.parentNode}return{x:j.width/2-Z[0],y:j.height/2-Z[1]}}(x,b,P),!0),h.setLayoutInfo(x),r(U,new R(-x.x,-x.y,v,m),B,N,0)}};function s(h,p,d,f){var v,m;if(!h.isRemoved()){var y=h.getLayout();v=y.width,m=y.height;var x=(b=h.getModel()).get(c),w=b.get(l)/2,M=n(b),C=Math.max(x,M),A=x-w,P=C-w,b=h.getModel();h.setLayout({borderWidth:x,upperHeight:C,upperLabelHeight:M},!0);var N=(v=S(v-2*A,0))*(m=S(m-A-P,0)),B=function(K,Q,Z,q,tt,$){var rt=K.children||[],et=q.sort;et!=="asc"&&et!=="desc"&&(et=null);var it=q.leafDepth!=null&&q.leafDepth<=$;if(tt&&!it)return K.viewChildren=[];rt=L.filter(rt,function(yt){return!yt.isRemoved()}),function(yt,gt){gt&&yt.sort(function(pt,bt){var mt=gt==="asc"?pt.getValue()-bt.getValue():bt.getValue()-pt.getValue();return mt===0?gt==="asc"?pt.dataIndex-bt.dataIndex:bt.dataIndex-pt.dataIndex:mt})}(rt,et);var ot=function(yt,gt,pt){for(var bt=0,mt=0,nt=gt.length;mt<nt;mt++)bt+=gt[mt].getValue();var lt=yt.get("visualDimension");if(gt&&gt.length)if(lt==="value"&&pt)ct=[gt[gt.length-1].getValue(),gt[0].getValue()],pt==="asc"&&ct.reverse();else{var ct=[1/0,-1/0];u(gt,function(ht){var ft=ht.getValue(lt);ft<ct[0]&&(ct[0]=ft),ft>ct[1]&&(ct[1]=ft)})}else ct=[NaN,NaN];return{sum:bt,dataExtent:ct}}(Q,rt,et);if(ot.sum===0)return K.viewChildren=[];if(ot.sum=function(yt,gt,pt,bt,mt){if(!bt)return pt;for(var nt=yt.get("visibleMin"),lt=mt.length,ct=lt,ht=lt-1;ht>=0;ht--){var ft=mt[bt==="asc"?lt-ht-1:ht].getValue();ft/pt*gt<nt&&(ct=ht,pt-=ft)}return bt==="asc"?mt.splice(0,lt-ct):mt.splice(ct,lt-ct),pt}(Q,Z,ot.sum,et,rt),ot.sum===0)return K.viewChildren=[];for(var st=0,at=rt.length;st<at;st++){var vt=rt[st].getValue()/ot.sum*Z;rt[st].setLayout({area:vt})}return it&&(rt.length&&K.setLayout({isLeafRoot:!0},!0),rt.length=0),K.viewChildren=rt,K.setLayout({dataExtent:ot.dataExtent},!0),rt}(h,b,N,p,d,f);if(B.length){var z={x:A,y:P,width:v,height:m},F=_(v,m),V=1/0,H=[];H.area=0;for(var U=0,j=B.length;U<j;){var X=B[U];H.push(X),H.area+=X.getLayout().area;var Y=a(H,F,p.squareRatio);Y<=V?(U++,V=Y):(H.area-=H.pop().getLayout().area,o(H,F,z,w,!1),F=_(z.width,z.height),H.length=H.area=0,V=1/0)}if(H.length&&o(H,F,z,w,!0),!d){var J=b.get("childrenVisibleMin");J!=null&&N<J&&(d=!0)}for(U=0,j=B.length;U<j;U++)s(B[U],p,d,f+1)}}}function a(h,p,d){for(var f,v=0,m=1/0,y=0,x=h.length;y<x;y++)(f=h[y].getLayout().area)&&(f<m&&(m=f),f>v&&(v=f));var w=h.area*h.area,M=p*p*d;return w?S(M*v/w,w/(M*m)):1/0}function o(h,p,d,f,v){var m=p===d.width?0:1,y=1-m,x=["x","y"],w=["width","height"],M=d[x[m]],C=p?h.area/p:0;(v||C>d[w[y]])&&(C=d[w[y]]);for(var A=0,P=h.length;A<P;A++){var b=h[A],N={},B=C?b.getLayout().area/C:0,z=N[w[y]]=S(C-2*f,0),F=d[x[m]]+d[w[m]]-M,V=A===P-1||F<B?F:B,H=N[w[m]]=S(V-2*f,0);N[x[y]]=d[x[y]]+_(f,z/2),N[x[m]]=M+_(f,H/2),M+=V,b.setLayout(N,!0)}d[x[y]]+=C,d[w[y]]-=C}function r(h,p,d,f,v){var m=h.getLayout(),y=d[v],x=y&&y===h;if(!(y&&!x||v===d.length&&h!==f)){h.setLayout({isInView:!0,invisible:!x&&!p.intersect(m),isAboveViewRoot:x},!0);var w=new R(p.x-m.x,p.y-m.y,p.width,p.height);u(h.viewChildren||[],function(M){r(M,w,d,f,v+1)})}}function n(h){return h.get(e)?h.get(t):0}W.exports=i},46188:(W,G,T)=>{var L=T(59937),R=T(21092),k=T(33051),O=k.isArray,D={seriesType:"treemap",reset:function(g,u,c,l){var e=g.getData().tree.root;e.isRemoved()||E(e,{},g.getViewRoot().getAncestors(),g)}};function E(g,u,c,l){var e=g.getModel(),t=g.getLayout();if(t&&!t.invisible&&t.isInView){var i,s=g.getModel("itemStyle"),a=function(p,d,f){var v=k.extend({},d),m=f.designatedVisualItemStyle;return k.each(["color","colorAlpha","colorSaturation"],function(y){m[y]=d[y];var x=p.get(y);m[y]=null,x!=null&&(v[y]=x)}),v}(s,u,l),o=s.get("borderColor"),r=s.get("borderColorSaturation");r!=null&&(o=function(p,d){return d!=null?R.modifyHSL(d,null,null,p):null}(r,i=I(a))),g.setVisual("borderColor",o);var n=g.viewChildren;if(n&&n.length){var h=function(p,d,f,v,m,y){if(y&&y.length){var x=_(d,"color")||m.color!=null&&m.color!=="none"&&(_(d,"colorAlpha")||_(d,"colorSaturation"));if(x){var w=d.get("visualMin"),M=d.get("visualMax"),C=f.dataExtent.slice();w!=null&&w<C[0]&&(C[0]=w),M!=null&&M>C[1]&&(C[1]=M);var A=d.get("colorMappingBy"),P={type:x.name,dataExtent:C,visual:x.range};P.type!=="color"||A!=="index"&&A!=="id"?P.mappingMethod="linear":(P.mappingMethod="category",P.loop=!0);var b=new L(P);return b.__drColorMappingBy=A,b}}}(0,e,t,0,a,n);k.each(n,function(p,d){if(p.depth>=c.length||p===c[p.depth]){var f=function(v,m,y,x,w,M){var C=k.extend({},m);if(w){var A=w.type,P=A==="color"&&w.__drColorMappingBy,b=P==="index"?x:P==="id"?M.mapIdToIndex(y.getId()):y.getValue(v.get("visualDimension"));C[A]=w.mapValueToVisual(b)}return C}(e,a,p,d,h,l);E(p,f,c,l)}})}else i=I(a),g.setVisual("color",i)}}function I(g){var u=S(g,"color");if(u){var c=S(g,"colorAlpha"),l=S(g,"colorSaturation");return l&&(u=R.modifyHSL(u,null,null,l)),c&&(u=R.modifyAlpha(u,c)),u}}function S(g,u){var c=g[u];if(c!=null&&c!=="none")return c}function _(g,u){var c=g.get(u);return O(c)&&c.length?{name:u,range:c}:null}W.exports=D},3229:(W,G,T)=>{T(90580),T(60517)},88791:(W,G,T)=>{T(54805),T(42567)},52528:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(18490),O=T(96472);T(16572),T(48253),T(97326),L.registerPreprocessor(function(D){if(D){(!D.axisPointer||D.axisPointer.length===0)&&(D.axisPointer={});var E=D.axisPointer.link;E&&!R.isArray(E)&&(D.axisPointer.link=[E])}}),L.registerProcessor(L.PRIORITY.PROCESSOR.STATISTIC,function(D,E){D.getComponent("axisPointer").coordSysAxesInfo=k.collect(D,E)}),L.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},O)},16572:(W,G,T)=>{var L=T(70492).extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});W.exports=L},48253:(W,G,T)=>{var L=T(70492),R=T(56996),k=L.extendComponentView({type:"axisPointer",render:function(D,E,I){var S=E.getComponent("tooltip"),_=D.get("triggerOn")||S&&S.get("triggerOn")||"mousemove|click";R.register("axisPointer",I,function(g,u,c){_!=="none"&&(g==="leave"||_.indexOf(g)>=0)&&c({type:"updateAxisPointer",currTrigger:g,x:u&&u.offsetX,y:u&&u.offsetY})})},remove:function(D,E){R.unregister(E.getZr(),"axisPointer"),k.superApply(this._model,"remove",arguments)},dispose:function(D,E){R.unregister("axisPointer",E),k.superApply(this._model,"dispose",arguments)}}),O=k;W.exports=O},47329:(W,G,T)=>{var L=T(33051),R=T(34251),k=T(51177),O=T(18490),D=T(61158),E=T(270),I=(0,T(32234).makeInner)(),S=L.clone,_=L.bind;function g(){}function u(s,a,o,r){c(I(o).lastProp,r)||(I(o).lastProp=r,a?k.updateProps(o,r,s):(o.stopAnimation(),o.attr(r)))}function c(s,a){if(L.isObject(s)&&L.isObject(a)){var o=!0;return L.each(a,function(r,n){o=o&&c(s[n],r)}),!!o}return s===a}function l(s,a){s[a.get("label.show")?"show":"hide"]()}function e(s){return{position:s.position.slice(),rotation:s.rotation||0}}function t(s,a,o){var r=a.get("z"),n=a.get("zlevel");s&&s.traverse(function(h){h.type!=="group"&&(r!=null&&(h.z=r),n!=null&&(h.zlevel=n),h.silent=o)})}g.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(s,a,o,r){var n=a.get("value"),h=a.get("status");if(this._axisModel=s,this._axisPointerModel=a,this._api=o,r||this._lastValue!==n||this._lastStatus!==h){this._lastValue=n,this._lastStatus=h;var p=this._group,d=this._handle;if(!h||h==="hide")return p&&p.hide(),void(d&&d.hide());p&&p.show(),d&&d.show();var f={};this.makeElOption(f,n,s,a,o);var v=f.graphicKey;v!==this._lastGraphicKey&&this.clear(o),this._lastGraphicKey=v;var m=this._moveAnimation=this.determineAnimation(s,a);if(p){var y=L.curry(u,a,m);this.updatePointerEl(p,f,y,a),this.updateLabelEl(p,f,y,a)}else p=this._group=new k.Group,this.createPointerEl(p,f,s,a),this.createLabelEl(p,f,s,a),o.getZr().add(p);t(p,a,!0),this._renderHandle(n)}},remove:function(s){this.clear(s)},dispose:function(s){this.clear(s)},determineAnimation:function(s,a){var o=a.get("animation"),r=s.axis,n=r.type==="category",h=a.get("snap");if(!h&&!n)return!1;if(o==="auto"||o==null){var p=this.animationThreshold;if(n&&r.getBandWidth()>p)return!0;if(h){var d=O.getAxisInfo(s).seriesDataCount,f=r.getExtent();return Math.abs(f[0]-f[1])/d>p}return!1}return o===!0},makeElOption:function(s,a,o,r,n){},createPointerEl:function(s,a,o,r){var n=a.pointer;if(n){var h=I(s).pointerEl=new k[n.type](S(a.pointer));s.add(h)}},createLabelEl:function(s,a,o,r){if(a.label){var n=I(s).labelEl=new k.Rect(S(a.label));s.add(n),l(n,r)}},updatePointerEl:function(s,a,o){var r=I(s).pointerEl;r&&a.pointer&&(r.setStyle(a.pointer.style),o(r,{shape:a.pointer.shape}))},updateLabelEl:function(s,a,o,r){var n=I(s).labelEl;n&&(n.setStyle(a.label.style),o(n,{shape:a.label.shape,position:a.label.position}),l(n,r))},_renderHandle:function(s){if(!this._dragging&&this.updateHandleTransform){var a,o=this._axisPointerModel,r=this._api.getZr(),n=this._handle,h=o.getModel("handle"),p=o.get("status");if(!h.get("show")||!p||p==="hide")return n&&r.remove(n),void(this._handle=null);this._handle||(a=!0,n=this._handle=k.createIcon(h.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(f){D.stop(f.event)},onmousedown:_(this._onHandleDragMove,this,0,0),drift:_(this._onHandleDragMove,this),ondragend:_(this._onHandleDragEnd,this)}),r.add(n)),t(n,o,!1),n.setStyle(h.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var d=h.get("size");L.isArray(d)||(d=[d,d]),n.attr("scale",[d[0]/2,d[1]/2]),E.createOrUpdate(this,"_doDispatchAxisPointer",h.get("throttle")||0,"fixRate"),this._moveHandleToValue(s,a)}},_moveHandleToValue:function(s,a){u(this._axisPointerModel,!a&&this._moveAnimation,this._handle,e(this.getHandleTransform(s,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(s,a){var o=this._handle;if(o){this._dragging=!0;var r=this.updateHandleTransform(e(o),[s,a],this._axisModel,this._axisPointerModel);this._payloadInfo=r,o.stopAnimation(),o.attr(e(r)),I(o).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var s=this._payloadInfo,a=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:s.cursorPoint[0],y:s.cursorPoint[1],tooltipOption:s.tooltipOption,axesInfo:[{axisDim:a.axis.dim,axisIndex:a.componentIndex}]})}},_onHandleDragEnd:function(s){if(this._dragging=!1,this._handle){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(s){this._lastValue=null,this._lastStatus=null;var a=s.getZr(),o=this._group,r=this._handle;a&&o&&(this._lastGraphicKey=null,o&&a.remove(o),r&&a.remove(r),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(s,a,o){return{x:s[o=o||0],y:s[1-o],width:a[o],height:a[1-o]}}},g.prototype.constructor=g,R.enableClassExtend(g);var i=g;W.exports=i},97326:(W,G,T)=>{var L=T(47329),R=T(75539),k=T(49069),O=T(11726),D=L.extend({makeElOption:function(g,u,c,l,e){var t=c.axis,i=t.grid,s=l.get("type"),a=E(i,t).getOtherAxis(t).getGlobalExtent(),o=t.toGlobalCoord(t.dataToCoord(u,!0));if(s&&s!=="none"){var r=R.buildElStyle(l),n=I[s](t,o,a);n.style=r,g.graphicKey=n.type,g.pointer=n}var h=k.layout(i.model,c);R.buildCartesianSingleLabelElOption(u,g,h,c,l,e)},getHandleTransform:function(g,u,c){var l=k.layout(u.axis.grid.model,u,{labelInside:!1});return l.labelMargin=c.get("handle.margin"),{position:R.getTransformedPosition(u.axis,g,l),rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(g,u,c,l){var e=c.axis,t=e.grid,i=e.getGlobalExtent(!0),s=E(t,e).getOtherAxis(e).getGlobalExtent(),a=e.dim==="x"?0:1,o=g.position;o[a]+=u[a],o[a]=Math.min(i[1],o[a]),o[a]=Math.max(i[0],o[a]);var r=(s[1]+s[0])/2,n=[r,r];return n[a]=o[a],{position:o,rotation:g.rotation,cursorPoint:n,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][a]}}});function E(g,u){var c={};return c[u.dim+"AxisIndex"]=u.index,g.getCartesian(c)}var I={line:function(g,u,c){return{type:"Line",subPixelOptimize:!0,shape:R.makeLineShape([u,c[0]],[u,c[1]],S(g))}},shadow:function(g,u,c){var l=Math.max(1,g.getBandWidth()),e=c[1]-c[0];return{type:"Rect",shape:R.makeRectShape([u-l/2,c[0]],[l,e],S(g))}}};function S(g){return g.dim==="x"?0:1}O.registerAxisPointerClass("CartesianAxisPointer",D);var _=D;W.exports=_},72432:(W,G,T)=>{var L=T(78988),R=T(47329),k=T(51177),O=T(75539),D=T(32892),E=T(58608),I=T(11726),S=R.extend({makeElOption:function(u,c,l,e,t){var i=l.axis;i.dim==="angle"&&(this.animationThreshold=Math.PI/18);var s,a=i.polar,o=a.getOtherAxis(i).getExtent();s=i["dataTo"+L.capitalFirst(i.dim)](c);var r=e.get("type");if(r&&r!=="none"){var n=O.buildElStyle(e),h=_[r](i,a,s,o,n);h.style=n,u.graphicKey=h.type,u.pointer=h}var p=function(d,f,v,m,y){var x=f.axis,w=x.dataToCoord(d),M=m.getAngleAxis().getExtent()[0];M=M/180*Math.PI;var C,A,P,b=m.getRadiusAxis().getExtent();if(x.dim==="radius"){var N=D.create();D.rotate(N,N,M),D.translate(N,N,[m.cx,m.cy]),C=k.applyTransform([w,-y],N);var B=f.getModel("axisLabel").get("rotate")||0,z=E.innerTextLayout(M,B*Math.PI/180,-1);A=z.textAlign,P=z.textVerticalAlign}else{var F=b[1];C=m.coordToPoint([F+y,w]);var V=m.cx,H=m.cy;A=Math.abs(C[0]-V)/F<.3?"center":C[0]>V?"left":"right",P=Math.abs(C[1]-H)/F<.3?"middle":C[1]>H?"top":"bottom"}return{position:C,align:A,verticalAlign:P}}(c,l,0,a,e.get("label.margin"));O.buildLabelElOption(u,l,e,t,p)}}),_={line:function(u,c,l,e,t){return u.dim==="angle"?{type:"Line",shape:O.makeLineShape(c.coordToPoint([e[0],l]),c.coordToPoint([e[1],l]))}:{type:"Circle",shape:{cx:c.cx,cy:c.cy,r:l}}},shadow:function(u,c,l,e,t){var i=Math.max(1,u.getBandWidth()),s=Math.PI/180;return u.dim==="angle"?{type:"Sector",shape:O.makeSectorShape(c.cx,c.cy,e[0],e[1],(-l-i/2)*s,(i/2-l)*s)}:{type:"Sector",shape:O.makeSectorShape(c.cx,c.cy,l-i/2,l+i/2,0,2*Math.PI)}}};I.registerAxisPointerClass("PolarAxisPointer",S);var g=S;W.exports=g},16795:(W,G,T)=>{var L=T(47329),R=T(75539),k=T(48337),O=T(11726),D=["x","y"],E=["width","height"],I=L.extend({makeElOption:function(c,l,e,t,i){var s=e.axis,a=s.coordinateSystem,o=g(a,1-_(s)),r=a.dataToPoint(l)[0],n=t.get("type");if(n&&n!=="none"){var h=R.buildElStyle(t),p=S[n](s,r,o);p.style=h,c.graphicKey=p.type,c.pointer=p}var d=k.layout(e);R.buildCartesianSingleLabelElOption(l,c,d,e,t,i)},getHandleTransform:function(c,l,e){var t=k.layout(l,{labelInside:!1});return t.labelMargin=e.get("handle.margin"),{position:R.getTransformedPosition(l.axis,c,t),rotation:t.rotation+(t.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(c,l,e,t){var i=e.axis,s=i.coordinateSystem,a=_(i),o=g(s,a),r=c.position;r[a]+=l[a],r[a]=Math.min(o[1],r[a]),r[a]=Math.max(o[0],r[a]);var n=g(s,1-a),h=(n[1]+n[0])/2,p=[h,h];return p[a]=r[a],{position:r,rotation:c.rotation,cursorPoint:p,tooltipOption:{verticalAlign:"middle"}}}}),S={line:function(c,l,e){return{type:"Line",subPixelOptimize:!0,shape:R.makeLineShape([l,e[0]],[l,e[1]],_(c))}},shadow:function(c,l,e){var t=c.getBandWidth(),i=e[1]-e[0];return{type:"Rect",shape:R.makeRectShape([l-t/2,e[0]],[t,i],_(c))}}};function _(c){return c.isHorizontal()?0:1}function g(c,l){var e=c.getRect();return[e[D[l]],e[D[l]]+e[E[l]]]}O.registerAxisPointerClass("SingleAxisPointer",I);var u=I;W.exports=u},96472:(W,G,T)=>{var L=T(33051),R=T(32234).makeInner,k=T(18490),O=T(92448),D=L.each,E=L.curry,I=R();function S(l,e,t,i,s){var a=l.axis;if(!a.scale.isBlank()&&a.containData(e))if(l.involveSeries){var o=function(h,p){var d=p.axis,f=d.dim,v=h,m=[],y=Number.MAX_VALUE,x=-1;return D(p.seriesModels,function(w,M){var C,A,P=w.getData().mapDimension(f,!0);if(w.getAxisTooltipData){var b=w.getAxisTooltipData(P,h,d);A=b.dataIndices,C=b.nestestValue}else{if(!(A=w.getData().indicesOfNearest(P[0],h,d.type==="category"?.5:null)).length)return;C=w.getData().get(P[0],A[0])}if(C!=null&&isFinite(C)){var N=h-C,B=Math.abs(N);B<=y&&((B<y||N>=0&&x<0)&&(y=B,x=N,v=C,m.length=0),D(A,function(z){m.push({seriesIndex:w.seriesIndex,dataIndexInside:z,dataIndex:w.getData().getRawIndex(z)})}))}}),{payloadBatch:m,snapToValue:v}}(e,l),r=o.payloadBatch,n=o.snapToValue;r[0]&&s.seriesIndex==null&&L.extend(s,r[0]),!i&&l.snap&&a.containData(n)&&n!=null&&(e=n),t.showPointer(l,e,r,s),t.showTooltip(l,o,n)}else t.showPointer(l,e)}function _(l,e,t,i){l[e.key]={value:t,payloadBatch:i}}function g(l,e,t,i){var s=t.payloadBatch,a=e.axis,o=a.model,r=e.axisPointerModel;if(e.triggerTooltip&&s.length){var n=e.coordSys.model,h=k.makeKey(n),p=l.map[h];p||(p=l.map[h]={coordSysId:n.id,coordSysIndex:n.componentIndex,coordSysType:n.type,coordSysMainType:n.mainType,dataByAxis:[]},l.list.push(p)),p.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:i,valueLabelOpt:{precision:r.get("label.precision"),formatter:r.get("label.formatter")},seriesDataIndices:s.slice()})}}function u(l){var e=l.axis.model,t={},i=t.axisDim=l.axis.dim;return t.axisIndex=t[i+"AxisIndex"]=e.componentIndex,t.axisName=t[i+"AxisName"]=e.name,t.axisId=t[i+"AxisId"]=e.id,t}function c(l){return!l||l[0]==null||isNaN(l[0])||l[1]==null||isNaN(l[1])}W.exports=function(l,e,t){var i=l.currTrigger,s=[l.x,l.y],a=l,o=l.dispatchAction||L.bind(t.dispatchAction,t),r=e.getComponent("axisPointer").coordSysAxesInfo;if(r){c(s)&&(s=O({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var n=c(s),h=a.axesInfo,p=r.axesInfo,d=i==="leave"||c(s),f={},v={},m={list:[],map:{}},y={showPointer:E(_,v),showTooltip:E(g,m)};D(r.coordSysMap,function(w,M){var C=n||w.containPoint(s);D(r.coordSysAxesInfo[M],function(A,P){var b=A.axis,N=function(z,F){for(var V=0;V<(z||[]).length;V++){var H=z[V];if(F.axis.dim===H.axisDim&&F.axis.model.componentIndex===H.axisIndex)return H}}(h,A);if(!d&&C&&(!h||N)){var B=N&&N.value;B!=null||n||(B=b.pointToData(s)),B!=null&&S(A,B,y,!1,f)}})});var x={};return D(p,function(w,M){var C=w.linkGroup;C&&!v[M]&&D(C.axesInfo,function(A,P){var b=v[P];if(A!==w&&b){var N=b.value;C.mapper&&(N=w.axis.scale.parse(C.mapper(N,u(A),u(w)))),x[w.key]=N}})}),D(x,function(w,M){S(p[M],w,y,!0,f)}),function(w,M,C){var A=C.axesInfo=[];D(M,function(P,b){var N=P.axisPointerModel.option,B=w[b];B?(!P.useHandle&&(N.status="show"),N.value=B.value,N.seriesDataIndices=(B.payloadBatch||[]).slice()):!P.useHandle&&(N.status="hide"),N.status==="show"&&A.push({axisDim:P.axis.dim,axisIndex:P.axis.model.componentIndex,value:N.value})})}(v,p,f),function(w,M,C,A){if(!c(M)&&w.list.length){var P=((w.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};A({type:"showTip",escapeConnect:!0,x:M[0],y:M[1],tooltipOption:C.tooltipOption,position:C.position,dataIndexInside:P.dataIndexInside,dataIndex:P.dataIndex,seriesIndex:P.seriesIndex,dataByCoordSys:w.list})}else A({type:"hideTip"})}(m,s,l,o),function(w,M,C){var A=C.getZr(),P="axisPointerLastHighlights",b=I(A)[P]||{},N=I(A)[P]={};D(w,function(F,V){var H=F.axisPointerModel.option;H.status==="show"&&D(H.seriesDataIndices,function(U){var j=U.seriesIndex+" | "+U.dataIndex;N[j]=U})});var B=[],z=[];L.each(b,function(F,V){!N[V]&&z.push(F)}),L.each(N,function(F,V){!b[V]&&B.push(F)}),z.length&&C.dispatchAction({type:"downplay",escapeConnect:!0,batch:z}),B.length&&C.dispatchAction({type:"highlight",escapeConnect:!0,batch:B})}(p,0,t),f}}},92448:(W,G,T)=>{var L=T(33051),R=T(32234);W.exports=function(k,O){var D,E=[],I=k.seriesIndex;if(I==null||!(D=O.getSeriesByIndex(I)))return{point:[]};var S=D.getData(),_=R.queryDataIndex(S,k);if(_==null||_<0||L.isArray(_))return{point:[]};var g=S.getItemGraphicEl(_),u=D.coordinateSystem;if(D.getTooltipPosition)E=D.getTooltipPosition(_)||[];else if(u&&u.dataToPoint)E=u.dataToPoint(S.getValues(L.map(u.dimensions,function(l){return S.mapDimension(l)}),_,!0))||[];else if(g){var c=g.getBoundingRect().clone();c.applyTransform(g.transform),E=[c.x+c.width/2,c.y+c.height/2]}return{point:E,el:g}}},56996:(W,G,T)=>{var L=T(33051),R=T(66387),k=(0,T(32234).makeInner)(),O=L.each;function D(I,S,_){I.handler("leave",null,_)}function E(I,S,_,g){S.handler(I,_,g)}G.register=function(I,S,_){if(!R.node){var g=S.getZr();k(g).records||(k(g).records={}),function(u,c){function l(e,t){u.on(e,function(i){var s=function(a){var o={showTip:[],hideTip:[]},r=function(n){var h=o[n.type];h?h.push(n):(n.dispatchAction=r,a.dispatchAction(n))};return{dispatchAction:r,pendings:o}}(c);O(k(u).records,function(a){a&&t(a,i,s.dispatchAction)}),function(a,o){var r,n=a.showTip.length,h=a.hideTip.length;n?r=a.showTip[n-1]:h&&(r=a.hideTip[h-1]),r&&(r.dispatchAction=null,o.dispatchAction(r))}(s.pendings,c)})}k(u).initialized||(k(u).initialized=!0,l("click",L.curry(E,"click")),l("mousemove",L.curry(E,"mousemove")),l("globalout",D))}(g,S),(k(g).records[I]||(k(g).records[I]={})).handler=_}},G.unregister=function(I,S){if(!R.node){var _=S.getZr();(k(_).records||{})[I]&&(k(_).records[I]=null)}}},18490:(W,G,T)=>{var L=T(33051),R=T(4272),k=L.each,O=L.curry;function D(_,g){return _==="all"||L.isArray(_)&&L.indexOf(_,g)>=0||_===g}function E(_){var g=(_.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return g&&g.axesInfo[S(_)]}function I(_){return!!_.get("handle.show")}function S(_){return _.type+"||"+_.id}G.collect=function(_,g){var u={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(c,l,e){var t=l.getComponent("tooltip"),i=l.getComponent("axisPointer"),s=i.get("link",!0)||[],a=[];k(e.getCoordinateSystems(),function(o){if(o.axisPointerEnabled){var r=S(o.model),n=c.coordSysAxesInfo[r]={};c.coordSysMap[r]=o;var h=o.model.getModel("tooltip",t);if(k(o.getAxes(),O(v,!1,null)),o.getTooltipAxes&&t&&h.get("show")){var p=h.get("trigger")==="axis",d=h.get("axisPointer.type")==="cross",f=o.getTooltipAxes(h.get("axisPointer.axis"));(p||d)&&k(f.baseAxes,O(v,!d||"cross",p)),d&&k(f.otherAxes,O(v,"cross",!1))}}function v(m,y,x){var w=x.model.getModel("axisPointer",i),M=w.get("show");if(M&&(M!=="auto"||m||I(w))){y==null&&(y=w.get("triggerTooltip")),w=m?function(z,F,V,H,U,j){var X=F.getModel("axisPointer"),Y={};k(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(Z){Y[Z]=L.clone(X.get(Z))}),Y.snap=z.type!=="category"&&!!j,X.get("type")==="cross"&&(Y.type="line");var J=Y.label||(Y.label={});if(J.show==null&&(J.show=!1),U==="cross"){var K=X.get("label.show");if(J.show=K==null||K,!j){var Q=Y.lineStyle=X.get("crossStyle");Q&&L.defaults(J,Q.textStyle)}}return z.model.getModel("axisPointer",new R(Y,V,H))}(x,h,i,l,m,y):w;var C=w.get("snap"),A=S(x.model),P=y||C||x.type==="category",b=c.axesInfo[A]={key:A,axis:x,coordSys:o,axisPointerModel:w,triggerTooltip:y,involveSeries:P,snap:C,useHandle:I(w),seriesModels:[]};n[A]=b,c.seriesInvolved|=P;var N=function(z,F){for(var V=F.model,H=F.dim,U=0;U<z.length;U++){var j=z[U]||{};if(D(j[H+"AxisId"],V.id)||D(j[H+"AxisIndex"],V.componentIndex)||D(j[H+"AxisName"],V.name))return U}}(s,x);if(N!=null){var B=a[N]||(a[N]={axesInfo:{}});B.axesInfo[A]=b,B.mapper=s[N].mapper,b.linkGroup=B}}}})}(u,_,g),u.seriesInvolved&&function(c,l){l.eachSeries(function(e){var t=e.coordinateSystem,i=e.get("tooltip.trigger",!0),s=e.get("tooltip.show",!0);t&&i!=="none"&&i!==!1&&i!=="item"&&s!==!1&&e.get("axisPointer.show",!0)!==!1&&k(c.coordSysAxesInfo[S(t.model)],function(a){var o=a.axis;t.getAxis(o.dim)===o&&(a.seriesModels.push(e),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=e.getData().count())})},this)}(u,_),u},G.fixValue=function(_){var g=E(_);if(g){var u=g.axisPointerModel,c=g.axis.scale,l=u.option,e=u.get("status"),t=u.get("value");t!=null&&(t=c.parse(t));var i=I(u);e==null&&(l.status=i?"show":"hide");var s=c.getExtent().slice();s[0]>s[1]&&s.reverse(),(t==null||t>s[1])&&(t=s[1]),t<s[0]&&(t=s[0]),l.value=t,i&&(l.status=g.axis.scale.isBlank()?"hide":"show")}},G.getAxisInfo=E,G.getAxisPointerModel=function(_){var g=E(_);return g&&g.axisPointerModel},G.makeKey=S},75539:(W,G,T)=>{var L=T(33051),R=T(51177),k=T(80423),O=T(78988),D=T(32892),E=T(97980),I=T(58608);function S(u,c,l,e,t){var i=_(l.get("value"),c.axis,c.ecModel,l.get("seriesDataIndices"),{precision:l.get("label.precision"),formatter:l.get("label.formatter")}),s=l.getModel("label"),a=O.normalizeCssArray(s.get("padding")||0),o=s.getFont(),r=k.getBoundingRect(i,o),n=t.position,h=r.width+a[1]+a[3],p=r.height+a[0]+a[2],d=t.align;d==="right"&&(n[0]-=h),d==="center"&&(n[0]-=h/2);var f=t.verticalAlign;f==="bottom"&&(n[1]-=p),f==="middle"&&(n[1]-=p/2),function(m,y,x,w){var M=w.getWidth(),C=w.getHeight();m[0]=Math.min(m[0]+y,M)-y,m[1]=Math.min(m[1]+x,C)-x,m[0]=Math.max(m[0],0),m[1]=Math.max(m[1],0)}(n,h,p,e);var v=s.get("backgroundColor");v&&v!=="auto"||(v=c.get("axisLine.lineStyle.color")),u.label={shape:{x:0,y:0,width:h,height:p,r:s.get("borderRadius")},position:n.slice(),style:{text:i,textFont:o,textFill:s.getTextColor(),textPosition:"inside",textPadding:a,fill:v,stroke:s.get("borderColor")||"transparent",lineWidth:s.get("borderWidth")||0,shadowBlur:s.get("shadowBlur"),shadowColor:s.get("shadowColor"),shadowOffsetX:s.get("shadowOffsetX"),shadowOffsetY:s.get("shadowOffsetY")},z2:10}}function _(u,c,l,e,t){u=c.scale.parse(u);var i=c.scale.getLabel(u,{precision:t.precision}),s=t.formatter;if(s){var a={value:E.getAxisRawValue(c,u),axisDimension:c.dim,axisIndex:c.index,seriesData:[]};L.each(e,function(o){var r=l.getSeriesByIndex(o.seriesIndex),n=o.dataIndexInside,h=r&&r.getDataParams(n);h&&a.seriesData.push(h)}),L.isString(s)?i=s.replace("{value}",i):L.isFunction(s)&&(i=s(a))}return i}function g(u,c,l){var e=D.create();return D.rotate(e,e,l.rotation),D.translate(e,e,l.position),R.applyTransform([u.dataToCoord(c),(l.labelOffset||0)+(l.labelDirection||1)*(l.labelMargin||0)],e)}G.buildElStyle=function(u){var c,l=u.get("type"),e=u.getModel(l+"Style");return l==="line"?(c=e.getLineStyle()).fill=null:l==="shadow"&&((c=e.getAreaStyle()).stroke=null),c},G.buildLabelElOption=S,G.getValueLabel=_,G.getTransformedPosition=g,G.buildCartesianSingleLabelElOption=function(u,c,l,e,t,i){var s=I.innerTextLayout(l.rotation,0,l.labelDirection);l.labelMargin=t.get("label.margin"),S(c,e,t,i,{position:g(e.axis,u,l),align:s.textAlign,verticalAlign:s.textVerticalAlign})},G.makeLineShape=function(u,c,l){return{x1:u[l=l||0],y1:u[1-l],x2:c[l],y2:c[1-l]}},G.makeRectShape=function(u,c,l){return{x:u[l=l||0],y:u[1-l],width:c[l],height:c[1-l]}},G.makeSectorShape=function(u,c,l,e,t,i){return{cx:u,cy:c,r0:l,r:e,startAngle:t,endAngle:i,clockwise:!0}}},60517:(W,G,T)=>{var L=T(33051),R=T(51177),k=T(4272),O=T(11726),D=T(58608),E=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function I(u,c,l){c[1]>c[0]&&(c=c.slice().reverse());var e=u.coordToPoint([c[0],l]),t=u.coordToPoint([c[1],l]);return{x1:e[0],y1:e[1],x2:t[0],y2:t[1]}}function S(u){return u.getRadiusAxis().inverse?0:1}function _(u){var c=u[0],l=u[u.length-1];c&&l&&Math.abs(Math.abs(c.coord-l.coord)-360)<1e-4&&u.pop()}var g=O.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(u,c){if(this.group.removeAll(),u.get("show")){var l=u.axis,e=l.polar,t=e.getRadiusAxis().getExtent(),i=l.getTicksCoords(),s=l.getMinorTicksCoords(),a=L.map(l.getViewLabels(),function(o){return(o=L.clone(o)).coord=l.dataToCoord(o.tickValue),o});_(a),_(i),L.each(E,function(o){!u.get(o+".show")||l.scale.isBlank()&&o!=="axisLine"||this["_"+o](u,e,i,s,t,a)},this)}},_axisLine:function(u,c,l,e,t){var i,s=u.getModel("axisLine.lineStyle"),a=S(c),o=a?0:1;(i=t[o]===0?new R.Circle({shape:{cx:c.cx,cy:c.cy,r:t[a]},style:s.getLineStyle(),z2:1,silent:!0}):new R.Ring({shape:{cx:c.cx,cy:c.cy,r:t[a],r0:t[o]},style:s.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(i)},_axisTick:function(u,c,l,e,t){var i=u.getModel("axisTick"),s=(i.get("inside")?-1:1)*i.get("length"),a=t[S(c)],o=L.map(l,function(r){return new R.Line({shape:I(c,[a,a+s],r.coord)})});this.group.add(R.mergePath(o,{style:L.defaults(i.getModel("lineStyle").getLineStyle(),{stroke:u.get("axisLine.lineStyle.color")})}))},_minorTick:function(u,c,l,e,t){if(e.length){for(var i=u.getModel("axisTick"),s=u.getModel("minorTick"),a=(i.get("inside")?-1:1)*s.get("length"),o=t[S(c)],r=[],n=0;n<e.length;n++)for(var h=0;h<e[n].length;h++)r.push(new R.Line({shape:I(c,[o,o+a],e[n][h].coord)}));this.group.add(R.mergePath(r,{style:L.defaults(s.getModel("lineStyle").getLineStyle(),L.defaults(i.getLineStyle(),{stroke:u.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(u,c,l,e,t,i){var s=u.getCategories(!0),a=u.getModel("axisLabel"),o=a.get("margin"),r=u.get("triggerEvent");L.each(i,function(n,h){var p=a,d=n.tickValue,f=t[S(c)],v=c.coordToPoint([f+o,n.coord]),m=c.cx,y=c.cy,x=Math.abs(v[0]-m)/f<.3?"center":v[0]>m?"left":"right",w=Math.abs(v[1]-y)/f<.3?"middle":v[1]>y?"top":"bottom";s&&s[d]&&s[d].textStyle&&(p=new k(s[d].textStyle,a,a.ecModel));var M=new R.Text({silent:D.isLabelSilent(u)});this.group.add(M),R.setTextStyle(M.style,p,{x:v[0],y:v[1],textFill:p.getTextColor()||u.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:x,textVerticalAlign:w}),r&&(M.eventData=D.makeAxisEventDataBase(u),M.eventData.targetType="axisLabel",M.eventData.value=n.rawLabel)},this)},_splitLine:function(u,c,l,e,t){var i=u.getModel("splitLine").getModel("lineStyle"),s=i.get("color"),a=0;s=s instanceof Array?s:[s];for(var o=[],r=0;r<l.length;r++){var n=a++%s.length;o[n]=o[n]||[],o[n].push(new R.Line({shape:I(c,t,l[r].coord)}))}for(r=0;r<o.length;r++)this.group.add(R.mergePath(o[r],{style:L.defaults({stroke:s[r%s.length]},i.getLineStyle()),silent:!0,z:u.get("z")}))},_minorSplitLine:function(u,c,l,e,t){if(e.length){for(var i=u.getModel("minorSplitLine").getModel("lineStyle"),s=[],a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)s.push(new R.Line({shape:I(c,t,e[a][o].coord)}));this.group.add(R.mergePath(s,{style:i.getLineStyle(),silent:!0,z:u.get("z")}))}},_splitArea:function(u,c,l,e,t){if(l.length){var i=u.getModel("splitArea").getModel("areaStyle"),s=i.get("color"),a=0;s=s instanceof Array?s:[s];for(var o=[],r=Math.PI/180,n=-l[0].coord*r,h=Math.min(t[0],t[1]),p=Math.max(t[0],t[1]),d=u.get("clockwise"),f=1;f<l.length;f++){var v=a++%s.length;o[v]=o[v]||[],o[v].push(new R.Sector({shape:{cx:c.cx,cy:c.cy,r0:h,r:p,startAngle:n,endAngle:-l[f].coord*r,clockwise:d},silent:!0})),n=-l[f].coord*r}for(f=0;f<o.length;f++)this.group.add(R.mergePath(o[f],{style:L.defaults({fill:s[f%s.length]},i.getAreaStyle()),silent:!0}))}}});W.exports=g},58608:(W,G,T)=>{var L=T(33051),R=L.retrieve,k=L.defaults,O=L.extend,D=L.each,E=T(78988),I=T(51177),S=T(4272),_=T(85669),g=_.isRadianAroundZero,u=_.remRadian,c=T(41525).createSymbol,l=T(32892),e=T(45280).applyTransform,t=T(97980).shouldShowAllLabels,i=Math.PI,s=function(m,y){this.opt=y,this.axisModel=m,k(y,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new I.Group;var x=new I.Group({position:y.position.slice(),rotation:y.rotation});x.updateTransform(),this._transform=x.transform,this._dumbGroup=x};s.prototype={constructor:s,hasBuilder:function(m){return!!a[m]},add:function(m){a[m].call(this)},getGroup:function(){return this.group}};var a={axisLine:function(){var m=this.opt,y=this.axisModel;if(y.get("axisLine.show")){var x=this.axisModel.axis.getExtent(),w=this._transform,M=[x[0],0],C=[x[1],0];w&&(e(M,M,w),e(C,C,w));var A=O({lineCap:"round"},y.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new I.Line({anid:"line",subPixelOptimize:!0,shape:{x1:M[0],y1:M[1],x2:C[0],y2:C[1]},style:A,strokeContainThreshold:m.strokeContainThreshold||5,silent:!0,z2:1}));var P=y.get("axisLine.symbol"),b=y.get("axisLine.symbolSize"),N=y.get("axisLine.symbolOffset")||0;if(typeof N=="number"&&(N=[N,N]),P!=null){typeof P=="string"&&(P=[P,P]),typeof b!="string"&&typeof b!="number"||(b=[b,b]);var B=b[0],z=b[1];D([{rotate:m.rotation+Math.PI/2,offset:N[0],r:0},{rotate:m.rotation-Math.PI/2,offset:N[1],r:Math.sqrt((M[0]-C[0])*(M[0]-C[0])+(M[1]-C[1])*(M[1]-C[1]))}],function(F,V){if(P[V]!=="none"&&P[V]!=null){var H=c(P[V],-B/2,-z/2,B,z,A.stroke,!0),U=F.r+F.offset,j=[M[0]+U*Math.cos(m.rotation),M[1]-U*Math.sin(m.rotation)];H.attr({rotation:F.rotate,position:j,silent:!0,z2:11}),this.group.add(H)}},this)}}},axisTickLabel:function(){var m=this.axisModel,y=this.opt,x=function(M,C,A){var P=C.axis,b=C.getModel("axisTick");if(b.get("show")&&!P.scale.isBlank()){for(var N=b.getModel("lineStyle"),B=A.tickDirection*b.get("length"),z=f(P.getTicksCoords(),M._transform,B,k(N.getLineStyle(),{stroke:C.get("axisLine.lineStyle.color")}),"ticks"),F=0;F<z.length;F++)M.group.add(z[F]);return z}}(this,m,y),w=function(M,C,A){var P=C.axis;if(R(A.axisLabelShow,C.get("axisLabel.show"))&&!P.scale.isBlank()){var b=C.getModel("axisLabel"),N=b.get("margin"),B=P.getViewLabels(),z=(R(A.labelRotate,b.get("rotate"))||0)*i/180,F=r(A.rotation,z,A.labelDirection),V=C.getCategories&&C.getCategories(!0),H=[],U=n(C),j=C.get("triggerEvent");return D(B,function(X,Y){var J=X.tickValue,K=X.formattedLabel,Q=X.rawLabel,Z=b;V&&V[J]&&V[J].textStyle&&(Z=new S(V[J].textStyle,b,C.ecModel));var q=Z.getTextColor()||C.get("axisLine.lineStyle.color"),tt=[P.dataToCoord(J),A.labelOffset+A.labelDirection*N],$=new I.Text({anid:"label_"+J,position:tt,rotation:F.rotation,silent:U,z2:10});I.setTextStyle($.style,Z,{text:K,textAlign:Z.getShallow("align",!0)||F.textAlign,textVerticalAlign:Z.getShallow("verticalAlign",!0)||Z.getShallow("baseline",!0)||F.textVerticalAlign,textFill:typeof q=="function"?q(P.type==="category"?Q:P.type==="value"?J+"":J,Y):q}),j&&($.eventData=o(C),$.eventData.targetType="axisLabel",$.eventData.value=Q),M._dumbGroup.add($),$.updateTransform(),H.push($),M.group.add($),$.decomposeTransform()}),H}}(this,m,y);(function(M,C,A){if(!t(M.axis)){var P=M.get("axisLabel.showMinLabel"),b=M.get("axisLabel.showMaxLabel");A=A||[];var N=(C=C||[])[0],B=C[1],z=C[C.length-1],F=C[C.length-2],V=A[0],H=A[1],U=A[A.length-1],j=A[A.length-2];P===!1?(h(N),h(V)):p(N,B)&&(P?(h(B),h(H)):(h(N),h(V))),b===!1?(h(z),h(U)):p(F,z)&&(b?(h(F),h(j)):(h(z),h(U)))}})(m,w,x),function(M,C,A){var P=C.axis,b=C.getModel("minorTick");if(b.get("show")&&!P.scale.isBlank()){var N=P.getMinorTicksCoords();if(N.length)for(var B=b.getModel("lineStyle"),z=A.tickDirection*b.get("length"),F=k(B.getLineStyle(),k(C.getModel("axisTick").getLineStyle(),{stroke:C.get("axisLine.lineStyle.color")})),V=0;V<N.length;V++)for(var H=f(N[V],M._transform,z,F,"minorticks_"+V),U=0;U<H.length;U++)M.group.add(H[U])}}(this,m,y)},axisName:function(){var m=this.opt,y=this.axisModel,x=R(m.axisName,y.get("name"));if(x){var w,M,C=y.get("nameLocation"),A=m.nameDirection,P=y.getModel("nameTextStyle"),b=y.get("nameGap")||0,N=this.axisModel.axis.getExtent(),B=N[0]>N[1]?-1:1,z=[C==="start"?N[0]-B*b:C==="end"?N[1]+B*b:(N[0]+N[1])/2,d(C)?m.labelOffset+A*b:0],F=y.get("nameRotate");F!=null&&(F=F*i/180),d(C)?w=r(m.rotation,F!=null?F:m.rotation,A):(w=function(Z,q,tt,$){var rt,et,it=u(tt-Z.rotation),ot=$[0]>$[1],st=q==="start"&&!ot||q!=="start"&&ot;return g(it-i/2)?(et=st?"bottom":"top",rt="center"):g(it-1.5*i)?(et=st?"top":"bottom",rt="center"):(et="middle",rt=it<1.5*i&&it>i/2?st?"left":"right":st?"right":"left"),{rotation:it,textAlign:rt,textVerticalAlign:et}}(m,C,F||0,N),(M=m.axisNameAvailableWidth)!=null&&(M=Math.abs(M/Math.sin(w.rotation)),!isFinite(M)&&(M=null)));var V=P.getFont(),H=y.get("nameTruncate",!0)||{},U=H.ellipsis,j=R(m.nameTruncateMaxWidth,H.maxWidth,M),X=U!=null&&j!=null?E.truncateText(x,j,V,U,{minChar:2,placeholder:H.placeholder}):x,Y=y.get("tooltip",!0),J=y.mainType,K={componentType:J,name:x,$vars:["name"]};K[J+"Index"]=y.componentIndex;var Q=new I.Text({anid:"name",__fullText:x,__truncatedText:X,position:z,rotation:w.rotation,silent:n(y),z2:1,tooltip:Y&&Y.show?O({content:x,formatter:function(){return x},formatterParams:K},Y):null});I.setTextStyle(Q.style,P,{text:X,textFont:V,textFill:P.getTextColor()||y.get("axisLine.lineStyle.color"),textAlign:P.get("align")||w.textAlign,textVerticalAlign:P.get("verticalAlign")||w.textVerticalAlign}),y.get("triggerEvent")&&(Q.eventData=o(y),Q.eventData.targetType="axisName",Q.eventData.name=x),this._dumbGroup.add(Q),Q.updateTransform(),this.group.add(Q),Q.decomposeTransform()}}},o=s.makeAxisEventDataBase=function(m){var y={componentType:m.mainType,componentIndex:m.componentIndex};return y[m.mainType+"Index"]=m.componentIndex,y},r=s.innerTextLayout=function(m,y,x){var w,M,C=u(y-m);return g(C)?(M=x>0?"top":"bottom",w="center"):g(C-i)?(M=x>0?"bottom":"top",w="center"):(M="middle",w=C>0&&C<i?x>0?"right":"left":x>0?"left":"right"),{rotation:C,textAlign:w,textVerticalAlign:M}},n=s.isLabelSilent=function(m){var y=m.get("tooltip");return m.get("silent")||!(m.get("triggerEvent")||y&&y.show)};function h(m){m&&(m.ignore=!0)}function p(m,y,x){var w=m&&m.getBoundingRect().clone(),M=y&&y.getBoundingRect().clone();if(w&&M){var C=l.identity([]);return l.rotate(C,C,-m.rotation),w.applyTransform(l.mul([],C,m.getLocalTransform())),M.applyTransform(l.mul([],C,y.getLocalTransform())),w.intersect(M)}}function d(m){return m==="middle"||m==="center"}function f(m,y,x,w,M){for(var C=[],A=[],P=[],b=0;b<m.length;b++){var N=m[b].coord;A[0]=N,A[1]=0,P[0]=N,P[1]=x,y&&(e(A,A,y),e(P,P,y));var B=new I.Line({anid:M+"_"+m[b].tickValue,subPixelOptimize:!0,shape:{x1:A[0],y1:A[1],x2:P[0],y2:P[1]},style:w,z2:2,silent:!0});C.push(B)}return C}var v=s;W.exports=v},11726:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(18490),k=L.extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(S,_,g,u){this.axisPointerClass&&R.fixValue(S),k.superApply(this,"render",arguments),O(this,S,0,g,0,!0)},updateAxisPointer:function(S,_,g,u,c){O(this,S,0,g,0,!1)},remove:function(S,_){var g=this._axisPointer;g&&g.remove(_),k.superApply(this,"remove",arguments)},dispose:function(S,_){D(this,_),k.superApply(this,"dispose",arguments)}});function O(S,_,g,u,c,l){var e=k.getAxisPointerClass(S.axisPointerClass);if(e){var t=R.getAxisPointerModel(_);t?(S._axisPointer||(S._axisPointer=new e)).render(_,t,u,l):D(S,u)}}function D(S,_,g){var u=S._axisPointer;u&&u.dispose(_,g),S._axisPointer=null}var E=[];k.registerAxisPointerClass=function(S,_){E[S]=_},k.getAxisPointerClass=function(S){return S&&E[S]};var I=k;W.exports=I},42567:(W,G,T)=>{var L=T(33051),R=T(51177),k=T(58608),O=T(11726),D=T(49069),E=T(77956),I=E.rectCoordAxisBuildSplitArea,S=E.rectCoordAxisHandleRemove,_=["axisLine","axisTickLabel","axisName"],g=["splitArea","splitLine","minorSplitLine"],u=O.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(c,l,e,t){this.group.removeAll();var i=this._axisGroup;if(this._axisGroup=new R.Group,this.group.add(this._axisGroup),c.get("show")){var s=c.getCoordSysModel(),a=D.layout(s,c),o=new k(c,a);L.each(_,o.add,o),this._axisGroup.add(o.getGroup()),L.each(g,function(r){c.get(r+".show")&&this["_"+r](c,s)},this),R.groupTransition(i,this._axisGroup,c),u.superCall(this,"render",c,l,e,t)}},remove:function(){S(this)},_splitLine:function(c,l){var e=c.axis;if(!e.scale.isBlank()){var t=c.getModel("splitLine"),i=t.getModel("lineStyle"),s=i.get("color");s=L.isArray(s)?s:[s];for(var a=l.coordinateSystem.getRect(),o=e.isHorizontal(),r=0,n=e.getTicksCoords({tickModel:t}),h=[],p=[],d=i.getLineStyle(),f=0;f<n.length;f++){var v=e.toGlobalCoord(n[f].coord);o?(h[0]=v,h[1]=a.y,p[0]=v,p[1]=a.y+a.height):(h[0]=a.x,h[1]=v,p[0]=a.x+a.width,p[1]=v);var m=r++%s.length,y=n[f].tickValue;this._axisGroup.add(new R.Line({anid:y!=null?"line_"+n[f].tickValue:null,subPixelOptimize:!0,shape:{x1:h[0],y1:h[1],x2:p[0],y2:p[1]},style:L.defaults({stroke:s[m]},d),silent:!0}))}}},_minorSplitLine:function(c,l){var e=c.axis,t=c.getModel("minorSplitLine").getModel("lineStyle"),i=l.coordinateSystem.getRect(),s=e.isHorizontal(),a=e.getMinorTicksCoords();if(a.length)for(var o=[],r=[],n=t.getLineStyle(),h=0;h<a.length;h++)for(var p=0;p<a[h].length;p++){var d=e.toGlobalCoord(a[h][p].coord);s?(o[0]=d,o[1]=i.y,r[0]=d,r[1]=i.y+i.height):(o[0]=i.x,o[1]=d,r[0]=i.x+i.width,r[1]=d),this._axisGroup.add(new R.Line({anid:"minor_line_"+a[h][p].tickValue,subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:r[0],y2:r[1]},style:n,silent:!0}))}},_splitArea:function(c,l){I(this,this._axisGroup,c,l)}});u.extend({type:"xAxis"}),u.extend({type:"yAxis"})},20594:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(58608),O=T(63448),D=T(9344),E=T(51177),I=["axisLine","axisTickLabel","axisName"],S=L.extendComponentView({type:"parallelAxis",init:function(g,u){S.superApply(this,"init",arguments),(this._brushController=new O(u.getZr())).on("brush",R.bind(this._onBrush,this))},render:function(g,u,c,l){if(!function(d,f,v){return v&&v.type==="axisAreaSelect"&&f.findComponents({mainType:"parallelAxis",query:v})[0]===d}(g,u,l)){this.axisModel=g,this.api=c,this.group.removeAll();var e=this._axisGroup;if(this._axisGroup=new E.Group,this.group.add(this._axisGroup),g.get("show")){var t=function(d,f){return f.getComponent("parallel",d.get("parallelIndex"))}(g,u),i=t.coordinateSystem,s=g.getAreaSelectStyle(),a=s.width,o=g.axis.dim,r=i.getAxisLayout(o),n=R.extend({strokeContainThreshold:a},r),h=new k(g,n);R.each(I,h.add,h),this._axisGroup.add(h.getGroup()),this._refreshBrushController(n,s,g,t,a,c);var p=l&&l.animation===!1?null:g;E.groupTransition(e,this._axisGroup,p)}}},_refreshBrushController:function(g,u,c,l,e,t){var i=c.axis.getExtent(),s=i[1]-i[0],a=Math.min(30,.1*Math.abs(s)),o=E.BoundingRect.create({x:i[0],y:-e/2,width:s,height:e});o.x-=a,o.width+=2*a,this._brushController.mount({enableGlobalPan:!0,rotation:g.rotation,position:g.position}).setPanels([{panelId:"pl",clipPath:D.makeRectPanelClipPath(o),isTargetByCursor:D.makeRectIsTargetByCursor(o,t,l),getLinearBrushOtherExtent:D.makeLinearBrushOtherExtent(o,0)}]).enableBrush({brushType:"lineX",brushStyle:u,removeOnClick:!0}).updateCovers(function(r){var n=r.axis;return R.map(r.activeIntervals,function(h){return{brushType:"lineX",panelId:"pl",range:[n.dataToCoord(h[0],!0),n.dataToCoord(h[1],!0)]}})}(c))},_onBrush:function(g,u){var c=this.axisModel,l=c.axis,e=R.map(g,function(t){return[l.coordToData(t.range[0],!0),l.coordToData(t.range[1],!0)]});(!c.option.realtime===u.isEnd||u.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:c.id,intervals:e})},dispose:function(){this._brushController.dispose()}}),_=S;W.exports=_},81832:(W,G,T)=>{var L=T(33051),R=T(51177),k=T(58608),O=T(11726),D=["axisLine","axisTickLabel","axisName"],E=["splitLine","splitArea","minorSplitLine"],I=O.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(S,_){if(this.group.removeAll(),S.get("show")){var g=S.axis,u=g.polar,c=u.getAngleAxis(),l=g.getTicksCoords(),e=g.getMinorTicksCoords(),t=c.getExtent()[0],i=g.getExtent(),s=function(o,r,n){return{position:[o.cx,o.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:r.getModel("axisLabel").get("rotate"),z2:1}}(u,S,t),a=new k(S,s);L.each(D,a.add,a),this.group.add(a.getGroup()),L.each(E,function(o){S.get(o+".show")&&!g.scale.isBlank()&&this["_"+o](S,u,t,i,l,e)},this)}},_splitLine:function(S,_,g,u,c){var l=S.getModel("splitLine").getModel("lineStyle"),e=l.get("color"),t=0;e=e instanceof Array?e:[e];for(var i=[],s=0;s<c.length;s++){var a=t++%e.length;i[a]=i[a]||[],i[a].push(new R.Circle({shape:{cx:_.cx,cy:_.cy,r:c[s].coord}}))}for(s=0;s<i.length;s++)this.group.add(R.mergePath(i[s],{style:L.defaults({stroke:e[s%e.length],fill:null},l.getLineStyle()),silent:!0}))},_minorSplitLine:function(S,_,g,u,c,l){if(l.length){for(var e=S.getModel("minorSplitLine").getModel("lineStyle"),t=[],i=0;i<l.length;i++)for(var s=0;s<l[i].length;s++)t.push(new R.Circle({shape:{cx:_.cx,cy:_.cy,r:l[i][s].coord}}));this.group.add(R.mergePath(t,{style:L.defaults({fill:null},e.getLineStyle()),silent:!0}))}},_splitArea:function(S,_,g,u,c){if(c.length){var l=S.getModel("splitArea").getModel("areaStyle"),e=l.get("color"),t=0;e=e instanceof Array?e:[e];for(var i=[],s=c[0].coord,a=1;a<c.length;a++){var o=t++%e.length;i[o]=i[o]||[],i[o].push(new R.Sector({shape:{cx:_.cx,cy:_.cy,r0:s,r:c[a].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),s=c[a].coord}for(a=0;a<i.length;a++)this.group.add(R.mergePath(i[a],{style:L.defaults({fill:e[a%e.length]},l.getAreaStyle()),silent:!0}))}}});W.exports=I},55165:(W,G,T)=>{var L=T(33051),R=T(58608),k=T(51177),O=T(48337),D=T(11726),E=T(77956),I=E.rectCoordAxisBuildSplitArea,S=E.rectCoordAxisHandleRemove,_=["axisLine","axisTickLabel","axisName"],g=["splitArea","splitLine"],u=D.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(l,e,t,i){var s=this.group;s.removeAll();var a=this._axisGroup;this._axisGroup=new k.Group;var o=O.layout(l),r=new R(l,o);L.each(_,r.add,r),s.add(this._axisGroup),s.add(r.getGroup()),L.each(g,function(n){l.get(n+".show")&&this["_"+n](l)},this),k.groupTransition(a,this._axisGroup,l),u.superCall(this,"render",l,e,t,i)},remove:function(){S(this)},_splitLine:function(l){var e=l.axis;if(!e.scale.isBlank()){var t=l.getModel("splitLine"),i=t.getModel("lineStyle"),s=i.get("width"),a=i.get("color");a=a instanceof Array?a:[a];for(var o=l.coordinateSystem.getRect(),r=e.isHorizontal(),n=[],h=0,p=e.getTicksCoords({tickModel:t}),d=[],f=[],v=0;v<p.length;++v){var m=e.toGlobalCoord(p[v].coord);r?(d[0]=m,d[1]=o.y,f[0]=m,f[1]=o.y+o.height):(d[0]=o.x,d[1]=m,f[0]=o.x+o.width,f[1]=m);var y=h++%a.length;n[y]=n[y]||[],n[y].push(new k.Line({subPixelOptimize:!0,shape:{x1:d[0],y1:d[1],x2:f[0],y2:f[1]},style:{lineWidth:s},silent:!0}))}for(v=0;v<n.length;++v)this.group.add(k.mergePath(n[v],{style:{stroke:a[v%a.length],lineDash:i.getLineDash(s),lineWidth:s},silent:!0}))}},_splitArea:function(l){I(this,this._axisGroup,l,l)}}),c=u;W.exports=c},77956:(W,G,T)=>{var L=T(33051),R=T(51177);G.rectCoordAxisBuildSplitArea=function(k,O,D,E){var I=D.axis;if(!I.scale.isBlank()){var S=D.getModel("splitArea"),_=S.getModel("areaStyle"),g=_.get("color"),u=E.coordinateSystem.getRect(),c=I.getTicksCoords({tickModel:S,clamp:!0});if(c.length){var l=g.length,e=k.__splitAreaColors,t=L.createHashMap(),i=0;if(e)for(var s=0;s<c.length;s++){var a=e.get(c[s].tickValue);if(a!=null){i=(a+(l-1)*s)%l;break}}var o=I.toGlobalCoord(c[0].coord),r=_.getAreaStyle();for(g=L.isArray(g)?g:[g],s=1;s<c.length;s++){var n,h,p,d,f=I.toGlobalCoord(c[s].coord);I.isHorizontal()?(n=o,h=u.y,p=f-n,d=u.height,o=n+p):(n=u.x,h=o,p=u.width,o=h+(d=f-h));var v=c[s-1].tickValue;v!=null&&t.set(v,i),O.add(new R.Rect({anid:v!=null?"area_"+v:null,shape:{x:n,y:h,width:p,height:d},style:L.defaults({fill:g[i]},r),silent:!0})),i=(i+1)%l}k.__splitAreaColors=t}}},G.rectCoordAxisHandleRemove=function(k){k.__splitAreaColors=null}},8985:(W,G,T)=>{var L=T(70492);L.registerAction({type:"axisAreaSelect",event:"axisAreaSelected"},function(R,k){k.eachComponent({mainType:"parallelAxis",query:R},function(O){O.axis.model.setActiveIntervals(R.intervals)})}),L.registerAction("parallelAxisExpand",function(R,k){k.eachComponent({mainType:"parallel",query:R},function(O){O.setAxisExpand(R)})})},17817:(W,G,T)=>{var L=T(70492),R=T(7832);T(77471),T(22586),T(36793),T(21418),T(2190),L.registerPreprocessor(R)},22586:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(33051),k=T(30801),O=T(4272),D=["#ddd"];function E(S,_){return R.merge({brushType:S.brushType,brushMode:S.brushMode,transformable:S.transformable,brushStyle:new O(S.brushStyle).getItemStyle(),removeOnClick:S.removeOnClick,z:S.z},_,!0)}var I=L.extendComponentModel({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(S,_){var g=this.option;!_&&k.replaceVisualOption(g,S,["inBrush","outOfBrush"]);var u=g.inBrush=g.inBrush||{};g.outOfBrush=g.outOfBrush||{color:D},u.hasOwnProperty("liftZ")||(u.liftZ=5)},setAreas:function(S){S&&(this.areas=R.map(S,function(_){return E(this.option,_)},this))},setBrushOption:function(S){this.brushOption=E(this.option,S),this.brushType=this.brushOption.brushType}});W.exports=I},36793:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(63448),O=T(77471).layoutCovers,D=L.extendComponentView({type:"brush",init:function(I,S){this.ecModel=I,this.api=S,this.model,(this._brushController=new k(S.getZr())).on("brush",R.bind(this._onBrush,this)).mount()},render:function(I){return this.model=I,E.apply(this,arguments)},updateTransform:function(I,S){return O(S),E.apply(this,arguments)},updateView:E,dispose:function(){this._brushController.dispose()},_onBrush:function(I,S){var _=this.model.id;this.model.brushTargetManager.setOutputRanges(I,this.ecModel),(!S.isEnd||S.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:_,areas:R.clone(I),$from:_}),S.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:_,areas:R.clone(I),$from:_})}});function E(I,S,_,g){(!g||g.$from!==I.id)&&this._brushController.setPanels(I.brushTargetManager.makePanelOpts(_)).enableBrush(I.brushOption).updateCovers(I.areas.slice())}W.exports=D},21418:(W,G,T)=>{var L=T(70492);L.registerAction({type:"brush",event:"brush"},function(R,k){k.eachComponent({mainType:"brush",query:R},function(O){O.setAreas(R.areas)})}),L.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),L.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},function(){})},7832:(W,G,T)=>{var L=T(33051),R=["rect","polygon","keep","clear"];W.exports=function(k,O){var D=k&&k.brush;if(L.isArray(D)||(D=D?[D]:[]),D.length){var E=[];L.each(D,function(l){var e=l.hasOwnProperty("toolbox")?l.toolbox:[];e instanceof Array&&(E=E.concat(e))});var I=k&&k.toolbox;L.isArray(I)&&(I=I[0]),I||(I={feature:{}},k.toolbox=[I]);var S,_,g=I.feature||(I.feature={}),u=g.brush||(g.brush={}),c=u.type||(u.type=[]);c.push.apply(c,E),S=c,_={},L.each(S,function(l){_[l]=1}),S.length=0,L.each(_,function(l,e){S.push(e)}),O&&!c.length&&c.push.apply(c,R)}}},95170:(W,G,T)=>{var L=T(40765),R=T(60479),k=T(51177).linePolygonIntersect;function O(I){var S=["x","y"],_=["width","height"];return{point:function(g,u,c){if(g){var l=c.range;return D(g[I],l)}},rect:function(g,u,c){if(g){var l=c.range,e=[g[S[I]],g[S[I]]+g[_[I]]];return e[1]<e[0]&&e.reverse(),D(e[0],l)||D(e[1],l)||D(l[0],e)||D(l[1],e)}}}}function D(I,S){return S[0]<=I&&I<=S[1]}var E={lineX:O(0),lineY:O(1),rect:{point:function(I,S,_){return I&&_.boundingRect.contain(I[0],I[1])},rect:function(I,S,_){return I&&_.boundingRect.intersect(I)}},polygon:{point:function(I,S,_){return I&&_.boundingRect.contain(I[0],I[1])&&L.contain(_.range,I[0],I[1])},rect:function(I,S,_){var g=_.range;if(!I||g.length<=1)return!1;var u=I.x,c=I.y,l=I.width,e=I.height,t=g[0];return!!(L.contain(g,u,c)||L.contain(g,u+l,c)||L.contain(g,u,c+e)||L.contain(g,u+l,c+e)||R.create(I).contain(t[0],t[1])||k(u,c,u+l,c,g)||k(u,c,u,c+e,g)||k(u+l,c,u+l,c+e,g)||k(u,c+e,u+l,c+e,g))||void 0}}};W.exports=E},77471:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(60479),O=T(30801),D=T(95170),E=T(270),I=T(64562),S=["inBrush","outOfBrush"],_="__ecInBrushSelectEvent",g=L.PRIORITY.VISUAL.BRUSH;function u(s){s.eachComponent({mainType:"brush"},function(a){(a.brushTargetManager=new I(a.option,s)).setInputRanges(a.areas,s)})}function c(s,a){if(!s.isDisposed()){var o=s.getZr();o[_]=!0,s.dispatchAction({type:"brushSelect",batch:a}),o[_]=!1}}function l(s,a,o,r){for(var n=0,h=a.length;n<h;n++){var p=a[n];if(s[p.brushType](r,o,p.selectors,p))return!0}}function e(s){var a=s.brushSelector;if(R.isString(a)){var o=[];return R.each(D,function(n,h){o[h]=function(p,d,f,v){var m=d.getItemLayout(p);return n[a](m,f,v)}}),o}if(R.isFunction(a)){var r={};return R.each(D,function(n,h){r[h]=a}),r}return a}L.registerLayout(g,function(s,a,o){s.eachComponent({mainType:"brush"},function(r){o&&o.type==="takeGlobalCursor"&&r.setBrushOption(o.key==="brush"?o.brushOption:{brushType:!1})}),u(s)}),L.registerVisual(g,function(s,a,o){var r,n,h=[];s.eachComponent({mainType:"brush"},function(p,d){var f={brushId:p.id,brushIndex:d,brushName:p.name,areas:R.clone(p.areas),selected:[]};h.push(f);var v=p.option,m=v.brushLink,y=[],x=[],w=[],M=0;d||(r=v.throttleType,n=v.throttleDelay);var C=R.map(p.areas,function(N){return function(B){var z=B.selectors={};return R.each(D[B.brushType],function(F,V){z[V]=function(H){return F(H,z,B)}}),B}(R.defaults({boundingRect:t[N.brushType](N)},N))}),A=O.createVisualMappings(p.option,S,function(N){N.mappingMethod="fixed"});function P(N){return m==="all"||y[N]}function b(N){return!!N.length}R.isArray(m)&&R.each(m,function(N){y[N]=1}),s.eachSeries(function(N,B){var z=w[B]=[];N.subType==="parallel"?function(F,V){var H=F.coordinateSystem;M|=H.hasAxisBrushed(),P(V)&&H.eachActiveState(F.getData(),function(U,j){U==="active"&&(x[j]=1)})}(N,B):function(F,V,H){var U=e(F);if(U&&!function(X,Y){var J=X.option.seriesIndex;return J!=null&&J!=="all"&&(R.isArray(J)?R.indexOf(J,Y)<0:Y!==J)}(p,V)&&(R.each(C,function(X){U[X.brushType]&&p.brushTargetManager.controlSeries(X,F,s)&&H.push(X),M|=b(H)}),P(V)&&b(H))){var j=F.getData();j.each(function(X){l(U,H,j,X)&&(x[X]=1)})}}(N,B,z)}),s.eachSeries(function(N,B){var z={seriesId:N.id,seriesIndex:B,seriesName:N.name,dataIndex:[]};f.selected.push(z);var F=e(N),V=w[B],H=N.getData(),U=P(B)?function(j){return x[j]?(z.dataIndex.push(H.getRawIndex(j)),"inBrush"):"outOfBrush"}:function(j){return l(F,V,H,j)?(z.dataIndex.push(H.getRawIndex(j)),"inBrush"):"outOfBrush"};(P(B)?M:b(V))&&O.applyVisual(S,A,H,U)})}),function(p,d,f,v,m){if(m){var y=p.getZr();y[_]||(y.__ecBrushSelect||(y.__ecBrushSelect=c),E.createOrUpdate(y,"__ecBrushSelect",f,d)(p,v))}}(a,r,n,h,o)});var t={lineX:R.noop,lineY:R.noop,rect:function(s){return i(s.range)},polygon:function(s){for(var a,o=s.range,r=0,n=o.length;r<n;r++){a=a||[[1/0,-1/0],[1/0,-1/0]];var h=o[r];h[0]<a[0][0]&&(a[0][0]=h[0]),h[0]>a[0][1]&&(a[0][1]=h[0]),h[1]<a[1][0]&&(a[1][0]=h[1]),h[1]>a[1][1]&&(a[1][1]=h[1])}return a&&i(a)}};function i(s){return new k(s[0][0],s[1][0],s[0][1]-s[0][0],s[1][1]-s[1][0])}G.layoutCovers=u},58362:(W,G,T)=>{T(74560),T(91724),T(12733)},12733:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(51177),O=T(78988),D=T(85669),E={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"]},I={EN:["S","M","T","W","T","F","S"],CN:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},S=L.extendComponentView({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(_,g,u){var c=this.group;c.removeAll();var l=_.coordinateSystem,e=l.getRangeInfo(),t=l.getOrient();this._renderDayRect(_,e,c),this._renderLines(_,e,t,c),this._renderYearText(_,e,t,c),this._renderMonthText(_,t,c),this._renderWeekText(_,e,t,c)},_renderDayRect:function(_,g,u){for(var c=_.coordinateSystem,l=_.getModel("itemStyle").getItemStyle(),e=c.getCellWidth(),t=c.getCellHeight(),i=g.start.time;i<=g.end.time;i=c.getNextNDay(i,1).time){var s=c.dataToRect([i],!1).tl,a=new k.Rect({shape:{x:s[0],y:s[1],width:e,height:t},cursor:"default",style:l});u.add(a)}},_renderLines:function(_,g,u,c){var l=this,e=_.coordinateSystem,t=_.getModel("splitLine.lineStyle").getLineStyle(),i=_.get("splitLine.show"),s=t.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var a=g.start,o=0;a.time<=g.end.time;o++){n(a.formatedDate),o===0&&(a=e.getDateInfo(g.start.y+"-"+g.start.m));var r=a.date;r.setMonth(r.getMonth()+1),a=e.getDateInfo(r)}function n(h){l._firstDayOfMonth.push(e.getDateInfo(h)),l._firstDayPoints.push(e.dataToRect([h],!1).tl);var p=l._getLinePointsOfOneWeek(_,h,u);l._tlpoints.push(p[0]),l._blpoints.push(p[p.length-1]),i&&l._drawSplitline(p,t,c)}n(e.getNextNDay(g.end.time,1).formatedDate),i&&this._drawSplitline(l._getEdgesPoints(l._tlpoints,s,u),t,c),i&&this._drawSplitline(l._getEdgesPoints(l._blpoints,s,u),t,c)},_getEdgesPoints:function(_,g,u){var c=[_[0].slice(),_[_.length-1].slice()],l=u==="horizontal"?0:1;return c[0][l]=c[0][l]-g/2,c[1][l]=c[1][l]+g/2,c},_drawSplitline:function(_,g,u){var c=new k.Polyline({z2:20,shape:{points:_},style:g});u.add(c)},_getLinePointsOfOneWeek:function(_,g,u){var c=_.coordinateSystem;g=c.getDateInfo(g);for(var l=[],e=0;e<7;e++){var t=c.getNextNDay(g.time,e),i=c.dataToRect([t.time],!1);l[2*t.day]=i.tl,l[2*t.day+1]=i[u==="horizontal"?"bl":"tr"]}return l},_formatterLabel:function(_,g){return typeof _=="string"&&_?O.formatTplSimple(_,g):typeof _=="function"?_(g):g.nameMap},_yearTextPositionControl:function(_,g,u,c,l){g=g.slice();var e=["center","bottom"];c==="bottom"?(g[1]+=l,e=["center","top"]):c==="left"?g[0]-=l:c==="right"?(g[0]+=l,e=["center","top"]):g[1]-=l;var t=0;return c!=="left"&&c!=="right"||(t=Math.PI/2),{rotation:t,position:g,style:{textAlign:e[0],textVerticalAlign:e[1]}}},_renderYearText:function(_,g,u,c){var l=_.getModel("yearLabel");if(l.get("show")){var e=l.get("margin"),t=l.get("position");t||(t=u!=="horizontal"?"top":"left");var i=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],s=(i[0][0]+i[1][0])/2,a=(i[0][1]+i[1][1])/2,o=u==="horizontal"?0:1,r={top:[s,i[o][1]],bottom:[s,i[1-o][1]],left:[i[1-o][0],a],right:[i[o][0],a]},n=g.start.y;+g.end.y>+g.start.y&&(n=n+"-"+g.end.y);var h=l.get("formatter"),p={start:g.start.y,end:g.end.y,nameMap:n},d=this._formatterLabel(h,p),f=new k.Text({z2:30});k.setTextStyle(f.style,l,{text:d}),f.attr(this._yearTextPositionControl(f,r[t],u,t,e)),c.add(f)}},_monthTextPositionControl:function(_,g,u,c,l){var e="left",t="top",i=_[0],s=_[1];return u==="horizontal"?(s+=l,g&&(e="center"),c==="start"&&(t="bottom")):(i+=l,g&&(t="middle"),c==="start"&&(e="right")),{x:i,y:s,textAlign:e,textVerticalAlign:t}},_renderMonthText:function(_,g,u){var c=_.getModel("monthLabel");if(c.get("show")){var l=c.get("nameMap"),e=c.get("margin"),t=c.get("position"),i=c.get("align"),s=[this._tlpoints,this._blpoints];R.isString(l)&&(l=E[l.toUpperCase()]||[]);var a=t==="start"?0:1,o=g==="horizontal"?0:1;e=t==="start"?-e:e;for(var r=i==="center",n=0;n<s[a].length-1;n++){var h=s[a][n].slice(),p=this._firstDayOfMonth[n];if(r){var d=this._firstDayPoints[n];h[o]=(d[o]+s[0][n+1][o])/2}var f=c.get("formatter"),v=l[+p.m-1],m={yyyy:p.y,yy:(p.y+"").slice(2),MM:p.m,M:+p.m,nameMap:v},y=this._formatterLabel(f,m),x=new k.Text({z2:30});R.extend(k.setTextStyle(x.style,c,{text:y}),this._monthTextPositionControl(h,r,g,t,e)),u.add(x)}}},_weekTextPositionControl:function(_,g,u,c,l){var e="center",t="middle",i=_[0],s=_[1],a=u==="start";return g==="horizontal"?(i=i+c+(a?1:-1)*l[0]/2,e=a?"right":"left"):(s=s+c+(a?1:-1)*l[1]/2,t=a?"bottom":"top"),{x:i,y:s,textAlign:e,textVerticalAlign:t}},_renderWeekText:function(_,g,u,c){var l=_.getModel("dayLabel");if(l.get("show")){var e=_.coordinateSystem,t=l.get("position"),i=l.get("nameMap"),s=l.get("margin"),a=e.getFirstDayOfWeek();R.isString(i)&&(i=I[i.toUpperCase()]||[]);var o=e.getNextNDay(g.end.time,7-g.lweek).time,r=[e.getCellWidth(),e.getCellHeight()];s=D.parsePercent(s,r[u==="horizontal"?0:1]),t==="start"&&(o=e.getNextNDay(g.start.time,-(7+g.fweek)).time,s=-s);for(var n=0;n<7;n++){var h,p=e.getNextNDay(o,n),d=e.dataToRect([p.time],!1).center;h=Math.abs((n+a)%7);var f=new k.Text({z2:30});R.extend(k.setTextStyle(f.style,l,{text:i[h]}),this._weekTextPositionControl(d,u,t,s,r)),c.add(f)}}}});W.exports=S},53665:(W,G,T)=>{T(32620),T(68569)},68569:(W,G,T)=>{T(71264),T(42719),T(12159),T(38036),T(70766),T(2536),T(72078)},60953:(W,G,T)=>{T(71264),T(42719),T(12159),T(49498),T(66100),T(2536),T(72078)},32620:(W,G,T)=>{T(71264),T(42719),T(12159),T(3496),T(45578),T(2536),T(72078)},13967:(W,G,T)=>{var L=T(33051),R=T(85669),k=T(6398),O=T(19233),D=L.each,E=R.asc,I=function(g,u,c,l){this._dimName=g,this._axisIndex=u,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=l,this._dataZoomModel=c};function S(g,u){var c=g.getAxisModel(),l=g._percentWindow,e=g._valueWindow;if(l){var t=R.getPixelPrecision(e,[0,500]);t=Math.min(t,20);var i=u||l[0]===0&&l[1]===100;c.setRange(i?null:+e[0].toFixed(t),i?null:+e[1].toFixed(t))}}I.prototype={constructor:I,hostedBy:function(g){return this._dataZoomModel===g},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var g=[],u=this.ecModel;return u.eachSeries(function(c){if(k.isCoordSupported(c.get("coordinateSystem"))){var l=this._dimName,e=u.queryComponents({mainType:l+"Axis",index:c.get(l+"AxisIndex"),id:c.get(l+"AxisId")})[0];this._axisIndex===(e&&e.componentIndex)&&g.push(c)}},this),g},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var g,u,c,l=this._dimName,e=this.ecModel,t=this.getAxisModel();return l==="x"||l==="y"?(u="gridIndex",g=l==="x"?"y":"x"):(u="polarIndex",g=l==="angle"?"radius":"angle"),e.eachComponent(g+"Axis",function(i){(i.get(u)||0)===(t.get(u)||0)&&(c=i)}),c},getMinMaxSpan:function(){return L.clone(this._minMaxSpan)},calculateDataWindow:function(g){var u,c=this._dataExtent,l=this.getAxisModel().axis.scale,e=this._dataZoomModel.getRangePropMode(),t=[0,100],i=[],s=[];D(["start","end"],function(r,n){var h=g[r],p=g[r+"Value"];e[n]==="percent"?(h==null&&(h=t[n]),p=l.parse(R.linearMap(h,t,c))):(u=!0,p=p==null?c[n]:l.parse(p),h=R.linearMap(p,c,t)),s[n]=p,i[n]=h}),E(s),E(i);var a=this._minMaxSpan;function o(r,n,h,p,d){var f=d?"Span":"ValueSpan";O(0,r,h,"all",a["min"+f],a["max"+f]);for(var v=0;v<2;v++)n[v]=R.linearMap(r[v],h,p,!0),d&&(n[v]=l.parse(n[v]))}return u?o(s,i,c,t,!1):o(i,s,t,c,!0),{valueWindow:s,percentWindow:i}},reset:function(g){if(g===this._dataZoomModel){var u=this.getTargetSeriesModels();this._dataExtent=(l=this,e=this._dimName,t=[1/0,-1/0],D(u,function(i){var s=i.getData();s&&D(s.mapDimension(e,!0),function(a){var o=s.getApproximateExtent(a);o[0]<t[0]&&(t[0]=o[0]),o[1]>t[1]&&(t[1]=o[1])})}),t[1]<t[0]&&(t=[NaN,NaN]),function(i,s){var a=i.getAxisModel(),o=a.getMin(!0),r=a.get("type")==="category",n=r&&a.getCategories().length;o!=null&&o!=="dataMin"&&typeof o!="function"?s[0]=o:r&&(s[0]=n>0?0:NaN);var h=a.getMax(!0);h!=null&&h!=="dataMax"&&typeof h!="function"?s[1]=h:r&&(s[1]=n>0?n-1:NaN),a.get("scale",!0)||(s[0]>0&&(s[0]=0),s[1]<0&&(s[1]=0))}(l,t),t),function(i){var s=i._minMaxSpan={},a=i._dataZoomModel,o=i._dataExtent;D(["min","max"],function(r){var n=a.get(r+"Span"),h=a.get(r+"ValueSpan");h!=null&&(h=i.getAxisModel().axis.scale.parse(h)),h!=null?n=R.linearMap(o[0]+h,o,[0,100],!0):n!=null&&(h=R.linearMap(n,[0,100],o,!0)-o[0]),s[r+"Span"]=n,s[r+"ValueSpan"]=h})}(this);var c=this.calculateDataWindow(g.settledOption);this._valueWindow=c.valueWindow,this._percentWindow=c.percentWindow,S(this)}var l,e,t},restore:function(g){g===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,S(this,!0))},filterData:function(g,u){if(g===this._dataZoomModel){var c=this._dimName,l=this.getTargetSeriesModels(),e=g.get("filterMode"),t=this._valueWindow;e!=="none"&&D(l,function(i){var s=i.getData(),a=s.mapDimension(c,!0);a.length&&(e==="weakFilter"?s.filterSelf(function(o){for(var r,n,h,p=0;p<a.length;p++){var d=s.get(a[p],o),f=!isNaN(d),v=d<t[0],m=d>t[1];if(f&&!v&&!m)return!0;f&&(h=!0),v&&(r=!0),m&&(n=!0)}return h&&r&&n}):D(a,function(o){if(e==="empty")i.setData(s=s.map(o,function(n){return function(h){return h>=t[0]&&h<=t[1]}(n)?n:NaN}));else{var r={};r[o]=t,s.selectRange(r)}}),D(a,function(o){s.setApproximateExtent(t,o)}))})}}};var _=I;W.exports=_},42719:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(33051),k=T(66387),O=T(32234),D=T(6398),E=T(13967),I=R.each,S=D.eachAxisDim;function _(c){var l={};return I(["start","end","startValue","endValue","throttle"],function(e){c.hasOwnProperty(e)&&(l[e]=c[e])}),l}function g(c,l){var e=c._rangePropMode,t=c.get("rangeMode");I([["start","startValue"],["end","endValue"]],function(i,s){var a=l[i[0]]!=null,o=l[i[1]]!=null;a&&!o?e[s]="percent":!a&&o?e[s]="value":t?e[s]=t[s]:a&&(e[s]="percent")})}var u=L.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(c,l,e){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var t=_(c);this.settledOption=t,this.mergeDefaultAndTheme(c,e),this.doInit(t)},mergeOption:function(c){var l=_(c);R.merge(this.option,c,!0),R.merge(this.settledOption,l,!0),this.doInit(l)},doInit:function(c){var l=this.option;k.canvasSupported||(l.realtime=!1),this._setDefaultThrottle(c),g(this,c);var e=this.settledOption;I([["start","startValue"],["end","endValue"]],function(t,i){this._rangePropMode[i]==="value"&&(l[t[0]]=e[t[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var c=this._axisProxies;this.eachTargetAxis(function(l,e,t,i){var s=this.dependentModels[l.axis][e],a=s.__dzAxisProxy||(s.__dzAxisProxy=new E(l.name,e,this,i));c[l.name+"_"+e]=a},this)},_resetTarget:function(){var c=this.option,l=this._judgeAutoMode();S(function(e){var t=e.axisIndex;c[t]=O.normalizeToArray(c[t])},this),l==="axisIndex"?this._autoSetAxisIndex():l==="orient"&&this._autoSetOrient()},_judgeAutoMode:function(){var c=this.option,l=!1;S(function(t){c[t.axisIndex]!=null&&(l=!0)},this);var e=c.orient;return e==null&&l?"orient":l?void 0:(e==null&&(c.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var c=!0,l=this.get("orient",!0),e=this.option,t=this.dependentModels;if(c){var i=l==="vertical"?"y":"x";t[i+"Axis"].length?(e[i+"AxisIndex"]=[0],c=!1):I(t.singleAxis,function(s){c&&s.get("orient",!0)===l&&(e.singleAxisIndex=[s.componentIndex],c=!1)})}c&&S(function(s){if(c){var a=[],o=this.dependentModels[s.axis];if(o.length&&!a.length)for(var r=0,n=o.length;r<n;r++)o[r].get("type")==="category"&&a.push(r);e[s.axisIndex]=a,a.length&&(c=!1)}},this),c&&this.ecModel.eachSeries(function(s){this._isSeriesHasAllAxesTypeOf(s,"value")&&S(function(a){var o=e[a.axisIndex],r=s.get(a.axisIndex),n=s.get(a.axisId);r=s.ecModel.queryComponents({mainType:a.axis,index:r,id:n})[0].componentIndex,R.indexOf(o,r)<0&&o.push(r)})},this)},_autoSetOrient:function(){var c;this.eachTargetAxis(function(l){!c&&(c=l.name)},this),this.option.orient=c==="y"?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(c,l){var e=!0;return S(function(t){var i=c.get(t.axisIndex),s=this.dependentModels[t.axis][i];s&&s.get("type")===l||(e=!1)},this),e},_setDefaultThrottle:function(c){if(c.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var l=this.ecModel.option;this.option.throttle=l.animation&&l.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var c;return S(function(l){if(c==null){var e=this.get(l.axisIndex);e.length&&(c=this.dependentModels[l.axis][e[0]])}},this),c},eachTargetAxis:function(c,l){var e=this.ecModel;S(function(t){I(this.get(t.axisIndex),function(i){c.call(l,t,i,this,e)},this)},this)},getAxisProxy:function(c,l){return this._axisProxies[c+"_"+l]},getAxisModel:function(c,l){var e=this.getAxisProxy(c,l);return e&&e.getAxisModel()},setRawRange:function(c){var l=this.option,e=this.settledOption;I([["start","startValue"],["end","endValue"]],function(t){c[t[0]]==null&&c[t[1]]==null||(l[t[0]]=e[t[0]]=c[t[0]],l[t[1]]=e[t[1]]=c[t[1]])},this),g(this,c)},setCalculatedRange:function(c){var l=this.option;I(["start","startValue","end","endValue"],function(e){l[e]=c[e]})},getPercentRange:function(){var c=this.findRepresentativeAxisProxy();if(c)return c.getDataPercentWindow()},getValueRange:function(c,l){if(c!=null||l!=null)return this.getAxisProxy(c,l).getDataValueWindow();var e=this.findRepresentativeAxisProxy();return e?e.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(c){if(c)return c.__dzAxisProxy;var l=this._axisProxies;for(var e in l)if(l.hasOwnProperty(e)&&l[e].hostedBy(this))return l[e];for(var e in l)if(l.hasOwnProperty(e)&&!l[e].hostedBy(this))return l[e]},getRangePropMode:function(){return this._rangePropMode.slice()}});W.exports=u},12159:(W,G,T)=>{var L=T(33166).extend({type:"dataZoom",render:function(R,k,O,D){this.dataZoomModel=R,this.ecModel=k,this.api=O},getTargetCoordInfo:function(){var R=this.dataZoomModel,k=this.ecModel,O={};return R.eachTargetAxis(function(D,E){var I=k.getComponent(D.axis,E);if(I){var S=I.getCoordSysModel();S&&function(_,g,u,c){for(var l,e=0;e<u.length;e++)if(u[e].model===_){l=u[e];break}l||u.push(l={model:_,axisModels:[],coordIndex:c}),l.axisModels.push(g)}(S,I,O[S.mainType]||(O[S.mainType]=[]),S.componentIndex)}},this),O}});W.exports=L},38036:(W,G,T)=>{var L=T(42719).extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});W.exports=L},70766:(W,G,T)=>{var L=T(33051),R=T(12159),k=T(19233),O=T(15992),D=L.bind,E=R.extend({type:"dataZoom.inside",init:function(u,c){this._range},render:function(u,c,l,e){E.superApply(this,"render",arguments),this._range=u.getPercentRange(),L.each(this.getTargetCoordInfo(),function(t,i){var s=L.map(t,function(a){return O.generateCoordId(a.model)});L.each(t,function(a){var o=a.model,r={};L.each(["pan","zoom","scrollMove"],function(n){r[n]=D(I[n],this,a,i)},this),O.register(l,{coordId:O.generateCoordId(o),allCoordIds:s,containsPoint:function(n,h,p){return o.coordinateSystem.containPoint([h,p])},dataZoomId:u.id,dataZoomModel:u,getRange:r})},this)},this)},dispose:function(){O.unregister(this.api,this.dataZoomModel.id),E.superApply(this,"dispose",arguments),this._range=null}}),I={zoom:function(u,c,l,e){var t=this._range,i=t.slice(),s=u.axisModels[0];if(s){var a=_[c](null,[e.originX,e.originY],s,l,u),o=(a.signal>0?a.pixelStart+a.pixelLength-a.pixel:a.pixel-a.pixelStart)/a.pixelLength*(i[1]-i[0])+i[0],r=Math.max(1/e.scale,0);i[0]=(i[0]-o)*r+o,i[1]=(i[1]-o)*r+o;var n=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return k(0,i,[0,100],0,n.minSpan,n.maxSpan),this._range=i,t[0]!==i[0]||t[1]!==i[1]?i:void 0}},pan:S(function(u,c,l,e,t,i){var s=_[e]([i.oldX,i.oldY],[i.newX,i.newY],c,t,l);return s.signal*(u[1]-u[0])*s.pixel/s.pixelLength}),scrollMove:S(function(u,c,l,e,t,i){return _[e]([0,0],[i.scrollDelta,i.scrollDelta],c,t,l).signal*(u[1]-u[0])*i.scrollDelta})};function S(u){return function(c,l,e,t){var i=this._range,s=i.slice(),a=c.axisModels[0];if(a){var o=u(s,a,c,l,e,t);return k(o,s,[0,100],"all"),this._range=s,i[0]!==s[0]||i[1]!==s[1]?s:void 0}}}var _={grid:function(u,c,l,e,t){var i=l.axis,s={},a=t.model.coordinateSystem.getRect();return u=u||[0,0],i.dim==="x"?(s.pixel=c[0]-u[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=i.inverse?1:-1):(s.pixel=c[1]-u[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=i.inverse?-1:1),s},polar:function(u,c,l,e,t){var i=l.axis,s={},a=t.model.coordinateSystem,o=a.getRadiusAxis().getExtent(),r=a.getAngleAxis().getExtent();return u=u?a.pointToCoord(u):[0,0],c=a.pointToCoord(c),l.mainType==="radiusAxis"?(s.pixel=c[0]-u[0],s.pixelLength=o[1]-o[0],s.pixelStart=o[0],s.signal=i.inverse?1:-1):(s.pixel=c[1]-u[1],s.pixelLength=r[1]-r[0],s.pixelStart=r[0],s.signal=i.inverse?-1:1),s},singleAxis:function(u,c,l,e,t){var i=l.axis,s=t.model.coordinateSystem.getRect(),a={};return u=u||[0,0],i.orient==="horizontal"?(a.pixel=c[0]-u[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=i.inverse?1:-1):(a.pixel=c[1]-u[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=i.inverse?-1:1),a}},g=E;W.exports=g},49498:(W,G,T)=>{var L=T(42719).extend({type:"dataZoom.select"});W.exports=L},66100:(W,G,T)=>{var L=T(12159).extend({type:"dataZoom.select"});W.exports=L},3496:(W,G,T)=>{var L=T(42719).extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});W.exports=L},45578:(W,G,T)=>{var L=T(33051),R=T(61158),k=T(51177),O=T(270),D=T(12159),E=T(85669),I=T(76172),S=T(19233),_=k.Rect,g=E.linearMap,u=E.asc,c=L.bind,l=L.each,e="horizontal",t="vertical",i=["line","bar","candlestick","scatter"],s=D.extend({type:"dataZoom.slider",init:function(r,n){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=n},render:function(r,n,h,p){s.superApply(this,"render",arguments),O.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=r.get("orient"),this.dataZoomModel.get("show")!==!1?(p&&p.type==="dataZoom"&&p.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){s.superApply(this,"remove",arguments),O.clear(this,"_dispatchZoomAction")},dispose:function(){s.superApply(this,"dispose",arguments),O.clear(this,"_dispatchZoomAction")},_buildView:function(){var r=this.group;r.removeAll(),this._resetLocation(),this._resetInterval();var n=this._displayables.barGroup=new k.Group;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(n),this._positionGroup()},_resetLocation:function(){var r=this.dataZoomModel,n=this.api,h=this._findCoordRect(),p={width:n.getWidth(),height:n.getHeight()},d=this._orient===e?{right:p.width-h.x-h.width,top:p.height-30-7,width:h.width,height:30}:{right:7,top:h.y,width:30,height:h.height},f=I.getLayoutParams(r.option);L.each(["right","top","width","height"],function(m){f[m]==="ph"&&(f[m]=d[m])});var v=I.getLayoutRect(f,p,r.padding);this._location={x:v.x,y:v.y},this._size=[v.width,v.height],this._orient===t&&this._size.reverse()},_positionGroup:function(){var r=this.group,n=this._location,h=this._orient,p=this.dataZoomModel.getFirstTargetAxisModel(),d=p&&p.get("inverse"),f=this._displayables.barGroup,v=(this._dataShadowInfo||{}).otherAxisInverse;f.attr(h!==e||d?h===e&&d?{scale:v?[-1,1]:[-1,-1]}:h!==t||d?{scale:v?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:v?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:v?[1,1]:[1,-1]});var m=r.getBoundingRect([f]);r.attr("position",[n.x-m.x,n.y-m.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var r=this.dataZoomModel,n=this._size,h=this._displayables.barGroup;h.add(new _({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:r.get("backgroundColor")},z2:-40})),h.add(new _({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:L.bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(r){var n=this._size,h=r.series,p=h.getRawData(),d=h.getShadowDim?h.getShadowDim():r.otherDim;if(d!=null){var f=p.getDataExtent(d),v=.3*(f[1]-f[0]);f=[f[0]-v,f[1]+v];var m,y=[0,n[1]],x=[0,n[0]],w=[[n[0],0],[0,0]],M=[],C=x[1]/(p.count()-1),A=0,P=Math.round(p.count()/n[0]);p.each([d],function(N,B){if(P>0&&B%P)A+=C;else{var z=N==null||isNaN(N)||N==="",F=z?0:g(N,f,y,!0);z&&!m&&B?(w.push([w[w.length-1][0],0]),M.push([M[M.length-1][0],0])):!z&&m&&(w.push([A,0]),M.push([A,0])),w.push([A,F]),M.push([A,F]),A+=C,m=z}});var b=this.dataZoomModel;this._displayables.barGroup.add(new k.Polygon({shape:{points:w},style:L.defaults({fill:b.get("dataBackgroundColor")},b.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new k.Polyline({shape:{points:M},style:b.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var r=this.dataZoomModel,n=r.get("showDataShadow");if(n!==!1){var h,p=this.ecModel;return r.eachTargetAxis(function(d,f){var v=r.getAxisProxy(d.name,f).getTargetSeriesModels();L.each(v,function(m){if(!(h||n!==!0&&L.indexOf(i,m.get("type"))<0)){var y,x=p.getComponent(d.axis,f).axis,w={x:"y",y:"x",radius:"angle",angle:"radius"}[d.name],M=m.coordinateSystem;w!=null&&M.getOtherAxis&&(y=M.getOtherAxis(x).inverse),w=m.getData().mapDimension(w),h={thisAxis:x,series:m,thisDim:d.name,otherDim:w,otherAxisInverse:y}}},this)},this),h}},_renderHandle:function(){var r=this._displayables,n=r.handles=[],h=r.handleLabels=[],p=this._displayables.barGroup,d=this._size,f=this.dataZoomModel;p.add(r.filler=new _({draggable:!0,cursor:a(this._orient),drift:c(this._onDragMove,this,"all"),ondragstart:c(this._showDataInfo,this,!0),ondragend:c(this._onDragEnd,this),onmouseover:c(this._showDataInfo,this,!0),onmouseout:c(this._showDataInfo,this,!1),style:{fill:f.get("fillerColor"),textPosition:"inside"}})),p.add(new _({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:d[0],height:d[1]},style:{stroke:f.get("dataBackgroundColor")||f.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),l([0,1],function(v){var m=k.createIcon(f.get("handleIcon"),{cursor:a(this._orient),draggable:!0,drift:c(this._onDragMove,this,v),ondragend:c(this._onDragEnd,this),onmouseover:c(this._showDataInfo,this,!0),onmouseout:c(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),y=m.getBoundingRect();this._handleHeight=E.parsePercent(f.get("handleSize"),this._size[1]),this._handleWidth=y.width/y.height*this._handleHeight,m.setStyle(f.getModel("handleStyle").getItemStyle());var x=f.get("handleColor");x!=null&&(m.style.fill=x),p.add(n[v]=m);var w=f.textStyleModel;this.group.add(h[v]=new k.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:w.getTextColor(),textFont:w.getFont()},z2:10}))},this)},_resetInterval:function(){var r=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[g(r[0],[0,100],n,!0),g(r[1],[0,100],n,!0)]},_updateInterval:function(r,n){var h=this.dataZoomModel,p=this._handleEnds,d=this._getViewExtent(),f=h.findRepresentativeAxisProxy().getMinMaxSpan(),v=[0,100];S(n,p,d,h.get("zoomLock")?"all":r,f.minSpan!=null?g(f.minSpan,v,d,!0):null,f.maxSpan!=null?g(f.maxSpan,v,d,!0):null);var m=this._range,y=this._range=u([g(p[0],d,v,!0),g(p[1],d,v,!0)]);return!m||m[0]!==y[0]||m[1]!==y[1]},_updateView:function(r){var n=this._displayables,h=this._handleEnds,p=u(h.slice()),d=this._size;l([0,1],function(f){var v=n.handles[f],m=this._handleHeight;v.attr({scale:[m/2,m/2],position:[h[f],d[1]/2-m/2]})},this),n.filler.setShape({x:p[0],y:0,width:p[1]-p[0],height:d[1]}),this._updateDataInfo(r)},_updateDataInfo:function(r){var n=this.dataZoomModel,h=this._displayables,p=h.handleLabels,d=this._orient,f=["",""];if(n.get("showDetail")){var v=n.findRepresentativeAxisProxy();if(v){var m=v.getAxisModel().axis,y=this._range,x=r?v.calculateDataWindow({start:y[0],end:y[1]}).valueWindow:v.getDataValueWindow();f=[this._formatLabel(x[0],m),this._formatLabel(x[1],m)]}}var w=u(this._handleEnds.slice());function M(C){var A=k.getTransform(h.handles[C].parent,this.group),P=k.transformDirection(C===0?"right":"left",A),b=this._handleWidth/2+5,N=k.applyTransform([w[C]+(C===0?-b:b),this._size[1]/2],A);p[C].setStyle({x:N[0],y:N[1],textVerticalAlign:d===e?"middle":P,textAlign:d===e?P:"center",text:f[C]})}M.call(this,0),M.call(this,1)},_formatLabel:function(r,n){var h=this.dataZoomModel,p=h.get("labelFormatter"),d=h.get("labelPrecision");d!=null&&d!=="auto"||(d=n.getPixelPrecision());var f=r==null||isNaN(r)?"":n.type==="category"||n.type==="time"?n.scale.getLabel(Math.round(r)):r.toFixed(Math.min(d,20));return L.isFunction(p)?p(r,f):L.isString(p)?p.replace("{value}",f):f},_showDataInfo:function(r){r=this._dragging||r;var n=this._displayables.handleLabels;n[0].attr("invisible",!r),n[1].attr("invisible",!r)},_onDragMove:function(r,n,h,p){this._dragging=!0,R.stop(p.event);var d=this._displayables.barGroup.getLocalTransform(),f=k.applyTransform([n,h],d,!0),v=this._updateInterval(r,f[0]),m=this.dataZoomModel.get("realtime");this._updateView(!m),v&&m&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction()},_onClickPanelClick:function(r){var n=this._size,h=this._displayables.barGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(h[0]<0||h[0]>n[0]||h[1]<0||h[1]>n[1])){var p=this._handleEnds,d=(p[0]+p[1])/2,f=this._updateInterval("all",h[0]-d);this._updateView(),f&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:r[0],end:r[1]})},_findCoordRect:function(){var r;if(l(this.getTargetCoordInfo(),function(p){if(!r&&p.length){var d=p[0].model.coordinateSystem;r=d.getRect&&d.getRect()}}),!r){var n=this.api.getWidth(),h=this.api.getHeight();r={x:.2*n,y:.2*h,width:.6*n,height:.6*h}}return r}});function a(r){return r==="vertical"?"ns-resize":"ew-resize"}var o=s;W.exports=o},72078:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(6398);L.registerAction("dataZoom",function(O,D){var E=k.createLinkedNodesFinder(R.bind(D.eachComponent,D,"dataZoom"),k.eachAxisDim,function(S,_){return S.get(_.axisIndex)}),I=[];D.eachComponent({mainType:"dataZoom",query:O},function(S,_){I.push.apply(I,E(S).nodes)}),R.each(I,function(S,_){S.setRawRange({start:O.start,end:O.end,startValue:O.startValue,endValue:O.endValue})})})},2536:(W,G,T)=>{var L=T(70492),R=T(33051),k=R.createHashMap,O=R.each;L.registerProcessor({getTargetSeries:function(D){var E=k();return D.eachComponent("dataZoom",function(I){I.eachTargetAxis(function(S,_,g){var u=g.getAxisProxy(S.name,_);O(u.getTargetSeriesModels(),function(c){E.set(c.uid,c)})})}),E},modifyOutputEnd:!0,overallReset:function(D,E){D.eachComponent("dataZoom",function(I){I.eachTargetAxis(function(S,_,g){g.getAxisProxy(S.name,_).reset(g,E)}),I.eachTargetAxis(function(S,_,g){g.getAxisProxy(S.name,_).filterData(g,E)})}),D.eachComponent("dataZoom",function(I){var S=I.findRepresentativeAxisProxy(),_=S.getDataPercentWindow(),g=S.getDataValueWindow();I.setCalculatedRange({start:_[0],end:_[1],startValue:g[0],endValue:g[1]})})}})},6398:(W,G,T)=>{var L=T(33051),R=T(78988),k=["cartesian2d","polar","singleAxis"];function O(E,I){E=E.slice();var S=L.map(E,R.capitalFirst);I=(I||[]).slice();var _=L.map(I,R.capitalFirst);return function(g,u){L.each(E,function(c,l){for(var e={name:c,capital:S[l]},t=0;t<I.length;t++)e[I[t]]=c+_[t];g.call(u,e)})}}var D=O(["x","y","z","radius","angle","single"],["axisIndex","axis","index","id"]);G.isCoordSupported=function(E){return L.indexOf(k,E)>=0},G.createNameEach=O,G.eachAxisDim=D,G.createLinkedNodesFinder=function(E,I,S){return function(g){var u,c={nodes:[],records:{}};if(I(function(e){c.records[e.name]={}}),!g)return c;_(g,c);do u=!1,E(l);while(u);function l(e){!function(t,i){return L.indexOf(i.nodes,t)>=0}(e,c)&&function(t,i){var s=!1;return I(function(a){L.each(S(t,a)||[],function(o){i.records[a.name][o]&&(s=!0)})}),s}(e,c)&&(_(e,c),u=!0)}return c};function _(g,u){u.nodes.push(g),I(function(c){L.each(S(g,c)||[],function(l){u.records[c.name][l]=!0})})}}},29570:(W,G,T)=>{var L=T(33051).each,R="\0_ec_hist_store";function k(O){var D=O[R];return D||(D=O[R]=[{}]),D}G.push=function(O,D){var E=k(O);L(D,function(I,S){for(var _=E.length-1;_>=0&&!E[_][S];_--);if(_<0){var g=O.queryComponents({mainType:"dataZoom",subType:"select",id:S})[0];if(g){var u=g.getPercentRange();E[0][S]={dataZoomId:S,start:u[0],end:u[1]}}}}),E.push(D)},G.pop=function(O){var D=k(O),E=D[D.length-1];D.length>1&&D.pop();var I={};return L(E,function(S,_){for(var g=D.length-1;g>=0;g--)if(S=D[g][_]){I[_]=S;break}}),I},G.clear=function(O){O[R]=null},G.count=function(O){return k(O).length}},15992:(W,G,T)=>{var L=T(33051),R=T(9176),k=T(270),O="\0_ec_dataZoom_roams";function D(S){var _=S.getZr();return _[O]||(_[O]={})}function E(S){L.each(S,function(_,g){_.count||(_.controller.dispose(),delete S[g])})}function I(S,_){S.dispatchAction({type:"dataZoom",batch:_})}G.register=function(S,_){var g=D(S),u=_.dataZoomId,c=_.coordId;L.each(g,function(r,n){var h=r.dataZoomInfos;h[u]&&L.indexOf(_.allCoordIds,c)<0&&(delete h[u],r.count--)}),E(g);var l=g[c];l||((l=g[c]={coordId:c,dataZoomInfos:{},count:0}).controller=function(r,n){var h=new R(r.getZr());return L.each(["pan","zoom","scrollMove"],function(p){h.on(p,function(d){var f=[];L.each(n.dataZoomInfos,function(v){if(d.isAvailableBehavior(v.dataZoomModel.option)){var m=(v.getRange||{})[p],y=m&&m(n.controller,d);!v.dataZoomModel.get("disabled",!0)&&y&&f.push({dataZoomId:v.dataZoomId,start:y[0],end:y[1]})}}),f.length&&n.dispatchAction(f)})}),h}(S,l),l.dispatchAction=L.curry(I,S)),!l.dataZoomInfos[u]&&l.count++,l.dataZoomInfos[u]=_;var e,t,i,s,a,o=(e=l.dataZoomInfos,i="type_",s={type_true:2,type_move:1,type_false:0,type_undefined:-1},a=!0,L.each(e,function(r){var n=r.dataZoomModel,h=!n.get("disabled",!0)&&(!n.get("zoomLock",!0)||"move");s[i+h]>s[i+t]&&(t=h),a&=n.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!a}});l.controller.enable(o.controlType,o.opt),l.controller.setPointerChecker(_.containsPoint),k.createOrUpdate(l,"dispatchAction",_.dataZoomModel.get("throttle",!0),"fixRate")},G.unregister=function(S,_){var g=D(S);L.each(g,function(u){u.controller.dispose();var c=u.dataZoomInfos;c[_]&&(delete c[_],u.count--)}),E(g)},G.generateCoordId=function(S){return S.type+"\0_"+S.id}},71264:(W,G,T)=>{T(98071).registerSubTypeDefaulter("dataZoom",function(){return"slider"})},81768:(W,G,T)=>{var L=T(98071),R=T(33166),k=T(61772).detectSourceFormat,O=T(93819).SERIES_LAYOUT_BY_COLUMN;L.extend({type:"dataset",defaultOption:{seriesLayoutBy:O,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){k(this)}}),R.extend({type:"dataset"})},48807:(W,G,T)=>{var L=T(70492),R=T(33051);function k(O,D){D.update="updateView",L.registerAction(D,function(E,I){var S={};return I.eachComponent({mainType:"geo",query:E},function(_){_[O](E.name);var g=_.coordinateSystem;R.each(g.regions,function(u){S[u.name]=_.isSelected(u.name)||!1})}),{selected:S,name:E.name}})}T(39618),T(18958),T(26062),T(28401),k("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),k("select",{type:"geoSelect",event:"geoselected"}),k("unSelect",{type:"geoUnSelect",event:"geounselected"})},26062:(W,G,T)=>{var L=T(44121),R=T(70492).extendComponentView({type:"geo",init:function(k,O){var D=new L(O,!0);this._mapDraw=D,this.group.add(D.group)},render:function(k,O,D,E){if(!E||E.type!=="geoToggleSelect"||E.from!==this.uid){var I=this._mapDraw;k.get("show")?I.draw(k,O,D,this,E):this._mapDraw.group.removeAll(),this.group.silent=k.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}});W.exports=R},78644:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(33051),k=T(32234),O=T(51177),D=T(76172),E=T(85669).parsePercent,I={path:null,compoundPath:null,group:O.Group,image:O.Image,text:O.Text};L.registerPreprocessor(function(c){var l=c.graphic;R.isArray(l)?l[0]&&l[0].elements?c.graphic=[c.graphic[0]]:c.graphic=[{elements:l}]:l&&!l.elements&&(c.graphic=[{elements:[l]}])});var S=L.extendComponentModel({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(c){var l=this.option.elements;this.option.elements=null,S.superApply(this,"mergeOption",arguments),this.option.elements=l},optionUpdated:function(c,l){var e=this.option,t=(l?e:c).elements,i=e.elements=l?[]:e.elements,s=[];this._flatten(t,s);var a=k.mappingToExists(i,s);k.makeIdAndName(a);var o=this._elOptionsToUpdate=[];R.each(a,function(n,h){var p=n.option;p&&(o.push(p),function(d,f){var v=d.exist;if(f.id=d.keyInfo.id,!f.type&&v&&(f.type=v.type),f.parentId==null){var m=f.parentOption;m?f.parentId=m.id:v&&(f.parentId=v.parentId)}f.parentOption=null}(n,p),function(d,f,v){var m=R.extend({},v),y=d[f],x=v.$action||"merge";x==="merge"?y?(R.merge(y,m,!0),D.mergeLayoutParam(y,m,{ignoreSize:!0}),D.copyLayoutParams(v,y)):d[f]=m:x==="replace"?d[f]=m:x==="remove"&&y&&(d[f]=null)}(i,h,p),function(d,f){d&&(d.hv=f.hv=[u(f,["left","right"]),u(f,["top","bottom"])],d.type==="group"&&(d.width==null&&(d.width=f.width=0),d.height==null&&(d.height=f.height=0)))}(i[h],p))},this);for(var r=i.length-1;r>=0;r--)i[r]==null?i.splice(r,1):delete i[r].$action},_flatten:function(c,l,e){R.each(c,function(t){if(t){e&&(t.parentOption=e),l.push(t);var i=t.children;t.type==="group"&&i&&this._flatten(i,l,t),delete t.children}},this)},useElOptionsToUpdate:function(){var c=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,c}});function _(c,l,e,t){var i=e.type,s=new(I.hasOwnProperty(i)?I[i]:O.getShapeClass(i))(e);l.add(s),t.set(c,s),s.__ecGraphicId=c}function g(c,l){var e=c&&c.parent;e&&(c.type==="group"&&c.traverse(function(t){g(t,l)}),l.removeKey(c.__ecGraphicId),e.remove(c))}function u(c,l){var e;return R.each(l,function(t){c[t]!=null&&c[t]!=="auto"&&(e=!0)}),e}L.extendComponentView({type:"graphic",init:function(c,l){this._elMap=R.createHashMap(),this._lastGraphicModel},render:function(c,l,e){c!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=c,this._updateElements(c),this._relocate(c,e)},_updateElements:function(c){var l=c.useElOptionsToUpdate();if(l){var e=this._elMap,t=this.group;R.each(l,function(i){var s=i.$action,a=i.id,o=e.get(a),r=i.parentId,n=r!=null?e.get(r):t,h=i.style;i.type==="text"&&h&&(i.hv&&i.hv[1]&&(h.textVerticalAlign=h.textBaseline=null),!h.hasOwnProperty("textFill")&&h.fill&&(h.textFill=h.fill),!h.hasOwnProperty("textStroke")&&h.stroke&&(h.textStroke=h.stroke));var p=function(f){return f=R.extend({},f),R.each(["id","parentId","$action","hv","bounding"].concat(D.LOCATION_PARAMS),function(v){delete f[v]}),f}(i);s&&s!=="merge"?s==="replace"?(g(o,e),_(a,n,p,e)):s==="remove"&&g(o,e):o?o.attr(p):_(a,n,p,e);var d=e.get(a);d&&(d.__ecGraphicWidthOption=i.width,d.__ecGraphicHeightOption=i.height,function(f,v,m){var y=f.eventData;f.silent||f.ignore||y||(y=f.eventData={componentType:"graphic",componentIndex:v.componentIndex,name:f.name}),y&&(y.info=f.info)}(d,c))})}},_relocate:function(c,l){for(var e=c.option.elements,t=this.group,i=this._elMap,s=l.getWidth(),a=l.getHeight(),o=0;o<e.length;o++){var r=e[o];if((h=i.get(r.id))&&h.isGroup){var n=(p=h.parent)===t;h.__ecGraphicWidth=E(h.__ecGraphicWidthOption,n?s:p.__ecGraphicWidth)||0,h.__ecGraphicHeight=E(h.__ecGraphicHeightOption,n?a:p.__ecGraphicHeight)||0}}for(o=e.length-1;o>=0;o--){var h;if(r=e[o],h=i.get(r.id)){var p,d=(p=h.parent)===t?{width:s,height:a}:{width:p.__ecGraphicWidth,height:p.__ecGraphicHeight};D.positionElement(h,r,d,null,{hv:r.hv,boundingMode:r.bounding})}}},_clear:function(){var c=this._elMap;c.each(function(l){g(l,c)}),this._elMap=R.createHashMap()},dispose:function(){this._clear()}})},82601:(W,G,T)=>{T(84617),T(97326),T(52528)},84617:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(51177);T(77532),T(88791),L.extendComponentView({type:"grid",render:function(O,D){this.group.removeAll(),O.get("show")&&this.group.add(new k.Rect({shape:O.coordinateSystem.getRect(),style:R.defaults({fill:O.get("backgroundColor")},O.getItemStyle()),silent:!0,z2:-1}))}}),L.registerPreprocessor(function(O){O.xAxis&&O.yAxis&&!O.grid&&(O.grid={})})},63448:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=T(41502),k=T(51177),O=T(20582),D=T(4130),E=L.curry,I=L.each,S=L.map,_=Math.min,g=Math.max,u=Math.pow,c="globalPan",l={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},e={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},t={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},i=0;function s(Z){R.call(this),this._zr=Z,this.group=new k.Group,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,this._uid="brushController_"+i++,this._handlers={},I(X,function(q,tt){this._handlers[tt]=L.bind(q,this)},this)}function a(Z,q){var tt=J[q.brushType].createCover(Z,q);return tt.__brushOption=q,n(tt,q),Z.group.add(tt),tt}function o(Z,q){var tt=p(q);return tt.endCreating&&(tt.endCreating(Z,q),n(q,q.__brushOption)),q}function r(Z,q){var tt=q.__brushOption;p(q).updateCoverShape(Z,q,tt.range,tt)}function n(Z,q){var tt=q.z;tt==null&&(tt=1e4),Z.traverse(function($){$.z=tt,$.z2=tt})}function h(Z,q){p(q).updateCommon(Z,q),r(Z,q)}function p(Z){return J[Z.__brushOption.brushType]}function d(Z,q,tt){var $,rt=Z._panels;if(!rt)return!0;var et=Z._transform;return I(rt,function(it){it.isTargetByCursor(q,tt,et)&&($=it)}),$}function f(Z,q){var tt=Z._panels;if(!tt)return!0;var $=q.__brushOption.panelId;return $==null||tt[$]}function v(Z){var q=Z._covers,tt=q.length;return I(q,function($){Z.group.remove($)},Z),q.length=0,!!tt}function m(Z,q){var tt=S(Z._covers,function($){var rt=$.__brushOption,et=L.clone(rt.range);return{brushType:rt.brushType,panelId:rt.panelId,range:et}});Z.trigger("brush",tt,{isEnd:!!q.isEnd,removeOnClick:!!q.removeOnClick})}function y(Z){var q=Z.length-1;return q<0&&(q=0),[Z[0],Z[q]]}function x(Z,q,tt,$){var rt=new k.Group;return rt.add(new k.Rect({name:"main",style:A(tt),silent:!0,draggable:!0,cursor:"move",drift:E(Z,q,rt,"nswe"),ondragend:E(m,q,{isEnd:!0})})),I($,function(et){rt.add(new k.Rect({name:et,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:E(Z,q,rt,et),ondragend:E(m,q,{isEnd:!0})}))}),rt}function w(Z,q,tt,$){var rt=$.brushStyle.lineWidth||0,et=g(rt,6),it=tt[0][0],ot=tt[1][0],st=it-rt/2,at=ot-rt/2,vt=tt[0][1],yt=tt[1][1],gt=vt-et+rt/2,pt=yt-et+rt/2,bt=vt-it,mt=yt-ot,nt=bt+rt,lt=mt+rt;C(Z,q,"main",it,ot,bt,mt),$.transformable&&(C(Z,q,"w",st,at,et,lt),C(Z,q,"e",gt,at,et,lt),C(Z,q,"n",st,at,nt,et),C(Z,q,"s",st,pt,nt,et),C(Z,q,"nw",st,at,et,et),C(Z,q,"ne",gt,at,et,et),C(Z,q,"sw",st,pt,et,et),C(Z,q,"se",gt,pt,et,et))}function M(Z,q){var tt=q.__brushOption,$=tt.transformable,rt=q.childAt(0);rt.useStyle(A(tt)),rt.attr({silent:!$,cursor:$?"move":"default"}),I(["w","e","n","s","se","sw","ne","nw"],function(et){var it=q.childOfName(et),ot=b(Z,et);it&&it.attr({silent:!$,invisible:!$,cursor:$?e[ot]+"-resize":null})})}function C(Z,q,tt,$,rt,et,it){var ot,st,at,vt=q.childOfName(tt);vt&&vt.setShape((ot=F(Z,q,[[$,rt],[$+et,rt+it]]),{x:st=_(ot[0][0],ot[1][0]),y:at=_(ot[0][1],ot[1][1]),width:g(ot[0][0],ot[1][0])-st,height:g(ot[0][1],ot[1][1])-at}))}function A(Z){return L.defaults({strokeNoScale:!0},Z.brushStyle)}function P(Z,q,tt,$){var rt=[_(Z,tt),_(q,$)],et=[g(Z,tt),g(q,$)];return[[rt[0],et[0]],[rt[1],et[1]]]}function b(Z,q){if(q.length>1)return((tt=[b(Z,(q=q.split(""))[0]),b(Z,q[1])])[0]==="e"||tt[0]==="w")&&tt.reverse(),tt.join("");var tt=k.transformDirection({w:"left",e:"right",n:"top",s:"bottom"}[q],function($){return k.getTransform($.group)}(Z));return{left:"w",right:"e",top:"n",bottom:"s"}[tt]}function N(Z,q,tt,$,rt,et,it,ot){var st=$.__brushOption,at=Z(st.range),vt=z(tt,et,it);I(rt.split(""),function(yt){var gt=l[yt];at[gt[0]][gt[1]]+=vt[gt[0]]}),st.range=q(P(at[0][0],at[1][0],at[0][1],at[1][1])),h(tt,$),m(tt,{isEnd:!1})}function B(Z,q,tt,$,rt){var et=q.__brushOption.range,it=z(Z,tt,$);I(et,function(ot){ot[0]+=it[0],ot[1]+=it[1]}),h(Z,q),m(Z,{isEnd:!1})}function z(Z,q,tt){var $=Z.group,rt=$.transformCoordToLocal(q,tt),et=$.transformCoordToLocal(0,0);return[rt[0]-et[0],rt[1]-et[1]]}function F(Z,q,tt){var $=f(Z,q);return $&&$!==!0?$.clipPath(tt,Z._transform):L.clone(tt)}function V(Z){var q=Z.event;q.preventDefault&&q.preventDefault()}function H(Z,q,tt){return Z.childOfName("main").contain(q,tt)}function U(Z,q,tt,$){var rt,et=Z._creatingCover,it=Z._creatingPanel,ot=Z._brushOption;if(Z._track.push(tt.slice()),function(vt){var yt=vt._track;if(!yt.length)return!1;var gt=yt[yt.length-1],pt=yt[0],bt=gt[0]-pt[0],mt=gt[1]-pt[1];return u(bt*bt+mt*mt,.5)>6}(Z)||et){if(it&&!et){ot.brushMode==="single"&&v(Z);var st=L.clone(ot);st.brushType=j(st.brushType,it),st.panelId=it===!0?null:it.panelId,et=Z._creatingCover=a(Z,st),Z._covers.push(et)}if(et){var at=J[j(Z._brushType,it)];et.__brushOption.range=at.getCreatingRange(F(Z,et,Z._track)),$&&(o(Z,et),at.updateCommon(Z,et)),r(Z,et),rt={isEnd:$}}}else $&&ot.brushMode==="single"&&ot.removeOnClick&&d(Z,q,tt)&&v(Z)&&(rt={isEnd:$,removeOnClick:!0});return rt}function j(Z,q){return Z==="auto"?q.defaultBrushType:Z}s.prototype={constructor:s,enableBrush:function(Z){var q,tt;return this._brushType&&(tt=(q=this)._zr,O.release(tt,c,q._uid),function($,rt){I(rt,function(et,it){$.off(it,et)})}(tt,q._handlers),q._brushType=q._brushOption=null),Z.brushType&&function($,rt){var et=$._zr;$._enableGlobalPan||O.take(et,c,$._uid),function(it,ot){I(ot,function(st,at){it.on(at,st)})}(et,$._handlers),$._brushType=rt.brushType,$._brushOption=L.merge(L.clone(t),rt,!0)}(this,Z),this},setPanels:function(Z){if(Z&&Z.length){var q=this._panels={};L.each(Z,function(tt){q[tt.panelId]=L.clone(tt)})}else this._panels=null;return this},mount:function(Z){Z=Z||{},this._enableGlobalPan=Z.enableGlobalPan;var q=this.group;return this._zr.add(q),q.attr({position:Z.position||[0,0],rotation:Z.rotation||0,scale:Z.scale||[1,1]}),this._transform=q.getLocalTransform(),this},eachCover:function(Z,q){I(this._covers,Z,q)},updateCovers:function(Z){Z=L.map(Z,function(ot){return L.merge(L.clone(t),ot,!0)});var q=this._covers,tt=this._covers=[],$=this,rt=this._creatingCover;return new D(q,Z,function(ot,st){return et(ot.__brushOption,st)},et).add(it).update(it).remove(function(ot){q[ot]!==rt&&$.group.remove(q[ot])}).execute(),this;function et(ot,st){return(ot.id!=null?ot.id:"\0-brush-index-"+st)+"-"+ot.brushType}function it(ot,st){var at=Z[ot];if(st!=null&&q[st]===rt)tt[ot]=q[st];else{var vt=tt[ot]=st!=null?(q[st].__brushOption=at,q[st]):o($,a($,at));h($,vt)}}},unmount:function(){return this.enableBrush(!1),v(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},L.mixin(s,R);var X={mousedown:function(Z){if(this._dragging)Y(this,Z);else if(!Z.target||!Z.target.draggable){V(Z);var q=this.group.transformCoordToLocal(Z.offsetX,Z.offsetY);this._creatingCover=null,(this._creatingPanel=d(this,Z,q))&&(this._dragging=!0,this._track=[q.slice()])}},mousemove:function(Z){var q=Z.offsetX,tt=Z.offsetY,$=this.group.transformCoordToLocal(q,tt);if(function(et,it,ot){if(et._brushType&&!function(pt,bt,mt){var nt=pt._zr;return bt<0||bt>nt.getWidth()||mt>nt.getHeight()}(et,it)){var st=et._zr,at=et._covers,vt=d(et,it,ot);if(!et._dragging)for(var yt=0;yt<at.length;yt++){var gt=at[yt].__brushOption;if(vt&&(vt===!0||gt.panelId===vt.panelId)&&J[gt.brushType].contain(at[yt],ot[0],ot[1]))return}vt&&st.setCursorStyle("crosshair")}}(this,Z,$),this._dragging){V(Z);var rt=U(this,Z,$,!1);rt&&m(this,rt)}},mouseup:function(Z){Y(this,Z)}};function Y(Z,q){if(Z._dragging){V(q);var tt=q.offsetX,$=q.offsetY,rt=Z.group.transformCoordToLocal(tt,$),et=U(Z,q,rt,!0);Z._dragging=!1,Z._track=[],Z._creatingCover=null,et&&m(Z,et)}}var J={lineX:K(0),lineY:K(1),rect:{createCover:function(Z,q){return x(E(N,function(tt){return tt},function(tt){return tt}),Z,q,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(Z){var q=y(Z);return P(q[1][0],q[1][1],q[0][0],q[0][1])},updateCoverShape:function(Z,q,tt,$){w(Z,q,tt,$)},updateCommon:M,contain:H},polygon:{createCover:function(Z,q){var tt=new k.Group;return tt.add(new k.Polyline({name:"main",style:A(q),silent:!0})),tt},getCreatingRange:function(Z){return Z},endCreating:function(Z,q){q.remove(q.childAt(0)),q.add(new k.Polygon({name:"main",draggable:!0,drift:E(B,Z,q),ondragend:E(m,Z,{isEnd:!0})}))},updateCoverShape:function(Z,q,tt,$){q.childAt(0).setShape({points:F(Z,q,tt)})},updateCommon:M,contain:H}};function K(Z){return{createCover:function(q,tt){return x(E(N,function($){var rt=[$,[0,100]];return Z&&rt.reverse(),rt},function($){return $[Z]}),q,tt,[["w","e"],["n","s"]][Z])},getCreatingRange:function(q){var tt=y(q);return[_(tt[0][Z],tt[1][Z]),g(tt[0][Z],tt[1][Z])]},updateCoverShape:function(q,tt,$,rt){var et,it=f(q,tt);if(it!==!0&&it.getLinearBrushOtherExtent)et=it.getLinearBrushOtherExtent(Z,q._transform);else{var ot=q._zr;et=[0,[ot.getWidth(),ot.getHeight()][1-Z]]}var st=[$,et];Z&&st.reverse(),w(q,tt,st,rt)},updateCommon:M,contain:H}}var Q=s;W.exports=Q},64562:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=T(51177),k=T(32234),O=T(9344),D=L.each,E=L.indexOf,I=L.curry,S=["dataToPoint","pointToData"],_=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function g(p,d,f){var v=this._targetInfoList=[],m={},y=l(d,p);D(e,function(x,w){(!f||!f.include||E(f.include,w)>=0)&&x(y,v,m)})}var u=g.prototype;function c(p){return p[0]>p[1]&&p.reverse(),p}function l(p,d){return k.parseFinder(p,d,{includeMainTypes:_})}u.setOutputRanges=function(p,d){this.matchOutputRanges(p,d,function(f,v,m){if((f.coordRanges||(f.coordRanges=[])).push(v),!f.coordRange){f.coordRange=v;var y=s[f.brushType](0,m,v);f.__rangeOffset={offset:o[f.brushType](y.values,f.range,[1,1]),xyMinMax:y.xyMinMax}}})},u.matchOutputRanges=function(p,d,f){D(p,function(v){var m=this.findTargetInfo(v,d);m&&m!==!0&&L.each(m.coordSyses,function(y){var x=s[v.brushType](1,y,v.range);f(v,x.values,y,d)})},this)},u.setInputRanges=function(p,d){D(p,function(f){var v,m,y,x,w,M=this.findTargetInfo(f,d);if(f.range=f.range||[],M&&M!==!0){f.panelId=M.panelId;var C=s[f.brushType](0,M.coordSys,f.coordRange),A=f.__rangeOffset;f.range=A?o[f.brushType](C.values,A.offset,(v=C.xyMinMax,m=A.xyMinMax,y=n(v),x=n(m),w=[y[0]/x[0],y[1]/x[1]],isNaN(w[0])&&(w[0]=1),isNaN(w[1])&&(w[1]=1),w)):C.values}},this)},u.makePanelOpts=function(p,d){return L.map(this._targetInfoList,function(f){var v=f.getPanelRect();return{panelId:f.panelId,defaultBrushType:d&&d(f),clipPath:O.makeRectPanelClipPath(v),isTargetByCursor:O.makeRectIsTargetByCursor(v,p,f.coordSysModel),getLinearBrushOtherExtent:O.makeLinearBrushOtherExtent(v)}})},u.controlSeries=function(p,d,f){var v=this.findTargetInfo(p,f);return v===!0||v&&E(v.coordSyses,d.coordinateSystem)>=0},u.findTargetInfo=function(p,d){for(var f=this._targetInfoList,v=l(d,p),m=0;m<f.length;m++){var y=f[m],x=p.panelId;if(x){if(y.panelId===x)return y}else for(m=0;m<t.length;m++)if(t[m](v,y))return y}return!0};var e={grid:function(p,d){var f=p.xAxisModels,v=p.yAxisModels,m=p.gridModels,y=L.createHashMap(),x={},w={};(f||v||m)&&(D(f,function(M){var C=M.axis.grid.model;y.set(C.id,C),x[C.id]=!0}),D(v,function(M){var C=M.axis.grid.model;y.set(C.id,C),w[C.id]=!0}),D(m,function(M){y.set(M.id,M),x[M.id]=!0,w[M.id]=!0}),y.each(function(M){var C=M.coordinateSystem,A=[];D(C.getCartesians(),function(P,b){(E(f,P.getAxis("x").model)>=0||E(v,P.getAxis("y").model)>=0)&&A.push(P)}),d.push({panelId:"grid--"+M.id,gridModel:M,coordSysModel:M,coordSys:A[0],coordSyses:A,getPanelRect:i.grid,xAxisDeclared:x[M.id],yAxisDeclared:w[M.id]})}))},geo:function(p,d){D(p.geoModels,function(f){var v=f.coordinateSystem;d.push({panelId:"geo--"+f.id,geoModel:f,coordSysModel:f,coordSys:v,coordSyses:[v],getPanelRect:i.geo})})}},t=[function(p,d){var f=p.xAxisModel,v=p.yAxisModel,m=p.gridModel;return!m&&f&&(m=f.axis.grid.model),!m&&v&&(m=v.axis.grid.model),m&&m===d.gridModel},function(p,d){var f=p.geoModel;return f&&f===d.geoModel}],i={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var p=this.coordSys,d=p.getBoundingRect().clone();return d.applyTransform(R.getTransform(p)),d}},s={lineX:I(a,0),lineY:I(a,1),rect:function(p,d,f){var v=d[S[p]]([f[0][0],f[1][0]]),m=d[S[p]]([f[0][1],f[1][1]]),y=[c([v[0],m[0]]),c([v[1],m[1]])];return{values:y,xyMinMax:y}},polygon:function(p,d,f){var v=[[1/0,-1/0],[1/0,-1/0]];return{values:L.map(f,function(m){var y=d[S[p]](m);return v[0][0]=Math.min(v[0][0],y[0]),v[1][0]=Math.min(v[1][0],y[1]),v[0][1]=Math.max(v[0][1],y[0]),v[1][1]=Math.max(v[1][1],y[1]),y}),xyMinMax:v}}};function a(p,d,f,v){var m=f.getAxis(["x","y"][p]),y=c(L.map([0,1],function(w){return d?m.coordToData(m.toLocalCoord(v[w])):m.toGlobalCoord(m.dataToCoord(v[w]))})),x=[];return x[p]=y,x[1-p]=[NaN,NaN],{values:y,xyMinMax:x}}var o={lineX:I(r,0),lineY:I(r,1),rect:function(p,d,f){return[[p[0][0]-f[0]*d[0][0],p[0][1]-f[0]*d[0][1]],[p[1][0]-f[1]*d[1][0],p[1][1]-f[1]*d[1][1]]]},polygon:function(p,d,f){return L.map(p,function(v,m){return[v[0]-f[0]*d[m][0],v[1]-f[1]*d[m][1]]})}};function r(p,d,f,v){return[d[0]-v[p]*f[0],d[1]-v[p]*f[1]]}function n(p){return p?[p[0][1]-p[0][0],p[1][1]-p[1][0]]:[NaN,NaN]}var h=g;W.exports=h},44121:(W,G,T)=>{var L=T(33051),R=T(9176),k=T(31194),O=T(61485).onIrrelevantElement,D=T(51177),E=T(11194),I=T(42151).getUID,S=T(58023);function _(l){var e=l.getItemStyle(),t=l.get("areaColor");return t!=null&&(e.fill=t),e}function g(l,e){e.eachChild(function(t){L.each(t.__regions,function(i){t.trigger(l.isSelected(i.name)?"emphasis":"normal")})})}function u(l,e){var t=new D.Group;this.uid=I("ec_map_draw"),this._controller=new R(l.getZr()),this._controllerHost={target:e?t:null},this.group=t,this._updateGroup=e,this._mouseDownFlag,this._mapName,this._initialized,t.add(this._regionsGroup=new D.Group),t.add(this._backgroundGroup=new D.Group)}u.prototype={constructor:u,draw:function(l,e,t,i,s){var a=l.mainType==="geo",o=l.getData&&l.getData();a&&e.eachComponent({mainType:"series",subType:"map"},function(b){o||b.getHostGeoModel()!==l||(o=b.getData())});var r=l.coordinateSystem;this._updateBackground(r);var n,h=this._regionsGroup,p=this.group,d=r.getTransformInfo(),f=!h.childAt(0)||s;if(f)p.transform=d.roamTransform,p.decomposeTransform(),p.dirty();else{var v=new S;v.transform=d.roamTransform,v.decomposeTransform();var m={scale:v.scale,position:v.position};n=v.scale,D.updateProps(p,m,l)}var y=d.rawScale,x=d.rawPosition;h.removeAll();var w=["itemStyle"],M=["emphasis","itemStyle"],C=["label"],A=["emphasis","label"],P=L.createHashMap();L.each(r.regions,function(b){var N=P.get(b.name)||P.set(b.name,new D.Group),B=new D.CompoundPath({segmentIgnoreThreshold:1,shape:{paths:[]}});N.add(B);var z,F=(it=l.getRegionModel(b.name)||l).getModel(w),V=it.getModel(M),H=_(F),U=_(V),j=it.getModel(C),X=it.getModel(A);if(o){z=o.indexOfName(b.name);var Y=o.getItemVisual(z,"color",!0);Y&&(H.fill=Y)}var J=function(ot){return[ot[0]*y[0]+x[0],ot[1]*y[1]+x[1]]};L.each(b.geometries,function(ot){if(ot.type==="polygon"){for(var st=[],at=0;at<ot.exterior.length;++at)st.push(J(ot.exterior[at]));for(B.shape.paths.push(new D.Polygon({segmentIgnoreThreshold:1,shape:{points:st}})),at=0;at<(ot.interiors?ot.interiors.length:0);++at){for(var vt=ot.interiors[at],yt=(st=[],0);yt<vt.length;++yt)st.push(J(vt[yt]));B.shape.paths.push(new D.Polygon({segmentIgnoreThreshold:1,shape:{points:st}}))}}}),B.setStyle(H),B.style.strokeNoScale=!0,B.culling=!0;var K=j.get("show"),Q=X.get("show"),Z=o&&isNaN(o.get(o.mapDimension("value"),z)),q=o&&o.getItemLayout(z);if(a||Z&&(K||Q)||q&&q.showLabel){var tt,$=a?b.name:z;(!o||z>=0)&&(tt=l);var rt=new D.Text({position:J(b.center.slice()),scale:[1/p.scale[0],1/p.scale[1]],z2:10,silent:!0});if(D.setLabelStyle(rt.style,rt.hoverStyle={},j,X,{labelFetcher:tt,labelDataIndex:$,defaultText:b.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!f){var et=[1/n[0],1/n[1]];D.updateProps(rt,{scale:et},l)}N.add(rt)}if(o)o.setItemGraphicEl(z,N);else{var it=l.getRegionModel(b.name);B.eventData={componentType:"geo",componentIndex:l.componentIndex,geoIndex:l.componentIndex,name:b.name,region:it&&it.option||{}}}(N.__regions||(N.__regions=[])).push(b),N.highDownSilentOnTouch=!!l.get("selectedMode"),D.setHoverStyle(N,U),h.add(N)}),this._updateController(l,e,t),function(b,N,B,z,F){B.off("click"),B.off("mousedown"),N.get("selectedMode")&&(B.on("mousedown",function(){b._mouseDownFlag=!0}),B.on("click",function(V){if(b._mouseDownFlag){b._mouseDownFlag=!1;for(var H=V.target;!H.__regions;)H=H.parent;if(H){var U={type:(N.mainType==="geo"?"geo":"map")+"ToggleSelect",batch:L.map(H.__regions,function(j){return{name:j.name,from:F.uid}})};U[N.mainType+"Id"]=N.id,z.dispatchAction(U),g(N,B)}}}))}(this,l,h,t,i),g(l,h)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&E.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(l){var e=l.map;this._mapName!==e&&L.each(E.makeGraphic(e,this.uid),function(t){this._backgroundGroup.add(t)},this),this._mapName=e},_updateController:function(l,e,t){var i=l.coordinateSystem,s=this._controller,a=this._controllerHost;a.zoomLimit=l.get("scaleLimit"),a.zoom=i.getZoom(),s.enable(l.get("roam")||!1);var o=l.mainType;function r(){var n={type:"geoRoam",componentType:o};return n[o+"Id"]=l.id,n}s.off("pan").on("pan",function(n){this._mouseDownFlag=!1,k.updateViewOnPan(a,n.dx,n.dy),t.dispatchAction(L.extend(r(),{dx:n.dx,dy:n.dy}))},this),s.off("zoom").on("zoom",function(n){if(this._mouseDownFlag=!1,k.updateViewOnZoom(a,n.scale,n.originX,n.originY),t.dispatchAction(L.extend(r(),{zoom:n.scale,originX:n.originX,originY:n.originY})),this._updateGroup){var h=this.group.scale;this._regionsGroup.traverse(function(p){p.type==="text"&&p.attr("scale",[1/h[0],1/h[1]])})}},this),s.setPointerChecker(function(n,h,p){return i.getViewRectAfterRoam().contain(h,p)&&!O(n,t,l)})}};var c=u;W.exports=c},9176:(W,G,T)=>{var L=T(33051),R=T(41502),k=T(61158),O=T(20582);function D(t){this.pointerChecker,this._zr=t,this._opt={};var i=L.bind,s=i(E,this),a=i(I,this),o=i(S,this),r=i(_,this),n=i(g,this);R.call(this),this.setPointerChecker=function(h){this.pointerChecker=h},this.enable=function(h,p){this.disable(),this._opt=L.defaults(L.clone(p)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),h==null&&(h=!0),h!==!0&&h!=="move"&&h!=="pan"||(t.on("mousedown",s),t.on("mousemove",a),t.on("mouseup",o)),h!==!0&&h!=="scale"&&h!=="zoom"||(t.on("mousewheel",r),t.on("pinch",n))},this.disable=function(){t.off("mousedown",s),t.off("mousemove",a),t.off("mouseup",o),t.off("mousewheel",r),t.off("pinch",n)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function E(t){if(!(k.isMiddleOrRightButtonOnMouseUpDown(t)||t.target&&t.target.draggable)){var i=t.offsetX,s=t.offsetY;this.pointerChecker&&this.pointerChecker(t,i,s)&&(this._x=i,this._y=s,this._dragging=!0)}}function I(t){if(this._dragging&&l("moveOnMouseMove",t,this._opt)&&t.gestureEvent!=="pinch"&&!O.isTaken(this._zr,"globalPan")){var i=t.offsetX,s=t.offsetY,a=this._x,o=this._y,r=i-a,n=s-o;this._x=i,this._y=s,this._opt.preventDefaultMouseMove&&k.stop(t.event),c(this,"pan","moveOnMouseMove",t,{dx:r,dy:n,oldX:a,oldY:o,newX:i,newY:s})}}function S(t){k.isMiddleOrRightButtonOnMouseUpDown(t)||(this._dragging=!1)}function _(t){var i=l("zoomOnMouseWheel",t,this._opt),s=l("moveOnMouseWheel",t,this._opt),a=t.wheelDelta,o=Math.abs(a),r=t.offsetX,n=t.offsetY;if(a!==0&&(i||s)){if(i){var h=o>3?1.4:o>1?1.2:1.1;u(this,"zoom","zoomOnMouseWheel",t,{scale:a>0?h:1/h,originX:r,originY:n})}if(s){var p=Math.abs(a);u(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(a>0?1:-1)*(p>3?.4:p>1?.15:.05),originX:r,originY:n})}}}function g(t){O.isTaken(this._zr,"globalPan")||u(this,"zoom",null,t,{scale:t.pinchScale>1?1.1:.9090909090909091,originX:t.pinchX,originY:t.pinchY})}function u(t,i,s,a,o){t.pointerChecker&&t.pointerChecker(a,o.originX,o.originY)&&(k.stop(a.event),c(t,i,s,a,o))}function c(t,i,s,a,o){o.isAvailableBehavior=L.bind(l,null,s,a),t.trigger(i,o)}function l(t,i,s){var a=s[t];return!t||a&&(!L.isString(a)||i.event[a+"Key"])}L.mixin(D,R);var e=D;W.exports=e},9344:(W,G,T)=>{var L=T(60479),R=T(61485).onIrrelevantElement,k=T(51177);function O(D){return L.create(D)}G.makeRectPanelClipPath=function(D){return D=O(D),function(E,I){return k.clipPointsByRect(E,D)}},G.makeLinearBrushOtherExtent=function(D,E){return D=O(D),function(I){var S=E!=null?E:I,_=S?D.width:D.height,g=S?D.x:D.y;return[g,g+(_||0)]}},G.makeRectIsTargetByCursor=function(D,E,I){return D=O(D),function(S,_,g){return D.contain(_[0],_[1])&&!R(S,E,I)}}},61485:(W,G)=>{var T={axisPointer:1,tooltip:1,brush:1};G.onIrrelevantElement=function(L,R,k){var O=R.getComponentByElement(L.topTarget),D=O&&O.coordinateSystem;return O&&O!==k&&!T[O.mainType]&&D&&D.model!==k}},20582:(W,G,T)=>{var L=T(70492),R="\0_ec_interaction_mutex";function k(O){return O[R]||(O[R]={})}L.registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),G.take=function(O,D,E){k(O)[D]=E},G.release=function(O,D,E){var I=k(O);I[D]===E&&(I[D]=null)},G.isTaken=function(O,D){return!!k(O)[D]}},99337:(W,G,T)=>{var L=T(76172),R=L.getLayoutRect,k=L.box,O=L.positionElement,D=T(78988),E=T(51177);G.layout=function(I,S,_){var g=S.getBoxLayoutParams(),u=S.get("padding"),c={width:_.getWidth(),height:_.getHeight()},l=R(g,c,u);k(S.get("orient"),I,S.get("itemGap"),l.width,l.height),O(I,g,c,u)},G.makeBackground=function(I,S){var _=D.normalizeCssArray(S.get("padding")),g=S.getItemStyle(["color","opacity"]);return g.fill=S.get("backgroundColor"),new E.Rect({shape:{x:I.x-_[3],y:I.y-_[0],width:I.width+_[1]+_[3],height:I.height+_[0]+_[2],r:S.get("borderRadius")},style:g,silent:!0,z2:-1})}},31194:(W,G)=>{G.updateViewOnPan=function(T,L,R){var k=T.target,O=k.position;O[0]+=L,O[1]+=R,k.dirty()},G.updateViewOnZoom=function(T,L,R,k){var O=T.target,D=T.zoomLimit,E=O.position,I=O.scale,S=T.zoom=T.zoom||1;if(S*=L,D){var _=D.min||0,g=D.max||1/0;S=Math.max(Math.min(g,S),_)}var u=S/T.zoom;T.zoom=S,E[0]-=(R-E[0])*(u-1),E[1]-=(k-E[1])*(u-1),I[0]*=u,I[1]*=u,O.dirty()}},1501:(W,G,T)=>{var L=T(33051),R={updateSelectedMap:function(k){this._targetList=L.isArray(k)?k.slice():[],this._selectTargetMap=L.reduce(k||[],function(O,D){return O.set(D.name,D),O},L.createHashMap())},select:function(k,O){var D=O!=null?this._targetList[O]:this._selectTargetMap.get(k);this.get("selectedMode")==="single"&&this._selectTargetMap.each(function(E){E.selected=!1}),D&&(D.selected=!0)},unSelect:function(k,O){var D=O!=null?this._targetList[O]:this._selectTargetMap.get(k);D&&(D.selected=!1)},toggleSelected:function(k,O){var D=O!=null?this._targetList[O]:this._selectTargetMap.get(k);if(D!=null)return this[D.selected?"unSelect":"select"](k,O),D.selected},isSelected:function(k,O){var D=O!=null?this._targetList[O]:this._selectTargetMap.get(k);return D&&D.selected}};W.exports=R},19233:W=>{function G(L,R){var k=L[R]-L[1-R];return{span:Math.abs(k),sign:k>0?-1:k<0?1:R?-1:1}}function T(L,R){return Math.min(R[1]!=null?R[1]:1/0,Math.max(R[0]!=null?R[0]:-1/0,L))}W.exports=function(L,R,k,O,D,E){L=L||0;var I=k[1]-k[0];if(D!=null&&(D=T(D,[0,I])),E!=null&&(E=Math.max(E,D!=null?D:0)),O==="all"){var S=Math.abs(R[1]-R[0]);S=T(S,[0,I]),D=E=T(S,[D,E]),O=0}R[0]=T(R[0],k),R[1]=T(R[1],k);var _=G(R,O);R[O]+=L;var g=D||0,u=k.slice();_.sign<0?u[0]+=g:u[1]-=g,R[O]=T(R[O],u);var c=G(R,O);return D!=null&&(c.sign!==_.sign||c.span<D)&&(R[1-O]=R[O]+_.sign*D),c=G(R,O),E!=null&&c.span>E&&(R[1-O]=R[O]+c.sign*E),R}},78511:(W,G,T)=>{var L=T(70492);T(73650),T(13174),T(13134);var R=T(3391),k=T(98071);L.registerProcessor(L.PRIORITY.PROCESSOR.SERIES_FILTER,R),k.registerSubTypeDefaulter("legend",function(){return"plain"})},77139:(W,G,T)=>{T(78511),T(264),T(33681),T(50444)},73650:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(4272),O=T(32234).isNameSpecified,D=T(40292).legend.selector,E={all:{type:"all",title:R.clone(D.all)},inverse:{type:"inverse",title:R.clone(D.inverse)}},I=L.extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(_,g,u){this.mergeDefaultAndTheme(_,u),_.selected=_.selected||{},this._updateSelector(_)},mergeOption:function(_){I.superCall(this,"mergeOption",_),this._updateSelector(_)},_updateSelector:function(_){var g=_.selector;g===!0&&(g=_.selector=["all","inverse"]),R.isArray(g)&&R.each(g,function(u,c){R.isString(u)&&(u={type:u}),g[c]=R.merge(u,E[u.type])})},optionUpdated:function(){this._updateData(this.ecModel);var _=this._data;if(_[0]&&this.get("selectedMode")==="single"){for(var g=!1,u=0;u<_.length;u++){var c=_[u].get("name");if(this.isSelected(c)){this.select(c),g=!0;break}}!g&&this.select(_[0].get("name"))}},_updateData:function(_){var g=[],u=[];_.eachRawSeries(function(e){var t,i=e.name;if(u.push(i),e.legendVisualProvider){var s=e.legendVisualProvider.getAllNames();_.isSeriesFiltered(e)||(u=u.concat(s)),s.length?g=g.concat(s):t=!0}else t=!0;t&&O(e)&&g.push(e.name)}),this._availableNames=u;var c=this.get("data")||g,l=R.map(c,function(e){return typeof e!="string"&&typeof e!="number"||(e={name:e}),new k(e,this,this.ecModel)},this);this._data=l},getData:function(){return this._data},select:function(_){var g=this.option.selected;if(this.get("selectedMode")==="single"){var u=this._data;R.each(u,function(c){g[c.get("name")]=!1})}g[_]=!0},unSelect:function(_){this.get("selectedMode")!=="single"&&(this.option.selected[_]=!1)},toggleSelected:function(_){var g=this.option.selected;g.hasOwnProperty(_)||(g[_]=!0),this[g[_]?"unSelect":"select"](_)},allSelect:function(){var _=this._data,g=this.option.selected;R.each(_,function(u){g[u.get("name",!0)]=!0})},inverseSelect:function(){var _=this._data,g=this.option.selected;R.each(_,function(u){var c=u.get("name",!0);g.hasOwnProperty(c)||(g[c]=!0),g[c]=!g[c]})},isSelected:function(_){var g=this.option.selected;return!(g.hasOwnProperty(_)&&!g[_])&&R.indexOf(this._availableNames,_)>=0},getOrient:function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}}),S=I;W.exports=S},13134:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(33051),k=T(41525).createSymbol,O=T(51177),D=T(99337).makeBackground,E=T(76172),I=R.curry,S=R.each,_=O.Group,g=L.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new _),this._backgroundEl,this.group.add(this._selectorGroup=new _),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(t,i,s){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var o=t.get("align"),r=t.get("orient");o&&o!=="auto"||(o=t.get("left")==="right"&&r==="vertical"?"right":"left");var n=t.get("selector",!0),h=t.get("selectorPosition",!0);!n||h&&h!=="auto"||(h=r==="horizontal"?"end":"start"),this.renderInner(o,t,i,s,n,r,h);var p=t.getBoxLayoutParams(),d={width:s.getWidth(),height:s.getHeight()},f=t.get("padding"),v=E.getLayoutRect(p,d,f),m=this.layoutInner(t,o,v,a,n,h),y=E.getLayoutRect(R.defaults({width:m.width,height:m.height},p),d,f);this.group.attr("position",[y.x-m.x,y.y-m.y]),this.group.add(this._backgroundEl=D(m,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(t,i,s,a,o,r,n){var h=this.getContentGroup(),p=R.createHashMap(),d=i.get("selectedMode"),f=[];s.eachRawSeries(function(v){!v.get("legendHoverLink")&&f.push(v.id)}),S(i.getData(),function(v,m){var y=v.get("name");if(this.newlineDisabled||y!==""&&y!==`
`){var x=s.getSeriesByName(y)[0];if(!p.get(y))if(x){var w=x.getData(),M=w.getVisual("color"),C=w.getVisual("borderColor");typeof M=="function"&&(M=M(x.getDataParams(0))),typeof C=="function"&&(C=C(x.getDataParams(0)));var A=w.getVisual("legendSymbol")||"roundRect",P=w.getVisual("symbol");this._createItem(y,m,v,i,A,P,t,M,C,d).on("click",I(c,y,null,a,f)).on("mouseover",I(l,x.name,null,a,f)).on("mouseout",I(e,x.name,null,a,f)),p.set(y,!0)}else s.eachRawSeries(function(b){if(!p.get(y)&&b.legendVisualProvider){var N=b.legendVisualProvider;if(!N.containName(y))return;var B=N.indexOfName(y),z=N.getItemVisual(B,"color"),F=N.getItemVisual(B,"borderColor");this._createItem(y,m,v,i,"roundRect",null,t,z,F,d).on("click",I(c,null,y,a,f)).on("mouseover",I(l,null,y,a,f)).on("mouseout",I(e,null,y,a,f)),p.set(y,!0)}},this)}else h.add(new _({newline:!0}))},this),o&&this._createSelector(o,i,a,r,n)},_createSelector:function(t,i,s,a,o){var r=this.getSelectorGroup();S(t,function(n){(function(h){var p=h.type,d=new O.Text({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){s.dispatchAction({type:p==="all"?"legendAllSelect":"legendInverseSelect"})}});r.add(d);var f=i.getModel("selectorLabel"),v=i.getModel("emphasis.selectorLabel");O.setLabelStyle(d.style,d.hoverStyle={},f,v,{defaultText:h.title,isRectText:!1}),O.setHoverStyle(d)})(n)})},_createItem:function(t,i,s,a,o,r,n,h,p,d){var f=a.get("itemWidth"),v=a.get("itemHeight"),m=a.get("inactiveColor"),y=a.get("inactiveBorderColor"),x=a.get("symbolKeepAspect"),w=a.getModel("itemStyle"),M=a.isSelected(t),C=new _,A=s.getModel("textStyle"),P=s.get("icon"),b=s.getModel("tooltip"),N=b.parentModel,B=k(o=P||o,0,0,f,v,M?h:m,x==null||x);if(C.add(u(B,o,w,p,y,M)),!P&&r&&(r!==o||r==="none")){var z=.8*v;r==="none"&&(r="circle");var F=k(r,(f-z)/2,(v-z)/2,z,z,M?h:m,x==null||x);C.add(u(F,r,w,p,y,M))}var V=n==="left"?f+5:-5,H=n,U=a.get("formatter"),j=t;typeof U=="string"&&U?j=U.replace("{name}",t!=null?t:""):typeof U=="function"&&(j=U(t)),C.add(new O.Text({style:O.setTextStyle({},A,{text:j,x:V,y:v/2,textFill:M?A.getTextColor():m,textAlign:H,textVerticalAlign:"middle"})}));var X=new O.Rect({shape:C.getBoundingRect(),invisible:!0,tooltip:b.get("show")?R.extend({content:t,formatter:N.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:a.componentIndex,name:t,$vars:["name"]}},b.option):null});return C.add(X),C.eachChild(function(Y){Y.silent=!0}),X.silent=!d,this.getContentGroup().add(C),O.setHoverStyle(C),C.__legendDataIndex=i,C},layoutInner:function(t,i,s,a,o,r){var n=this.getContentGroup(),h=this.getSelectorGroup();E.box(t.get("orient"),n,t.get("itemGap"),s.width,s.height);var p=n.getBoundingRect(),d=[-p.x,-p.y];if(o){E.box("horizontal",h,t.get("selectorItemGap",!0));var f=h.getBoundingRect(),v=[-f.x,-f.y],m=t.get("selectorButtonGap",!0),y=t.getOrient().index,x=y===0?"width":"height",w=y===0?"height":"width",M=y===0?"y":"x";r==="end"?v[y]+=p[x]+m:d[y]+=f[x]+m,v[1-y]+=p[w]/2-f[w]/2,h.attr("position",v),n.attr("position",d);var C={x:0,y:0};return C[x]=p[x]+m+f[x],C[w]=Math.max(p[w],f[w]),C[M]=Math.min(0,f[M]+v[1-y]),C}return n.attr("position",d),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function u(t,i,s,a,o,r){var n;return i!=="line"&&i.indexOf("empty")<0?(n=s.getItemStyle(),t.style.stroke=a,r||(n.stroke=o)):n=s.getItemStyle(["borderWidth","borderColor"]),t.setStyle(n)}function c(t,i,s,a){e(t,i,s,a),s.dispatchAction({type:"legendToggleSelect",name:t!=null?t:i}),l(t,i,s,a)}function l(t,i,s,a){var o=s.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||s.dispatchAction({type:"highlight",seriesName:t,name:i,excludeSeriesId:a})}function e(t,i,s,a){var o=s.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||s.dispatchAction({type:"downplay",seriesName:t,name:i,excludeSeriesId:a})}W.exports=g},264:(W,G,T)=>{var L=T(73650),R=T(76172),k=R.mergeLayoutParam,O=R.getLayoutParams,D=L.extend({type:"legend.scroll",setScrollDataIndex:function(S){this.option.scrollDataIndex=S},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(S,_,g,u){var c=O(S);D.superCall(this,"init",S,_,g,u),E(this,S,c)},mergeOption:function(S,_){D.superCall(this,"mergeOption",S,_),E(this,this.option,S)}});function E(S,_,g){var u=[1,1];u[S.getOrient().index]=0,k(_,g,{type:"box",ignoreSize:u})}var I=D;W.exports=I},33681:(W,G,T)=>{var L=T(33051),R=T(51177),k=T(76172),O=T(13134),D=R.Group,E=["width","height"],I=["x","y"],S=O.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){S.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new D),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new D),this._showController},resetInner:function(){S.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(g,u,c,l,e,t,i){var s=this;S.superCall(this,"renderInner",g,u,c,l,e,t,i);var a=this._controllerGroup,o=u.get("pageIconSize",!0);L.isArray(o)||(o=[o,o]),n("pagePrev",0);var r=u.getModel("pageTextStyle");function n(h,p){var d=h+"DataIndex",f=R.createIcon(u.get("pageIcons",!0)[u.getOrient().name][p],{onclick:L.bind(s._pageGo,s,d,u,l)},{x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]});f.name=h,a.add(f)}a.add(new R.Text({name:"pageText",style:{textFill:r.getTextColor(),font:r.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),n("pageNext",1)},layoutInner:function(g,u,c,l,e,t){var i=this.getSelectorGroup(),s=g.getOrient().index,a=E[s],o=I[s],r=E[1-s],n=I[1-s];e&&k.box("horizontal",i,g.get("selectorItemGap",!0));var h=g.get("selectorButtonGap",!0),p=i.getBoundingRect(),d=[-p.x,-p.y],f=L.clone(c);e&&(f[a]=c[a]-p[a]-h);var v=this._layoutContentAndController(g,l,f,s,a,r,n);if(e){if(t==="end")d[s]+=v[a]+h;else{var m=p[a]+h;d[s]-=m,v[o]-=m}v[a]+=p[a]+h,d[1-s]+=v[n]+v[r]/2-p[r]/2,v[r]=Math.max(v[r],p[r]),v[n]=Math.min(v[n],p[n]+d[1-s]),i.attr("position",d)}return v},_layoutContentAndController:function(g,u,c,l,e,t,i){var s=this.getContentGroup(),a=this._containerGroup,o=this._controllerGroup;k.box(g.get("orient"),s,g.get("itemGap"),l?c.width:null,l?null:c.height),k.box("horizontal",o,g.get("pageButtonItemGap",!0));var r=s.getBoundingRect(),n=o.getBoundingRect(),h=this._showController=r[e]>c[e],p=[-r.x,-r.y];u||(p[l]=s.position[l]);var d=[0,0],f=[-n.x,-n.y],v=L.retrieve2(g.get("pageButtonGap",!0),g.get("itemGap",!0));h&&(g.get("pageButtonPosition",!0)==="end"?f[l]+=c[e]-n[e]:d[l]+=n[e]+v),f[1-l]+=r[t]/2-n[t]/2,s.attr("position",p),a.attr("position",d),o.attr("position",f);var m={x:0,y:0};if(m[e]=h?c[e]:r[e],m[t]=Math.max(r[t],n[t]),m[i]=Math.min(0,n[i]+f[1-l]),a.__rectSize=c[e],h){var y={x:0,y:0};y[e]=Math.max(c[e]-n[e]-v,0),y[t]=m[t],a.setClipPath(new R.Rect({shape:y})),a.__rectSize=y[e]}else o.eachChild(function(w){w.attr({invisible:!0,silent:!0})});var x=this._getPageInfo(g);return x.pageIndex!=null&&R.updateProps(s,{position:x.contentPosition},!!h&&g),this._updatePageInfoView(g,x),m},_pageGo:function(g,u,c){var l=this._getPageInfo(u)[g];l!=null&&c.dispatchAction({type:"legendScroll",scrollDataIndex:l,legendId:u.id})},_updatePageInfoView:function(g,u){var c=this._controllerGroup;L.each(["pagePrev","pageNext"],function(a){var o=u[a+"DataIndex"]!=null,r=c.childOfName(a);r&&(r.setStyle("fill",o?g.get("pageIconColor",!0):g.get("pageIconInactiveColor",!0)),r.cursor=o?"pointer":"default")});var l=c.childOfName("pageText"),e=g.get("pageFormatter"),t=u.pageIndex,i=t!=null?t+1:0,s=u.pageCount;l&&e&&l.setStyle("text",L.isString(e)?e.replace("{current}",i).replace("{total}",s):e({current:i,total:s}))},_getPageInfo:function(g){var u=g.get("scrollDataIndex",!0),c=this.getContentGroup(),l=this._containerGroup.__rectSize,e=g.getOrient().index,t=E[e],i=I[e],s=this._findTargetItemIndex(u),a=c.children(),o=a[s],r=a.length,n=r?1:0,h={contentPosition:c.position.slice(),pageCount:n,pageIndex:n-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!o)return h;var p=y(o);h.contentPosition[e]=-p.s;for(var d=s+1,f=p,v=p,m=null;d<=r;++d)(!(m=y(a[d]))&&v.e>f.s+l||m&&!x(m,f.s))&&(f=v.i>f.i?v:m)&&(h.pageNextDataIndex==null&&(h.pageNextDataIndex=f.i),++h.pageCount),v=m;for(d=s-1,f=p,v=p,m=null;d>=-1;--d)(m=y(a[d]))&&x(v,m.s)||!(f.i<v.i)||(v=f,h.pagePrevDataIndex==null&&(h.pagePrevDataIndex=f.i),++h.pageCount,++h.pageIndex),f=m;return h;function y(w){if(w){var M=w.getBoundingRect(),C=M[i]+w.position[e];return{s:C,e:C+M[t],i:w.__legendDataIndex}}}function x(w,M){return w.e>=M&&w.s<=M+l}},_findTargetItemIndex:function(g){return this._showController?(this.getContentGroup().eachChild(function(l,e){var t=l.__legendDataIndex;c==null&&t!=null&&(c=e),t===g&&(u=e)}),u!=null?u:c):0;var u,c}}),_=S;W.exports=_},13174:(W,G,T)=>{var L=T(70492),R=T(33051);function k(O,D,E){var I,S={},_=O==="toggleSelected";return E.eachComponent("legend",function(g){_&&I!=null?g[I?"select":"unSelect"](D.name):O==="allSelect"||O==="inverseSelect"?g[O]():(g[O](D.name),I=g.isSelected(D.name));var u=g.getData();R.each(u,function(c){var l=c.get("name");if(l!==`
`&&l!==""){var e=g.isSelected(l);S.hasOwnProperty(l)?S[l]=S[l]&&e:S[l]=e}})}),O==="allSelect"||O==="inverseSelect"?{selected:S}:{name:D.name,selected:S}}L.registerAction("legendToggleSelect","legendselectchanged",R.curry(k,"toggleSelected")),L.registerAction("legendAllSelect","legendselectall",R.curry(k,"allSelect")),L.registerAction("legendInverseSelect","legendinverseselect",R.curry(k,"inverseSelect")),L.registerAction("legendSelect","legendselected",R.curry(k,"select")),L.registerAction("legendUnSelect","legendunselected",R.curry(k,"unSelect"))},3391:W=>{W.exports=function(G){var T=G.findComponents({mainType:"legend"});T&&T.length&&G.filterSeries(function(L){for(var R=0;R<T.length;R++)if(!T[R].isSelected(L.name))return!1;return!0})}},50444:(W,G,T)=>{T(70492).registerAction("legendScroll","legendscroll",function(L,R){var k=L.scrollDataIndex;k!=null&&R.eachComponent({mainType:"legend",subType:"scroll",query:L},function(O){O.setScrollDataIndex(k)})})},35598:(W,G,T)=>{var L=T(70492);T(85082),T(25663),L.registerPreprocessor(function(R){R.markArea=R.markArea||{}})},34563:(W,G,T)=>{var L=T(70492);T(44971),T(13214),L.registerPreprocessor(function(R){R.markLine=R.markLine||{}})},74482:(W,G,T)=>{var L=T(70492);T(35869),T(71696),L.registerPreprocessor(function(R){R.markPoint=R.markPoint||{}})},85082:(W,G,T)=>{var L=T(8233).extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});W.exports=L},25663:(W,G,T)=>{var L=T(33051),R=T(21092),k=T(87587),O=T(85669),D=T(51177),E=T(42459),I=T(55597),S=function(e,t,i,s){var a=E.dataTransform(e,s[0]),o=E.dataTransform(e,s[1]),r=L.retrieve,n=a.coord,h=o.coord;n[0]=r(n[0],-1/0),n[1]=r(n[1],-1/0),h[0]=r(h[0],1/0),h[1]=r(h[1],1/0);var p=L.mergeAll([{},a,o]);return p.coord=[a.coord,o.coord],p.x0=a.x,p.y0=a.y,p.x1=o.x,p.y1=o.y,p};function _(e){return!isNaN(e)&&!isFinite(e)}function g(e,t,i,s){var a=1-e;return _(t[a])&&_(i[a])}function u(e,t){var i=t.coord[0],s=t.coord[1];return!(e.type!=="cartesian2d"||!i||!s||!g(1,i,s)&&!g(0,i,s))||E.dataFilter(e,{coord:i,x:t.x0,y:t.y0})||E.dataFilter(e,{coord:s,x:t.x1,y:t.y1})}function c(e,t,i,s,a){var o,r=s.coordinateSystem,n=e.getItemModel(t),h=O.parsePercent(n.get(i[0]),a.getWidth()),p=O.parsePercent(n.get(i[1]),a.getHeight());if(isNaN(h)||isNaN(p)){if(s.getMarkerPosition)o=s.getMarkerPosition(e.getValues(i,t));else{var d=[m=e.get(i[0],t),y=e.get(i[1],t)];r.clampData&&r.clampData(d,d),o=r.dataToPoint(d,!0)}if(r.type==="cartesian2d"){var f=r.getAxis("x"),v=r.getAxis("y"),m=e.get(i[0],t),y=e.get(i[1],t);_(m)?o[0]=f.toGlobalCoord(f.getExtent()[i[0]==="x0"?0:1]):_(y)&&(o[1]=v.toGlobalCoord(v.getExtent()[i[1]==="y0"?0:1]))}isNaN(h)||(o[0]=h),isNaN(p)||(o[1]=p)}else o=[h,p];return o}var l=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];I.extend({type:"markArea",updateTransform:function(e,t,i){t.eachSeries(function(s){var a=s.markAreaModel;if(a){var o=a.getData();o.each(function(r){var n=L.map(l,function(h){return c(o,r,h,s,i)});o.setItemLayout(r,n),o.getItemGraphicEl(r).setShape("points",n)})}},this)},renderSeries:function(e,t,i,s){var a=e.coordinateSystem,o=e.id,r=e.getData(),n=this.markerGroupMap,h=n.get(o)||n.set(o,{group:new D.Group});this.group.add(h.group),h.__keep=!0;var p=function(d,f,v){var m,y;d?(m=L.map(d&&d.dimensions,function(M){var C=f.getData(),A=C.getDimensionInfo(C.mapDimension(M))||{};return L.defaults({name:M},A)}),y=new k(L.map(["x0","y0","x1","y1"],function(M,C){return{name:M,type:m[C%2].type}}),v)):y=new k(m=[{name:"value",type:"float"}],v);var x=L.map(v.get("data"),L.curry(S,f,d,v));d&&(x=L.filter(x,L.curry(u,d)));var w=d?function(M,C,A,P){return M.coord[Math.floor(P/2)][P%2]}:function(M){return M.value};return y.initData(x,null,w),y.hasItemOption=!0,y}(a,e,t);t.setData(p),p.each(function(d){var f=L.map(l,function(m){return c(p,d,m,e,s)}),v=!0;L.each(l,function(m){if(v){var y=p.get(m[0],d),x=p.get(m[1],d);(_(y)||a.getAxis("x").containData(y))&&(_(x)||a.getAxis("y").containData(x))&&(v=!1)}}),p.setItemLayout(d,{points:f,allClipped:v}),p.setItemVisual(d,{color:r.getVisual("color")})}),p.diff(h.__data).add(function(d){var f=p.getItemLayout(d);if(!f.allClipped){var v=new D.Polygon({shape:{points:f.points}});p.setItemGraphicEl(d,v),h.group.add(v)}}).update(function(d,f){var v=h.__data.getItemGraphicEl(f),m=p.getItemLayout(d);m.allClipped?v&&h.group.remove(v):(v?D.updateProps(v,{shape:{points:m.points}},t,d):v=new D.Polygon({shape:{points:m.points}}),p.setItemGraphicEl(d,v),h.group.add(v))}).remove(function(d){var f=h.__data.getItemGraphicEl(d);h.group.remove(f)}).execute(),p.eachItemGraphicEl(function(d,f){var v=p.getItemModel(f),m=v.getModel("label"),y=v.getModel("emphasis.label"),x=p.getItemVisual(f,"color");d.useStyle(L.defaults(v.getModel("itemStyle").getItemStyle(),{fill:R.modifyAlpha(x,.4),stroke:x})),d.hoverStyle=v.getModel("emphasis.itemStyle").getItemStyle(),D.setLabelStyle(d.style,d.hoverStyle,m,y,{labelFetcher:t,labelDataIndex:f,defaultText:p.getName(f)||"",isRectText:!0,autoColor:x}),D.setHoverStyle(d,{}),d.dataModel=t}),h.__data=p,h.group.silent=t.get("silent")||e.get("silent")}})},44971:(W,G,T)=>{var L=T(8233).extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});W.exports=L},13214:(W,G,T)=>{var L=T(33051),R=T(87587),k=T(85669),O=T(42459),D=T(47145),E=T(55597),I=T(99936).getStackedDimension,S=function(e,t,i,s){var a=e.getData(),o=s.type;if(!L.isArray(s)&&(o==="min"||o==="max"||o==="average"||o==="median"||s.xAxis!=null||s.yAxis!=null)){var r,n;if(s.yAxis!=null||s.xAxis!=null)r=t.getAxis(s.yAxis!=null?"y":"x"),n=L.retrieve(s.yAxis,s.xAxis);else{var h=O.getAxisInfo(s,a,t,e);r=h.valueAxis;var p=I(a,h.valueDataDim);n=O.numCalculate(a,p,o)}var d=r.dim==="x"?0:1,f=1-d,v=L.clone(s),m={};v.type=null,v.coord=[],m.coord=[],v.coord[f]=-1/0,m.coord[f]=1/0;var y=i.get("precision");y>=0&&typeof n=="number"&&(n=+n.toFixed(Math.min(y,20))),v.coord[d]=m.coord[d]=n,s=[v,m,{type:o,valueIndex:s.valueIndex,value:n}]}return(s=[O.dataTransform(e,s[0]),O.dataTransform(e,s[1]),L.extend({},s[2])])[2].type=s[2].type||"",L.merge(s[2],s[0]),L.merge(s[2],s[1]),s};function _(e){return!isNaN(e)&&!isFinite(e)}function g(e,t,i,s){var a=1-e,o=s.dimensions[e];return _(t[a])&&_(i[a])&&t[e]===i[e]&&s.getAxis(o).containData(t[e])}function u(e,t){if(e.type==="cartesian2d"){var i=t[0].coord,s=t[1].coord;if(i&&s&&(g(1,i,s,e)||g(0,i,s,e)))return!0}return O.dataFilter(e,t[0])&&O.dataFilter(e,t[1])}function c(e,t,i,s,a){var o,r=s.coordinateSystem,n=e.getItemModel(t),h=k.parsePercent(n.get("x"),a.getWidth()),p=k.parsePercent(n.get("y"),a.getHeight());if(isNaN(h)||isNaN(p)){if(s.getMarkerPosition)o=s.getMarkerPosition(e.getValues(e.dimensions,t));else{var d=r.dimensions,f=e.get(d[0],t),v=e.get(d[1],t);o=r.dataToPoint([f,v])}if(r.type==="cartesian2d"){var m=r.getAxis("x"),y=r.getAxis("y");d=r.dimensions,_(e.get(d[0],t))?o[0]=m.toGlobalCoord(m.getExtent()[i?0:1]):_(e.get(d[1],t))&&(o[1]=y.toGlobalCoord(y.getExtent()[i?0:1]))}isNaN(h)||(o[0]=h),isNaN(p)||(o[1]=p)}else o=[h,p];e.setItemLayout(t,o)}var l=E.extend({type:"markLine",updateTransform:function(e,t,i){t.eachSeries(function(s){var a=s.markLineModel;if(a){var o=a.getData(),r=a.__from,n=a.__to;r.each(function(h){c(r,h,!0,s,i),c(n,h,!1,s,i)}),o.each(function(h){o.setItemLayout(h,[r.getItemLayout(h),n.getItemLayout(h)])}),this.markerGroupMap.get(s.id).updateLayout()}},this)},renderSeries:function(e,t,i,s){var a=e.coordinateSystem,o=e.id,r=e.getData(),n=this.markerGroupMap,h=n.get(o)||n.set(o,new D);this.group.add(h.group);var p=function(w,M,C){var A;A=w?L.map(w&&w.dimensions,function(F){var V=M.getData().getDimensionInfo(M.getData().mapDimension(F))||{};return L.defaults({name:F},V)}):[{name:"value",type:"float"}];var P=new R(A,C),b=new R(A,C),N=new R([],C),B=L.map(C.get("data"),L.curry(S,M,w,C));w&&(B=L.filter(B,L.curry(u,w)));var z=w?O.dimValueGetter:function(F){return F.value};return P.initData(L.map(B,function(F){return F[0]}),null,z),b.initData(L.map(B,function(F){return F[1]}),null,z),N.initData(L.map(B,function(F){return F[2]})),N.hasItemOption=!0,{from:P,to:b,line:N}}(a,e,t),d=p.from,f=p.to,v=p.line;t.__from=d,t.__to=f,t.setData(v);var m=t.get("symbol"),y=t.get("symbolSize");function x(w,M,C){var A=w.getItemModel(M);c(w,M,C,e,s),w.setItemVisual(M,{symbolRotate:A.get("symbolRotate"),symbolSize:A.get("symbolSize")||y[C?0:1],symbol:A.get("symbol",!0)||m[C?0:1],color:A.get("itemStyle.color")||r.getVisual("color")})}L.isArray(m)||(m=[m,m]),typeof y=="number"&&(y=[y,y]),p.from.each(function(w){x(d,w,!0),x(f,w,!1)}),v.each(function(w){var M=v.getItemModel(w).get("lineStyle.color");v.setItemVisual(w,{color:M||d.getItemVisual(w,"color")}),v.setItemLayout(w,[d.getItemLayout(w),f.getItemLayout(w)]),v.setItemVisual(w,{fromSymbolRotate:d.getItemVisual(w,"symbolRotate"),fromSymbolSize:d.getItemVisual(w,"symbolSize"),fromSymbol:d.getItemVisual(w,"symbol"),toSymbolRotate:f.getItemVisual(w,"symbolRotate"),toSymbolSize:f.getItemVisual(w,"symbolSize"),toSymbol:f.getItemVisual(w,"symbol")})}),h.updateData(v),p.line.eachItemGraphicEl(function(w,M){w.traverse(function(C){C.dataModel=t})}),h.__keep=!0,h.group.silent=t.get("silent")||e.get("silent")}});W.exports=l},35869:(W,G,T)=>{var L=T(8233).extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});W.exports=L},71696:(W,G,T)=>{var L=T(33051),R=T(68162),k=T(85669),O=T(87587),D=T(42459);function E(S,_,g){var u=_.coordinateSystem;S.each(function(c){var l,e=S.getItemModel(c),t=k.parsePercent(e.get("x"),g.getWidth()),i=k.parsePercent(e.get("y"),g.getHeight());if(isNaN(t)||isNaN(i)){if(_.getMarkerPosition)l=_.getMarkerPosition(S.getValues(S.dimensions,c));else if(u){var s=S.get(u.dimensions[0],c),a=S.get(u.dimensions[1],c);l=u.dataToPoint([s,a])}}else l=[t,i];isNaN(t)||(l[0]=t),isNaN(i)||(l[1]=i),S.setItemLayout(c,l)})}var I=T(55597).extend({type:"markPoint",updateTransform:function(S,_,g){_.eachSeries(function(u){var c=u.markPointModel;c&&(E(c.getData(),u,g),this.markerGroupMap.get(u.id).updateLayout(c))},this)},renderSeries:function(S,_,g,u){var c=S.coordinateSystem,l=S.id,e=S.getData(),t=this.markerGroupMap,i=t.get(l)||t.set(l,new R),s=function(a,o,r){var n;n=a?L.map(a&&a.dimensions,function(d){var f=o.getData().getDimensionInfo(o.getData().mapDimension(d))||{};return L.defaults({name:d},f)}):[{name:"value",type:"float"}];var h=new O(n,r),p=L.map(r.get("data"),L.curry(D.dataTransform,o));return a&&(p=L.filter(p,L.curry(D.dataFilter,a))),h.initData(p,null,a?D.dimValueGetter:function(d){return d.value}),h}(c,S,_);_.setData(s),E(_.getData(),S,u),s.each(function(a){var o=s.getItemModel(a),r=o.getShallow("symbol"),n=o.getShallow("symbolSize"),h=o.getShallow("symbolRotate"),p=L.isFunction(r),d=L.isFunction(n),f=L.isFunction(h);if(p||d||f){var v=_.getRawValue(a),m=_.getDataParams(a);p&&(r=r(v,m)),d&&(n=n(v,m)),f&&(h=h(v,m))}s.setItemVisual(a,{symbol:r,symbolSize:n,symbolRotate:h,color:o.get("itemStyle.color")||e.getVisual("color")})}),i.updateData(s),this.group.add(i.group),s.eachItemGraphicEl(function(a){a.traverse(function(o){o.dataModel=_})}),i.__keep=!0,i.group.silent=_.get("silent")||S.get("silent")}});W.exports=I},8233:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(33051),k=T(66387),O=T(32234),D=T(78988),E=T(61219),I=D.addCommas,S=D.encodeHTML;function _(c){O.defaultEmphasis(c,"label",["show"])}var g=L.extendComponentModel({type:"marker",dependencies:["series","grid","polar","geo"],init:function(c,l,e){this.mergeDefaultAndTheme(c,e),this._mergeOption(c,e,!1,!0)},isAnimationEnabled:function(){if(k.node)return!1;var c=this.__hostSeries;return this.getShallow("animation")&&c&&c.isAnimationEnabled()},mergeOption:function(c,l){this._mergeOption(c,l,!1,!1)},_mergeOption:function(c,l,e,t){var i=this.constructor,s=this.mainType+"Model";e||l.eachSeries(function(a){var o=a.get(this.mainType,!0),r=a[s];o&&o.data?(r?r._mergeOption(o,l,!0):(t&&_(o),R.each(o.data,function(n){n instanceof Array?(_(n[0]),_(n[1])):_(n)}),r=new i(o,this,l),R.extend(r,{mainType:this.mainType,seriesIndex:a.seriesIndex,name:a.name,createdBySelf:!0}),r.__hostSeries=a),a[s]=r):a[s]=null},this)},formatTooltip:function(c,l,e,t){var i=this.getData(),s=this.getRawValue(c),a=R.isArray(s)?R.map(s,I).join(", "):I(s),o=i.getName(c),r=S(this.name);return(s!=null||o)&&(r+=t==="html"?"<br/>":`
`),o&&(r+=S(o),s!=null&&(r+=" : ")),s!=null&&(r+=S(a)),r},getData:function(){return this._data},setData:function(c){this._data=c}});R.mixin(g,E);var u=g;W.exports=u},55597:(W,G,T)=>{var L=T(70492),R=T(33051),k=L.extendComponentView({type:"marker",init:function(){this.markerGroupMap=R.createHashMap()},render:function(O,D,E){var I=this.markerGroupMap;I.each(function(_){_.__keep=!1});var S=this.type+"Model";D.eachSeries(function(_){var g=_[S];g&&this.renderSeries(_,g,D,E)},this),I.each(function(_){!_.__keep&&this.group.remove(_.group)},this)},renderSeries:function(){}});W.exports=k},42459:(W,G,T)=>{var L=T(33051),R=T(85669),k=T(99936).isDimensionStacked,O=L.indexOf;function D(g,u,c,l,e,t){var i=[],s=k(u,l)?u.getCalculationInfo("stackResultDimension"):l,a=_(u,s,g),o=u.indicesOfNearest(s,a)[0];i[e]=u.get(c,o),i[t]=u.get(s,o);var r=u.get(l,o),n=R.getPrecision(u.get(l,o));return(n=Math.min(n,20))>=0&&(i[t]=+i[t].toFixed(n)),[i,r]}var E=L.curry,I={min:E(D,"min"),max:E(D,"max"),average:E(D,"average")};function S(g,u,c,l){var e={};return g.valueIndex!=null||g.valueDim!=null?(e.valueDataDim=g.valueIndex!=null?u.getDimension(g.valueIndex):g.valueDim,e.valueAxis=c.getAxis(function(t,i){var s=t.getData(),a=s.dimensions;i=s.getDimension(i);for(var o=0;o<a.length;o++){var r=s.getDimensionInfo(a[o]);if(r.name===i)return r.coordDim}}(l,e.valueDataDim)),e.baseAxis=c.getOtherAxis(e.valueAxis),e.baseDataDim=u.mapDimension(e.baseAxis.dim)):(e.baseAxis=l.getBaseAxis(),e.valueAxis=c.getOtherAxis(e.baseAxis),e.baseDataDim=u.mapDimension(e.baseAxis.dim),e.valueDataDim=u.mapDimension(e.valueAxis.dim)),e}function _(g,u,c){if(c==="average"){var l=0,e=0;return g.each(u,function(t,i){isNaN(t)||(l+=t,e++)}),l/e}return c==="median"?g.getMedian(u):g.getDataExtent(u,!0)[c==="max"?1:0]}G.dataTransform=function(g,u){var c=g.getData(),l=g.coordinateSystem;if(u&&!function(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}(u)&&!L.isArray(u.coord)&&l){var e=l.dimensions,t=S(u,c,l,g);if((u=L.clone(u)).type&&I[u.type]&&t.baseAxis&&t.valueAxis){var i=O(e,t.baseAxis.dim),s=O(e,t.valueAxis.dim),a=I[u.type](c,t.baseDataDim,t.valueDataDim,i,s);u.coord=a[0],u.value=a[1]}else{for(var o=[u.xAxis!=null?u.xAxis:u.radiusAxis,u.yAxis!=null?u.yAxis:u.angleAxis],r=0;r<2;r++)I[o[r]]&&(o[r]=_(c,c.mapDimension(e[r]),o[r]));u.coord=o}}return u},G.getAxisInfo=S,G.dataFilter=function(g,u){return!(g&&g.containData&&u.coord&&!function(c){return!(isNaN(parseFloat(c.x))&&isNaN(parseFloat(c.y)))}(u))||g.containData(u.coord)},G.dimValueGetter=function(g,u,c,l){return l<2?g.coord&&g.coord[l]:g.value},G.numCalculate=_},75781:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(270),O=T(20769);T(14506),T(20946),T(7849),L.extendComponentView({type:"parallel",render:function(I,S,_){this._model=I,this._api=_,this._handlers||(this._handlers={},R.each(D,function(g,u){_.getZr().on(u,this._handlers[u]=R.bind(g,this))},this)),k.createOrUpdate(this,"_throttledDispatchExpand",I.get("axisExpandRate"),"fixRate")},dispose:function(I,S){R.each(this._handlers,function(_,g){S.getZr().off(g,_)}),this._handlers=null},_throttledDispatchExpand:function(I){this._dispatchExpand(I)},_dispatchExpand:function(I){I&&this._api.dispatchAction(R.extend({type:"parallelAxisExpand"},I))}});var D={mousedown:function(I){E(this,"click")&&(this._mouseDownPoint=[I.offsetX,I.offsetY])},mouseup:function(I){var S=this._mouseDownPoint;if(E(this,"click")&&S){var _=[I.offsetX,I.offsetY];if(Math.pow(S[0]-_[0],2)+Math.pow(S[1]-_[1],2)>5)return;var g=this._model.coordinateSystem.getSlidedAxisExpandWindow([I.offsetX,I.offsetY]);g.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:g.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(I){if(!this._mouseDownPoint&&E(this,"mousemove")){var S=this._model,_=S.coordinateSystem.getSlidedAxisExpandWindow([I.offsetX,I.offsetY]),g=_.behavior;g==="jump"&&this._throttledDispatchExpand.debounceNextCall(S.get("axisExpandDebounce")),this._throttledDispatchExpand(g==="none"?null:{axisExpandWindow:_.axisExpandWindow,animation:g==="jump"&&null})}}};function E(I,S){var _=I._model;return _.get("axisExpandable")&&_.get("axisExpandTriggerOn")===S}L.registerPreprocessor(O)},7849:(W,G,T)=>{T(14506),T(8985),T(20594)},49225:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(21709);T(90580),T(3229),T(48540),T(52528),T(72432),L.registerLayout(R.curry(k,"bar")),L.extendComponentView({type:"polar"})},22881:(W,G,T)=>{T(26884),T(48681),T(15229)},15229:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(33051),k=T(58608),O=T(51177),D=["axisLine","axisTickLabel","axisName"],E=L.extendComponentView({type:"radar",render:function(I,S,_){this.group.removeAll(),this._buildAxes(I),this._buildSplitLineAndArea(I)},_buildAxes:function(I){var S=I.coordinateSystem,_=S.getIndicatorAxes(),g=R.map(_,function(u){return new k(u.model,{position:[S.cx,S.cy],rotation:u.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});R.each(g,function(u){R.each(D,u.add,u),this.group.add(u.getGroup())},this)},_buildSplitLineAndArea:function(I){var S=I.coordinateSystem,_=S.getIndicatorAxes();if(_.length){var g=I.get("shape"),u=I.getModel("splitLine"),c=I.getModel("splitArea"),l=u.getModel("lineStyle"),e=c.getModel("areaStyle"),t=u.get("show"),i=c.get("show"),s=l.get("color"),a=e.get("color");s=R.isArray(s)?s:[s],a=R.isArray(a)?a:[a];var o=[],r=[];if(g==="circle")for(var n=_[0].getTicksCoords(),h=S.cx,p=S.cy,d=0;d<n.length;d++)t&&o[C(o,s,d)].push(new O.Circle({shape:{cx:h,cy:p,r:n[d].coord}})),i&&d<n.length-1&&r[C(r,a,d)].push(new O.Ring({shape:{cx:h,cy:p,r0:n[d].coord,r:n[d+1].coord}}));else{var f,v=R.map(_,function(A,P){var b=A.getTicksCoords();return f=f==null?b.length-1:Math.min(b.length-1,f),R.map(b,function(N){return S.coordToPoint(N.coord,P)})}),m=[];for(d=0;d<=f;d++){for(var y=[],x=0;x<_.length;x++)y.push(v[x][d]);y[0]&&y.push(y[0].slice()),t&&o[C(o,s,d)].push(new O.Polyline({shape:{points:y}})),i&&m&&r[C(r,a,d-1)].push(new O.Polygon({shape:{points:y.concat(m)}})),m=y.slice().reverse()}}var w=l.getLineStyle(),M=e.getAreaStyle();R.each(r,function(A,P){this.group.add(O.mergePath(A,{style:R.defaults({stroke:"none",fill:a[P%a.length]},M),silent:!0}))},this),R.each(o,function(A,P){this.group.add(O.mergePath(A,{style:R.defaults({fill:"none",stroke:s[P%s.length]},w),silent:!0}))},this)}function C(A,P,b){var N=b%P.length;return A[N]=A[N]||[],N}}});W.exports=E},48540:(W,G,T)=>{T(90580),T(81832)},84066:(W,G,T)=>{var L=T(70492);T(2798),T(55165),T(35203),T(52528),T(16795),L.extendComponentView({type:"single"})},56913:(W,G,T)=>{var L=T(70492),R=T(28642);T(94015),T(4569),T(13142),T(99032),L.registerPreprocessor(R)},13142:(W,G,T)=>{var L=T(33051),R=T(84355),k=T(61219),O=R.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});L.mixin(O,k);var D=O;W.exports=D},99032:(W,G,T)=>{var L=T(33051),R=T(60479),k=T(32892),O=T(51177),D=T(76172),E=T(51640),I=T(22631),S=T(41525).createSymbol,_=T(97980),g=T(85669),u=T(78988).encodeHTML,c=L.bind,l=L.each,e=Math.PI,t=E.extend({type:"timeline.slider",init:function(a,o){this.api=o,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(a,o,r,n){if(this.model=a,this.api=r,this.ecModel=o,this.group.removeAll(),a.get("show",!0)){var h=this._layout(a,r),p=this._createGroup("mainGroup"),d=this._createGroup("labelGroup"),f=this._axis=this._createAxis(h,a);a.formatTooltip=function(v){return u(f.scale.getLabel(v))},l(["AxisLine","AxisTick","Control","CurrentPointer"],function(v){this["_render"+v](h,p,f,a)},this),this._renderAxisLabel(h,d,f,a),this._position(h,a)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(a,o){var r=a.get("label.position"),n=a.get("orient"),h=function(j,X){return D.getLayoutRect(j.getBoxLayoutParams(),{width:X.getWidth(),height:X.getHeight()},j.get("padding"))}(a,o);r==null||r==="auto"?r=n==="horizontal"?h.y+h.height/2<o.getHeight()/2?"-":"+":h.x+h.width/2<o.getWidth()/2?"+":"-":isNaN(r)&&(r={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[n][r]);var p,d,f,v,m={horizontal:"center",vertical:r>=0||r==="+"?"left":"right"},y={horizontal:r>=0||r==="+"?"top":"bottom",vertical:"middle"},x={horizontal:0,vertical:e/2},w=n==="vertical"?h.height:h.width,M=a.getModel("controlStyle"),C=M.get("show",!0),A=C?M.get("itemSize"):0,P=C?M.get("itemGap"):0,b=A+P,N=a.get("label.rotate")||0;N=N*e/180;var B=M.get("position",!0),z=C&&M.get("showPlayBtn",!0),F=C&&M.get("showPrevBtn",!0),V=C&&M.get("showNextBtn",!0),H=0,U=w;return B==="left"||B==="bottom"?(z&&(p=[0,0],H+=b),F&&(d=[H,0],H+=b),V&&(f=[U-A,0],U-=b)):(z&&(p=[U-A,0],U-=b),F&&(d=[0,0],H+=b),V&&(f=[U-A,0],U-=b)),v=[H,U],a.get("inverse")&&v.reverse(),{viewRect:h,mainLength:w,orient:n,rotation:x[n],labelRotation:N,labelPosOpt:r,labelAlign:a.get("label.align")||m[n],labelBaseline:a.get("label.verticalAlign")||a.get("label.baseline")||y[n],playPosition:p,prevBtnPosition:d,nextBtnPosition:f,axisExtent:v,controlSize:A,controlGap:P}},_position:function(a,o){var r=this._mainGroup,n=this._labelGroup,h=a.viewRect;if(a.orient==="vertical"){var p=k.create(),d=h.x,f=h.y+h.height;k.translate(p,p,[-d,-f]),k.rotate(p,p,-e/2),k.translate(p,p,[d,f]),(h=h.clone()).applyTransform(p)}var v=P(h),m=P(r.getBoundingRect()),y=P(n.getBoundingRect()),x=r.position,w=n.position;w[0]=x[0]=v[0][0];var M,C=a.labelPosOpt;function A(N){var B=N.position;N.origin=[v[0][0]-B[0],v[1][0]-B[1]]}function P(N){return[[N.x,N.x+N.width],[N.y,N.y+N.height]]}function b(N,B,z,F,V){N[F]+=z[F][V]-B[F][V]}isNaN(C)?(b(x,m,v,1,M=C==="+"?0:1),b(w,y,v,1,1-M)):(b(x,m,v,1,M=C>=0?0:1),w[1]=x[1]+C),r.attr("position",x),n.attr("position",w),r.rotation=n.rotation=a.rotation,A(r),A(n)},_createAxis:function(a,o){var r=o.getData(),n=o.get("axisType"),h=_.createScaleByModel(o,n);h.getTicks=function(){return r.mapArray(["value"],function(f){return f})};var p=r.getDataExtent("value");h.setExtent(p[0],p[1]),h.niceTicks();var d=new I("value",h,a.axisExtent,n);return d.model=o,d},_createGroup:function(a){var o=this["_"+a]=new O.Group;return this.group.add(o),o},_renderAxisLine:function(a,o,r,n){var h=r.getExtent();n.get("lineStyle.show")&&o.add(new O.Line({shape:{x1:h[0],y1:0,x2:h[1],y2:0},style:L.extend({lineCap:"round"},n.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(a,o,r,n){var h=n.getData(),p=r.scale.getTicks();l(p,function(d){var f=r.dataToCoord(d),v=h.getItemModel(d),m=v.getModel("itemStyle"),y=v.getModel("emphasis.itemStyle"),x={position:[f,0],onclick:c(this._changeTimeline,this,d)},w=i(v,m,o,x);O.setHoverStyle(w,y.getItemStyle()),v.get("tooltip")?(w.dataIndex=d,w.dataModel=n):w.dataIndex=w.dataModel=null},this)},_renderAxisLabel:function(a,o,r,n){if(r.getLabelModel().get("show")){var h=n.getData(),p=r.getViewLabels();l(p,function(d){var f=d.tickValue,v=h.getItemModel(f),m=v.getModel("label"),y=v.getModel("emphasis.label"),x=r.dataToCoord(d.tickValue),w=new O.Text({position:[x,0],rotation:a.labelRotation-a.rotation,onclick:c(this._changeTimeline,this,f),silent:!1});O.setTextStyle(w.style,m,{text:d.formattedLabel,textAlign:a.labelAlign,textVerticalAlign:a.labelBaseline}),o.add(w),O.setHoverStyle(w,O.setTextStyle({},y))},this)}},_renderControl:function(a,o,r,n){var h=a.controlSize,p=a.rotation,d=n.getModel("controlStyle").getItemStyle(),f=n.getModel("emphasis.controlStyle").getItemStyle(),v=[0,-h/2,h,h],m=n.getPlayState(),y=n.get("inverse",!0);function x(w,M,C,A){if(w){var P=function(b,N,B,z){var F=z.style,V=O.createIcon(b.get(N),z||{},new R(B[0],B[1],B[2],B[3]));return F&&V.setStyle(F),V}(n,M,v,{position:w,origin:[h/2,0],rotation:A?-p:0,rectHover:!0,style:d,onclick:C});o.add(P),O.setHoverStyle(P,f)}}x(a.nextBtnPosition,"controlStyle.nextIcon",c(this._changeTimeline,this,y?"-":"+")),x(a.prevBtnPosition,"controlStyle.prevIcon",c(this._changeTimeline,this,y?"+":"-")),x(a.playPosition,"controlStyle."+(m?"stopIcon":"playIcon"),c(this._handlePlayClick,this,!m),!0)},_renderCurrentPointer:function(a,o,r,n){var h=n.getData(),p=n.getCurrentIndex(),d=h.getItemModel(p).getModel("checkpointStyle"),f=this,v={onCreate:function(m){m.draggable=!0,m.drift=c(f._handlePointerDrag,f),m.ondragend=c(f._handlePointerDragend,f),s(m,p,r,n,!0)},onUpdate:function(m){s(m,p,r,n)}};this._currentPointer=i(d,d,this._mainGroup,{},this._currentPointer,v)},_handlePlayClick:function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},_handlePointerDrag:function(a,o,r){this._clearTimer(),this._pointerChangeTimeline([r.offsetX,r.offsetY])},_handlePointerDragend:function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},_pointerChangeTimeline:function(a,o){var r=this._toAxisCoord(a)[0],n=this._axis,h=g.asc(n.getExtent().slice());r>h[1]&&(r=h[1]),r<h[0]&&(r=h[0]),this._currentPointer.position[0]=r,this._currentPointer.dirty();var p=this._findNearestTick(r),d=this.model;(o||p!==d.getCurrentIndex()&&d.get("realtime"))&&this._changeTimeline(p)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(c(function(){var a=this.model;this._changeTimeline(a.getCurrentIndex()+(a.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(a){var o=this._mainGroup.getLocalTransform();return O.applyTransform(a,o,!0)},_findNearestTick:function(a){var o,r=this.model.getData(),n=1/0,h=this._axis;return r.each(["value"],function(p,d){var f=h.dataToCoord(p),v=Math.abs(f-a);v<n&&(n=v,o=d)}),o},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(a){var o=this.model.getCurrentIndex();a==="+"?a=o+1:a==="-"&&(a=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})}});function i(a,o,r,n,h,p){var d=o.get("color");if(h)h.setColor(d),r.add(h),p&&p.onUpdate(h);else{var f=a.get("symbol");(h=S(f,-1,-1,2,2,d)).setStyle("strokeNoScale",!0),r.add(h),p&&p.onCreate(h)}var v=o.getItemStyle(["color","symbol","symbolSize"]);h.setStyle(v),n=L.merge({rectHover:!0,z2:100},n,!0);var m=a.get("symbolSize");(m=m instanceof Array?m.slice():[+m,+m])[0]/=2,m[1]/=2,n.scale=m;var y=a.get("symbolOffset");if(y){var x=n.position=n.position||[0,0];x[0]+=g.parsePercent(y[0],m[0]),x[1]+=g.parsePercent(y[1],m[1])}var w=a.get("symbolRotate");return n.rotation=(w||0)*Math.PI/180||0,h.attr(n),h.updateTransform(),h}function s(a,o,r,n,h){if(!a.dragging){var p=n.getModel("checkpointStyle"),d=r.dataToCoord(n.getData().get(["value"],o));h||!p.get("animation",!0)?a.attr({position:[d,0]}):(a.stopAnimation(!0),a.animateTo({position:[d,0]},p.get("animationDuration",!0),p.get("animationEasing",!0)))}}W.exports=t},22631:(W,G,T)=>{var L=T(33051),R=T(3245),k=function(D,E,I,S){R.call(this,D,E,I),this.type=S||"value",this.model=null};k.prototype={constructor:k,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return this.model.get("orient")==="horizontal"}},L.inherits(k,R);var O=k;W.exports=O},84355:(W,G,T)=>{var L=T(33051),R=T(98071),k=T(87587),O=T(32234),D=R.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(I,S,_){this._data,this._names,this.mergeDefaultAndTheme(I,_),this._initData()},mergeOption:function(I){D.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(I){I==null&&(I=this.option.currentIndex);var S=this._data.count();this.option.loop?I=(I%S+S)%S:(I>=S&&(I=S-1),I<0&&(I=0)),this.option.currentIndex=I},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(I){this.option.autoPlay=!!I},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var I=this.option,S=I.data||[],_=I.axisType,g=this._names=[];if(_==="category"){var u=[];L.each(S,function(l,e){var t,i=O.getDataItemValue(l);L.isObject(l)?(t=L.clone(l)).value=e:t=e,u.push(t),L.isString(i)||i!=null&&!isNaN(i)||(i=""),g.push(i+"")}),S=u}var c={category:"ordinal",time:"time"}[_]||"number";(this._data=new k([{name:"value",type:c}],this)).initData(S,g)},getData:function(){return this._data},getCategories:function(){if(this.get("axisType")==="category")return this._names.slice()}}),E=D;W.exports=E},51640:(W,G,T)=>{var L=T(33166).extend({type:"timeline"});W.exports=L},28642:(W,G,T)=>{var L=T(33051);function R(O){var D=O.itemStyle||(O.itemStyle={}),E=D.emphasis||(D.emphasis={}),I=O.label||O.label||{},S=I.normal||(I.normal={}),_={normal:1,emphasis:1};L.each(I,function(g,u){_[u]||k(S,u)||(S[u]=g)}),E.label&&!k(I,"emphasis")&&(I.emphasis=E.label,delete E.label)}function k(O,D){return O.hasOwnProperty(D)}W.exports=function(O){var D=O&&O.timeline;L.isArray(D)||(D=D?[D]:[]),L.each(D,function(E){E&&function(I){var S=I.type,_={number:"value",time:"time"};if(_[S]&&(I.axisType=_[S],delete I.type),R(I),k(I,"controlPosition")){var g=I.controlStyle||(I.controlStyle={});k(g,"position")||(g.position=I.controlPosition),g.position!=="none"||k(g,"show")||(g.show=!1,delete g.position),delete I.controlPosition}L.each(I.data||[],function(u){L.isObject(u)&&!L.isArray(u)&&(!k(u,"value")&&k(u,"name")&&(u.value=u.name),R(u))})}(E)})}},4569:(W,G,T)=>{var L=T(70492),R=T(33051);L.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(k,O){var D=O.getComponent("timeline");return D&&k.currentIndex!=null&&(D.setCurrentIndex(k.currentIndex),!D.get("loop",!0)&&D.isIndexMax()&&D.setPlayState(!1)),O.resetOption("timeline"),R.defaults({currentIndex:D.option.currentIndex},k)}),L.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(k,O){var D=O.getComponent("timeline");D&&k.playState!=null&&D.setPlayState(k.playState)})},94015:(W,G,T)=>{T(98071).registerSubTypeDefaulter("timeline",function(){return"slider"})},21865:(W,G,T)=>{var L=T(33051),R=T(70492),k=T(51177),O=T(76172).getLayoutRect,D=T(78988).windowOpen;R.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),R.extendComponentView({type:"title",render:function(E,I,S){if(this.group.removeAll(),E.get("show")){var _=this.group,g=E.getModel("textStyle"),u=E.getModel("subtextStyle"),c=E.get("textAlign"),l=L.retrieve2(E.get("textBaseline"),E.get("textVerticalAlign")),e=new k.Text({style:k.setTextStyle({},g,{text:E.get("text"),textFill:g.getTextColor()},{disableBox:!0}),z2:10}),t=e.getBoundingRect(),i=E.get("subtext"),s=new k.Text({style:k.setTextStyle({},u,{text:i,textFill:u.getTextColor(),y:t.height+E.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),a=E.get("link"),o=E.get("sublink"),r=E.get("triggerEvent",!0);e.silent=!a&&!r,s.silent=!o&&!r,a&&e.on("click",function(){D(a,"_"+E.get("target"))}),o&&s.on("click",function(){D(o,"_"+E.get("subtarget"))}),e.eventData=s.eventData=r?{componentType:"title",componentIndex:E.componentIndex}:null,_.add(e),i&&_.add(s);var n=_.getBoundingRect(),h=E.getBoxLayoutParams();h.width=n.width,h.height=n.height;var p=O(h,{width:S.getWidth(),height:S.getHeight()},E.get("padding"));c||((c=E.get("left")||E.get("right"))==="middle"&&(c="center"),c==="right"?p.x+=p.width:c==="center"&&(p.x+=p.width/2)),l||((l=E.get("top")||E.get("bottom"))==="center"&&(l="middle"),l==="bottom"?p.y+=p.height:l==="middle"&&(p.y+=p.height/2),l=l||"top"),_.attr("position",[p.x,p.y]);var d={textAlign:c,textVerticalAlign:l};e.setStyle(d),s.setStyle(d),n=_.getBoundingRect();var f=p.margin,v=E.getItemStyle(["color","opacity"]);v.fill=E.get("backgroundColor");var m=new k.Rect({shape:{x:n.x-f[3],y:n.y-f[0],width:n.width+f[1]+f[3],height:n.height+f[0]+f[2],r:E.get("borderRadius")},style:v,subPixelOptimize:!0,silent:!0});_.add(m)}}})},76093:(W,G,T)=>{T(76596),T(31895),T(40354),T(34876),T(63795),T(2758),T(9856)},76596:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(21806),O=L.extendComponentModel({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){O.superApply(this,"optionUpdated",arguments),R.each(this.option.feature,function(E,I){var S=k.get(I);S&&R.merge(E,S.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}}),D=O;W.exports=D},31895:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(80423),O=T(21806),D=T(51177),E=T(4272),I=T(4130),S=T(99337),_=L.extendComponentView({type:"toolbox",render:function(g,u,c,l){var e=this.group;if(e.removeAll(),g.get("show")){var t=+g.get("itemSize"),i=g.get("feature")||{},s=this._features||(this._features={}),a=[];R.each(i,function(r,n){a.push(n)}),new I(this._featureNames||[],a).add(o).update(o).remove(R.curry(o,null)).execute(),this._featureNames=a,S.layout(e,g,c),e.add(S.makeBackground(e.getBoundingRect(),g)),e.eachChild(function(r){var n=r.__title,h=r.hoverStyle;if(h&&n){var p=k.getBoundingRect(n,k.makeFont(h)),d=r.position[0]+e.position[0],f=!1;r.position[1]+e.position[1]+t+p.height>c.getHeight()&&(h.textPosition="top",f=!0);var v=f?-5-p.height:t+8;d+p.width/2>c.getWidth()?(h.textPosition=["100%",v],h.textAlign="right"):d-p.width/2<0&&(h.textPosition=[0,v],h.textAlign="left")}})}function o(r,n){var h,p=a[r],d=a[n],f=i[p],v=new E(f,g,g.ecModel);if(l&&l.newTitle!=null&&l.featureName===p&&(f.title=l.newTitle),p&&!d){if(function(y){return y.indexOf("my")===0}(p))h={model:v,onclick:v.option.onclick,featureName:p};else{var m=O.get(p);if(!m)return;h=new m(v,u,c)}s[p]=h}else{if(!(h=s[d]))return;h.model=v,h.ecModel=u,h.api=c}p||!d?v.get("show")&&!h.unusable?(function(y,x,w){var M=y.getModel("iconStyle"),C=y.getModel("emphasis.iconStyle"),A=x.getIcons?x.getIcons():y.get("icon"),P=y.get("title")||{};if(typeof A=="string"){var b=A,N=P;P={},(A={})[w]=b,P[w]=N}var B=y.iconPaths={};R.each(A,function(z,F){var V=D.createIcon(z,{},{x:-t/2,y:-t/2,width:t,height:t});V.setStyle(M.getItemStyle()),V.hoverStyle=C.getItemStyle(),V.setStyle({text:P[F],textAlign:C.get("textAlign"),textBorderRadius:C.get("textBorderRadius"),textPadding:C.get("textPadding"),textFill:null});var H=g.getModel("tooltip");H&&H.get("show")&&V.attr("tooltip",R.extend({content:P[F],formatter:H.get("formatter",!0)||function(){return P[F]},formatterParams:{componentType:"toolbox",name:F,title:P[F],$vars:["name","title"]},position:H.get("position",!0)||"bottom"},H.option)),D.setHoverStyle(V),g.get("showTitle")&&(V.__title=P[F],V.on("mouseover",function(){var U=C.getItemStyle(),j=g.get("orient")==="vertical"?g.get("right")==null?"right":"left":g.get("bottom")==null?"bottom":"top";V.setStyle({textFill:C.get("textFill")||U.fill||U.stroke||"#000",textBackgroundColor:C.get("textBackgroundColor"),textPosition:C.get("textPosition")||j})}).on("mouseout",function(){V.setStyle({textFill:null,textBackgroundColor:null})})),V.trigger(y.get("iconStatus."+F)||"normal"),e.add(V),V.on("click",R.bind(x.onclick,x,u,c,F)),B[F]=V})}(v,h,p),v.setIconStatus=function(y,x){var w=this.option,M=this.iconPaths;w.iconStatus=w.iconStatus||{},w.iconStatus[y]=x,M[y]&&M[y].trigger(x)},h.render&&h.render(v,u,c,l)):h.remove&&h.remove(u,c):h.dispose&&h.dispose(u,c)}},updateView:function(g,u,c,l){R.each(this._features,function(e){e.updateView&&e.updateView(e.model,u,c,l)})},remove:function(g,u){R.each(this._features,function(c){c.remove&&c.remove(g,u)}),this.group.removeAll()},dispose:function(g,u){R.each(this._features,function(c){c.dispose&&c.dispose(g,u)})}});W.exports=_},21806:(W,G)=>{var T={};G.register=function(L,R){T[L]=R},G.get=function(L){return T[L]}},2190:(W,G,T)=>{var L=T(33051),R=T(21806),k=T(40292).toolbox.brush;function O(I,S,_){this.model=I,this.ecModel=S,this.api=_,this._brushType,this._brushMode}O.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:L.clone(k.title)};var D=O.prototype;D.render=D.updateView=function(I,S,_){var g,u,c;S.eachComponent({mainType:"brush"},function(l){g=l.brushType,u=l.brushOption.brushMode||"single",c|=l.areas.length}),this._brushType=g,this._brushMode=u,L.each(I.get("type",!0),function(l){I.setIconStatus(l,(l==="keep"?u==="multiple":l==="clear"?c:l===g)?"emphasis":"normal")})},D.getIcons=function(){var I=this.model,S=I.get("icon",!0),_={};return L.each(I.get("type",!0),function(g){S[g]&&(_[g]=S[g])}),_},D.onclick=function(I,S,_){var g=this._brushType,u=this._brushMode;_==="clear"?(S.dispatchAction({type:"axisAreaSelect",intervals:[]}),S.dispatchAction({type:"brush",command:"clear",areas:[]})):S.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:_==="keep"?g:g!==_&&_,brushMode:_==="keep"?u==="multiple"?"single":"multiple":u}})},R.register("brush",O);var E=O;W.exports=E},63795:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(61158),O=T(40292),D=T(21806),E=O.toolbox.dataView,I=new Array(60).join("-"),S="	";function _(t){return R.map(t,function(i){var s=i.getRawData(),a=[i.name],o=[];return s.each(s.dimensions,function(){for(var r=arguments.length,n=arguments[r-1],h=s.getName(n),p=0;p<r-1;p++)o[p]=arguments[p];a.push((h?h+S:"")+o.join(S))}),a.join(`
`)}).join(`

`+I+`

`)}function g(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var u=new RegExp("[	]+","g");function c(t){this._dom=null,this.model=t}function l(t,i){return R.map(t,function(s,a){var o=i&&i[a];if(R.isObject(o)&&!R.isArray(o)){R.isObject(s)&&!R.isArray(s)||(s={value:s});var r=o.name!=null&&s.name==null;return s=R.defaults(s,o),r&&delete s.name,s}return s})}c.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:R.clone(E.title),lang:R.clone(E.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},c.prototype.onclick=function(t,i){var s=i.getDom(),a=this.model;this._dom&&s.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var r=document.createElement("h4"),n=a.get("lang")||[];r.innerHTML=n[0]||a.get("title"),r.style.cssText="margin: 10px 20px;",r.style.color=a.get("textColor");var h=document.createElement("div"),p=document.createElement("textarea");h.style.cssText="display:block;width:100%;overflow:auto;";var d=a.get("optionToContent"),f=a.get("contentToOption"),v=function(b){var N,B,z=function(F){var V={},H=[],U=[];return F.eachRawSeries(function(j){var X=j.coordinateSystem;if(!X||X.type!=="cartesian2d"&&X.type!=="polar")H.push(j);else{var Y=X.getBaseAxis();if(Y.type==="category"){var J=Y.dim+"_"+Y.index;V[J]||(V[J]={categoryAxis:Y,valueAxis:X.getOtherAxis(Y),series:[]},U.push({axisDim:Y.dim,axisIndex:Y.index})),V[J].series.push(j)}else H.push(j)}}),{seriesGroupByCategoryAxis:V,other:H,meta:U}}(b);return{value:R.filter([(N=z.seriesGroupByCategoryAxis,B=[],R.each(N,function(F,V){var H=F.categoryAxis,U=F.valueAxis.dim,j=[" "].concat(R.map(F.series,function(Z){return Z.name})),X=[H.model.getCategories()];R.each(F.series,function(Z){var q=Z.getRawData();X.push(Z.getRawData().mapArray(q.mapDimension(U),function(tt){return tt}))});for(var Y=[j.join(S)],J=0;J<X[0].length;J++){for(var K=[],Q=0;Q<X.length;Q++)K.push(X[Q][J]);Y.push(K.join(S))}B.push(Y.join(`
`))}),B.join(`

`+I+`

`)),_(z.other)],function(F){return F.replace(/[\n\t\s]/g,"")}).join(`

`+I+`

`),meta:z.meta}}(t);if(typeof d=="function"){var m=d(i.getOption());typeof m=="string"?h.innerHTML=m:R.isDom(m)&&h.appendChild(m)}else h.appendChild(p),p.readOnly=a.get("readOnly"),p.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",p.style.color=a.get("textColor"),p.style.borderColor=a.get("textareaBorderColor"),p.style.backgroundColor=a.get("textareaColor"),p.value=v.value;var y=v.meta,x=document.createElement("div");x.style.cssText="position:absolute;bottom:0;left:0;right:0;";var w="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",M=document.createElement("div"),C=document.createElement("div");w+=";background-color:"+a.get("buttonColor"),w+=";color:"+a.get("buttonTextColor");var A=this;function P(){s.removeChild(o),A._dom=null}k.addEventListener(M,"click",P),k.addEventListener(C,"click",function(){var b;try{b=typeof f=="function"?f(h,i.getOption()):function(N,B){var z=N.split(new RegExp(`
*`+I+`
*`,"g")),F={series:[]};return R.each(z,function(V,H){if(function(Y){if(Y.slice(0,Y.indexOf(`
`)).indexOf(S)>=0)return!0}(V)){var U=function(Y){for(var J=Y.split(/\n+/g),K=g(J.shift()).split(u),Q=[],Z=R.map(K,function(rt){return{name:rt,data:[]}}),q=0;q<J.length;q++){var tt=g(J[q]).split(u);Q.push(tt.shift());for(var $=0;$<tt.length;$++)Z[$]&&(Z[$].data[q]=tt[$])}return{series:Z,categories:Q}}(V),j=B[H],X=j.axisDim+"Axis";j&&(F[X]=F[X]||[],F[X][j.axisIndex]={data:U.categories},F.series=F.series.concat(U.series))}else U=function(Y){for(var J=Y.split(/\n+/g),K=g(J.shift()),Q=[],Z=0;Z<J.length;Z++){var q=g(J[Z]);if(q){var tt,$=q.split(u),rt="",et=!1;isNaN($[0])?(et=!0,rt=$[0],$=$.slice(1),Q[Z]={name:rt,value:[]},tt=Q[Z].value):tt=Q[Z]=[];for(var it=0;it<$.length;it++)tt.push(+$[it]);tt.length===1&&(et?Q[Z].value=tt[0]:Q[Z]=tt[0])}}return{name:K,data:Q}}(V),F.series.push(U)}),F}(p.value,y)}catch(N){throw P(),new Error("Data view format error "+N)}b&&i.dispatchAction({type:"changeDataView",newOption:b}),P()}),M.innerHTML=n[1],C.innerHTML=n[2],C.style.cssText=w,M.style.cssText=w,!a.get("readOnly")&&x.appendChild(C),x.appendChild(M),o.appendChild(r),o.appendChild(h),o.appendChild(x),h.style.height=s.clientHeight-80+"px",s.appendChild(o),this._dom=o},c.prototype.remove=function(t,i){this._dom&&i.getDom().removeChild(this._dom)},c.prototype.dispose=function(t,i){this.remove(t,i)},D.register("dataView",c),L.registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,i){var s=[];R.each(t.newOption.series,function(a){var o=i.getSeriesByName(a.name)[0];if(o){var r=o.get("data");s.push({name:a.name,data:l(a.data,r)})}else s.push(R.extend({type:"scatter"},a))}),i.mergeOption(R.defaults({series:s},t.newOption))});var e=c;W.exports=e},2758:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(63448),O=T(64562),D=T(29570),E=T(19233),I=T(40292),S=T(21806);T(60953);var _=I.toolbox.dataZoom,g=R.each;function u(i,s,a){(this._brushController=new k(a.getZr())).on("brush",R.bind(this._onBrush,this)).mount(),this._isZoomActive}u.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:R.clone(_.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var c=u.prototype;c.render=function(i,s,a,o){this.model=i,this.ecModel=s,this.api=a,function(r,n,h,p,d){var f=h._isZoomActive;p&&p.type==="takeGlobalCursor"&&(f=p.key==="dataZoomSelect"&&p.dataZoomSelectActive),h._isZoomActive=f,r.setIconStatus("zoom",f?"emphasis":"normal");var v=new O(e(r.option),n,{include:["grid"]});h._brushController.setPanels(v.makePanelOpts(d,function(m){return m.xAxisDeclared&&!m.yAxisDeclared?"lineX":!m.xAxisDeclared&&m.yAxisDeclared?"lineY":"rect"})).enableBrush(!!f&&{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()})}(i,s,this,o,a),function(r,n){r.setIconStatus("back",D.count(n)>1?"emphasis":"normal")}(i,s)},c.onclick=function(i,s,a){l[a].call(this)},c.remove=function(i,s){this._brushController.unmount()},c.dispose=function(i,s){this._brushController.dispose()};var l={zoom:function(){var i=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:i})},back:function(){this._dispatchZoomAction(D.pop(this.ecModel))}};function e(i){var s={};return R.each(["xAxisIndex","yAxisIndex"],function(a){s[a]=i[a],s[a]==null&&(s[a]="all"),(s[a]===!1||s[a]==="none")&&(s[a]=[])}),s}c._onBrush=function(i,s){if(s.isEnd&&i.length){var a={},o=this.ecModel;this._brushController.updateCovers([]),new O(e(this.model.option),o,{include:["grid"]}).matchOutputRanges(i,o,function(n,h,p){if(p.type==="cartesian2d"){var d=n.brushType;d==="rect"?(r("x",p,h[0]),r("y",p,h[1])):r({lineX:"x",lineY:"y"}[d],p,h)}}),D.push(o,a),this._dispatchZoomAction(a)}function r(n,h,p){var d=h.getAxis(n),f=d.model,v=function(y,x,w){var M;return w.eachComponent({mainType:"dataZoom",subType:"select"},function(C){C.getAxisModel(y,x.componentIndex)&&(M=C)}),M}(n,f,o),m=v.findRepresentativeAxisProxy(f).getMinMaxSpan();m.minValueSpan==null&&m.maxValueSpan==null||(p=E(0,p.slice(),d.scale.getExtent(),0,m.minValueSpan,m.maxValueSpan)),v&&(a[v.id]={dataZoomId:v.id,startValue:p[0],endValue:p[1]})}},c._dispatchZoomAction=function(i){var s=[];g(i,function(a,o){s.push(R.clone(a))}),s.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:s})},S.register("dataZoom",u),L.registerPreprocessor(function(i){if(i){var s=i.dataZoom||(i.dataZoom=[]);R.isArray(s)||(i.dataZoom=s=[s]);var a=i.toolbox;if(a&&(R.isArray(a)&&(a=a[0]),a&&a.feature)){var o=a.feature.dataZoom;r("xAxis",o),r("yAxis",o)}}function r(n,h){if(h){var p=n+"Index",d=h[p];d==null||d==="all"||R.isArray(d)||(d=d===!1||d==="none"?[]:[d]),f=i[n],R.isArray(f)||(f=f?[f]:[]),g(f,function(v,m){if(d==null||d==="all"||R.indexOf(d,m)!==-1){var y={type:"select",$fromToolbox:!0,filterMode:h.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+n+m};y[p]=m,s.push(y)}})}var f}});var t=u;W.exports=t},34876:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(40292),O=T(21806),D=k.toolbox.magicType,E="__ec_magicType_stack__";function I(c){this.model=c}I.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:R.clone(D.title),option:{},seriesIndex:{}};var S=I.prototype;S.getIcons=function(){var c=this.model,l=c.get("icon"),e={};return R.each(c.get("type"),function(t){l[t]&&(e[t]=l[t])}),e};var _={line:function(c,l,e,t){if(c==="bar")return R.merge({id:l,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},t.get("option.line")||{},!0)},bar:function(c,l,e,t){if(c==="line")return R.merge({id:l,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},t.get("option.bar")||{},!0)},stack:function(c,l,e,t){var i=e.get("stack")===E;if(c==="line"||c==="bar")return t.setIconStatus("stack",i?"normal":"emphasis"),R.merge({id:l,stack:i?"":E},t.get("option.stack")||{},!0)}},g=[["line","bar"],["stack"]];S.onclick=function(c,l,e){var t=this.model,i=t.get("seriesIndex."+e);if(_[e]){var s,a={series:[]};R.each(g,function(o){R.indexOf(o,e)>=0&&R.each(o,function(r){t.setIconStatus(r,"normal")})}),t.setIconStatus(e,"emphasis"),c.eachComponent({mainType:"series",query:i==null?null:{seriesIndex:i}},function(o){var r=o.subType,n=o.id,h=_[e](r,n,o,t);h&&(R.defaults(h,o.option),a.series.push(h));var p=o.coordinateSystem;if(p&&p.type==="cartesian2d"&&(e==="line"||e==="bar")){var d=p.getAxesByScale("ordinal")[0];if(d){var f=d.dim+"Axis",v=c.queryComponents({mainType:f,index:o.get(name+"Index"),id:o.get(name+"Id")})[0].componentIndex;a[f]=a[f]||[];for(var m=0;m<=v;m++)a[f][v]=a[f][v]||{};a[f][v].boundaryGap=e==="bar"}}}),e==="stack"&&(s=a.series&&a.series[0]&&a.series[0].stack===E?R.merge({stack:D.title.tiled},D.title):R.clone(D.title)),l.dispatchAction({type:"changeMagicType",currentType:e,newOption:a,newTitle:s,featureName:"magicType"})}},L.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(c,l){l.mergeOption(c.newOption)}),O.register("magicType",I);var u=I;W.exports=u},9856:(W,G,T)=>{var L=T(70492),R=T(29570),k=T(40292),O=T(21806),D=k.toolbox.restore;function E(S){this.model=S}E.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:D.title},E.prototype.onclick=function(S,_,g){R.clear(S),_.dispatchAction({type:"restore",from:this.uid})},O.register("restore",E),L.registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(S,_){_.resetOption("recreate")});var I=E;W.exports=I},40354:(W,G,T)=>{var L=T(66387),R=T(40292),k=T(21806),O=R.toolbox.saveAsImage;function D(I){this.model=I}D.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:O.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:O.lang.slice()},D.prototype.unusable=!L.canvasSupported,D.prototype.onclick=function(I,S){var _=this.model,g=_.get("name")||I.get("title.0.text")||"echarts",u=S.getZr().painter.getType()==="svg"?"svg":_.get("type",!0)||"png",c=S.getConnectedDataURL({type:u,backgroundColor:_.get("backgroundColor",!0)||I.get("backgroundColor")||"#fff",connectedBackgroundColor:_.get("connectedBackgroundColor"),excludeComponents:_.get("excludeComponents"),pixelRatio:_.get("pixelRatio")});if(typeof MouseEvent!="function"||L.browser.ie||L.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var l=atob(c.split(",")[1]),e=l.length,t=new Uint8Array(e);e--;)t[e]=l.charCodeAt(e);var i=new Blob([t]);window.navigator.msSaveOrOpenBlob(i,g+"."+u)}else{var s=_.get("lang"),a='<body style="margin:0;"><img src="'+c+'" style="max-width:100%;" title="'+(s&&s[0]||"")+'" /></body>';window.open().document.write(a)}else{var o=document.createElement("a");o.download=g+"."+u,o.target="_blank",o.href=c;var r=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});o.dispatchEvent(r)}},k.register("saveAsImage",D);var E=D;W.exports=E},83062:(W,G,T)=>{var L=T(70492);T(52528),T(16470),T(88085),L.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),L.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})},36333:(W,G,T)=>{var L=T(33051),R=T(21092),k=T(61158),O=T(18553),D=T(66387),E=T(78988),I=L.each,S=E.toCamelCase,_=["","-webkit-","-moz-","-o-"];function g(l,e,t,i,s){var a=e&&e.painter;if(t){var o=a&&a.getViewportRoot();o&&O.transformLocalCoord(l,o,document.body,i,s)}else{l[0]=i,l[1]=s;var r=a&&a.getViewportRootOffset();r&&(l[0]+=r.offsetLeft,l[1]+=r.offsetTop)}l[2]=l[0]/e.getWidth(),l[3]=l[1]/e.getHeight()}function u(l,e,t){if(D.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var s=this._zr=e.getZr(),a=this._appendToBody=t&&t.appendToBody;this._styleCoord=[0,0,0,0],g(this._styleCoord,s,a,e.getWidth()/2,e.getHeight()/2),a?document.body.appendChild(i):l.appendChild(i),this._container=l,this._show=!1,this._hideTimeout;var o=this;i.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},i.onmousemove=function(r){if(r=r||window.event,!o._enterable){var n=s.handler,h=s.painter.getViewportRoot();k.normalizeEvent(h,r,!0),n.dispatch("mousemove",r)}},i.onmouseleave=function(){o._enterable&&o._show&&o.hideLater(o._hideDelay),o._inContent=!1}}u.prototype={constructor:u,_enterable:!0,update:function(l){var e=this._container,t=e.currentStyle||document.defaultView.getComputedStyle(e),i=e.style;i.position!=="absolute"&&t.position!=="absolute"&&(i.position="relative"),l.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var l=this._styleCoord[2],e=this._styleCoord[3],t=l*this._zr.getWidth(),i=e*this._zr.getHeight();this.moveTo(t,i)},show:function(l){clearTimeout(this._hideTimeout);var e=this.el,t=this._styleCoord;e.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function(i){var s,a,o=[],r=i.get("transitionDuration"),n=i.get("backgroundColor"),h=i.getModel("textStyle"),p=i.get("padding");return r&&o.push((a="left "+(s=r)+"s cubic-bezier(0.23, 1, 0.32, 1),top "+s+"s cubic-bezier(0.23, 1, 0.32, 1)",L.map(_,function(d){return d+"transition:"+a}).join(";"))),n&&(D.canvasSupported?o.push("background-Color:"+n):(o.push("background-Color:#"+R.toHex(n)),o.push("filter:alpha(opacity=70)"))),I(["width","color","radius"],function(d){var f="border-"+d,v=S(f),m=i.get(v);m!=null&&o.push(f+":"+m+(d==="color"?"":"px"))}),o.push(function(d){var f=[],v=d.get("fontSize"),m=d.getTextColor();m&&f.push("color:"+m),f.push("font:"+d.getFont());var y=d.get("lineHeight");y==null&&(y=Math.round(3*v/2)),v&&f.push("line-height:"+y+"px");var x=d.get("textShadowColor"),w=d.get("textShadowBlur")||0,M=d.get("textShadowOffsetX")||0,C=d.get("textShadowOffsetY")||0;return w&&f.push("text-shadow:"+M+"px "+C+"px "+w+"px "+x),I(["decoration","align"],function(A){var P=d.get(A);P&&f.push("text-"+A+":"+P)}),f.join(";")}(h)),p!=null&&o.push("padding:"+E.normalizeCssArray(p).join("px ")+"px"),o.join(";")+";"}(l)+";left:"+t[0]+"px;top:"+t[1]+"px;"+(l.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",e.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(l){this.el.innerHTML=l==null?"":l},setEnterable:function(l){this._enterable=l},getSize:function(){var l=this.el;return[l.clientWidth,l.clientHeight]},moveTo:function(l,e){var t=this._styleCoord;g(t,this._zr,this._appendToBody,l,e);var i=this.el.style;i.left=t[0]+"px",i.top=t[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(l){!this._show||this._inContent&&this._enterable||(l?(this._hideDelay=l,this._show=!1,this._hideTimeout=setTimeout(L.bind(this.hide,this),l)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var l=this.el.clientWidth,e=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var t=document.defaultView.getComputedStyle(this.el);t&&(l+=parseInt(t.borderLeftWidth,10)+parseInt(t.borderRightWidth,10),e+=parseInt(t.borderTopWidth,10)+parseInt(t.borderBottomWidth,10))}return{width:l,height:e}}};var c=u;W.exports=c},16470:(W,G,T)=>{var L=T(70492).extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});W.exports=L},97634:(W,G,T)=>{var L=T(33051),R=T(96498),k=T(51177);function O(I,S,_,g){I[0]=_,I[1]=g,I[2]=I[0]/S.getWidth(),I[3]=I[1]/S.getHeight()}function D(I){var S=this._zr=I.getZr();this._styleCoord=[0,0,0,0],O(this._styleCoord,S,I.getWidth()/2,I.getHeight()/2),this._show=!1,this._hideTimeout}D.prototype={constructor:D,_enterable:!0,update:function(I){I.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var I=this._styleCoord[2],S=this._styleCoord[3],_=I*this._zr.getWidth(),g=S*this._zr.getHeight();this.moveTo(_,g)},show:function(I){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(I,S,_){this.el&&this._zr.remove(this.el);for(var g={},u=I,c="{marker",l=u.indexOf(c);l>=0;){var e=u.indexOf("|}"),t=u.substr(l+c.length,e-l-c.length);t.indexOf("sub")>-1?g["marker"+t]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:S[t],textOffset:[3,0]}:g["marker"+t]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:S[t]},l=(u=u.substr(e+1)).indexOf("{marker")}var i=_.getModel("textStyle"),s=i.get("fontSize"),a=_.get("textLineHeight");a==null&&(a=Math.round(3*s/2)),this.el=new R({style:k.setTextStyle({},i,{rich:g,text:I,textBackgroundColor:_.get("backgroundColor"),textBorderRadius:_.get("borderRadius"),textFill:_.get("textStyle.color"),textPadding:_.get("padding"),textLineHeight:a}),z:_.get("z")}),this._zr.add(this.el);var o=this;this.el.on("mouseover",function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0}),this.el.on("mouseout",function(){o._enterable&&o._show&&o.hideLater(o._hideDelay),o._inContent=!1})},setEnterable:function(I){this._enterable=I},getSize:function(){var I=this.el.getBoundingRect();return[I.width,I.height]},moveTo:function(I,S){if(this.el){var _=this._styleCoord;O(_,this._zr,I,S),this.el.attr("position",[_[0],_[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(I){!this._show||this._inContent&&this._enterable||(I?(this._hideDelay=I,this._show=!1,this._hideTimeout=setTimeout(L.bind(this.hide,this),I)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var I=this.getSize();return{width:I[0],height:I[1]}}};var E=D;W.exports=E},88085:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(66387),O=T(36333),D=T(97634),E=T(78988),I=T(85669),S=T(51177),_=T(92448),g=T(76172),u=T(4272),c=T(56996),l=T(97980),e=T(75539),t=T(32234).getTooltipRenderMode,i=R.bind,s=R.each,a=I.parsePercent,o=new S.Rect({shape:{x:-1,y:-1,width:2,height:2}}),r=L.extendComponentView({type:"tooltip",init:function(d,f){if(!k.node){var v,m=d.getComponent("tooltip"),y=m.get("renderMode");this._renderMode=t(y),this._renderMode==="html"?(v=new O(f.getDom(),f,{appendToBody:m.get("appendToBody",!0)}),this._newLine="<br/>"):(v=new D(f),this._newLine=`
`),this._tooltipContent=v}},render:function(d,f,v){if(!k.node){this.group.removeAll(),this._tooltipModel=d,this._ecModel=f,this._api=v,this._lastDataByCoordSys=null,this._alwaysShowContent=d.get("alwaysShowContent");var m=this._tooltipContent;m.update(d),m.setEnterable(d.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var d=this._tooltipModel.get("triggerOn");c.register("itemTooltip",this._api,i(function(f,v,m){d!=="none"&&(d.indexOf(f)>=0?this._tryShow(v,m):f==="leave"&&this._hide(m))},this))},_keepShow:function(){var d=this._tooltipModel,f=this._ecModel,v=this._api;if(this._lastX!=null&&this._lastY!=null&&d.get("triggerOn")!=="none"){var m=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!v.isDisposed()&&m.manuallyShowTip(d,f,v,{x:m._lastX,y:m._lastY})})}},manuallyShowTip:function(d,f,v,m){if(m.from!==this.uid&&!k.node){var y=h(m,v);this._ticket="";var x=m.dataByCoordSys;if(m.tooltip&&m.x!=null&&m.y!=null){var w=o;w.position=[m.x,m.y],w.update(),w.tooltip=m.tooltip,this._tryShow({offsetX:m.x,offsetY:m.y,target:w},y)}else if(x)this._tryShow({offsetX:m.x,offsetY:m.y,position:m.position,dataByCoordSys:m.dataByCoordSys,tooltipOption:m.tooltipOption},y);else if(m.seriesIndex!=null){if(this._manuallyAxisShowTip(d,f,v,m))return;var M=_(m,f),C=M.point[0],A=M.point[1];C!=null&&A!=null&&this._tryShow({offsetX:C,offsetY:A,position:m.position,target:M.el},y)}else m.x!=null&&m.y!=null&&(v.dispatchAction({type:"updateAxisPointer",x:m.x,y:m.y}),this._tryShow({offsetX:m.x,offsetY:m.y,position:m.position,target:v.getZr().findHover(m.x,m.y).target},y))}},manuallyHideTip:function(d,f,v,m){var y=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&y.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,m.from!==this.uid&&this._hide(h(m,v))},_manuallyAxisShowTip:function(d,f,v,m){var y=m.seriesIndex,x=m.dataIndex,w=f.getComponent("axisPointer").coordSysAxesInfo;if(y!=null&&x!=null&&w!=null){var M=f.getSeriesByIndex(y);if(M&&(d=n([M.getData().getItemModel(x),M,(M.coordinateSystem||{}).model,d])).get("trigger")==="axis")return v.dispatchAction({type:"updateAxisPointer",seriesIndex:y,dataIndex:x,position:m.position}),!0}},_tryShow:function(d,f){var v=d.target;if(this._tooltipModel){this._lastX=d.offsetX,this._lastY=d.offsetY;var m=d.dataByCoordSys;m&&m.length?this._showAxisTooltip(m,d):v&&v.dataIndex!=null?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(d,v,f)):v&&v.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(d,v,f)):(this._lastDataByCoordSys=null,this._hide(f))}},_showOrMove:function(d,f){var v=d.get("showDelay");f=R.bind(f,this),clearTimeout(this._showTimout),v>0?this._showTimout=setTimeout(f,v):f()},_showAxisTooltip:function(d,f){var v=this._ecModel,m=this._tooltipModel,y=[f.offsetX,f.offsetY],x=[],w=[],M=n([f.tooltipOption,m]),C=this._renderMode,A=this._newLine,P={};s(d,function(N){s(N.dataByAxis,function(B){var z=v.getComponent(B.axisDim+"Axis",B.axisIndex),F=B.value,V=[];if(z&&F!=null){var H=e.getValueLabel(F,z.axis,v,B.seriesDataIndices,B.valueLabelOpt);R.each(B.seriesDataIndices,function(j){var X=v.getSeriesByIndex(j.seriesIndex),Y=j.dataIndexInside,J=X&&X.getDataParams(Y);if(J.axisDim=B.axisDim,J.axisIndex=B.axisIndex,J.axisType=B.axisType,J.axisId=B.axisId,J.axisValue=l.getAxisRawValue(z.axis,F),J.axisValueLabel=H,J){w.push(J);var K,Q=X.formatTooltip(Y,!0,null,C);if(R.isObject(Q)){K=Q.html;var Z=Q.markers;R.merge(P,Z)}else K=Q;V.push(K)}});var U=H;C!=="html"?x.push(V.join(A)):x.push((U?E.encodeHTML(U)+A:"")+V.join(A))}})},this),x.reverse(),x=x.join(this._newLine+this._newLine);var b=f.position;this._showOrMove(M,function(){this._updateContentNotChangedOnAxis(d)?this._updatePosition(M,b,y[0],y[1],this._tooltipContent,w):this._showTooltipContent(M,x,w,Math.random(),y[0],y[1],b,void 0,P)})},_showSeriesItemTooltip:function(d,f,v){var m=this._ecModel,y=f.seriesIndex,x=m.getSeriesByIndex(y),w=f.dataModel||x,M=f.dataIndex,C=f.dataType,A=w.getData(C),P=n([A.getItemModel(M),w,x&&(x.coordinateSystem||{}).model,this._tooltipModel]),b=P.get("trigger");if(b==null||b==="item"){var N,B,z=w.getDataParams(M,C),F=w.formatTooltip(M,!1,C,this._renderMode);R.isObject(F)?(N=F.html,B=F.markers):(N=F,B=null);var V="item_"+w.name+"_"+M;this._showOrMove(P,function(){this._showTooltipContent(P,N,z,V,d.offsetX,d.offsetY,d.position,d.target,B)}),v({type:"showTip",dataIndexInside:M,dataIndex:A.getRawIndex(M),seriesIndex:y,from:this.uid})}},_showComponentItemTooltip:function(d,f,v){var m=f.tooltip;typeof m=="string"&&(m={content:m,formatter:m});var y=new u(m,this._tooltipModel,this._ecModel),x=y.get("content"),w=Math.random();this._showOrMove(y,function(){this._showTooltipContent(y,x,y.get("formatterParams")||{},w,d.offsetX,d.offsetY,d.position,f)}),v({type:"showTip",from:this.uid})},_showTooltipContent:function(d,f,v,m,y,x,w,M,C){if(this._ticket="",d.get("showContent")&&d.get("show")){var A=this._tooltipContent,P=d.get("formatter");w=w||d.get("position");var b=f;if(P&&typeof P=="string")b=E.formatTpl(P,v,!0);else if(typeof P=="function"){var N=i(function(B,z){B===this._ticket&&(A.setContent(z,C,d),this._updatePosition(d,w,y,x,A,v,M))},this);this._ticket=m,b=P(v,m,N)}A.setContent(b,C,d),A.show(d),this._updatePosition(d,w,y,x,A,v,M)}},_updatePosition:function(d,f,v,m,y,x,w){var M=this._api.getWidth(),C=this._api.getHeight();f=f||d.get("position");var A=y.getSize(),P=d.get("align"),b=d.get("verticalAlign"),N=w&&w.getBoundingRect().clone();if(w&&N.applyTransform(w.transform),typeof f=="function"&&(f=f([v,m],x,y.el,N,{viewSize:[M,C],contentSize:A.slice()})),R.isArray(f))v=a(f[0],M),m=a(f[1],C);else if(R.isObject(f)){f.width=A[0],f.height=A[1];var B=g.getLayoutRect(f,{width:M,height:C});v=B.x,m=B.y,P=null,b=null}else if(typeof f=="string"&&w){var z=function(F,V,H){var U=H[0],j=H[1],X=0,Y=0,J=V.width,K=V.height;switch(F){case"inside":X=V.x+J/2-U/2,Y=V.y+K/2-j/2;break;case"top":X=V.x+J/2-U/2,Y=V.y-j-5;break;case"bottom":X=V.x+J/2-U/2,Y=V.y+K+5;break;case"left":X=V.x-U-5,Y=V.y+K/2-j/2;break;case"right":X=V.x+J+5,Y=V.y+K/2-j/2}return[X,Y]}(f,N,A);v=z[0],m=z[1]}else z=function(F,V,H,U,j,X,Y){var J=H.getOuterSize(),K=J.width,Q=J.height;return X!=null&&(F+K+X>U?F-=K+X:F+=X),Y!=null&&(V+Q+Y>j?V-=Q+Y:V+=Y),[F,V]}(v,m,y,M,C,P?null:20,b?null:20),v=z[0],m=z[1];P&&(v-=p(P)?A[0]/2:P==="right"?A[0]:0),b&&(m-=p(b)?A[1]/2:b==="bottom"?A[1]:0),d.get("confine")&&(z=function(F,V,H,U,j){var X=H.getOuterSize(),Y=X.width,J=X.height;return F=Math.min(F+Y,U)-Y,V=Math.min(V+J,j)-J,[F=Math.max(F,0),V=Math.max(V,0)]}(v,m,y,M,C),v=z[0],m=z[1]),y.moveTo(v,m)},_updateContentNotChangedOnAxis:function(d){var f=this._lastDataByCoordSys,v=!!f&&f.length===d.length;return v&&s(f,function(m,y){var x=m.dataByAxis||{},w=(d[y]||{}).dataByAxis||[];(v&=x.length===w.length)&&s(x,function(M,C){var A=w[C]||{},P=M.seriesDataIndices||[],b=A.seriesDataIndices||[];(v&=M.value===A.value&&M.axisType===A.axisType&&M.axisId===A.axisId&&P.length===b.length)&&s(P,function(N,B){var z=b[B];v&=N.seriesIndex===z.seriesIndex&&N.dataIndex===z.dataIndex})})}),this._lastDataByCoordSys=d,!!v},_hide:function(d){this._lastDataByCoordSys=null,d({type:"hideTip",from:this.uid})},dispose:function(d,f){k.node||(this._tooltipContent.dispose(),c.unregister("itemTooltip",f))}});function n(d){for(var f=d.pop();d.length;){var v=d.pop();v&&(u.isInstance(v)&&(v=v.get("tooltip",!0)),typeof v=="string"&&(v={formatter:v}),f=new u(v,f,f.ecModel))}return f}function h(d,f){return d.dispatchAction||R.bind(f.dispatchAction,f)}function p(d){return d==="center"||d==="middle"}W.exports=r},88067:(W,G,T)=>{T(23084),T(56720)},23084:(W,G,T)=>{var L=T(70492),R=T(6102);T(60602),T(62207),T(57817),T(61137),T(58376),L.registerPreprocessor(R)},56720:(W,G,T)=>{var L=T(70492),R=T(6102);T(60602),T(62207),T(52822),T(12229),T(58376),L.registerPreprocessor(R)},57817:(W,G,T)=>{var L=T(33051),R=T(39276),k=T(85669),O=[20,140],D=R.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(S,_){D.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(g){g.mappingMethod="linear",g.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){D.superApply(this,"resetItemSize",arguments);var S=this.itemSize;this._orient==="horizontal"&&S.reverse(),(S[0]==null||isNaN(S[0]))&&(S[0]=O[0]),(S[1]==null||isNaN(S[1]))&&(S[1]=O[1])},_resetRange:function(){var S=this.getExtent(),_=this.option.range;!_||_.auto?(S.auto=1,this.option.range=S):L.isArray(_)&&(_[0]>_[1]&&_.reverse(),_[0]=Math.max(_[0],S[0]),_[1]=Math.min(_[1],S[1]))},completeVisualOption:function(){R.prototype.completeVisualOption.apply(this,arguments),L.each(this.stateList,function(S){var _=this.option.controller[S].symbolSize;_&&_[0]!==_[1]&&(_[0]=0)},this)},setSelected:function(S){this.option.range=S.slice(),this._resetRange()},getSelected:function(){var S=this.getExtent(),_=k.asc((this.get("range")||[]).slice());return _[0]>S[1]&&(_[0]=S[1]),_[1]>S[1]&&(_[1]=S[1]),_[0]<S[0]&&(_[0]=S[0]),_[1]<S[0]&&(_[1]=S[0]),_},getValueState:function(S){var _=this.option.range,g=this.getExtent();return(_[0]<=g[0]||_[0]<=S)&&(_[1]>=g[1]||S<=_[1])?"inRange":"outOfRange"},findTargetDataIndices:function(S){var _=[];return this.eachTargetSeries(function(g){var u=[],c=g.getData();c.each(this.getDataDimension(c),function(l,e){S[0]<=l&&l<=S[1]&&u.push(e)},this),_.push({seriesId:g.id,dataIndex:u})},this),_},getVisualMeta:function(S){var _=E(0,0,this.getExtent()),g=E(0,0,this.option.range.slice()),u=[];function c(o,r){u.push({value:o,color:S(o,r)})}for(var l=0,e=0,t=g.length,i=_.length;e<i&&(!g.length||_[e]<=g[0]);e++)_[e]<g[l]&&c(_[e],"outOfRange");for(var s=1;l<t;l++,s=0)s&&u.length&&c(g[l],"outOfRange"),c(g[l],"inRange");for(s=1;e<i;e++)(!g.length||g[g.length-1]<_[e])&&(s&&(u.length&&c(u[u.length-1].value,"outOfRange"),s=0),c(_[e],"outOfRange"));var a=u.length;return{stops:u,outerColors:[a?u[0].color:"transparent",a?u[a-1].color:"transparent"]}}});function E(S,_,g){if(g[0]===g[1])return g.slice();for(var u=(g[1]-g[0])/200,c=g[0],l=[],e=0;e<=200&&c<g[1];e++)l.push(c),c+=u;return l.push(g[1]),l}var I=D;W.exports=I},61137:(W,G,T)=>{var L=T(33051),R=T(74438),k=T(61158),O=T(34320),D=T(51177),E=T(85669),I=T(19233),S=T(38380),_=T(32234),g=E.linearMap,u=L.each,c=Math.min,l=Math.max,e=O.extend({type:"visualMap.continuous",init:function(){e.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(o,r,n,h){h&&h.type==="selectDataRange"&&h.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var o=this.visualMapModel,r=this.group;this._orient=o.get("orient"),this._useHandle=o.get("calculable"),this._resetInterval(),this._renderBar(r);var n=o.get("text");this._renderEndsText(r,n,0),this._renderEndsText(r,n,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},_renderEndsText:function(o,r,n){if(r){var h=r[1-n];h=h!=null?h+"":"";var p=this.visualMapModel,d=p.get("textGap"),f=p.itemSize,v=this._shapes.barGroup,m=this._applyTransform([f[0]/2,n===0?-d:f[1]+d],v),y=this._applyTransform(n===0?"bottom":"top",v),x=this._orient,w=this.visualMapModel.textStyleModel;this.group.add(new D.Text({style:{x:m[0],y:m[1],textVerticalAlign:x==="horizontal"?"middle":y,textAlign:x==="horizontal"?y:"center",text:h,textFont:w.getFont(),textFill:w.getTextColor()}}))}},_renderBar:function(o){var r=this.visualMapModel,n=this._shapes,h=r.itemSize,p=this._orient,d=this._useHandle,f=S.getItemAlign(r,this.api,h),v=n.barGroup=this._createBarGroup(f);v.add(n.outOfRange=t()),v.add(n.inRange=t(null,d?s(this._orient):null,L.bind(this._dragHandle,this,"all",!1),L.bind(this._dragHandle,this,"all",!0)));var m=r.textStyleModel.getTextRect("\u56FD"),y=l(m.width,m.height);d&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(v,0,h,y,p,f),this._createHandle(v,1,h,y,p,f)),this._createIndicator(v,h,y,p),o.add(v)},_createHandle:function(o,r,n,h,p){var d=L.bind(this._dragHandle,this,r,!1),f=L.bind(this._dragHandle,this,r,!0),v=t(function(M,C){return M===0?[[0,0],[C,0],[C,-C]]:[[0,0],[C,0],[C,C]]}(r,h),s(this._orient),d,f);v.position[0]=n[0],o.add(v);var m=this.visualMapModel.textStyleModel,y=new D.Text({draggable:!0,drift:d,onmousemove:function(M){k.stop(M.event)},ondragend:f,style:{x:0,y:0,text:"",textFont:m.getFont(),textFill:m.getTextColor()}});this.group.add(y);var x=[p==="horizontal"?h/2:1.5*h,p==="horizontal"?r===0?-1.5*h:1.5*h:r===0?-h/2:h/2],w=this._shapes;w.handleThumbs[r]=v,w.handleLabelPoints[r]=x,w.handleLabels[r]=y},_createIndicator:function(o,r,n,h){var p=t([[0,0]],"move");p.position[0]=r[0],p.attr({invisible:!0,silent:!0}),o.add(p);var d=this.visualMapModel.textStyleModel,f=new D.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:d.getFont(),textFill:d.getTextColor()}});this.group.add(f);var v=[h==="horizontal"?n/2:9,0],m=this._shapes;m.indicator=p,m.indicatorLabel=f,m.indicatorLabelPoint=v},_dragHandle:function(o,r,n,h){if(this._useHandle){if(this._dragging=!r,!r){var p=this._applyTransform([n,h],this._shapes.barGroup,!0);this._updateInterval(o,p[1]),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():i(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[o],!1)}},_resetInterval:function(){var o=this.visualMapModel,r=this._dataInterval=o.getSelected(),n=o.getExtent(),h=[0,o.itemSize[1]];this._handleEnds=[g(r[0],n,h,!0),g(r[1],n,h,!0)]},_updateInterval:function(o,r){r=r||0;var n=this.visualMapModel,h=this._handleEnds,p=[0,n.itemSize[1]];I(r,h,p,o,0);var d=n.getExtent();this._dataInterval=[g(h[0],p,d,!0),g(h[1],p,d,!0)]},_updateView:function(o){var r=this.visualMapModel,n=r.getExtent(),h=this._shapes,p=[0,r.itemSize[1]],d=o?p:this._handleEnds,f=this._createBarVisual(this._dataInterval,n,d,"inRange"),v=this._createBarVisual(n,n,p,"outOfRange");h.inRange.setStyle({fill:f.barColor,opacity:f.opacity}).setShape("points",f.barPoints),h.outOfRange.setStyle({fill:v.barColor,opacity:v.opacity}).setShape("points",v.barPoints),this._updateHandle(d,f)},_createBarVisual:function(o,r,n,h){var p={forceState:h,convertOpacityToAlpha:!0},d=this._makeColorGradient(o,p),f=[this.getControllerVisual(o[0],"symbolSize",p),this.getControllerVisual(o[1],"symbolSize",p)],v=this._createBarPoints(n,f);return{barColor:new R(0,0,0,1,d),barPoints:v,handlesColor:[d[0].color,d[d.length-1].color]}},_makeColorGradient:function(o,r){var n=[],h=(o[1]-o[0])/100;n.push({color:this.getControllerVisual(o[0],"color",r),offset:0});for(var p=1;p<100;p++){var d=o[0]+h*p;if(d>o[1])break;n.push({color:this.getControllerVisual(d,"color",r),offset:p/100})}return n.push({color:this.getControllerVisual(o[1],"color",r),offset:1}),n},_createBarPoints:function(o,r){var n=this.visualMapModel.itemSize;return[[n[0]-r[0],o[0]],[n[0],o[0]],[n[0],o[1]],[n[0]-r[1],o[1]]]},_createBarGroup:function(o){var r=this._orient,n=this.visualMapModel.get("inverse");return new D.Group(r!=="horizontal"||n?r==="horizontal"&&n?{scale:o==="bottom"?[-1,1]:[1,1],rotation:-Math.PI/2}:r!=="vertical"||n?{scale:o==="left"?[1,1]:[-1,1]}:{scale:o==="left"?[1,-1]:[-1,-1]}:{scale:o==="bottom"?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(o,r){if(this._useHandle){var n=this._shapes,h=this.visualMapModel,p=n.handleThumbs,d=n.handleLabels;u([0,1],function(f){var v=p[f];v.setStyle("fill",r.handlesColor[f]),v.position[1]=o[f];var m=D.applyTransform(n.handleLabelPoints[f],D.getTransform(v,this.group));d[f].setStyle({x:m[0],y:m[1],text:h.formatValueText(this._dataInterval[f]),textVerticalAlign:"middle",textAlign:this._applyTransform(this._orient==="horizontal"?f===0?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(o,r,n,h){var p=this.visualMapModel,d=p.getExtent(),f=p.itemSize,v=[0,f[1]],m=g(o,d,v,!0),y=this._shapes,x=y.indicator;if(x){x.position[1]=m,x.attr("invisible",!1),x.setShape("points",function(b,N,B,z){return b?[[0,-c(N,l(B,0))],[6,0],[0,c(N,l(z-B,0))]]:[[0,0],[5,-5],[5,5]]}(!!n,h,m,f[1]));var w=this.getControllerVisual(o,"color",{convertOpacityToAlpha:!0});x.setStyle("fill",w);var M=D.applyTransform(y.indicatorLabelPoint,D.getTransform(x,this.group)),C=y.indicatorLabel;C.attr("invisible",!1);var A=this._applyTransform("left",y.barGroup),P=this._orient;C.setStyle({text:(n||"")+p.formatValueText(r),textVerticalAlign:P==="horizontal"?A:"middle",textAlign:P==="horizontal"?"center":A,x:M[0],y:M[1]})}},_enableHoverLinkToSeries:function(){var o=this;this._shapes.barGroup.on("mousemove",function(r){if(o._hovering=!0,!o._dragging){var n=o.visualMapModel.itemSize,h=o._applyTransform([r.offsetX,r.offsetY],o._shapes.barGroup,!0,!0);h[1]=c(l(0,h[1]),n[1]),o._doHoverLinkToSeries(h[1],0<=h[0]&&h[0]<=n[0])}}).on("mouseout",function(){o._hovering=!1,!o._dragging&&o._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var o=this.api.getZr();this.visualMapModel.option.hoverLink?(o.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),o.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(o,r){var n=this.visualMapModel,h=n.itemSize;if(n.option.hoverLink){var p=[0,h[1]],d=n.getExtent();o=c(l(p[0],o),p[1]);var f=function(C,A,P){var b=6,N=C.get("hoverLinkDataSize");return N&&(b=g(N,A,P,!0)/2),b}(n,d,p),v=[o-f,o+f],m=g(o,p,d,!0),y=[g(v[0],p,d,!0),g(v[1],p,d,!0)];v[0]<p[0]&&(y[0]=-1/0),v[1]>p[1]&&(y[1]=1/0),r&&(y[0]===-1/0?this._showIndicator(m,y[1],"< ",f):y[1]===1/0?this._showIndicator(m,y[0],"> ",f):this._showIndicator(m,m,"\u2248 ",f));var x=this._hoverLinkDataIndices,w=[];(r||i(n))&&(w=this._hoverLinkDataIndices=n.findTargetDataIndices(y));var M=_.compressBatches(x,w);this._dispatchHighDown("downplay",S.makeHighDownBatch(M[0],n)),this._dispatchHighDown("highlight",S.makeHighDownBatch(M[1],n))}},_hoverLinkFromSeriesMouseOver:function(o){var r=o.target,n=this.visualMapModel;if(r&&r.dataIndex!=null){var h=this.ecModel.getSeriesByIndex(r.seriesIndex);if(n.isTargetSeries(h)){var p=h.getData(r.dataType),d=p.get(n.getDataDimension(p),r.dataIndex,!0);isNaN(d)||this._showIndicator(d,d)}}},_hideIndicator:function(){var o=this._shapes;o.indicator&&o.indicator.attr("invisible",!0),o.indicatorLabel&&o.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var o=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",S.makeHighDownBatch(o,this.visualMapModel)),o.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var o=this.api.getZr();o.off("mouseover",this._hoverLinkFromSeriesMouseOver),o.off("mouseout",this._hideIndicator)},_applyTransform:function(o,r,n,h){var p=D.getTransform(r,h?null:this.group);return D[L.isArray(o)?"applyTransform":"transformDirection"](o,p,n)},_dispatchHighDown:function(o,r){r&&r.length&&this.api.dispatchAction({type:o,batch:r})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function t(o,r,n,h){return new D.Polygon({shape:{points:o},draggable:!!n,cursor:r,drift:n,onmousemove:function(p){k.stop(p.event)},ondragend:h})}function i(o){var r=o.get("hoverLinkOnHandle");return!!(r==null?o.get("realtime"):r)}function s(o){return o==="vertical"?"ns-resize":"ew-resize"}var a=e;W.exports=a},52822:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=T(39276),k=T(59937),O=T(82300),D=T(85669).reformIntervals,E=R.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(g,u){E.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var c=this._mode=this._determineMode();I[this._mode].call(this),this._resetSelected(g,u);var l=this.option.categories;this.resetVisual(function(e,t){c==="categories"?(e.mappingMethod="category",e.categories=L.clone(l)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=L.map(this._pieceList,function(i){return i=L.clone(i),t!=="inRange"&&(i.visual=null),i}))})},completeVisualOption:function(){var g=this.option,u={},c=k.listVisualTypes(),l=this.isCategory();function e(t,i,s){return t&&t[i]&&(L.isObject(t[i])?t[i].hasOwnProperty(s):t[i]===s)}L.each(g.pieces,function(t){L.each(c,function(i){t.hasOwnProperty(i)&&(u[i]=1)})}),L.each(u,function(t,i){var s=0;L.each(this.stateList,function(a){s|=e(g,a,i)||e(g.target,a,i)},this),!s&&L.each(this.stateList,function(a){(g[a]||(g[a]={}))[i]=O.get(i,a==="inRange"?"active":"inactive",l)})},this),R.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(g,u){var c=this.option,l=this._pieceList,e=(u?c:g).selected||{};if(c.selected=e,L.each(l,function(i,s){var a=this.getSelectedMapKey(i);e.hasOwnProperty(a)||(e[a]=!0)},this),c.selectedMode==="single"){var t=!1;L.each(l,function(i,s){var a=this.getSelectedMapKey(i);e[a]&&(t?e[a]=!1:t=!0)},this)}},getSelectedMapKey:function(g){return this._mode==="categories"?g.value+"":g.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var g=this.option;return g.pieces&&g.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(g){this.option.selected=L.clone(g)},getValueState:function(g){var u=k.findPieceIndex(g,this._pieceList);return u!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[u])]?"inRange":"outOfRange"},findTargetDataIndices:function(g){var u=[];return this.eachTargetSeries(function(c){var l=[],e=c.getData();e.each(this.getDataDimension(e),function(t,i){k.findPieceIndex(t,this._pieceList)===g&&l.push(i)},this),u.push({seriesId:c.id,dataIndex:l})},this),u},getRepresentValue:function(g){var u;if(this.isCategory())u=g.value;else if(g.value!=null)u=g.value;else{var c=g.interval||[];u=c[0]===-1/0&&c[1]===1/0?0:(c[0]+c[1])/2}return u},getVisualMeta:function(g){if(!this.isCategory()){var u=[],c=[],l=this,e=this._pieceList.slice();if(e.length){var t=e[0].interval[0];t!==-1/0&&e.unshift({interval:[-1/0,t]}),(t=e[e.length-1].interval[1])!==1/0&&e.push({interval:[t,1/0]})}else e.push({interval:[-1/0,1/0]});var i=-1/0;return L.each(e,function(a){var o=a.interval;o&&(o[0]>i&&s([i,o[0]],"outOfRange"),s(o.slice()),i=o[1])},this),{stops:u,outerColors:c}}function s(a,o){var r=l.getRepresentValue({interval:a});o||(o=l.getValueState(r));var n=g(r,o);a[0]===-1/0?c[0]=n:a[1]===1/0?c[1]=n:u.push({value:a[0],color:n},{value:a[1],color:n})}}}),I={splitNumber:function(){var g=this.option,u=this._pieceList,c=Math.min(g.precision,20),l=this.getExtent(),e=g.splitNumber;e=Math.max(parseInt(e,10),1),g.splitNumber=e;for(var t=(l[1]-l[0])/e;+t.toFixed(c)!==t&&c<5;)c++;g.precision=c,t=+t.toFixed(c),g.minOpen&&u.push({interval:[-1/0,l[0]],close:[0,0]});for(var i=0,s=l[0];i<e;s+=t,i++){var a=i===e-1?l[1]:s+t;u.push({interval:[s,a],close:[1,1]})}g.maxOpen&&u.push({interval:[l[1],1/0],close:[0,0]}),D(u),L.each(u,function(o,r){o.index=r,o.text=this.formatValueText(o.interval)},this)},categories:function(){var g=this.option;L.each(g.categories,function(u){this._pieceList.push({text:this.formatValueText(u,!0),value:u})},this),S(g,this._pieceList)},pieces:function(){var g=this.option,u=this._pieceList;L.each(g.pieces,function(c,l){L.isObject(c)||(c={value:c});var e={text:"",index:l};if(c.label!=null&&(e.text=c.label),c.hasOwnProperty("value")){var t=e.value=c.value;e.interval=[t,t],e.close=[1,1]}else{for(var i=e.interval=[],s=e.close=[0,0],a=[1,0,1],o=[-1/0,1/0],r=[],n=0;n<2;n++){for(var h=[["gte","gt","min"],["lte","lt","max"]][n],p=0;p<3&&i[n]==null;p++)i[n]=c[h[p]],s[n]=a[p],r[n]=p===2;i[n]==null&&(i[n]=o[n])}r[0]&&i[1]===1/0&&(s[0]=0),r[1]&&i[0]===-1/0&&(s[1]=0),i[0]===i[1]&&s[0]&&s[1]&&(e.value=i[0])}e.visual=k.retrieveVisuals(c),u.push(e)},this),S(g,u),D(u),L.each(u,function(c){var l=c.close,e=[["<","\u2264"][l[1]],[">","\u2265"][l[0]]];c.text=c.text||this.formatValueText(c.value!=null?c.value:c.interval,!1,e)},this)}};function S(g,u){var c=g.inverse;(g.orient==="vertical"?!c:c)&&u.reverse()}var _=E;W.exports=_},12229:(W,G,T)=>{var L=T(33051),R=T(34320),k=T(51177),O=T(41525).createSymbol,D=T(76172),E=T(38380),I=R.extend({type:"visualMap.piecewise",doRender:function(){var S=this.group;S.removeAll();var _=this.visualMapModel,g=_.get("textGap"),u=_.textStyleModel,c=u.getFont(),l=u.getTextColor(),e=this._getItemAlign(),t=_.itemSize,i=this._getViewData(),s=i.endsText,a=L.retrieve(_.get("showLabel",!0),!s);s&&this._renderEndsText(S,s[0],t,a,e),L.each(i.viewPieceList,function(o){var r=o.piece,n=new k.Group;n.onclick=L.bind(this._onItemClick,this,r),this._enableHoverLink(n,o.indexInModelPieceList);var h=_.getRepresentValue(r);if(this._createItemSymbol(n,h,[0,0,t[0],t[1]]),a){var p=this.visualMapModel.getValueState(h);n.add(new k.Text({style:{x:e==="right"?-g:t[0]+g,y:t[1]/2,text:r.text,textVerticalAlign:"middle",textAlign:e,textFont:c,textFill:l,opacity:p==="outOfRange"?.5:1}}))}S.add(n)},this),s&&this._renderEndsText(S,s[1],t,a,e),D.box(_.get("orient"),S,_.get("itemGap")),this.renderBackground(S),this.positionGroup(S)},_enableHoverLink:function(S,_){function g(u){var c=this.visualMapModel;c.option.hoverLink&&this.api.dispatchAction({type:u,batch:E.makeHighDownBatch(c.findTargetDataIndices(_),c)})}S.on("mouseover",L.bind(g,this,"highlight")).on("mouseout",L.bind(g,this,"downplay"))},_getItemAlign:function(){var S=this.visualMapModel,_=S.option;if(_.orient==="vertical")return E.getItemAlign(S,this.api,S.itemSize);var g=_.align;return g&&g!=="auto"||(g="left"),g},_renderEndsText:function(S,_,g,u,c){if(_){var l=new k.Group,e=this.visualMapModel.textStyleModel;l.add(new k.Text({style:{x:u?c==="right"?g[0]:0:g[0]/2,y:g[1]/2,textVerticalAlign:"middle",textAlign:u?c:"center",text:_,textFont:e.getFont(),textFill:e.getTextColor()}})),S.add(l)}},_getViewData:function(){var S=this.visualMapModel,_=L.map(S.getPieceList(),function(l,e){return{piece:l,indexInModelPieceList:e}}),g=S.get("text"),u=S.get("orient"),c=S.get("inverse");return(u==="horizontal"?c:!c)?_.reverse():g&&(g=g.slice().reverse()),{viewPieceList:_,endsText:g}},_createItemSymbol:function(S,_,g){S.add(O(this.getControllerVisual(_,"symbol"),g[0],g[1],g[2],g[3],this.getControllerVisual(_,"color")))},_onItemClick:function(S){var _=this.visualMapModel,g=_.option,u=L.clone(g.selected),c=_.getSelectedMapKey(S);g.selectedMode==="single"?(u[c]=!0,L.each(u,function(l,e){u[e]=e===c})):u[c]=!u[c],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:u})}});W.exports=I},39276:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(66387),O=T(82300),D=T(59937),E=T(30801),I=T(32234),S=T(85669),_=D.mapVisual,g=D.eachVisual,u=R.isArray,c=R.each,l=S.asc,e=S.linearMap,t=R.noop,i=L.extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(s,a,o){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(s,o)},optionUpdated:function(s,a){var o=this.option;k.canvasSupported||(o.realtime=!1),!a&&E.replaceVisualOption(o,s,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(s){var a=this.stateList;s=R.bind(s,this),this.controllerVisuals=E.createVisualMappings(this.option.controller,a,s),this.targetVisuals=E.createVisualMappings(this.option.target,a,s)},getTargetSeriesIndices:function(){var s=this.option.seriesIndex,a=[];return s==null||s==="all"?this.ecModel.eachSeries(function(o,r){a.push(r)}):a=I.normalizeToArray(s),a},eachTargetSeries:function(s,a){R.each(this.getTargetSeriesIndices(),function(o){s.call(a,this.ecModel.getSeriesByIndex(o))},this)},isTargetSeries:function(s){var a=!1;return this.eachTargetSeries(function(o){o===s&&(a=!0)}),a},formatValueText:function(s,a,o){var r,n,h=this.option,p=h.precision,d=this.dataBound,f=h.formatter;return o=o||["<",">"],R.isArray(s)&&(s=s.slice(),r=!0),n=a?s:r?[v(s[0]),v(s[1])]:v(s),R.isString(f)?f.replace("{value}",r?n[0]:n).replace("{value2}",r?n[1]:n):R.isFunction(f)?r?f(s[0],s[1]):f(s):r?s[0]===d[0]?o[0]+" "+n[1]:s[1]===d[1]?o[1]+" "+n[0]:n[0]+" - "+n[1]:n;function v(m){return m===d[0]?"min":m===d[1]?"max":(+m).toFixed(Math.min(p,20))}},resetExtent:function(){var s=this.option,a=l([s.min,s.max]);this._dataExtent=a},getDataDimension:function(s){var a=this.option.dimension,o=s.dimensions;if(a!=null||o.length){if(a!=null)return s.getDimension(a);for(var r=s.dimensions,n=r.length-1;n>=0;n--){var h=r[n];if(!s.getDimensionInfo(h).isCalculationCoord)return h}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var s=this.ecModel,a=this.option,o={inRange:a.inRange,outOfRange:a.outOfRange},r=a.target||(a.target={}),n=a.controller||(a.controller={});R.merge(r,o),R.merge(n,o);var h=this.isCategory();function p(d){u(a.color)&&!d.inRange&&(d.inRange={color:a.color.slice().reverse()}),d.inRange=d.inRange||{color:s.get("gradientColor")},c(this.stateList,function(f){var v=d[f];if(R.isString(v)){var m=O.get(v,"active",h);m?(d[f]={},d[f][v]=m):delete d[f]}},this)}p.call(this,r),p.call(this,n),function(d,f,v){var m=d[f],y=d[v];m&&!y&&(y=d[v]={},c(m,function(x,w){if(D.isValidType(w)){var M=O.get(w,"inactive",h);M!=null&&(y[w]=M,w!=="color"||y.hasOwnProperty("opacity")||y.hasOwnProperty("colorAlpha")||(y.opacity=[0,0]))}}))}.call(this,r,"inRange","outOfRange"),function(d){var f=(d.inRange||{}).symbol||(d.outOfRange||{}).symbol,v=(d.inRange||{}).symbolSize||(d.outOfRange||{}).symbolSize,m=this.get("inactiveColor");c(this.stateList,function(y){var x=this.itemSize,w=d[y];w||(w=d[y]={color:h?m:[m]}),w.symbol==null&&(w.symbol=f&&R.clone(f)||(h?"roundRect":["roundRect"])),w.symbolSize==null&&(w.symbolSize=v&&R.clone(v)||(h?x[0]:[x[0],x[0]])),w.symbol=_(w.symbol,function(A){return A==="none"||A==="square"?"roundRect":A});var M=w.symbolSize;if(M!=null){var C=-1/0;g(M,function(A){A>C&&(C=A)}),w.symbolSize=_(M,function(A){return e(A,[0,C],[0,x[0]],!0)})}},this)}.call(this,n)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:t,getValueState:t,getVisualMeta:t});W.exports=i},34320:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(51177),O=T(78988),D=T(76172),E=T(59937),I=L.extendComponentView({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(S,_){this.ecModel=S,this.api=_,this.visualMapModel},render:function(S,_,g,u){this.visualMapModel=S,S.get("show")!==!1?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(S){var _=this.visualMapModel,g=O.normalizeCssArray(_.get("padding")||0),u=S.getBoundingRect();S.add(new k.Rect({z2:-1,silent:!0,shape:{x:u.x-g[3],y:u.y-g[0],width:u.width+g[3]+g[1],height:u.height+g[0]+g[2]},style:{fill:_.get("backgroundColor"),stroke:_.get("borderColor"),lineWidth:_.get("borderWidth")}}))},getControllerVisual:function(S,_,g){var u=(g=g||{}).forceState,c=this.visualMapModel,l={};if(_==="symbol"&&(l.symbol=c.get("itemSymbol")),_==="color"){var e=c.get("contentColor");l.color=e}function t(o){return l[o]}function i(o,r){l[o]=r}var s=c.controllerVisuals[u||c.getValueState(S)],a=E.prepareVisualTypes(s);return R.each(a,function(o){var r=s[o];g.convertOpacityToAlpha&&o==="opacity"&&(o="colorAlpha",r=s.__alphaForOpacity),E.dependsOn(o,_)&&r&&r.applyVisual(S,t,i)}),l[_]},positionGroup:function(S){var _=this.visualMapModel,g=this.api;D.positionElement(S,_.getBoxLayoutParams(),{width:g.getWidth(),height:g.getHeight()})},doRender:R.noop});W.exports=I},38380:(W,G,T)=>{var L=T(33051),R=T(76172).getLayoutRect;G.getItemAlign=function(k,O,D){var E=k.option,I=E.align;if(I!=null&&I!=="auto")return I;for(var S={width:O.getWidth(),height:O.getHeight()},_=E.orient==="horizontal"?1:0,g=[["left","right","width"],["top","bottom","height"]],u=g[_],c=[0,null,10],l={},e=0;e<3;e++)l[g[1-_][e]]=c[e],l[u[e]]=e===2?D[0]:E[u[e]];var t=[["x","width",3],["y","height",0]][_],i=R(l,S,E.padding);return u[(i.margin[t[2]]||0)+i[t[0]]+.5*i[t[1]]<.5*S[t[1]]?0:1]},G.makeHighDownBatch=function(k,O){return L.each(k||[],function(D){D.dataIndex!=null&&(D.dataIndexInside=D.dataIndex,D.dataIndex=null),D.highlightKey="visualMap"+(O?O.componentIndex:"")}),k}},6102:(W,G,T)=>{var L=T(33051),R=L.each;function k(O,D){return O&&O.hasOwnProperty&&O.hasOwnProperty(D)}W.exports=function(O){var D=O&&O.visualMap;L.isArray(D)||(D=D?[D]:[]),R(D,function(E){if(E){k(E,"splitList")&&!k(E,"pieces")&&(E.pieces=E.splitList,delete E.splitList);var I=E.pieces;I&&L.isArray(I)&&R(I,function(S){L.isObject(S)&&(k(S,"start")&&!k(S,"min")&&(S.min=S.start),k(S,"end")&&!k(S,"max")&&(S.max=S.end))})}})}},60602:(W,G,T)=>{T(98071).registerSubTypeDefaulter("visualMap",function(L){return L.categories||(L.pieces?L.pieces.length>0:L.splitNumber>0)&&!L.calculable?"piecewise":"continuous"})},62207:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(30801),O=T(59937),D=L.PRIORITY.VISUAL.COMPONENT;function E(I,S,_,g){for(var u=S.targetVisuals[g],c=O.prepareVisualTypes(u),l={color:I.getData().getVisual("color")},e=0,t=c.length;e<t;e++){var i=c[e],s=u[i==="opacity"?"__alphaForOpacity":i];s&&s.applyVisual(_,a,o)}return l.color;function a(r){return l[r]}function o(r,n){l[r]=n}}L.registerVisual(D,{createOnAllSeries:!0,reset:function(I,S){var _=[];return S.eachComponent("visualMap",function(g){var u=I.pipelineContext;!g.isTargetSeries(I)||u&&u.large||_.push(k.incrementalApplyVisual(g.stateList,g.targetVisuals,R.bind(g.getValueState,g),g.getDataDimension(I.getData())))}),_}}),L.registerVisual(D,{createOnAllSeries:!0,reset:function(I,S){var _=I.getData(),g=[];S.eachComponent("visualMap",function(u){if(u.isTargetSeries(I)){var c=u.getVisualMeta(R.bind(E,null,I,u))||{stops:[],outerColors:[]},l=u.getDataDimension(_),e=_.getDimensionInfo(l);e!=null&&(c.dimension=e.index,g.push(c))}}),I.getData().setVisual("visualMeta",g)}})},58376:(W,G,T)=>{T(70492).registerAction({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(L,R){R.eachComponent({mainType:"visualMap",query:L},function(k){k.setSelected(L.selected)})})},38175:(W,G,T)=>{var L;typeof window<"u"?L=window.__DEV__:T.g!==void 0&&(L=T.g.__DEV__),L===void 0&&(L=!0);var R=L;G.__DEV__=R},3245:(W,G,T)=>{var L=T(33051),R=L.each,k=L.map,O=T(85669),D=O.linearMap,E=O.getPixelPrecision,I=O.round,S=T(58958),_=S.createAxisTicks,g=S.createAxisLabels,u=S.calculateCategoryInterval,c=[0,1],l=function(i,s,a){this.dim=i,this.scale=s,this._extent=a||[0,0],this.inverse=!1,this.onBand=!1};function e(i,s){var a=(i[1]-i[0])/s/2;i[0]+=a,i[1]-=a}l.prototype={constructor:l,contain:function(i){var s=this._extent,a=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return i>=a&&i<=o},containData:function(i){return this.scale.contain(i)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(i){return E(i||this.scale.getExtent(),this._extent)},setExtent:function(i,s){var a=this._extent;a[0]=i,a[1]=s},dataToCoord:function(i,s){var a=this._extent,o=this.scale;return i=o.normalize(i),this.onBand&&o.type==="ordinal"&&e(a=a.slice(),o.count()),D(i,c,a,s)},coordToData:function(i,s){var a=this._extent,o=this.scale;this.onBand&&o.type==="ordinal"&&e(a=a.slice(),o.count());var r=D(i,a,c,s);return this.scale.scale(r)},pointToData:function(i,s){},getTicksCoords:function(i){var s=(i=i||{}).tickModel||this.getTickModel(),a=_(this,s).ticks,o=k(a,function(r){return{coord:this.dataToCoord(r),tickValue:r}},this);return function(r,n,h,p){var d=n.length;if(r.onBand&&!h&&d){var f,v,m=r.getExtent();if(d===1)n[0].coord=m[0],f=n[1]={coord:m[0]};else{var y=n[d-1].tickValue-n[0].tickValue,x=(n[d-1].coord-n[0].coord)/y;R(n,function(C){C.coord-=x/2}),v=1+r.scale.getExtent()[1]-n[d-1].tickValue,f={coord:n[d-1].coord+x*v},n.push(f)}var w=m[0]>m[1];M(n[0].coord,m[0])&&(p?n[0].coord=m[0]:n.shift()),p&&M(m[0],n[0].coord)&&n.unshift({coord:m[0]}),M(m[1],f.coord)&&(p?f.coord=m[1]:n.pop()),p&&M(f.coord,m[1])&&n.push({coord:m[1]})}function M(C,A){return C=I(C),A=I(A),w?C>A:C<A}}(this,o,s.get("alignWithLabel"),i.clamp),o},getMinorTicksCoords:function(){if(this.scale.type==="ordinal")return[];var i=this.model.getModel("minorTick").get("splitNumber");i>0&&i<100||(i=5);var s=this.scale.getMinorTicks(i);return k(s,function(a){return k(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this)},getViewLabels:function(){return g(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var i=this._extent,s=this.scale.getExtent(),a=s[1]-s[0]+(this.onBand?1:0);a===0&&(a=1);var o=Math.abs(i[1]-i[0]);return Math.abs(o)/a},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return u(this)}};var t=l;W.exports=t},23845:(W,G,T)=>{var L=T(33051),R=T(45280),k=T(32892),O=T(60479),D=T(58023),E=R.applyTransform;function I(){D.call(this)}function S(u){this.name=u,this.zoomLimit,D.call(this),this._roamTransformable=new I,this._rawTransformable=new I,this._center,this._zoom}function _(u,c,l,e){var t=l.seriesModel,i=t?t.coordinateSystem:null;return i===this?i[u](e):null}L.mixin(I,D),S.prototype={constructor:S,type:"view",dimensions:["x","y"],setBoundingRect:function(u,c,l,e){return this._rect=new O(u,c,l,e),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(u,c,l,e){this.transformTo(u,c,l,e),this._viewRect=new O(u,c,l,e)},transformTo:function(u,c,l,e){var t=this.getBoundingRect(),i=this._rawTransformable;i.transform=t.calculateTransform(new O(u,c,l,e)),i.decomposeTransform(),this._updateTransform()},setCenter:function(u){u&&(this._center=u,this._updateCenterAndZoom())},setZoom:function(u){u=u||1;var c=this.zoomLimit;c&&(c.max!=null&&(u=Math.min(c.max,u)),c.min!=null&&(u=Math.max(c.min,u))),this._zoom=u,this._updateCenterAndZoom()},getDefaultCenter:function(){var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var u=this._rawTransformable.getLocalTransform(),c=this._roamTransformable,l=this.getDefaultCenter(),e=this.getCenter(),t=this.getZoom();e=R.applyTransform([],e,u),l=R.applyTransform([],l,u),c.origin=e,c.position=[l[0]-e[0],l[1]-e[1]],c.scale=[t,t],this._updateTransform()},_updateTransform:function(){var u=this._roamTransformable,c=this._rawTransformable;c.parent=u,u.updateTransform(),c.updateTransform(),k.copy(this.transform||(this.transform=[]),c.transform||k.create()),this._rawTransform=c.getLocalTransform(),this.invTransform=this.invTransform||[],k.invert(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var u=this._roamTransformable.transform,c=this._rawTransformable;return{roamTransform:u?L.slice(u):k.create(),rawScale:L.slice(c.scale),rawPosition:L.slice(c.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var u=this.getBoundingRect().clone();return u.applyTransform(this.transform),u},dataToPoint:function(u,c,l){var e=c?this._rawTransform:this.transform;return l=l||[],e?E(l,u,e):R.copy(l,u)},pointToData:function(u){var c=this.invTransform;return c?E([],u,c):[u[0],u[1]]},convertToPixel:L.curry(_,"dataToPoint"),convertFromPixel:L.curry(_,"pointToData"),containPoint:function(u){return this.getViewRectAfterRoam().contain(u[0],u[1])}},L.mixin(S,D);var g=S;W.exports=g},66484:(W,G,T)=>{var L=T(33051),R={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},k={};k.categoryAxis=L.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},R),k.valueAxis=L.merge({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},R),k.timeAxis=L.defaults({scale:!0,min:"dataMin",max:"dataMax"},k.valueAxis),k.logAxis=L.defaults({scale:!0,logBase:10},k.valueAxis);var O=k;W.exports=O},97980:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=T(85043),k=T(70103),O=T(60379),D=T(85669),E=T(79093),I=E.prepareLayoutBarSeries,S=E.makeColumnLayout,_=E.retrieveColumnLayout,g=T(60479);function u(t,i){var s,a,o,r=t.type,n=i.getMin(),h=i.getMax(),p=t.getExtent();r==="ordinal"?s=i.getCategories().length:(a=i.get("boundaryGap"),L.isArray(a)||(a=[a||0,a||0]),typeof a[0]=="boolean"&&(a=[0,0]),a[0]=D.parsePercent(a[0],1),a[1]=D.parsePercent(a[1],1),o=p[1]-p[0]||Math.abs(p[0])),n==="dataMin"?n=p[0]:typeof n=="function"&&(n=n({min:p[0],max:p[1]})),h==="dataMax"?h=p[1]:typeof h=="function"&&(h=h({min:p[0],max:p[1]}));var d=n!=null,f=h!=null;n==null&&(n=r==="ordinal"?s?0:NaN:p[0]-a[0]*o),h==null&&(h=r==="ordinal"?s?s-1:NaN:p[1]+a[1]*o),(n==null||!isFinite(n))&&(n=NaN),(h==null||!isFinite(h))&&(h=NaN),t.setBlank(L.eqNaN(n)||L.eqNaN(h)||r==="ordinal"&&!t.getOrdinalMeta().categories.length),i.getNeedCrossZero()&&(n>0&&h>0&&!d&&(n=0),n<0&&h<0&&!f&&(h=0));var v=i.ecModel;if(v&&r==="time"){var m,y=I("bar",v);if(L.each(y,function(M){m|=M.getBaseAxis()===i.axis}),m){var x=S(y),w=function(M,C,A,P){var b=A.axis.getExtent(),N=b[1]-b[0],B=_(P,A.axis);if(B===void 0)return{min:M,max:C};var z=1/0;L.each(B,function(j){z=Math.min(j.offset,z)});var F=-1/0;L.each(B,function(j){F=Math.max(j.offset+j.width,F)}),z=Math.abs(z),F=Math.abs(F);var V=z+F,H=C-M,U=H/(1-(z+F)/N)-H;return{min:M-=U*(z/V),max:C+=U*(F/V)}}(n,h,i,x);n=w.min,h=w.max}}return{extent:[n,h],fixMin:d,fixMax:f}}function c(t){var i,s=t.getLabelModel().get("formatter"),a=t.type==="category"?t.scale.getExtent()[0]:null;return typeof s=="string"?(i=s,s=function(o){return o=t.scale.getLabel(o),i.replace("{value}",o!=null?o:"")}):typeof s=="function"?function(o,r){return a!=null&&(r=o-a),s(l(t,o),r)}:function(o){return t.scale.getLabel(o)}}function l(t,i){return t.type==="category"?t.scale.getLabel(i):i}function e(t){var i=t.get("interval");return i==null?"auto":i}T(61618),T(76304),G.getScaleExtent=u,G.niceScaleExtent=function(t,i){var s=u(t,i),a=s.extent,o=i.get("splitNumber");t.type==="log"&&(t.base=i.get("logBase"));var r=t.type;t.setExtent(a[0],a[1]),t.niceExtent({splitNumber:o,fixMin:s.fixMin,fixMax:s.fixMax,minInterval:r==="interval"||r==="time"?i.get("minInterval"):null,maxInterval:r==="interval"||r==="time"?i.get("maxInterval"):null});var n=i.get("interval");n!=null&&t.setInterval&&t.setInterval(n)},G.createScaleByModel=function(t,i){if(i=i||t.get("type"))switch(i){case"category":return new R(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-1/0]);case"value":return new k;default:return(O.getClass(i)||k).create(t)}},G.ifAxisCrossZero=function(t){var i=t.scale.getExtent(),s=i[0],a=i[1];return!(s>0&&a>0||s<0&&a<0)},G.makeLabelFormatter=c,G.getAxisRawValue=l,G.estimateLabelUnionRect=function(t){var i=t.model,s=t.scale;if(i.get("axisLabel.show")&&!s.isBlank()){var a,o,r=t.type==="category",n=s.getExtent();o=r?s.count():(a=s.getTicks()).length;var h,p,d,f,v,m,y,x,w=t.getLabelModel(),M=c(t),C=1;o>40&&(C=Math.ceil(o/40));for(var A=0;A<o;A+=C){var P=M(a?a[A]:n[0]+A),b=(p=w.getTextRect(P),d=(w.get("rotate")||0)*Math.PI/180,v=(f=p.plain()).width,m=f.height,y=v*Math.abs(Math.cos(d))+Math.abs(m*Math.sin(d)),x=v*Math.abs(Math.sin(d))+Math.abs(m*Math.cos(d)),new g(f.x,f.y,y,x));h?h.union(b):h=b}return h}},G.getOptionCategoryInterval=e,G.shouldShowAllLabels=function(t){return t.type==="category"&&e(t.getLabelModel())===0}},16650:(W,G,T)=>{var L=T(33051),R={getMin:function(k){var O=this.option,D=k||O.rangeStart==null?O.min:O.rangeStart;return this.axis&&D!=null&&D!=="dataMin"&&typeof D!="function"&&!L.eqNaN(D)&&(D=this.axis.scale.parse(D)),D},getMax:function(k){var O=this.option,D=k||O.rangeEnd==null?O.max:O.rangeEnd;return this.axis&&D!=null&&D!=="dataMax"&&typeof D!="function"&&!L.eqNaN(D)&&(D=this.axis.scale.parse(D)),D},getNeedCrossZero:function(){var k=this.option;return k.rangeStart==null&&k.rangeEnd==null&&!k.scale},getCoordSysModel:L.noop,setRange:function(k,O){this.option.rangeStart=k,this.option.rangeEnd=O},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};W.exports=R},21293:(W,G,T)=>{var L=T(33051),R=T(66484),k=T(98071),O=T(76172),D=O.getLayoutParams,E=O.mergeLayoutParam,I=T(51401),S=["value","category","time","log"];W.exports=function(_,g,u,c){L.each(S,function(l){g.extend({type:_+"Axis."+l,mergeDefaultAndTheme:function(e,t){var i=this.layoutMode,s=i?D(e):{},a=t.getTheme();L.merge(e,a.get(l+"Axis")),L.merge(e,this.getDefaultOption()),e.type=u(_,e),i&&E(e,s,i)},optionUpdated:function(){this.option.type==="category"&&(this.__ordinalMeta=I.createByAxisModel(this))},getCategories:function(e){var t=this.option;if(t.type==="category")return e?t.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:L.mergeAll([{},R[l+"Axis"],c],!0)})}),k.registerSubTypeDefaulter(_+"Axis",L.curry(u,_))}},58958:(W,G,T)=>{var L=T(33051),R=T(80423),k=T(32234).makeInner,O=T(97980),D=O.makeLabelFormatter,E=O.getOptionCategoryInterval,I=O.shouldShowAllLabels,S=k();function _(t,i){var s,a,o=g(t,"labels"),r=E(i);return u(o,r)||(L.isFunction(r)?s=e(t,r):(a=r==="auto"?function(n){var h=S(n).autoInterval;return h!=null?h:S(n).autoInterval=n.calculateCategoryInterval()}(t):r,s=l(t,a)),c(o,r,{labels:s,labelCategoryInterval:a}))}function g(t,i){return S(t)[i]||(S(t)[i]=[])}function u(t,i){for(var s=0;s<t.length;s++)if(t[s].key===i)return t[s].value}function c(t,i,s){return t.push({key:i,value:s}),s}function l(t,i,s){var a=D(t),o=t.scale,r=o.getExtent(),n=t.getLabelModel(),h=[],p=Math.max((i||0)+1,1),d=r[0],f=o.count();d!==0&&p>1&&f/p>2&&(d=Math.round(Math.ceil(d/p)*p));var v=I(t),m=n.get("showMinLabel")||v,y=n.get("showMaxLabel")||v;m&&d!==r[0]&&w(r[0]);for(var x=d;x<=r[1];x+=p)w(x);function w(M){h.push(s?M:{formattedLabel:a(M),rawLabel:o.getLabel(M),tickValue:M})}return y&&x-p!==r[1]&&w(r[1]),h}function e(t,i,s){var a=t.scale,o=D(t),r=[];return L.each(a.getTicks(),function(n){var h=a.getLabel(n);i(n,h)&&r.push(s?n:{formattedLabel:o(n),rawLabel:h,tickValue:n})}),r}G.createAxisLabels=function(t){return t.type==="category"?function(i){var s=i.getLabelModel(),a=_(i,s);return!s.get("show")||i.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a}(t):function(i){var s=i.scale.getTicks(),a=D(i);return{labels:L.map(s,function(o,r){return{formattedLabel:a(o,r),rawLabel:i.scale.getLabel(o),tickValue:o}})}}(t)},G.createAxisTicks=function(t,i){return t.type==="category"?function(s,a){var o,r,n=g(s,"ticks"),h=E(a),p=u(n,h);if(p)return p;if(a.get("show")&&!s.scale.isBlank()||(o=[]),L.isFunction(h))o=e(s,h,!0);else if(h==="auto"){var d=_(s,s.getLabelModel());r=d.labelCategoryInterval,o=L.map(d.labels,function(f){return f.tickValue})}else o=l(s,r=h,!0);return c(n,h,{ticks:o,tickCategoryInterval:r})}(t,i):{ticks:t.scale.getTicks()}},G.calculateCategoryInterval=function(t){var i=function(F){var V=F.getLabelModel();return{axisRotate:F.getRotate?F.getRotate():F.isHorizontal&&!F.isHorizontal()?90:0,labelRotate:V.get("rotate")||0,font:V.getFont()}}(t),s=D(t),a=(i.axisRotate-i.labelRotate)/180*Math.PI,o=t.scale,r=o.getExtent(),n=o.count();if(r[1]-r[0]<1)return 0;var h=1;n>40&&(h=Math.max(1,Math.floor(n/40)));for(var p=r[0],d=t.dataToCoord(p+1)-t.dataToCoord(p),f=Math.abs(d*Math.cos(a)),v=Math.abs(d*Math.sin(a)),m=0,y=0;p<=r[1];p+=h){var x,w,M=R.getBoundingRect(s(p),i.font,"center","top");x=1.3*M.width,w=1.3*M.height,m=Math.max(m,x,7),y=Math.max(y,w,7)}var C=m/f,A=y/v;isNaN(C)&&(C=1/0),isNaN(A)&&(A=1/0);var P=Math.max(0,Math.floor(Math.min(C,A))),b=S(t.model),N=t.getExtent(),B=b.lastAutoInterval,z=b.lastTickCount;return B!=null&&z!=null&&Math.abs(B-P)<=1&&Math.abs(z-n)<=1&&B>P&&b.axisExtend0===N[0]&&b.axisExtend1===N[1]?P=B:(b.lastTickCount=n,b.lastAutoInterval=P,b.axisExtend0=N[0],b.axisExtend1=N[1]),P}},74560:(W,G,T)=>{var L=T(33051),R=T(76172),k=T(85669),O=T(95899),D=864e5;function E(_,g,u){this._model=_}function I(_,g,u,c){var l=u.calendarModel,e=u.seriesModel,t=l?l.coordinateSystem:e?e.coordinateSystem:null;return t===this?t[_](c):null}E.prototype={constructor:E,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(_){var g=(_=k.parseDate(_)).getFullYear(),u=_.getMonth()+1;u=u<10?"0"+u:u;var c=_.getDate();c=c<10?"0"+c:c;var l=_.getDay();return{y:g,m:u,d:c,day:l=Math.abs((l+7-this.getFirstDayOfWeek())%7),time:_.getTime(),formatedDate:g+"-"+u+"-"+c,date:_}},getNextNDay:function(_,g){return(g=g||0)===0||(_=new Date(this.getDateInfo(_).time)).setDate(_.getDate()+g),this.getDateInfo(_)},update:function(_,g){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var u=this._rangeInfo.weeks||1,c=["width","height"],l=this._model.get("cellSize").slice(),e=this._model.getBoxLayoutParams(),t=this._orient==="horizontal"?[u,7]:[7,u];L.each([0,1],function(o){a(l,o)&&(e[c[o]]=l[o]*t[o])});var i={width:g.getWidth(),height:g.getHeight()},s=this._rect=R.getLayoutRect(e,i);function a(o,r){return o[r]!=null&&o[r]!=="auto"}L.each([0,1],function(o){a(l,o)||(l[o]=s[c[o]]/t[o])}),this._sw=l[0],this._sh=l[1]},dataToPoint:function(_,g){L.isArray(_)&&(_=_[0]),g==null&&(g=!0);var u=this.getDateInfo(_),c=this._rangeInfo,l=u.formatedDate;if(g&&!(u.time>=c.start.time&&u.time<c.end.time+D))return[NaN,NaN];var e=u.day,t=this._getRangeInfo([c.start.time,l]).nthWeek;return this._orient==="vertical"?[this._rect.x+e*this._sw+this._sw/2,this._rect.y+t*this._sh+this._sh/2]:[this._rect.x+t*this._sw+this._sw/2,this._rect.y+e*this._sh+this._sh/2]},pointToData:function(_){var g=this.pointToDate(_);return g&&g.time},dataToRect:function(_,g){var u=this.dataToPoint(_,g);return{contentShape:{x:u[0]-(this._sw-this._lineWidth)/2,y:u[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:u,tl:[u[0]-this._sw/2,u[1]-this._sh/2],tr:[u[0]+this._sw/2,u[1]-this._sh/2],br:[u[0]+this._sw/2,u[1]+this._sh/2],bl:[u[0]-this._sw/2,u[1]+this._sh/2]}},pointToDate:function(_){var g=Math.floor((_[0]-this._rect.x)/this._sw)+1,u=Math.floor((_[1]-this._rect.y)/this._sh)+1,c=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(u,g-1,c):this._getDateByWeeksAndDay(g,u-1,c)},convertToPixel:L.curry(I,"dataToPoint"),convertFromPixel:L.curry(I,"pointToData"),_initRangeOption:function(){var _=this._model.get("range"),g=_;if(L.isArray(g)&&g.length===1&&(g=g[0]),/^\d{4}$/.test(g)&&(_=[g+"-01-01",g+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(g)){var u=this.getDateInfo(g),c=u.date;c.setMonth(c.getMonth()+1);var l=this.getNextNDay(c,-1);_=[u.formatedDate,l.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(g)&&(_=[g,g]);var e=this._getRangeInfo(_);return e.start.time>e.end.time&&_.reverse(),_},_getRangeInfo:function(_){var g;(_=[this.getDateInfo(_[0]),this.getDateInfo(_[1])])[0].time>_[1].time&&(g=!0,_.reverse());var u=Math.floor(_[1].time/D)-Math.floor(_[0].time/D)+1,c=new Date(_[0].time),l=c.getDate(),e=_[1].date.getDate();c.setDate(l+u-1);var t=c.getDate();if(t!==e)for(var i=c.getTime()-_[1].time>0?1:-1;(t=c.getDate())!==e&&(c.getTime()-_[1].time)*i>0;)u-=i,c.setDate(t-i);var s=Math.floor((u+_[0].day+6)/7),a=g?1-s:s-1;return g&&_.reverse(),{range:[_[0].formatedDate,_[1].formatedDate],start:_[0],end:_[1],allDay:u,weeks:s,nthWeek:a,fweek:_[0].day,lweek:_[1].day}},_getDateByWeeksAndDay:function(_,g,u){var c=this._getRangeInfo(u);if(_>c.weeks||_===0&&g<c.fweek||_===c.weeks&&g>c.lweek)return!1;var l=7*(_-1)-c.fweek+g,e=new Date(c.start.time);return e.setDate(c.start.d+l),this.getDateInfo(e)}},E.dimensions=E.prototype.dimensions,E.getDimensionsInfo=E.prototype.getDimensionsInfo,E.create=function(_,g){var u=[];return _.eachComponent("calendar",function(c){var l=new E(c);u.push(l),c.coordinateSystem=l}),_.eachSeries(function(c){c.get("coordinateSystem")==="calendar"&&(c.coordinateSystem=u[c.get("calendarIndex")||0])}),u},O.register("calendar",E);var S=E;W.exports=S},91724:(W,G,T)=>{var L=T(33051),R=T(98071),k=T(76172),O=k.getLayoutParams,D=k.sizeCalculable,E=k.mergeLayoutParam,I=R.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(g,u,c,l){var e=O(g);I.superApply(this,"init",arguments),S(g,e)},mergeOption:function(g,u){I.superApply(this,"mergeOption",arguments),S(this.option,g)}});function S(g,u){var c=g.cellSize;L.isArray(c)?c.length===1&&(c[1]=c[0]):c=g.cellSize=[c,c];var l=L.map([0,1],function(e){return D(u,e)&&(c[e]="auto"),c[e]!=null&&c[e]!=="auto"});E(g,u,{type:"box",ignoreSize:l})}var _=I;W.exports=_},64888:W=>{W.exports=function(G){var T=G.getRect(),L=G.getRangeInfo();return{coordSys:{type:"calendar",x:T.x,y:T.y,width:T.width,height:T.height,cellWidth:G.getCellWidth(),cellHeight:G.getCellHeight(),rangeInfo:{start:L.start,end:L.end,weeks:L.weeks,dayCount:L.allDay}},api:{coord:function(R,k){return G.dataToPoint(R,k)}}}}},57760:(W,G,T)=>{var L=T(33051),R=T(3245),k=function(D,E,I,S,_){R.call(this,D,E,I),this.type=S||"value",this.position=_||"bottom"};k.prototype={constructor:k,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var D=this.position;return D==="top"||D==="bottom"},getGlobalExtent:function(D){var E=this.getExtent();return E[0]=this.toGlobalCoord(E[0]),E[1]=this.toGlobalCoord(E[1]),D&&E[0]>E[1]&&E.reverse(),E},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(D,E){return this.coordToData(this.toLocalCoord(D[this.dim==="x"?0:1]),E)},toLocalCoord:null,toGlobalCoord:null},L.inherits(k,R);var O=k;W.exports=O},54805:(W,G,T)=>{var L=T(33051),R=T(98071),k=T(21293),O=T(16650),D=R.extend({type:"cartesian2dAxis",axis:null,init:function(){D.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){D.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){D.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function E(_,g){return g.type||(g.data?"category":"value")}L.merge(D.prototype,O);var I={offset:0};k("x",D,E,I),k("y",D,E,I);var S=D;W.exports=S},53907:(W,G,T)=>{var L=T(33051);function R(D){return this._axes[D]}var k=function(D){this._axes={},this._dimList=[],this.name=D||""};k.prototype={constructor:k,type:"cartesian",getAxis:function(D){return this._axes[D]},getAxes:function(){return L.map(this._dimList,R,this)},getAxesByScale:function(D){return D=D.toLowerCase(),L.filter(this.getAxes(),function(E){return E.scale.type===D})},addAxis:function(D){var E=D.dim;this._axes[E]=D,this._dimList.push(E)},dataToCoord:function(D){return this._dataCoordConvert(D,"dataToCoord")},coordToData:function(D){return this._dataCoordConvert(D,"coordToData")},_dataCoordConvert:function(D,E){for(var I=this._dimList,S=D instanceof Array?[]:{},_=0;_<I.length;_++){var g=I[_],u=this._axes[g];S[g]=u[E](D[g])}return S}};var O=k;W.exports=O},81096:(W,G,T)=>{var L=T(33051),R=T(60479),k=T(53907);function O(E){k.call(this,E)}O.prototype={constructor:O,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(E){var I=this.getAxis("x"),S=this.getAxis("y");return I.contain(I.toLocalCoord(E[0]))&&S.contain(S.toLocalCoord(E[1]))},containData:function(E){return this.getAxis("x").containData(E[0])&&this.getAxis("y").containData(E[1])},dataToPoint:function(E,I,S){var _=this.getAxis("x"),g=this.getAxis("y");return(S=S||[])[0]=_.toGlobalCoord(_.dataToCoord(E[0])),S[1]=g.toGlobalCoord(g.dataToCoord(E[1])),S},clampData:function(E,I){var S=this.getAxis("x").scale,_=this.getAxis("y").scale,g=S.getExtent(),u=_.getExtent(),c=S.parse(E[0]),l=_.parse(E[1]);return(I=I||[])[0]=Math.min(Math.max(Math.min(g[0],g[1]),c),Math.max(g[0],g[1])),I[1]=Math.min(Math.max(Math.min(u[0],u[1]),l),Math.max(u[0],u[1])),I},pointToData:function(E,I){var S=this.getAxis("x"),_=this.getAxis("y");return(I=I||[])[0]=S.coordToData(S.toLocalCoord(E[0])),I[1]=_.coordToData(_.toLocalCoord(E[1])),I},getOtherAxis:function(E){return this.getAxis(E.dim==="x"?"y":"x")},getArea:function(){var E=this.getAxis("x").getGlobalExtent(),I=this.getAxis("y").getGlobalExtent(),S=Math.min(E[0],E[1]),_=Math.min(I[0],I[1]),g=Math.max(E[0],E[1])-S,u=Math.max(I[0],I[1])-_;return new R(S,_,g,u)}},L.inherits(O,k);var D=O;W.exports=D},77532:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=L.isObject,k=L.each,O=L.map,D=L.indexOf,E=(L.retrieve,T(76172).getLayoutRect),I=T(97980),S=I.createScaleByModel,_=I.ifAxisCrossZero,g=I.niceScaleExtent,u=I.estimateLabelUnionRect,c=T(81096),l=T(57760),e=T(95899),t=T(99936).getStackedDimension;function i(f,v,m){return f.getCoordSysModel()===v}function s(f,v,m){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(f,v,m),this.model=f}T(33927);var a=s.prototype;function o(f,v,m,y){m.getAxesOnZeroOf=function(){return x?[x]:[]};var x,w=f[v],M=m.model,C=M.get("axisLine.onZero"),A=M.get("axisLine.onZeroAxisIndex");if(C){if(A!=null)r(w[A])&&(x=w[A]);else for(var P in w)if(w.hasOwnProperty(P)&&r(w[P])&&!y[b(w[P])]){x=w[P];break}x&&(y[b(x)]=!0)}function b(N){return N.dim+"_"+N.index}}function r(f){return f&&f.type!=="category"&&f.type!=="time"&&_(f)}a.type="grid",a.axisPointerEnabled=!0,a.getRect=function(){return this._rect},a.update=function(f,v){var m=this._axesMap;this._updateScale(f,this.model),k(m.x,function(x){g(x.scale,x.model)}),k(m.y,function(x){g(x.scale,x.model)});var y={};k(m.x,function(x){o(m,"y",x,y)}),k(m.y,function(x){o(m,"x",x,y)}),this.resize(this.model,v)},a.resize=function(f,v,m){var y=E(f.getBoxLayoutParams(),{width:v.getWidth(),height:v.getHeight()});this._rect=y;var x=this._axesList;function w(){k(x,function(M){var C=M.isHorizontal(),A=C?[0,y.width]:[0,y.height],P=M.inverse?1:0;M.setExtent(A[P],A[1-P]),function(b,N){var B=b.getExtent(),z=B[0]+B[1];b.toGlobalCoord=b.dim==="x"?function(F){return F+N}:function(F){return z-F+N},b.toLocalCoord=b.dim==="x"?function(F){return F-N}:function(F){return z-F+N}}(M,C?y.x:y.y)})}w(),!m&&f.get("containLabel")&&(k(x,function(M){if(!M.model.get("axisLabel.inside")){var C=u(M);if(C){var A=M.isHorizontal()?"height":"width",P=M.model.get("axisLabel.margin");y[A]-=C[A]+P,M.position==="top"?y.y+=C.height+P:M.position==="left"&&(y.x+=C.width+P)}}}),w())},a.getAxis=function(f,v){var m=this._axesMap[f];if(m!=null){if(v==null){for(var y in m)if(m.hasOwnProperty(y))return m[y]}return m[v]}},a.getAxes=function(){return this._axesList.slice()},a.getCartesian=function(f,v){if(f!=null&&v!=null){var m="x"+f+"y"+v;return this._coordsMap[m]}R(f)&&(v=f.yAxisIndex,f=f.xAxisIndex);for(var y=0,x=this._coordsList;y<x.length;y++)if(x[y].getAxis("x").index===f||x[y].getAxis("y").index===v)return x[y]},a.getCartesians=function(){return this._coordsList.slice()},a.convertToPixel=function(f,v,m){var y=this._findConvertTarget(f,v);return y.cartesian?y.cartesian.dataToPoint(m):y.axis?y.axis.toGlobalCoord(y.axis.dataToCoord(m)):null},a.convertFromPixel=function(f,v,m){var y=this._findConvertTarget(f,v);return y.cartesian?y.cartesian.pointToData(m):y.axis?y.axis.coordToData(y.axis.toLocalCoord(m)):null},a._findConvertTarget=function(f,v){var m,y,x=v.seriesModel,w=v.xAxisModel||x&&x.getReferringComponents("xAxis")[0],M=v.yAxisModel||x&&x.getReferringComponents("yAxis")[0],C=v.gridModel,A=this._coordsList;return x?(m=x.coordinateSystem,D(A,m)<0&&(m=null)):w&&M?m=this.getCartesian(w.componentIndex,M.componentIndex):w?y=this.getAxis("x",w.componentIndex):M?y=this.getAxis("y",M.componentIndex):C&&C.coordinateSystem===this&&(m=this._coordsList[0]),{cartesian:m,axis:y}},a.containPoint=function(f){var v=this._coordsList[0];if(v)return v.containPoint(f)},a._initCartesian=function(f,v,m){var y={left:!1,right:!1,top:!1,bottom:!1},x={x:{},y:{}},w={x:0,y:0};if(v.eachComponent("xAxis",M("x"),this),v.eachComponent("yAxis",M("y"),this),!w.x||!w.y)return this._axesMap={},void(this._axesList=[]);function M(C){return function(A,P){if(i(A,f)){var b=A.get("position");C==="x"?b!=="top"&&b!=="bottom"&&(b=y.bottom?"top":"bottom"):b!=="left"&&b!=="right"&&(b=y.left?"right":"left"),y[b]=!0;var N=new l(C,S(A),[0,0],A.get("type"),b),B=N.type==="category";N.onBand=B&&A.get("boundaryGap"),N.inverse=A.get("inverse"),A.axis=N,N.model=A,N.grid=this,N.index=P,this._axesList.push(N),x[C][P]=N,w[C]++}}}this._axesMap=x,k(x.x,function(C,A){k(x.y,function(P,b){var N="x"+A+"y"+b,B=new c(N);B.grid=this,B.model=f,this._coordsMap[N]=B,this._coordsList.push(B),B.addAxis(C),B.addAxis(P)},this)},this)},a._updateScale=function(f,v){function m(y,x,w){k(y.mapDimension(x.dim,!0),function(M){x.scale.unionExtentFromData(y,t(y,M))})}k(this._axesList,function(y){y.scale.setExtent(1/0,-1/0)}),f.eachSeries(function(y){if(p(y)){var x=h(y),w=x[0],M=x[1];if(!i(w,v)||!i(M,v))return;var C=this.getCartesian(w.componentIndex,M.componentIndex),A=y.getData(),P=C.getAxis("x"),b=C.getAxis("y");A.type==="list"&&(m(A,P),m(A,b))}},this)},a.getTooltipAxes=function(f){var v=[],m=[];return k(this.getCartesians(),function(y){var x=f!=null&&f!=="auto"?y.getAxis(f):y.getBaseAxis(),w=y.getOtherAxis(x);D(v,x)<0&&v.push(x),D(m,w)<0&&m.push(w)}),{baseAxes:v,otherAxes:m}};var n=["xAxis","yAxis"];function h(f,v){return O(n,function(m){return f.getReferringComponents(m)[0]})}function p(f){return f.get("coordinateSystem")==="cartesian2d"}s.create=function(f,v){var m=[];return f.eachComponent("grid",function(y,x){var w=new s(y,f,v);w.name="grid_"+x,w.resize(y,v,!0),y.coordinateSystem=w,m.push(w)}),f.eachSeries(function(y){if(p(y)){var x=h(y),w=x[0],M=x[1],C=w.getCoordSysModel().coordinateSystem;y.coordinateSystem=C.getCartesian(w.componentIndex,M.componentIndex)}}),m},s.dimensions=s.prototype.dimensions=c.prototype.dimensions,e.register("cartesian2d",s);var d=s;W.exports=d},33927:(W,G,T)=>{T(54805);var L=T(98071).extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});W.exports=L},49069:(W,G,T)=>{var L=T(33051);G.layout=function(R,k,O){O=O||{};var D=R.coordinateSystem,E=k.axis,I={},S=E.getAxesOnZeroOf()[0],_=E.position,g=S?"onZero":_,u=E.dim,c=D.getRect(),l=[c.x,c.x+c.width,c.y,c.y+c.height],e={left:0,right:1,top:0,bottom:1,onZero:2},t=k.get("offset")||0,i=u==="x"?[l[2]-t,l[3]+t]:[l[0]-t,l[1]+t];if(S){var s=S.toGlobalCoord(S.dataToCoord(0));i[e.onZero]=Math.max(Math.min(s,i[1]),i[0])}I.position=[u==="y"?i[e[g]]:l[0],u==="x"?i[e[g]]:l[3]],I.rotation=Math.PI/2*(u==="x"?0:1),I.labelDirection=I.tickDirection=I.nameDirection={top:-1,bottom:1,left:-1,right:1}[_],I.labelOffset=S?i[e[_]]-i[e.onZero]:0,k.get("axisTick.inside")&&(I.tickDirection=-I.tickDirection),L.retrieve(O.labelInside,k.get("axisLabel.inside"))&&(I.labelDirection=-I.labelDirection);var a=k.get("axisLabel.rotate");return I.labelRotate=g==="top"?-a:a,I.z2=1,I}},7409:(W,G,T)=>{var L=T(33051);function R(k,O){return O=O||[0,0],L.map(["x","y"],function(D,E){var I=this.getAxis(D),S=O[E],_=k[E]/2;return I.type==="category"?I.getBandWidth():Math.abs(I.dataToCoord(S-_)-I.dataToCoord(S+_))},this)}W.exports=function(k){var O=k.grid.getRect();return{coordSys:{type:"cartesian2d",x:O.x,y:O.y,width:O.width,height:O.height},api:{coord:function(D){return k.dataToPoint(D)},size:L.bind(R,k)}}}},61418:(W,G,T)=>{var L=T(33051),R=T(60479),k=T(23845),O=T(11194);function D(S,_,g,u){k.call(this,S),this.map=_;var c=O.load(_,g);this._nameCoordMap=c.nameCoordMap,this._regionsMap=c.regionsMap,this._invertLongitute=u==null||u,this.regions=c.regions,this._rect=c.boundingRect}function E(S,_,g,u){var c=g.geoModel,l=g.seriesModel,e=c?c.coordinateSystem:l?l.coordinateSystem||(l.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return e===this?e[S](u):null}D.prototype={constructor:D,type:"geo",dimensions:["lng","lat"],containCoord:function(S){for(var _=this.regions,g=0;g<_.length;g++)if(_[g].contain(S))return!0;return!1},transformTo:function(S,_,g,u){var c=this.getBoundingRect(),l=this._invertLongitute;c=c.clone(),l&&(c.y=-c.y-c.height);var e=this._rawTransformable;if(e.transform=c.calculateTransform(new R(S,_,g,u)),e.decomposeTransform(),l){var t=e.scale;t[1]=-t[1]}e.updateTransform(),this._updateTransform()},getRegion:function(S){return this._regionsMap.get(S)},getRegionByCoord:function(S){for(var _=this.regions,g=0;g<_.length;g++)if(_[g].contain(S))return _[g]},addGeoCoord:function(S,_){this._nameCoordMap.set(S,_)},getGeoCoord:function(S){return this._nameCoordMap.get(S)},getBoundingRect:function(){return this._rect},dataToPoint:function(S,_,g){if(typeof S=="string"&&(S=this.getGeoCoord(S)),S)return k.prototype.dataToPoint.call(this,S,_,g)},convertToPixel:L.curry(E,"dataToPoint"),convertFromPixel:L.curry(E,"pointToData")},L.mixin(D,k);var I=D;W.exports=I},39618:(W,G,T)=>{var L=T(33051),R=T(32234),k=T(98071),O=T(4272),D=T(1501),E=T(18958),I=k.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(_){k.prototype.init.apply(this,arguments),R.defaultEmphasis(_,"label",["show"])},optionUpdated:function(){var _=this.option,g=this;_.regions=E.getFilledRegions(_.regions,_.map,_.nameMap),this._optionModelMap=L.reduce(_.regions||[],function(u,c){return c.name&&u.set(c.name,new O(c,g)),u},L.createHashMap()),this.updateSelectedMap(_.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(_){return this._optionModelMap.get(_)||new O(null,this,this.ecModel)},getFormattedLabel:function(_,g){g=g||"normal";var u=this.getRegionModel(_).get((g==="normal"?"":g+".")+"label.formatter"),c={name:_};return typeof u=="function"?(c.status=g,u(c)):typeof u=="string"?u.replace("{a}",_!=null?_:""):void 0},setZoom:function(_){this.option.zoom=_},setCenter:function(_){this.option.center=_}});L.mixin(I,D);var S=I;W.exports=S},64215:(W,G,T)=>{var L=T(60479),R=T(3726),k=T(45280),O=T(40765);function D(I,S,_){if(this.name=I,this.geometries=S,_)_=[_[0],_[1]];else{var g=this.getBoundingRect();_=[g.x+g.width/2,g.y+g.height/2]}this.center=_}D.prototype={constructor:D,properties:null,getBoundingRect:function(){var I=this._rect;if(I)return I;for(var S=Number.MAX_VALUE,_=[S,S],g=[-S,-S],u=[],c=[],l=this.geometries,e=0;e<l.length;e++)if(l[e].type==="polygon"){var t=l[e].exterior;R.fromPoints(t,u,c),k.min(_,_,u),k.max(g,g,c)}return e===0&&(_[0]=_[1]=g[0]=g[1]=0),this._rect=new L(_[0],_[1],g[0]-_[0],g[1]-_[1])},contain:function(I){var S=this.getBoundingRect(),_=this.geometries;if(!S.contain(I[0],I[1]))return!1;t:for(var g=0,u=_.length;g<u;g++)if(_[g].type==="polygon"){var c=_[g].exterior,l=_[g].interiors;if(O.contain(c,I[0],I[1])){for(var e=0;e<(l?l.length:0);e++)if(O.contain(l[e]))continue t;return!0}}return!1},transformTo:function(I,S,_,g){var u=this.getBoundingRect(),c=u.width/u.height;_?g||(g=_/c):_=c*g;for(var l=new L(I,S,_,g),e=u.calculateTransform(l),t=this.geometries,i=0;i<t.length;i++)if(t[i].type==="polygon"){for(var s=t[i].exterior,a=t[i].interiors,o=0;o<s.length;o++)k.applyTransform(s[o],s[o],e);for(var r=0;r<(a?a.length:0);r++)for(o=0;o<a[r].length;o++)k.applyTransform(a[r][o],a[r][o],e)}(u=this._rect).copy(l),this.center=[u.x+u.width/2,u.y+u.height/2]},cloneShallow:function(I){I==null&&(I=this.name);var S=new D(I,this.geometries,this.center);return S._rect=this._rect,S.transformTo=null,S}};var E=D;W.exports=E},85911:W=>{var G=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];W.exports=function(T,L){T==="china"&&L.name==="\u53F0\u6E7E"&&L.geometries.push({type:"polygon",exterior:G[0]})}},91182:W=>{var G={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};W.exports=function(T,L){if(T==="world"){var R=G[L.name];if(R){var k=L.center;k[0]=R[0],k[1]=R[1]}}}},65330:(W,G,T)=>{for(var L=T(33051),R=T(64215),k=[126,25],O=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],D=0;D<O.length;D++)for(var E=0;E<O[D].length;E++)O[D][E][0]/=10.5,O[D][E][1]/=-14,O[D][E][0]+=k[0],O[D][E][1]+=k[1];W.exports=function(I,S){I==="china"&&S.push(new R("\u5357\u6D77\u8BF8\u5C9B",L.map(O,function(_){return{type:"polygon",exterior:_}}),k))}},14901:W=>{var G={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};W.exports=function(T,L){if(T==="china"){var R=G[L.name];if(R){var k=L.center;k[0]+=R[0]/10.5,k[1]+=-R[1]/14}}}},18958:(W,G,T)=>{T(38175).__DEV__;var L=T(70492),R=T(33051),k=T(61418),O=T(76172),D=T(85669),E=T(11194),I=T(26418);function S(c,l){var e=c.get("boundingCoords");if(e!=null){var t=e[0],i=e[1];isNaN(t[0])||isNaN(t[1])||isNaN(i[0])||isNaN(i[1])||this.setBoundingRect(t[0],t[1],i[0]-t[0],i[1]-t[1])}var s,a=this.getBoundingRect(),o=c.get("layoutCenter"),r=c.get("layoutSize"),n=l.getWidth(),h=l.getHeight(),p=a.width/a.height*this.aspectScale,d=!1;if(o&&r&&(o=[D.parsePercent(o[0],n),D.parsePercent(o[1],h)],r=D.parsePercent(r,Math.min(n,h)),isNaN(o[0])||isNaN(o[1])||isNaN(r)||(d=!0)),d){var f={};p>1?(f.width=r,f.height=r/p):(f.height=r,f.width=r*p),f.y=o[1]-f.height/2,f.x=o[0]-f.width/2}else(s=c.getBoxLayoutParams()).aspect=p,f=O.getLayoutRect(s,{width:n,height:h});this.setViewRect(f.x,f.y,f.width,f.height),this.setCenter(c.get("center")),this.setZoom(c.get("zoom"))}function _(c,l){R.each(l.get("geoCoord"),function(e,t){c.addGeoCoord(t,e)})}var g={dimensions:k.prototype.dimensions,create:function(c,l){var e=[];c.eachComponent("geo",function(i,s){var a=i.get("map"),o=i.get("aspectScale"),r=!0,n=I.retrieveMap(a);n&&n[0]&&n[0].type==="svg"?(o==null&&(o=1),r=!1):o==null&&(o=.75);var h=new k(a+s,a,i.get("nameMap"),r);h.aspectScale=o,h.zoomLimit=i.get("scaleLimit"),e.push(h),_(h,i),i.coordinateSystem=h,h.model=i,h.resize=S,h.resize(i,l)}),c.eachSeries(function(i){if(i.get("coordinateSystem")==="geo"){var s=i.get("geoIndex")||0;i.coordinateSystem=e[s]}});var t={};return c.eachSeriesByType("map",function(i){if(!i.getHostGeoModel()){var s=i.getMapType();t[s]=t[s]||[],t[s].push(i)}}),R.each(t,function(i,s){var a=R.map(i,function(r){return r.get("nameMap")}),o=new k(s,s,R.mergeAll(a));o.zoomLimit=R.retrieve.apply(null,R.map(i,function(r){return r.get("scaleLimit")})),e.push(o),o.resize=S,o.aspectScale=i[0].get("aspectScale"),o.resize(i[0],l),R.each(i,function(r){r.coordinateSystem=o,_(o,r)})}),e},getFilledRegions:function(c,l,e){for(var t=(c||[]).slice(),i=R.createHashMap(),s=0;s<t.length;s++)i.set(t[s].name,t[s]);var a=E.load(l,e);return R.each(a.regions,function(o){var r=o.name;!i.get(r)&&t.push({name:r})}),t}};L.registerCoordinateSystem("geo",g);var u=g;W.exports=u},64325:(W,G,T)=>{var L=T(33051).each,R=T(76672),k=T(32234).makeInner,O=T(65330),D=T(14901),E=T(91182),I=T(85911),S=k(),_={load:function(u,c,l){var e=S(c).parsed;if(e)return e;var t,i=c.specialAreas||{},s=c.geoJSON;try{t=s?R(s,l):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return O(u,t),L(t,function(a){var o=a.name;D(u,a),E(u,a),I(u,a);var r=i[o];r&&a.transformTo(r.left,r.top,r.width,r.height)}),S(c).parsed={regions:t,boundingRect:g(t)}}};function g(u){for(var c,l=0;l<u.length;l++){var e=u[l].getBoundingRect();(c=c||e.clone()).union(e)}return c}W.exports=_},50402:(W,G,T)=>{var L=T(10003),R=L.parseSVG,k=L.makeViewBoxTransform,O=T(8524),D=T(27304),E=T(33051),I=E.assert,S=E.createHashMap,_=T(60479),g=(0,T(32234).makeInner)(),u={load:function(l,e){var t=g(e).originRoot;if(t)return{root:t,boundingRect:g(e).boundingRect};var i=c(e);return g(e).originRoot=i.root,g(e).boundingRect=i.boundingRect,i},makeGraphic:function(l,e,t){var i=g(e),s=i.rootMap||(i.rootMap=S()),a=s.get(t);if(a)return a;var o=i.originRoot,r=i.boundingRect;return i.originRootHostKey?a=c(e,r).root:(i.originRootHostKey=t,a=o),s.set(t,a)},removeGraphic:function(l,e,t){var i=g(e),s=i.rootMap;s&&s.removeKey(t),t===i.originRootHostKey&&(i.originRootHostKey=null)}};function c(l,e){var t,i,s=l.svgXML;try{i=(t=s&&R(s,{ignoreViewBox:!0,ignoreRootClip:!0})||{}).root,I(i!=null)}catch(p){throw new Error(`Invalid svg format
`+p.message)}var a=t.width,o=t.height,r=t.viewBoxRect;if(e||(e=a==null||o==null?i.getBoundingRect():new _(0,0,0,0),a!=null&&(e.width=a),o!=null&&(e.height=o)),r){var n=k(r,e.width,e.height),h=i;(i=new O).add(h),h.scale=n.scale,h.position=n.position}return i.setClipPath(new D({shape:e.plain()})),{root:i,boundingRect:e}}W.exports=u},11194:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=L.each,k=L.createHashMap,O=T(26418),D=T(64325),E=T(50402),I=T(60479),S={geoJSON:D,svg:E},_={load:function(c,l,e){var t,i=[],s=k(),a=k(),o=u(c);return R(o,function(r){var n=S[r.type].load(c,r,e);R(n.regions,function(p){var d=p.name;l&&l.hasOwnProperty(d)&&(p=p.cloneShallow(d=l[d])),i.push(p),s.set(d,p),a.set(d,p.center)});var h=n.boundingRect;h&&(t?t.union(h):t=h.clone())}),{regions:i,regionsMap:s,nameCoordMap:a,boundingRect:t||new I(0,0,0,0)}},makeGraphic:g("makeGraphic"),removeGraphic:g("removeGraphic")};function g(c){return function(l,e){var t=u(l),i=[];return R(t,function(s){var a=S[s.type][c];a&&i.push(a(l,s,e))}),i}}function u(c){return O.retrieveMap(c)||[]}W.exports=_},26418:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=L.createHashMap,k=L.isString,O=L.isArray,D=L.each,E=(L.assert,T(10003).parseXML),I=R(),S={registerMap:function(g,u,c){var l;return O(u)?l=u:u.svg?l=[{type:"svg",source:u.svg,specialAreas:u.specialAreas}]:(u.geoJson&&!u.features&&(c=u.specialAreas,u=u.geoJson),l=[{type:"geoJSON",source:u,specialAreas:c}]),D(l,function(e){var t=e.type;t==="geoJson"&&(t=e.type="geoJSON"),(0,_[t])(e)}),I.set(g,l)},retrieveMap:function(g){return I.get(g)}},_={geoJSON:function(g){var u=g.source;g.geoJSON=k(u)?typeof JSON<"u"&&JSON.parse?JSON.parse(u):new Function("return ("+u+");")():u},svg:function(g){g.svgXML=E(g.source)}};W.exports=S},76672:(W,G,T)=>{var L=T(33051),R=T(64215);function k(O,D,E){for(var I=[],S=D[0],_=D[1],g=0;g<O.length;g+=2){var u=O.charCodeAt(g)-64,c=O.charCodeAt(g+1)-64;u=u>>1^-(1&u),c=c>>1^-(1&c),S=u+=S,_=c+=_,I.push([u/E,c/E])}return I}W.exports=function(O,D){return function(E){if(!E.UTF8Encoding)return E;var I=E.UTF8Scale;I==null&&(I=1024);for(var S=E.features,_=0;_<S.length;_++)for(var g=S[_].geometry,u=g.coordinates,c=g.encodeOffsets,l=0;l<u.length;l++){var e=u[l];if(g.type==="Polygon")u[l]=k(e,c[l],I);else if(g.type==="MultiPolygon")for(var t=0;t<e.length;t++){var i=e[t];e[t]=k(i,c[l][t],I)}}E.UTF8Encoding=!1}(O),L.map(L.filter(O.features,function(E){return E.geometry&&E.properties&&E.geometry.coordinates.length>0}),function(E){var I=E.properties,S=E.geometry,_=S.coordinates,g=[];S.type==="Polygon"&&g.push({type:"polygon",exterior:_[0],interiors:_.slice(1)}),S.type==="MultiPolygon"&&L.each(_,function(c){c[0]&&g.push({type:"polygon",exterior:c[0],interiors:c.slice(1)})});var u=new R(I[D||"name"],g,I.cp);return u.properties=I,u})}},55389:(W,G,T)=>{var L=T(33051);function R(k,O){return O=O||[0,0],L.map([0,1],function(D){var E=O[D],I=k[D]/2,S=[],_=[];return S[D]=E-I,_[D]=E+I,S[1-D]=_[1-D]=O[1-D],Math.abs(this.dataToPoint(S)[D]-this.dataToPoint(_)[D])},this)}W.exports=function(k){var O=k.getBoundingRect();return{coordSys:{type:"geo",x:O.x,y:O.y,width:O.width,height:O.height,zoom:k.getZoom()},api:{coord:function(D){return k.dataToPoint(D)},size:L.bind(R,k)}}}},53309:(W,G,T)=>{var L=T(33051),R=T(98071),k=T(59066),O=T(21293),D=T(85669),E=T(16650),I=R.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return k([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(_){var g=this.activeIntervals=L.clone(_);if(g)for(var u=g.length-1;u>=0;u--)D.asc(g[u])},getActiveState:function(_){var g=this.activeIntervals;if(!g.length)return"normal";if(_==null||isNaN(_))return"inactive";if(g.length===1){var u=g[0];if(u[0]<=_&&_<=u[1])return"active"}else for(var c=0,l=g.length;c<l;c++)if(g[c][0]<=_&&_<=g[c][1])return"active";return"inactive"}});L.merge(I.prototype,E),O("parallel",I,function(_,g){return g.type||(g.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10});var S=I;W.exports=S},21483:(W,G,T)=>{var L=T(33051),R=T(32892),k=T(76172),O=T(97980),D=T(95847),E=T(51177),I=T(85669),S=T(19233),_=L.each,g=Math.min,u=Math.max,c=Math.floor,l=Math.ceil,e=I.round,t=Math.PI;function i(n,h,p){this._axesMap=L.createHashMap(),this._axesLayout={},this.dimensions=n.dimensions,this._rect,this._model=n,this._init(n,h,p)}function s(n,h){return g(u(n,h[0]),h[1])}function a(n,h){var p=h.layoutLength/(h.axisCount-1);return{position:p*n,axisNameAvailableWidth:p,axisLabelShow:!0}}function o(n,h){var p,d,f=h.layoutLength,v=h.axisExpandWidth,m=h.axisCount,y=h.axisCollapseWidth,x=h.winInnerIndices,w=y,M=!1;return n<x[0]?(p=n*y,d=y):n<=x[1]?(p=h.axisExpandWindow0Pos+n*v-h.axisExpandWindow[0],w=v,M=!0):(p=f-(m-1-n)*y,d=y),{position:p,axisNameAvailableWidth:w,axisLabelShow:M,nameTruncateMaxWidth:d}}i.prototype={type:"parallel",constructor:i,_init:function(n,h,p){var d=n.dimensions,f=n.parallelAxisIndex;_(d,function(v,m){var y=f[m],x=h.getComponent("parallelAxis",y),w=this._axesMap.set(v,new D(v,O.createScaleByModel(x),[0,0],x.get("type"),y)),M=w.type==="category";w.onBand=M&&x.get("boundaryGap"),w.inverse=x.get("inverse"),x.axis=w,w.model=x,w.coordinateSystem=x.coordinateSystem=this},this)},update:function(n,h){this._updateAxesFromSeries(this._model,n)},containPoint:function(n){var h=this._makeLayoutInfo(),p=h.axisBase,d=h.layoutBase,f=h.pixelDimIndex,v=n[1-f],m=n[f];return v>=p&&v<=p+h.axisLength&&m>=d&&m<=d+h.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(n,h){h.eachSeries(function(p){if(n.contains(p,h)){var d=p.getData();_(this.dimensions,function(f){var v=this._axesMap.get(f);v.scale.unionExtentFromData(d,d.mapDimension(f)),O.niceScaleExtent(v.scale,v.model)},this)}},this)},resize:function(n,h){this._rect=k.getLayoutRect(n.getBoxLayoutParams(),{width:h.getWidth(),height:h.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var n,h=this._model,p=this._rect,d=["x","y"],f=["width","height"],v=h.get("layout"),m=v==="horizontal"?0:1,y=p[f[m]],x=[0,y],w=this.dimensions.length,M=s(h.get("axisExpandWidth"),x),C=s(h.get("axisExpandCount")||0,[0,w]),A=h.get("axisExpandable")&&w>3&&w>C&&C>1&&M>0&&y>0,P=h.get("axisExpandWindow");P?(n=s(P[1]-P[0],x),P[1]=P[0]+n):(n=s(M*(C-1),x),(P=[M*(h.get("axisExpandCenter")||c(w/2))-n/2])[1]=P[0]+n);var b=(y-n)/(w-C);b<3&&(b=0);var N=[c(e(P[0]/M,1))+1,l(e(P[1]/M,1))-1],B=b/M*P[0];return{layout:v,pixelDimIndex:m,layoutBase:p[d[m]],layoutLength:y,axisBase:p[d[1-m]],axisLength:p[f[1-m]],axisExpandable:A,axisExpandWidth:M,axisCollapseWidth:b,axisExpandWindow:P,axisCount:w,winInnerIndices:N,axisExpandWindow0Pos:B}},_layoutAxes:function(){var n=this._rect,h=this._axesMap,p=this.dimensions,d=this._makeLayoutInfo(),f=d.layout;h.each(function(v){var m=[0,d.axisLength],y=v.inverse?1:0;v.setExtent(m[y],m[1-y])}),_(p,function(v,m){var y=(d.axisExpandable?o:a)(m,d),x={horizontal:{x:y.position,y:d.axisLength},vertical:{x:0,y:y.position}},w={horizontal:t/2,vertical:0},M=[x[f].x+n.x,x[f].y+n.y],C=w[f],A=R.create();R.rotate(A,A,C),R.translate(A,A,M),this._axesLayout[v]={position:M,rotation:C,transform:A,axisNameAvailableWidth:y.axisNameAvailableWidth,axisLabelShow:y.axisLabelShow,nameTruncateMaxWidth:y.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(n){return this._axesMap.get(n)},dataToPoint:function(n,h){return this.axisCoordToPoint(this._axesMap.get(h).dataToCoord(n),h)},eachActiveState:function(n,h,p,d){p==null&&(p=0),d==null&&(d=n.count());var f=this._axesMap,v=this.dimensions,m=[],y=[];L.each(v,function(b){m.push(n.mapDimension(b)),y.push(f.get(b).model)});for(var x=this.hasAxisBrushed(),w=p;w<d;w++){var M;if(x){M="active";for(var C=n.getValues(m,w),A=0,P=v.length;A<P;A++)if(y[A].getActiveState(C[A])==="inactive"){M="inactive";break}}else M="normal";h(M,w)}},hasAxisBrushed:function(){for(var n=this.dimensions,h=this._axesMap,p=!1,d=0,f=n.length;d<f;d++)h.get(n[d]).model.getActiveState()!=="normal"&&(p=!0);return p},axisCoordToPoint:function(n,h){var p=this._axesLayout[h];return E.applyTransform([n,0],p.transform)},getAxisLayout:function(n){return L.clone(this._axesLayout[n])},getSlidedAxisExpandWindow:function(n){var h=this._makeLayoutInfo(),p=h.pixelDimIndex,d=h.axisExpandWindow.slice(),f=d[1]-d[0],v=[0,h.axisExpandWidth*(h.axisCount-1)];if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:d};var m,y=n[p]-h.layoutBase-h.axisExpandWindow0Pos,x="slide",w=h.axisCollapseWidth,M=this._model.get("axisExpandSlideTriggerArea"),C=M[0]!=null;return w?(C&&w&&y<f*M[0]?(x="jump",m=y-f*M[2]):C&&w&&y>f*(1-M[0])?(x="jump",m=y-f*(1-M[2])):(m=y-f*M[1])>=0&&(m=y-f*(1-M[1]))<=0&&(m=0),(m*=h.axisExpandWidth/w)?S(m,d,v,"all"):x="none"):(f=d[1]-d[0],(d=[u(0,v[1]*y/f-f/2)])[1]=g(v[1],d[0]+f),d[0]=d[1]-f),{axisExpandWindow:d,behavior:x}}};var r=i;W.exports=r},95847:(W,G,T)=>{var L=T(33051),R=T(3245),k=function(D,E,I,S,_){R.call(this,D,E,I),this.type=S||"value",this.axisIndex=_};k.prototype={constructor:k,model:null,isHorizontal:function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"}},L.inherits(k,R);var O=k;W.exports=O},20946:(W,G,T)=>{var L=T(33051),R=T(98071);T(53309);var k=R.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){R.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(O){var D=this.option;O&&L.merge(D,O,!0),this._initDimensions()},contains:function(O,D){var E=O.get("parallelIndex");return E!=null&&D.getComponent("parallel",E)===this},setAxisExpand:function(O){L.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(D){O.hasOwnProperty(D)&&(this.option[D]=O[D])},this)},_initDimensions:function(){var O=this.dimensions=[],D=this.parallelAxisIndex=[],E=L.filter(this.dependentModels.parallelAxis,function(I){return(I.get("parallelIndex")||0)===this.componentIndex},this);L.each(E,function(I){O.push("dim"+I.get("dim")),D.push(I.componentIndex)})}});W.exports=k},14506:(W,G,T)=>{var L=T(21483);T(95899).register("parallel",{create:function(R,k){var O=[];return R.eachComponent("parallel",function(D,E){var I=new L(D,R,k);I.name="parallel_"+E,I.resize(D,k),D.coordinateSystem=I,I.model=D,O.push(I)}),R.eachSeries(function(D){if(D.get("coordinateSystem")==="parallel"){var E=R.queryComponents({mainType:"parallel",index:D.get("parallelIndex"),id:D.get("parallelId")})[0];D.coordinateSystem=E.coordinateSystem}}),O}})},20769:(W,G,T)=>{var L=T(33051),R=T(32234);W.exports=function(k){(function(O){if(!O.parallel){var D=!1;L.each(O.series,function(E){E&&E.type==="parallel"&&(D=!0)}),D&&(O.parallel=[{}])}})(k),function(O){var D=R.normalizeToArray(O.parallelAxis);L.each(D,function(E){if(L.isObject(E)){var I=E.parallelIndex||0,S=R.normalizeToArray(O.parallel)[I];S&&S.parallelAxisDefault&&L.merge(E,S.parallelAxisDefault,!1)}})}(k)}},76656:(W,G,T)=>{var L=T(33051),R=T(80423),k=T(3245),O=(0,T(32234).makeInner)();function D(I,S){S=S||[0,360],k.call(this,"angle",I,S),this.type="category"}D.prototype={constructor:D,pointToData:function(I,S){return this.polar.pointToData(I,S)[this.dim==="radius"?0:1]},dataToAngle:k.prototype.dataToCoord,angleToData:k.prototype.coordToData,calculateCategoryInterval:function(){var I=this,S=I.getLabelModel(),_=I.scale,g=_.getExtent(),u=_.count();if(g[1]-g[0]<1)return 0;var c=g[0],l=I.dataToCoord(c+1)-I.dataToCoord(c),e=Math.abs(l),t=R.getBoundingRect(c,S.getFont(),"center","top"),i=Math.max(t.height,7)/e;isNaN(i)&&(i=1/0);var s=Math.max(0,Math.floor(i)),a=O(I.model),o=a.lastAutoInterval,r=a.lastTickCount;return o!=null&&r!=null&&Math.abs(o-s)<=1&&Math.abs(r-u)<=1&&o>s?s=o:(a.lastTickCount=u,a.lastAutoInterval=s),s}},L.inherits(D,k);var E=D;W.exports=E},31696:(W,G,T)=>{var L=T(33051),R=T(98071),k=T(21293),O=T(16650),D=R.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});L.merge(D.prototype,O);function E(I,S){return S.type||(S.data?"category":"value")}k("angle",D,E,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),k("radius",D,E,{splitNumber:5})},86934:(W,G,T)=>{var L=T(25341),R=T(76656),k=function(D){this.name=D||"",this.cx=0,this.cy=0,this._radiusAxis=new L,this._angleAxis=new R,this._radiusAxis.polar=this._angleAxis.polar=this};k.prototype={type:"polar",axisPointerEnabled:!0,constructor:k,dimensions:["radius","angle"],model:null,containPoint:function(D){var E=this.pointToCoord(D);return this._radiusAxis.contain(E[0])&&this._angleAxis.contain(E[1])},containData:function(D){return this._radiusAxis.containData(D[0])&&this._angleAxis.containData(D[1])},getAxis:function(D){return this["_"+D+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(D){var E=[],I=this._angleAxis,S=this._radiusAxis;return I.scale.type===D&&E.push(I),S.scale.type===D&&E.push(S),E},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(D){var E=this._angleAxis;return D===E?this._radiusAxis:E},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(D){var E=D!=null&&D!=="auto"?this.getAxis(D):this.getBaseAxis();return{baseAxes:[E],otherAxes:[this.getOtherAxis(E)]}},dataToPoint:function(D,E){return this.coordToPoint([this._radiusAxis.dataToRadius(D[0],E),this._angleAxis.dataToAngle(D[1],E)])},pointToData:function(D,E){var I=this.pointToCoord(D);return[this._radiusAxis.radiusToData(I[0],E),this._angleAxis.angleToData(I[1],E)]},pointToCoord:function(D){var E=D[0]-this.cx,I=D[1]-this.cy,S=this.getAngleAxis(),_=S.getExtent(),g=Math.min(_[0],_[1]),u=Math.max(_[0],_[1]);S.inverse?g=u-360:u=g+360;var c=Math.sqrt(E*E+I*I);E/=c,I/=c;for(var l=Math.atan2(-I,E)/Math.PI*180,e=l<g?1:-1;l<g||l>u;)l+=360*e;return[c,l]},coordToPoint:function(D){var E=D[0],I=D[1]/180*Math.PI;return[Math.cos(I)*E+this.cx,-Math.sin(I)*E+this.cy]},getArea:function(){var D=this.getAngleAxis(),E=this.getRadiusAxis().getExtent().slice();E[0]>E[1]&&E.reverse();var I=D.getExtent(),S=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:E[0],r:E[1],startAngle:-I[0]*S,endAngle:-I[1]*S,clockwise:D.inverse,contain:function(_,g){var u=_-this.cx,c=g-this.cy,l=u*u+c*c,e=this.r,t=this.r0;return l<=e*e&&l>=t*t}}}};var O=k;W.exports=O},46681:(W,G,T)=>{var L=T(70492);T(31696);var R=L.extendComponentModel({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(k){var O;return this.ecModel.eachComponent(k,function(D){D.getCoordSysModel()===this&&(O=D)},this),O},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}});W.exports=R},25341:(W,G,T)=>{var L=T(33051),R=T(3245);function k(D,E){R.call(this,"radius",D,E),this.type="category"}k.prototype={constructor:k,pointToData:function(D,E){return this.polar.pointToData(D,E)[this.dim==="radius"?0:1]},dataToRadius:R.prototype.dataToCoord,radiusToData:R.prototype.coordToData},L.inherits(k,R);var O=k;W.exports=O},90580:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=T(86934),k=T(85669).parsePercent,O=T(97980),D=O.createScaleByModel,E=O.niceScaleExtent,I=T(95899),S=T(99936).getStackedDimension;function _(c,l){var e=this,t=e.getAngleAxis(),i=e.getRadiusAxis();if(t.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),c.eachSeries(function(o){if(o.coordinateSystem===e){var r=o.getData();L.each(r.mapDimension("radius",!0),function(n){i.scale.unionExtentFromData(r,S(r,n))}),L.each(r.mapDimension("angle",!0),function(n){t.scale.unionExtentFromData(r,S(r,n))})}}),E(t.scale,t.model),E(i.scale,i.model),t.type==="category"&&!t.onBand){var s=t.getExtent(),a=360/t.scale.count();t.inverse?s[1]+=a:s[1]-=a,t.setExtent(s[0],s[1])}}function g(c,l){if(c.type=l.get("type"),c.scale=D(l),c.onBand=l.get("boundaryGap")&&c.type==="category",c.inverse=l.get("inverse"),l.mainType==="angleAxis"){c.inverse^=l.get("clockwise");var e=l.get("startAngle");c.setExtent(e,e+(c.inverse?-360:360))}l.axis=c,c.model=l}T(46681);var u={dimensions:R.prototype.dimensions,create:function(c,l){var e=[];return c.eachComponent("polar",function(t,i){var s=new R(i);s.update=_;var a=s.getRadiusAxis(),o=s.getAngleAxis(),r=t.findAxisModel("radiusAxis"),n=t.findAxisModel("angleAxis");g(a,r),g(o,n),function(h,p,d){var f=p.get("center"),v=d.getWidth(),m=d.getHeight();h.cx=k(f[0],v),h.cy=k(f[1],m);var y=h.getRadiusAxis(),x=Math.min(v,m)/2,w=p.get("radius");w==null?w=[0,"100%"]:L.isArray(w)||(w=[0,w]),w=[k(w[0],x),k(w[1],x)],y.inverse?y.setExtent(w[1],w[0]):y.setExtent(w[0],w[1])}(s,t,l),e.push(s),t.coordinateSystem=s,s.model=t}),c.eachSeries(function(t){if(t.get("coordinateSystem")==="polar"){var i=c.queryComponents({mainType:"polar",index:t.get("polarIndex"),id:t.get("polarId")})[0];t.coordinateSystem=i.coordinateSystem}}),e}};I.register("polar",u)},54649:(W,G,T)=>{var L=T(33051);function R(k,O){return L.map(["Radius","Angle"],function(D,E){var I=this["get"+D+"Axis"](),S=O[E],_=k[E]/2,g="dataTo"+D,u=I.type==="category"?I.getBandWidth():Math.abs(I[g](S-_)-I[g](S+_));return D==="Angle"&&(u=u*Math.PI/180),u},this)}W.exports=function(k){var O=k.getRadiusAxis(),D=k.getAngleAxis(),E=O.getExtent();return E[0]>E[1]&&E.reverse(),{coordSys:{type:"polar",cx:k.cx,cy:k.cy,r:E[1],r0:E[0]},api:{coord:L.bind(function(I){var S=O.dataToRadius(I[0]),_=D.dataToAngle(I[1]),g=k.coordToPoint([S,_]);return g.push(S,_*Math.PI/180),g}),size:L.bind(R,k)}}}},20139:(W,G,T)=>{var L=T(33051),R=T(3245);function k(D,E,I){R.call(this,D,E,I),this.type="value",this.angle=0,this.name="",this.model}L.inherits(k,R);var O=k;W.exports=O},26884:(W,G,T)=>{var L=T(33051),R=T(20139),k=T(70103),O=T(85669),D=T(97980),E=D.getScaleExtent,I=D.niceScaleExtent,S=T(95899),_=T(76304);function g(c,l,e){this._model=c,this.dimensions=[],this._indicatorAxes=L.map(c.getIndicatorModels(),function(t,i){var s="indicator_"+i,a=new R(s,t.get("axisType")==="log"?new _:new k);return a.name=t.get("name"),a.model=t,t.axis=a,this.dimensions.push(s),a},this),this.resize(c,e),this.cx,this.cy,this.r,this.r0,this.startAngle}g.prototype.getIndicatorAxes=function(){return this._indicatorAxes},g.prototype.dataToPoint=function(c,l){var e=this._indicatorAxes[l];return this.coordToPoint(e.dataToCoord(c),l)},g.prototype.coordToPoint=function(c,l){var e=this._indicatorAxes[l].angle;return[this.cx+c*Math.cos(e),this.cy-c*Math.sin(e)]},g.prototype.pointToData=function(c){var l=c[0]-this.cx,e=c[1]-this.cy,t=Math.sqrt(l*l+e*e);l/=t,e/=t;for(var i,s=Math.atan2(-e,l),a=1/0,o=-1,r=0;r<this._indicatorAxes.length;r++){var n=this._indicatorAxes[r],h=Math.abs(s-n.angle);h<a&&(i=n,o=r,a=h)}return[o,+(i&&i.coordToData(t))]},g.prototype.resize=function(c,l){var e=c.get("center"),t=l.getWidth(),i=l.getHeight(),s=Math.min(t,i)/2;this.cx=O.parsePercent(e[0],t),this.cy=O.parsePercent(e[1],i),this.startAngle=c.get("startAngle")*Math.PI/180;var a=c.get("radius");typeof a!="string"&&typeof a!="number"||(a=[0,a]),this.r0=O.parsePercent(a[0],s),this.r=O.parsePercent(a[1],s),L.each(this._indicatorAxes,function(o,r){o.setExtent(this.r0,this.r);var n=this.startAngle+r*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),o.angle=n},this)},g.prototype.update=function(c,l){var e=this._indicatorAxes,t=this._model;L.each(e,function(a){a.scale.setExtent(1/0,-1/0)}),c.eachSeriesByType("radar",function(a,o){if(a.get("coordinateSystem")==="radar"&&c.getComponent("radar",a.get("radarIndex"))===t){var r=a.getData();L.each(e,function(n){n.scale.unionExtentFromData(r,r.mapDimension(n.dim))})}},this);var i=t.get("splitNumber");function s(a){var o=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),r=a/o;return r===2?r=5:r*=2,r*o}L.each(e,function(a,o){var r=E(a.scale,a.model).extent;I(a.scale,a.model);var n=a.model,h=a.scale,p=n.getMin(),d=n.getMax(),f=h.getInterval();if(p!=null&&d!=null)h.setExtent(+p,+d),h.setInterval((d-p)/i);else if(p!=null)do v=p+f*i,h.setExtent(+p,v),h.setInterval(f),f=s(f);while(v<r[1]&&isFinite(v)&&isFinite(r[1]));else if(d!=null)do m=d-f*i,h.setExtent(m,+d),h.setInterval(f),f=s(f);while(m>r[0]&&isFinite(m)&&isFinite(r[0]));else{h.getTicks().length-1>i&&(f=s(f));var v=Math.ceil(r[1]/f)*f,m=O.round(v-f*i);h.setExtent(m,v),h.setInterval(f)}})},g.dimensions=[],g.create=function(c,l){var e=[];return c.eachComponent("radar",function(t){var i=new g(t,c,l);e.push(i),t.coordinateSystem=i}),c.eachSeriesByType("radar",function(t){t.get("coordinateSystem")==="radar"&&(t.coordinateSystem=e[t.get("radarIndex")||0])}),e},S.register("radar",g);var u=g;W.exports=u},48681:(W,G,T)=>{var L=T(70492),R=T(33051),k=T(66484),O=T(4272),D=T(16650),E=k.valueAxis;function I(_,g){return R.defaults({show:g},_)}var S=L.extendComponentModel({type:"radar",optionUpdated:function(){var _=this.get("boundaryGap"),g=this.get("splitNumber"),u=this.get("scale"),c=this.get("axisLine"),l=this.get("axisTick"),e=this.get("axisType"),t=this.get("axisLabel"),i=this.get("name"),s=this.get("name.show"),a=this.get("name.formatter"),o=this.get("nameGap"),r=this.get("triggerEvent"),n=R.map(this.get("indicator")||[],function(h){h.max!=null&&h.max>0&&!h.min?h.min=0:h.min!=null&&h.min<0&&!h.max&&(h.max=0);var p=i;if(h.color!=null&&(p=R.defaults({color:h.color},i)),h=R.merge(R.clone(h),{boundaryGap:_,splitNumber:g,scale:u,axisLine:c,axisTick:l,axisType:e,axisLabel:t,name:h.text,nameLocation:"end",nameGap:o,nameTextStyle:p,triggerEvent:r},!1),s||(h.name=""),typeof a=="string"){var d=h.name;h.name=a.replace("{value}",d!=null?d:"")}else typeof a=="function"&&(h.name=a(h.name,h));var f=R.extend(new O(h,null,this.ecModel),D);return f.mainType="radar",f.componentIndex=this.componentIndex,f},this);this.getIndicatorModels=function(){return n}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:R.merge({lineStyle:{color:"#bbb"}},E.axisLine),axisLabel:I(E.axisLabel,!1),axisTick:I(E.axisTick,!1),axisType:"interval",splitLine:I(E.splitLine,!0),splitArea:I(E.splitArea,!0),indicator:[]}});W.exports=S},35203:(W,G,T)=>{var L=T(33051),R=T(98071),k=T(21293),O=T(16650),D=R.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});L.merge(D.prototype,O),k("single",D,function(I,S){return S.type||(S.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var E=D;W.exports=E},62933:(W,G,T)=>{var L=T(50465),R=T(97980),k=T(76172).getLayoutRect,O=T(33051).each;function D(I,S,_){this.dimension="single",this.dimensions=["single"],this._axis=null,this._rect,this._init(I,S,_),this.model=I}D.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:D,_init:function(I,S,_){var g=this.dimension,u=new L(g,R.createScaleByModel(I),[0,0],I.get("type"),I.get("position")),c=u.type==="category";u.onBand=c&&I.get("boundaryGap"),u.inverse=I.get("inverse"),u.orient=I.get("orient"),I.axis=u,u.model=I,u.coordinateSystem=this,this._axis=u},update:function(I,S){I.eachSeries(function(_){if(_.coordinateSystem===this){var g=_.getData();O(g.mapDimension(this.dimension,!0),function(u){this._axis.scale.unionExtentFromData(g,u)},this),R.niceScaleExtent(this._axis.scale,this._axis.model)}},this)},resize:function(I,S){this._rect=k({left:I.get("left"),top:I.get("top"),right:I.get("right"),bottom:I.get("bottom"),width:I.get("width"),height:I.get("height")},{width:S.getWidth(),height:S.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var I=this._rect,S=this._axis,_=S.isHorizontal(),g=_?[0,I.width]:[0,I.height],u=S.reverse?1:0;S.setExtent(g[u],g[1-u]),this._updateAxisTransform(S,_?I.x:I.y)},_updateAxisTransform:function(I,S){var _=I.getExtent(),g=_[0]+_[1],u=I.isHorizontal();I.toGlobalCoord=u?function(c){return c+S}:function(c){return g-c+S},I.toLocalCoord=u?function(c){return c-S}:function(c){return g-c+S}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(I){var S=this.getRect(),_=this.getAxis();return _.orient==="horizontal"?_.contain(_.toLocalCoord(I[0]))&&I[1]>=S.y&&I[1]<=S.y+S.height:_.contain(_.toLocalCoord(I[1]))&&I[0]>=S.y&&I[0]<=S.y+S.height},pointToData:function(I){var S=this.getAxis();return[S.coordToData(S.toLocalCoord(I[S.orient==="horizontal"?0:1]))]},dataToPoint:function(I){var S=this.getAxis(),_=this.getRect(),g=[],u=S.orient==="horizontal"?0:1;return I instanceof Array&&(I=I[0]),g[u]=S.toGlobalCoord(S.dataToCoord(+I)),g[1-u]=u===0?_.y+_.height/2:_.x+_.width/2,g}};var E=D;W.exports=E},50465:(W,G,T)=>{var L=T(33051),R=T(3245),k=function(D,E,I,S,_){R.call(this,D,E,I),this.type=S||"value",this.position=_||"bottom",this.orient=null};k.prototype={constructor:k,model:null,isHorizontal:function(){var D=this.position;return D==="top"||D==="bottom"},pointToData:function(D,E){return this.coordinateSystem.pointToData(D,E)[0]},toGlobalCoord:null,toLocalCoord:null},L.inherits(k,R);var O=k;W.exports=O},50878:(W,G,T)=>{var L=T(33051);function R(k,O){var D=this.getAxis(),E=O instanceof Array?O[0]:O,I=(k instanceof Array?k[0]:k)/2;return D.type==="category"?D.getBandWidth():Math.abs(D.dataToCoord(E-I)-D.dataToCoord(E+I))}W.exports=function(k){var O=k.getRect();return{coordSys:{type:"singleAxis",x:O.x,y:O.y,width:O.width,height:O.height},api:{coord:function(D){return k.dataToPoint(D)},size:L.bind(R,k)}}}},48337:(W,G,T)=>{var L=T(33051);G.layout=function(R,k){k=k||{};var O=R.coordinateSystem,D=R.axis,E={},I=D.position,S=D.orient,_=O.getRect(),g=[_.x,_.x+_.width,_.y,_.y+_.height],u={horizontal:{top:g[2],bottom:g[3]},vertical:{left:g[0],right:g[1]}};E.position=[S==="vertical"?u.vertical[I]:g[0],S==="horizontal"?u.horizontal[I]:g[3]],E.rotation=Math.PI/2*{horizontal:0,vertical:1}[S],E.labelDirection=E.tickDirection=E.nameDirection={top:-1,bottom:1,right:1,left:-1}[I],R.get("axisTick.inside")&&(E.tickDirection=-E.tickDirection),L.retrieve(k.labelInside,R.get("axisLabel.inside"))&&(E.labelDirection=-E.labelDirection);var c=k.rotate;return c==null&&(c=R.get("axisLabel.rotate")),E.labelRotation=I==="top"?-c:c,E.z2=1,E}},2798:(W,G,T)=>{var L=T(62933);T(95899).register("single",{create:function(R,k){var O=[];return R.eachComponent("singleAxis",function(D,E){var I=new L(D,R,k);I.name="single_"+E,I.resize(D,k),D.coordinateSystem=I,O.push(I)}),R.eachSeries(function(D){if(D.get("coordinateSystem")==="singleAxis"){var E=R.queryComponents({mainType:"singleAxis",index:D.get("singleAxisIndex"),id:D.get("singleAxisId")})[0];D.coordinateSystem=E&&E.coordinateSystem}}),O},dimensions:L.prototype.dimensions})},4130:W=>{function G(k){return k}function T(k,O,D,E,I){this._old=k,this._new=O,this._oldKeyGetter=D||G,this._newKeyGetter=E||G,this.context=I}function L(k,O,D,E,I){for(var S=0;S<k.length;S++){var _="_ec_"+I[E](k[S],S),g=O[_];g==null?(D.push(_),O[_]=S):(g.length||(O[_]=g=[g]),g.push(S))}}T.prototype={constructor:T,add:function(k){return this._add=k,this},update:function(k){return this._update=k,this},remove:function(k){return this._remove=k,this},execute:function(){var k=this._old,O=this._new,D={},E=[],I=[];for(L(k,{},E,"_oldKeyGetter",this),L(O,D,I,"_newKeyGetter",this),S=0;S<k.length;S++)(g=D[_=E[S]])!=null?((c=g.length)?(c===1&&(D[_]=null),g=g.shift()):D[_]=null,this._update&&this._update(g,S)):this._remove&&this._remove(S);for(var S=0;S<I.length;S++){var _=I[S];if(D.hasOwnProperty(_)){var g;if((g=D[_])==null)continue;if(g.length)for(var u=0,c=g.length;u<c;u++)this._add&&this._add(g[u]);else this._add&&this._add(g)}}}};var R=T;W.exports=R},80690:(W,G,T)=>{var L=T(33051);W.exports=function(R){R!=null&&L.extend(this,R),this.otherDims={}}},85446:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=T(34251).enableClassCheck;function k(g){return"_EC_"+g}var O=function(g){this._directed=g||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},D=O.prototype;function E(g,u){this.id=g==null?"":g,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=u==null?-1:u}function I(g,u,c){this.node1=g,this.node2=u,this.dataIndex=c==null?-1:c}D.type="graph",D.isDirected=function(){return this._directed},D.addNode=function(g,u){g=g==null?""+u:""+g;var c=this._nodesMap;if(!c[k(g)]){var l=new E(g,u);return l.hostGraph=this,this.nodes.push(l),c[k(g)]=l,l}},D.getNodeByIndex=function(g){var u=this.data.getRawIndex(g);return this.nodes[u]},D.getNodeById=function(g){return this._nodesMap[k(g)]},D.addEdge=function(g,u,c){var l=this._nodesMap,e=this._edgesMap;if(typeof g=="number"&&(g=this.nodes[g]),typeof u=="number"&&(u=this.nodes[u]),E.isInstance(g)||(g=l[k(g)]),E.isInstance(u)||(u=l[k(u)]),g&&u){var t=g.id+"-"+u.id,i=new I(g,u,c);return i.hostGraph=this,this._directed&&(g.outEdges.push(i),u.inEdges.push(i)),g.edges.push(i),g!==u&&u.edges.push(i),this.edges.push(i),e[t]=i,i}},D.getEdgeByIndex=function(g){var u=this.edgeData.getRawIndex(g);return this.edges[u]},D.getEdge=function(g,u){E.isInstance(g)&&(g=g.id),E.isInstance(u)&&(u=u.id);var c=this._edgesMap;return this._directed?c[g+"-"+u]:c[g+"-"+u]||c[u+"-"+g]},D.eachNode=function(g,u){for(var c=this.nodes,l=c.length,e=0;e<l;e++)c[e].dataIndex>=0&&g.call(u,c[e],e)},D.eachEdge=function(g,u){for(var c=this.edges,l=c.length,e=0;e<l;e++)c[e].dataIndex>=0&&c[e].node1.dataIndex>=0&&c[e].node2.dataIndex>=0&&g.call(u,c[e],e)},D.breadthFirstTraverse=function(g,u,c,l){if(E.isInstance(u)||(u=this._nodesMap[k(u)]),u){for(var e=c==="out"?"outEdges":c==="in"?"inEdges":"edges",t=0;t<this.nodes.length;t++)this.nodes[t].__visited=!1;if(!g.call(l,u,null))for(var i=[u];i.length;){var s=i.shift(),a=s[e];for(t=0;t<a.length;t++){var o=a[t],r=o.node1===s?o.node2:o.node1;if(!r.__visited){if(g.call(l,r,s))return;i.push(r),r.__visited=!0}}}}},D.update=function(){for(var g=this.data,u=this.edgeData,c=this.nodes,l=this.edges,e=0,t=c.length;e<t;e++)c[e].dataIndex=-1;for(e=0,t=g.count();e<t;e++)c[g.getRawIndex(e)].dataIndex=e;for(u.filterSelf(function(i){var s=l[u.getRawIndex(i)];return s.node1.dataIndex>=0&&s.node2.dataIndex>=0}),e=0,t=l.length;e<t;e++)l[e].dataIndex=-1;for(e=0,t=u.count();e<t;e++)l[u.getRawIndex(e)].dataIndex=e},D.clone=function(){for(var g=new O(this._directed),u=this.nodes,c=this.edges,l=0;l<u.length;l++)g.addNode(u[l].id,u[l].dataIndex);for(l=0;l<c.length;l++){var e=c[l];g.addEdge(e.node1.id,e.node2.id,e.dataIndex)}return g},E.prototype={constructor:E,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(g){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(g)}},I.prototype.getModel=function(g){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(g)};var S=function(g,u){return{getValue:function(c){var l=this[g][u];return l.get(l.getDimension(c||"value"),this.dataIndex)},setVisual:function(c,l){this.dataIndex>=0&&this[g][u].setItemVisual(this.dataIndex,c,l)},getVisual:function(c,l){return this[g][u].getItemVisual(this.dataIndex,c,l)},setLayout:function(c,l){this.dataIndex>=0&&this[g][u].setItemLayout(this.dataIndex,c,l)},getLayout:function(){return this[g][u].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[g][u].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[g][u].getRawIndex(this.dataIndex)}}};L.mixin(E,S("hostGraph","data")),L.mixin(I,S("hostGraph","edgeData")),O.Node=E,O.Edge=I,R(E),R(I);var _=O;W.exports=_},87587:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=T(4272),k=T(4130),O=T(99574),D=T(68540),E=D.defaultDimValueGetters,I=D.DefaultDataProvider,S=T(10381).summarizeDimensions,_=T(80690),g=L.isObject,u="undefined",c={float:typeof Float64Array===u?Array:Float64Array,int:typeof Int32Array===u?Array:Int32Array,ordinal:Array,number:Array,time:Array},l=typeof Uint32Array===u?Array:Uint32Array,e=typeof Int32Array===u?Array:Int32Array,t=typeof Uint16Array===u?Array:Uint16Array;function i(A){return A._rawCount>65535?l:t}var s=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],a=["_extent","_approximateExtent","_rawExtent"];function o(A,P){L.each(s.concat(P.__wrappedMethods||[]),function(b){P.hasOwnProperty(b)&&(A[b]=P[b])}),A.__wrappedMethods=P.__wrappedMethods,L.each(a,function(b){A[b]=L.clone(P[b])}),A._calculationInfo=L.extend(P._calculationInfo)}var r=function(A,P){A=A||["x","y"];for(var b={},N=[],B={},z=0;z<A.length;z++){var F=A[z];L.isString(F)?F=new _({name:F}):F instanceof _||(F=new _(F));var V=F.name;F.type=F.type||"float",F.coordDim||(F.coordDim=V,F.coordDimIndex=0),F.otherDims=F.otherDims||{},N.push(V),b[V]=F,F.index=z,F.createInvertedIndices&&(B[V]=[])}this.dimensions=N,this._dimensionInfos=b,this.hostModel=P,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=S(this),this._invertedIndicesMap=B,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},n=r.prototype;function h(A,P,b,N,B){var z=c[P.type],F=N-1,V=P.name,H=A[V][F];if(H&&H.length<b){for(var U=new z(Math.min(B-F*b,b)),j=0;j<H.length;j++)U[j]=H[j];A[V][F]=U}for(var X=N*b;X<B;X+=b)A[V].push(new z(Math.min(B-X,b)))}function p(A){var P=A._invertedIndicesMap;L.each(P,function(b,N){var B=A._dimensionInfos[N].ordinalMeta;if(B){b=P[N]=new e(B.categories.length);for(var z=0;z<b.length;z++)b[z]=-1;for(z=0;z<A._count;z++)b[A.get(N,z)]=z}})}function d(A,P,b){var N;if(P!=null){var B=A._chunkSize,z=Math.floor(b/B),F=b%B,V=A.dimensions[P],H=A._storage[V][z];if(H){N=H[F];var U=A._dimensionInfos[V].ordinalMeta;U&&U.categories.length&&(N=U.categories[N])}}return N}function f(A){return A}function v(A){return A<this._count&&A>=0?this._indices[A]:-1}function m(A,P){var b=A._idList[P];return b==null&&(b=d(A,A._idDimIdx,P)),b==null&&(b="e\0\0"+P),b}function y(A){return L.isArray(A)||(A=[A]),A}function x(A,P){var b=A.dimensions,N=new r(L.map(b,A.getDimensionInfo,A),A.hostModel);o(N,A);for(var B=N._storage={},z=A._storage,F=0;F<b.length;F++){var V=b[F];z[V]&&(L.indexOf(P,V)>=0?(B[V]=w(z[V]),N._rawExtent[V]=[1/0,-1/0],N._extent[V]=null):B[V]=z[V])}return N}function w(A){for(var P,b,N=new Array(A.length),B=0;B<A.length;B++)N[B]=(b=void 0,(b=(P=A[B]).constructor)===Array?P.slice():new b(P));return N}n.type="list",n.hasItemOption=!0,n.getDimension=function(A){return typeof A!="number"&&(isNaN(A)||this._dimensionInfos.hasOwnProperty(A))||(A=this.dimensions[A]),A},n.getDimensionInfo=function(A){return this._dimensionInfos[this.getDimension(A)]},n.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},n.mapDimension=function(A,P){var b=this._dimensionsSummary;if(P==null)return b.encodeFirstDimNotExtra[A];var N=b.encode[A];return P===!0?(N||[]).slice():N&&N[P]},n.initData=function(A,P,b){(O.isInstance(A)||L.isArrayLike(A))&&(A=new I(A,this.dimensions.length)),this._rawData=A,this._storage={},this._indices=null,this._nameList=P||[],this._idList=[],this._nameRepeatCount={},b||(this.hasItemOption=!1),this.defaultDimValueGetter=E[this._rawData.getSource().sourceFormat],this._dimValueGetter=b=b||this.defaultDimValueGetter,this._dimValueGetterArrayRows=E.arrayRows,this._rawExtent={},this._initDataFromProvider(0,A.count()),A.pure&&(this.hasItemOption=!1)},n.getProvider=function(){return this._rawData},n.appendData=function(A){var P=this._rawData,b=this.count();P.appendData(A);var N=P.count();P.persistent||(N+=b),this._initDataFromProvider(b,N)},n.appendValues=function(A,P){for(var b=this._chunkSize,N=this._storage,B=this.dimensions,z=B.length,F=this._rawExtent,V=this.count(),H=V+Math.max(A.length,P?P.length:0),U=this._chunkCount,j=0;j<z;j++)F[q=B[j]]||(F[q]=[1/0,-1/0]),N[q]||(N[q]=[]),h(N,this._dimensionInfos[q],b,U,H),this._chunkCount=N[q].length;for(var X=new Array(z),Y=V;Y<H;Y++){for(var J=Y-V,K=Math.floor(Y/b),Q=Y%b,Z=0;Z<z;Z++){var q=B[Z],tt=this._dimValueGetterArrayRows(A[J]||X,q,J,Z);N[q][K][Q]=tt;var $=F[q];tt<$[0]&&($[0]=tt),tt>$[1]&&($[1]=tt)}P&&(this._nameList[Y]=P[J])}this._rawCount=this._count=H,this._extent={},p(this)},n._initDataFromProvider=function(A,P){if(!(A>=P)){for(var b,N=this._chunkSize,B=this._rawData,z=this._storage,F=this.dimensions,V=F.length,H=this._dimensionInfos,U=this._nameList,j=this._idList,X=this._rawExtent,Y=this._nameRepeatCount={},J=this._chunkCount,K=0;K<V;K++){X[et=F[K]]||(X[et]=[1/0,-1/0]);var Q=H[et];Q.otherDims.itemName===0&&(b=this._nameDimIdx=K),Q.otherDims.itemId===0&&(this._idDimIdx=K),z[et]||(z[et]=[]),h(z,Q,N,J,P),this._chunkCount=z[et].length}for(var Z=new Array(V),q=A;q<P;q++){Z=B.getItem(q,Z);for(var tt=Math.floor(q/N),$=q%N,rt=0;rt<V;rt++){var et,it=z[et=F[rt]][tt],ot=this._dimValueGetter(Z,et,q,rt);it[$]=ot;var st=X[et];ot<st[0]&&(st[0]=ot),ot>st[1]&&(st[1]=ot)}if(!B.pure){var at=U[q];if(Z&&at==null){if(Z.name!=null)U[q]=at=Z.name;else if(b!=null){var vt=F[b],yt=z[vt][tt];if(yt){at=yt[$];var gt=H[vt].ordinalMeta;gt&&gt.categories.length&&(at=gt.categories[at])}}}var pt=Z==null?null:Z.id;pt==null&&at!=null&&(Y[at]=Y[at]||0,pt=at,Y[at]>0&&(pt+="__ec__"+Y[at]),Y[at]++),pt!=null&&(j[q]=pt)}}!B.persistent&&B.clean&&B.clean(),this._rawCount=this._count=P,this._extent={},p(this)}},n.count=function(){return this._count},n.getIndices=function(){var A=this._indices;if(A){var P=A.constructor,b=this._count;if(P===Array){B=new P(b);for(var N=0;N<b;N++)B[N]=A[N]}else B=new P(A.buffer,0,b)}else{var B=new(P=i(this))(this.count());for(N=0;N<B.length;N++)B[N]=N}return B},n.get=function(A,P){if(!(P>=0&&P<this._count))return NaN;var b=this._storage;if(!b[A])return NaN;P=this.getRawIndex(P);var N=Math.floor(P/this._chunkSize),B=P%this._chunkSize;return b[A][N][B]},n.getByRawIndex=function(A,P){if(!(P>=0&&P<this._rawCount))return NaN;var b=this._storage[A];if(!b)return NaN;var N=Math.floor(P/this._chunkSize),B=P%this._chunkSize;return b[N][B]},n._getFast=function(A,P){var b=Math.floor(P/this._chunkSize),N=P%this._chunkSize;return this._storage[A][b][N]},n.getValues=function(A,P){var b=[];L.isArray(A)||(P=A,A=this.dimensions);for(var N=0,B=A.length;N<B;N++)b.push(this.get(A[N],P));return b},n.hasValue=function(A){for(var P=this._dimensionsSummary.dataDimsOnCoord,b=0,N=P.length;b<N;b++)if(isNaN(this.get(P[b],A)))return!1;return!0},n.getDataExtent=function(A){A=this.getDimension(A);var P=[1/0,-1/0];if(!this._storage[A])return P;var b,N=this.count();if(!this._indices)return this._rawExtent[A].slice();if(b=this._extent[A])return b.slice();for(var B=(b=P)[0],z=b[1],F=0;F<N;F++){var V=this._getFast(A,this.getRawIndex(F));V<B&&(B=V),V>z&&(z=V)}return b=[B,z],this._extent[A]=b,b},n.getApproximateExtent=function(A){return A=this.getDimension(A),this._approximateExtent[A]||this.getDataExtent(A)},n.setApproximateExtent=function(A,P){P=this.getDimension(P),this._approximateExtent[P]=A.slice()},n.getCalculationInfo=function(A){return this._calculationInfo[A]},n.setCalculationInfo=function(A,P){g(A)?L.extend(this._calculationInfo,A):this._calculationInfo[A]=P},n.getSum=function(A){var P=0;if(this._storage[A])for(var b=0,N=this.count();b<N;b++){var B=this.get(A,b);isNaN(B)||(P+=B)}return P},n.getMedian=function(A){var P=[];this.each(A,function(B,z){isNaN(B)||P.push(B)});var b=[].concat(P).sort(function(B,z){return B-z}),N=this.count();return N===0?0:N%2==1?b[(N-1)/2]:(b[N/2]+b[N/2-1])/2},n.rawIndexOf=function(A,P){var b=(A&&this._invertedIndicesMap[A])[P];return b==null||isNaN(b)?-1:b},n.indexOfName=function(A){for(var P=0,b=this.count();P<b;P++)if(this.getName(P)===A)return P;return-1},n.indexOfRawIndex=function(A){if(A>=this._rawCount||A<0)return-1;if(!this._indices)return A;var P=this._indices,b=P[A];if(b!=null&&b<this._count&&b===A)return A;for(var N=0,B=this._count-1;N<=B;){var z=(N+B)/2|0;if(P[z]<A)N=z+1;else{if(!(P[z]>A))return z;B=z-1}}return-1},n.indicesOfNearest=function(A,P,b){var N=[];if(!this._storage[A])return N;b==null&&(b=1/0);for(var B=1/0,z=-1,F=0,V=0,H=this.count();V<H;V++){var U=P-this.get(A,V),j=Math.abs(U);j<=b&&((j<B||j===B&&U>=0&&z<0)&&(B=j,z=U,F=0),U===z&&(N[F++]=V))}return N.length=F,N},n.getRawIndex=f,n.getRawDataItem=function(A){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(A));for(var P=[],b=0;b<this.dimensions.length;b++){var N=this.dimensions[b];P.push(this.get(N,A))}return P},n.getName=function(A){var P=this.getRawIndex(A);return this._nameList[P]||d(this,this._nameDimIdx,P)||""},n.getId=function(A){return m(this,this.getRawIndex(A))},n.each=function(A,P,b,N){if(this._count){typeof A=="function"&&(N=b,b=P,P=A,A=[]),b=b||N||this;for(var B=(A=L.map(y(A),this.getDimension,this)).length,z=0;z<this.count();z++)switch(B){case 0:P.call(b,z);break;case 1:P.call(b,this.get(A[0],z),z);break;case 2:P.call(b,this.get(A[0],z),this.get(A[1],z),z);break;default:for(var F=0,V=[];F<B;F++)V[F]=this.get(A[F],z);V[F]=z,P.apply(b,V)}}},n.filterSelf=function(A,P,b,N){if(this._count){typeof A=="function"&&(N=b,b=P,P=A,A=[]),b=b||N||this,A=L.map(y(A),this.getDimension,this);for(var B=this.count(),z=new(i(this))(B),F=[],V=A.length,H=0,U=A[0],j=0;j<B;j++){var X,Y=this.getRawIndex(j);if(V===0)X=P.call(b,j);else if(V===1){var J=this._getFast(U,Y);X=P.call(b,J,j)}else{for(var K=0;K<V;K++)F[K]=this._getFast(U,Y);F[K]=j,X=P.apply(b,F)}X&&(z[H++]=Y)}return H<B&&(this._indices=z),this._count=H,this._extent={},this.getRawIndex=this._indices?v:f,this}},n.selectRange=function(A){if(this._count){var P=[];for(var b in A)A.hasOwnProperty(b)&&P.push(b);var N=P.length;if(N){var B=this.count(),z=new(i(this))(B),F=0,V=P[0],H=A[V][0],U=A[V][1],j=!1;if(!this._indices){var X=0;if(N===1){for(var Y=this._storage[P[0]],J=0;J<this._chunkCount;J++)for(var K=Y[J],Q=Math.min(this._count-J*this._chunkSize,this._chunkSize),Z=0;Z<Q;Z++)((et=K[Z])>=H&&et<=U||isNaN(et))&&(z[F++]=X),X++;j=!0}else if(N===2){Y=this._storage[V];var q=this._storage[P[1]],tt=A[P[1]][0],$=A[P[1]][1];for(J=0;J<this._chunkCount;J++){K=Y[J];var rt=q[J];for(Q=Math.min(this._count-J*this._chunkSize,this._chunkSize),Z=0;Z<Q;Z++){var et=K[Z],it=rt[Z];(et>=H&&et<=U||isNaN(et))&&(it>=tt&&it<=$||isNaN(it))&&(z[F++]=X),X++}}j=!0}}if(!j)if(N===1)for(Z=0;Z<B;Z++){var ot=this.getRawIndex(Z);((et=this._getFast(V,ot))>=H&&et<=U||isNaN(et))&&(z[F++]=ot)}else for(Z=0;Z<B;Z++){var st=!0;for(ot=this.getRawIndex(Z),J=0;J<N;J++){var at=P[J];((et=this._getFast(b,ot))<A[at][0]||et>A[at][1])&&(st=!1)}st&&(z[F++]=this.getRawIndex(Z))}return F<B&&(this._indices=z),this._count=F,this._extent={},this.getRawIndex=this._indices?v:f,this}}},n.mapArray=function(A,P,b,N){typeof A=="function"&&(N=b,b=P,P=A,A=[]),b=b||N||this;var B=[];return this.each(A,function(){B.push(P&&P.apply(this,arguments))},b),B},n.map=function(A,P,b,N){b=b||N||this;var B=x(this,A=L.map(y(A),this.getDimension,this));B._indices=this._indices,B.getRawIndex=B._indices?v:f;for(var z=B._storage,F=[],V=this._chunkSize,H=A.length,U=this.count(),j=[],X=B._rawExtent,Y=0;Y<U;Y++){for(var J=0;J<H;J++)j[J]=this.get(A[J],Y);j[H]=Y;var K=P&&P.apply(b,j);if(K!=null){typeof K!="object"&&(F[0]=K,K=F);for(var Q=this.getRawIndex(Y),Z=Math.floor(Q/V),q=Q%V,tt=0;tt<K.length;tt++){var $=A[tt],rt=K[tt],et=X[$],it=z[$];it&&(it[Z][q]=rt),rt<et[0]&&(et[0]=rt),rt>et[1]&&(et[1]=rt)}}}return B},n.downSample=function(A,P,b,N){for(var B=x(this,[A]),z=B._storage,F=[],V=Math.floor(1/P),H=z[A],U=this.count(),j=this._chunkSize,X=B._rawExtent[A],Y=new(i(this))(U),J=0,K=0;K<U;K+=V){V>U-K&&(V=U-K,F.length=V);for(var Q=0;Q<V;Q++){var Z=this.getRawIndex(K+Q),q=Math.floor(Z/j),tt=Z%j;F[Q]=H[q][tt]}var $=b(F),rt=this.getRawIndex(Math.min(K+N(F,$)||0,U-1)),et=rt%j;H[Math.floor(rt/j)][et]=$,$<X[0]&&(X[0]=$),$>X[1]&&(X[1]=$),Y[J++]=rt}return B._count=J,B._indices=Y,B.getRawIndex=v,B},n.getItemModel=function(A){var P=this.hostModel;return new R(this.getRawDataItem(A),P,P&&P.ecModel)},n.diff=function(A){var P=this;return new k(A?A.getIndices():[],this.getIndices(),function(b){return m(A,b)},function(b){return m(P,b)})},n.getVisual=function(A){var P=this._visual;return P&&P[A]},n.setVisual=function(A,P){if(g(A))for(var b in A)A.hasOwnProperty(b)&&this.setVisual(b,A[b]);else this._visual=this._visual||{},this._visual[A]=P},n.setLayout=function(A,P){if(g(A))for(var b in A)A.hasOwnProperty(b)&&this.setLayout(b,A[b]);else this._layout[A]=P},n.getLayout=function(A){return this._layout[A]},n.getItemLayout=function(A){return this._itemLayouts[A]},n.setItemLayout=function(A,P,b){this._itemLayouts[A]=b?L.extend(this._itemLayouts[A]||{},P):P},n.clearItemLayouts=function(){this._itemLayouts.length=0},n.getItemVisual=function(A,P,b){var N=this._itemVisuals[A],B=N&&N[P];return B!=null||b?B:this.getVisual(P)},n.setItemVisual=function(A,P,b){var N=this._itemVisuals[A]||{},B=this.hasItemVisual;if(this._itemVisuals[A]=N,g(P))for(var z in P)P.hasOwnProperty(z)&&(N[z]=P[z],B[z]=!0);else N[P]=b,B[P]=!0},n.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var M=function(A){A.seriesIndex=this.seriesIndex,A.dataIndex=this.dataIndex,A.dataType=this.dataType};n.setItemGraphicEl=function(A,P){var b=this.hostModel;P&&(P.dataIndex=A,P.dataType=this.dataType,P.seriesIndex=b&&b.seriesIndex,P.type==="group"&&P.traverse(M,P)),this._graphicEls[A]=P},n.getItemGraphicEl=function(A){return this._graphicEls[A]},n.eachItemGraphicEl=function(A,P){L.each(this._graphicEls,function(b,N){b&&A&&A.call(P,b,N)})},n.cloneShallow=function(A){if(!A){var P=L.map(this.dimensions,this.getDimensionInfo,this);A=new r(P,this.hostModel)}if(A._storage=this._storage,o(A,this),this._indices){var b=this._indices.constructor;A._indices=new b(this._indices)}else A._indices=null;return A.getRawIndex=A._indices?v:f,A},n.wrapMethod=function(A,P){var b=this[A];typeof b=="function"&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(A),this[A]=function(){var N=b.apply(this,arguments);return P.apply(this,[N].concat(L.slice(arguments)))})},n.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],n.CHANGABLE_METHODS=["filterSelf","selectRange"];var C=r;W.exports=C},51401:(W,G,T)=>{var L=T(33051),R=L.createHashMap,k=L.isObject,O=L.map;function D(g){this.categories=g.categories||[],this._needCollect=g.needCollect,this._deduplication=g.deduplication,this._map}D.createByAxisModel=function(g){var u=g.option,c=u.data,l=c&&O(c,S);return new D({categories:l,needCollect:!l,deduplication:u.dedplication!==!1})};var E=D.prototype;function I(g){return g._map||(g._map=R(g.categories))}function S(g){return k(g)&&g.value!=null?g.value:g+""}E.getOrdinal=function(g){return I(this).get(g)},E.parseAndCollect=function(g){var u,c=this._needCollect;if(typeof g!="string"&&!c)return g;if(c&&!this._deduplication)return u=this.categories.length,this.categories[u]=g,u;var l=I(this);return(u=l.get(g))==null&&(c?(u=this.categories.length,this.categories[u]=g,l.set(g,u)):u=NaN),u};var _=D;W.exports=_},99574:(W,G,T)=>{var L=T(33051),R=L.createHashMap,k=L.isTypedArray,O=T(34251).enableClassCheck,D=T(93819),E=D.SOURCE_FORMAT_ORIGINAL,I=D.SERIES_LAYOUT_BY_COLUMN,S=D.SOURCE_FORMAT_UNKNOWN,_=D.SOURCE_FORMAT_TYPED_ARRAY,g=D.SOURCE_FORMAT_KEYED_COLUMNS;function u(l){this.fromDataset=l.fromDataset,this.data=l.data||(l.sourceFormat===g?{}:[]),this.sourceFormat=l.sourceFormat||S,this.seriesLayoutBy=l.seriesLayoutBy||I,this.dimensionsDefine=l.dimensionsDefine,this.encodeDefine=l.encodeDefine&&R(l.encodeDefine),this.startIndex=l.startIndex||0,this.dimensionsDetectCount=l.dimensionsDetectCount}u.seriesDataToSource=function(l){return new u({data:l,sourceFormat:k(l)?_:E,fromDataset:!1})},O(u);var c=u;W.exports=c},9327:(W,G,T)=>{var L=T(33051),R=T(63978),k=T(87587),O=T(55623),D=function(S,_){this.name=S||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=_};function E(S){this.root,this.data,this._nodes=[],this.hostModel=S}D.prototype={constructor:D,isRemoved:function(){return this.dataIndex<0},eachNode:function(S,_,g){typeof S=="function"&&(g=_,_=S,S=null),S=S||{},L.isString(S)&&(S={order:S});var u,c=S.order||"preorder",l=this[S.attr||"children"];c==="preorder"&&(u=_.call(g,this));for(var e=0;!u&&e<l.length;e++)l[e].eachNode(S,_,g);c==="postorder"&&_.call(g,this)},updateDepthAndHeight:function(S){var _=0;this.depth=S;for(var g=0;g<this.children.length;g++){var u=this.children[g];u.updateDepthAndHeight(S+1),u.height>_&&(_=u.height)}this.height=_+1},getNodeById:function(S){if(this.getId()===S)return this;for(var _=0,g=this.children,u=g.length;_<u;_++){var c=g[_].getNodeById(S);if(c)return c}},contains:function(S){if(S===this)return!0;for(var _=0,g=this.children,u=g.length;_<u;_++){var c=g[_].contains(S);if(c)return c}},getAncestors:function(S){for(var _=[],g=S?this:this.parentNode;g;)_.push(g),g=g.parentNode;return _.reverse(),_},getValue:function(S){var _=this.hostTree.data;return _.get(_.getDimension(S||"value"),this.dataIndex)},setLayout:function(S,_){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,S,_)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(S){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(S)},setVisual:function(S,_){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,S,_)},getVisual:function(S,_){return this.hostTree.data.getItemVisual(this.dataIndex,S,_)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(S){for(var _=S.parentNode;_;){if(_===this)return!0;_=_.parentNode}return!1},isDescendantOf:function(S){return S!==this&&S.isAncestorOf(this)}},E.prototype={constructor:E,type:"tree",eachNode:function(S,_,g){this.root.eachNode(S,_,g)},getNodeByDataIndex:function(S){var _=this.data.getRawIndex(S);return this._nodes[_]},getNodeByName:function(S){return this.root.getNodeByName(S)},update:function(){for(var S=this.data,_=this._nodes,g=0,u=_.length;g<u;g++)_[g].dataIndex=-1;for(g=0,u=S.count();g<u;g++)_[S.getRawIndex(g)].dataIndex=g},clearLayouts:function(){this.data.clearItemLayouts()}},E.createTree=function(S,_,g){var u=new E(_),c=[],l=1;(function i(s,a){var o=s.value;l=Math.max(l,L.isArray(o)?o.length:1),c.push(s);var r=new D(s.name,u);a?function(p,d){var f=d.children;p.parentNode!==d&&(f.push(p),p.parentNode=d)}(r,a):u.root=r,u._nodes.push(r);var n=s.children;if(n)for(var h=0;h<n.length;h++)i(n[h],r)})(S),u.root.updateDepthAndHeight(0);var e=O(c,{coordDimensions:["value"],dimensionsCount:l}),t=new k(e,_);return t.initData(c),g&&g(t),R({mainData:t,struct:u,structAttr:"tree"}),u.update(),u};var I=E;W.exports=I},34380:(W,G,T)=>{var L=T(33051),R=L.createHashMap,k=L.each,O=L.isString,D=L.defaults,E=L.extend,I=L.isObject,S=L.clone,_=T(32234).normalizeToArray,g=T(61772),u=g.guessOrdinal,c=g.BE_ORDINAL,l=T(99574),e=T(10381).OTHER_DIMENSIONS,t=T(80690);function i(s,a,o){if(o||a.get(s)!=null){for(var r=0;a.get(s+r)!=null;)r++;s+=r}return a.set(s,!0),s}W.exports=function(s,a,o){l.isInstance(a)||(a=l.seriesDataToSource(a)),o=o||{},s=(s||[]).slice();for(var r=(o.dimsDef||[]).slice(),n=R(),h=R(),p=[],d=function(B,z,F,V){var H=Math.max(B.dimensionsDetectCount||1,z.length,F.length,V||0);return k(z,function(U){var j=U.dimsDef;j&&(H=Math.max(H,j.length))}),H}(a,s,r,o.dimCount),f=0;f<d;f++){var v=r[f]=E({},I(r[f])?r[f]:{name:r[f]}),m=v.name,y=p[f]=new t;m!=null&&n.get(m)==null&&(y.name=y.displayName=m,n.set(m,f)),v.type!=null&&(y.type=v.type),v.displayName!=null&&(y.displayName=v.displayName)}var x=o.encodeDef;!x&&o.encodeDefaulter&&(x=o.encodeDefaulter(a,d)),(x=R(x)).each(function(B,z){if((B=_(B).slice()).length===1&&!O(B[0])&&B[0]<0)x.set(z,!1);else{var F=x.set(z,[]);k(B,function(V,H){O(V)&&(V=n.get(V)),V!=null&&V<d&&(F[H]=V,M(p[V],z,H))})}});var w=0;function M(B,z,F){e.get(z)!=null?B.otherDims[z]=F:(B.coordDim=z,B.coordDimIndex=F,h.set(z,!0))}k(s,function(B,z){var F,V,H;if(O(B))F=B,B={};else{F=B.name;var U=B.ordinalMeta;B.ordinalMeta=null,(B=S(B)).ordinalMeta=U,V=B.dimsDef,H=B.otherDims,B.name=B.coordDim=B.coordDimIndex=B.dimsDef=B.otherDims=null}if((j=x.get(F))!==!1){var j;if(!(j=_(j)).length)for(var X=0;X<(V&&V.length||1);X++){for(;w<p.length&&p[w].coordDim!=null;)w++;w<p.length&&j.push(w++)}k(j,function(Y,J){var K=p[Y];if(M(D(K,B),F,J),K.name==null&&V){var Q=V[J];!I(Q)&&(Q={name:Q}),K.name=K.displayName=Q.name,K.defaultTooltip=Q.defaultTooltip}H&&D(K.otherDims,H)})}});var C=o.generateCoord,A=o.generateCoordCount,P=A!=null;A=C?A||1:0;for(var b=C||"value",N=0;N<d;N++)(y=p[N]=p[N]||new t).coordDim==null&&(y.coordDim=i(b,h,P),y.coordDimIndex=0,(!C||A<=0)&&(y.isExtraCoord=!0),A--),y.name==null&&(y.name=i(y.coordDim,n)),y.type!=null||u(a,N,y.name)!==c.Must&&(!y.isExtraCoord||y.otherDims.itemName==null&&y.otherDims.seriesName==null)||(y.type="ordinal");return p}},55623:(W,G,T)=>{var L=T(34380);W.exports=function(R,k){return L((k=k||{}).coordDimensions||[],R,{dimsDef:k.dimensionsDefine||R.dimensionsDefine,encodeDef:k.encodeDefine||R.encodeDefine,dimCount:k.dimensionsCount,encodeDefaulter:k.encodeDefaulter,generateCoord:k.generateCoord,generateCoordCount:k.generateCoordCount})}},68540:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=(L.isTypedArray,L.extend),k=(L.assert,L.each),O=L.isObject,D=T(32234),E=D.getDataItemValue,I=D.isDataItemOption,S=T(85669).parseDate,_=T(99574),g=T(93819),u=g.SOURCE_FORMAT_TYPED_ARRAY,c=g.SOURCE_FORMAT_ARRAY_ROWS,l=g.SOURCE_FORMAT_ORIGINAL,e=g.SOURCE_FORMAT_OBJECT_ROWS;function t(v,m){_.isInstance(v)||(v=_.seriesDataToSource(v)),this._source=v;var y=this._data=v.data,x=v.sourceFormat;x===u&&(this._offset=0,this._dimSize=m,this._data=y);var w=s[x===c?x+"_"+v.seriesLayoutBy:x];R(this,w)}var i=t.prototype;i.pure=!1,i.persistent=!0,i.getSource=function(){return this._source};var s={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(v){return this._data[v+this._source.startIndex]},appendData:r},arrayRows_row:{pure:!0,count:function(){var v=this._data[0];return v?Math.max(0,v.length-this._source.startIndex):0},getItem:function(v){v+=this._source.startIndex;for(var m=[],y=this._data,x=0;x<y.length;x++){var w=y[x];m.push(w?w[v]:null)}return m},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:a,getItem:o,appendData:r},keyedColumns:{pure:!0,count:function(){var v=this._source.dimensionsDefine[0].name,m=this._data[v];return m?m.length:0},getItem:function(v){for(var m=[],y=this._source.dimensionsDefine,x=0;x<y.length;x++){var w=this._data[y[x].name];m.push(w?w[v]:null)}return m},appendData:function(v){var m=this._data;k(v,function(y,x){for(var w=m[x]||(m[x]=[]),M=0;M<(y||[]).length;M++)w.push(y[M])})}},original:{count:a,getItem:o,appendData:r},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(v,m){v-=this._offset,m=m||[];for(var y=this._dimSize*v,x=0;x<this._dimSize;x++)m[x]=this._data[y+x];return m},appendData:function(v){this._data=v},clean:function(){this._offset+=this.count(),this._data=null}}};function a(){return this._data.length}function o(v){return this._data[v]}function r(v){for(var m=0;m<v.length;m++)this._data.push(v[m])}var n={arrayRows:h,objectRows:function(v,m,y,x){return y!=null?v[x]:v},keyedColumns:h,original:function(v,m,y,x){var w=E(v);return y!=null&&w instanceof Array?w[y]:w},typedArray:h};function h(v,m,y,x){return y!=null?v[y]:v}var p={arrayRows:d,objectRows:function(v,m,y,x){return f(v[m],this._dimensionInfos[m])},keyedColumns:d,original:function(v,m,y,x){var w=v&&(v.value==null?v:v.value);return!this._rawData.pure&&I(v)&&(this.hasItemOption=!0),f(w instanceof Array?w[x]:w,this._dimensionInfos[m])},typedArray:function(v,m,y,x){return v[x]}};function d(v,m,y,x){return f(v[x],this._dimensionInfos[m])}function f(v,m){var y=m&&m.type;if(y==="ordinal"){var x=m&&m.ordinalMeta;return x?x.parseAndCollect(v):v}return y==="time"&&typeof v!="number"&&v!=null&&v!=="-"&&(v=+S(v)),v==null||v===""?NaN:+v}G.DefaultDataProvider=t,G.defaultDimValueGetters=p,G.retrieveRawValue=function(v,m,y){if(v){var x=v.getRawDataItem(m);if(x!=null){var w,M,C=v.getProvider().getSource().sourceFormat,A=v.getDimensionInfo(y);return A&&(w=A.name,M=A.index),n[C](x,m,M,w)}}},G.retrieveRawAttr=function(v,m,y){if(v){var x=v.getProvider().getSource().sourceFormat;if(x===l||x===e){var w=v.getRawDataItem(m);return x!==l||O(w)||(w=null),w?w[y]:void 0}}}},99936:(W,G,T)=>{var L=T(33051),R=L.each,k=L.isString;function O(D,E){return!!E&&E===D.getCalculationInfo("stackedDimension")}G.enableDataStack=function(D,E,I){var S,_,g,u,c=(I=I||{}).byIndex,l=I.stackedCoordDimension,e=!(!D||!D.get("stack"));if(R(E,function(a,o){k(a)&&(E[o]=a={name:a}),e&&!a.isExtraCoord&&(c||S||!a.ordinalMeta||(S=a),_||a.type==="ordinal"||a.type==="time"||l&&l!==a.coordDim||(_=a))}),!_||c||S||(c=!0),_){g="__\0ecstackresult",u="__\0ecstackedover",S&&(S.createInvertedIndices=!0);var t=_.coordDim,i=_.type,s=0;R(E,function(a){a.coordDim===t&&s++}),E.push({name:g,coordDim:t,coordDimIndex:s,type:i,isExtraCoord:!0,isCalculationCoord:!0}),s++,E.push({name:u,coordDim:u,coordDimIndex:s,type:i,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:_&&_.name,stackedByDimension:S&&S.name,isStackedByIndex:c,stackedOverDimension:u,stackResultDimension:g}},G.isDimensionStacked=O,G.getStackedDimension=function(D,E){return O(D,E)?D.getCalculationInfo("stackResultDimension"):E}},10381:(W,G,T)=>{var L=T(33051),R=L.each,k=L.createHashMap,O=(L.assert,T(38175).__DEV__,k(["tooltip","label","itemName","itemId","seriesName"]));function D(E,I){return E.hasOwnProperty(I)||(E[I]=[]),E[I]}G.OTHER_DIMENSIONS=O,G.summarizeDimensions=function(E){var I={},S=I.encode={},_=k(),g=[],u=[],c=I.userOutput={dimensionNames:E.dimensions.slice(),encode:{}};R(E.dimensions,function(s){var a,o=E.getDimensionInfo(s),r=o.coordDim;if(r){var n=o.coordDimIndex;D(S,r)[n]=s,o.isExtraCoord||(_.set(r,1),(a=o.type)!=="ordinal"&&a!=="time"&&(g[0]=s),D(c.encode,r)[n]=o.index),o.defaultTooltip&&u.push(s)}O.each(function(h,p){var d=D(S,p),f=o.otherDims[p];f!=null&&f!==!1&&(d[f]=o.name)})});var l=[],e={};_.each(function(s,a){var o=S[a];e[a]=o[0],l=l.concat(o)}),I.dataDimsOnCoord=l,I.encodeFirstDimNotExtra=e;var t=S.label;t&&t.length&&(g=t.slice());var i=S.tooltip;return i&&i.length?u=i.slice():u.length||(u=g.slice()),S.defaultedLabel=g,S.defaultedTooltip=u,I},G.getDimensionTypeByAxis=function(E){return E==="category"?"ordinal":E==="time"?"time":"float"}},63978:(W,G,T)=>{var L=T(33051),R=L.each,k="\0__link_datas",O="\0__link_mainData";function D(u,c){if(this[O]===this){var l=L.extend({},this[k]);l[this.dataType]=c,_(c,l,u)}else g(c,this.dataType,this[O],u);return c}function E(u,c){return u.struct&&u.struct.update(this),c}function I(u,c){return R(c[k],function(l,e){l!==c&&g(l.cloneShallow(),e,c,u)}),c}function S(u){var c=this[O];return u==null||c==null?c:c[k][u]}function _(u,c,l){u[k]={},R(c,function(e,t){g(e,t,u,l)})}function g(u,c,l,e){l[k][c]=u,u[O]=l,u.dataType=c,e.struct&&(u[e.structAttr]=e.struct,e.struct[e.datasAttr[c]]=u),u.getLinkedData=S}W.exports=function(u){var c=u.mainData,l=u.datas;l||(l={main:c},u.datasAttr={main:"data"}),u.datas=u.mainData=null,_(c,l,u),R(l,function(e){R(c.TRANSFERABLE_METHODS,function(t){e.wrapMethod(t,L.curry(D,u))})}),c.wrapMethod("cloneShallow",L.curry(I,u)),R(c.CHANGABLE_METHODS,function(e){c.wrapMethod(e,L.curry(E,u))}),L.assert(l[c.dataType]===c)}},61772:(W,G,T)=>{T(38175).__DEV__;var L=T(32234),R=L.makeInner,k=L.getDataItemValue,O=T(33051),D=O.createHashMap,E=O.each,I=O.map,S=O.isArray,_=O.isString,g=O.isObject,u=O.isTypedArray,c=O.isArrayLike,l=O.extend,e=(O.assert,T(99574)),t=T(93819),i=t.SOURCE_FORMAT_ORIGINAL,s=t.SOURCE_FORMAT_ARRAY_ROWS,a=t.SOURCE_FORMAT_OBJECT_ROWS,o=t.SOURCE_FORMAT_KEYED_COLUMNS,r=t.SOURCE_FORMAT_UNKNOWN,n=t.SOURCE_FORMAT_TYPED_ARRAY,h=t.SERIES_LAYOUT_BY_ROW,p={Must:1,Might:2,Not:3},d=R();function f(x){if(x){var w=D();return I(x,function(M,C){if((M=l({},g(M)?M:{name:M})).name==null)return M;M.name+="",M.displayName==null&&(M.displayName=M.name);var A=w.get(M.name);return A?M.name+="-"+A.count++:w.set(M.name,{count:1}),M})}}function v(x,w,M,C){if(C==null&&(C=1/0),w===h)for(var A=0;A<M.length&&A<C;A++)x(M[A]?M[A][0]:null,A);else{var P=M[0]||[];for(A=0;A<P.length&&A<C;A++)x(P[A],A)}}function m(x){var w=x.option;if(!w.data)return x.ecModel.getComponent("dataset",w.datasetIndex||0)}function y(x,w,M,C,A,P){var b,N,B;if(u(x))return p.Not;if(C){var z=C[P];g(z)?(N=z.name,B=z.type):_(z)&&(N=z)}if(B!=null)return B==="ordinal"?p.Must:p.Not;if(w===s)if(M===h){for(var F=x[P],V=0;V<(F||[]).length&&V<5;V++)if((b=X(F[A+V]))!=null)return b}else for(V=0;V<x.length&&V<5;V++){var H=x[A+V];if(H&&(b=X(H[P]))!=null)return b}else if(w===a){if(!N)return p.Not;for(V=0;V<x.length&&V<5;V++)if((U=x[V])&&(b=X(U[N]))!=null)return b}else if(w===o){if(!N||!(F=x[N])||u(F))return p.Not;for(V=0;V<F.length&&V<5;V++)if((b=X(F[V]))!=null)return b}else if(w===i)for(V=0;V<x.length&&V<5;V++){var U=x[V],j=k(U);if(!S(j))return p.Not;if((b=X(j[P]))!=null)return b}function X(Y){var J=_(Y);return Y!=null&&isFinite(Y)&&Y!==""?J?p.Might:p.Not:J&&Y!=="-"?p.Must:void 0}return p.Not}G.BE_ORDINAL=p,G.detectSourceFormat=function(x){var w=x.option.source,M=r;if(u(w))M=n;else if(S(w)){w.length===0&&(M=s);for(var C=0,A=w.length;C<A;C++){var P=w[C];if(P!=null){if(S(P)){M=s;break}if(g(P)){M=a;break}}}}else if(g(w)){for(var b in w)if(w.hasOwnProperty(b)&&c(w[b])){M=o;break}}else if(w!=null)throw new Error("Invalid data");d(x).sourceFormat=M},G.getSource=function(x){return d(x).source},G.resetSourceDefaulter=function(x){d(x).datasetMap=D()},G.prepareSource=function(x){var w=x.option,M=w.data,C=u(M)?n:i,A=!1,P=w.seriesLayoutBy,b=w.sourceHeader,N=w.dimensions,B=m(x);if(B){var z=B.option;M=z.source,C=d(B).sourceFormat,A=!0,P=P||z.seriesLayoutBy,b==null&&(b=z.sourceHeader),N=N||z.dimensions}var F=function(V,H,U,j,X){if(!V)return{dimensionsDefine:f(X)};var Y,J;if(H===s)j==="auto"||j==null?v(function(Q){Q!=null&&Q!=="-"&&(_(Q)?J==null&&(J=1):J=0)},U,V,10):J=j?1:0,X||J!==1||(X=[],v(function(Q,Z){X[Z]=Q!=null?Q:""},U,V)),Y=X?X.length:U===h?V.length:V[0]?V[0].length:null;else if(H===a)X||(X=function(Q){for(var Z,q=0;q<Q.length&&!(Z=Q[q++]););if(Z){var tt=[];return E(Z,function($,rt){tt.push(rt)}),tt}}(V));else if(H===o)X||(X=[],E(V,function(Q,Z){X.push(Z)}));else if(H===i){var K=k(V[0]);Y=S(K)&&K.length||1}return{startIndex:J,dimensionsDefine:f(X),dimensionsDetectCount:Y}}(M,C,P,b,N);d(x).source=new e({data:M,fromDataset:A,seriesLayoutBy:P,sourceFormat:C,dimensionsDefine:F.dimensionsDefine,startIndex:F.startIndex,dimensionsDetectCount:F.dimensionsDetectCount,encodeDefine:w.encode})},G.makeSeriesEncodeForAxisCoordSys=function(x,w,M){var C={},A=m(w);if(!A||!x)return C;var P,b,N=[],B=[],z=w.ecModel,F=d(z).datasetMap,V=A.uid+"_"+M.seriesLayoutBy;x=x.slice(),E(x,function(X,Y){!g(X)&&(x[Y]={name:X}),X.type==="ordinal"&&P==null&&(P=Y,b=j(x[Y])),C[X.name]=[]});var H=F.get(V)||F.set(V,{categoryWayDim:b,valueWayDim:0});function U(X,Y,J){for(var K=0;K<J;K++)X.push(Y+K)}function j(X){var Y=X.dimsDef;return Y?Y.length:1}return E(x,function(X,Y){var J=X.name,K=j(X);if(P==null){var Q=H.valueWayDim;U(C[J],Q,K),U(B,Q,K),H.valueWayDim+=K}else P===Y?(U(C[J],0,K),U(N,0,K)):(Q=H.categoryWayDim,U(C[J],Q,K),U(B,Q,K),H.categoryWayDim+=K)}),N.length&&(C.itemName=N),B.length&&(C.seriesName=B),C},G.makeSeriesEncodeForNameBased=function(x,w,M){var C={};if(!m(x))return C;var A,P=w.sourceFormat,b=w.dimensionsDefine;P!==a&&P!==o||E(b,function(z,F){(g(z)?z.name:z)==="name"&&(A=F)});var N=function(){for(var z={},F={},V=[],H=0,U=Math.min(5,M);H<U;H++){var j=y(w.data,P,w.seriesLayoutBy,b,w.startIndex,H);V.push(j);var X=j===p.Not;if(X&&z.v==null&&H!==A&&(z.v=H),(z.n==null||z.n===z.v||!X&&V[z.n]===p.Not)&&(z.n=H),Y(z)&&V[z.n]!==p.Not)return z;X||(j===p.Might&&F.v==null&&H!==A&&(F.v=H),F.n!=null&&F.n!==F.v||(F.n=H))}function Y(J){return J.v!=null&&J.n!=null}return Y(z)?z:Y(F)?F:null}();if(N){C.value=N.v;var B=A!=null?A:N.n;C.itemName=[B],C.seriesName=[B]}return C},G.guessOrdinal=function(x,w){return y(x.data,x.sourceFormat,x.seriesLayoutBy,x.dimensionsDefine,x.startIndex,w)}},93819:(W,G)=>{G.SOURCE_FORMAT_ORIGINAL="original",G.SOURCE_FORMAT_ARRAY_ROWS="arrayRows",G.SOURCE_FORMAT_OBJECT_ROWS="objectRows",G.SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",G.SOURCE_FORMAT_UNKNOWN="unknown",G.SOURCE_FORMAT_TYPED_ARRAY="typedArray",G.SERIES_LAYOUT_BY_COLUMN="column",G.SERIES_LAYOUT_BY_ROW="row"},70492:(W,G,T)=>{T(38175).__DEV__;var L=T(31931),R=T(33051),k=T(21092),O=T(66387),D=T(19455),E=T(41502),I=T(17260),S=T(59935),_=T(95899),g=T(43534),u=T(70141),c=T(33809),l=T(98071),e=T(93321),t=T(33166),i=T(75797),s=T(51177),a=T(32234),o=T(270).throttle,r=T(7141),n=T(13825),h=T(23430),p=T(15532),d=T(29594),f=T(73450);T(81768);var v=T(26418),m=R.assert,y=R.each,x=R.isFunction,w=R.isObject,M=l.parseClassType,C="__flagInMainProcess",A=/^[a-zA-Z0-9_]+$/;function P(ut,dt){return function(xt,St,At){dt||!this._disposed?(xt=xt&&xt.toLowerCase(),E.prototype[ut].call(this,xt,St,At)):this.id}}function b(){E.call(this)}function N(ut,dt,xt){xt=xt||{},typeof dt=="string"&&(dt=yt[dt]),this.id,this.group,this._dom=ut;var St=this._zr=L.init(ut,{renderer:xt.renderer||"canvas",devicePixelRatio:xt.devicePixelRatio,width:xt.width,height:xt.height});this._throttledZrFlush=o(R.bind(St.flush,St),17),(dt=R.clone(dt))&&u(dt,!0),this._theme=dt,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new _;var At,Ct,Dt=this._api=(Ct=(At=this)._coordSysMgr,R.extend(new S(At),{getCoordinateSystems:R.bind(Ct.getCoordinateSystems,Ct),getComponentByElement:function(Et){for(;Et;){var Nt=Et.__ecComponentInfo;if(Nt!=null)return At._model.getComponent(Nt.mainType,Nt.index);Et=Et.parent}}}));function Pt(Et,Nt){return Et.__prio-Nt.__prio}D(vt,Pt),D(ot,Pt),this._scheduler=new p(this,Dt,ot,vt),E.call(this,this._ecEventProcessor=new rt),this._messageCenter=new b,this._initEvents(),this.resize=R.bind(this.resize,this),this._pendingActions=[],St.animation.on("frame",this._onframe,this),function(Et,Nt){Et.on("rendered",function(){Nt.trigger("rendered"),!Et.animation.isFinished()||Nt.__optionUpdated||Nt._scheduler.unfinished||Nt._pendingActions.length||Nt.trigger("finished")})}(St,this),R.setAsPrimitive(this)}b.prototype.on=P("on",!0),b.prototype.off=P("off",!0),b.prototype.one=P("one",!0),R.mixin(b,E);var B=N.prototype;function z(ut,dt,xt){if(this._disposed)this.id;else{var St,At=this._model,Ct=this._coordSysMgr.getCoordinateSystems();dt=a.parseFinder(At,dt);for(var Dt=0;Dt<Ct.length;Dt++){var Pt=Ct[Dt];if(Pt[ut]&&(St=Pt[ut](At,dt,xt))!=null)return St}}}B._onframe=function(){if(!this._disposed){var ut=this._scheduler;if(this.__optionUpdated){var dt=this.__optionUpdated.silent;this[C]=!0,V(this),F.update.call(this),this[C]=!1,this.__optionUpdated=!1,X.call(this,dt),Y.call(this,dt)}else if(ut.unfinished){var xt=1,St=this._model;this._api,ut.unfinished=!1;do{var At=+new Date;ut.performSeriesTasks(St),ut.performDataProcessorTasks(St),U(this,St),ut.performVisualTasks(St),Z(this,this._model,0,"remain"),xt-=+new Date-At}while(xt>0&&ut.unfinished);ut.unfinished||this._zr.flush()}}},B.getDom=function(){return this._dom},B.getZr=function(){return this._zr},B.setOption=function(ut,dt,xt){if(this._disposed)this.id;else{var St;if(w(dt)&&(xt=dt.lazyUpdate,St=dt.silent,dt=dt.notMerge),this[C]=!0,!this._model||dt){var At=new g(this._api),Ct=this._theme,Dt=this._model=new I;Dt.scheduler=this._scheduler,Dt.init(null,null,Ct,At)}this._model.setOption(ut,st),xt?(this.__optionUpdated={silent:St},this[C]=!1):(V(this),F.update.call(this),this._zr.flush(),this.__optionUpdated=!1,this[C]=!1,X.call(this,St),Y.call(this,St))}},B.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},B.getModel=function(){return this._model},B.getOption=function(){return this._model&&this._model.getOption()},B.getWidth=function(){return this._zr.getWidth()},B.getHeight=function(){return this._zr.getHeight()},B.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},B.getRenderedCanvas=function(ut){if(O.canvasSupported)return(ut=ut||{}).pixelRatio=ut.pixelRatio||1,ut.backgroundColor=ut.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(ut)},B.getSvgDataURL=function(){if(O.svgSupported){var ut=this._zr,dt=ut.storage.getDisplayList();return R.each(dt,function(xt){xt.stopAnimation(!0)}),ut.painter.toDataURL()}},B.getDataURL=function(ut){if(!this._disposed){var dt=(ut=ut||{}).excludeComponents,xt=this._model,St=[],At=this;y(dt,function(Dt){xt.eachComponent({mainType:Dt},function(Pt){var Et=At._componentsMap[Pt.__viewId];Et.group.ignore||(St.push(Et),Et.group.ignore=!0)})});var Ct=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.getRenderedCanvas(ut).toDataURL("image/"+(ut&&ut.type||"png"));return y(St,function(Dt){Dt.group.ignore=!1}),Ct}this.id},B.getConnectedDataURL=function(ut){if(this._disposed)this.id;else if(O.canvasSupported){var dt=ut.type==="svg",xt=this.group,St=Math.min,At=Math.max,Ct=1/0;if(bt[xt]){var Dt=Ct,Pt=Ct,Et=-1/0,Nt=-1/0,Ot=[],zt=ut&&ut.pixelRatio||1;R.each(pt,function(Zt,qt){if(Zt.group===xt){var ne=dt?Zt.getZr().painter.getSvgDom().innerHTML:Zt.getRenderedCanvas(R.clone(ut)),Qt=Zt.getDom().getBoundingClientRect();Dt=St(Qt.left,Dt),Pt=St(Qt.top,Pt),Et=At(Qt.right,Et),Nt=At(Qt.bottom,Nt),Ot.push({dom:ne,left:Qt.left,top:Qt.top})}});var Ft=(Et*=zt)-(Dt*=zt),Bt=(Nt*=zt)-(Pt*=zt),Xt=R.createCanvas(),Gt=L.init(Xt,{renderer:dt?"svg":"canvas"});if(Gt.resize({width:Ft,height:Bt}),dt){var Yt="";return y(Ot,function(Zt){var qt=Zt.left-Dt,ne=Zt.top-Pt;Yt+='<g transform="translate('+qt+","+ne+')">'+Zt.dom+"</g>"}),Gt.painter.getSvgRoot().innerHTML=Yt,ut.connectedBackgroundColor&&Gt.painter.setBackgroundColor(ut.connectedBackgroundColor),Gt.refreshImmediately(),Gt.painter.toDataURL()}return ut.connectedBackgroundColor&&Gt.add(new s.Rect({shape:{x:0,y:0,width:Ft,height:Bt},style:{fill:ut.connectedBackgroundColor}})),y(Ot,function(Zt){var qt=new s.Image({style:{x:Zt.left*zt-Dt,y:Zt.top*zt-Pt,image:Zt.dom}});Gt.add(qt)}),Gt.refreshImmediately(),Xt.toDataURL("image/"+(ut&&ut.type||"png"))}return this.getDataURL(ut)}},B.convertToPixel=R.curry(z,"convertToPixel"),B.convertFromPixel=R.curry(z,"convertFromPixel"),B.containPixel=function(ut,dt){if(!this._disposed){var xt,St=this._model;return ut=a.parseFinder(St,ut),R.each(ut,function(At,Ct){Ct.indexOf("Models")>=0&&R.each(At,function(Dt){var Pt=Dt.coordinateSystem;if(Pt&&Pt.containPoint)xt|=!!Pt.containPoint(dt);else if(Ct==="seriesModels"){var Et=this._chartsMap[Dt.__viewId];Et&&Et.containPoint&&(xt|=Et.containPoint(dt,Dt))}},this)},this),!!xt}this.id},B.getVisual=function(ut,dt){var xt=this._model,St=(ut=a.parseFinder(xt,ut,{defaultMainType:"series"})).seriesModel.getData(),At=ut.hasOwnProperty("dataIndexInside")?ut.dataIndexInside:ut.hasOwnProperty("dataIndex")?St.indexOfRawIndex(ut.dataIndex):null;return At!=null?St.getItemVisual(At,dt):St.getVisual(dt)},B.getViewOfComponentModel=function(ut){return this._componentsMap[ut.__viewId]},B.getViewOfSeriesModel=function(ut){return this._chartsMap[ut.__viewId]};var F={prepareAndUpdate:function(ut){V(this),F.update.call(this,ut)},update:function(ut){var dt=this._model,xt=this._api,St=this._zr,At=this._coordSysMgr,Ct=this._scheduler;if(dt){Ct.restoreData(dt,ut),Ct.performSeriesTasks(dt),At.create(dt,xt),Ct.performDataProcessorTasks(dt,ut),U(this,dt),At.update(dt,xt),K(dt),Ct.performVisualTasks(dt,ut),Q(this,dt,xt,ut);var Dt=dt.get("backgroundColor")||"transparent";if(O.canvasSupported)St.setBackgroundColor(Dt);else{var Pt=k.parse(Dt);Dt=k.stringify(Pt,"rgb"),Pt[3]===0&&(Dt="transparent")}q(dt,xt)}},updateTransform:function(ut){var dt=this._model,xt=this,St=this._api;if(dt){var At=[];dt.eachComponent(function(Dt,Pt){var Et=xt.getViewOfComponentModel(Pt);if(Et&&Et.__alive)if(Et.updateTransform){var Nt=Et.updateTransform(Pt,dt,St,ut);Nt&&Nt.update&&At.push(Et)}else At.push(Et)});var Ct=R.createHashMap();dt.eachSeries(function(Dt){var Pt=xt._chartsMap[Dt.__viewId];if(Pt.updateTransform){var Et=Pt.updateTransform(Dt,dt,St,ut);Et&&Et.update&&Ct.set(Dt.uid,1)}else Ct.set(Dt.uid,1)}),K(dt),this._scheduler.performVisualTasks(dt,ut,{setDirty:!0,dirtyMap:Ct}),Z(xt,dt,0,ut,Ct),q(dt,this._api)}},updateView:function(ut){var dt=this._model;dt&&(i.markUpdateMethod(ut,"updateView"),K(dt),this._scheduler.performVisualTasks(dt,ut,{setDirty:!0}),Q(this,this._model,this._api,ut),q(dt,this._api))},updateVisual:function(ut){F.update.call(this,ut)},updateLayout:function(ut){F.update.call(this,ut)}};function V(ut){var dt=ut._model,xt=ut._scheduler;xt.restorePipelines(dt),xt.prepareStageTasks(),J(ut,"component",dt,xt),J(ut,"chart",dt,xt),xt.plan()}function H(ut,dt,xt,St,At){var Ct=ut._model;if(St){var Dt={};Dt[St+"Id"]=xt[St+"Id"],Dt[St+"Index"]=xt[St+"Index"],Dt[St+"Name"]=xt[St+"Name"];var Pt={mainType:St,query:Dt};At&&(Pt.subType=At);var Et=xt.excludeSeriesId;Et!=null&&(Et=R.createHashMap(a.normalizeToArray(Et))),Ct&&Ct.eachComponent(Pt,function(Ot){Et&&Et.get(Ot.id)!=null||Nt(ut[St==="series"?"_chartsMap":"_componentsMap"][Ot.__viewId])},ut)}else y(ut._componentsViews.concat(ut._chartsViews),Nt);function Nt(Ot){Ot&&Ot.__alive&&Ot[dt]&&Ot[dt](Ot.__model,Ct,ut._api,xt)}}function U(ut,dt){var xt=ut._chartsMap,St=ut._scheduler;dt.eachSeries(function(At){St.updateStreamModes(At,xt[At.__viewId])})}function j(ut,dt){var xt=ut.type,St=ut.escapeConnect,At=et[xt],Ct=At.actionInfo,Dt=(Ct.update||"update").split(":"),Pt=Dt.pop();Dt=Dt[0]!=null&&M(Dt[0]),this[C]=!0;var Et=[ut],Nt=!1;ut.batch&&(Nt=!0,Et=R.map(ut.batch,function(Bt){return(Bt=R.defaults(R.extend({},Bt),ut)).batch=null,Bt}));var Ot,zt=[],Ft=xt==="highlight"||xt==="downplay";y(Et,function(Bt){(Ot=(Ot=At.action(Bt,this._model,this._api))||R.extend({},Bt)).type=Ct.event||Ot.type,zt.push(Ot),Ft?H(this,Pt,Bt,"series"):Dt&&H(this,Pt,Bt,Dt.main,Dt.sub)},this),Pt==="none"||Ft||Dt||(this.__optionUpdated?(V(this),F.update.call(this,ut),this.__optionUpdated=!1):F[Pt].call(this,ut)),Ot=Nt?{type:Ct.event||xt,escapeConnect:St,batch:zt}:zt[0],this[C]=!1,!dt&&this._messageCenter.trigger(Ot.type,Ot)}function X(ut){for(var dt=this._pendingActions;dt.length;){var xt=dt.shift();j.call(this,xt,ut)}}function Y(ut){!ut&&this.trigger("updated")}function J(ut,dt,xt,St){for(var At=dt==="component",Ct=At?ut._componentsViews:ut._chartsViews,Dt=At?ut._componentsMap:ut._chartsMap,Pt=ut._zr,Et=ut._api,Nt=0;Nt<Ct.length;Nt++)Ct[Nt].__alive=!1;function Ot(Ft){var Bt="_ec_"+Ft.id+"_"+Ft.type,Xt=Dt[Bt];if(!Xt){var Gt=M(Ft.type);(Xt=new(At?t.getClass(Gt.main,Gt.sub):i.getClass(Gt.sub))).init(xt,Et),Dt[Bt]=Xt,Ct.push(Xt),Pt.add(Xt.group)}Ft.__viewId=Xt.__id=Bt,Xt.__alive=!0,Xt.__model=Ft,Xt.group.__ecComponentInfo={mainType:Ft.mainType,index:Ft.componentIndex},!At&&St.prepareView(Xt,Ft,xt,Et)}for(At?xt.eachComponent(function(Ft,Bt){Ft!=="series"&&Ot(Bt)}):xt.eachSeries(Ot),Nt=0;Nt<Ct.length;){var zt=Ct[Nt];zt.__alive?Nt++:(!At&&zt.renderTask.dispose(),Pt.remove(zt.group),zt.dispose(xt,Et),Ct.splice(Nt,1),delete Dt[zt.__id],zt.__id=zt.group.__ecComponentInfo=null)}}function K(ut){ut.clearColorPalette(),ut.eachSeries(function(dt){dt.clearColorPalette()})}function Q(ut,dt,xt,St){(function(At,Ct,Dt,Pt,Et){y(At._componentsViews,function(Nt){var Ot=Nt.__model;Nt.render(Ot,Ct,Dt,Pt),$(Ot,Nt)})})(ut,dt,xt,St),y(ut._chartsViews,function(At){At.__alive=!1}),Z(ut,dt,0,St),y(ut._chartsViews,function(At){At.__alive||At.remove(dt,xt)})}function Z(ut,dt,xt,St,At){var Ct,Dt=ut._scheduler;dt.eachSeries(function(Pt){var Et=ut._chartsMap[Pt.__viewId];Et.__alive=!0;var Nt=Et.renderTask;Dt.updatePayload(Nt,St),At&&At.get(Pt.uid)&&Nt.dirty(),Ct|=Nt.perform(Dt.getPerformArgs(Nt)),Et.group.silent=!!Pt.get("silent"),$(Pt,Et),function(Ot,zt){var Ft=Ot.get("blendMode")||null;zt.group.traverse(function(Bt){Bt.isGroup||Bt.style.blend!==Ft&&Bt.setStyle("blend",Ft),Bt.eachPendingDisplayable&&Bt.eachPendingDisplayable(function(Xt){Xt.setStyle("blend",Ft)})})}(Pt,Et)}),Dt.unfinished|=Ct,function(Pt,Et){var Nt=Pt._zr.storage,Ot=0;Nt.traverse(function(zt){Ot++}),Ot>Et.get("hoverLayerThreshold")&&!O.node&&Et.eachSeries(function(zt){if(!zt.preventUsingHoverLayer){var Ft=Pt._chartsMap[zt.__viewId];Ft.__alive&&Ft.group.traverse(function(Bt){Bt.useHoverLayer=!0})}})}(ut,dt),n(ut._zr.dom,dt)}function q(ut,dt){y(at,function(xt){xt(ut,dt)})}B.resize=function(ut){if(this._disposed)this.id;else{this._zr.resize(ut);var dt=this._model;if(this._loadingFX&&this._loadingFX.resize(),dt){var xt=dt.resetOption("media"),St=ut&&ut.silent;this[C]=!0,xt&&V(this),F.update.call(this),this[C]=!1,X.call(this,St),Y.call(this,St)}}},B.showLoading=function(ut,dt){if(this._disposed)this.id;else if(w(ut)&&(dt=ut,ut=""),ut=ut||"default",this.hideLoading(),gt[ut]){var xt=gt[ut](this._api,dt),St=this._zr;this._loadingFX=xt,St.add(xt)}},B.hideLoading=function(){this._disposed?this.id:(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},B.makeActionFromEvent=function(ut){var dt=R.extend({},ut);return dt.type=it[ut.type],dt},B.dispatchAction=function(ut,dt){this._disposed?this.id:(w(dt)||(dt={silent:!!dt}),et[ut.type]&&this._model&&(this[C]?this._pendingActions.push(ut):(j.call(this,ut,dt.silent),dt.flush?this._zr.flush(!0):dt.flush!==!1&&O.browser.weChat&&this._throttledZrFlush(),X.call(this,dt.silent),Y.call(this,dt.silent))))},B.appendData=function(ut){if(this._disposed)this.id;else{var dt=ut.seriesIndex;this.getModel().getSeriesByIndex(dt).appendData(ut),this._scheduler.unfinished=!0}},B.on=P("on",!1),B.off=P("off",!1),B.one=P("one",!1);var tt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function $(ut,dt){var xt=ut.get("z"),St=ut.get("zlevel");dt.group.traverse(function(At){At.type!=="group"&&(xt!=null&&(At.z=xt),St!=null&&(At.zlevel=St))})}function rt(){this.eventInfo}B._initEvents=function(){y(tt,function(ut){var dt=function(xt){var St,At=this.getModel(),Ct=xt.target;if(ut==="globalout")St={};else if(Ct&&Ct.dataIndex!=null){var Dt=Ct.dataModel||At.getSeriesByIndex(Ct.seriesIndex);St=Dt&&Dt.getDataParams(Ct.dataIndex,Ct.dataType,Ct)||{}}else Ct&&Ct.eventData&&(St=R.extend({},Ct.eventData));if(St){var Pt=St.componentType,Et=St.componentIndex;Pt!=="markLine"&&Pt!=="markPoint"&&Pt!=="markArea"||(Pt="series",Et=St.seriesIndex);var Nt=Pt&&Et!=null&&At.getComponent(Pt,Et),Ot=Nt&&this[Nt.mainType==="series"?"_chartsMap":"_componentsMap"][Nt.__viewId];St.event=xt,St.type=ut,this._ecEventProcessor.eventInfo={targetEl:Ct,packedEvent:St,model:Nt,view:Ot},this.trigger(ut,St)}};dt.zrEventfulCallAtLast=!0,this._zr.on(ut,dt,this)},this),y(it,function(ut,dt){this._messageCenter.on(dt,function(xt){this.trigger(dt,xt)},this)},this)},B.isDisposed=function(){return this._disposed},B.clear=function(){this._disposed?this.id:this.setOption({series:[]},!0)},B.dispose=function(){if(this._disposed)this.id;else{this._disposed=!0,a.setAttribute(this.getDom(),lt,"");var ut=this._api,dt=this._model;y(this._componentsViews,function(xt){xt.dispose(dt,ut)}),y(this._chartsViews,function(xt){xt.dispose(dt,ut)}),this._zr.dispose(),delete pt[this.id]}},R.mixin(N,E),rt.prototype={constructor:rt,normalizeQuery:function(ut){var dt={},xt={},St={};if(R.isString(ut)){var At=M(ut);dt.mainType=At.main||null,dt.subType=At.sub||null}else{var Ct=["Index","Name","Id"],Dt={name:1,dataIndex:1,dataType:1};R.each(ut,function(Pt,Et){for(var Nt=!1,Ot=0;Ot<Ct.length;Ot++){var zt=Ct[Ot],Ft=Et.lastIndexOf(zt);if(Ft>0&&Ft===Et.length-zt.length){var Bt=Et.slice(0,Ft);Bt!=="data"&&(dt.mainType=Bt,dt[zt.toLowerCase()]=Pt,Nt=!0)}}Dt.hasOwnProperty(Et)&&(xt[Et]=Pt,Nt=!0),Nt||(St[Et]=Pt)})}return{cptQuery:dt,dataQuery:xt,otherQuery:St}},filter:function(ut,dt,xt){var St=this.eventInfo;if(!St)return!0;var At=St.targetEl,Ct=St.packedEvent,Dt=St.model,Pt=St.view;if(!Dt||!Pt)return!0;var Et=dt.cptQuery,Nt=dt.dataQuery;return Ot(Et,Dt,"mainType")&&Ot(Et,Dt,"subType")&&Ot(Et,Dt,"index","componentIndex")&&Ot(Et,Dt,"name")&&Ot(Et,Dt,"id")&&Ot(Nt,Ct,"name")&&Ot(Nt,Ct,"dataIndex")&&Ot(Nt,Ct,"dataType")&&(!Pt.filterForExposedEvent||Pt.filterForExposedEvent(ut,dt.otherQuery,At,Ct));function Ot(zt,Ft,Bt,Xt){return zt[Bt]==null||Ft[Xt||Bt]===zt[Bt]}},afterTrigger:function(){this.eventInfo=null}};var et={},it={},ot=[],st=[],at=[],vt=[],yt={},gt={},pt={},bt={},mt=new Date-0,nt=new Date-0,lt="_echarts_instance_";function ct(ut){bt[ut]=!1}var ht=ct;function ft(ut){return pt[a.getAttribute(ut,lt)]}function _t(ut,dt){yt[ut]=dt}function wt(ut){st.push(ut)}function Tt(ut,dt){Lt(ot,ut,dt,1e3)}function It(ut,dt,xt){typeof dt=="function"&&(xt=dt,dt="");var St=w(ut)?ut.type:[ut,ut={event:dt}][0];ut.event=(ut.event||St).toLowerCase(),dt=ut.event,m(A.test(St)&&A.test(dt)),et[St]||(et[St]={action:xt,actionInfo:ut}),it[dt]=St}function Mt(ut,dt){Lt(vt,ut,dt,3e3,"visual")}function Lt(ut,dt,xt,St,At){(x(dt)||w(dt))&&(xt=dt,dt=St);var Ct=p.wrapStageHandler(xt,At);return Ct.__prio=dt,Ct.__raw=xt,ut.push(Ct),Ct}function kt(ut,dt){gt[ut]=dt}Mt(2e3,r),wt(u),Tt(900,c),kt("default",h),It({type:"highlight",event:"highlight",update:"highlight"},R.noop),It({type:"downplay",event:"downplay",update:"downplay"},R.noop),_t("light",d),_t("dark",f),G.version="4.9.0",G.dependencies={zrender:"4.3.2"},G.PRIORITY={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},G.init=function(ut,dt,xt){var St=ft(ut);if(St)return St;var At=new N(ut,dt,xt);return At.id="ec_"+mt++,pt[At.id]=At,a.setAttribute(ut,lt,At.id),function(Ct){var Dt="__connectUpdateStatus";function Pt(Et,Nt){for(var Ot=0;Ot<Et.length;Ot++)Et[Ot][Dt]=Nt}y(it,function(Et,Nt){Ct._messageCenter.on(Nt,function(Ot){if(bt[Ct.group]&&Ct[Dt]!==0){if(Ot&&Ot.escapeConnect)return;var zt=Ct.makeActionFromEvent(Ot),Ft=[];y(pt,function(Bt){Bt!==Ct&&Bt.group===Ct.group&&Ft.push(Bt)}),Pt(Ft,0),y(Ft,function(Bt){Bt[Dt]!==1&&Bt.dispatchAction(zt)}),Pt(Ft,2)}})})}(At),At},G.connect=function(ut){if(R.isArray(ut)){var dt=ut;ut=null,y(dt,function(xt){xt.group!=null&&(ut=xt.group)}),ut=ut||"g_"+nt++,y(dt,function(xt){xt.group=ut})}return bt[ut]=!0,ut},G.disConnect=ct,G.disconnect=ht,G.dispose=function(ut){typeof ut=="string"?ut=pt[ut]:ut instanceof N||(ut=ft(ut)),ut instanceof N&&!ut.isDisposed()&&ut.dispose()},G.getInstanceByDom=ft,G.getInstanceById=function(ut){return pt[ut]},G.registerTheme=_t,G.registerPreprocessor=wt,G.registerProcessor=Tt,G.registerPostUpdate=function(ut){at.push(ut)},G.registerAction=It,G.registerCoordinateSystem=function(ut,dt){_.register(ut,dt)},G.getCoordinateSystemDimensions=function(ut){var dt=_.get(ut);if(dt)return dt.getDimensionsInfo?dt.getDimensionsInfo():dt.dimensions.slice()},G.registerLayout=function(ut,dt){Lt(vt,ut,dt,1e3,"layout")},G.registerVisual=Mt,G.registerLoading=kt,G.extendComponentModel=function(ut){return l.extend(ut)},G.extendComponentView=function(ut){return t.extend(ut)},G.extendSeriesModel=function(ut){return e.extend(ut)},G.extendChartView=function(ut){return i.extend(ut)},G.setCanvasCreator=function(ut){R.$override("createCanvas",ut)},G.registerMap=function(ut,dt,xt){v.registerMap(ut,dt,xt)},G.getMap=function(ut){var dt=v.retrieveMap(ut);return dt&&dt[0]&&{geoJson:dt[0].geoJSON,specialAreas:dt[0].specialAreas}},G.dataTool={};var Rt=T(34151);(function(){for(var ut in Rt)Rt.hasOwnProperty(ut)&&(G[ut]=Rt[ut])})()},34151:(W,G,T)=>{var L=T(31931);G.zrender=L;var R=T(32892);G.matrix=R;var k=T(45280);G.vector=k;var O=T(33051),D=T(21092);G.color=D;var E=T(51177),I=T(85669);G.number=I;var S=T(78988);G.format=S;var _=T(270);_.throttle,G.throttle=_.throttle;var g=T(28482);G.helper=g;var u=T(76672);G.parseGeoJSON=u;var c=T(87587);G.List=c;var l=T(4272);G.Model=l;var e=T(3245);G.Axis=e;var t=T(66387);G.env=t;var i=u,s={};O.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(o){s[o]=O[o]});var a={};O.each(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(o){a[o]=E[o]}),G.parseGeoJson=i,G.util=s,G.graphic=a},28482:(W,G,T)=>{var L=T(33051),R=T(40488),k=T(97980),O=T(16650),D=T(4272),E=T(76172);E.getLayoutRect,G.getLayoutRect=E.getLayoutRect;var I=T(99936),S=I.enableDataStack,_=I.isDimensionStacked,g=I.getStackedDimension,u=T(34380);G.completeDimensions=u;var c=T(55623);G.createDimensions=c;var l=T(41525);G.createSymbol=l.createSymbol;var e={isDimensionStacked:_,enableDataStack:S,getStackedDimension:g};G.createList=function(t){return R(t.getSource(),t)},G.dataStack=e,G.createScale=function(t,i){var s=i;D.isInstance(i)||(s=new D(i),L.mixin(s,O));var a=k.createScaleByModel(s);return a.setExtent(t[0],t[1]),k.niceScaleExtent(a,s),a},G.mixinAxisModelCommonMethods=function(t){L.mixin(t,O)}},40292:W=>{W.exports={legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}}},79093:(W,G,T)=>{var L=T(33051),R=T(85669).parsePercent,k=T(99936).isDimensionStacked,O=T(95682),D="__ec_stack_",E=typeof Float32Array<"u"?Float32Array:Array;function I(s){return s.get("stack")||D+s.seriesIndex}function S(s){return s.dim+s.index}function _(s,a){var o=[];return a.eachSeriesByType(s,function(r){e(r)&&!t(r)&&o.push(r)}),o}function g(s){var a=function(r){var n={};L.each(r,function(y){var x=y.coordinateSystem.getBaseAxis();if(x.type==="time"||x.type==="value")for(var w=y.getData(),M=x.dim+"_"+x.index,C=w.mapDimension(x.dim),A=0,P=w.count();A<P;++A){var b=w.get(C,A);n[M]?n[M].push(b):n[M]=[b]}});var h=[];for(var p in n)if(n.hasOwnProperty(p)){var d=n[p];if(d){d.sort(function(y,x){return y-x});for(var f=null,v=1;v<d.length;++v){var m=d[v]-d[v-1];m>0&&(f=f===null?m:Math.min(f,m))}h[p]=f}}return h}(s),o=[];return L.each(s,function(r){var n,h=r.coordinateSystem.getBaseAxis(),p=h.getExtent();if(h.type==="category")n=h.getBandWidth();else if(h.type==="value"||h.type==="time"){var d=h.dim+"_"+h.index,f=a[d],v=Math.abs(p[1]-p[0]),m=h.scale.getExtent(),y=Math.abs(m[1]-m[0]);n=f?v/y*f:v}else{var x=r.getData();n=Math.abs(p[1]-p[0])/x.count()}var w=R(r.get("barWidth"),n),M=R(r.get("barMaxWidth"),n),C=R(r.get("barMinWidth")||1,n),A=r.get("barGap"),P=r.get("barCategoryGap");o.push({bandWidth:n,barWidth:w,barMaxWidth:M,barMinWidth:C,barGap:A,barCategoryGap:P,axisKey:S(h),stackId:I(r)})}),u(o)}function u(s){var a={};L.each(s,function(r,n){var h=r.axisKey,p=r.bandWidth,d=a[h]||{bandWidth:p,remainedWidth:p,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},f=d.stacks;a[h]=d;var v=r.stackId;f[v]||d.autoWidthCount++,f[v]=f[v]||{width:0,maxWidth:0};var m=r.barWidth;m&&!f[v].width&&(f[v].width=m,m=Math.min(d.remainedWidth,m),d.remainedWidth-=m);var y=r.barMaxWidth;y&&(f[v].maxWidth=y);var x=r.barMinWidth;x&&(f[v].minWidth=x);var w=r.barGap;w!=null&&(d.gap=w);var M=r.barCategoryGap;M!=null&&(d.categoryGap=M)});var o={};return L.each(a,function(r,n){o[n]={};var h=r.stacks,p=r.bandWidth,d=R(r.categoryGap,p),f=R(r.gap,1),v=r.remainedWidth,m=r.autoWidthCount,y=(v-d)/(m+(m-1)*f);y=Math.max(y,0),L.each(h,function(C){var A=C.maxWidth,P=C.minWidth;if(C.width)b=C.width,A&&(b=Math.min(b,A)),P&&(b=Math.max(b,P)),C.width=b,v-=b+f*b,m--;else{var b=y;A&&A<b&&(b=Math.min(A,v)),P&&P>b&&(b=P),b!==y&&(C.width=b,v-=b+f*b,m--)}}),y=(v-d)/(m+(m-1)*f),y=Math.max(y,0);var x,w=0;L.each(h,function(C,A){C.width||(C.width=y),x=C,w+=C.width*(1+f)}),x&&(w-=x.width*f);var M=-w/2;L.each(h,function(C,A){o[n][A]=o[n][A]||{bandWidth:p,offset:M,width:C.width},M+=C.width*(1+f)})}),o}function c(s,a,o){if(s&&a){var r=s[S(a)];return r!=null&&o!=null&&(r=r[I(o)]),r}}var l={seriesType:"bar",plan:O(),reset:function(s){if(e(s)&&t(s)){var a=s.getData(),o=s.coordinateSystem,r=o.grid.getRect(),n=o.getBaseAxis(),h=o.getOtherAxis(n),p=a.mapDimension(h.dim),d=a.mapDimension(n.dim),f=h.isHorizontal(),v=f?0:1,m=c(g([s]),n,s).width;return m>.5||(m=.5),{progress:function(y,x){for(var w,M=y.count,C=new E(2*M),A=new E(2*M),P=new E(M),b=[],N=[],B=0,z=0;(w=y.next())!=null;)N[v]=x.get(p,w),N[1-v]=x.get(d,w),b=o.dataToPoint(N,null,b),A[B]=f?r.x+r.width:b[0],C[B++]=b[0],A[B]=f?b[1]:r.y+r.height,C[B++]=b[1],P[z++]=w;x.setLayout({largePoints:C,largeDataIndices:P,largeBackgroundPoints:A,barWidth:m,valueAxisStart:i(0,h),backgroundStart:f?r.x:r.y,valueAxisHorizontal:f})}}}}};function e(s){return s.coordinateSystem&&s.coordinateSystem.type==="cartesian2d"}function t(s){return s.pipelineContext&&s.pipelineContext.large}function i(s,a,o){return a.toGlobalCoord(a.dataToCoord(a.type==="log"?1:0))}G.getLayoutOnAxis=function(s){var a=[],o=s.axis;if(o.type==="category"){for(var r=o.getBandWidth(),n=0;n<s.count;n++)a.push(L.defaults({bandWidth:r,axisKey:"axis0",stackId:D+n},s));var h=u(a),p=[];for(n=0;n<s.count;n++){var d=h.axis0[D+n];d.offsetCenter=d.offset+d.width/2,p.push(d)}return p}},G.prepareLayoutBarSeries=_,G.makeColumnLayout=g,G.retrieveColumnLayout=c,G.layout=function(s,a){var o=_(s,a),r=g(o),n={};L.each(o,function(h){var p=h.getData(),d=h.coordinateSystem,f=d.getBaseAxis(),v=I(h),m=r[S(f)][v],y=m.offset,x=m.width,w=d.getOtherAxis(f),M=h.get("barMinHeight")||0;n[v]=n[v]||[],p.setLayout({bandWidth:m.bandWidth,offset:y,size:x});for(var C=p.mapDimension(w.dim),A=p.mapDimension(f.dim),P=k(p,C),b=w.isHorizontal(),N=i(0,w),B=0,z=p.count();B<z;B++){var F,V,H,U,j,X=p.get(C,B),Y=p.get(A,B),J=X>=0?"p":"n",K=N;P&&(n[v][Y]||(n[v][Y]={p:N,n:N}),K=n[v][Y][J]),b?(F=K,V=(j=d.dataToPoint([X,Y]))[1]+y,H=j[0]-N,U=x,Math.abs(H)<M&&(H=(H<0?-1:1)*M),isNaN(H)||P&&(n[v][Y][J]+=H)):(F=(j=d.dataToPoint([Y,X]))[0]+y,V=K,H=x,U=j[1]-N,Math.abs(U)<M&&(U=(U<=0?-1:1)*M),isNaN(U)||P&&(n[v][Y][J]+=U)),p.setItemLayout(B,{x:F,y:V,width:H,height:U})}},this)},G.largeLayout=l},21709:(W,G,T)=>{var L=T(33051),R=T(85669).parsePercent,k=T(99936).isDimensionStacked;function O(E){return E.get("stack")||"__ec_stack_"+E.seriesIndex}function D(E,I){return I.dim+E.model.componentIndex}W.exports=function(E,I,S){var _={},g=function(u,c){var l={};L.each(u,function(t,i){var s=t.getData(),a=t.coordinateSystem,o=a.getBaseAxis(),r=D(a,o),n=o.getExtent(),h=o.type==="category"?o.getBandWidth():Math.abs(n[1]-n[0])/s.count(),p=l[r]||{bandWidth:h,remainedWidth:h,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=p.stacks;l[r]=p;var f=O(t);d[f]||p.autoWidthCount++,d[f]=d[f]||{width:0,maxWidth:0};var v=R(t.get("barWidth"),h),m=R(t.get("barMaxWidth"),h),y=t.get("barGap"),x=t.get("barCategoryGap");v&&!d[f].width&&(v=Math.min(p.remainedWidth,v),d[f].width=v,p.remainedWidth-=v),m&&(d[f].maxWidth=m),y!=null&&(p.gap=y),x!=null&&(p.categoryGap=x)});var e={};return L.each(l,function(t,i){e[i]={};var s=t.stacks,a=t.bandWidth,o=R(t.categoryGap,a),r=R(t.gap,1),n=t.remainedWidth,h=t.autoWidthCount,p=(n-o)/(h+(h-1)*r);p=Math.max(p,0),L.each(s,function(m,y){var x=m.maxWidth;x&&x<p&&(x=Math.min(x,n),m.width&&(x=Math.min(x,m.width)),n-=x,m.width=x,h--)}),p=(n-o)/(h+(h-1)*r),p=Math.max(p,0);var d,f=0;L.each(s,function(m,y){m.width||(m.width=p),d=m,f+=m.width*(1+r)}),d&&(f-=d.width*r);var v=-f/2;L.each(s,function(m,y){e[i][y]=e[i][y]||{offset:v,width:m.width},v+=m.width*(1+r)})}),e}(L.filter(I.getSeriesByType(E),function(u){return!I.isSeriesFiltered(u)&&u.coordinateSystem&&u.coordinateSystem.type==="polar"}));I.eachSeriesByType(E,function(u){if(u.coordinateSystem.type==="polar"){var c=u.getData(),l=u.coordinateSystem,e=l.getBaseAxis(),t=D(l,e),i=O(u),s=g[t][i],a=s.offset,o=s.width,r=l.getOtherAxis(e),n=u.coordinateSystem.cx,h=u.coordinateSystem.cy,p=u.get("barMinHeight")||0,d=u.get("barMinAngle")||0;_[i]=_[i]||[];for(var f=c.mapDimension(r.dim),v=c.mapDimension(e.dim),m=k(c,f),y=e.dim!=="radius"||!u.get("roundCap",!0),x=r.dim==="radius"?r.dataToRadius(0):r.dataToAngle(0),w=0,M=c.count();w<M;w++){var C,A,P,b,N=c.get(f,w),B=c.get(v,w),z=N>=0?"p":"n",F=x;if(m&&(_[i][B]||(_[i][B]={p:x,n:x}),F=_[i][B][z]),r.dim==="radius"){var V=r.dataToRadius(N)-x,H=e.dataToAngle(B);Math.abs(V)<p&&(V=(V<0?-1:1)*p),C=F,A=F+V,b=(P=H-a)-o,m&&(_[i][B][z]=A)}else{var U=r.dataToAngle(N,y)-x,j=e.dataToRadius(B);Math.abs(U)<d&&(U=(U<0?-1:1)*d),A=(C=j+a)+o,P=F,b=F+U,m&&(_[i][B][z]=b)}c.setItemLayout(w,{cx:n,cy:h,r0:C,r:A,startAngle:-P*Math.PI/180,endAngle:-b*Math.PI/180})}}},this)}},21149:(W,G,T)=>{var L=T(33051).map,R=T(95682),k=T(99936).isDimensionStacked;W.exports=function(O){return{seriesType:O,plan:R(),reset:function(D){var E=D.getData(),I=D.coordinateSystem,S=D.pipelineContext.large;if(I){var _=L(I.dimensions,function(c){return E.mapDimension(c)}).slice(0,2),g=_.length,u=E.getCalculationInfo("stackResultDimension");return k(E,_[0])&&(_[0]=u),k(E,_[1])&&(_[1]=u),g&&{progress:function(c,l){for(var e=c.end-c.start,t=S&&new Float32Array(e*g),i=c.start,s=0,a=[],o=[];i<c.end;i++){var r;if(g===1){var n=l.get(_[0],i);r=!isNaN(n)&&I.dataToPoint(n,null,o)}else{n=a[0]=l.get(_[0],i);var h=a[1]=l.get(_[1],i);r=!isNaN(n)&&!isNaN(h)&&I.dataToPoint(a,null,o)}S?(t[s++]=r?r[0]:NaN,t[s++]=r?r[1]:NaN):l.setItemLayout(i,r&&r.slice()||[NaN,NaN])}S&&l.setLayout("symbolPoints",t)}}}}}}},23430:(W,G,T)=>{var L=T(33051),R=T(51177),k=T(80423),O=Math.PI;W.exports=function(D,E){E=E||{},L.defaults(E,{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var I=new R.Group,S=new R.Rect({style:{fill:E.maskColor},zlevel:E.zlevel,z:1e4});I.add(S);var _=E.fontSize+" sans-serif",g=new R.Rect({style:{fill:"none",text:E.text,font:_,textPosition:"right",textDistance:10,textFill:E.textColor},zlevel:E.zlevel,z:10001});if(I.add(g),E.showSpinner){var u=new R.Arc({shape:{startAngle:-O/2,endAngle:-O/2+.1,r:E.spinnerRadius},style:{stroke:E.color,lineCap:"round",lineWidth:E.lineWidth},zlevel:E.zlevel,z:10001});u.animateShape(!0).when(1e3,{endAngle:3*O/2}).start("circularInOut"),u.animateShape(!0).when(1e3,{startAngle:3*O/2}).delay(300).start("circularInOut"),I.add(u)}return I.resize=function(){var c=k.getWidth(E.text,_),l=E.showSpinner?E.spinnerRadius:0,e=(D.getWidth()-2*l-(E.showSpinner&&c?10:0)-c)/2-(E.showSpinner?0:c/2),t=D.getHeight()/2;E.showSpinner&&u.setShape({cx:e,cy:t}),g.setShape({x:e-l,y:t-l,width:2*l,height:2*l}),S.setShape({x:0,y:0,width:D.getWidth(),height:D.getHeight()})},I.resize(),I}},98071:(W,G,T)=>{var L=T(33051),R=T(4272),k=T(42151),O=T(34251),D=O.enableClassManagement,E=O.parseClassType,I=T(32234).makeInner,S=T(76172),_=T(83047),g=I(),u=R.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(l,e,t,i){R.call(this,l,e,t,i),this.uid=k.getUID("ec_cpt_model")},init:function(l,e,t,i){this.mergeDefaultAndTheme(l,t)},mergeDefaultAndTheme:function(l,e){var t=this.layoutMode,i=t?S.getLayoutParams(l):{},s=e.getTheme();L.merge(l,s.get(this.mainType)),L.merge(l,this.getDefaultOption()),t&&S.mergeLayoutParam(l,i,t)},mergeOption:function(l,e){L.merge(this.option,l,!0);var t=this.layoutMode;t&&S.mergeLayoutParam(this.option,l,t)},optionUpdated:function(l,e){},getDefaultOption:function(){var l=g(this);if(!l.defaultOption){for(var e=[],t=this.constructor;t;){var i=t.prototype.defaultOption;i&&e.push(i),t=t.superClass}for(var s={},a=e.length-1;a>=0;a--)s=L.merge(s,e[a],!0);l.defaultOption=s}return l.defaultOption},getReferringComponents:function(l){return this.ecModel.queryComponents({mainType:l,index:this.get(l+"Index",!0),id:this.get(l+"Id",!0)})}});D(u,{registerWhenExtend:!0}),k.enableSubTypeDefaulter(u),k.enableTopologicalTravel(u,function(l){var e=[];return L.each(u.getClassesByMainType(l),function(t){e=e.concat(t.prototype.dependencies||[])}),e=L.map(e,function(t){return E(t).main}),l!=="dataset"&&L.indexOf(e,"dataset")<=0&&e.unshift("dataset"),e}),L.mixin(u,_);var c=u;W.exports=c},17260:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=L.each,k=L.filter,O=L.map,D=L.isArray,E=L.indexOf,I=L.isObject,S=L.isString,_=L.createHashMap,g=L.assert,u=L.clone,c=L.merge,l=L.extend,e=L.mixin,t=T(32234),i=T(4272),s=T(98071),a=T(22577),o=T(23895),r=T(61772).resetSourceDefaulter,n=i.extend({init:function(v,m,y,x){y=y||{},this.option=null,this._theme=new i(y),this._optionManager=x},setOption:function(v,m){g(!("\0_ec_inner"in v),"please use chart.getOption()"),this._optionManager.setOption(v,m),this.resetOption(null)},resetOption:function(v){var m=!1,y=this._optionManager;if(!v||v==="recreate"){var x=y.mountOption(v==="recreate");this.option&&v!=="recreate"?(this.restoreData(),this.mergeOption(x)):h.call(this,x),m=!0}if(v!=="timeline"&&v!=="media"||this.restoreData(),!v||v==="recreate"||v==="timeline"){var w=y.getTimelineOption(this);w&&(this.mergeOption(w),m=!0)}if(!v||v==="recreate"||v==="media"){var M=y.getMediaOption(this,this._api);M.length&&R(M,function(C){this.mergeOption(C,m=!0)},this)}return m},mergeOption:function(v){var m=this.option,y=this._componentsMap,x=[];r(this),R(v,function(w,M){w!=null&&(s.hasClass(M)?M&&x.push(M):m[M]=m[M]==null?u(w):c(m[M],w,!0))}),s.topologicalTravel(x,s.getAllClassMainTypes(),function(w,M){var C=t.normalizeToArray(v[w]),A=t.mappingToExists(y.get(w),C);t.makeIdAndName(A),R(A,function(b,N){var B=b.option;I(B)&&(b.keyInfo.mainType=w,b.keyInfo.subType=function(z,F,V){return F.type?F.type:V?V.subType:s.determineSubType(z,F)}(w,B,b.exist))});var P=function(b,N){D(N)||(N=N?[N]:[]);var B={};return R(N,function(z){B[z]=(b.get(z)||[]).slice()}),B}(y,M);m[w]=[],y.set(w,[]),R(A,function(b,N){var B=b.exist,z=b.option;if(g(I(z)||B,"Empty component definition"),z){var F=s.getClass(w,b.keyInfo.subType,!0);if(B&&B.constructor===F)B.name=b.keyInfo.name,B.mergeOption(z,this),B.optionUpdated(z,!1);else{var V=l({dependentModels:P,componentIndex:N},b.keyInfo);B=new F(z,this,this,V),l(B,V),B.init(z,this,this,V),B.optionUpdated(null,!0)}}else B.mergeOption({},this),B.optionUpdated({},!1);y.get(w)[N]=B,m[w][N]=B.option},this),w==="series"&&p(this,y.get("series"))},this),this._seriesIndicesMap=_(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var v=u(this.option);return R(v,function(m,y){if(s.hasClass(y)){for(var x=(m=t.normalizeToArray(m)).length-1;x>=0;x--)t.isIdInner(m[x])&&m.splice(x,1);v[y]=m}}),delete v["\0_ec_inner"],v},getTheme:function(){return this._theme},getComponent:function(v,m){var y=this._componentsMap.get(v);if(y)return y[m||0]},queryComponents:function(v){var m=v.mainType;if(!m)return[];var y,x=v.index,w=v.id,M=v.name,C=this._componentsMap.get(m);if(!C||!C.length)return[];if(x!=null)D(x)||(x=[x]),y=k(O(x,function(b){return C[b]}),function(b){return!!b});else if(w!=null){var A=D(w);y=k(C,function(b){return A&&E(w,b.id)>=0||!A&&b.id===w})}else if(M!=null){var P=D(M);y=k(C,function(b){return P&&E(M,b.name)>=0||!P&&b.name===M})}else y=C.slice();return d(y,v)},findComponents:function(v){var m,y,x,w,M,C=v.query,A=v.mainType,P=(y=A+"Index",x=A+"Id",w=A+"Name",!(m=C)||m[y]==null&&m[x]==null&&m[w]==null?null:{mainType:A,index:m[y],id:m[x],name:m[w]});return M=d(P?this.queryComponents(P):this._componentsMap.get(A),v),v.filter?k(M,v.filter):M},eachComponent:function(v,m,y){var x=this._componentsMap;if(typeof v=="function")y=m,m=v,x.each(function(M,C){R(M,function(A,P){m.call(y,C,A,P)})});else if(S(v))R(x.get(v),m,y);else if(I(v)){var w=this.findComponents(v);R(w,m,y)}},getSeriesByName:function(v){var m=this._componentsMap.get("series");return k(m,function(y){return y.name===v})},getSeriesByIndex:function(v){return this._componentsMap.get("series")[v]},getSeriesByType:function(v){var m=this._componentsMap.get("series");return k(m,function(y){return y.subType===v})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(v,m){R(this._seriesIndices,function(y){var x=this._componentsMap.get("series")[y];v.call(m,x,y)},this)},eachRawSeries:function(v,m){R(this._componentsMap.get("series"),v,m)},eachSeriesByType:function(v,m,y){R(this._seriesIndices,function(x){var w=this._componentsMap.get("series")[x];w.subType===v&&m.call(y,w,x)},this)},eachRawSeriesByType:function(v,m,y){return R(this.getSeriesByType(v),m,y)},isSeriesFiltered:function(v){return this._seriesIndicesMap.get(v.componentIndex)==null},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(v,m){p(this,k(this._componentsMap.get("series"),v,m))},restoreData:function(v){var m=this._componentsMap;p(this,m.get("series"));var y=[];m.each(function(x,w){y.push(w)}),s.topologicalTravel(y,s.getAllClassMainTypes(),function(x,w){R(m.get(x),function(M){(x!=="series"||!function(C,A){if(A){var P=A.seiresIndex,b=A.seriesId,N=A.seriesName;return P!=null&&C.componentIndex!==P||b!=null&&C.id!==b||N!=null&&C.name!==N}}(M,v))&&M.restoreData()})})}});function h(v){var m,y,x;this.option={},this.option["\0_ec_inner"]=1,this._componentsMap=_({series:[]}),this._seriesIndices,this._seriesIndicesMap,m=v,y=this._theme.option,x=m.color&&!m.colorLayer,R(y,function(w,M){M==="colorLayer"&&x||s.hasClass(M)||(typeof w=="object"?m[M]=m[M]?c(m[M],w,!1):u(w):m[M]==null&&(m[M]=w))}),c(v,a,!1),this.mergeOption(v)}function p(v,m){v._seriesIndicesMap=_(v._seriesIndices=O(m,function(y){return y.componentIndex})||[])}function d(v,m){return m.hasOwnProperty("subType")?k(v,function(y){return y.subType===m.subType}):v}e(n,o);var f=n;W.exports=f},4272:(W,G,T)=>{var L=T(33051),R=T(66387),k=T(32234).makeInner,O=T(34251),D=O.enableClassExtend,E=O.enableClassCheck,I=T(77515),S=T(7308),_=T(7501),g=T(89887),u=L.mixin,c=k();function l(s,a,o){this.parentModel=a,this.ecModel=o,this.option=s}function e(s,a,o){for(var r=0;r<a.length&&(!a[r]||(s=s&&typeof s=="object"?s[a[r]]:null)!=null);r++);return s==null&&o&&(s=o.get(a)),s}function t(s,a){var o=c(s).getParent;return o?o.call(s,a):s.parentModel}l.prototype={constructor:l,init:null,mergeOption:function(s){L.merge(this.option,s,!0)},get:function(s,a){return s==null?this.option:e(this.option,this.parsePath(s),!a&&t(this,s))},getShallow:function(s,a){var o=this.option,r=o==null?o:o[s],n=!a&&t(this,s);return r==null&&n&&(r=n.getShallow(s)),r},getModel:function(s,a){var o;return new l(s==null?this.option:e(this.option,s=this.parsePath(s)),a=a||(o=t(this,s))&&o.getModel(s),this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){return new this.constructor(L.clone(this.option))},setReadOnly:function(s){},parsePath:function(s){return typeof s=="string"&&(s=s.split(".")),s},customizeGetParent:function(s){c(this).getParent=s},isAnimationEnabled:function(){if(!R.node){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},D(l),E(l),u(l,I),u(l,S),u(l,_),u(l,g);var i=l;W.exports=i},43534:(W,G,T)=>{var L=T(33051),R=T(32234),k=T(98071),O=L.each,D=L.clone,E=L.map,I=L.merge,S=/^(min|max)?(.+)$/;function _(l){this._api=l,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function g(l,e,t){var i,s,a=[],o=[],r=l.timeline;if(l.baseOption&&(s=l.baseOption),(r||l.options)&&(s=s||{},a=(l.options||[]).slice()),l.media){s=s||{};var n=l.media;O(n,function(h){h&&h.option&&(h.query?o.push(h):i||(i=h))})}return s||(s=l),s.timeline||(s.timeline=r),O([s].concat(a).concat(L.map(o,function(h){return h.option})),function(h){O(e,function(p){p(h,t)})}),{baseOption:s,timelineOptions:a,mediaDefault:i,mediaList:o}}function u(l,e,t){var i={width:e,height:t,aspectratio:e/t},s=!0;return L.each(l,function(a,o){var r=o.match(S);if(r&&r[1]&&r[2]){var n=r[1],h=r[2].toLowerCase();(function(p,d,f){return f==="min"?p>=d:f==="max"?p<=d:p===d})(i[h],a,n)||(s=!1)}}),s}_.prototype={constructor:_,setOption:function(l,e){l&&L.each(R.normalizeToArray(l.series),function(o){o&&o.data&&L.isTypedArray(o.data)&&L.setAsPrimitive(o.data)}),l=D(l);var t,i,s=this._optionBackup,a=g.call(this,l,e,!s);this._newBaseOption=a.baseOption,s?(t=s.baseOption,i=a.baseOption,O(i=i||{},function(o,r){if(o!=null){var n=t[r];if(k.hasClass(r)){o=R.normalizeToArray(o),n=R.normalizeToArray(n);var h=R.mappingToExists(n,o);t[r]=E(h,function(p){return p.option&&p.exist?I(p.exist,p.option,!0):p.exist||p.option})}else t[r]=I(n,o,!0)}}),a.timelineOptions.length&&(s.timelineOptions=a.timelineOptions),a.mediaList.length&&(s.mediaList=a.mediaList),a.mediaDefault&&(s.mediaDefault=a.mediaDefault)):this._optionBackup=a},mountOption:function(l){var e=this._optionBackup;return this._timelineOptions=E(e.timelineOptions,D),this._mediaList=E(e.mediaList,D),this._mediaDefault=D(e.mediaDefault),this._currentMediaIndices=[],D(l?e.baseOption:this._newBaseOption)},getTimelineOption:function(l){var e,t=this._timelineOptions;if(t.length){var i=l.getComponent("timeline");i&&(e=D(t[i.getCurrentIndex()],!0))}return e},getMediaOption:function(l){var e,t,i=this._api.getWidth(),s=this._api.getHeight(),a=this._mediaList,o=this._mediaDefault,r=[],n=[];if(!a.length&&!o)return n;for(var h=0,p=a.length;h<p;h++)u(a[h].query,i,s)&&r.push(h);return!r.length&&o&&(r=[-1]),r.length&&(e=r,t=this._currentMediaIndices,e.join(",")!==t.join(","))&&(n=E(r,function(d){return D(d===-1?o.option:a[d].option)})),this._currentMediaIndices=r,n}};var c=_;W.exports=c},93321:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=T(66387),k=T(78988),O=k.formatTime,D=k.encodeHTML,E=k.addCommas,I=k.getTooltipMarker,S=T(32234),_=T(98071),g=T(23895),u=T(61219),c=T(76172),l=c.getLayoutParams,e=c.mergeLayoutParam,t=T(29449).createTask,i=T(61772),s=i.prepareSource,a=i.getSource,o=T(68540).retrieveRawValue,r=S.makeInner(),n=_.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(w,M,C,A){this.seriesIndex=this.componentIndex,this.dataTask=t({count:p,reset:d}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(w,C),s(this);var P=this.getInitialData(w,C);v(P,this),this.dataTask.context.data=P,r(this).dataBeforeProcessed=P,h(this)},mergeDefaultAndTheme:function(w,M){var C=this.layoutMode,A=C?l(w):{},P=this.subType;_.hasClass(P)&&(P+="Series"),L.merge(w,M.getTheme().get(this.subType)),L.merge(w,this.getDefaultOption()),S.defaultEmphasis(w,"label",["show"]),this.fillDataTextStyle(w.data),C&&e(w,A,C)},mergeOption:function(w,M){w=L.merge(this.option,w,!0),this.fillDataTextStyle(w.data);var C=this.layoutMode;C&&e(this.option,w,C),s(this);var A=this.getInitialData(w,M);v(A,this),this.dataTask.dirty(),this.dataTask.context.data=A,r(this).dataBeforeProcessed=A,h(this)},fillDataTextStyle:function(w){if(w&&!L.isTypedArray(w))for(var M=["show"],C=0;C<w.length;C++)w[C]&&w[C].label&&S.defaultEmphasis(w[C],"label",M)},getInitialData:function(){},appendData:function(w){this.getRawData().appendData(w.data)},getData:function(w){var M=y(this);if(M){var C=M.context.data;return w==null?C:C.getLinkedData(w)}return r(this).data},setData:function(w){var M=y(this);if(M){var C=M.context;C.data!==w&&M.modifyOutputEnd&&M.setOutputEnd(w.count()),C.outputData=w,M!==this.dataTask&&(C.data=w)}r(this).data=w},getSource:function(){return a(this)},getRawData:function(){return r(this).dataBeforeProcessed},getBaseAxis:function(){var w=this.coordinateSystem;return w&&w.getBaseAxis&&w.getBaseAxis()},formatTooltip:function(w,M,C,A){var P=this,b=(A=A||"html")==="html"?"<br/>":`
`,N=A==="richText",B={},z=0,F=this.getData(),V=F.mapDimension("defaultedTooltip",!0),H=V.length,U=this.getRawValue(w),j=L.isArray(U),X=F.getItemVisual(w,"color");L.isObject(X)&&X.colorStops&&(X=(X.colorStops[0]||{}).color),X=X||"transparent";var Y,J=H>1||j&&!H?function(rt){var et=L.reduce(rt,function(vt,yt,gt){var pt=F.getDimensionInfo(gt);return vt|(pt&&pt.tooltip!==!1&&pt.displayName!=null)},0),it=[];function ot(vt,yt){var gt=F.getDimensionInfo(yt);if(gt&&gt.otherDims.tooltip!==!1){var pt=gt.type,bt="sub"+P.seriesIndex+"at"+z,mt=I({color:X,type:"subItem",renderMode:A,markerId:bt}),nt=typeof mt=="string"?mt:mt.content,lt=(et?nt+D(gt.displayName||"-")+": ":"")+D(pt==="ordinal"?vt+"":pt==="time"?M?"":O("yyyy/MM/dd hh:mm:ss",vt):E(vt));lt&&it.push(lt),N&&(B[bt]=X,++z)}}V.length?L.each(V,function(vt){ot(o(F,w,vt),vt)}):L.each(rt,ot);var st=et?N?`
`:"<br/>":"",at=st+it.join(st||", ");return{renderMode:A,content:at,style:B}}(U):(Y=H?o(F,w,V[0]):j?U[0]:U,{renderMode:A,content:D(E(Y)),style:B}),K=J.content,Q=P.seriesIndex+"at"+z,Z=I({color:X,type:"item",renderMode:A,markerId:Q});B[Q]=X,++z;var q=F.getName(w),tt=this.name;S.isNameSpecified(this)||(tt=""),tt=tt?D(tt)+(M?": ":b):"";var $=typeof Z=="string"?Z:Z.content;return{html:M?$+tt+K:tt+$+(q?D(q)+": "+K:K),markers:B}},isAnimationEnabled:function(){if(R.node)return!1;var w=this.getShallow("animation");return w&&this.getData().count()>this.getShallow("animationThreshold")&&(w=!1),w},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(w,M,C){var A=this.ecModel,P=g.getColorFromPalette.call(this,w,M,C);return P||(P=A.getColorFromPalette(w,M,C)),P},coordDimToDataDim:function(w){return this.getRawData().mapDimension(w,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function h(w){var M=w.name;S.isNameSpecified(w)||(w.name=function(C){var A=C.getRawData(),P=A.mapDimension("seriesName",!0),b=[];return L.each(P,function(N){var B=A.getDimensionInfo(N);B.displayName&&b.push(B.displayName)}),b.join(" ")}(w)||M)}function p(w){return w.model.getRawData().count()}function d(w){var M=w.model;return M.setData(M.getRawData().cloneShallow()),f}function f(w,M){M.outputData&&w.end>M.outputData.count()&&M.model.getRawData().cloneShallow(M.outputData)}function v(w,M){L.each(w.CHANGABLE_METHODS,function(C){w.wrapMethod(C,L.curry(m,M))})}function m(w){var M=y(w);M&&M.setOutputEnd(this.count())}function y(w){var M=(w.ecModel||{}).scheduler,C=M&&M.getPipeline(w.uid);if(C){var A=C.currentTask;if(A){var P=A.agentStubMap;P&&(A=P.get(w.uid))}return A}}L.mixin(n,u),L.mixin(n,g);var x=n;W.exports=x},22577:W=>{var G="";typeof navigator<"u"&&(G=navigator.platform||"");var T={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:G.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};W.exports=T},7308:(W,G,T)=>{var L=T(59066)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),R={getAreaStyle:function(k,O){return L(this,k,O)}};W.exports=R},83047:W=>{W.exports={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}}},23895:(W,G,T)=>{var L=T(32234),R=L.makeInner,k=L.normalizeToArray,O=R(),D={clearColorPalette:function(){O(this).colorIdx=0,O(this).colorNameMap={}},getColorFromPalette:function(E,I,S){var _=O(I=I||this),g=_.colorIdx||0,u=_.colorNameMap=_.colorNameMap||{};if(u.hasOwnProperty(E))return u[E];var c=k(this.get("color",!0)),l=this.get("colorLayer",!0),e=S!=null&&l?function(i,s){for(var a=i.length,o=0;o<a;o++)if(i[o].length>s)return i[o];return i[a-1]}(l,S):c;if((e=e||c)&&e.length){var t=e[g];return E&&(u[E]=t),_.colorIdx=(g+1)%e.length,t}}};W.exports=D},61219:(W,G,T)=>{var L=T(68540).retrieveRawValue,R=T(78988),k=R.getTooltipMarker,O=R.formatTpl,D=T(32234).getTooltipRenderMode,E=/\{@(.+?)\}/g,I={getDataParams:function(S,_){var g=this.getData(_),u=this.getRawValue(S,_),c=g.getRawIndex(S),l=g.getName(S),e=g.getRawDataItem(S),t=g.getItemVisual(S,"color"),i=g.getItemVisual(S,"borderColor"),s=this.ecModel.getComponent("tooltip"),a=s&&s.get("renderMode"),o=D(a),r=this.mainType,n=r==="series",h=g.userOutput;return{componentType:r,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:n?this.subType:null,seriesIndex:this.seriesIndex,seriesId:n?this.id:null,seriesName:n?this.name:null,name:l,dataIndex:c,data:e,dataType:_,value:u,color:t,borderColor:i,dimensionNames:h?h.dimensionNames:null,encode:h?h.encode:null,marker:k({color:t,renderMode:o}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(S,_,g,u,c){_=_||"normal";var l=this.getData(g),e=l.getItemModel(S),t=this.getDataParams(S,g);u!=null&&t.value instanceof Array&&(t.value=t.value[u]);var i=e.get(_==="normal"?[c||"label","formatter"]:[_,c||"label","formatter"]);return typeof i=="function"?(t.status=_,t.dimensionIndex=u,i(t)):typeof i=="string"?O(i,t).replace(E,function(s,a){var o=a.length;return a.charAt(0)==="["&&a.charAt(o-1)==="]"&&(a=+a.slice(1,o-1)),L(l,S,a)}):void 0},getRawValue:function(S,_){return L(this.getData(_),S)},formatTooltip:function(){}};W.exports=I},89887:(W,G,T)=>{var L=T(59066)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),R={getItemStyle:function(k,O){var D=L(this,k,O),E=this.getBorderLineDash();return E&&(D.lineDash=E),D},getBorderLineDash:function(){var k=this.get("borderType");return k==="solid"||k==null?null:k==="dashed"?[5,5]:[1,1]}};W.exports=R},77515:(W,G,T)=>{var L=T(59066)([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),R={getLineStyle:function(k){var O=L(this,k);return O.lineDash=this.getLineDash(O.lineWidth),O},getLineDash:function(k){k==null&&(k=1);var O=this.get("type"),D=Math.max(k,2),E=4*k;return O!=="solid"&&O!=null&&(O==="dashed"?[E,E]:[D,D])}};W.exports=R},59066:(W,G,T)=>{var L=T(33051);W.exports=function(R){for(var k=0;k<R.length;k++)R[k][1]||(R[k][1]=R[k][0]);return function(O,D,E){for(var I={},S=0;S<R.length;S++){var _=R[S][1];if(!(D&&L.indexOf(D,_)>=0||E&&L.indexOf(E,_)<0)){var g=O.getShallow(_);g!=null&&(I[R[S][0]]=g)}}return I}}},7501:(W,G,T)=>{var L=T(80423),R=T(51177),k=["textStyle","color"],O={getTextColor:function(D){var E=this.ecModel;return this.getShallow("color")||(!D&&E?E.get(k):null)},getFont:function(){return R.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(D){return L.getBoundingRect(D,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}};W.exports=O},32702:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R=L.createHashMap,k=(L.retrieve,L.each);function O(I){this.coordSysName=I,this.coordSysDims=[],this.axisMap=R(),this.categoryAxisMap=R(),this.firstCategoryDimIndex=null}var D={cartesian2d:function(I,S,_,g){var u=I.getReferringComponents("xAxis")[0],c=I.getReferringComponents("yAxis")[0];S.coordSysDims=["x","y"],_.set("x",u),_.set("y",c),E(u)&&(g.set("x",u),S.firstCategoryDimIndex=0),E(c)&&(g.set("y",c),S.firstCategoryDimIndex,S.firstCategoryDimIndex=1)},singleAxis:function(I,S,_,g){var u=I.getReferringComponents("singleAxis")[0];S.coordSysDims=["single"],_.set("single",u),E(u)&&(g.set("single",u),S.firstCategoryDimIndex=0)},polar:function(I,S,_,g){var u=I.getReferringComponents("polar")[0],c=u.findAxisModel("radiusAxis"),l=u.findAxisModel("angleAxis");S.coordSysDims=["radius","angle"],_.set("radius",c),_.set("angle",l),E(c)&&(g.set("radius",c),S.firstCategoryDimIndex=0),E(l)&&(g.set("angle",l),S.firstCategoryDimIndex==null&&(S.firstCategoryDimIndex=1))},geo:function(I,S,_,g){S.coordSysDims=["lng","lat"]},parallel:function(I,S,_,g){var u=I.ecModel,c=u.getComponent("parallel",I.get("parallelIndex")),l=S.coordSysDims=c.dimensions.slice();k(c.parallelAxisIndex,function(e,t){var i=u.getComponent("parallelAxis",e),s=l[t];_.set(s,i),E(i)&&S.firstCategoryDimIndex==null&&(g.set(s,i),S.firstCategoryDimIndex=t)})}};function E(I){return I.get("type")==="category"}G.getCoordSysInfoBySeries=function(I){var S=I.get("coordinateSystem"),_=new O(S),g=D[S];if(g)return g(I,_,_.axisMap,_.categoryAxisMap),_}},70141:(W,G,T)=>{var L=T(33051),R=L.each,k=L.isArray,O=L.isObject,D=T(4583),E=T(32234).normalizeToArray;function I(g){R(S,function(u){u[0]in g&&!(u[1]in g)&&(g[u[1]]=g[u[0]])})}var S=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],_=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];W.exports=function(g,u){D(g,u),g.series=E(g.series),R(g.series,function(c){if(O(c)){var l=c.type;if(l==="line")c.clipOverflow!=null&&(c.clip=c.clipOverflow);else if(l==="pie"||l==="gauge")c.clockWise!=null&&(c.clockwise=c.clockWise);else if(l==="gauge"){var e=function(t,i){i=i.split(",");for(var s=t,a=0;a<i.length&&(s=s&&s[i[a]])!=null;a++);return s}(c,"pointer.color");e!=null&&function(t,i,s,a){i=i.split(",");for(var o,r=t,n=0;n<i.length-1;n++)r[o=i[n]]==null&&(r[o]={}),r=r[o];r[i[n]]==null&&(r[i[n]]=s)}(c,"itemStyle.color",e)}I(c)}}),g.dataRange&&(g.visualMap=g.dataRange),R(_,function(c){var l=g[c];l&&(k(l)||(l=[l]),R(l,function(e){I(e)}))})}},4583:(W,G,T)=>{var L=T(33051),R=T(32234),k=L.each,O=L.isObject,D=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function E(l){var e=l&&l.itemStyle;if(e)for(var t=0,i=D.length;t<i;t++){var s=D[t],a=e.normal,o=e.emphasis;a&&a[s]&&(l[s]=l[s]||{},l[s].normal?L.merge(l[s].normal,a[s]):l[s].normal=a[s],a[s]=null),o&&o[s]&&(l[s]=l[s]||{},l[s].emphasis?L.merge(l[s].emphasis,o[s]):l[s].emphasis=o[s],o[s]=null)}}function I(l,e,t){if(l&&l[e]&&(l[e].normal||l[e].emphasis)){var i=l[e].normal,s=l[e].emphasis;i&&(t?(l[e].normal=l[e].emphasis=null,L.defaults(l[e],i)):l[e]=i),s&&(l.emphasis=l.emphasis||{},l.emphasis[e]=s)}}function S(l){I(l,"itemStyle"),I(l,"lineStyle"),I(l,"areaStyle"),I(l,"label"),I(l,"labelLine"),I(l,"upperLabel"),I(l,"edgeLabel")}function _(l,e){var t=O(l)&&l[e],i=O(t)&&t.textStyle;if(i)for(var s=0,a=R.TEXT_STYLE_OPTIONS.length;s<a;s++)e=R.TEXT_STYLE_OPTIONS[s],i.hasOwnProperty(e)&&(t[e]=i[e])}function g(l){l&&(S(l),_(l,"label"),l.emphasis&&_(l.emphasis,"label"))}function u(l){return L.isArray(l)?l:l?[l]:[]}function c(l){return(L.isArray(l)?l[0]:l)||{}}W.exports=function(l,e){k(u(l.series),function(i){O(i)&&function(s){if(O(s)){E(s),S(s),_(s,"label"),_(s,"upperLabel"),_(s,"edgeLabel"),s.emphasis&&(_(s.emphasis,"label"),_(s.emphasis,"upperLabel"),_(s.emphasis,"edgeLabel")),(o=s.markPoint)&&(E(o),g(o)),(r=s.markLine)&&(E(r),g(r));var a=s.markArea;a&&g(a);var o,r,n=s.data;if(s.type==="graph"){n=n||s.nodes;var h=s.links||s.edges;if(h&&!L.isTypedArray(h))for(var p=0;p<h.length;p++)g(h[p]);L.each(s.categories,function(v){S(v)})}if(n&&!L.isTypedArray(n))for(p=0;p<n.length;p++)g(n[p]);if((o=s.markPoint)&&o.data){var d=o.data;for(p=0;p<d.length;p++)g(d[p])}if((r=s.markLine)&&r.data){var f=r.data;for(p=0;p<f.length;p++)L.isArray(f[p])?(g(f[p][0]),g(f[p][1])):g(f[p])}s.type==="gauge"?(_(s,"axisLabel"),_(s,"title"),_(s,"detail")):s.type==="treemap"?(I(s.breadcrumb,"itemStyle"),L.each(s.levels,function(v){S(v)})):s.type==="tree"&&S(s.leaves)}}(i)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),k(t,function(i){k(u(l[i]),function(s){s&&(_(s,"axisLabel"),_(s.axisPointer,"label"))})}),k(u(l.parallel),function(i){var s=i&&i.parallelAxisDefault;_(s,"axisLabel"),_(s&&s.axisPointer,"label")}),k(u(l.calendar),function(i){I(i,"itemStyle"),_(i,"dayLabel"),_(i,"monthLabel"),_(i,"yearLabel")}),k(u(l.radar),function(i){_(i,"name")}),k(u(l.geo),function(i){O(i)&&(g(i),k(u(i.regions),function(s){g(s)}))}),k(u(l.timeline),function(i){g(i),I(i,"label"),I(i,"itemStyle"),I(i,"controlStyle",!0);var s=i.data;L.isArray(s)&&L.each(s,function(a){L.isObject(a)&&(I(a,"label"),I(a,"itemStyle"))})}),k(u(l.toolbox),function(i){I(i,"iconStyle"),k(i.feature,function(s){I(s,"iconStyle")})}),_(c(l.axisPointer),"label"),_(c(l.tooltip).axisPointer,"label")}},22528:W=>{W.exports=function(G){return{seriesType:G,reset:function(T,L){var R=L.findComponents({mainType:"legend"});if(R&&R.length){var k=T.getData();k.filterSelf(function(O){for(var D=k.getName(O),E=0;E<R.length;E++)if(!R[E].isSelected(D))return!1;return!0})}}}}},64088:W=>{var G={average:function(L){for(var R=0,k=0,O=0;O<L.length;O++)isNaN(L[O])||(R+=L[O],k++);return k===0?NaN:R/k},sum:function(L){for(var R=0,k=0;k<L.length;k++)R+=L[k]||0;return R},max:function(L){for(var R=-1/0,k=0;k<L.length;k++)L[k]>R&&(R=L[k]);return isFinite(R)?R:NaN},min:function(L){for(var R=1/0,k=0;k<L.length;k++)L[k]<R&&(R=L[k]);return isFinite(R)?R:NaN},nearest:function(L){return L[0]}},T=function(L,R){return Math.round(L.length/2)};W.exports=function(L){return{seriesType:L,modifyOutputEnd:!0,reset:function(R,k,O){var D=R.getData(),E=R.get("sampling"),I=R.coordinateSystem;if(I.type==="cartesian2d"&&E){var S,_=I.getBaseAxis(),g=I.getOtherAxis(_),u=_.getExtent(),c=Math.abs(u[1]-u[0]),l=Math.round(D.count()/c);l>1&&(typeof E=="string"?S=G[E]:typeof E=="function"&&(S=E),S&&R.setData(D.downSample(D.mapDimension(g.dim),1/l,S,T)))}}}}},33809:(W,G,T)=>{var L=T(33051),R=L.createHashMap,k=L.each;function O(D){k(D,function(E,I){var S=[],_=[NaN,NaN],g=[E.stackResultDimension,E.stackedOverDimension],u=E.data,c=E.isStackedByIndex,l=u.map(g,function(e,t,i){var s,a,o=u.get(E.stackedDimension,i);if(isNaN(o))return _;c?a=u.getRawIndex(i):s=u.get(E.stackedByDimension,i);for(var r=NaN,n=I-1;n>=0;n--){var h=D[n];if(c||(a=h.data.rawIndexOf(h.stackedByDimension,s)),a>=0){var p=h.data.getByRawIndex(h.stackResultDimension,a);if(o>=0&&p>0||o<=0&&p<0){o+=p,r=p;break}}}return S[0]=o,S[1]=r,S});u.hostModel.setData(l),E.data=l})}W.exports=function(D){var E=R();D.eachSeries(function(I){var S=I.get("stack");if(S){var _=E.get(S)||E.set(S,[]),g=I.getData(),u={stackResultDimension:g.getCalculationInfo("stackResultDimension"),stackedOverDimension:g.getCalculationInfo("stackedOverDimension"),stackedDimension:g.getCalculationInfo("stackedDimension"),stackedByDimension:g.getCalculationInfo("stackedByDimension"),isStackedByIndex:g.getCalculationInfo("isStackedByIndex"),data:g,seriesModel:I};if(!u.stackedDimension||!u.isStackedByIndex&&!u.stackedByDimension)return;_.length&&g.setCalculationInfo("stackedOnSeries",_[_.length-1].seriesModel),_.push(u)}}),E.each(O)}},70103:(W,G,T)=>{var L=T(85669),R=T(78988),k=T(60379),O=T(65021),D=L.round,E=k.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(S,_){var g=this._extent;isNaN(S)||(g[0]=parseFloat(S)),isNaN(_)||(g[1]=parseFloat(_))},unionExtent:function(S){var _=this._extent;S[0]<_[0]&&(_[0]=S[0]),S[1]>_[1]&&(_[1]=S[1]),E.prototype.setExtent.call(this,_[0],_[1])},getInterval:function(){return this._interval},setInterval:function(S){this._interval=S,this._niceExtent=this._extent.slice(),this._intervalPrecision=O.getIntervalPrecision(S)},getTicks:function(S){var _=this._interval,g=this._extent,u=this._niceExtent,c=this._intervalPrecision,l=[];if(!_)return l;g[0]<u[0]&&(S?l.push(D(u[0]-_,c)):l.push(g[0]));for(var e=u[0];e<=u[1]&&(l.push(e),(e=D(e+_,c))!==l[l.length-1]);)if(l.length>1e4)return[];var t=l.length?l[l.length-1]:u[1];return g[1]>t&&(S?l.push(D(t+_,c)):l.push(g[1])),l},getMinorTicks:function(S){for(var _=this.getTicks(!0),g=[],u=this.getExtent(),c=1;c<_.length;c++){for(var l=_[c],e=_[c-1],t=0,i=[],s=(l-e)/S;t<S-1;){var a=L.round(e+(t+1)*s);a>u[0]&&a<u[1]&&i.push(a),t++}g.push(i)}return g},getLabel:function(S,_){if(S==null)return"";var g=_&&_.precision;return g==null?g=L.getPrecisionSafe(S)||0:g==="auto"&&(g=this._intervalPrecision),S=D(S,g,!0),R.addCommas(S)},niceTicks:function(S,_,g){S=S||5;var u=this._extent,c=u[1]-u[0];if(isFinite(c)){c<0&&(c=-c,u.reverse());var l=O.intervalScaleNiceTicks(u,S,_,g);this._intervalPrecision=l.intervalPrecision,this._interval=l.interval,this._niceExtent=l.niceTickExtent}},niceExtent:function(S){var _=this._extent;if(_[0]===_[1])if(_[0]!==0){var g=_[0];S.fixMax||(_[1]+=g/2),_[0]-=g/2}else _[1]=1;var u=_[1]-_[0];isFinite(u)||(_[0]=0,_[1]=1),this.niceTicks(S.splitNumber,S.minInterval,S.maxInterval);var c=this._interval;S.fixMin||(_[0]=D(Math.floor(_[0]/c)*c)),S.fixMax||(_[1]=D(Math.ceil(_[1]/c)*c))}});E.create=function(){return new E};var I=E;W.exports=I},76304:(W,G,T)=>{var L=T(33051),R=T(60379),k=T(85669),O=T(70103),D=R.prototype,E=O.prototype,I=k.getPrecisionSafe,S=k.round,_=Math.floor,g=Math.ceil,u=Math.pow,c=Math.log,l=R.extend({type:"log",base:10,$constructor:function(){R.apply(this,arguments),this._originalScale=new O},getTicks:function(i){var s=this._originalScale,a=this._extent,o=s.getExtent();return L.map(E.getTicks.call(this,i),function(r){var n=k.round(u(this.base,r));return n=r===a[0]&&s.__fixMin?e(n,o[0]):n,r===a[1]&&s.__fixMax?e(n,o[1]):n},this)},getMinorTicks:E.getMinorTicks,getLabel:E.getLabel,scale:function(i){return i=D.scale.call(this,i),u(this.base,i)},setExtent:function(i,s){var a=this.base;i=c(i)/c(a),s=c(s)/c(a),E.setExtent.call(this,i,s)},getExtent:function(){var i=this.base,s=D.getExtent.call(this);s[0]=u(i,s[0]),s[1]=u(i,s[1]);var a=this._originalScale,o=a.getExtent();return a.__fixMin&&(s[0]=e(s[0],o[0])),a.__fixMax&&(s[1]=e(s[1],o[1])),s},unionExtent:function(i){this._originalScale.unionExtent(i);var s=this.base;i[0]=c(i[0])/c(s),i[1]=c(i[1])/c(s),D.unionExtent.call(this,i)},unionExtentFromData:function(i,s){this.unionExtent(i.getApproximateExtent(s))},niceTicks:function(i){i=i||10;var s=this._extent,a=s[1]-s[0];if(!(a===1/0||a<=0)){var o=k.quantity(a);for(i/a*o<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var r=[k.round(g(s[0]/o)*o),k.round(_(s[1]/o)*o)];this._interval=o,this._niceExtent=r}},niceExtent:function(i){E.niceExtent.call(this,i);var s=this._originalScale;s.__fixMin=i.fixMin,s.__fixMax=i.fixMax}});function e(i,s){return S(i,I(s))}L.each(["contain","normalize"],function(i){l.prototype[i]=function(s){return s=c(s)/c(this.base),D[i].call(this,s)}}),l.create=function(){return new l};var t=l;W.exports=t},85043:(W,G,T)=>{var L=T(33051),R=T(60379),k=T(51401),O=R.prototype,D=R.extend({type:"ordinal",init:function(I,S){I&&!L.isArray(I)||(I=new k({categories:I})),this._ordinalMeta=I,this._extent=S||[0,I.categories.length-1]},parse:function(I){return typeof I=="string"?this._ordinalMeta.getOrdinal(I):Math.round(I)},contain:function(I){return I=this.parse(I),O.contain.call(this,I)&&this._ordinalMeta.categories[I]!=null},normalize:function(I){return O.normalize.call(this,this.parse(I))},scale:function(I){return Math.round(O.scale.call(this,I))},getTicks:function(){for(var I=[],S=this._extent,_=S[0];_<=S[1];)I.push(_),_++;return I},getLabel:function(I){if(!this.isBlank())return this._ordinalMeta.categories[I]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(I,S){this.unionExtent(I.getApproximateExtent(S))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:L.noop,niceExtent:L.noop});D.create=function(){return new D};var E=D;W.exports=E},60379:(W,G,T)=>{var L=T(34251);function R(O){this._setting=O||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}R.prototype.parse=function(O){return O},R.prototype.getSetting=function(O){return this._setting[O]},R.prototype.contain=function(O){var D=this._extent;return O>=D[0]&&O<=D[1]},R.prototype.normalize=function(O){var D=this._extent;return D[1]===D[0]?.5:(O-D[0])/(D[1]-D[0])},R.prototype.scale=function(O){var D=this._extent;return O*(D[1]-D[0])+D[0]},R.prototype.unionExtent=function(O){var D=this._extent;O[0]<D[0]&&(D[0]=O[0]),O[1]>D[1]&&(D[1]=O[1])},R.prototype.unionExtentFromData=function(O,D){this.unionExtent(O.getApproximateExtent(D))},R.prototype.getExtent=function(){return this._extent.slice()},R.prototype.setExtent=function(O,D){var E=this._extent;isNaN(O)||(E[0]=O),isNaN(D)||(E[1]=D)},R.prototype.isBlank=function(){return this._isBlank},R.prototype.setBlank=function(O){this._isBlank=O},R.prototype.getLabel=null,L.enableClassExtend(R),L.enableClassManagement(R,{registerWhenExtend:!0});var k=R;W.exports=k},61618:(W,G,T)=>{var L=T(33051),R=T(85669),k=T(78988),O=T(65021),D=T(70103),E=D.prototype,I=Math.ceil,S=Math.floor,_=864e5,g=D.extend({type:"time",getLabel:function(l){var e=this._stepLvl,t=new Date(l);return k.formatTime(e[0],t,this.getSetting("useUTC"))},niceExtent:function(l){var e=this._extent;if(e[0]===e[1]&&(e[0]-=_,e[1]+=_),e[1]===-1/0&&e[0]===1/0){var t=new Date;e[1]=+new Date(t.getFullYear(),t.getMonth(),t.getDate()),e[0]=e[1]-_}this.niceTicks(l.splitNumber,l.minInterval,l.maxInterval);var i=this._interval;l.fixMin||(e[0]=R.round(S(e[0]/i)*i)),l.fixMax||(e[1]=R.round(I(e[1]/i)*i))},niceTicks:function(l,e,t){l=l||10;var i=this._extent,s=i[1]-i[0],a=s/l;e!=null&&a<e&&(a=e),t!=null&&a>t&&(a=t);var o=u.length,r=function(v,m,y,x){for(;y<x;){var w=y+x>>>1;v[w][1]<m?y=w+1:x=w}return y}(u,a,0,o),n=u[Math.min(r,o-1)],h=n[1];if(n[0]==="year"){var p=s/h;h*=R.nice(p/l,!0)}var d=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,f=[Math.round(I((i[0]-d)/h)*h+d),Math.round(S((i[1]-d)/h)*h+d)];O.fixExtent(f,i),this._stepLvl=n,this._interval=h,this._niceExtent=f},parse:function(l){return+R.parseDate(l)}});L.each(["contain","normalize"],function(l){g.prototype[l]=function(e){return E[l].call(this,this.parse(e))}});var u=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],[`hh:mm
MM-dd`,6e4],[`hh:mm
MM-dd`,3e5],[`hh:mm
MM-dd`,6e5],[`hh:mm
MM-dd`,9e5],[`hh:mm
MM-dd`,18e5],[`hh:mm
MM-dd`,36e5],[`hh:mm
MM-dd`,72e5],[`hh:mm
MM-dd`,216e5],[`hh:mm
MM-dd`,432e5],[`MM-dd
yyyy`,_],[`MM-dd
yyyy`,1728e5],[`MM-dd
yyyy`,2592e5],[`MM-dd
yyyy`,3456e5],[`MM-dd
yyyy`,432e6],[`MM-dd
yyyy`,5184e5],["week",6048e5],[`MM-dd
yyyy`,864e6],["week",12096e5],["week",18144e5],["month",26784e5],["week",36288e5],["month",53568e5],["week",6048e6],["quarter",8208e6],["month",107136e5],["month",13392e6],["half-year",16416e6],["month",214272e5],["month",26784e6],["year",32832e6]];g.create=function(l){return new g({useUTC:l.ecModel.get("useUTC")})};var c=g;W.exports=c},65021:(W,G,T)=>{var L=T(85669),R=L.round;function k(E){return L.getPrecisionSafe(E)+2}function O(E,I,S){E[I]=Math.max(Math.min(E[I],S[1]),S[0])}function D(E,I){!isFinite(E[0])&&(E[0]=I[0]),!isFinite(E[1])&&(E[1]=I[1]),O(E,0,I),O(E,1,I),E[0]>E[1]&&(E[0]=E[1])}G.intervalScaleNiceTicks=function(E,I,S,_){var g={},u=E[1]-E[0],c=g.interval=L.nice(u/I,!0);S!=null&&c<S&&(c=g.interval=S),_!=null&&c>_&&(c=g.interval=_);var l=g.intervalPrecision=k(c);return D(g.niceTickExtent=[R(Math.ceil(E[0]/c)*c,l),R(Math.floor(E[1]/c)*c,l)],E),g},G.getIntervalPrecision=k,G.fixExtent=D},15532:(W,G,T)=>{var L=T(33051),R=L.each,k=L.map,O=L.isFunction,D=L.createHashMap,E=L.noop,I=T(29449).createTask,S=T(42151).getUID,_=T(17260),g=T(59935),u=T(32234).normalizeToArray;function c(C,A,P,b){this.ecInstance=C,this.api=A,this.unfinished,P=this._dataProcessorHandlers=P.slice(),b=this._visualHandlers=b.slice(),this._allHandlers=P.concat(b),this._stageTaskMap=D()}var l=c.prototype;function e(C,A,P,b,N){var B;function z(F,V){return F.setDirty&&(!F.dirtyMap||F.dirtyMap.get(V.__pipeline.id))}N=N||{},R(A,function(F,V){if(!N.visualType||N.visualType===F.visualType){var H=C._stageTaskMap.get(F.uid),U=H.seriesTaskMap,j=H.overallTask;if(j){var X,Y=j.agentStubMap;Y.each(function(K){z(N,K)&&(K.dirty(),X=!0)}),X&&j.dirty(),t(j,b);var J=C.getPerformArgs(j,N.block);Y.each(function(K){K.perform(J)}),B|=j.perform(J)}else U&&U.each(function(K,Q){z(N,K)&&K.dirty();var Z=C.getPerformArgs(K,N.block);Z.skip=!F.performRawSeries&&P.isSeriesFiltered(K.context.model),t(K,b),B|=K.perform(Z)})}}),C.unfinished|=B}l.restoreData=function(C,A){C.restoreData(A),this._stageTaskMap.each(function(P){var b=P.overallTask;b&&b.dirty()})},l.getPerformArgs=function(C,A){if(C.__pipeline){var P=this._pipelineMap.get(C.__pipeline.id),b=P.context,N=!A&&P.progressiveEnabled&&(!b||b.progressiveRender)&&C.__idxInPipeline>P.blockIndex?P.step:null,B=b&&b.modDataCount;return{step:N,modBy:B!=null?Math.ceil(B/N):null,modDataCount:B}}},l.getPipeline=function(C){return this._pipelineMap.get(C)},l.updateStreamModes=function(C,A){var P=this._pipelineMap.get(C.uid),b=C.getData().count(),N=P.progressiveEnabled&&A.incrementalPrepareRender&&b>=P.threshold,B=C.get("large")&&b>=C.get("largeThreshold"),z=C.get("progressiveChunkMode")==="mod"?b:null;C.pipelineContext=P.context={progressiveRender:N,modDataCount:z,large:B}},l.restorePipelines=function(C){var A=this,P=A._pipelineMap=D();C.eachSeries(function(b){var N=b.getProgressive(),B=b.uid;P.set(B,{id:B,head:null,tail:null,threshold:b.getProgressiveThreshold(),progressiveEnabled:N&&!(b.preventIncremental&&b.preventIncremental()),blockIndex:-1,step:Math.round(N||700),count:0}),f(A,b,b.dataTask)})},l.prepareStageTasks=function(){var C=this._stageTaskMap,A=this.ecInstance.getModel(),P=this.api;R(this._allHandlers,function(b){var N=C.get(b.uid)||C.set(b.uid,[]);b.reset&&function(B,z,F,V,H){var U=F.seriesTaskMap||(F.seriesTaskMap=D()),j=z.seriesType,X=z.getTargetSeries;function Y(K){var Q=K.uid,Z=U.get(Q)||U.set(Q,I({plan:r,reset:n,count:d}));Z.context={model:K,ecModel:V,api:H,useClearVisual:z.isVisual&&!z.isLayout,plan:z.plan,reset:z.reset,scheduler:B},f(B,K,Z)}z.createOnAllSeries?V.eachRawSeries(Y):j?V.eachRawSeriesByType(j,Y):X&&X(V,H).each(Y);var J=B._pipelineMap;U.each(function(K,Q){J.get(Q)||(K.dispose(),U.removeKey(Q))})}(this,b,N,A,P),b.overallReset&&function(B,z,F,V,H){var U=F.overallTask=F.overallTask||I({reset:i});U.context={ecModel:V,api:H,overallReset:z.overallReset,scheduler:B};var j=U.agentStubMap=U.agentStubMap||D(),X=z.seriesType,Y=z.getTargetSeries,J=!0,K=z.modifyOutputEnd;function Q(q){var tt=q.uid,$=j.get(tt);$||($=j.set(tt,I({reset:s,onDirty:o})),U.dirty()),$.context={model:q,overallProgress:J,modifyOutputEnd:K},$.agent=U,$.__block=J,f(B,q,$)}X?V.eachRawSeriesByType(X,Q):Y?Y(V,H).each(Q):(J=!1,R(V.getSeries(),Q));var Z=B._pipelineMap;j.each(function(q,tt){Z.get(tt)||(q.dispose(),U.dirty(),j.removeKey(tt))})}(this,b,N,A,P)},this)},l.prepareView=function(C,A,P,b){var N=C.renderTask,B=N.context;B.model=A,B.ecModel=P,B.api=b,N.__block=!C.incrementalPrepareRender,f(this,A,N)},l.performDataProcessorTasks=function(C,A){e(this,this._dataProcessorHandlers,C,A,{block:!0})},l.performVisualTasks=function(C,A,P){e(this,this._visualHandlers,C,A,P)},l.performSeriesTasks=function(C){var A;C.eachSeries(function(P){A|=P.dataTask.perform()}),this.unfinished|=A},l.plan=function(){this._pipelineMap.each(function(C){var A=C.tail;do{if(A.__block){C.blockIndex=A.__idxInPipeline;break}A=A.getUpstream()}while(A)})};var t=l.updatePayload=function(C,A){A!=="remain"&&(C.context.payload=A)};function i(C){C.overallReset(C.ecModel,C.api,C.payload)}function s(C,A){return C.overallProgress&&a}function a(){this.agent.dirty(),this.getDownstream().dirty()}function o(){this.agent&&this.agent.dirty()}function r(C){return C.plan&&C.plan(C.model,C.ecModel,C.api,C.payload)}function n(C){C.useClearVisual&&C.data.clearAllVisual();var A=C.resetDefines=u(C.reset(C.model,C.ecModel,C.api,C.payload));return A.length>1?k(A,function(P,b){return p(b)}):h}var h=p(0);function p(C){return function(A,P){var b=P.data,N=P.resetDefines[C];if(N&&N.dataEach)for(var B=A.start;B<A.end;B++)N.dataEach(b,B);else N&&N.progress&&N.progress(A,b)}}function d(C){return C.data.count()}function f(C,A,P){var b=A.uid,N=C._pipelineMap.get(b);!N.head&&(N.head=P),N.tail&&N.tail.pipe(P),N.tail=P,P.__idxInPipeline=N.count++,P.__pipeline=N}function v(C){m=null;try{C(y,x)}catch{}return m}c.wrapStageHandler=function(C,A){return O(C)&&(C={overallReset:C,seriesType:v(C)}),C.uid=S("stageHandler"),A&&(C.visualType=A),C};var m,y={},x={};function w(C,A){for(var P in A.prototype)C[P]=E}w(y,_),w(x,g),y.eachSeriesByType=y.eachRawSeriesByType=function(C){m=C},y.eachComponent=function(C){C.mainType==="series"&&C.subType&&(m=C.subType)};var M=c;W.exports=M},29449:(W,G,T)=>{var L=T(33051),R=(L.assert,L.isArray);function k(I){I=I||{},this._reset=I.reset,this._plan=I.plan,this._count=I.count,this._onDirty=I.onDirty,this._dirty=!0,this.context}T(38175).__DEV__;var O=k.prototype;O.perform=function(I){var S,_=this._upstream,g=I&&I.skip;if(this._dirty&&_){var u=this.context;u.data=u.outputData=_.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!g&&(S=this._plan(this.context));var c,l=s(this._modBy),e=this._modDataCount||0,t=s(I&&I.modBy),i=I&&I.modDataCount||0;function s(d){return!(d>=1)&&(d=1),d}l===t&&e===i||(S="reset"),(this._dirty||S==="reset")&&(this._dirty=!1,c=function(d,f){var v,m;d._dueIndex=d._outputDueEnd=d._dueEnd=0,d._settedOutputEnd=null,!f&&d._reset&&((v=d._reset(d.context))&&v.progress&&(m=v.forceFirstProgress,v=v.progress),R(v)&&!v.length&&(v=null)),d._progress=v,d._modBy=d._modDataCount=null;var y=d._downstream;return y&&y.dirty(),m}(this,g)),this._modBy=t,this._modDataCount=i;var a=I&&I.step;if(this._dueEnd=_?_._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var o=this._dueIndex,r=Math.min(a!=null?this._dueIndex+a:1/0,this._dueEnd);if(!g&&(c||o<r)){var n=this._progress;if(R(n))for(var h=0;h<n.length;h++)E(this,n[h],o,r,t,i);else E(this,n,o,r,t,i)}this._dueIndex=r;var p=this._settedOutputEnd!=null?this._settedOutputEnd:r;this._outputDueEnd=p}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var D=function(){var I,S,_,g,u,c={reset:function(t,i,s,a){S=t,I=i,_=s,g=a,u=Math.ceil(g/_),c.next=_>1&&g>0?e:l}};return c;function l(){return S<I?S++:null}function e(){var t=S%u*_+Math.ceil(S/u),i=S>=I?null:t<g?t:S;return S++,i}}();function E(I,S,_,g,u,c){D.reset(_,g,u,c),I._callingProgress=S,I._callingProgress({start:_,end:g,count:g-_,next:D.next},I.context)}O.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},O.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},O.pipe=function(I){(this._downstream!==I||this._dirty)&&(this._downstream=I,I._upstream=this,I.dirty())},O.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},O.getUpstream=function(){return this._upstream},O.getDownstream=function(){return this._downstream},O.setOutputEnd=function(I){this._outputDueEnd=this._settedOutputEnd=I},G.createTask=function(I){return new k(I)}},73450:W=>{var G="#eee",T=function(){return{axisLine:{lineStyle:{color:G}},axisTick:{lineStyle:{color:G}},axisLabel:{textStyle:{color:G}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:G}}}},L=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],R={color:L,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:G},crossStyle:{color:G},label:{color:"#000"}}},legend:{textStyle:{color:G}},textStyle:{color:G},title:{textStyle:{color:G}},toolbox:{iconStyle:{normal:{borderColor:G}}},dataZoom:{textStyle:{color:G}},visualMap:{textStyle:{color:G}},timeline:{lineStyle:{color:G},itemStyle:{normal:{color:L[1]}},label:{normal:{textStyle:{color:G}}},controlStyle:{normal:{color:G,borderColor:G}}},timeAxis:T(),logAxis:T(),valueAxis:T(),categoryAxis:T(),line:{symbol:"circle"},graph:{color:L},gauge:{title:{textStyle:{color:G}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};R.categoryAxis.splitLine.show=!1;var k=R;W.exports=k},29594:W=>{var G=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],T={color:G,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],G]};W.exports=T},34584:(W,G,T)=>{var L=T(33051);G.createWrap=function(){var R,k=[],O={};return{add:function(D,E,I,S,_){return L.isString(S)&&(_=S,S=0),!O[D.id]&&(O[D.id]=1,k.push({el:D,target:E,time:I,delay:S,easing:_}),!0)},done:function(D){return R=D,this},start:function(){for(var D=k.length,E=0,I=k.length;E<I;E++){var S=k[E];S.el.animateTo(S.target,S.time,S.delay,S.easing,_)}return this;function _(){--D||(k.length=0,O={},R&&R())}}}}},34251:(W,G,T)=>{T(38175).__DEV__;var L=T(33051),R="___EC__COMPONENT__CONTAINER___";function k(I){var S={main:"",sub:""};return I&&(I=I.split("."),S.main=I[0]||"",S.sub=I[1]||""),S}var O=0;function D(I,S){var _=L.slice(arguments,2);return this.superClass.prototype[S].apply(I,_)}function E(I,S,_){return this.superClass.prototype[S].apply(I,_)}G.parseClassType=k,G.enableClassExtend=function(I,S){I.$constructor=I,I.extend=function(_){var g=this,u=function(){_.$constructor?_.$constructor.apply(this,arguments):g.apply(this,arguments)};return L.extend(u.prototype,_),u.extend=this.extend,u.superCall=D,u.superApply=E,L.inherits(u,this),u.superClass=g,u}},G.enableClassCheck=function(I){var S=["__\0is_clz",O++,Math.random().toFixed(3)].join("_");I.prototype[S]=!0,I.isInstance=function(_){return!(!_||!_[S])}},G.enableClassManagement=function(I,S){S=S||{};var _={};if(I.registerClass=function(u,c){if(c)if(function(e){L.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}(c),(c=k(c)).sub){if(c.sub!==R){var l=function(e){var t=_[e.main];return t&&t[R]||((t=_[e.main]={})[R]=!0),t}(c);l[c.sub]=u}}else _[c.main]=u;return u},I.getClass=function(u,c,l){var e=_[u];if(e&&e[R]&&(e=c?e[c]:null),l&&!e)throw new Error(c?"Component "+u+"."+(c||"")+" not exists. Load it first.":u+".type should be specified.");return e},I.getClassesByMainType=function(u){u=k(u);var c=[],l=_[u.main];return l&&l[R]?L.each(l,function(e,t){t!==R&&c.push(e)}):c.push(l),c},I.hasClass=function(u){return u=k(u),!!_[u.main]},I.getAllClassMainTypes=function(){var u=[];return L.each(_,function(c,l){u.push(l)}),u},I.hasSubTypes=function(u){u=k(u);var c=_[u.main];return c&&c[R]},I.parseClassType=k,S.registerWhenExtend){var g=I.extend;g&&(I.extend=function(u){var c=g.call(this,u);return I.registerClass(c,u.type)})}return I},G.setReadOnly=function(I,S){}},42151:(W,G,T)=>{var L=T(33051),R=T(34251).parseClassType,k=0;G.getUID=function(O){return[O||"",k++,Math.random().toFixed(5)].join("_")},G.enableSubTypeDefaulter=function(O){var D={};return O.registerSubTypeDefaulter=function(E,I){E=R(E),D[E.main]=I},O.determineSubType=function(E,I){var S=I.type;if(!S){var _=R(E).main;O.hasSubTypes(E)&&D[_]&&(S=D[_](I))}return S},O},G.enableTopologicalTravel=function(O,D){function E(I,S){return I[S]||(I[S]={predecessor:[],successor:[]}),I[S]}O.topologicalTravel=function(I,S,_,g){if(I.length){var u=function(r){var n={},h=[];return L.each(r,function(p){var d=E(n,p),f=function(v,m){var y=[];return L.each(v,function(x){L.indexOf(m,x)>=0&&y.push(x)}),y}(d.originalDeps=D(p),r);d.entryCount=f.length,d.entryCount===0&&h.push(p),L.each(f,function(v){L.indexOf(d.predecessor,v)<0&&d.predecessor.push(v);var m=E(n,v);L.indexOf(m.successor,v)<0&&m.successor.push(p)})}),{graph:n,noEntryList:h}}(S),c=u.graph,l=u.noEntryList,e={};for(L.each(I,function(r){e[r]=!0});l.length;){var t=l.pop(),i=c[t],s=!!e[t];s&&(_.call(g,t,i.originalDeps.slice()),delete e[t]),L.each(i.successor,s?o:a)}L.each(e,function(){throw new Error("Circle dependency may exists")})}function a(r){c[r].entryCount--,c[r].entryCount===0&&l.push(r)}function o(r){e[r]=!0,a(r)}}}},78988:(W,G,T)=>{var L=T(33051),R=T(80423),k=T(85669),O=L.normalizeCssArray,D=/([&<>"'])/g,E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function I(c){return c==null?"":(c+"").replace(D,function(l,e){return E[e]})}var S=["a","b","c","d","e","f","g"],_=function(c,l){return"{"+c+(l==null?"":l)+"}"};function g(c,l){return"0000".substr(0,l-(c+="").length)+c}var u=R.truncateText;G.addCommas=function(c){return isNaN(c)?"-":(c=(c+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(c.length>1?"."+c[1]:"")},G.toCamelCase=function(c,l){return c=(c||"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()}),l&&c&&(c=c.charAt(0).toUpperCase()+c.slice(1)),c},G.normalizeCssArray=O,G.encodeHTML=I,G.formatTpl=function(c,l,e){L.isArray(l)||(l=[l]);var t=l.length;if(!t)return"";for(var i=l[0].$vars||[],s=0;s<i.length;s++){var a=S[s];c=c.replace(_(a),_(a,0))}for(var o=0;o<t;o++)for(var r=0;r<i.length;r++){var n=l[o][i[r]];c=c.replace(_(S[r],o),e?I(n):n)}return c},G.formatTplSimple=function(c,l,e){return L.each(l,function(t,i){c=c.replace("{"+i+"}",e?I(t):t)}),c},G.getTooltipMarker=function(c,l){var e=(c=L.isString(c)?{color:c,extraCssText:l}:c||{}).color,t=c.type,i=(l=c.extraCssText,c.renderMode||"html"),s=c.markerId||"X";return e?i==="html"?t==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+I(e)+";"+(l||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+I(e)+";"+(l||"")+'"></span>':{renderMode:i,content:"{marker"+s+"|}  ",style:{color:e}}:""},G.formatTime=function(c,l,e){c!=="week"&&c!=="month"&&c!=="quarter"&&c!=="half-year"&&c!=="year"||(c=`MM-dd
yyyy`);var t=k.parseDate(l),i=e?"UTC":"",s=t["get"+i+"FullYear"](),a=t["get"+i+"Month"]()+1,o=t["get"+i+"Date"](),r=t["get"+i+"Hours"](),n=t["get"+i+"Minutes"](),h=t["get"+i+"Seconds"](),p=t["get"+i+"Milliseconds"]();return c.replace("MM",g(a,2)).replace("M",a).replace("yyyy",s).replace("yy",s%100).replace("dd",g(o,2)).replace("d",o).replace("hh",g(r,2)).replace("h",r).replace("mm",g(n,2)).replace("m",n).replace("ss",g(h,2)).replace("s",h).replace("SSS",g(p,3))},G.capitalFirst=function(c){return c&&c.charAt(0).toUpperCase()+c.substr(1)},G.truncateText=u,G.getTextBoundingRect=function(c){return R.getBoundingRect(c.text,c.font,c.textAlign,c.textVerticalAlign,c.textPadding,c.textLineHeight,c.rich,c.truncate)},G.getTextRect=function(c,l,e,t,i,s,a,o){return R.getBoundingRect(c,l,e,t,i,o,s,a)},G.windowOpen=function(c,l){if(l==="_blank"||l==="blank"){var e=window.open();e.opener=null,e.location=c}else window.open(c,l)}},51177:(W,G,T)=>{var L=T(33051),R=T(75991),k=T(21092),O=T(32892),D=T(45280),E=T(10712),I=T(58023),S=T(44535);G.Image=S;var _=T(8524);G.Group=_;var g=T(96498);G.Text=g;var u=T(69538);G.Circle=u;var c=T(74520);G.Sector=c;var l=T(85795);G.Ring=l;var e=T(95094);G.Polygon=e;var t=T(62514);G.Polyline=t;var i=T(27304);G.Rect=i;var s=T(22095);G.Line=s;var a=T(54174);G.BezierCurve=a;var o=T(14826);G.Arc=o;var r=T(52776);G.CompoundPath=r;var n=T(74438);G.LinearGradient=n;var h=T(36369);G.RadialGradient=h;var p=T(60479);G.BoundingRect=p;var d=T(91754);G.IncrementalDisplayable=d;var f=T(24111),v=Math.max,m=Math.min,y={},x="emphasis",w="normal",M=1,C={},A={};function P(nt,lt){A[nt]=lt}function b(nt,lt,ct,ht){var ft=R.createFromString(nt,lt);return ct&&(ht==="center"&&(ct=N(ct,ft.getBoundingRect())),z(ft,ct)),ft}function N(nt,lt){var ct,ht=lt.width/lt.height,ft=nt.height*ht;return ct=ft<=nt.width?nt.height:(ft=nt.width)/ht,{x:nt.x+nt.width/2-ft/2,y:nt.y+nt.height/2-ct/2,width:ft,height:ct}}var B=R.mergePath;function z(nt,lt){if(nt.applyTransform){var ct=nt.getBoundingRect().calculateTransform(lt);nt.applyTransform(ct)}}var F=f.subPixelOptimize;function V(nt){return nt!=null&&nt!=="none"}var H=L.createHashMap(),U=0;function j(nt){var lt=nt.__hoverStl;if(lt&&!nt.__highlighted){var ct=nt.__zr,ht=nt.useHoverLayer&&ct&&ct.painter.type==="canvas";if(nt.__highlighted=ht?"layer":"plain",!(nt.isGroup||!ct&&nt.useHoverLayer)){var ft=nt,_t=nt.style;ht&&(_t=(ft=ct.addHover(nt)).style),vt(_t),ht||function(wt){if(wt.__hoverStlDirty){wt.__hoverStlDirty=!1;var Tt=wt.__hoverStl;if(Tt){var It=wt.__cachedNormalStl={};wt.__cachedNormalZ2=wt.z2;var Mt=wt.style;for(var Lt in Tt)Tt[Lt]!=null&&(It[Lt]=Mt[Lt]);It.fill=Mt.fill,It.stroke=Mt.stroke}else wt.__cachedNormalStl=wt.__cachedNormalZ2=null}}(ft),_t.extendFrom(lt),X(_t,lt,"fill"),X(_t,lt,"stroke"),at(_t),ht||(nt.dirty(!1),nt.z2+=1)}}}function X(nt,lt,ct){!V(lt[ct])&&V(nt[ct])&&(nt[ct]=function(ht){if(typeof ht!="string")return ht;var ft=H.get(ht);return ft||(ft=k.lift(ht,-.1),U<1e4&&(H.set(ht,ft),U++)),ft}(nt[ct]))}function Y(nt){var lt=nt.__highlighted;if(lt&&(nt.__highlighted=!1,!nt.isGroup))if(lt==="layer")nt.__zr&&nt.__zr.removeHover(nt);else{var ct=nt.style,ht=nt.__cachedNormalStl;ht&&(vt(ct),nt.setStyle(ht),at(ct));var ft=nt.__cachedNormalZ2;ft!=null&&nt.z2-ft==1&&(nt.z2=ft)}}function J(nt,lt,ct){var ht,ft=w,_t=w;nt.__highlighted&&(ft=x,ht=!0),lt(nt,ct),nt.__highlighted&&(_t=x,ht=!0),nt.isGroup&&nt.traverse(function(wt){!wt.isGroup&&lt(wt,ct)}),ht&&nt.__highDownOnUpdate&&nt.__highDownOnUpdate(ft,_t)}function K(nt,lt){lt=nt.__hoverStl=lt!==!1&&(nt.hoverStyle||lt||{}),nt.__hoverStlDirty=!0,nt.__highlighted&&(nt.__cachedNormalStl=null,Y(nt),j(nt))}function Q(nt){!$(this,nt)&&!this.__highByOuter&&J(this,j)}function Z(nt){!$(this,nt)&&!this.__highByOuter&&J(this,Y)}function q(nt){this.__highByOuter|=1<<(nt||0),J(this,j)}function tt(nt){!(this.__highByOuter&=~(1<<(nt||0)))&&J(this,Y)}function $(nt,lt){return nt.__highDownSilentOnTouch&&lt.zrByTouch}function rt(nt,lt){var ct=lt===!1;if(nt.__highDownSilentOnTouch=nt.highDownSilentOnTouch,nt.__highDownOnUpdate=nt.highDownOnUpdate,!ct||nt.__highDownDispatcher){var ht=ct?"off":"on";nt[ht]("mouseover",Q)[ht]("mouseout",Z),nt[ht]("emphasis",q)[ht]("normal",tt),nt.__highByOuter=nt.__highByOuter||0,nt.__highDownDispatcher=!ct}}function et(nt,lt,ct,ht,ft){return it(nt,lt,ht,ft),ct&&L.extend(nt,ct),nt}function it(nt,lt,ct,ht){if((ct=ct||y).isRectText){var ft;ct.getTextPosition?ft=ct.getTextPosition(lt,ht):(ft=lt.getShallow("position")||(ht?null:"inside"))==="outside"&&(ft="top"),nt.textPosition=ft,nt.textOffset=lt.getShallow("offset");var _t=lt.getShallow("rotate");_t!=null&&(_t*=Math.PI/180),nt.textRotation=_t,nt.textDistance=L.retrieve2(lt.getShallow("distance"),ht?null:5)}var wt,Tt=lt.ecModel,It=Tt&&Tt.option.textStyle,Mt=function(Rt){for(var ut;Rt&&Rt!==Rt.ecModel;){var dt=(Rt.option||y).rich;if(dt)for(var xt in ut=ut||{},dt)dt.hasOwnProperty(xt)&&(ut[xt]=1);Rt=Rt.parentModel}return ut}(lt);if(Mt){for(var Lt in wt={},Mt)if(Mt.hasOwnProperty(Lt)){var kt=lt.getModel(["rich",Lt]);ot(wt[Lt]={},kt,It,ct,ht)}}return nt.rich=wt,ot(nt,lt,It,ct,ht,!0),ct.forceRich&&!ct.textStyle&&(ct.textStyle={}),nt}function ot(nt,lt,ct,ht,ft,_t){ct=!ft&&ct||y,nt.textFill=st(lt.getShallow("color"),ht)||ct.color,nt.textStroke=st(lt.getShallow("textBorderColor"),ht)||ct.textBorderColor,nt.textStrokeWidth=L.retrieve2(lt.getShallow("textBorderWidth"),ct.textBorderWidth),ft||(_t&&(nt.insideRollbackOpt=ht,at(nt)),nt.textFill==null&&(nt.textFill=ht.autoColor)),nt.fontStyle=lt.getShallow("fontStyle")||ct.fontStyle,nt.fontWeight=lt.getShallow("fontWeight")||ct.fontWeight,nt.fontSize=lt.getShallow("fontSize")||ct.fontSize,nt.fontFamily=lt.getShallow("fontFamily")||ct.fontFamily,nt.textAlign=lt.getShallow("align"),nt.textVerticalAlign=lt.getShallow("verticalAlign")||lt.getShallow("baseline"),nt.textLineHeight=lt.getShallow("lineHeight"),nt.textWidth=lt.getShallow("width"),nt.textHeight=lt.getShallow("height"),nt.textTag=lt.getShallow("tag"),_t&&ht.disableBox||(nt.textBackgroundColor=st(lt.getShallow("backgroundColor"),ht),nt.textPadding=lt.getShallow("padding"),nt.textBorderColor=st(lt.getShallow("borderColor"),ht),nt.textBorderWidth=lt.getShallow("borderWidth"),nt.textBorderRadius=lt.getShallow("borderRadius"),nt.textBoxShadowColor=lt.getShallow("shadowColor"),nt.textBoxShadowBlur=lt.getShallow("shadowBlur"),nt.textBoxShadowOffsetX=lt.getShallow("shadowOffsetX"),nt.textBoxShadowOffsetY=lt.getShallow("shadowOffsetY")),nt.textShadowColor=lt.getShallow("textShadowColor")||ct.textShadowColor,nt.textShadowBlur=lt.getShallow("textShadowBlur")||ct.textShadowBlur,nt.textShadowOffsetX=lt.getShallow("textShadowOffsetX")||ct.textShadowOffsetX,nt.textShadowOffsetY=lt.getShallow("textShadowOffsetY")||ct.textShadowOffsetY}function st(nt,lt){return nt!=="auto"?nt:lt&&lt.autoColor?lt.autoColor:null}function at(nt){var lt,ct=nt.textPosition,ht=nt.insideRollbackOpt;if(ht&&nt.textFill==null){var ft=ht.autoColor,_t=ht.isRectText,wt=ht.useInsideStyle,Tt=wt!==!1&&(wt===!0||_t&&ct&&typeof ct=="string"&&ct.indexOf("inside")>=0),It=!Tt&&ft!=null;(Tt||It)&&(lt={textFill:nt.textFill,textStroke:nt.textStroke,textStrokeWidth:nt.textStrokeWidth}),Tt&&(nt.textFill="#fff",nt.textStroke==null&&(nt.textStroke=ft,nt.textStrokeWidth==null&&(nt.textStrokeWidth=2))),It&&(nt.textFill=ft)}nt.insideRollback=lt}function vt(nt){var lt=nt.insideRollback;lt&&(nt.textFill=lt.textFill,nt.textStroke=lt.textStroke,nt.textStrokeWidth=lt.textStrokeWidth,nt.insideRollback=null)}function yt(nt,lt,ct,ht,ft,_t){if(typeof ft=="function"&&(_t=ft,ft=null),ht&&ht.isAnimationEnabled()){var wt=nt?"Update":"",Tt=ht.getShallow("animationDuration"+wt),It=ht.getShallow("animationEasing"+wt),Mt=ht.getShallow("animationDelay"+wt);typeof Mt=="function"&&(Mt=Mt(ft,ht.getAnimationDelayParams?ht.getAnimationDelayParams(lt,ft):null)),typeof Tt=="function"&&(Tt=Tt(ft)),Tt>0?lt.animateTo(ct,Tt,Mt||0,It,_t,!!_t):(lt.stopAnimation(),lt.attr(ct),_t&&_t())}else lt.stopAnimation(),lt.attr(ct),_t&&_t()}function gt(nt,lt,ct,ht,ft){yt(!0,nt,lt,ct,ht,ft)}function pt(nt,lt,ct){return lt&&!L.isArrayLike(lt)&&(lt=I.getLocalTransform(lt)),ct&&(lt=O.invert([],lt)),D.applyTransform([],nt,lt)}function bt(nt,lt,ct,ht,ft,_t,wt,Tt){var It,Mt=ct-nt,Lt=ht-lt,kt=wt-ft,Rt=Tt-_t,ut=mt(kt,Rt,Mt,Lt);if((It=ut)<=1e-6&&It>=-1e-6)return!1;var dt=nt-ft,xt=lt-_t,St=mt(dt,xt,Mt,Lt)/ut;if(St<0||St>1)return!1;var At=mt(dt,xt,kt,Rt)/ut;return!(At<0||At>1)}function mt(nt,lt,ct,ht){return nt*ht-ct*lt}P("circle",u),P("sector",c),P("ring",l),P("polygon",e),P("polyline",t),P("rect",i),P("line",s),P("bezierCurve",a),P("arc",o),G.Z2_EMPHASIS_LIFT=1,G.CACHED_LABEL_STYLE_PROPERTIES={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},G.extendShape=function(nt){return E.extend(nt)},G.extendPath=function(nt,lt){return R.extendFromString(nt,lt)},G.registerShape=P,G.getShapeClass=function(nt){if(A.hasOwnProperty(nt))return A[nt]},G.makePath=b,G.makeImage=function(nt,lt,ct){var ht=new S({style:{image:nt,x:lt.x,y:lt.y,width:lt.width,height:lt.height},onload:function(ft){if(ct==="center"){var _t={width:ft.width,height:ft.height};ht.setStyle(N(lt,_t))}}});return ht},G.mergePath=B,G.resizePath=z,G.subPixelOptimizeLine=function(nt){return f.subPixelOptimizeLine(nt.shape,nt.shape,nt.style),nt},G.subPixelOptimizeRect=function(nt){return f.subPixelOptimizeRect(nt.shape,nt.shape,nt.style),nt},G.subPixelOptimize=F,G.setElementHoverStyle=K,G.setHoverStyle=function(nt,lt){rt(nt,!0),J(nt,K,lt)},G.setAsHighDownDispatcher=rt,G.isHighDownDispatcher=function(nt){return!(!nt||!nt.__highDownDispatcher)},G.getHighlightDigit=function(nt){var lt=C[nt];return lt==null&&M<=32&&(lt=C[nt]=M++),lt},G.setLabelStyle=function(nt,lt,ct,ht,ft,_t,wt){var Tt,It=(ft=ft||y).labelFetcher,Mt=ft.labelDataIndex,Lt=ft.labelDimIndex,kt=ft.labelProp,Rt=ct.getShallow("show"),ut=ht.getShallow("show");(Rt||ut)&&(It&&(Tt=It.getFormattedLabel(Mt,"normal",null,Lt,kt)),Tt==null&&(Tt=L.isFunction(ft.defaultText)?ft.defaultText(Mt,ft):ft.defaultText));var dt=Rt?Tt:null,xt=ut?L.retrieve2(It?It.getFormattedLabel(Mt,"emphasis",null,Lt,kt):null,Tt):null;dt==null&&xt==null||(et(nt,ct,_t,ft),et(lt,ht,wt,ft,!0)),nt.text=dt,lt.text=xt},G.modifyLabelStyle=function(nt,lt,ct){var ht=nt.style;lt&&(vt(ht),nt.setStyle(lt),at(ht)),ht=nt.__hoverStl,ct&&ht&&(vt(ht),L.extend(ht,ct),at(ht))},G.setTextStyle=et,G.setText=function(nt,lt,ct){var ht,ft={isRectText:!0};ct===!1?ht=!0:ft.autoColor=ct,it(nt,lt,ft,ht)},G.getFont=function(nt,lt){var ct=lt&&lt.getModel("textStyle");return L.trim([nt.fontStyle||ct&&ct.getShallow("fontStyle")||"",nt.fontWeight||ct&&ct.getShallow("fontWeight")||"",(nt.fontSize||ct&&ct.getShallow("fontSize")||12)+"px",nt.fontFamily||ct&&ct.getShallow("fontFamily")||"sans-serif"].join(" "))},G.updateProps=gt,G.initProps=function(nt,lt,ct,ht,ft){yt(!1,nt,lt,ct,ht,ft)},G.getTransform=function(nt,lt){for(var ct=O.identity([]);nt&&nt!==lt;)O.mul(ct,nt.getLocalTransform(),ct),nt=nt.parent;return ct},G.applyTransform=pt,G.transformDirection=function(nt,lt,ct){var ht=lt[4]===0||lt[5]===0||lt[0]===0?1:Math.abs(2*lt[4]/lt[0]),ft=lt[4]===0||lt[5]===0||lt[2]===0?1:Math.abs(2*lt[4]/lt[2]),_t=[nt==="left"?-ht:nt==="right"?ht:0,nt==="top"?-ft:nt==="bottom"?ft:0];return _t=pt(_t,lt,ct),Math.abs(_t[0])>Math.abs(_t[1])?_t[0]>0?"right":"left":_t[1]>0?"bottom":"top"},G.groupTransition=function(nt,lt,ct,ht){if(nt&&lt){var ft,_t=(ft={},nt.traverse(function(Tt){!Tt.isGroup&&Tt.anid&&(ft[Tt.anid]=Tt)}),ft);lt.traverse(function(Tt){if(!Tt.isGroup&&Tt.anid){var It=_t[Tt.anid];if(It){var Mt=wt(Tt);Tt.attr(wt(It)),gt(Tt,Mt,ct,Tt.dataIndex)}}})}function wt(Tt){var It={position:D.clone(Tt.position),rotation:Tt.rotation};return Tt.shape&&(It.shape=L.extend({},Tt.shape)),It}},G.clipPointsByRect=function(nt,lt){return L.map(nt,function(ct){var ht=ct[0];ht=v(ht,lt.x),ht=m(ht,lt.x+lt.width);var ft=ct[1];return ft=v(ft,lt.y),[ht,ft=m(ft,lt.y+lt.height)]})},G.clipRectByRect=function(nt,lt){var ct=v(nt.x,lt.x),ht=m(nt.x+nt.width,lt.x+lt.width),ft=v(nt.y,lt.y),_t=m(nt.y+nt.height,lt.y+lt.height);if(ht>=ct&&_t>=ft)return{x:ct,y:ft,width:ht-ct,height:_t-ft}},G.createIcon=function(nt,lt,ct){var ht=(lt=L.extend({rectHover:!0},lt)).style={strokeNoScale:!0};if(ct=ct||{x:-1,y:-1,width:2,height:2},nt)return nt.indexOf("image://")===0?(ht.image=nt.slice(8),L.defaults(ht,ct),new S(lt)):b(nt.replace("path://",""),lt,ct,"center")},G.linePolygonIntersect=function(nt,lt,ct,ht,ft){for(var _t=0,wt=ft[ft.length-1];_t<ft.length;_t++){var Tt=ft[_t];if(bt(nt,lt,ct,ht,Tt[0],Tt[1],wt[0],wt[1]))return!0;wt=Tt}},G.lineLineIntersect=bt},76172:(W,G,T)=>{var L=T(33051),R=T(60479),k=T(85669).parsePercent,O=T(78988),D=L.each,E=["left","right","top","bottom","width","height"],I=[["width","left","right"],["height","top","bottom"]];function S(e,t,i,s,a){var o=0,r=0;s==null&&(s=1/0),a==null&&(a=1/0);var n=0;t.eachChild(function(h,p){var d,f,v=h.position,m=h.getBoundingRect(),y=t.childAt(p+1),x=y&&y.getBoundingRect();if(e==="horizontal"){var w=m.width+(x?-x.x+m.x:0);(d=o+w)>s||h.newline?(o=0,d=w,r+=n+i,n=m.height):n=Math.max(n,m.height)}else{var M=m.height+(x?-x.y+m.y:0);(f=r+M)>a||h.newline?(o+=n+i,r=0,f=M,n=m.width):n=Math.max(n,m.width)}h.newline||(v[0]=o,v[1]=r,e==="horizontal"?o=d+i:r=f+i)})}var _=S,g=L.curry(S,"vertical"),u=L.curry(S,"horizontal");function c(e,t,i){i=O.normalizeCssArray(i||0);var s=t.width,a=t.height,o=k(e.left,s),r=k(e.top,a),n=k(e.right,s),h=k(e.bottom,a),p=k(e.width,s),d=k(e.height,a),f=i[2]+i[0],v=i[1]+i[3],m=e.aspect;switch(isNaN(p)&&(p=s-n-v-o),isNaN(d)&&(d=a-h-f-r),m!=null&&(isNaN(p)&&isNaN(d)&&(m>s/a?p=.8*s:d=.8*a),isNaN(p)&&(p=m*d),isNaN(d)&&(d=p/m)),isNaN(o)&&(o=s-n-p-v),isNaN(r)&&(r=a-h-d-f),e.left||e.right){case"center":o=s/2-p/2-i[3];break;case"right":o=s-p-v}switch(e.top||e.bottom){case"middle":case"center":r=a/2-d/2-i[0];break;case"bottom":r=a-d-f}o=o||0,r=r||0,isNaN(p)&&(p=s-v-o-(n||0)),isNaN(d)&&(d=a-f-r-(h||0));var y=new R(o+i[3],r+i[0],p,d);return y.margin=i,y}function l(e,t){return t&&e&&D(E,function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e}G.LOCATION_PARAMS=E,G.HV_NAMES=I,G.box=_,G.vbox=g,G.hbox=u,G.getAvailableSize=function(e,t,i){var s=t.width,a=t.height,o=k(e.x,s),r=k(e.y,a),n=k(e.x2,s),h=k(e.y2,a);return(isNaN(o)||isNaN(parseFloat(e.x)))&&(o=0),(isNaN(n)||isNaN(parseFloat(e.x2)))&&(n=s),(isNaN(r)||isNaN(parseFloat(e.y)))&&(r=0),(isNaN(h)||isNaN(parseFloat(e.y2)))&&(h=a),i=O.normalizeCssArray(i||0),{width:Math.max(n-o-i[1]-i[3],0),height:Math.max(h-r-i[0]-i[2],0)}},G.getLayoutRect=c,G.positionElement=function(e,t,i,s,a){var o=!a||!a.hv||a.hv[0],r=!a||!a.hv||a.hv[1],n=a&&a.boundingMode||"all";if(o||r){var h;if(n==="raw")h=e.type==="group"?new R(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(h=e.getBoundingRect(),e.needLocalTransform()){var p=e.getLocalTransform();(h=h.clone()).applyTransform(p)}t=c(L.defaults({width:h.width,height:h.height},t),i,s);var d=e.position,f=o?t.x-h.x:0,v=r?t.y-h.y:0;e.attr("position",n==="raw"?[f,v]:[d[0]+f,d[1]+v])}},G.sizeCalculable=function(e,t){return e[I[t][0]]!=null||e[I[t][1]]!=null&&e[I[t][2]]!=null},G.mergeLayoutParam=function(e,t,i){!L.isObject(i)&&(i={});var s=i.ignoreSize;!L.isArray(s)&&(s=[s,s]);var a=r(I[0],0),o=r(I[1],1);function r(d,f){var v={},m=0,y={},x=0;if(D(d,function(C){y[C]=e[C]}),D(d,function(C){n(t,C)&&(v[C]=y[C]=t[C]),h(v,C)&&m++,h(y,C)&&x++}),s[f])return h(t,d[1])?y[d[2]]=null:h(t,d[2])&&(y[d[1]]=null),y;if(x!==2&&m){if(m>=2)return v;for(var w=0;w<d.length;w++){var M=d[w];if(!n(v,M)&&n(e,M)){v[M]=e[M];break}}return v}return y}function n(d,f){return d.hasOwnProperty(f)}function h(d,f){return d[f]!=null&&d[f]!=="auto"}function p(d,f,v){D(d,function(m){f[m]=v[m]})}p(I[0],e,a),p(I[1],e,o)},G.getLayoutParams=function(e){return l({},e)},G.copyLayoutParams=l},32234:(W,G,T)=>{var L=T(33051),R=T(66387),k=L.each,O=L.isObject,D=L.isArray,E="series\0";function I(u){return u instanceof Array?u:u==null?[]:[u]}function S(u){return O(u)&&u.id&&(u.id+"").indexOf("\0_ec_\0")===0}var _=0;function g(u,c){return u&&u.hasOwnProperty(c)}G.normalizeToArray=I,G.defaultEmphasis=function(u,c,l){if(u){u[c]=u[c]||{},u.emphasis=u.emphasis||{},u.emphasis[c]=u.emphasis[c]||{};for(var e=0,t=l.length;e<t;e++){var i=l[e];!u.emphasis[c].hasOwnProperty(i)&&u[c].hasOwnProperty(i)&&(u.emphasis[c][i]=u[c][i])}}},G.TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"],G.getDataItemValue=function(u){return!O(u)||D(u)||u instanceof Date?u:u.value},G.isDataItemOption=function(u){return O(u)&&!(u instanceof Array)},G.mappingToExists=function(u,c){c=(c||[]).slice();var l=L.map(u||[],function(e,t){return{exist:e}});return k(c,function(e,t){if(O(e)){for(var i=0;i<l.length;i++)if(!l[i].option&&e.id!=null&&l[i].exist.id===e.id+"")return l[i].option=e,void(c[t]=null);for(i=0;i<l.length;i++){var s=l[i].exist;if(!(l[i].option||s.id!=null&&e.id!=null||e.name==null||S(e)||S(s)||s.name!==e.name+""))return l[i].option=e,void(c[t]=null)}}}),k(c,function(e,t){if(O(e)){for(var i=0;i<l.length;i++){var s=l[i].exist;if(!l[i].option&&!S(s)&&e.id==null){l[i].option=e;break}}i>=l.length&&l.push({option:e})}}),l},G.makeIdAndName=function(u){var c=L.createHashMap();k(u,function(l,e){var t=l.exist;t&&c.set(t.id,l)}),k(u,function(l,e){var t=l.option;L.assert(!t||t.id==null||!c.get(t.id)||c.get(t.id)===l,"id duplicates: "+(t&&t.id)),t&&t.id!=null&&c.set(t.id,l),!l.keyInfo&&(l.keyInfo={})}),k(u,function(l,e){var t=l.exist,i=l.option,s=l.keyInfo;if(O(i)){if(s.name=i.name!=null?i.name+"":t?t.name:E+e,t)s.id=t.id;else if(i.id!=null)s.id=i.id+"";else{var a=0;do s.id="\0"+s.name+"\0"+a++;while(c.get(s.id))}c.set(s.id,l)}})},G.isNameSpecified=function(u){var c=u.name;return!(!c||!c.indexOf(E))},G.isIdInner=S,G.compressBatches=function(u,c){var l={},e={};return t(u||[],l),t(c||[],e,l),[i(l),i(e)];function t(s,a,o){for(var r=0,n=s.length;r<n;r++)for(var h=s[r].seriesId,p=I(s[r].dataIndex),d=o&&o[h],f=0,v=p.length;f<v;f++){var m=p[f];d&&d[m]?d[m]=null:(a[h]||(a[h]={}))[m]=1}}function i(s,a){var o=[];for(var r in s)if(s.hasOwnProperty(r)&&s[r]!=null)if(a)o.push(+r);else{var n=i(s[r],!0);n.length&&o.push({seriesId:r,dataIndex:n})}return o}},G.queryDataIndex=function(u,c){return c.dataIndexInside!=null?c.dataIndexInside:c.dataIndex!=null?L.isArray(c.dataIndex)?L.map(c.dataIndex,function(l){return u.indexOfRawIndex(l)}):u.indexOfRawIndex(c.dataIndex):c.name!=null?L.isArray(c.name)?L.map(c.name,function(l){return u.indexOfName(l)}):u.indexOfName(c.name):void 0},G.makeInner=function(){var u="__\0ec_inner_"+_+++"_"+Math.random().toFixed(5);return function(c){return c[u]||(c[u]={})}},G.parseFinder=function(u,c,l){if(L.isString(c)){var e={};e[c+"Index"]=0,c=e}var t=l&&l.defaultMainType;!t||g(c,t+"Index")||g(c,t+"Id")||g(c,t+"Name")||(c[t+"Index"]=0);var i={};return k(c,function(s,a){if(s=c[a],a!=="dataIndex"&&a!=="dataIndexInside"){var o=a.match(/^(\w+)(Index|Id|Name)$/)||[],r=o[1],n=(o[2]||"").toLowerCase();if(!(!r||!n||s==null||n==="index"&&s==="none"||l&&l.includeMainTypes&&L.indexOf(l.includeMainTypes,r)<0)){var h={mainType:r};n==="index"&&s==="all"||(h[n]=s);var p=u.queryComponents(h);i[r+"Models"]=p,i[r+"Model"]=p[0]}}else i[a]=s}),i},G.setAttribute=function(u,c,l){u.setAttribute?u.setAttribute(c,l):u[c]=l},G.getAttribute=function(u,c){return u.getAttribute?u.getAttribute(c):u[c]},G.getTooltipRenderMode=function(u){return u==="auto"?R.domSupported?"html":"richText":u||"html"},G.groupData=function(u,c){var l=L.createHashMap(),e=[];return L.each(u,function(t){var i=c(t);(l.get(i)||(e.push(i),l.set(i,[]))).push(t)}),{keys:e,buckets:l}}},85669:(W,G,T)=>{var L=T(33051),R=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function k(O){if(O===0)return 0;var D=Math.floor(Math.log(O)/Math.LN10);return O/Math.pow(10,D)>=10&&D++,D}G.linearMap=function(O,D,E,I){var S=D[1]-D[0],_=E[1]-E[0];if(S===0)return _===0?E[0]:(E[0]+E[1])/2;if(I)if(S>0){if(O<=D[0])return E[0];if(O>=D[1])return E[1]}else{if(O>=D[0])return E[0];if(O<=D[1])return E[1]}else{if(O===D[0])return E[0];if(O===D[1])return E[1]}return(O-D[0])/S*_+E[0]},G.parsePercent=function(O,D){switch(O){case"center":case"middle":O="50%";break;case"left":case"top":O="0%";break;case"right":case"bottom":O="100%"}return typeof O=="string"?(E=O,E.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(O)/100*D:parseFloat(O):O==null?NaN:+O;var E},G.round=function(O,D,E){return D==null&&(D=10),D=Math.min(Math.max(0,D),20),O=(+O).toFixed(D),E?O:+O},G.asc=function(O){return O.sort(function(D,E){return D-E}),O},G.getPrecision=function(O){if(O=+O,isNaN(O))return 0;for(var D=1,E=0;Math.round(O*D)/D!==O;)D*=10,E++;return E},G.getPrecisionSafe=function(O){var D=O.toString(),E=D.indexOf("e");if(E>0){var I=+D.slice(E+1);return I<0?-I:0}var S=D.indexOf(".");return S<0?0:D.length-1-S},G.getPixelPrecision=function(O,D){var E=Math.log,I=Math.LN10,S=Math.floor(E(O[1]-O[0])/I),_=Math.round(E(Math.abs(D[1]-D[0]))/I),g=Math.min(Math.max(-S+_,0),20);return isFinite(g)?g:20},G.getPercentWithPrecision=function(O,D,E){if(!O[D])return 0;var I=L.reduce(O,function(a,o){return a+(isNaN(o)?0:o)},0);if(I===0)return 0;for(var S=Math.pow(10,E),_=L.map(O,function(a){return(isNaN(a)?0:a)/I*S*100}),g=100*S,u=L.map(_,function(a){return Math.floor(a)}),c=L.reduce(u,function(a,o){return a+o},0),l=L.map(_,function(a,o){return a-u[o]});c<g;){for(var e=Number.NEGATIVE_INFINITY,t=null,i=0,s=l.length;i<s;++i)l[i]>e&&(e=l[i],t=i);++u[t],l[t]=0,++c}return u[D]/S},G.MAX_SAFE_INTEGER=9007199254740991,G.remRadian=function(O){var D=2*Math.PI;return(O%D+D)%D},G.isRadianAroundZero=function(O){return O>-1e-4&&O<1e-4},G.parseDate=function(O){if(O instanceof Date)return O;if(typeof O=="string"){var D=R.exec(O);if(!D)return new Date(NaN);if(D[8]){var E=+D[4]||0;return D[8].toUpperCase()!=="Z"&&(E-=D[8].slice(0,3)),new Date(Date.UTC(+D[1],+(D[2]||1)-1,+D[3]||1,E,+(D[5]||0),+D[6]||0,+D[7]||0))}return new Date(+D[1],+(D[2]||1)-1,+D[3]||1,+D[4]||0,+(D[5]||0),+D[6]||0,+D[7]||0)}return O==null?new Date(NaN):new Date(Math.round(O))},G.quantity=function(O){return Math.pow(10,k(O))},G.quantityExponent=k,G.nice=function(O,D){var E=k(O),I=Math.pow(10,E),S=O/I;return O=(D?S<1.5?1:S<2.5?2:S<4?3:S<7?5:10:S<1?1:S<2?2:S<3?3:S<5?5:10)*I,E>=-20?+O.toFixed(E<0?-E:0):O},G.quantile=function(O,D){var E=(O.length-1)*D+1,I=Math.floor(E),S=+O[I-1],_=E-I;return _?S+_*(O[I]-S):S},G.reformIntervals=function(O){O.sort(function(c,l){return u(c,l,0)?-1:1});for(var D=-1/0,E=1,I=0;I<O.length;){for(var S=O[I].interval,_=O[I].close,g=0;g<2;g++)S[g]<=D&&(S[g]=D,_[g]=g?1:1-E),D=S[g],E=_[g];S[0]===S[1]&&_[0]*_[1]!=1?O.splice(I,1):I++}return O;function u(c,l,e){return c.interval[e]<l.interval[e]||c.interval[e]===l.interval[e]&&(c.close[e]-l.close[e]==(e?-1:1)||!e&&u(c,l,1))}},G.isNumeric=function(O){return O-parseFloat(O)>=0}},39529:(W,G,T)=>{var L=(0,T(51177).extendShape)({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(R,k){var O=k.cx,D=k.cy,E=Math.max(k.r0||0,0),I=Math.max(k.r,0),S=.5*(I-E),_=E+S,g=k.startAngle,u=k.endAngle,c=k.clockwise,l=Math.cos(g),e=Math.sin(g),t=Math.cos(u),i=Math.sin(u);(c?u-g<2*Math.PI:g-u<2*Math.PI)&&(R.moveTo(l*E+O,e*E+D),R.arc(l*_+O,e*_+D,S,-Math.PI+g,g,!c)),R.arc(O,D,I,g,u,!c),R.moveTo(t*I+O,i*I+D),R.arc(t*_+O,i*_+D,S,u-2*Math.PI,u-Math.PI,!c),E!==0&&(R.arc(O,D,E,u,g,c),R.moveTo(l*E+O,i*E+D)),R.closePath()}});W.exports=L},41525:(W,G,T)=>{var L=T(33051),R=T(51177),k=T(60479),O=T(80423).calculateTextPosition,D=R.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var i=t.cx,s=t.cy,a=t.width/2,o=t.height/2;e.moveTo(i,s-o),e.lineTo(i+a,s+o),e.lineTo(i-a,s+o),e.closePath()}}),E=R.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var i=t.cx,s=t.cy,a=t.width/2,o=t.height/2;e.moveTo(i,s-o),e.lineTo(i+a,s),e.lineTo(i,s+o),e.lineTo(i-a,s),e.closePath()}}),I=R.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.x,s=t.y,a=t.width/5*3,o=Math.max(a,t.height),r=a/2,n=r*r/(o-r),h=s-o+r+n,p=Math.asin(n/r),d=Math.cos(p)*r,f=Math.sin(p),v=Math.cos(p),m=.6*r,y=.7*r;e.moveTo(i-d,h+n),e.arc(i,h,r,Math.PI-p,2*Math.PI+p),e.bezierCurveTo(i+d-f*m,h+n+v*m,i,s-y,i,s),e.bezierCurveTo(i,s-y,i-d+f*m,h+n+v*m,i-d,h+n),e.closePath()}}),S=R.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.height,s=t.width,a=t.x,o=t.y,r=s/3*2;e.moveTo(a,o),e.lineTo(a+r,o+i),e.lineTo(a,o+i/4*3),e.lineTo(a-r,o+i),e.lineTo(a,o),e.closePath()}}),_={line:R.Line,rect:R.Rect,roundRect:R.Rect,square:R.Rect,circle:R.Circle,diamond:E,pin:I,arrow:S,triangle:D},g={line:function(e,t,i,s,a){a.x1=e,a.y1=t+s/2,a.x2=e+i,a.y2=t+s/2},rect:function(e,t,i,s,a){a.x=e,a.y=t,a.width=i,a.height=s},roundRect:function(e,t,i,s,a){a.x=e,a.y=t,a.width=i,a.height=s,a.r=Math.min(i,s)/4},square:function(e,t,i,s,a){var o=Math.min(i,s);a.x=e,a.y=t,a.width=o,a.height=o},circle:function(e,t,i,s,a){a.cx=e+i/2,a.cy=t+s/2,a.r=Math.min(i,s)/2},diamond:function(e,t,i,s,a){a.cx=e+i/2,a.cy=t+s/2,a.width=i,a.height=s},pin:function(e,t,i,s,a){a.x=e+i/2,a.y=t+s/2,a.width=i,a.height=s},arrow:function(e,t,i,s,a){a.x=e+i/2,a.y=t+s/2,a.width=i,a.height=s},triangle:function(e,t,i,s,a){a.cx=e+i/2,a.cy=t+s/2,a.width=i,a.height=s}},u={};L.each(_,function(e,t){u[t]=new e});var c=R.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,i){var s=O(e,t,i),a=this.shape;return a&&a.symbolType==="pin"&&t.textPosition==="inside"&&(s.y=i.y+.4*i.height),s},buildPath:function(e,t,i){var s=t.symbolType;if(s!=="none"){var a=u[s];a||(a=u[s="rect"]),g[s](t.x,t.y,t.width,t.height,a.shape),a.buildPath(e,a.shape,i)}}});function l(e,t){if(this.type!=="image"){var i=this.style,s=this.shape;s&&s.symbolType==="line"?i.stroke=e:this.__isEmptyBrush?(i.stroke=e,i.fill=t||"#fff"):(i.fill&&(i.fill=e),i.stroke&&(i.stroke=e)),this.dirty(!1)}}G.createSymbol=function(e,t,i,s,a,o,r){var n,h=e.indexOf("empty")===0;return h&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(n=e.indexOf("image://")===0?R.makeImage(e.slice(8),new k(t,i,s,a),r?"center":"cover"):e.indexOf("path://")===0?R.makePath(e.slice(7),{},new k(t,i,s,a),r?"center":"cover"):new c({shape:{symbolType:e,x:t,y:i,width:s,height:a}})).__isEmptyBrush=h,n.setColor=l,n.setColor(o),n}},270:(W,G)=>{var T="\0__throttleOriginMethod",L="\0__throttleRate",R="\0__throttleType";function k(O,D,E){var I,S,_,g,u,c=0,l=0,e=null;function t(){l=new Date().getTime(),e=null,O.apply(_,g||[])}D=D||0;var i=function(){I=new Date().getTime(),_=this,g=arguments;var s=u||D,a=u||E;u=null,S=I-(a?c:l)-s,clearTimeout(e),a?e=setTimeout(t,s):S>=0?t():e=setTimeout(t,-S),c=I};return i.clear=function(){e&&(clearTimeout(e),e=null)},i.debounceNextCall=function(s){u=s},i}G.throttle=k,G.createOrUpdate=function(O,D,E,I){var S=O[D];if(S){var _=S[T]||S,g=S[R];if(S[L]!==E||g!==I){if(E==null||!I)return O[D]=_;(S=O[D]=k(_,E,I==="debounce"))[T]=_,S[R]=I,S[L]=E}return S}},G.clear=function(O,D){var E=O[D];E&&E[T]&&(O[D]=E[T])}},75797:(W,G,T)=>{var L=T(33051).each,R=T(8524),k=T(42151),O=T(34251),D=T(32234),E=T(51177),I=T(29449).createTask,S=T(95682),_=D.makeInner(),g=S();function u(){this.group=new R,this.uid=k.getUID("viewChart"),this.renderTask=I({plan:t,reset:i}),this.renderTask.context={view:this}}u.prototype={type:"chart",init:function(o,r){},render:function(o,r,n,h){},highlight:function(o,r,n,h){e(o.getData(),h,"emphasis")},downplay:function(o,r,n,h){e(o.getData(),h,"normal")},remove:function(o,r){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var c=u.prototype;function l(o,r,n){if(o&&(o.trigger(r,n),o.isGroup&&!E.isHighDownDispatcher(o)))for(var h=0,p=o.childCount();h<p;h++)l(o.childAt(h),r,n)}function e(o,r,n){var h=D.queryDataIndex(o,r),p=r&&r.highlightKey!=null?E.getHighlightDigit(r.highlightKey):null;h!=null?L(D.normalizeToArray(h),function(d){l(o.getItemGraphicEl(d),n,p)}):o.eachItemGraphicEl(function(d){l(d,n,p)})}function t(o){return g(o.model)}function i(o){var r=o.model,n=o.ecModel,h=o.api,p=o.payload,d=r.pipelineContext.progressiveRender,f=o.view,v=p&&_(p).updateMethod,m=d?"incrementalPrepareRender":v&&f[v]?v:"render";return m!=="render"&&f[m](r,n,h,p),s[m]}c.updateView=c.updateLayout=c.updateVisual=function(o,r,n,h){this.render(o,r,n,h)},O.enableClassExtend(u,["dispose"]),O.enableClassManagement(u,{registerWhenExtend:!0}),u.markUpdateMethod=function(o,r){_(o).updateMethod=r};var s={incrementalPrepareRender:{progress:function(o,r){r.view.incrementalRender(o,r.model,r.ecModel,r.api,r.payload)}},render:{forceFirstProgress:!0,progress:function(o,r){r.view.render(r.model,r.ecModel,r.api,r.payload)}}},a=u;W.exports=a},33166:(W,G,T)=>{var L=T(8524),R=T(42151),k=T(34251),O=function(){this.group=new L,this.uid=R.getUID("viewComponent")},D=O.prototype={constructor:O,init:function(I,S){},render:function(I,S,_,g){},dispose:function(){},filterForExposedEvent:null};D.updateView=D.updateLayout=D.updateVisual=function(I,S,_,g){},k.enableClassExtend(O),k.enableClassManagement(O,{registerWhenExtend:!0});var E=O;W.exports=E},72019:W=>{W.exports=function(G,T){this.getAllNames=function(){var L=T();return L.mapArray(L.getName)},this.containName=function(L){return T().indexOfName(L)>=0},this.indexOfName=function(L){return G().indexOfName(L)},this.getItemVisual=function(L,R){return G().getItemVisual(L,R)}}},59937:(W,G,T)=>{var L=T(33051),R=T(21092),k=T(85669).linearMap,O=L.each,D=L.isObject,E=function(r){var n=r.mappingMethod,h=r.type,p=this.option=L.clone(r);this.type=h,this.mappingMethod=n,this._normalizeData=s[n];var d=I[h];this.applyVisual=d.applyVisual,this.getColorMapper=d.getColorMapper,this._doMap=d._doMap[n],n==="piecewise"?(S(p),function(f){var v=f.pieceList;f.hasSpecialVisual=!1,L.each(v,function(m,y){m.originIndex=y,m.visual!=null&&(f.hasSpecialVisual=!0)})}(p)):n==="category"?p.categories?function(f){var v=f.categories,m=f.visual,y=f.categoryMap={};if(O(v,function(M,C){y[M]=C}),!L.isArray(m)){var x=[];L.isObject(m)?O(m,function(M,C){var A=y[C];x[A!=null?A:-1]=M}):x[-1]=m,m=i(f,x)}for(var w=v.length-1;w>=0;w--)m[w]==null&&(delete y[v[w]],v.pop())}(p):S(p,!0):(L.assert(n!=="linear"||p.dataExtent),S(p))};E.prototype={constructor:E,mapValueToVisual:function(r){var n=this._normalizeData(r);return this._doMap(n,r)},getNormalizer:function(){return L.bind(this._normalizeData,this)}};var I=E.visualHandlers={color:{applyVisual:u("color"),getColorMapper:function(){var r=this.option;return L.bind(r.mappingMethod==="category"?function(n,h){return!h&&(n=this._normalizeData(n)),c.call(this,n)}:function(n,h,p){var d=!!p;return!h&&(n=this._normalizeData(n)),p=R.fastLerp(n,r.parsedVisual,p),d?p:R.stringify(p,"rgba")},this)},_doMap:{linear:function(r){return R.stringify(R.fastLerp(r,this.option.parsedVisual),"rgba")},category:c,piecewise:function(r,n){var h=t.call(this,n);return h==null&&(h=R.stringify(R.fastLerp(r,this.option.parsedVisual),"rgba")),h},fixed:l}},colorHue:_(function(r,n){return R.modifyHSL(r,n)}),colorSaturation:_(function(r,n){return R.modifyHSL(r,null,n)}),colorLightness:_(function(r,n){return R.modifyHSL(r,null,null,n)}),colorAlpha:_(function(r,n){return R.modifyAlpha(r,n)}),opacity:{applyVisual:u("opacity"),_doMap:e([0,1])},liftZ:{applyVisual:u("liftZ"),_doMap:{linear:l,category:l,piecewise:l,fixed:l}},symbol:{applyVisual:function(r,n,h){var p=this.mapValueToVisual(r);if(L.isString(p))h("symbol",p);else if(D(p))for(var d in p)p.hasOwnProperty(d)&&h(d,p[d])},_doMap:{linear:g,category:c,piecewise:function(r,n){var h=t.call(this,n);return h==null&&(h=g.call(this,r)),h},fixed:l}},symbolSize:{applyVisual:u("symbolSize"),_doMap:e([0,1])}};function S(r,n){var h=r.visual,p=[];L.isObject(h)?O(h,function(d){p.push(d)}):h!=null&&p.push(h),n||p.length!==1||{color:1,symbol:1}.hasOwnProperty(r.type)||(p[1]=p[0]),i(r,p)}function _(r){return{applyVisual:function(n,h,p){n=this.mapValueToVisual(n),p("color",r(h("color"),n))},_doMap:e([0,1])}}function g(r){var n=this.option.visual;return n[Math.round(k(r,[0,1],[0,n.length-1],!0))]||{}}function u(r){return function(n,h,p){p(r,this.mapValueToVisual(n))}}function c(r){var n=this.option.visual;return n[this.option.loop&&r!==-1?r%n.length:r]}function l(){return this.option.visual[0]}function e(r){return{linear:function(n){return k(n,r,this.option.visual,!0)},category:c,piecewise:function(n,h){var p=t.call(this,h);return p==null&&(p=k(n,r,this.option.visual,!0)),p},fixed:l}}function t(r){var n=this.option,h=n.pieceList;if(n.hasSpecialVisual){var p=h[E.findPieceIndex(r,h)];if(p&&p.visual)return p.visual[this.type]}}function i(r,n){return r.visual=n,r.type==="color"&&(r.parsedVisual=L.map(n,function(h){return R.parse(h)})),n}var s={linear:function(r){return k(r,this.option.dataExtent,[0,1],!0)},piecewise:function(r){var n=this.option.pieceList,h=E.findPieceIndex(r,n,!0);if(h!=null)return k(h,[0,n.length-1],[0,1],!0)},category:function(r){var n=this.option.categories?this.option.categoryMap[r]:r;return n==null?-1:n},fixed:L.noop};function a(r,n,h){return r?n<=h:n<h}E.listVisualTypes=function(){var r=[];return L.each(I,function(n,h){r.push(h)}),r},E.addVisualHandler=function(r,n){I[r]=n},E.isValidType=function(r){return I.hasOwnProperty(r)},E.eachVisual=function(r,n,h){L.isObject(r)?L.each(r,n,h):n.call(h,r)},E.mapVisual=function(r,n,h){var p,d=L.isArray(r)?[]:L.isObject(r)?{}:(p=!0,null);return E.eachVisual(r,function(f,v){var m=n.call(h,f,v);p?d=m:d[v]=m}),d},E.retrieveVisuals=function(r){var n,h={};return r&&O(I,function(p,d){r.hasOwnProperty(d)&&(h[d]=r[d],n=!0)}),n?h:null},E.prepareVisualTypes=function(r){if(D(r)){var n=[];O(r,function(h,p){n.push(p)}),r=n}else{if(!L.isArray(r))return[];r=r.slice()}return r.sort(function(h,p){return p==="color"&&h!=="color"&&h.indexOf("color")===0?1:-1}),r},E.dependsOn=function(r,n){return n==="color"?!(!r||r.indexOf(n)!==0):r===n},E.findPieceIndex=function(r,n,h){for(var p,d=1/0,f=0,v=n.length;f<v;f++){var m=n[f].value;if(m!=null){if(m===r||typeof m=="string"&&m===r+"")return f;h&&M(m,f)}}for(f=0,v=n.length;f<v;f++){var y=n[f],x=y.interval,w=y.close;if(x){if(x[0]===-1/0){if(a(w[1],r,x[1]))return f}else if(x[1]===1/0){if(a(w[0],x[0],r))return f}else if(a(w[0],x[0],r)&&a(w[1],r,x[1]))return f;h&&M(x[0],f),h&&M(x[1],f)}}if(h)return r===1/0?n.length-1:r===-1/0?0:p;function M(C,A){var P=Math.abs(C-r);P<d&&(d=P,p=A)}};var o=E;W.exports=o},13825:(W,G,T)=>{var L=T(33051),R=T(40292),k=T(68540).retrieveRawValue;W.exports=function(O,D){var E=D.getModel("aria");if(E.get("show"))if(E.get("description"))O.setAttribute("aria-label",E.get("description"));else{var I=0;D.eachSeries(function(i,s){++I},this);var S,_=E.get("data.maxCount")||10,g=E.get("series.maxCount")||10,u=Math.min(I,g);if(!(I<1)){var c=function(){var i=D.getModel("title").option;return i&&i.length&&(i=i[0]),i&&i.text}();S=c?e(t("general.withTitle"),{title:c}):t("general.withoutTitle");var l=[];S+=e(t(I>1?"series.multiple.prefix":"series.single.prefix"),{seriesCount:I}),D.eachSeries(function(i,s){if(s<u){var a,o=i.get("name"),r="series."+(I>1?"multiple":"single")+".";a=e(a=t(o?r+"withName":r+"withoutName"),{seriesId:i.seriesIndex,seriesName:i.get("name"),seriesType:(v=i.subType,R.series.typeNames[v]||"\u81EA\u5B9A\u4E49\u56FE")});var n=i.getData();window.data=n,n.count()>_?a+=e(t("data.partialData"),{displayCnt:_}):a+=t("data.allData");for(var h=[],p=0;p<n.count();p++)if(p<_){var d=n.getName(p),f=k(n,p);h.push(e(t(d?"data.withName":"data.withoutName"),{name:d,value:f}))}a+=h.join(t("data.separator.middle"))+t("data.separator.end"),l.push(a)}var v}),S+=l.join(t("series.multiple.separator.middle"))+t("series.multiple.separator.end"),O.setAttribute("aria-label",S)}}function e(i,s){if(typeof i!="string")return i;var a=i;return L.each(s,function(o,r){a=a.replace(new RegExp("\\{\\s*"+r+"\\s*\\}","g"),o)}),a}function t(i){var s=E.get(i);if(s==null){for(var a=i.split("."),o=R.aria,r=0;r<a.length;++r)o=o[a[r]];return o}return s}}},69274:(W,G,T)=>{var L=T(33051).createHashMap;W.exports=function(R){return{getTargetSeries:function(k){var O={},D=L();return k.eachSeriesByType(R,function(E){E.__paletteScope=O,D.set(E.uid,E)}),D},reset:function(k,O){var D=k.getRawData(),E={},I=k.getData();I.each(function(S){var _=I.getRawIndex(S);E[_]=S}),D.each(function(S){var _,g=E[S],u=g!=null&&I.getItemVisual(g,"color",!0),c=g!=null&&I.getItemVisual(g,"borderColor",!0);if(u&&c||(_=D.getItemModel(S)),!u){var l=_.get("itemStyle.color")||k.getColorFromPalette(D.getName(S)||S+"",k.__paletteScope,D.count());g!=null&&I.setItemVisual(g,"color",l)}if(!c){var e=_.get("itemStyle.borderColor");g!=null&&I.setItemVisual(g,"borderColor",e)}})}}}},7141:(W,G,T)=>{var L=T(31797),R=T(33051).isFunction,k={createOnAllSeries:!0,performRawSeries:!0,reset:function(O,D){var E=O.getData(),I=(O.visualColorAccessPath||"itemStyle.color").split("."),S=O.get(I),_=!R(S)||S instanceof L?null:S;S&&!_||(S=O.getColorFromPalette(O.name,null,D.getSeriesCount())),E.setVisual("color",S);var g=(O.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),u=O.get(g);if(E.setVisual("borderColor",u),!D.isSeriesFiltered(O))return _&&E.each(function(c){E.setItemVisual(c,"color",_(O.getDataParams(c)))}),{dataEach:E.hasItemOption?function(c,l){var e=c.getItemModel(l),t=e.get(I,!0),i=e.get(g,!0);t!=null&&c.setItemVisual(l,"color",t),i!=null&&c.setItemVisual(l,"borderColor",i)}:null}}};W.exports=k},34586:(W,G,T)=>{var L=T(33051).isFunction;W.exports=function(R,k,O){return{seriesType:R,performRawSeries:!0,reset:function(D,E,I){var S=D.getData(),_=D.get("symbol"),g=D.get("symbolSize"),u=D.get("symbolKeepAspect"),c=D.get("symbolRotate"),l=L(_),e=L(g),t=L(c),i=l||e||t,s=!l&&_?_:k,a=e?null:g;if(S.setVisual({legendSymbol:O||s,symbol:s,symbolSize:a,symbolKeepAspect:u,symbolRotate:c}),!E.isSeriesFiltered(D))return{dataEach:S.hasItemOption||i?function(o,r){if(i){var n=D.getRawValue(r),h=D.getDataParams(r);l&&o.setItemVisual(r,"symbol",_(n,h)),e&&o.setItemVisual(r,"symbolSize",g(n,h)),t&&o.setItemVisual(r,"symbolRotate",c(n,h))}if(o.hasItemOption){var p=o.getItemModel(r),d=p.getShallow("symbol",!0),f=p.getShallow("symbolSize",!0),v=p.getShallow("symbolRotate",!0),m=p.getShallow("symbolKeepAspect",!0);d!=null&&o.setItemVisual(r,"symbol",d),f!=null&&o.setItemVisual(r,"symbolSize",f),v!=null&&o.setItemVisual(r,"symbolRotate",v),m!=null&&o.setItemVisual(r,"symbolKeepAspect",m)}}:null}}}}},82300:(W,G,T)=>{var L=T(33051),R={get:function(D,E,I){var S=L.clone((k[D]||{})[E]);return I&&L.isArray(S)?S[S.length-1]:S}},k={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},O=R;W.exports=O},30801:(W,G,T)=>{var L=T(33051),R=T(59937),k=L.each;function O(D){if(D){for(var E in D)if(D.hasOwnProperty(E))return!0}}G.createVisualMappings=function(D,E,I){var S={};return k(E,function(_){var g,u=S[_]=((g=function(){}).prototype.__hidden=g.prototype,new g);k(D[_],function(c,l){if(R.isValidType(l)){var e={type:l,visual:c};I&&I(e,_),u[l]=new R(e),l==="opacity"&&((e=L.clone(e)).type="colorAlpha",u.__hidden.__alphaForOpacity=new R(e))}})}),S},G.replaceVisualOption=function(D,E,I){var S;L.each(I,function(_){E.hasOwnProperty(_)&&O(E[_])&&(S=!0)}),S&&L.each(I,function(_){E.hasOwnProperty(_)&&O(E[_])?D[_]=L.clone(E[_]):delete D[_]})},G.applyVisual=function(D,E,I,S,_,g){var u,c={};function l(i){return I.getItemVisual(u,i)}function e(i,s){I.setItemVisual(u,i,s)}function t(i,s){u=g==null?i:s;var a=I.getRawDataItem(u);if(!a||a.visualMap!==!1)for(var o=S.call(_,i),r=E[o],n=c[o],h=0,p=n.length;h<p;h++){var d=n[h];r[d]&&r[d].applyVisual(i,l,e)}}L.each(D,function(i){var s=R.prepareVisualTypes(E[i]);c[i]=s}),g==null?I.each(t):I.each([g],t)},G.incrementalApplyVisual=function(D,E,I,S){var _={};return L.each(D,function(g){var u=R.prepareVisualTypes(E[g]);_[g]=u}),{progress:function(g,u){function c(p){return u.getItemVisual(e,p)}function l(p,d){u.setItemVisual(e,p,d)}var e;for(S!=null&&(S=u.getDimension(S));(e=g.next())!=null;){var t=u.getRawDataItem(e);if(!t||t.visualMap!==!1)for(var i=S!=null?u.get(S,e,!0):e,s=I(i),a=E[s],o=_[s],r=0,n=o.length;r<n;r++){var h=o[r];a[h]&&a[h].applyVisual(i,c,l)}}}}}},85823:(W,G,T)=>{var L=T(78038),R=T(41502),k=T(58023),O=T(7131),D=T(33051),E=function(S){k.call(this,S),R.call(this,S),O.call(this,S),this.id=S.id||L()};E.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(S,_){switch(this.draggable){case"horizontal":_=0;break;case"vertical":S=0}var g=this.transform;g||(g=this.transform=[1,0,0,1,0,0]),g[4]+=S,g[5]+=_,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(S,_){},attrKV:function(S,_){if(S==="position"||S==="scale"||S==="origin"){if(_){var g=this[S];g||(g=this[S]=[]),g[0]=_[0],g[1]=_[1]}}else this[S]=_},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(S,_){if(typeof S=="string")this.attrKV(S,_);else if(D.isObject(S))for(var g in S)S.hasOwnProperty(g)&&this.attrKV(g,S[g]);return this.dirty(!1),this},setClipPath:function(S){var _=this.__zr;_&&S.addSelfToZr(_),this.clipPath&&this.clipPath!==S&&this.removeClipPath(),this.clipPath=S,S.__zr=_,S.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var S=this.clipPath;S&&(S.__zr&&S.removeSelfFromZr(S.__zr),S.__zr=null,S.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(S){this.__zr=S;var _=this.animators;if(_)for(var g=0;g<_.length;g++)S.animation.addAnimator(_[g]);this.clipPath&&this.clipPath.addSelfToZr(S)},removeSelfFromZr:function(S){this.__zr=null;var _=this.animators;if(_)for(var g=0;g<_.length;g++)S.animation.removeAnimator(_[g]);this.clipPath&&this.clipPath.removeSelfFromZr(S)}},D.mixin(E,O),D.mixin(E,k),D.mixin(E,R);var I=E;W.exports=I},48173:(W,G,T)=>{var L=T(33051),R=T(45280),k=T(17780),O=T(41502),D=T(61158),E=T(49399),I="silent";function S(){D.stop(this.event)}function _(){}_.prototype.dispose=function(){};var g=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],u=function(t,i,s,a){O.call(this),this.storage=t,this.painter=i,this.painterRoot=a,s=s||new _,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,k.call(this),this.setHandlerProxy(s)};function c(t,i,s){if(t[t.rectHover?"rectContain":"contain"](i,s)){for(var a,o=t;o;){if(o.clipPath&&!o.clipPath.contain(i,s))return!1;o.silent&&(a=!0),o=o.parent}return!a||I}return!1}function l(t,i,s){var a=t.painter;return i<0||i>a.getWidth()||s<0||s>a.getHeight()}u.prototype={constructor:u,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(L.each(g,function(i){t.on&&t.on(i,this[i],this)},this),t.handler=this),this.proxy=t},mousemove:function(t){var i=t.zrX,s=t.zrY,a=l(this,i,s),o=this._hovered,r=o.target;r&&!r.__zr&&(r=(o=this.findHover(o.x,o.y)).target);var n=this._hovered=a?{x:i,y:s}:this.findHover(i,s),h=n.target,p=this.proxy;p.setCursor&&p.setCursor(h?h.cursor:"default"),r&&h!==r&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(n,"mousemove",t),h&&h!==r&&this.dispatchToElement(n,"mouseover",t)},mouseout:function(t){var i=t.zrEventControl,s=t.zrIsToLocalDOM;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),i!=="no_globalout"&&!s&&this.trigger("globalout",{type:"globalout",event:t})},resize:function(t){this._hovered={}},dispatch:function(t,i){var s=this[t];s&&s.call(this,i)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var i=this.proxy;i.setCursor&&i.setCursor(t)},dispatchToElement:function(t,i,s){var a=(t=t||{}).target;if(!a||!a.silent){for(var o="on"+i,r=function(n,h,p){return{type:n,event:p,target:h.target,topTarget:h.topTarget,cancelBubble:!1,offsetX:p.zrX,offsetY:p.zrY,gestureEvent:p.gestureEvent,pinchX:p.pinchX,pinchY:p.pinchY,pinchScale:p.pinchScale,wheelDelta:p.zrDelta,zrByTouch:p.zrByTouch,which:p.which,stop:S}}(i,t,s);a&&(a[o]&&(r.cancelBubble=a[o].call(a,r)),a.trigger(i,r),a=a.parent,!r.cancelBubble););r.cancelBubble||(this.trigger(i,r),this.painter&&this.painter.eachOtherLayer(function(n){typeof n[o]=="function"&&n[o].call(n,r),n.trigger&&n.trigger(i,r)}))}},findHover:function(t,i,s){for(var a=this.storage.getDisplayList(),o={x:t,y:i},r=a.length-1;r>=0;r--){var n;if(a[r]!==s&&!a[r].ignore&&(n=c(a[r],t,i))&&(!o.topTarget&&(o.topTarget=a[r]),n!==I)){o.target=a[r];break}}return o},processGesture:function(t,i){this._gestureMgr||(this._gestureMgr=new E);var s=this._gestureMgr;i==="start"&&s.clear();var a=s.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(i==="end"&&s.clear(),a){var o=a.type;t.gestureEvent=o,this.dispatchToElement({target:a.target},o,a.event)}}},L.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){u.prototype[t]=function(i){var s,a,o=i.zrX,r=i.zrY,n=l(this,o,r);if(t==="mouseup"&&n||(a=(s=this.findHover(o,r)).target),t==="mousedown")this._downEl=a,this._downPoint=[i.zrX,i.zrY],this._upEl=a;else if(t==="mouseup")this._upEl=a;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||R.dist(this._downPoint,[i.zrX,i.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,t,i)}}),L.mixin(u,O),L.mixin(u,k);var e=u;W.exports=e},39559:(W,G,T)=>{var L=T(33051),R=T(4990).devicePixelRatio,k=T(40342),O=T(31870);function D(){return!1}function E(_,g,u){var c=L.createCanvas(),l=g.getWidth(),e=g.getHeight(),t=c.style;return t&&(t.position="absolute",t.left=0,t.top=0,t.width=l+"px",t.height=e+"px",c.setAttribute("data-zr-dom-id",_)),c.width=l*u,c.height=e*u,c}var I=function(_,g,u){var c;u=u||R,typeof _=="string"?c=E(_,g,u):L.isObject(_)&&(_=(c=_).id),this.id=_,this.dom=c;var l=c.style;l&&(c.onselectstart=D,l["-webkit-user-select"]="none",l["user-select"]="none",l["-webkit-touch-callout"]="none",l["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",l.padding=0,l.margin=0,l["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=g,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=u};I.prototype={constructor:I,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var _=this.dpr;this.domBack=E("back-"+this.id,this.painter,_),this.ctxBack=this.domBack.getContext("2d"),_!==1&&this.ctxBack.scale(_,_)},resize:function(_,g){var u=this.dpr,c=this.dom,l=c.style,e=this.domBack;l&&(l.width=_+"px",l.height=g+"px"),c.width=_*u,c.height=g*u,e&&(e.width=_*u,e.height=g*u,u!==1&&this.ctxBack.scale(u,u))},clear:function(_,g){var u,c=this.dom,l=this.ctx,e=c.width,t=c.height,i=(g=g||this.clearColor,this.motionBlur&&!_),s=this.lastFrameAlpha,a=this.dpr;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(c,0,0,e/a,t/a)),l.clearRect(0,0,e,t),g&&g!=="transparent"&&(g.colorStops?(u=g.__canvasGradient||k.getGradient(l,g,{x:0,y:0,width:e,height:t}),g.__canvasGradient=u):g.image&&(u=O.prototype.getCanvasPattern.call(g,l)),l.save(),l.fillStyle=u||g,l.fillRect(0,0,e,t),l.restore()),i){var o=this.domBack;l.save(),l.globalAlpha=s,l.drawImage(o,0,0,e,t),l.restore()}}};var S=I;W.exports=S},19847:(W,G,T)=>{var L=T(4990).devicePixelRatio,R=T(33051),k=T(48612),O=T(60479),D=T(19455),E=T(39559),I=T(22795),S=T(44535),_=T(66387),g=1e5,u=314159,c=.01;function l(a){return parseInt(a,10)}var e=new O(0,0,0,0),t=new O(0,0,0,0),i=function(a,o,r){this.type="canvas";var n=!a.nodeName||a.nodeName.toUpperCase()==="CANVAS";this._opts=r=R.extend({},r||{}),this.dpr=r.devicePixelRatio||L,this._singleCanvas=n,this.root=a;var h=a.style;h&&(h["-webkit-tap-highlight-color"]="transparent",h["-webkit-user-select"]=h["user-select"]=h["-webkit-touch-callout"]="none",a.innerHTML=""),this.storage=o;var p=this._zlevelList=[],d=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,n){var f=a.width,v=a.height;r.width!=null&&(f=r.width),r.height!=null&&(v=r.height),this.dpr=r.devicePixelRatio||1,a.width=f*this.dpr,a.height=v*this.dpr,this._width=f,this._height=v;var m=new E(a,this,this.dpr);m.__builtin__=!0,m.initContext(),d[314159]=m,m.zlevel=u,p.push(u),this._domRoot=a}else{this._width=this._getSize(0),this._height=this._getSize(1);var y=this._domRoot=function(x,w){var M=document.createElement("div");return M.style.cssText=["position:relative","width:"+x+"px","height:"+w+"px","padding:0","margin:0","border-width:0"].join(";")+";",M}(this._width,this._height);a.appendChild(y)}this._hoverlayer=null,this._hoverElements=[]};i.prototype={constructor:i,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var a=this.getViewportRoot();if(a)return{offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}},refresh:function(a){var o=this.storage.getDisplayList(!0),r=this._zlevelList;this._redrawId=Math.random(),this._paintList(o,a,this._redrawId);for(var n=0;n<r.length;n++){var h=r[n],p=this._layers[h];if(!p.__builtin__&&p.refresh){var d=n===0?this._backgroundColor:null;p.refresh(d)}}return this.refreshHover(),this},addHover:function(a,o){if(!a.__hoverMir){var r=new a.constructor({style:a.style,shape:a.shape,z:a.z,z2:a.z2,silent:a.silent});return r.__from=a,a.__hoverMir=r,o&&r.setStyle(o),this._hoverElements.push(r),r}},removeHover:function(a){var o=a.__hoverMir,r=this._hoverElements,n=R.indexOf(r,o);n>=0&&r.splice(n,1),a.__hoverMir=null},clearHover:function(a){for(var o=this._hoverElements,r=0;r<o.length;r++){var n=o[r].__from;n&&(n.__hoverMir=null)}o.length=0},refreshHover:function(){var a=this._hoverElements,o=a.length,r=this._hoverlayer;if(r&&r.clear(),o){D(a,this.storage.displayableSortFunc),r||(r=this._hoverlayer=this.getLayer(g));var n={};r.ctx.save();for(var h=0;h<o;){var p=a[h],d=p.__from;d&&d.__zr?(h++,d.invisible||(p.transform=d.transform,p.invTransform=d.invTransform,p.__clipPaths=d.__clipPaths,this._doPaintEl(p,r,!0,n))):(a.splice(h,1),d.__hoverMir=null,o--)}r.ctx.restore()}},getHoverLayer:function(){return this.getLayer(g)},_paintList:function(a,o,r){if(this._redrawId===r){o=o||!1,this._updateLayerStatus(a);var n=this._doPaintList(a,o);if(this._needsManuallyCompositing&&this._compositeManually(),!n){var h=this;I(function(){h._paintList(a,o,r)})}}},_compositeManually:function(){var a=this.getLayer(u).ctx,o=this._domRoot.width,r=this._domRoot.height;a.clearRect(0,0,o,r),this.eachBuiltinLayer(function(n){n.virtual&&a.drawImage(n.dom,0,0,o,r)})},_doPaintList:function(a,o){for(var r=[],n=0;n<this._zlevelList.length;n++){var h=this._zlevelList[n];(f=this._layers[h]).__builtin__&&f!==this._hoverlayer&&(f.__dirty||o)&&r.push(f)}for(var p=!0,d=0;d<r.length;d++){var f,v=(f=r[d]).ctx,m={};v.save();var y=o?f.__startIndex:f.__drawIndex,x=!o&&f.incremental&&Date.now,w=x&&Date.now(),M=f.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(f.__startIndex===f.__endIndex)f.clear(!1,M);else if(y===f.__startIndex){var C=a[y];C.incremental&&C.notClear&&!o||f.clear(!1,M)}y===-1&&(console.error("For some unknown reason. drawIndex is -1"),y=f.__startIndex);for(var A=y;A<f.__endIndex;A++){var P=a[A];if(this._doPaintEl(P,f,o,m),P.__dirty=P.__dirtyText=!1,x&&Date.now()-w>15)break}f.__drawIndex=A,f.__drawIndex<f.__endIndex&&(p=!1),m.prevElClipPaths&&v.restore(),v.restore()}return _.wxa&&R.each(this._layers,function(b){b&&b.ctx&&b.ctx.draw&&b.ctx.draw()}),p},_doPaintEl:function(a,o,r,n){var h=o.ctx,p=a.transform;if((o.__dirty||r)&&!a.invisible&&a.style.opacity!==0&&(!p||p[0]||p[3])&&(!a.culling||!function(v,m,y){return e.copy(v.getBoundingRect()),v.transform&&e.applyTransform(v.transform),t.width=m,t.height=y,!e.intersect(t)}(a,this._width,this._height))){var d=a.__clipPaths,f=n.prevElClipPaths;f&&!function(v,m){if(v===m)return!1;if(!v||!m||v.length!==m.length)return!0;for(var y=0;y<v.length;y++)if(v[y]!==m[y])return!0;return!1}(d,f)||(f&&(h.restore(),n.prevElClipPaths=null,n.prevEl=null),d&&(h.save(),function(v,m){for(var y=0;y<v.length;y++){var x=v[y];x.setTransform(m),m.beginPath(),x.buildPath(m,x.shape),m.clip(),x.restoreTransform(m)}}(d,h),n.prevElClipPaths=d)),a.beforeBrush&&a.beforeBrush(h),a.brush(h,n.prevEl||null),n.prevEl=a,a.afterBrush&&a.afterBrush(h)}},getLayer:function(a,o){this._singleCanvas&&!this._needsManuallyCompositing&&(a=u);var r=this._layers[a];return r||((r=new E("zr_"+a,this,this.dpr)).zlevel=a,r.__builtin__=!0,this._layerConfig[a]?R.merge(r,this._layerConfig[a],!0):this._layerConfig[a-c]&&R.merge(r,this._layerConfig[a-c],!0),o&&(r.virtual=o),this.insertLayer(a,r),r.initContext()),r},insertLayer:function(a,o){var r=this._layers,n=this._zlevelList,h=n.length,p=null,d=-1,f=this._domRoot;if(r[a])k("ZLevel "+a+" has been used already");else if(function(m){return!!m&&(!!m.__builtin__||typeof m.resize=="function"&&typeof m.refresh=="function")}(o)){if(h>0&&a>n[0]){for(d=0;d<h-1&&!(n[d]<a&&n[d+1]>a);d++);p=r[n[d]]}if(n.splice(d+1,0,a),r[a]=o,!o.virtual)if(p){var v=p.dom;v.nextSibling?f.insertBefore(o.dom,v.nextSibling):f.appendChild(o.dom)}else f.firstChild?f.insertBefore(o.dom,f.firstChild):f.appendChild(o.dom)}else k("Layer of zlevel "+a+" is not valid")},eachLayer:function(a,o){var r,n,h=this._zlevelList;for(n=0;n<h.length;n++)r=h[n],a.call(o,this._layers[r],r)},eachBuiltinLayer:function(a,o){var r,n,h,p=this._zlevelList;for(h=0;h<p.length;h++)n=p[h],(r=this._layers[n]).__builtin__&&a.call(o,r,n)},eachOtherLayer:function(a,o){var r,n,h,p=this._zlevelList;for(h=0;h<p.length;h++)n=p[h],(r=this._layers[n]).__builtin__||a.call(o,r,n)},getLayers:function(){return this._layers},_updateLayerStatus:function(a){function o(m){h&&(h.__endIndex!==m&&(h.__dirty=!0),h.__endIndex=m)}if(this.eachBuiltinLayer(function(m,y){m.__dirty=m.__used=!1}),this._singleCanvas){for(var r=1;r<a.length;r++)if((d=a[r]).zlevel!==a[r-1].zlevel||d.incremental){this._needsManuallyCompositing=!0;break}}var n,h=null,p=0;for(r=0;r<a.length;r++){var d,f,v=(d=a[r]).zlevel;n!==v&&(n=v,p=0),d.incremental?((f=this.getLayer(v+.001,this._needsManuallyCompositing)).incremental=!0,p=1):f=this.getLayer(v+(p>0?c:0),this._needsManuallyCompositing),f.__builtin__||k("ZLevel "+v+" has been used by unkown layer "+f.id),f!==h&&(f.__used=!0,f.__startIndex!==r&&(f.__dirty=!0),f.__startIndex=r,f.incremental?f.__drawIndex=-1:f.__drawIndex=r,o(r),h=f),d.__dirty&&(f.__dirty=!0,f.incremental&&f.__drawIndex<0&&(f.__drawIndex=r))}o(r),this.eachBuiltinLayer(function(m,y){!m.__used&&m.getElementCount()>0&&(m.__dirty=!0,m.__startIndex=m.__endIndex=m.__drawIndex=0),m.__dirty&&m.__drawIndex<0&&(m.__drawIndex=m.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(a){a.clear()},setBackgroundColor:function(a){this._backgroundColor=a},configLayer:function(a,o){if(o){var r=this._layerConfig;r[a]?R.merge(r[a],o,!0):r[a]=o;for(var n=0;n<this._zlevelList.length;n++){var h=this._zlevelList[n];if(h===a||h===a+c){var p=this._layers[h];R.merge(p,r[a],!0)}}}},delLayer:function(a){var o=this._layers,r=this._zlevelList,n=o[a];n&&(n.dom.parentNode.removeChild(n.dom),delete o[a],r.splice(R.indexOf(r,a),1))},resize:function(a,o){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var n=this._opts;if(a!=null&&(n.width=a),o!=null&&(n.height=o),a=this._getSize(0),o=this._getSize(1),r.style.display="",this._width!==a||o!==this._height){for(var h in r.style.width=a+"px",r.style.height=o+"px",this._layers)this._layers.hasOwnProperty(h)&&this._layers[h].resize(a,o);R.each(this._progressiveLayers,function(p){p.resize(a,o)}),this.refresh(!0)}this._width=a,this._height=o}else{if(a==null||o==null)return;this._width=a,this._height=o,this.getLayer(u).resize(a,o)}return this},clearLayer:function(a){var o=this._layers[a];o&&o.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(a){if(a=a||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var o=new E("image",this,a.pixelRatio||this.dpr);if(o.initContext(),o.clear(!1,a.backgroundColor||this._backgroundColor),a.pixelRatio<=this.dpr){this.refresh();var r=o.dom.width,n=o.dom.height,h=o.ctx;this.eachLayer(function(m){m.__builtin__?h.drawImage(m.dom,0,0,r,n):m.renderToCanvas&&(o.ctx.save(),m.renderToCanvas(o.ctx),o.ctx.restore())})}else for(var p={},d=this.storage.getDisplayList(!0),f=0;f<d.length;f++){var v=d[f];this._doPaintEl(v,o,!0,p)}return o.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(a){var o=this._opts,r=["width","height"][a],n=["clientWidth","clientHeight"][a],h=["paddingLeft","paddingTop"][a],p=["paddingRight","paddingBottom"][a];if(o[r]!=null&&o[r]!=="auto")return parseFloat(o[r]);var d=this.root,f=document.defaultView.getComputedStyle(d);return(d[n]||l(f[r])||l(d.style[r]))-(l(f[h])||0)-(l(f[p])||0)|0},pathToImage:function(a,o){o=o||this.dpr;var r=document.createElement("canvas"),n=r.getContext("2d"),h=a.getBoundingRect(),p=a.style,d=p.shadowBlur*o,f=p.shadowOffsetX*o,v=p.shadowOffsetY*o,m=p.hasStroke()?p.lineWidth:0,y=Math.max(m/2,-f+d),x=Math.max(m/2,f+d),w=Math.max(m/2,-v+d),M=Math.max(m/2,v+d),C=h.width+y+x,A=h.height+w+M;r.width=C*o,r.height=A*o,n.scale(o,o),n.clearRect(0,0,C,A),n.dpr=o;var P={position:a.position,rotation:a.rotation,scale:a.scale};a.position=[y-h.x,w-h.y],a.rotation=0,a.scale=[1,1],a.updateTransform(),a&&a.brush(n);var b=new S({style:{x:0,y:0,image:r}});return P.position!=null&&(b.position=a.position=P.position),P.rotation!=null&&(b.rotation=a.rotation=P.rotation),P.scale!=null&&(b.scale=a.scale=P.scale),b}};var s=i;W.exports=s},8822:(W,G,T)=>{var L=T(33051),R=T(66387),k=T(8524),O=T(19455);function D(S,_){return S.zlevel===_.zlevel?S.z===_.z?S.z2-_.z2:S.z-_.z:S.zlevel-_.zlevel}var E=function(){this._roots=[],this._displayList=[],this._displayListLen=0};E.prototype={constructor:E,traverse:function(S,_){for(var g=0;g<this._roots.length;g++)this._roots[g].traverse(S,_)},getDisplayList:function(S,_){return _=_||!1,S&&this.updateDisplayList(_),this._displayList},updateDisplayList:function(S){this._displayListLen=0;for(var _=this._roots,g=this._displayList,u=0,c=_.length;u<c;u++)this._updateAndAddDisplayable(_[u],null,S);g.length=this._displayListLen,R.canvasSupported&&O(g,D)},_updateAndAddDisplayable:function(S,_,g){if(!S.ignore||g){S.beforeUpdate(),S.__dirty&&S.update(),S.afterUpdate();var u=S.clipPath;if(u){_=_?_.slice():[];for(var c=u,l=S;c;)c.parent=l,c.updateTransform(),_.push(c),l=c,c=c.clipPath}if(S.isGroup){for(var e=S._children,t=0;t<e.length;t++){var i=e[t];S.__dirty&&(i.__dirty=!0),this._updateAndAddDisplayable(i,_,g)}S.__dirty=!1}else S.__clipPaths=_,this._displayList[this._displayListLen++]=S}},addRoot:function(S){S.__storage!==this&&(S instanceof k&&S.addChildrenToStorage(this),this.addToStorage(S),this._roots.push(S))},delRoot:function(S){if(S==null){for(var _=0;_<this._roots.length;_++){var g=this._roots[_];g instanceof k&&g.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(S instanceof Array){_=0;for(var u=S.length;_<u;_++)this.delRoot(S[_])}else{var c=L.indexOf(this._roots,S);c>=0&&(this.delFromStorage(S),this._roots.splice(c,1),S instanceof k&&S.delChildrenFromStorage(this))}},addToStorage:function(S){return S&&(S.__storage=this,S.dirty(!1)),this},delFromStorage:function(S){return S&&(S.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:D};var I=E;W.exports=I},76069:(W,G,T)=>{var L=T(33051),R=T(61158).Dispatcher,k=T(22795),O=T(64383),D=function(I){I=I||{},this.stage=I.stage||{},this.onframe=I.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,R.call(this)};D.prototype={constructor:D,addClip:function(I){this._clips.push(I)},addAnimator:function(I){I.animation=this;for(var S=I.getClips(),_=0;_<S.length;_++)this.addClip(S[_])},removeClip:function(I){var S=L.indexOf(this._clips,I);S>=0&&this._clips.splice(S,1)},removeAnimator:function(I){for(var S=I.getClips(),_=0;_<S.length;_++)this.removeClip(S[_]);I.animation=null},_update:function(){for(var I=new Date().getTime()-this._pausedTime,S=I-this._time,_=this._clips,g=_.length,u=[],c=[],l=0;l<g;l++){var e=_[l],t=e.step(I,S);t&&(u.push(t),c.push(e))}for(l=0;l<g;)_[l]._needsRemove?(_[l]=_[g-1],_.pop(),g--):l++;for(g=u.length,l=0;l<g;l++)c[l].fire(u[l]);this._time=I,this.onframe(S),this.trigger("frame",S),this.stage.update&&this.stage.update()},_startLoop:function(){var I=this;this._running=!0,k(function S(){I._running&&(k(S),!I._paused&&I._update())})},start:function(){this._time=new Date().getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=new Date().getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=new Date().getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(I,S){var _=new O(I,(S=S||{}).loop,S.getter,S.setter);return this.addAnimator(_),_}},L.mixin(D,R);var E=D;W.exports=E},64383:(W,G,T)=>{var L=T(8470),R=T(21092),k=T(33051).isArrayLike,O=Array.prototype.slice;function D(o,r){return o[r]}function E(o,r,n){o[r]=n}function I(o,r,n){return(r-o)*n+o}function S(o,r,n){return n>.5?r:o}function _(o,r,n,h,p){var d=o.length;if(p===1)for(var f=0;f<d;f++)h[f]=I(o[f],r[f],n);else{var v=d&&o[0].length;for(f=0;f<d;f++)for(var m=0;m<v;m++)h[f][m]=I(o[f][m],r[f][m],n)}}function g(o,r,n){var h=o.length,p=r.length;if(h!==p)if(h>p)o.length=p;else for(var d=h;d<p;d++)o.push(n===1?r[d]:O.call(r[d]));var f=o[0]&&o[0].length;for(d=0;d<o.length;d++)if(n===1)isNaN(o[d])&&(o[d]=r[d]);else for(var v=0;v<f;v++)isNaN(o[d][v])&&(o[d][v]=r[d][v])}function u(o,r,n){if(o===r)return!0;var h=o.length;if(h!==r.length)return!1;if(n===1){for(var p=0;p<h;p++)if(o[p]!==r[p])return!1}else{var d=o[0].length;for(p=0;p<h;p++)for(var f=0;f<d;f++)if(o[p][f]!==r[p][f])return!1}return!0}function c(o,r,n,h,p,d,f,v,m){var y=o.length;if(m===1)for(var x=0;x<y;x++)v[x]=l(o[x],r[x],n[x],h[x],p,d,f);else{var w=o[0].length;for(x=0;x<y;x++)for(var M=0;M<w;M++)v[x][M]=l(o[x][M],r[x][M],n[x][M],h[x][M],p,d,f)}}function l(o,r,n,h,p,d,f){var v=.5*(n-o),m=.5*(h-r);return(2*(r-n)+v+m)*f+(-3*(r-n)-2*v-m)*d+v*p+r}function e(o){if(k(o)){var r=o.length;if(k(o[0])){for(var n=[],h=0;h<r;h++)n.push(O.call(o[h]));return n}return O.call(o)}return o}function t(o){return o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.floor(o[2]),"rgba("+o.join(",")+")"}function i(o,r,n,h,p,d){var f=o._getter,v=o._setter,m=r==="spline",y=h.length;if(y){var x,w=h[0].value,M=k(w),C=!1,A=!1,P=M?function($){var rt=$[$.length-1].value;return k(rt&&rt[0])?2:1}(h):0;h.sort(function($,rt){return $.time-rt.time}),x=h[y-1].time;for(var b=[],N=[],B=h[0].value,z=!0,F=0;F<y;F++){b.push(h[F].time/x);var V=h[F].value;if(M&&u(V,B,P)||!M&&V===B||(z=!1),B=V,typeof V=="string"){var H=R.parse(V);H?(V=H,C=!0):A=!0}N.push(V)}if(d||!z){var U=N[y-1];for(F=0;F<y-1;F++)M?g(N[F],U,P):!isNaN(N[F])||isNaN(U)||A||C||(N[F]=U);M&&g(f(o._target,p),U,P);var j,X,Y,J,K,Q=0,Z=0;if(C)var q=[0,0,0,0];var tt=new L({target:o._target,life:x,loop:o._loop,delay:o._delay,onframe:function($,rt){var et;if(rt<0)et=0;else if(rt<Z){for(et=Math.min(Q+1,y-1);et>=0&&!(b[et]<=rt);et--);et=Math.min(et,y-2)}else{for(et=Q;et<y&&!(b[et]>rt);et++);et=Math.min(et-1,y-2)}Q=et,Z=rt;var it=b[et+1]-b[et];if(it!==0)if(j=(rt-b[et])/it,m)if(Y=N[et],X=N[et===0?et:et-1],J=N[et>y-2?y-1:et+1],K=N[et>y-3?y-1:et+2],M)c(X,Y,J,K,j,j*j,j*j*j,f($,p),P);else{if(C)ot=c(X,Y,J,K,j,j*j,j*j*j,q,1),ot=t(q);else{if(A)return S(Y,J,j);ot=l(X,Y,J,K,j,j*j,j*j*j)}v($,p,ot)}else if(M)_(N[et],N[et+1],j,f($,p),P);else{var ot;if(C)_(N[et],N[et+1],j,q,1),ot=t(q);else{if(A)return S(N[et],N[et+1],j);ot=I(N[et],N[et+1],j)}v($,p,ot)}},ondestroy:n});return r&&r!=="spline"&&(tt.easing=r),tt}}}var s=function(o,r,n,h){this._tracks={},this._target=o,this._loop=r||!1,this._getter=n||D,this._setter=h||E,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};s.prototype={when:function(o,r){var n=this._tracks;for(var h in r)if(r.hasOwnProperty(h)){if(!n[h]){n[h]=[];var p=this._getter(this._target,h);if(p==null)continue;o!==0&&n[h].push({time:0,value:e(p)})}n[h].push({time:o,value:r[h]})}return this},during:function(o){return this._onframeList.push(o),this},pause:function(){for(var o=0;o<this._clipList.length;o++)this._clipList[o].pause();this._paused=!0},resume:function(){for(var o=0;o<this._clipList.length;o++)this._clipList[o].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var o=this._doneList,r=o.length,n=0;n<r;n++)o[n].call(this)},start:function(o,r){var n,h=this,p=0,d=function(){--p||h._doneCallback()};for(var f in this._tracks)if(this._tracks.hasOwnProperty(f)){var v=i(this,o,d,this._tracks[f],f,r);v&&(this._clipList.push(v),p++,this.animation&&this.animation.addClip(v),n=v)}if(n){var m=n.onframe;n.onframe=function(y,x){m(y,x);for(var w=0;w<h._onframeList.length;w++)h._onframeList[w](y,x)}}return p||this._doneCallback(),this},stop:function(o){for(var r=this._clipList,n=this.animation,h=0;h<r.length;h++){var p=r[h];o&&p.onframe(this._target,1),n&&n.removeClip(p)}r.length=0},delay:function(o){return this._delay=o,this},done:function(o){return o&&this._doneList.push(o),this},getClips:function(){return this._clipList}};var a=s;W.exports=a},8470:(W,G,T)=>{var L=T(30690);function R(O){this._target=O.target,this._life=O.life||1e3,this._delay=O.delay||0,this._initialized=!1,this.loop=O.loop!=null&&O.loop,this.gap=O.gap||0,this.easing=O.easing||"Linear",this.onframe=O.onframe,this.ondestroy=O.ondestroy,this.onrestart=O.onrestart,this._pausedTime=0,this._paused=!1}R.prototype={constructor:R,step:function(O,D){if(this._initialized||(this._startTime=O+this._delay,this._initialized=!0),this._paused)this._pausedTime+=D;else{var E=(O-this._startTime-this._pausedTime)/this._life;if(!(E<0)){E=Math.min(E,1);var I=this.easing,S=typeof I=="string"?L[I]:I,_=typeof S=="function"?S(E):E;return this.fire("frame",_),E===1?this.loop?(this.restart(O),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(O){var D=(O-this._startTime-this._pausedTime)%this._life;this._startTime=O-D+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(O,D){this[O="on"+O]&&this[O](this._target,D)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var k=R;W.exports=k},30690:W=>{var G={linear:function(L){return L},quadraticIn:function(L){return L*L},quadraticOut:function(L){return L*(2-L)},quadraticInOut:function(L){return(L*=2)<1?.5*L*L:-.5*(--L*(L-2)-1)},cubicIn:function(L){return L*L*L},cubicOut:function(L){return--L*L*L+1},cubicInOut:function(L){return(L*=2)<1?.5*L*L*L:.5*((L-=2)*L*L+2)},quarticIn:function(L){return L*L*L*L},quarticOut:function(L){return 1- --L*L*L*L},quarticInOut:function(L){return(L*=2)<1?.5*L*L*L*L:-.5*((L-=2)*L*L*L-2)},quinticIn:function(L){return L*L*L*L*L},quinticOut:function(L){return--L*L*L*L*L+1},quinticInOut:function(L){return(L*=2)<1?.5*L*L*L*L*L:.5*((L-=2)*L*L*L*L+2)},sinusoidalIn:function(L){return 1-Math.cos(L*Math.PI/2)},sinusoidalOut:function(L){return Math.sin(L*Math.PI/2)},sinusoidalInOut:function(L){return .5*(1-Math.cos(Math.PI*L))},exponentialIn:function(L){return L===0?0:Math.pow(1024,L-1)},exponentialOut:function(L){return L===1?1:1-Math.pow(2,-10*L)},exponentialInOut:function(L){return L===0?0:L===1?1:(L*=2)<1?.5*Math.pow(1024,L-1):.5*(2-Math.pow(2,-10*(L-1)))},circularIn:function(L){return 1-Math.sqrt(1-L*L)},circularOut:function(L){return Math.sqrt(1- --L*L)},circularInOut:function(L){return(L*=2)<1?-.5*(Math.sqrt(1-L*L)-1):.5*(Math.sqrt(1-(L-=2)*L)+1)},elasticIn:function(L){var R,k=.1;return L===0?0:L===1?1:(!k||k<1?(k=1,R=.1):R=.4*Math.asin(1/k)/(2*Math.PI),-k*Math.pow(2,10*(L-=1))*Math.sin((L-R)*(2*Math.PI)/.4))},elasticOut:function(L){var R,k=.1;return L===0?0:L===1?1:(!k||k<1?(k=1,R=.1):R=.4*Math.asin(1/k)/(2*Math.PI),k*Math.pow(2,-10*L)*Math.sin((L-R)*(2*Math.PI)/.4)+1)},elasticInOut:function(L){var R,k=.1;return L===0?0:L===1?1:(!k||k<1?(k=1,R=.1):R=.4*Math.asin(1/k)/(2*Math.PI),(L*=2)<1?k*Math.pow(2,10*(L-=1))*Math.sin((L-R)*(2*Math.PI)/.4)*-.5:k*Math.pow(2,-10*(L-=1))*Math.sin((L-R)*(2*Math.PI)/.4)*.5+1)},backIn:function(L){var R=1.70158;return L*L*((R+1)*L-R)},backOut:function(L){var R=1.70158;return--L*L*((R+1)*L+R)+1},backInOut:function(L){var R=2.5949095;return(L*=2)<1?L*L*((R+1)*L-R)*.5:.5*((L-=2)*L*((R+1)*L+R)+2)},bounceIn:function(L){return 1-G.bounceOut(1-L)},bounceOut:function(L){return L<.36363636363636365?7.5625*L*L:L<.7272727272727273?7.5625*(L-=.5454545454545454)*L+.75:L<.9090909090909091?7.5625*(L-=.8181818181818182)*L+.9375:7.5625*(L-=.9545454545454546)*L+.984375},bounceInOut:function(L){return L<.5?.5*G.bounceIn(2*L):.5*G.bounceOut(2*L-1)+.5}},T=G;W.exports=T},22795:W=>{var G=typeof window<"u"&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(T){setTimeout(T,16)};W.exports=G},4990:(W,G)=>{var T=1;typeof window<"u"&&(T=Math.max(window.devicePixelRatio||1,1));var L=T;G.debugMode=0,G.devicePixelRatio=L},92334:(W,G,T)=>{var L=T(3266).normalizeRadian,R=2*Math.PI;G.containStroke=function(k,O,D,E,I,S,_,g,u){if(_===0)return!1;var c=_;g-=k,u-=O;var l=Math.sqrt(g*g+u*u);if(l-c>D||l+c<D)return!1;if(Math.abs(E-I)%R<1e-4)return!0;if(S){var e=E;E=L(I),I=L(e)}else E=L(E),I=L(I);E>I&&(I+=R);var t=Math.atan2(u,g);return t<0&&(t+=R),t>=E&&t<=I||t+R>=E&&t+R<=I}},71972:(W,G,T)=>{var L=T(18554);G.containStroke=function(R,k,O,D,E,I,S,_,g,u,c){if(g===0)return!1;var l=g;return!(c>k+l&&c>D+l&&c>I+l&&c>_+l||c<k-l&&c<D-l&&c<I-l&&c<_-l||u>R+l&&u>O+l&&u>E+l&&u>S+l||u<R-l&&u<O-l&&u<E-l&&u<S-l)&&L.cubicProjectPoint(R,k,O,D,E,I,S,_,u,c,null)<=l/2}},33640:(W,G)=>{G.containStroke=function(T,L,R,k,O,D,E){if(O===0)return!1;var I,S=O;if(E>L+S&&E>k+S||E<L-S&&E<k-S||D>T+S&&D>R+S||D<T-S&&D<R-S)return!1;if(T===R)return Math.abs(D-T)<=S/2;var _=(I=(L-k)/(T-R))*D-E+(T*k-R*L)/(T-R);return _*_/(I*I+1)<=S/2*S/2}},85365:(W,G,T)=>{var L=T(14014),R=T(33640),k=T(71972),O=T(25674),D=T(92334),E=T(3266).normalizeRadian,I=T(18554),S=T(47637),_=L.CMD,g=2*Math.PI,u=[-1,-1,-1],c=[-1,-1];function l(s,a,o,r,n,h,p,d,f,v){if(v>a&&v>r&&v>h&&v>d||v<a&&v<r&&v<h&&v<d)return 0;var m,y=I.cubicRootAt(a,r,h,d,v,u);if(y===0)return 0;for(var x,w,M=0,C=-1,A=0;A<y;A++){var P=u[A],b=P===0||P===1?.5:1;I.cubicAt(s,o,n,p,P)<f||(C<0&&(C=I.cubicExtrema(a,r,h,d,c),c[1]<c[0]&&C>1&&(m=c[0],c[0]=c[1],c[1]=m),x=I.cubicAt(a,r,h,d,c[0]),C>1&&(w=I.cubicAt(a,r,h,d,c[1]))),C===2?P<c[0]?M+=x<a?b:-b:P<c[1]?M+=w<x?b:-b:M+=d<w?b:-b:P<c[0]?M+=x<a?b:-b:M+=d<x?b:-b)}return M}function e(s,a,o,r,n,h,p,d){if(d>a&&d>r&&d>h||d<a&&d<r&&d<h)return 0;var f=I.quadraticRootAt(a,r,h,d,u);if(f===0)return 0;var v=I.quadraticExtremum(a,r,h);if(v>=0&&v<=1){for(var m=0,y=I.quadraticAt(a,r,h,v),x=0;x<f;x++){var w=u[x]===0||u[x]===1?.5:1;I.quadraticAt(s,o,n,u[x])<p||(u[x]<v?m+=y<a?w:-w:m+=h<y?w:-w)}return m}return w=u[0]===0||u[0]===1?.5:1,I.quadraticAt(s,o,n,u[0])<p?0:h<a?w:-w}function t(s,a,o,r,n,h,p,d){if((d-=a)>o||d<-o)return 0;var f=Math.sqrt(o*o-d*d);u[0]=-f,u[1]=f;var v=Math.abs(r-n);if(v<1e-4)return 0;if(v%g<1e-4){r=0,n=g;var m=h?1:-1;return p>=u[0]+s&&p<=u[1]+s?m:0}h?(f=r,r=E(n),n=E(f)):(r=E(r),n=E(n)),r>n&&(n+=g);for(var y=0,x=0;x<2;x++){var w=u[x];if(w+s>p){var M=Math.atan2(d,w);m=h?1:-1,M<0&&(M=g+M),(M>=r&&M<=n||M+g>=r&&M+g<=n)&&(M>Math.PI/2&&M<1.5*Math.PI&&(m=-m),y+=m)}}return y}function i(s,a,o,r,n){for(var h,p,d=0,f=0,v=0,m=0,y=0,x=0;x<s.length;){var w=s[x++];switch(w===_.M&&x>1&&(o||(d+=S(f,v,m,y,r,n))),x===1&&(m=f=s[x],y=v=s[x+1]),w){case _.M:f=m=s[x++],v=y=s[x++];break;case _.L:if(o){if(R.containStroke(f,v,s[x],s[x+1],a,r,n))return!0}else d+=S(f,v,s[x],s[x+1],r,n)||0;f=s[x++],v=s[x++];break;case _.C:if(o){if(k.containStroke(f,v,s[x++],s[x++],s[x++],s[x++],s[x],s[x+1],a,r,n))return!0}else d+=l(f,v,s[x++],s[x++],s[x++],s[x++],s[x],s[x+1],r,n)||0;f=s[x++],v=s[x++];break;case _.Q:if(o){if(O.containStroke(f,v,s[x++],s[x++],s[x],s[x+1],a,r,n))return!0}else d+=e(f,v,s[x++],s[x++],s[x],s[x+1],r,n)||0;f=s[x++],v=s[x++];break;case _.A:var M=s[x++],C=s[x++],A=s[x++],P=s[x++],b=s[x++],N=s[x++];x+=1;var B=1-s[x++],z=Math.cos(b)*A+M,F=Math.sin(b)*P+C;x>1?d+=S(f,v,z,F,r,n):(m=z,y=F);var V=(r-M)*P/A+M;if(o){if(D.containStroke(M,C,P,b,b+N,B,a,V,n))return!0}else d+=t(M,C,P,b,b+N,B,V,n);f=Math.cos(b+N)*A+M,v=Math.sin(b+N)*P+C;break;case _.R:if(m=f=s[x++],y=v=s[x++],z=m+s[x++],F=y+s[x++],o){if(R.containStroke(m,y,z,y,a,r,n)||R.containStroke(z,y,z,F,a,r,n)||R.containStroke(z,F,m,F,a,r,n)||R.containStroke(m,F,m,y,a,r,n))return!0}else d+=S(z,y,z,F,r,n),d+=S(m,F,m,y,r,n);break;case _.Z:if(o){if(R.containStroke(f,v,m,y,a,r,n))return!0}else d+=S(f,v,m,y,r,n);f=m,v=y}}return o||(h=v,p=y,Math.abs(h-p)<1e-4)||(d+=S(f,v,m,y,r,n)||0),d!==0}G.contain=function(s,a,o){return i(s,0,!1,a,o)},G.containStroke=function(s,a,o,r){return i(s,a,!0,o,r)}},40765:(W,G,T)=>{var L=T(47637);function R(k,O){return Math.abs(k-O)<1e-8}G.contain=function(k,O,D){var E=0,I=k[0];if(!I)return!1;for(var S=1;S<k.length;S++){var _=k[S];E+=L(I[0],I[1],_[0],_[1],O,D),I=_}var g=k[0];return R(I[0],g[0])&&R(I[1],g[1])||(E+=L(I[0],I[1],g[0],g[1],O,D)),E!==0}},25674:(W,G,T)=>{var L=T(18554).quadraticProjectPoint;G.containStroke=function(R,k,O,D,E,I,S,_,g){if(S===0)return!1;var u=S;return!(g>k+u&&g>D+u&&g>I+u||g<k-u&&g<D-u&&g<I-u||_>R+u&&_>O+u&&_>E+u||_<R-u&&_<O-u&&_<E-u)&&L(R,k,O,D,E,I,_,g,null)<=u/2}},80423:(W,G,T)=>{var L=T(60479),R=T(8007),k=T(33051),O=k.getContext,D=k.extend,E=k.retrieve2,I=k.retrieve3,S=k.trim,_={},g=0,u=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,c="12px sans-serif",l={};function e(m,y){var x=m+":"+(y=y||c);if(_[x])return _[x];for(var w=(m+"").split(`
`),M=0,C=0,A=w.length;C<A;C++)M=Math.max(p(w[C],y).width,M);return g>5e3&&(g=0,_={}),g++,_[x]=M,M}function t(m,y,x){return x==="right"?m-=y:x==="center"&&(m-=y/2),m}function i(m,y,x){return x==="middle"?m-=y/2:x==="bottom"&&(m-=y),m}function s(m,y,x){var w=y.textPosition,M=y.textDistance,C=x.x,A=x.y;M=M||0;var P=x.height,b=x.width,N=P/2,B="left",z="top";switch(w){case"left":C-=M,A+=N,B="right",z="middle";break;case"right":C+=M+b,A+=N,z="middle";break;case"top":C+=b/2,A-=M,B="center",z="bottom";break;case"bottom":C+=b/2,A+=P+M,B="center";break;case"inside":C+=b/2,A+=N,B="center",z="middle";break;case"insideLeft":C+=M,A+=N,z="middle";break;case"insideRight":C+=b-M,A+=N,B="right",z="middle";break;case"insideTop":C+=b/2,A+=M,B="center";break;case"insideBottom":C+=b/2,A+=P-M,B="center",z="bottom";break;case"insideTopLeft":C+=M,A+=M;break;case"insideTopRight":C+=b-M,A+=M,B="right";break;case"insideBottomLeft":C+=M,A+=P-M,z="bottom";break;case"insideBottomRight":C+=b-M,A+=P-M,B="right",z="bottom"}return(m=m||{}).x=C,m.y=A,m.textAlign=B,m.textVerticalAlign=z,m}function a(m,y,x,w,M){if(!y)return"";var C=(m+"").split(`
`);M=o(y,x,w,M);for(var A=0,P=C.length;A<P;A++)C[A]=r(C[A],M);return C.join(`
`)}function o(m,y,x,w){(w=D({},w)).font=y,x=E(x,"..."),w.maxIterations=E(w.maxIterations,2);var M=w.minChar=E(w.minChar,0);w.cnCharWidth=e("\u56FD",y);var C=w.ascCharWidth=e("a",y);w.placeholder=E(w.placeholder,"");for(var A=m=Math.max(0,m-1),P=0;P<M&&A>=C;P++)A-=C;var b=e(x,y);return b>A&&(x="",b=0),A=m-b,w.ellipsis=x,w.ellipsisWidth=b,w.contentWidth=A,w.containerWidth=m,w}function r(m,y){var x=y.containerWidth,w=y.font,M=y.contentWidth;if(!x)return"";var C=e(m,w);if(C<=x)return m;for(var A=0;;A++){if(C<=M||A>=y.maxIterations){m+=y.ellipsis;break}var P=A===0?n(m,M,y.ascCharWidth,y.cnCharWidth):C>0?Math.floor(m.length*M/C):0;C=e(m=m.substr(0,P),w)}return m===""&&(m=y.placeholder),m}function n(m,y,x,w){for(var M=0,C=0,A=m.length;C<A&&M<y;C++){var P=m.charCodeAt(C);M+=0<=P&&P<=127?x:w}return C}function h(m){return e("\u56FD",m)}function p(m,y){return l.measureText(m,y)}function d(m,y,x,w,M){m!=null&&(m+="");var C=E(w,h(y)),A=m?m.split(`
`):[],P=A.length*C,b=P,N=!0;if(x&&(b+=x[0]+x[2]),m&&M){N=!1;var B=M.outerHeight,z=M.outerWidth;if(B!=null&&b>B)m="",A=[];else if(z!=null)for(var F=o(z-(x?x[1]+x[3]:0),y,M.ellipsis,{minChar:M.minChar,placeholder:M.placeholder}),V=0,H=A.length;V<H;V++)A[V]=r(A[V],F)}return{lines:A,height:P,outerHeight:b,lineHeight:C,canCacheByTextString:N}}function f(m,y){var x={lines:[],width:0,height:0};if(m!=null&&(m+=""),!m)return x;for(var w,M=u.lastIndex=0;(w=u.exec(m))!=null;){var C=w.index;C>M&&v(x,m.substring(M,C)),v(x,w[2],w[1]),M=u.lastIndex}M<m.length&&v(x,m.substring(M,m.length));var A=x.lines,P=0,b=0,N=[],B=y.textPadding,z=y.truncate,F=z&&z.outerWidth,V=z&&z.outerHeight;B&&(F!=null&&(F-=B[1]+B[3]),V!=null&&(V-=B[0]+B[2]));for(var H=0;H<A.length;H++){for(var U=A[H],j=0,X=0,Y=0;Y<U.tokens.length;Y++){var J=(ot=U.tokens[Y]).styleName&&y.rich[ot.styleName]||{},K=ot.textPadding=J.textPadding,Q=ot.font=J.font||y.font,Z=ot.textHeight=E(J.textHeight,h(Q));if(K&&(Z+=K[0]+K[2]),ot.height=Z,ot.lineHeight=I(J.textLineHeight,y.textLineHeight,Z),ot.textAlign=J&&J.textAlign||y.textAlign,ot.textVerticalAlign=J&&J.textVerticalAlign||"middle",V!=null&&P+ot.lineHeight>V)return{lines:[],width:0,height:0};ot.textWidth=e(ot.text,Q);var q=J.textWidth,tt=q==null||q==="auto";if(typeof q=="string"&&q.charAt(q.length-1)==="%")ot.percentWidth=q,N.push(ot),q=0;else{if(tt){q=ot.textWidth;var $=J.textBackgroundColor,rt=$&&$.image;rt&&(rt=R.findExistImage(rt),R.isImageReady(rt)&&(q=Math.max(q,rt.width*Z/rt.height)))}var et=K?K[1]+K[3]:0;q+=et;var it=F!=null?F-X:null;it!=null&&it<q&&(!tt||it<et?(ot.text="",ot.textWidth=q=0):(ot.text=a(ot.text,it-et,Q,z.ellipsis,{minChar:z.minChar}),ot.textWidth=e(ot.text,Q),q=ot.textWidth+et))}X+=ot.width=q,J&&(j=Math.max(j,ot.lineHeight))}U.width=X,U.lineHeight=j,P+=j,b=Math.max(b,X)}for(x.outerWidth=x.width=E(y.textWidth,b),x.outerHeight=x.height=E(y.textHeight,P),B&&(x.outerWidth+=B[1]+B[3],x.outerHeight+=B[0]+B[2]),H=0;H<N.length;H++){var ot,st=(ot=N[H]).percentWidth;ot.width=parseInt(st,10)/100*b}return x}function v(m,y,x){for(var w=y==="",M=y.split(`
`),C=m.lines,A=0;A<M.length;A++){var P=M[A],b={styleName:x,text:P,isLineHolder:!P&&!w};if(A)C.push({tokens:[b]});else{var N=(C[C.length-1]||(C[0]={tokens:[]})).tokens,B=N.length;B===1&&N[0].isLineHolder?N[0]=b:(P||!B||w)&&N.push(b)}}}l.measureText=function(m,y){var x=O();return x.font=y||c,x.measureText(m)},G.DEFAULT_FONT=c,G.$override=function(m,y){l[m]=y},G.getWidth=e,G.getBoundingRect=function(m,y,x,w,M,C,A,P){return A?function(b,N,B,z,F,V,H,U){var j=f(b,{rich:H,truncate:U,font:N,textAlign:B,textPadding:F,textLineHeight:V}),X=j.outerWidth,Y=j.outerHeight,J=t(0,X,B),K=i(0,Y,z);return new L(J,K,X,Y)}(m,y,x,w,M,C,A,P):function(b,N,B,z,F,V,H){var U=d(b,N,F,V,H),j=e(b,N);F&&(j+=F[1]+F[3]);var X=U.outerHeight,Y=t(0,j,B),J=i(0,X,z),K=new L(Y,J,j,X);return K.lineHeight=U.lineHeight,K}(m,y,x,w,M,C,P)},G.adjustTextX=t,G.adjustTextY=i,G.calculateTextPosition=s,G.adjustTextPositionOnRect=function(m,y,x){return s({},{textPosition:m,textDistance:x},y)},G.truncateText=a,G.getLineHeight=h,G.measureText=p,G.parsePlainText=d,G.parseRichText=f,G.makeFont=function(m){var y=(m.fontSize||m.fontFamily)&&[m.fontStyle,m.fontWeight,(m.fontSize||12)+"px",m.fontFamily||"sans-serif"].join(" ");return y&&S(y)||m.textFont||m.font}},3266:(W,G)=>{var T=2*Math.PI;G.normalizeRadian=function(L){return(L%=T)<0&&(L+=T),L}},47637:W=>{W.exports=function(G,T,L,R,k,O){if(O>T&&O>R||O<T&&O<R||R===T)return 0;var D=R<T?1:-1,E=(O-T)/(R-T);E!==1&&E!==0||(D=R<T?.5:-.5);var I=E*(L-G)+G;return I===k?1/0:I>k?D:0}},8524:(W,G,T)=>{var L=T(33051),R=T(85823),k=T(60479),O=function(E){for(var I in E=E||{},R.call(this,E),E)E.hasOwnProperty(I)&&(this[I]=E[I]);this._children=[],this.__storage=null,this.__dirty=!0};O.prototype={constructor:O,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(E){return this._children[E]},childOfName:function(E){for(var I=this._children,S=0;S<I.length;S++)if(I[S].name===E)return I[S]},childCount:function(){return this._children.length},add:function(E){return E&&E!==this&&E.parent!==this&&(this._children.push(E),this._doAdd(E)),this},addBefore:function(E,I){if(E&&E!==this&&E.parent!==this&&I&&I.parent===this){var S=this._children,_=S.indexOf(I);_>=0&&(S.splice(_,0,E),this._doAdd(E))}return this},_doAdd:function(E){E.parent&&E.parent.remove(E),E.parent=this;var I=this.__storage,S=this.__zr;I&&I!==E.__storage&&(I.addToStorage(E),E instanceof O&&E.addChildrenToStorage(I)),S&&S.refresh()},remove:function(E){var I=this.__zr,S=this.__storage,_=this._children,g=L.indexOf(_,E);return g<0||(_.splice(g,1),E.parent=null,S&&(S.delFromStorage(E),E instanceof O&&E.delChildrenFromStorage(S)),I&&I.refresh()),this},removeAll:function(){var E,I,S=this._children,_=this.__storage;for(I=0;I<S.length;I++)E=S[I],_&&(_.delFromStorage(E),E instanceof O&&E.delChildrenFromStorage(_)),E.parent=null;return S.length=0,this},eachChild:function(E,I){for(var S=this._children,_=0;_<S.length;_++){var g=S[_];E.call(I,g,_)}return this},traverse:function(E,I){for(var S=0;S<this._children.length;S++){var _=this._children[S];E.call(I,_),_.type==="group"&&_.traverse(E,I)}return this},addChildrenToStorage:function(E){for(var I=0;I<this._children.length;I++){var S=this._children[I];E.addToStorage(S),S instanceof O&&S.addChildrenToStorage(E)}},delChildrenFromStorage:function(E){for(var I=0;I<this._children.length;I++){var S=this._children[I];E.delFromStorage(S),S instanceof O&&S.delChildrenFromStorage(E)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(E){for(var I=null,S=new k(0,0,0,0),_=E||this._children,g=[],u=0;u<_.length;u++){var c=_[u];if(!c.ignore&&!c.invisible){var l=c.getBoundingRect(),e=c.getLocalTransform(g);e?(S.copy(l),S.applyTransform(e),(I=I||S.clone()).union(S)):(I=I||l.clone()).union(l)}}return I||S}},L.inherits(O,R);var D=O;W.exports=D},60479:(W,G,T)=>{var L,R,k,O,D=T(45280),E=T(32892),I=D.applyTransform,S=Math.min,_=Math.max;function g(c,l,e,t){e<0&&(c+=e,e=-e),t<0&&(l+=t,t=-t),this.x=c,this.y=l,this.width=e,this.height=t}g.prototype={constructor:g,union:function(c){var l=S(c.x,this.x),e=S(c.y,this.y);this.width=_(c.x+c.width,this.x+this.width)-l,this.height=_(c.y+c.height,this.y+this.height)-e,this.x=l,this.y=e},applyTransform:(L=[],R=[],k=[],O=[],function(c){if(c){L[0]=k[0]=this.x,L[1]=O[1]=this.y,R[0]=O[0]=this.x+this.width,R[1]=k[1]=this.y+this.height,I(L,L,c),I(R,R,c),I(k,k,c),I(O,O,c),this.x=S(L[0],R[0],k[0],O[0]),this.y=S(L[1],R[1],k[1],O[1]);var l=_(L[0],R[0],k[0],O[0]),e=_(L[1],R[1],k[1],O[1]);this.width=l-this.x,this.height=e-this.y}}),calculateTransform:function(c){var l=this,e=c.width/l.width,t=c.height/l.height,i=E.create();return E.translate(i,i,[-l.x,-l.y]),E.scale(i,i,[e,t]),E.translate(i,i,[c.x,c.y]),i},intersect:function(c){if(!c)return!1;c instanceof g||(c=g.create(c));var l=this,e=l.x,t=l.x+l.width,i=l.y,s=l.y+l.height,a=c.x,o=c.x+c.width,r=c.y,n=c.y+c.height;return!(t<a||o<e||s<r||n<i)},contain:function(c,l){var e=this;return c>=e.x&&c<=e.x+e.width&&l>=e.y&&l<=e.y+e.height},clone:function(){return new g(this.x,this.y,this.width,this.height)},copy:function(c){this.x=c.x,this.y=c.y,this.width=c.width,this.height=c.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},g.create=function(c){return new g(c.x,c.y,c.width,c.height)};var u=g;W.exports=u},49399:(W,G,T)=>{var L=T(61158),R=function(){this._track=[]};function k(E){var I=E[1][0]-E[0][0],S=E[1][1]-E[0][1];return Math.sqrt(I*I+S*S)}R.prototype={constructor:R,recognize:function(E,I,S){return this._doTrack(E,I,S),this._recognize(E)},clear:function(){return this._track.length=0,this},_doTrack:function(E,I,S){var _=E.touches;if(_){for(var g={points:[],touches:[],target:I,event:E},u=0,c=_.length;u<c;u++){var l=_[u],e=L.clientToLocal(S,l,{});g.points.push([e.zrX,e.zrY]),g.touches.push(l)}this._track.push(g)}},_recognize:function(E){for(var I in O)if(O.hasOwnProperty(I)){var S=O[I](this._track,E);if(S)return S}}};var O={pinch:function(E,I){var S=E.length;if(S){var _,g=(E[S-1]||{}).points,u=(E[S-2]||{}).points||g;if(u&&u.length>1&&g&&g.length>1){var c=k(g)/k(u);!isFinite(c)&&(c=1),I.pinchScale=c;var l=[((_=g)[0][0]+_[1][0])/2,(_[0][1]+_[1][1])/2];return I.pinchX=l[0],I.pinchY=l[1],{type:"pinch",target:E[0].target,event:I}}}}},D=R;W.exports=D},92528:W=>{var G=function(){this.head=null,this.tail=null,this._len=0},T=G.prototype;T.insert=function(D){var E=new L(D);return this.insertEntry(E),E},T.insertEntry=function(D){this.head?(this.tail.next=D,D.prev=this.tail,D.next=null,this.tail=D):this.head=this.tail=D,this._len++},T.remove=function(D){var E=D.prev,I=D.next;E?E.next=I:this.head=I,I?I.prev=E:this.tail=E,D.next=D.prev=null,this._len--},T.len=function(){return this._len},T.clear=function(){this.head=this.tail=null,this._len=0};var L=function(D){this.value=D,this.next,this.prev},R=function(D){this._list=new G,this._map={},this._maxSize=D||10,this._lastRemovedEntry=null},k=R.prototype;k.put=function(D,E){var I=this._list,S=this._map,_=null;if(S[D]==null){var g=I.len(),u=this._lastRemovedEntry;if(g>=this._maxSize&&g>0){var c=I.head;I.remove(c),delete S[c.key],_=c.value,this._lastRemovedEntry=c}u?u.value=E:u=new L(E),u.key=D,I.insertEntry(u),S[D]=u}return _},k.get=function(D){var E=this._map[D],I=this._list;if(E!=null)return E!==I.tail&&(I.remove(E),I.insertEntry(E)),E.value},k.clear=function(){this._list.clear(),this._map={}};var O=R;W.exports=O},14014:(W,G,T)=>{var L=T(18554),R=T(45280),k=T(3726),O=T(60479),D=T(4990).devicePixelRatio,E={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},I=[],S=[],_=[],g=[],u=Math.min,c=Math.max,l=Math.cos,e=Math.sin,t=Math.sqrt,i=Math.abs,s=typeof Float32Array<"u",a=function(r){this._saveData=!r,this._saveData&&(this.data=[]),this._ctx=null};a.prototype={constructor:a,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(r,n,h){h=h||0,this._ux=i(h/D/r)||0,this._uy=i(h/D/n)||0},getContext:function(){return this._ctx},beginPath:function(r){return this._ctx=r,r&&r.beginPath(),r&&(this.dpr=r.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(r,n){return this.addData(E.M,r,n),this._ctx&&this._ctx.moveTo(r,n),this._x0=r,this._y0=n,this._xi=r,this._yi=n,this},lineTo:function(r,n){var h=i(r-this._xi)>this._ux||i(n-this._yi)>this._uy||this._len<5;return this.addData(E.L,r,n),this._ctx&&h&&(this._needsDash()?this._dashedLineTo(r,n):this._ctx.lineTo(r,n)),h&&(this._xi=r,this._yi=n),this},bezierCurveTo:function(r,n,h,p,d,f){return this.addData(E.C,r,n,h,p,d,f),this._ctx&&(this._needsDash()?this._dashedBezierTo(r,n,h,p,d,f):this._ctx.bezierCurveTo(r,n,h,p,d,f)),this._xi=d,this._yi=f,this},quadraticCurveTo:function(r,n,h,p){return this.addData(E.Q,r,n,h,p),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(r,n,h,p):this._ctx.quadraticCurveTo(r,n,h,p)),this._xi=h,this._yi=p,this},arc:function(r,n,h,p,d,f){return this.addData(E.A,r,n,h,h,p,d-p,0,f?0:1),this._ctx&&this._ctx.arc(r,n,h,p,d,f),this._xi=l(d)*h+r,this._yi=e(d)*h+n,this},arcTo:function(r,n,h,p,d){return this._ctx&&this._ctx.arcTo(r,n,h,p,d),this},rect:function(r,n,h,p){return this._ctx&&this._ctx.rect(r,n,h,p),this.addData(E.R,r,n,h,p),this},closePath:function(){this.addData(E.Z);var r=this._ctx,n=this._x0,h=this._y0;return r&&(this._needsDash()&&this._dashedLineTo(n,h),r.closePath()),this._xi=n,this._yi=h,this},fill:function(r){r&&r.fill(),this.toStatic()},stroke:function(r){r&&r.stroke(),this.toStatic()},setLineDash:function(r){if(r instanceof Array){this._lineDash=r,this._dashIdx=0;for(var n=0,h=0;h<r.length;h++)n+=r[h];this._dashSum=n}return this},setLineDashOffset:function(r){return this._dashOffset=r,this},len:function(){return this._len},setData:function(r){var n=r.length;this.data&&this.data.length===n||!s||(this.data=new Float32Array(n));for(var h=0;h<n;h++)this.data[h]=r[h];this._len=n},appendPath:function(r){r instanceof Array||(r=[r]);for(var n=r.length,h=0,p=this._len,d=0;d<n;d++)h+=r[d].len();for(s&&this.data instanceof Float32Array&&(this.data=new Float32Array(p+h)),d=0;d<n;d++)for(var f=r[d].data,v=0;v<f.length;v++)this.data[p++]=f[v];this._len=p},addData:function(r){if(this._saveData){var n=this.data;this._len+arguments.length>n.length&&(this._expandData(),n=this.data);for(var h=0;h<arguments.length;h++)n[this._len++]=arguments[h];this._prevCmd=r}},_expandData:function(){if(!(this.data instanceof Array)){for(var r=[],n=0;n<this._len;n++)r[n]=this.data[n];this.data=r}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(r,n){var h,p,d=this._dashSum,f=this._dashOffset,v=this._lineDash,m=this._ctx,y=this._xi,x=this._yi,w=r-y,M=n-x,C=t(w*w+M*M),A=y,P=x,b=v.length;for(f<0&&(f=d+f),A-=(f%=d)*(w/=C),P-=f*(M/=C);w>0&&A<=r||w<0&&A>=r||w===0&&(M>0&&P<=n||M<0&&P>=n);)A+=w*(h=v[p=this._dashIdx]),P+=M*h,this._dashIdx=(p+1)%b,w>0&&A<y||w<0&&A>y||M>0&&P<x||M<0&&P>x||m[p%2?"moveTo":"lineTo"](w>=0?u(A,r):c(A,r),M>=0?u(P,n):c(P,n));w=A-r,M=P-n,this._dashOffset=-t(w*w+M*M)},_dashedBezierTo:function(r,n,h,p,d,f){var v,m,y,x,w,M=this._dashSum,C=this._dashOffset,A=this._lineDash,P=this._ctx,b=this._xi,N=this._yi,B=L.cubicAt,z=0,F=this._dashIdx,V=A.length,H=0;for(C<0&&(C=M+C),C%=M,v=0;v<1;v+=.1)m=B(b,r,h,d,v+.1)-B(b,r,h,d,v),y=B(N,n,p,f,v+.1)-B(N,n,p,f,v),z+=t(m*m+y*y);for(;F<V&&!((H+=A[F])>C);F++);for(v=(H-C)/z;v<=1;)x=B(b,r,h,d,v),w=B(N,n,p,f,v),F%2?P.moveTo(x,w):P.lineTo(x,w),v+=A[F]/z,F=(F+1)%V;F%2!=0&&P.lineTo(d,f),m=d-x,y=f-w,this._dashOffset=-t(m*m+y*y)},_dashedQuadraticTo:function(r,n,h,p){var d=h,f=p;h=(h+2*r)/3,p=(p+2*n)/3,r=(this._xi+2*r)/3,n=(this._yi+2*n)/3,this._dashedBezierTo(r,n,h,p,d,f)},toStatic:function(){var r=this.data;r instanceof Array&&(r.length=this._len,s&&(this.data=new Float32Array(r)))},getBoundingRect:function(){I[0]=I[1]=_[0]=_[1]=Number.MAX_VALUE,S[0]=S[1]=g[0]=g[1]=-Number.MAX_VALUE;for(var r=this.data,n=0,h=0,p=0,d=0,f=0;f<r.length;){var v=r[f++];switch(f===1&&(p=n=r[f],d=h=r[f+1]),v){case E.M:n=p=r[f++],h=d=r[f++],_[0]=p,_[1]=d,g[0]=p,g[1]=d;break;case E.L:k.fromLine(n,h,r[f],r[f+1],_,g),n=r[f++],h=r[f++];break;case E.C:k.fromCubic(n,h,r[f++],r[f++],r[f++],r[f++],r[f],r[f+1],_,g),n=r[f++],h=r[f++];break;case E.Q:k.fromQuadratic(n,h,r[f++],r[f++],r[f],r[f+1],_,g),n=r[f++],h=r[f++];break;case E.A:var m=r[f++],y=r[f++],x=r[f++],w=r[f++],M=r[f++],C=r[f++]+M;f+=1;var A=1-r[f++];f===1&&(p=l(M)*x+m,d=e(M)*w+y),k.fromArc(m,y,x,w,M,C,A,_,g),n=l(C)*x+m,h=e(C)*w+y;break;case E.R:p=n=r[f++],d=h=r[f++];var P=r[f++],b=r[f++];k.fromLine(p,d,p+P,d+b,_,g);break;case E.Z:n=p,h=d}R.min(I,I,_),R.max(S,S,g)}return f===0&&(I[0]=I[1]=S[0]=S[1]=0),new O(I[0],I[1],S[0]-I[0],S[1]-I[1])},rebuildPath:function(r){for(var n,h,p,d,f,v,m=this.data,y=this._ux,x=this._uy,w=this._len,M=0;M<w;){var C=m[M++];switch(M===1&&(n=p=m[M],h=d=m[M+1]),C){case E.M:n=p=m[M++],h=d=m[M++],r.moveTo(p,d);break;case E.L:f=m[M++],v=m[M++],(i(f-p)>y||i(v-d)>x||M===w-1)&&(r.lineTo(f,v),p=f,d=v);break;case E.C:r.bezierCurveTo(m[M++],m[M++],m[M++],m[M++],m[M++],m[M++]),p=m[M-2],d=m[M-1];break;case E.Q:r.quadraticCurveTo(m[M++],m[M++],m[M++],m[M++]),p=m[M-2],d=m[M-1];break;case E.A:var A=m[M++],P=m[M++],b=m[M++],N=m[M++],B=m[M++],z=m[M++],F=m[M++],V=m[M++],H=b>N?b:N,U=b>N?1:b/N,j=b>N?N/b:1,X=B+z;Math.abs(b-N)>.001?(r.translate(A,P),r.rotate(F),r.scale(U,j),r.arc(0,0,H,B,X,1-V),r.scale(1/U,1/j),r.rotate(-F),r.translate(-A,-P)):r.arc(A,P,H,B,X,1-V),M===1&&(n=l(B)*b+A,h=e(B)*N+P),p=l(X)*b+A,d=e(X)*N+P;break;case E.R:n=p=m[M],h=d=m[M+1],r.rect(m[M++],m[M++],m[M++],m[M++]);break;case E.Z:r.closePath(),p=n,d=h}}}},a.CMD=E;var o=a;W.exports=o},39351:W=>{function G(){}function T(R,k,O,D){for(var E=0,I=k.length,S=0,_=0;E<I;E++){var g=k[E];if(g.removed){for(u=[],c=_;c<_+g.count;c++)u.push(c);g.indices=u,_+=g.count}else{for(var u=[],c=S;c<S+g.count;c++)u.push(c);g.indices=u,S+=g.count,g.added||(_+=g.count)}}return k}G.prototype={diff:function(R,k,O){O||(O=function(i,s){return i===s}),this.equals=O;var D=this;R=R.slice();var E=(k=k.slice()).length,I=R.length,S=1,_=E+I,g=[{newPos:-1,components:[]}],u=this.extractCommon(g[0],k,R,0);if(g[0].newPos+1>=E&&u+1>=I){for(var c=[],l=0;l<k.length;l++)c.push(l);return[{indices:c,count:k.length}]}function e(){for(var i=-1*S;i<=S;i+=2){var s,a=g[i-1],o=g[i+1],r=(o?o.newPos:0)-i;a&&(g[i-1]=void 0);var n=a&&a.newPos+1<E,h=o&&0<=r&&r<I;if(n||h){if(!n||h&&a.newPos<o.newPos?(s={newPos:(p=o).newPos,components:p.components.slice(0)},D.pushComponent(s.components,void 0,!0)):((s=a).newPos++,D.pushComponent(s.components,!0,void 0)),r=D.extractCommon(s,k,R,i),s.newPos+1>=E&&r+1>=I)return T(0,s.components);g[i]=s}else g[i]=void 0}var p;S++}for(;S<=_;){var t=e();if(t)return t}},pushComponent:function(R,k,O){var D=R[R.length-1];D&&D.added===k&&D.removed===O?R[R.length-1]={count:D.count+1,added:k,removed:O}:R.push({count:1,added:k,removed:O})},extractCommon:function(R,k,O,D){for(var E=k.length,I=O.length,S=R.newPos,_=S-D,g=0;S+1<E&&_+1<I&&this.equals(k[S+1],O[_+1]);)S++,_++,g++;return g&&R.components.push({count:g}),R.newPos=S,_},tokenize:function(R){return R.slice()},join:function(R){return R.slice()}};var L=new G;W.exports=function(R,k,O){return L.diff(R,k,O)}},3726:(W,G,T)=>{var L=T(45280),R=T(18554),k=Math.min,O=Math.max,D=Math.sin,E=Math.cos,I=2*Math.PI,S=L.create(),_=L.create(),g=L.create(),u=[],c=[];G.fromPoints=function(l,e,t){if(l.length!==0){var i,s=l[0],a=s[0],o=s[0],r=s[1],n=s[1];for(i=1;i<l.length;i++)s=l[i],a=k(a,s[0]),o=O(o,s[0]),r=k(r,s[1]),n=O(n,s[1]);e[0]=a,e[1]=r,t[0]=o,t[1]=n}},G.fromLine=function(l,e,t,i,s,a){s[0]=k(l,t),s[1]=k(e,i),a[0]=O(l,t),a[1]=O(e,i)},G.fromCubic=function(l,e,t,i,s,a,o,r,n,h){var p,d=R.cubicExtrema,f=R.cubicAt,v=d(l,t,s,o,u);for(n[0]=1/0,n[1]=1/0,h[0]=-1/0,h[1]=-1/0,p=0;p<v;p++){var m=f(l,t,s,o,u[p]);n[0]=k(m,n[0]),h[0]=O(m,h[0])}for(v=d(e,i,a,r,c),p=0;p<v;p++){var y=f(e,i,a,r,c[p]);n[1]=k(y,n[1]),h[1]=O(y,h[1])}n[0]=k(l,n[0]),h[0]=O(l,h[0]),n[0]=k(o,n[0]),h[0]=O(o,h[0]),n[1]=k(e,n[1]),h[1]=O(e,h[1]),n[1]=k(r,n[1]),h[1]=O(r,h[1])},G.fromQuadratic=function(l,e,t,i,s,a,o,r){var n=R.quadraticExtremum,h=R.quadraticAt,p=O(k(n(l,t,s),1),0),d=O(k(n(e,i,a),1),0),f=h(l,t,s,p),v=h(e,i,a,d);o[0]=k(l,s,f),o[1]=k(e,a,v),r[0]=O(l,s,f),r[1]=O(e,a,v)},G.fromArc=function(l,e,t,i,s,a,o,r,n){var h=L.min,p=L.max,d=Math.abs(s-a);if(d%I<1e-4&&d>1e-4)return r[0]=l-t,r[1]=e-i,n[0]=l+t,void(n[1]=e+i);if(S[0]=E(s)*t+l,S[1]=D(s)*i+e,_[0]=E(a)*t+l,_[1]=D(a)*i+e,h(r,S,_),p(n,S,_),(s%=I)<0&&(s+=I),(a%=I)<0&&(a+=I),s>a&&!o?a+=I:s<a&&o&&(s+=I),o){var f=a;a=s,s=f}for(var v=0;v<a;v+=Math.PI/2)v>s&&(g[0]=E(v)*t+l,g[1]=D(v)*i+e,h(r,g,r),p(n,g,n))}},18554:(W,G,T)=>{var L=T(45280),R=L.create,k=L.distSquare,O=Math.pow,D=Math.sqrt,E=1e-4,I=D(3),S=1/3,_=R(),g=R(),u=R();function c(i){return i>-1e-8&&i<1e-8}function l(i){return i>1e-8||i<-1e-8}function e(i,s,a,o,r){var n=1-r;return n*n*(n*i+3*r*s)+r*r*(r*o+3*n*a)}function t(i,s,a,o){var r=1-o;return r*(r*i+2*o*s)+o*o*a}G.cubicAt=e,G.cubicDerivativeAt=function(i,s,a,o,r){var n=1-r;return 3*(((s-i)*n+2*(a-s)*r)*n+(o-a)*r*r)},G.cubicRootAt=function(i,s,a,o,r,n){var h=o+3*(s-a)-i,p=3*(a-2*s+i),d=3*(s-i),f=i-r,v=p*p-3*h*d,m=p*d-9*h*f,y=d*d-3*p*f,x=0;if(c(v)&&c(m))c(p)?n[0]=0:(V=-d/p)>=0&&V<=1&&(n[x++]=V);else{var w=m*m-4*v*y;if(c(w)){var M=m/v,C=-M/2;(V=-p/h+M)>=0&&V<=1&&(n[x++]=V),C>=0&&C<=1&&(n[x++]=C)}else if(w>0){var A=D(w),P=v*p+1.5*h*(-m+A),b=v*p+1.5*h*(-m-A);(V=(-p-((P=P<0?-O(-P,S):O(P,S))+(b=b<0?-O(-b,S):O(b,S))))/(3*h))>=0&&V<=1&&(n[x++]=V)}else{var N=(2*v*p-3*h*m)/(2*D(v*v*v)),B=Math.acos(N)/3,z=D(v),F=Math.cos(B),V=(-p-2*z*F)/(3*h),H=(C=(-p+z*(F+I*Math.sin(B)))/(3*h),(-p+z*(F-I*Math.sin(B)))/(3*h));V>=0&&V<=1&&(n[x++]=V),C>=0&&C<=1&&(n[x++]=C),H>=0&&H<=1&&(n[x++]=H)}}return x},G.cubicExtrema=function(i,s,a,o,r){var n=6*a-12*s+6*i,h=9*s+3*o-3*i-9*a,p=3*s-3*i,d=0;if(c(h))l(n)&&(v=-p/n)>=0&&v<=1&&(r[d++]=v);else{var f=n*n-4*h*p;if(c(f))r[0]=-n/(2*h);else if(f>0){var v,m=D(f),y=(-n-m)/(2*h);(v=(-n+m)/(2*h))>=0&&v<=1&&(r[d++]=v),y>=0&&y<=1&&(r[d++]=y)}}return d},G.cubicSubdivide=function(i,s,a,o,r,n){var h=(s-i)*r+i,p=(a-s)*r+s,d=(o-a)*r+a,f=(p-h)*r+h,v=(d-p)*r+p,m=(v-f)*r+f;n[0]=i,n[1]=h,n[2]=f,n[3]=m,n[4]=m,n[5]=v,n[6]=d,n[7]=o},G.cubicProjectPoint=function(i,s,a,o,r,n,h,p,d,f,v){var m,y,x,w,M,C=.005,A=1/0;_[0]=d,_[1]=f;for(var P=0;P<1;P+=.05)g[0]=e(i,a,r,h,P),g[1]=e(s,o,n,p,P),(w=k(_,g))<A&&(m=P,A=w);A=1/0;for(var b=0;b<32&&!(C<E);b++)y=m-C,x=m+C,g[0]=e(i,a,r,h,y),g[1]=e(s,o,n,p,y),w=k(g,_),y>=0&&w<A?(m=y,A=w):(u[0]=e(i,a,r,h,x),u[1]=e(s,o,n,p,x),M=k(u,_),x<=1&&M<A?(m=x,A=M):C*=.5);return v&&(v[0]=e(i,a,r,h,m),v[1]=e(s,o,n,p,m)),D(A)},G.quadraticAt=t,G.quadraticDerivativeAt=function(i,s,a,o){return 2*((1-o)*(s-i)+o*(a-s))},G.quadraticRootAt=function(i,s,a,o,r){var n=i-2*s+a,h=2*(s-i),p=i-o,d=0;if(c(n))l(h)&&(v=-p/h)>=0&&v<=1&&(r[d++]=v);else{var f=h*h-4*n*p;if(c(f))(v=-h/(2*n))>=0&&v<=1&&(r[d++]=v);else if(f>0){var v,m=D(f),y=(-h-m)/(2*n);(v=(-h+m)/(2*n))>=0&&v<=1&&(r[d++]=v),y>=0&&y<=1&&(r[d++]=y)}}return d},G.quadraticExtremum=function(i,s,a){var o=i+a-2*s;return o===0?.5:(i-s)/o},G.quadraticSubdivide=function(i,s,a,o,r){var n=(s-i)*o+i,h=(a-s)*o+s,p=(h-n)*o+n;r[0]=i,r[1]=n,r[2]=p,r[3]=p,r[4]=h,r[5]=a},G.quadraticProjectPoint=function(i,s,a,o,r,n,h,p,d){var f,v=.005,m=1/0;_[0]=h,_[1]=p;for(var y=0;y<1;y+=.05)g[0]=t(i,a,r,y),g[1]=t(s,o,n,y),(C=k(_,g))<m&&(f=y,m=C);m=1/0;for(var x=0;x<32&&!(v<E);x++){var w=f-v,M=f+v;g[0]=t(i,a,r,w),g[1]=t(s,o,n,w);var C=k(g,_);if(w>=0&&C<m)f=w,m=C;else{u[0]=t(i,a,r,M),u[1]=t(s,o,n,M);var A=k(u,_);M<=1&&A<m?(f=M,m=A):v*=.5}}return d&&(d[0]=t(i,a,r,f),d[1]=t(s,o,n,f)),D(m)}},18553:(W,G,T)=>{var L=T(66387),R=T(46133).buildTransformer,k=[];function O(E,I,S,_,g){if(I.getBoundingClientRect&&L.domSupported&&!D(I)){var u=I.___zrEVENTSAVED||(I.___zrEVENTSAVED={}),c=function(e,t){var i=t.markers;if(i)return i;i=t.markers=[];for(var s=["left","right"],a=["top","bottom"],o=0;o<4;o++){var r=document.createElement("div"),n=o%2,h=(o>>1)%2;r.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",s[n]+":0",a[h]+":0",s[1-n]+":auto",a[1-h]+":auto",""].join("!important;"),e.appendChild(r),i.push(r)}return i}(I,u),l=function(e,t,i){for(var s=i?"invTrans":"trans",a=t[s],o=t.srcCoords,r=!0,n=[],h=[],p=0;p<4;p++){var d=e[p].getBoundingClientRect(),f=2*p,v=d.left,m=d.top;n.push(v,m),r=r&&o&&v===o[f]&&m===o[f+1],h.push(e[p].offsetLeft,e[p].offsetTop)}return r&&a?a:(t.srcCoords=n,t[s]=i?R(h,n):R(n,h))}(c,u,g);if(l)return l(E,S,_),!0}return!1}function D(E){return E.nodeName.toUpperCase()==="CANVAS"}G.transformLocalCoord=function(E,I,S,_,g){return O(k,I,_,g,!0)&&O(E,S,k[0],k[1])},G.transformCoordWithViewport=O,G.isCanvasEl=D},66387:W=>{var G,T,L,R,k,O,D=typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:typeof document>"u"&&typeof self<"u"?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:typeof navigator>"u"?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:(G=navigator.userAgent,T={},L=G.match(/Firefox\/([\d.]+)/),R=G.match(/MSIE\s([\d.]+)/)||G.match(/Trident\/.+?rv:(([\d.]+))/),k=G.match(/Edge\/([\d.]+)/),O=/micromessenger/i.test(G),L&&(T.firefox=!0,T.version=L[1]),R&&(T.ie=!0,T.version=R[1]),k&&(T.edge=!0,T.version=k[1]),O&&(T.weChat=!0),{browser:T,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:typeof SVGRect<"u",touchEventsSupported:"ontouchstart"in window&&!T.ie&&!T.edge,pointerEventsSupported:"onpointerdown"in window&&(T.edge||T.ie&&T.version>=11),domSupported:typeof document<"u"});W.exports=D},61158:(W,G,T)=>{var L=T(41502);G.Dispatcher=L;var R=T(66387),k=T(18553),O=k.isCanvasEl,D=k.transformCoordWithViewport,E=typeof window<"u"&&!!window.addEventListener,I=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,S=[];function _(l,e,t,i){return t=t||{},i||!R.canvasSupported?g(l,e,t):R.browser.firefox&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):g(l,e,t),t}function g(l,e,t){if(R.domSupported&&l.getBoundingClientRect){var i=e.clientX,s=e.clientY;if(O(l)){var a=l.getBoundingClientRect();return t.zrX=i-a.left,void(t.zrY=s-a.top)}if(D(S,l,i,s))return t.zrX=S[0],void(t.zrY=S[1])}t.zrX=t.zrY=0}function u(l){return l||window.event}var c=E?function(l){l.preventDefault(),l.stopPropagation(),l.cancelBubble=!0}:function(l){l.returnValue=!1,l.cancelBubble=!0};G.clientToLocal=_,G.getNativeEvent=u,G.normalizeEvent=function(l,e,t){if((e=u(e)).zrX!=null)return e;var i=e.type;if(i&&i.indexOf("touch")>=0){var s=i!=="touchend"?e.targetTouches[0]:e.changedTouches[0];s&&_(l,s,e,t)}else _(l,e,e,t),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var a=e.button;return e.which==null&&a!==void 0&&I.test(e.type)&&(e.which=1&a?1:2&a?3:4&a?2:0),e},G.addEventListener=function(l,e,t,i){E?l.addEventListener(e,t,i):l.attachEvent("on"+e,t)},G.removeEventListener=function(l,e,t,i){E?l.removeEventListener(e,t,i):l.detachEvent("on"+e,t)},G.stop=c,G.isMiddleOrRightButtonOnMouseUpDown=function(l){return l.which===2||l.which===3},G.notLeftMouse=function(l){return l.which>1}},46133:(W,G)=>{var T=Math.log(2);function L(R,k,O,D,E,I){var S=D+"-"+E,_=R.length;if(I.hasOwnProperty(S))return I[S];if(k===1){var g=Math.round(Math.log((1<<_)-1&~E)/T);return R[O][g]}for(var u=D|1<<O,c=O+1;D&1<<c;)c++;for(var l=0,e=0,t=0;e<_;e++){var i=1<<e;i&E||(l+=(t%2?-1:1)*R[O][e]*L(R,k-1,c,u,E|i,I),t++)}return I[S]=l,l}G.buildTransformer=function(R,k){var O=[[R[0],R[1],1,0,0,0,-k[0]*R[0],-k[0]*R[1]],[0,0,0,R[0],R[1],1,-k[1]*R[0],-k[1]*R[1]],[R[2],R[3],1,0,0,0,-k[2]*R[2],-k[2]*R[3]],[0,0,0,R[2],R[3],1,-k[3]*R[2],-k[3]*R[3]],[R[4],R[5],1,0,0,0,-k[4]*R[4],-k[4]*R[5]],[0,0,0,R[4],R[5],1,-k[5]*R[4],-k[5]*R[5]],[R[6],R[7],1,0,0,0,-k[6]*R[6],-k[6]*R[7]],[0,0,0,R[6],R[7],1,-k[7]*R[6],-k[7]*R[7]]],D={},E=L(O,8,0,0,0,D);if(E!==0){for(var I=[],S=0;S<8;S++)for(var _=0;_<8;_++)I[_]==null&&(I[_]=0),I[_]+=((S+_)%2?-1:1)*L(O,7,S===0?1:0,1<<S,1<<_,D)/E*k[S];return function(g,u,c){var l=u*I[6]+c*I[7]+1;g[0]=(u*I[0]+c*I[1]+I[2])/l,g[1]=(u*I[3]+c*I[4]+I[5])/l}}}},78038:W=>{var G=2311;W.exports=function(){return G++}},48612:(W,G,T)=>{var L=function(){};T(4990).debugMode===1&&(L=console.error);var R=L;W.exports=R},32892:(W,G)=>{var T=typeof Float32Array>"u"?Array:Float32Array;function L(){var O=new T(6);return R(O),O}function R(O){return O[0]=1,O[1]=0,O[2]=0,O[3]=1,O[4]=0,O[5]=0,O}function k(O,D){return O[0]=D[0],O[1]=D[1],O[2]=D[2],O[3]=D[3],O[4]=D[4],O[5]=D[5],O}G.create=L,G.identity=R,G.copy=k,G.mul=function(O,D,E){var I=D[0]*E[0]+D[2]*E[1],S=D[1]*E[0]+D[3]*E[1],_=D[0]*E[2]+D[2]*E[3],g=D[1]*E[2]+D[3]*E[3],u=D[0]*E[4]+D[2]*E[5]+D[4],c=D[1]*E[4]+D[3]*E[5]+D[5];return O[0]=I,O[1]=S,O[2]=_,O[3]=g,O[4]=u,O[5]=c,O},G.translate=function(O,D,E){return O[0]=D[0],O[1]=D[1],O[2]=D[2],O[3]=D[3],O[4]=D[4]+E[0],O[5]=D[5]+E[1],O},G.rotate=function(O,D,E){var I=D[0],S=D[2],_=D[4],g=D[1],u=D[3],c=D[5],l=Math.sin(E),e=Math.cos(E);return O[0]=I*e+g*l,O[1]=-I*l+g*e,O[2]=S*e+u*l,O[3]=-S*l+e*u,O[4]=e*_+l*c,O[5]=e*c-l*_,O},G.scale=function(O,D,E){var I=E[0],S=E[1];return O[0]=D[0]*I,O[1]=D[1]*S,O[2]=D[2]*I,O[3]=D[3]*S,O[4]=D[4]*I,O[5]=D[5]*S,O},G.invert=function(O,D){var E=D[0],I=D[2],S=D[4],_=D[1],g=D[3],u=D[5],c=E*g-_*I;return c?(c=1/c,O[0]=g*c,O[1]=-_*c,O[2]=-I*c,O[3]=E*c,O[4]=(I*u-g*S)*c,O[5]=(_*S-E*u)*c,O):null},G.clone=function(O){var D=L();return k(D,O),D}},19455:W=>{function G(O,D,E,I){var S=D+1;if(S===E)return 1;if(I(O[S++],O[D])<0){for(;S<E&&I(O[S],O[S-1])<0;)S++;(function(_,g,u){for(u--;g<u;){var c=_[g];_[g++]=_[u],_[u--]=c}})(O,D,S)}else for(;S<E&&I(O[S],O[S-1])>=0;)S++;return S-D}function T(O,D,E,I,S){for(I===D&&I++;I<E;I++){for(var _,g=O[I],u=D,c=I;u<c;)S(g,O[_=u+c>>>1])<0?c=_:u=_+1;var l=I-u;switch(l){case 3:O[u+3]=O[u+2];case 2:O[u+2]=O[u+1];case 1:O[u+1]=O[u];break;default:for(;l>0;)O[u+l]=O[u+l-1],l--}O[u]=g}}function L(O,D,E,I,S,_){var g=0,u=0,c=1;if(_(O,D[E+S])>0){for(u=I-S;c<u&&_(O,D[E+S+c])>0;)g=c,(c=1+(c<<1))<=0&&(c=u);c>u&&(c=u),g+=S,c+=S}else{for(u=S+1;c<u&&_(O,D[E+S-c])<=0;)g=c,(c=1+(c<<1))<=0&&(c=u);c>u&&(c=u);var l=g;g=S-c,c=S-l}for(g++;g<c;){var e=g+(c-g>>>1);_(O,D[E+e])>0?g=e+1:c=e}return c}function R(O,D,E,I,S,_){var g=0,u=0,c=1;if(_(O,D[E+S])<0){for(u=S+1;c<u&&_(O,D[E+S-c])<0;)g=c,(c=1+(c<<1))<=0&&(c=u);c>u&&(c=u);var l=g;g=S-c,c=S-l}else{for(u=I-S;c<u&&_(O,D[E+S+c])>=0;)g=c,(c=1+(c<<1))<=0&&(c=u);c>u&&(c=u),g+=S,c+=S}for(g++;g<c;){var e=g+(c-g>>>1);_(O,D[E+e])<0?c=e:g=e+1}return c}function k(O,D){var E,I,S=7,_=0;O.length;var g=[];function u(c){var l=E[c],e=I[c],t=E[c+1],i=I[c+1];I[c]=e+i,c===_-3&&(E[c+1]=E[c+2],I[c+1]=I[c+2]),_--;var s=R(O[t],O,l,e,0,D);l+=s,(e-=s)!=0&&(i=L(O[l+e-1],O,t,i,i-1,D))!==0&&(e<=i?function(a,o,r,n){var h=0;for(h=0;h<o;h++)g[h]=O[a+h];var p=0,d=r,f=a;if(O[f++]=O[d++],--n!=0)if(o!==1){for(var v,m,y,x=S;;){v=0,m=0,y=!1;do if(D(O[d],g[p])<0){if(O[f++]=O[d++],m++,v=0,--n==0){y=!0;break}}else if(O[f++]=g[p++],v++,m=0,--o==1){y=!0;break}while((v|m)<x);if(y)break;do{if((v=R(O[d],g,p,o,0,D))!==0){for(h=0;h<v;h++)O[f+h]=g[p+h];if(f+=v,p+=v,(o-=v)<=1){y=!0;break}}if(O[f++]=O[d++],--n==0){y=!0;break}if((m=L(g[p],O,d,n,0,D))!==0){for(h=0;h<m;h++)O[f+h]=O[d+h];if(f+=m,d+=m,(n-=m)==0){y=!0;break}}if(O[f++]=g[p++],--o==1){y=!0;break}x--}while(v>=7||m>=7);if(y)break;x<0&&(x=0),x+=2}if((S=x)<1&&(S=1),o===1){for(h=0;h<n;h++)O[f+h]=O[d+h];O[f+n]=g[p]}else{if(o===0)throw new Error;for(h=0;h<o;h++)O[f+h]=g[p+h]}}else{for(h=0;h<n;h++)O[f+h]=O[d+h];O[f+n]=g[p]}else for(h=0;h<o;h++)O[f+h]=g[p+h]}(l,e,t,i):function(a,o,r,n){var h=0;for(h=0;h<n;h++)g[h]=O[r+h];var p=a+o-1,d=n-1,f=r+n-1,v=0,m=0;if(O[f--]=O[p--],--o!=0)if(n!==1){for(var y=S;;){var x=0,w=0,M=!1;do if(D(g[d],O[p])<0){if(O[f--]=O[p--],x++,w=0,--o==0){M=!0;break}}else if(O[f--]=g[d--],w++,x=0,--n==1){M=!0;break}while((x|w)<y);if(M)break;do{if((x=o-R(g[d],O,a,o,o-1,D))!=0){for(o-=x,m=1+(f-=x),v=1+(p-=x),h=x-1;h>=0;h--)O[m+h]=O[v+h];if(o===0){M=!0;break}}if(O[f--]=g[d--],--n==1){M=!0;break}if((w=n-L(O[p],g,0,n,n-1,D))!=0){for(n-=w,m=1+(f-=w),v=1+(d-=w),h=0;h<w;h++)O[m+h]=g[v+h];if(n<=1){M=!0;break}}if(O[f--]=O[p--],--o==0){M=!0;break}y--}while(x>=7||w>=7);if(M)break;y<0&&(y=0),y+=2}if((S=y)<1&&(S=1),n===1){for(m=1+(f-=o),v=1+(p-=o),h=o-1;h>=0;h--)O[m+h]=O[v+h];O[f]=g[d]}else{if(n===0)throw new Error;for(v=f-(n-1),h=0;h<n;h++)O[v+h]=g[h]}}else{for(m=1+(f-=o),v=1+(p-=o),h=o-1;h>=0;h--)O[m+h]=O[v+h];O[f]=g[d]}else for(v=f-(n-1),h=0;h<n;h++)O[v+h]=g[h]}(l,e,t,i))}E=[],I=[],this.mergeRuns=function(){for(;_>1;){var c=_-2;if(c>=1&&I[c-1]<=I[c]+I[c+1]||c>=2&&I[c-2]<=I[c]+I[c-1])I[c-1]<I[c+1]&&c--;else if(I[c]>I[c+1])break;u(c)}},this.forceMergeRuns=function(){for(;_>1;){var c=_-2;c>0&&I[c-1]<I[c+1]&&c--,u(c)}},this.pushRun=function(c,l){E[_]=c,I[_]=l,_+=1}}W.exports=function(O,D,E,I){E||(E=0),I||(I=O.length);var S=I-E;if(!(S<2)){var _=0;if(S<32)T(O,E,I,E+(_=G(O,E,I,D)),D);else{var g=new k(O,D),u=function(l){for(var e=0;l>=32;)e|=1&l,l>>=1;return l+e}(S);do{if((_=G(O,E,I,D))<u){var c=S;c>u&&(c=u),T(O,E,E+c,E+_,D),_=c}g.pushRun(E,_),g.mergeRuns(),S-=_,E+=_}while(S!==0);g.forceMergeRuns()}}}},33051:(W,G)=>{var T={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},L={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},R=Object.prototype.toString,k=Array.prototype,O=k.forEach,D=k.filter,E=k.slice,I=k.map,S=k.reduce,_={};function g(d){if(d==null||typeof d!="object")return d;var f=d,v=R.call(d);if(v==="[object Array]"){if(!h(d)){f=[];for(var m=0,y=d.length;m<y;m++)f[m]=g(d[m])}}else if(L[v]){if(!h(d)){var x=d.constructor;if(d.constructor.from)f=x.from(d);else for(f=new x(d.length),m=0,y=d.length;m<y;m++)f[m]=g(d[m])}}else if(!T[v]&&!h(d)&&!r(d))for(var w in f={},d)d.hasOwnProperty(w)&&(f[w]=g(d[w]));return f}function u(d,f,v){if(!a(f)||!a(d))return v?g(f):d;for(var m in f)if(f.hasOwnProperty(m)){var y=d[m],x=f[m];!a(x)||!a(y)||s(x)||s(y)||r(x)||r(y)||o(x)||o(y)||h(x)||h(y)?!v&&m in d||(d[m]=g(f[m])):u(y,x,v)}return d}function c(d,f,v){for(var m in f)f.hasOwnProperty(m)&&(v?f[m]!=null:d[m]==null)&&(d[m]=f[m]);return d}var l,e=function(){return _.createCanvas()};function t(d,f,v){if(d&&f)if(d.forEach&&d.forEach===O)d.forEach(f,v);else if(d.length===+d.length)for(var m=0,y=d.length;m<y;m++)f.call(v,d[m],m,d);else for(var x in d)d.hasOwnProperty(x)&&f.call(v,d[x],x,d)}function i(d,f){var v=E.call(arguments,2);return function(){return d.apply(f,v.concat(E.call(arguments)))}}function s(d){return R.call(d)==="[object Array]"}function a(d){var f=typeof d;return f==="function"||!!d&&f==="object"}function o(d){return!!T[R.call(d)]}function r(d){return typeof d=="object"&&typeof d.nodeType=="number"&&typeof d.ownerDocument=="object"}_.createCanvas=function(){return document.createElement("canvas")};var n="__ec_primitive__";function h(d){return d[n]}function p(d){var f=s(d);this.data={};var v=this;function m(y,x){f?v.set(y,x):v.set(x,y)}d instanceof p?d.each(m):d&&t(d,m)}p.prototype={constructor:p,get:function(d){return this.data.hasOwnProperty(d)?this.data[d]:null},set:function(d,f){return this.data[d]=f},each:function(d,f){for(var v in f!==void 0&&(d=i(d,f)),this.data)this.data.hasOwnProperty(v)&&d(this.data[v],v)},removeKey:function(d){delete this.data[d]}},G.$override=function(d,f){d==="createCanvas"&&(l=null),_[d]=f},G.clone=g,G.merge=u,G.mergeAll=function(d,f){for(var v=d[0],m=1,y=d.length;m<y;m++)v=u(v,d[m],f);return v},G.extend=function(d,f){for(var v in f)f.hasOwnProperty(v)&&(d[v]=f[v]);return d},G.defaults=c,G.createCanvas=e,G.getContext=function(){return l||(l=e().getContext("2d")),l},G.indexOf=function(d,f){if(d){if(d.indexOf)return d.indexOf(f);for(var v=0,m=d.length;v<m;v++)if(d[v]===f)return v}return-1},G.inherits=function(d,f){var v=d.prototype;function m(){}for(var y in m.prototype=f.prototype,d.prototype=new m,v)v.hasOwnProperty(y)&&(d.prototype[y]=v[y]);d.prototype.constructor=d,d.superClass=f},G.mixin=function(d,f,v){c(d="prototype"in d?d.prototype:d,f="prototype"in f?f.prototype:f,v)},G.isArrayLike=function(d){if(d)return typeof d!="string"&&typeof d.length=="number"},G.each=t,G.map=function(d,f,v){if(d&&f){if(d.map&&d.map===I)return d.map(f,v);for(var m=[],y=0,x=d.length;y<x;y++)m.push(f.call(v,d[y],y,d));return m}},G.reduce=function(d,f,v,m){if(d&&f){if(d.reduce&&d.reduce===S)return d.reduce(f,v,m);for(var y=0,x=d.length;y<x;y++)v=f.call(m,v,d[y],y,d);return v}},G.filter=function(d,f,v){if(d&&f){if(d.filter&&d.filter===D)return d.filter(f,v);for(var m=[],y=0,x=d.length;y<x;y++)f.call(v,d[y],y,d)&&m.push(d[y]);return m}},G.find=function(d,f,v){if(d&&f){for(var m=0,y=d.length;m<y;m++)if(f.call(v,d[m],m,d))return d[m]}},G.bind=i,G.curry=function(d){var f=E.call(arguments,1);return function(){return d.apply(this,f.concat(E.call(arguments)))}},G.isArray=s,G.isFunction=function(d){return typeof d=="function"},G.isString=function(d){return R.call(d)==="[object String]"},G.isObject=a,G.isBuiltInObject=o,G.isTypedArray=function(d){return!!L[R.call(d)]},G.isDom=r,G.eqNaN=function(d){return d!=d},G.retrieve=function(d){for(var f=0,v=arguments.length;f<v;f++)if(arguments[f]!=null)return arguments[f]},G.retrieve2=function(d,f){return d!=null?d:f},G.retrieve3=function(d,f,v){return d!=null?d:f!=null?f:v},G.slice=function(){return Function.call.apply(E,arguments)},G.normalizeCssArray=function(d){if(typeof d=="number")return[d,d,d,d];var f=d.length;return f===2?[d[0],d[1],d[0],d[1]]:f===3?[d[0],d[1],d[2],d[1]]:d},G.assert=function(d,f){if(!d)throw new Error(f)},G.trim=function(d){return d==null?null:typeof d.trim=="function"?d.trim():d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},G.setAsPrimitive=function(d){d[n]=!0},G.isPrimitive=h,G.createHashMap=function(d){return new p(d)},G.concatArray=function(d,f){for(var v=new d.constructor(d.length+f.length),m=0;m<d.length;m++)v[m]=d[m];var y=d.length;for(m=0;m<f.length;m++)v[m+y]=f[m];return v},G.noop=function(){}},45280:(W,G)=>{var T=typeof Float32Array>"u"?Array:Float32Array;function L(_){return Math.sqrt(k(_))}var R=L;function k(_){return _[0]*_[0]+_[1]*_[1]}var O=k;function D(_,g){return Math.sqrt((_[0]-g[0])*(_[0]-g[0])+(_[1]-g[1])*(_[1]-g[1]))}var E=D;function I(_,g){return(_[0]-g[0])*(_[0]-g[0])+(_[1]-g[1])*(_[1]-g[1])}var S=I;G.create=function(_,g){var u=new T(2);return _==null&&(_=0),g==null&&(g=0),u[0]=_,u[1]=g,u},G.copy=function(_,g){return _[0]=g[0],_[1]=g[1],_},G.clone=function(_){var g=new T(2);return g[0]=_[0],g[1]=_[1],g},G.set=function(_,g,u){return _[0]=g,_[1]=u,_},G.add=function(_,g,u){return _[0]=g[0]+u[0],_[1]=g[1]+u[1],_},G.scaleAndAdd=function(_,g,u,c){return _[0]=g[0]+u[0]*c,_[1]=g[1]+u[1]*c,_},G.sub=function(_,g,u){return _[0]=g[0]-u[0],_[1]=g[1]-u[1],_},G.len=L,G.length=R,G.lenSquare=k,G.lengthSquare=O,G.mul=function(_,g,u){return _[0]=g[0]*u[0],_[1]=g[1]*u[1],_},G.div=function(_,g,u){return _[0]=g[0]/u[0],_[1]=g[1]/u[1],_},G.dot=function(_,g){return _[0]*g[0]+_[1]*g[1]},G.scale=function(_,g,u){return _[0]=g[0]*u,_[1]=g[1]*u,_},G.normalize=function(_,g){var u=L(g);return u===0?(_[0]=0,_[1]=0):(_[0]=g[0]/u,_[1]=g[1]/u),_},G.distance=D,G.dist=E,G.distanceSquare=I,G.distSquare=S,G.negate=function(_,g){return _[0]=-g[0],_[1]=-g[1],_},G.lerp=function(_,g,u,c){return _[0]=g[0]+c*(u[0]-g[0]),_[1]=g[1]+c*(u[1]-g[1]),_},G.applyTransform=function(_,g,u){var c=g[0],l=g[1];return _[0]=u[0]*c+u[2]*l+u[4],_[1]=u[1]*c+u[3]*l+u[5],_},G.min=function(_,g,u){return _[0]=Math.min(g[0],u[0]),_[1]=Math.min(g[1],u[1]),_},G.max=function(_,g,u){return _[0]=Math.max(g[0],u[0]),_[1]=Math.max(g[1],u[1]),_}},85546:(W,G,T)=>{var L,R,k=T(61158),O=k.addEventListener,D=k.removeEventListener,E=k.normalizeEvent,I=k.getNativeEvent,S=T(33051),_=T(41502),g=T(66387),u=g.domSupported,c=(R={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:L=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:S.map(L,function(w){var M=w.replace("mouse","pointer");return R.hasOwnProperty(M)?M:w})}),l=["mousemove","mouseup"],e=["pointermove","pointerup"];function t(w){return w==="mousewheel"&&g.browser.firefox?"DOMMouseScroll":w}function i(w){var M=w.pointerType;return M==="pen"||M==="touch"}function s(w){w&&(w.zrByTouch=!0)}function a(w,M){for(var C=M,A=!1;C&&C.nodeType!==9&&!(A=C.domBelongToZr||C!==M&&C===w.painterRoot);)C=C.parentNode;return A}function o(w,M){this.type=M.type,this.target=this.currentTarget=w.dom,this.pointerType=M.pointerType,this.clientX=M.clientX,this.clientY=M.clientY}var r=o.prototype;r.stopPropagation=r.stopImmediatePropagation=r.preventDefault=S.noop;var n={mousedown:function(w){w=E(this.dom,w),this._mayPointerCapture=[w.zrX,w.zrY],this.trigger("mousedown",w)},mousemove:function(w){w=E(this.dom,w);var M=this._mayPointerCapture;!M||w.zrX===M[0]&&w.zrY===M[1]||f(this,!0),this.trigger("mousemove",w)},mouseup:function(w){w=E(this.dom,w),f(this,!1),this.trigger("mouseup",w)},mouseout:function(w){w=E(this.dom,w),this._pointerCapturing&&(w.zrEventControl="no_globalout");var M=w.toElement||w.relatedTarget;w.zrIsToLocalDOM=a(this,M),this.trigger("mouseout",w)},touchstart:function(w){s(w=E(this.dom,w)),this._lastTouchMoment=new Date,this.handler.processGesture(w,"start"),n.mousemove.call(this,w),n.mousedown.call(this,w)},touchmove:function(w){s(w=E(this.dom,w)),this.handler.processGesture(w,"change"),n.mousemove.call(this,w)},touchend:function(w){s(w=E(this.dom,w)),this.handler.processGesture(w,"end"),n.mouseup.call(this,w),+new Date-this._lastTouchMoment<300&&n.click.call(this,w)},pointerdown:function(w){n.mousedown.call(this,w)},pointermove:function(w){i(w)||n.mousemove.call(this,w)},pointerup:function(w){n.mouseup.call(this,w)},pointerout:function(w){i(w)||n.mouseout.call(this,w)}};S.each(["click","mousewheel","dblclick","contextmenu"],function(w){n[w]=function(M){M=E(this.dom,M),this.trigger(w,M)}});var h={pointermove:function(w){i(w)||h.mousemove.call(this,w)},pointerup:function(w){h.mouseup.call(this,w)},mousemove:function(w){this.trigger("mousemove",w)},mouseup:function(w){var M=this._pointerCapturing;f(this,!1),this.trigger("mouseup",w),M&&(w.zrEventControl="only_globalout",this.trigger("mouseout",w))}};function p(w,M,C,A){w.mounted[M]=C,w.listenerOpts[M]=A,O(w.domTarget,t(M),C,A)}function d(w){var M=w.mounted;for(var C in M)M.hasOwnProperty(C)&&D(w.domTarget,t(C),M[C],w.listenerOpts[C]);w.mounted={}}function f(w,M){if(w._mayPointerCapture=null,u&&w._pointerCapturing^M){w._pointerCapturing=M;var C=w._globalHandlerScope;M?function(A,P){function b(N){p(P,N,function(B){B=I(B),a(A,B.target)||(B=function(z,F){return E(z.dom,new o(z,F),!0)}(A,B),P.domHandlers[N].call(A,B))},{capture:!0})}g.pointerEventsSupported?S.each(e,b):g.touchEventsSupported||S.each(l,b)}(w,C):d(C)}}function v(w,M){this.domTarget=w,this.domHandlers=M,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function m(w,M){var C,A,P;_.call(this),this.dom=w,this.painterRoot=M,this._localHandlerScope=new v(w,n),u&&(this._globalHandlerScope=new v(document,h)),this._pointerCapturing=!1,this._mayPointerCapture=null,C=this,A=this._localHandlerScope,P=A.domHandlers,g.pointerEventsSupported?S.each(c.pointer,function(b){p(A,b,function(N){P[b].call(C,N)})}):(g.touchEventsSupported&&S.each(c.touch,function(b){p(A,b,function(N){P[b].call(C,N),function(B){B.touching=!0,B.touchTimer!=null&&(clearTimeout(B.touchTimer),B.touchTimer=null),B.touchTimer=setTimeout(function(){B.touching=!1,B.touchTimer=null},700)}(A)})}),S.each(c.mouse,function(b){p(A,b,function(N){N=I(N),A.touching||P[b].call(C,N)})}))}var y=m.prototype;y.dispose=function(){d(this._localHandlerScope),u&&d(this._globalHandlerScope)},y.setCursor=function(w){this.dom.style&&(this.dom.style.cursor=w||"default")},S.mixin(m,_);var x=m;W.exports=x},52776:(W,G,T)=>{var L=T(10712),R=L.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var k=this.__dirtyPath,O=this.shape.paths,D=0;D<O.length;D++)k=k||O[D].__dirtyPath;this.__dirtyPath=k,this.__dirty=this.__dirty||k},beforeBrush:function(){this._updatePathDirty();for(var k=this.shape.paths||[],O=this.getGlobalScale(),D=0;D<k.length;D++)k[D].path||k[D].createPathProxy(),k[D].path.setScale(O[0],O[1],k[D].segmentIgnoreThreshold)},buildPath:function(k,O){for(var D=O.paths||[],E=0;E<D.length;E++)D[E].buildPath(k,D[E].shape,!0)},afterBrush:function(){for(var k=this.shape.paths||[],O=0;O<k.length;O++)k[O].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),L.prototype.getBoundingRect.call(this)}});W.exports=R},7719:(W,G,T)=>{var L=T(33051),R=T(40342),k=T(85823),O=T(41406);function D(I){for(var S in I=I||{},k.call(this,I),I)I.hasOwnProperty(S)&&S!=="style"&&(this[S]=I[S]);this.style=new R(I.style,this),this._rect=null,this.__clipPaths=null}D.prototype={constructor:D,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(I){},afterBrush:function(I){},brush:function(I,S){},getBoundingRect:function(){},contain:function(I,S){return this.rectContain(I,S)},traverse:function(I,S){I.call(S,this)},rectContain:function(I,S){var _=this.transformCoordToLocal(I,S);return this.getBoundingRect().contain(_[0],_[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(I){return this.animate("style",I)},attrKV:function(I,S){I!=="style"?k.prototype.attrKV.call(this,I,S):this.style.set(S)},setStyle:function(I,S){return this.style.set(I,S),this.dirty(!1),this},useStyle:function(I){return this.style=new R(I,this),this.dirty(!1),this},calculateTextPosition:null},L.inherits(D,k),L.mixin(D,O);var E=D;W.exports=E},31797:W=>{var G=function(L){this.colorStops=L||[]};G.prototype={constructor:G,addColorStop:function(L,R){this.colorStops.push({offset:L,color:R})}};var T=G;W.exports=T},44535:(W,G,T)=>{var L=T(7719),R=T(60479),k=T(33051),O=T(8007);function D(I){L.call(this,I)}D.prototype={constructor:D,type:"image",brush:function(I,S){var _=this.style,g=_.image;_.bind(I,this,S);var u=this._image=O.createOrUpdateImage(g,this._image,this,this.onload);if(u&&O.isImageReady(u)){var c=_.x||0,l=_.y||0,e=_.width,t=_.height,i=u.width/u.height;if(e==null&&t!=null?e=t*i:t==null&&e!=null?t=e/i:e==null&&t==null&&(e=u.width,t=u.height),this.setTransform(I),_.sWidth&&_.sHeight){var s=_.sx||0,a=_.sy||0;I.drawImage(u,s,a,_.sWidth,_.sHeight,c,l,e,t)}else if(_.sx&&_.sy){var o=e-(s=_.sx),r=t-(a=_.sy);I.drawImage(u,s,a,o,r,c,l,e,t)}else I.drawImage(u,c,l,e,t);_.text!=null&&(this.restoreTransform(I),this.drawRectText(I,this.getBoundingRect()))}},getBoundingRect:function(){var I=this.style;return this._rect||(this._rect=new R(I.x||0,I.y||0,I.width||0,I.height||0)),this._rect}},k.inherits(D,L);var E=D;W.exports=E},91754:(W,G,T)=>{var L=T(33051).inherits,R=T(7719),k=T(60479);function O(I){R.call(this,I),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}O.prototype.incremental=!0,O.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},O.prototype.addDisplayable=function(I,S){S?this._temporaryDisplayables.push(I):this._displayables.push(I),this.dirty()},O.prototype.addDisplayables=function(I,S){S=S||!1;for(var _=0;_<I.length;_++)this.addDisplayable(I[_],S)},O.prototype.eachPendingDisplayable=function(I){for(var S=this._cursor;S<this._displayables.length;S++)I&&I(this._displayables[S]);for(S=0;S<this._temporaryDisplayables.length;S++)I&&I(this._temporaryDisplayables[S])},O.prototype.update=function(){this.updateTransform();for(var I=this._cursor;I<this._displayables.length;I++)(S=this._displayables[I]).parent=this,S.update(),S.parent=null;for(I=0;I<this._temporaryDisplayables.length;I++){var S;(S=this._temporaryDisplayables[I]).parent=this,S.update(),S.parent=null}},O.prototype.brush=function(I,S){for(var _=this._cursor;_<this._displayables.length;_++)(g=this._displayables[_]).beforeBrush&&g.beforeBrush(I),g.brush(I,_===this._cursor?null:this._displayables[_-1]),g.afterBrush&&g.afterBrush(I);for(this._cursor=_,_=0;_<this._temporaryDisplayables.length;_++){var g;(g=this._temporaryDisplayables[_]).beforeBrush&&g.beforeBrush(I),g.brush(I,_===0?null:this._temporaryDisplayables[_-1]),g.afterBrush&&g.afterBrush(I)}this._temporaryDisplayables=[],this.notClear=!0};var D=[];O.prototype.getBoundingRect=function(){if(!this._rect){for(var I=new k(1/0,1/0,-1/0,-1/0),S=0;S<this._displayables.length;S++){var _=this._displayables[S],g=_.getBoundingRect().clone();_.needLocalTransform()&&g.applyTransform(_.getLocalTransform(D)),I.union(g)}this._rect=I}return this._rect},O.prototype.contain=function(I,S){var _=this.transformCoordToLocal(I,S);if(this.getBoundingRect().contain(_[0],_[1])){for(var g=0;g<this._displayables.length;g++)if(this._displayables[g].contain(I,S))return!0}return!1},L(O,R);var E=O;W.exports=E},74438:(W,G,T)=>{var L=T(33051),R=T(31797),k=function(D,E,I,S,_,g){this.x=D==null?0:D,this.y=E==null?0:E,this.x2=I==null?1:I,this.y2=S==null?0:S,this.type="linear",this.global=g||!1,R.call(this,_)};k.prototype={constructor:k},L.inherits(k,R);var O=k;W.exports=O},10712:(W,G,T)=>{var L=T(7719),R=T(33051),k=T(14014),O=T(85365),D=T(31870).prototype.getCanvasPattern,E=Math.abs,I=new k(!0);function S(g){L.call(this,g),this.path=null}S.prototype={constructor:S,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(g,u){var c,l=this.style,e=this.path||I,t=l.hasStroke(),i=l.hasFill(),s=l.fill,a=l.stroke,o=i&&!!s.colorStops,r=t&&!!a.colorStops,n=i&&!!s.image,h=t&&!!a.image;l.bind(g,this,u),this.setTransform(g),this.__dirty&&(o&&(c=c||this.getBoundingRect(),this._fillGradient=l.getGradient(g,s,c)),r&&(c=c||this.getBoundingRect(),this._strokeGradient=l.getGradient(g,a,c))),o?g.fillStyle=this._fillGradient:n&&(g.fillStyle=D.call(s,g)),r?g.strokeStyle=this._strokeGradient:h&&(g.strokeStyle=D.call(a,g));var p=l.lineDash,d=l.lineDashOffset,f=!!g.setLineDash,v=this.getGlobalScale();if(e.setScale(v[0],v[1],this.segmentIgnoreThreshold),this.__dirtyPath||p&&!f&&t?(e.beginPath(g),p&&!f&&(e.setLineDash(p),e.setLineDashOffset(d)),this.buildPath(e,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(g.beginPath(),this.path.rebuildPath(g)),i)if(l.fillOpacity!=null){var m=g.globalAlpha;g.globalAlpha=l.fillOpacity*l.opacity,e.fill(g),g.globalAlpha=m}else e.fill(g);p&&f&&(g.setLineDash(p),g.lineDashOffset=d),t&&(l.strokeOpacity!=null?(m=g.globalAlpha,g.globalAlpha=l.strokeOpacity*l.opacity,e.stroke(g),g.globalAlpha=m):e.stroke(g)),p&&f&&g.setLineDash([]),l.text!=null&&(this.restoreTransform(g),this.drawRectText(g,this.getBoundingRect()))},buildPath:function(g,u,c){},createPathProxy:function(){this.path=new k},getBoundingRect:function(){var g=this._rect,u=this.style,c=!g;if(c){var l=this.path;l||(l=this.path=new k),this.__dirtyPath&&(l.beginPath(),this.buildPath(l,this.shape,!1)),g=l.getBoundingRect()}if(this._rect=g,u.hasStroke()){var e=this._rectWithStroke||(this._rectWithStroke=g.clone());if(this.__dirty||c){e.copy(g);var t=u.lineWidth,i=u.strokeNoScale?this.getLineScale():1;u.hasFill()||(t=Math.max(t,this.strokeContainThreshold||4)),i>1e-10&&(e.width+=t/i,e.height+=t/i,e.x-=t/i/2,e.y-=t/i/2)}return e}return g},contain:function(g,u){var c=this.transformCoordToLocal(g,u),l=this.getBoundingRect(),e=this.style;if(g=c[0],u=c[1],l.contain(g,u)){var t=this.path.data;if(e.hasStroke()){var i=e.lineWidth,s=e.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(e.hasFill()||(i=Math.max(i,this.strokeContainThreshold)),O.containStroke(t,i/s,g,u)))return!0}if(e.hasFill())return O.contain(t,g,u)}return!1},dirty:function(g){g==null&&(g=!0),g&&(this.__dirtyPath=g,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(g){return this.animate("shape",g)},attrKV:function(g,u){g==="shape"?(this.setShape(u),this.__dirtyPath=!0,this._rect=null):L.prototype.attrKV.call(this,g,u)},setShape:function(g,u){var c=this.shape;if(c){if(R.isObject(g))for(var l in g)g.hasOwnProperty(l)&&(c[l]=g[l]);else c[g]=u;this.dirty(!0)}return this},getLineScale:function(){var g=this.transform;return g&&E(g[0]-1)>1e-10&&E(g[3]-1)>1e-10?Math.sqrt(E(g[0]*g[3]-g[2]*g[1])):1}},S.extend=function(g){var u=function(l){S.call(this,l),g.style&&this.style.extendFrom(g.style,!1);var e=g.shape;if(e){this.shape=this.shape||{};var t=this.shape;for(var i in e)!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(t[i]=e[i])}g.init&&g.init.call(this,l)};for(var c in R.inherits(u,S),g)c!=="style"&&c!=="shape"&&(u.prototype[c]=g[c]);return u},R.inherits(S,L);var _=S;W.exports=_},31870:W=>{var G=function(L,R){this.image=L,this.repeat=R,this.type="pattern"};G.prototype.getCanvasPattern=function(L){return L.createPattern(this.image,this.repeat||"repeat")};var T=G;W.exports=T},36369:(W,G,T)=>{var L=T(33051),R=T(31797),k=function(D,E,I,S,_){this.x=D==null?.5:D,this.y=E==null?.5:E,this.r=I==null?.5:I,this.type="radial",this.global=_||!1,R.call(this,S)};k.prototype={constructor:k},L.inherits(k,R);var O=k;W.exports=O},40342:(W,G,T)=>{var L=T(61260),R=T(71131).ContextCachedBy,k=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],O=function(u){this.extendFrom(u,!1)};function D(u,c,l){var e=c.x==null?0:c.x,t=c.x2==null?1:c.x2,i=c.y==null?0:c.y,s=c.y2==null?0:c.y2;return c.global||(e=e*l.width+l.x,t=t*l.width+l.x,i=i*l.height+l.y,s=s*l.height+l.y),e=isNaN(e)?0:e,t=isNaN(t)?1:t,i=isNaN(i)?0:i,s=isNaN(s)?0:s,u.createLinearGradient(e,i,t,s)}function E(u,c,l){var e=l.width,t=l.height,i=Math.min(e,t),s=c.x==null?.5:c.x,a=c.y==null?.5:c.y,o=c.r==null?.5:c.r;return c.global||(s=s*e+l.x,a=a*t+l.y,o*=i),u.createRadialGradient(s,a,0,s,a,o)}for(var I=O.prototype={constructor:O,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(u,c,l){var e=this,t=l&&l.style,i=!t||u.__attrCachedBy!==R.STYLE_BIND;u.__attrCachedBy=R.STYLE_BIND;for(var s=0;s<k.length;s++){var a=k[s],o=a[0];(i||e[o]!==t[o])&&(u[o]=L(u,o,e[o]||a[1]))}if((i||e.fill!==t.fill)&&(u.fillStyle=e.fill),(i||e.stroke!==t.stroke)&&(u.strokeStyle=e.stroke),(i||e.opacity!==t.opacity)&&(u.globalAlpha=e.opacity==null?1:e.opacity),(i||e.blend!==t.blend)&&(u.globalCompositeOperation=e.blend||"source-over"),this.hasStroke()){var r=e.lineWidth;u.lineWidth=r/(this.strokeNoScale&&c&&c.getLineScale?c.getLineScale():1)}},hasFill:function(){var u=this.fill;return u!=null&&u!=="none"},hasStroke:function(){var u=this.stroke;return u!=null&&u!=="none"&&this.lineWidth>0},extendFrom:function(u,c){if(u)for(var l in u)!u.hasOwnProperty(l)||c!==!0&&(c===!1?this.hasOwnProperty(l):u[l]==null)||(this[l]=u[l])},set:function(u,c){typeof u=="string"?this[u]=c:this.extendFrom(u,!0)},clone:function(){var u=new this.constructor;return u.extendFrom(this,!0),u},getGradient:function(u,c,l){for(var e=(c.type==="radial"?E:D)(u,c,l),t=c.colorStops,i=0;i<t.length;i++)e.addColorStop(t[i].offset,t[i].color);return e}},S=0;S<k.length;S++){var _=k[S];_[0]in I||(I[_[0]]=_[1])}O.getGradient=I.getGradient;var g=O;W.exports=g},96498:(W,G,T)=>{var L=T(7719),R=T(33051),k=T(80423),O=T(98886),D=T(71131).ContextCachedBy,E=function(S){L.call(this,S)};E.prototype={constructor:E,type:"text",brush:function(S,_){var g=this.style;this.__dirty&&O.normalizeTextStyle(g,!0),g.fill=g.stroke=g.shadowBlur=g.shadowColor=g.shadowOffsetX=g.shadowOffsetY=null;var u=g.text;u!=null&&(u+=""),O.needDrawText(u,g)?(this.setTransform(S),O.renderText(this,S,u,g,null,_),this.restoreTransform(S)):S.__attrCachedBy=D.NONE},getBoundingRect:function(){var S=this.style;if(this.__dirty&&O.normalizeTextStyle(S,!0),!this._rect){S.text;var _=k.getBoundingRect(S.text+"",S.font,S.textAlign,S.textVerticalAlign,S.textPadding,S.textLineHeight,S.rich);if(_.x+=S.x||0,_.y+=S.y||0,O.getStroke(S.textStroke,S.textStrokeWidth)){var g=S.textStrokeWidth;_.x-=g/2,_.y-=g/2,_.width+=g,_.height+=g}this._rect=_}return this._rect}},R.inherits(E,L);var I=E;W.exports=I},71131:(W,G)=>{G.ContextCachedBy={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},G.WILL_BE_RESTORED=9},60873:(W,G,T)=>{var L=T(66387),R=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];W.exports=function(k){return L.browser.ie&&L.browser.version>=11?function(){var O,D=this.__clipPaths,E=this.style;if(D)for(var I=0;I<D.length;I++){var S=D[I],_=S&&S.shape,g=S&&S.type;if(_&&(g==="sector"&&_.startAngle===_.endAngle||g==="rect"&&(!_.width||!_.height))){for(var u=0;u<R.length;u++)R[u][2]=E[R[u][0]],E[R[u][0]]=R[u][1];O=!0;break}}if(k.apply(this,arguments),O)for(u=0;u<R.length;u++)E[R[u][0]]=R[u][2]}:k}},61260:W=>{var G={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};W.exports=function(T,L,R){return G.hasOwnProperty(L)?R*T.dpr:R}},8007:(W,G,T)=>{var L=new(T(92528))(50);function R(){var O=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var D=0;D<O.pending.length;D++){var E=O.pending[D],I=E.cb;I&&I(this,E.cbPayload),E.hostEl.dirty()}O.pending.length=0}function k(O){return O&&O.width&&O.height}G.findExistImage=function(O){if(typeof O=="string"){var D=L.get(O);return D&&D.image}return O},G.createOrUpdateImage=function(O,D,E,I,S){if(O){if(typeof O=="string"){if(D&&D.__zrImageSrc===O||!E)return D;var _=L.get(O),g={hostEl:E,cb:I,cbPayload:S};return _?!k(D=_.image)&&_.pending.push(g):((D=new Image).onload=D.onerror=R,L.put(O,D.__cachedImgObj={image:D,pending:[g]}),D.src=D.__zrImageSrc=O),D}return O}return D},G.isImageReady=k},79209:(W,G,T)=>{var L=T(31847),R=T(96005);G.buildPath=function(k,O,D){var E=O.points,I=O.smooth;if(E&&E.length>=2){if(I&&I!=="spline"){var S=R(E,I,D,O.smoothConstraint);k.moveTo(E[0][0],E[0][1]);for(var _=E.length,g=0;g<(D?_:_-1);g++){var u=S[2*g],c=S[2*g+1],l=E[(g+1)%_];k.bezierCurveTo(u[0],u[1],c[0],c[1],l[0],l[1])}}else{I==="spline"&&(E=L(E,D)),k.moveTo(E[0][0],E[0][1]),g=1;for(var e=E.length;g<e;g++)k.lineTo(E[g][0],E[g][1])}D&&k.closePath()}}},48988:(W,G)=>{G.buildPath=function(T,L){var R,k,O,D,E,I=L.x,S=L.y,_=L.width,g=L.height,u=L.r;_<0&&(I+=_,_=-_),g<0&&(S+=g,g=-g),typeof u=="number"?R=k=O=D=u:u instanceof Array?u.length===1?R=k=O=D=u[0]:u.length===2?(R=O=u[0],k=D=u[1]):u.length===3?(R=u[0],k=D=u[1],O=u[2]):(R=u[0],k=u[1],O=u[2],D=u[3]):R=k=O=D=0,R+k>_&&(R*=_/(E=R+k),k*=_/E),O+D>_&&(O*=_/(E=O+D),D*=_/E),k+O>g&&(k*=g/(E=k+O),O*=g/E),R+D>g&&(R*=g/(E=R+D),D*=g/E),T.moveTo(I+R,S),T.lineTo(I+_-k,S),k!==0&&T.arc(I+_-k,S+k,k,-Math.PI/2,0),T.lineTo(I+_,S+g-O),O!==0&&T.arc(I+_-O,S+g-O,O,0,Math.PI/2),T.lineTo(I+D,S+g),D!==0&&T.arc(I+D,S+g-D,D,Math.PI/2,Math.PI),T.lineTo(I,S+R),R!==0&&T.arc(I+R,S+R,R,Math.PI,1.5*Math.PI)}},96005:(W,G,T)=>{var L=T(45280),R=L.min,k=L.max,O=L.scale,D=L.distance,E=L.add,I=L.clone,S=L.sub;W.exports=function(_,g,u,c){var l,e,t,i,s=[],a=[],o=[],r=[];if(c){t=[1/0,1/0],i=[-1/0,-1/0];for(var n=0,h=_.length;n<h;n++)R(t,t,_[n]),k(i,i,_[n]);R(t,t,c[0]),k(i,i,c[1])}for(n=0,h=_.length;n<h;n++){var p=_[n];if(u)l=_[n?n-1:h-1],e=_[(n+1)%h];else{if(n===0||n===h-1){s.push(I(_[n]));continue}l=_[n-1],e=_[n+1]}S(a,e,l),O(a,a,g);var d=D(p,l),f=D(p,e),v=d+f;v!==0&&(d/=v,f/=v),O(o,a,-d),O(r,a,f);var m=E([],p,o),y=E([],p,r);c&&(k(m,m,t),R(m,m,i),k(y,y,t),R(y,y,i)),s.push(m),s.push(y)}return u&&s.push(s.shift()),s}},31847:(W,G,T)=>{var L=T(45280).distance;function R(k,O,D,E,I,S,_){var g=.5*(D-k),u=.5*(E-O);return(2*(O-D)+g+u)*_+(-3*(O-D)-2*g-u)*S+g*I+O}W.exports=function(k,O){for(var D=k.length,E=[],I=0,S=1;S<D;S++)I+=L(k[S-1],k[S]);var _=I/2;for(_=_<D?D:_,S=0;S<_;S++){var g,u,c,l=S/(_-1)*(O?D:D-1),e=Math.floor(l),t=l-e,i=k[e%D];O?(g=k[(e-1+D)%D],u=k[(e+1)%D],c=k[(e+2)%D]):(g=k[e===0?e:e-1],u=k[e>D-2?D-1:e+1],c=k[e>D-3?D-1:e+2]);var s=t*t,a=t*s;E.push([R(g[0],i[0],u[0],c[0],t,s,a),R(g[1],i[1],u[1],c[1],t,s,a)])}return E}},24111:(W,G)=>{var T=Math.round;function L(R,k,O){if(!k)return R;var D=T(2*R);return(D+T(k))%2==0?D/2:(D+(O?1:-1))/2}G.subPixelOptimizeLine=function(R,k,O){if(k){var D=k.x1,E=k.x2,I=k.y1,S=k.y2;R.x1=D,R.x2=E,R.y1=I,R.y2=S;var _=O&&O.lineWidth;_&&(T(2*D)===T(2*E)&&(R.x1=R.x2=L(D,_,!0)),T(2*I)===T(2*S)&&(R.y1=R.y2=L(I,_,!0)))}},G.subPixelOptimizeRect=function(R,k,O){if(k){var D=k.x,E=k.y,I=k.width,S=k.height;R.x=D,R.y=E,R.width=I,R.height=S;var _=O&&O.lineWidth;_&&(R.x=L(D,_,!0),R.y=L(E,_,!0),R.width=Math.max(L(D+I,_,!1)-R.x,I===0?0:1),R.height=Math.max(L(E+S,_,!1)-R.y,S===0?0:1))}},G.subPixelOptimize=L},98886:(W,G,T)=>{var L=T(33051),R=L.retrieve2,k=L.retrieve3,O=L.each,D=L.normalizeCssArray,E=L.isString,I=L.isObject,S=T(80423),_=T(48988),g=T(8007),u=T(61260),c=T(71131),l=c.ContextCachedBy,e=c.WILL_BE_RESTORED,t=S.DEFAULT_FONT,i={left:1,right:1,center:1},s={top:1,bottom:1,middle:1},a=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],o={},r={};function n(A){if(A){A.font=S.makeFont(A);var P=A.textAlign;P==="middle"&&(P="center"),A.textAlign=P==null||i[P]?P:"left";var b=A.textVerticalAlign||A.textBaseline;b==="center"&&(b="middle"),A.textVerticalAlign=b==null||s[b]?b:"top",A.textPadding&&(A.textPadding=D(A.textPadding))}}function h(A,P,b,N,B){if(b&&P.textRotation){var z=P.textOrigin;z==="center"?(N=b.width/2+b.x,B=b.height/2+b.y):z&&(N=z[0]+b.x,B=z[1]+b.y),A.translate(N,B),A.rotate(-P.textRotation),A.translate(-N,-B)}}function p(A,P,b,N,B,z,F,V){var H=N.rich[b.styleName]||{};H.text=b.text;var U=b.textVerticalAlign,j=z+B/2;U==="top"?j=z+b.height/2:U==="bottom"&&(j=z+B-b.height/2),!b.isLineHolder&&d(H)&&f(A,P,H,V==="right"?F-b.width:V==="center"?F-b.width/2:F,j-b.height/2,b.width,b.height);var X=b.textPadding;X&&(F=C(F,V,X),j-=b.height/2-X[2]-b.textHeight/2),y(P,"shadowBlur",k(H.textShadowBlur,N.textShadowBlur,0)),y(P,"shadowColor",H.textShadowColor||N.textShadowColor||"transparent"),y(P,"shadowOffsetX",k(H.textShadowOffsetX,N.textShadowOffsetX,0)),y(P,"shadowOffsetY",k(H.textShadowOffsetY,N.textShadowOffsetY,0)),y(P,"textAlign",V),y(P,"textBaseline","middle"),y(P,"font",b.font||t);var Y=x(H.textStroke||N.textStroke,K),J=w(H.textFill||N.textFill),K=R(H.textStrokeWidth,N.textStrokeWidth);Y&&(y(P,"lineWidth",K),y(P,"strokeStyle",Y),P.strokeText(b.text,F,j)),J&&(y(P,"fillStyle",J),P.fillText(b.text,F,j))}function d(A){return!!(A.textBackgroundColor||A.textBorderWidth&&A.textBorderColor)}function f(A,P,b,N,B,z,F){var V=b.textBackgroundColor,H=b.textBorderWidth,U=b.textBorderColor,j=E(V);if(y(P,"shadowBlur",b.textBoxShadowBlur||0),y(P,"shadowColor",b.textBoxShadowColor||"transparent"),y(P,"shadowOffsetX",b.textBoxShadowOffsetX||0),y(P,"shadowOffsetY",b.textBoxShadowOffsetY||0),j||H&&U){P.beginPath();var X=b.textBorderRadius;X?_.buildPath(P,{x:N,y:B,width:z,height:F,r:X}):P.rect(N,B,z,F),P.closePath()}if(j)if(y(P,"fillStyle",V),b.fillOpacity!=null){var Y=P.globalAlpha;P.globalAlpha=b.fillOpacity*b.opacity,P.fill(),P.globalAlpha=Y}else P.fill();else if(I(V)){var J=V.image;(J=g.createOrUpdateImage(J,null,A,v,V))&&g.isImageReady(J)&&P.drawImage(J,N,B,z,F)}H&&U&&(y(P,"lineWidth",H),y(P,"strokeStyle",U),b.strokeOpacity!=null?(Y=P.globalAlpha,P.globalAlpha=b.strokeOpacity*b.opacity,P.stroke(),P.globalAlpha=Y):P.stroke())}function v(A,P){P.image=A}function m(A,P,b,N){var B=b.x||0,z=b.y||0,F=b.textAlign,V=b.textVerticalAlign;if(N){var H=b.textPosition;if(H instanceof Array)B=N.x+M(H[0],N.width),z=N.y+M(H[1],N.height);else{var U=P&&P.calculateTextPosition?P.calculateTextPosition(o,b,N):S.calculateTextPosition(o,b,N);B=U.x,z=U.y,F=F||U.textAlign,V=V||U.textVerticalAlign}var j=b.textOffset;j&&(B+=j[0],z+=j[1])}return(A=A||{}).baseX=B,A.baseY=z,A.textAlign=F,A.textVerticalAlign=V,A}function y(A,P,b){return A[P]=u(A,P,b),A[P]}function x(A,P){return A==null||P<=0||A==="transparent"||A==="none"?null:A.image||A.colorStops?"#000":A}function w(A){return A==null||A==="none"?null:A.image||A.colorStops?"#000":A}function M(A,P){return typeof A=="string"?A.lastIndexOf("%")>=0?parseFloat(A)/100*P:parseFloat(A):A}function C(A,P,b){return P==="right"?A-b[1]:P==="center"?A+b[3]/2-b[1]/2:A+b[3]}G.normalizeTextStyle=function(A){return n(A),O(A.rich,n),A},G.renderText=function(A,P,b,N,B,z){N.rich?function(F,V,H,U,j,X){X!==e&&(V.__attrCachedBy=l.NONE);var Y=F.__textCotentBlock;Y&&!F.__dirtyText||(Y=F.__textCotentBlock=S.parseRichText(H,U)),function(J,K,Q,Z,q){var tt=Q.width,$=Q.outerWidth,rt=Q.outerHeight,et=Z.textPadding,it=m(r,J,Z,q),ot=it.baseX,st=it.baseY,at=it.textAlign,vt=it.textVerticalAlign;h(K,Z,q,ot,st);var yt=S.adjustTextX(ot,$,at),gt=S.adjustTextY(st,rt,vt),pt=yt,bt=gt;et&&(pt+=et[3],bt+=et[0]);var mt=pt+tt;d(Z)&&f(J,K,Z,yt,gt,$,rt);for(var nt=0;nt<Q.lines.length;nt++){for(var lt,ct=Q.lines[nt],ht=ct.tokens,ft=ht.length,_t=ct.lineHeight,wt=ct.width,Tt=0,It=pt,Mt=mt,Lt=ft-1;Tt<ft&&(!(lt=ht[Tt]).textAlign||lt.textAlign==="left");)p(J,K,lt,Z,_t,bt,It,"left"),wt-=lt.width,It+=lt.width,Tt++;for(;Lt>=0&&(lt=ht[Lt]).textAlign==="right";)p(J,K,lt,Z,_t,bt,Mt,"right"),wt-=lt.width,Mt-=lt.width,Lt--;for(It+=(tt-(It-pt)-(mt-Mt)-wt)/2;Tt<=Lt;)p(J,K,lt=ht[Tt],Z,_t,bt,It+lt.width/2,"center"),It+=lt.width,Tt++;bt+=_t}}(F,V,Y,U,j)}(A,P,b,N,B,z):function(F,V,H,U,j,X){var Y,J=d(U),K=!1,Q=V.__attrCachedBy===l.PLAIN_TEXT;X!==e?(X&&(Y=X.style,K=!J&&Q&&Y),V.__attrCachedBy=J?l.NONE:l.PLAIN_TEXT):Q&&(V.__attrCachedBy=l.NONE);var Z=U.font||t;K&&Z===(Y.font||t)||(V.font=Z);var q=F.__computedFont;F.__styleFont!==Z&&(F.__styleFont=Z,q=F.__computedFont=V.font);var tt=U.textPadding,$=U.textLineHeight,rt=F.__textCotentBlock;rt&&!F.__dirtyText||(rt=F.__textCotentBlock=S.parsePlainText(H,q,tt,$,U.truncate));var et=rt.outerHeight,it=rt.lines,ot=rt.lineHeight,st=m(r,F,U,j),at=st.baseX,vt=st.baseY,yt=st.textAlign||"left",gt=st.textVerticalAlign;h(V,U,j,at,vt);var pt=S.adjustTextY(vt,et,gt),bt=at,mt=pt;if(J||tt){var nt=S.getWidth(H,q);tt&&(nt+=tt[1]+tt[3]);var lt=S.adjustTextX(at,nt,yt);J&&f(F,V,U,lt,pt,nt,et),tt&&(bt=C(at,yt,tt),mt+=tt[0])}V.textAlign=yt,V.textBaseline="middle",V.globalAlpha=U.opacity||1;for(var ct=0;ct<a.length;ct++){var ht=a[ct],ft=ht[0],_t=ht[1],wt=U[ft];K&&wt===Y[ft]||(V[_t]=u(V,_t,wt||ht[2]))}mt+=ot/2;var Tt=U.textStrokeWidth,It=K?Y.textStrokeWidth:null,Mt=!K||Tt!==It,Lt=!K||Mt||U.textStroke!==Y.textStroke,kt=x(U.textStroke,Tt),Rt=w(U.textFill);if(kt&&(Mt&&(V.lineWidth=Tt),Lt&&(V.strokeStyle=kt)),Rt&&(K&&U.textFill===Y.textFill||(V.fillStyle=Rt)),it.length===1)kt&&V.strokeText(it[0],bt,mt),Rt&&V.fillText(it[0],bt,mt);else for(ct=0;ct<it.length;ct++)kt&&V.strokeText(it[ct],bt,mt),Rt&&V.fillText(it[ct],bt,mt),mt+=ot}(A,P,b,N,B,z)},G.getBoxPosition=m,G.getStroke=x,G.getFill=w,G.parsePercent=M,G.needDrawText=function(A,P){return A!=null&&(A||P.textBackgroundColor||P.textBorderWidth&&P.textBorderColor||P.textPadding)}},41406:(W,G,T)=>{var L=T(98886),R=T(60479),k=T(71131).WILL_BE_RESTORED,O=new R,D=function(){};D.prototype={constructor:D,drawRectText:function(I,S){var _=this.style;S=_.textRect||S,this.__dirty&&L.normalizeTextStyle(_,!0);var g=_.text;if(g!=null&&(g+=""),L.needDrawText(g,_)){I.save();var u=this.transform;_.transformText?this.setTransform(I):u&&(O.copy(S),O.applyTransform(u),S=O),L.renderText(this,I,g,_,S,k),I.restore()}}};var E=D;W.exports=E},14826:(W,G,T)=>{var L=T(10712).extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(R,k){var O=k.cx,D=k.cy,E=Math.max(k.r,0),I=k.startAngle,S=k.endAngle,_=k.clockwise,g=Math.cos(I),u=Math.sin(I);R.moveTo(g*E+O,u*E+D),R.arc(O,D,E,I,S,!_)}});W.exports=L},54174:(W,G,T)=>{var L=T(10712),R=T(45280),k=T(18554),O=k.quadraticSubdivide,D=k.cubicSubdivide,E=k.quadraticAt,I=k.cubicAt,S=k.quadraticDerivativeAt,_=k.cubicDerivativeAt,g=[];function u(l,e,t){var i=l.cpx2,s=l.cpy2;return i===null||s===null?[(t?_:I)(l.x1,l.cpx1,l.cpx2,l.x2,e),(t?_:I)(l.y1,l.cpy1,l.cpy2,l.y2,e)]:[(t?S:E)(l.x1,l.cpx1,l.x2,e),(t?S:E)(l.y1,l.cpy1,l.y2,e)]}var c=L.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(l,e){var t=e.x1,i=e.y1,s=e.x2,a=e.y2,o=e.cpx1,r=e.cpy1,n=e.cpx2,h=e.cpy2,p=e.percent;p!==0&&(l.moveTo(t,i),n==null||h==null?(p<1&&(O(t,o,s,p,g),o=g[1],s=g[2],O(i,r,a,p,g),r=g[1],a=g[2]),l.quadraticCurveTo(o,r,s,a)):(p<1&&(D(t,o,n,s,p,g),o=g[1],n=g[2],s=g[3],D(i,r,h,a,p,g),r=g[1],h=g[2],a=g[3]),l.bezierCurveTo(o,r,n,h,s,a)))},pointAt:function(l){return u(this.shape,l,!1)},tangentAt:function(l){var e=u(this.shape,l,!0);return R.normalize(e,e)}});W.exports=c},69538:(W,G,T)=>{var L=T(10712).extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(R,k,O){O&&R.moveTo(k.cx+k.r,k.cy),R.arc(k.cx,k.cy,k.r,0,2*Math.PI,!0)}});W.exports=L},92797:(W,G,T)=>{var L=T(10712).extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(R,k){var O=.5522848,D=k.cx,E=k.cy,I=k.rx,S=k.ry,_=I*O,g=S*O;R.moveTo(D-I,E),R.bezierCurveTo(D-I,E-g,D-_,E-S,D,E-S),R.bezierCurveTo(D+_,E-S,D+I,E-g,D+I,E),R.bezierCurveTo(D+I,E+g,D+_,E+S,D,E+S),R.bezierCurveTo(D-_,E+S,D-I,E+g,D-I,E),R.closePath()}});W.exports=L},22095:(W,G,T)=>{var L=T(10712),R=T(24111).subPixelOptimizeLine,k={},O=L.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(D,E){var I,S,_,g;this.subPixelOptimize?(R(k,E,this.style),I=k.x1,S=k.y1,_=k.x2,g=k.y2):(I=E.x1,S=E.y1,_=E.x2,g=E.y2);var u=E.percent;u!==0&&(D.moveTo(I,S),u<1&&(_=I*(1-u)+_*u,g=S*(1-u)+g*u),D.lineTo(_,g))},pointAt:function(D){var E=this.shape;return[E.x1*(1-D)+E.x2*D,E.y1*(1-D)+E.y2*D]}});W.exports=O},95094:(W,G,T)=>{var L=T(10712),R=T(79209),k=L.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(O,D){R.buildPath(O,D,!0)}});W.exports=k},62514:(W,G,T)=>{var L=T(10712),R=T(79209),k=L.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(O,D){R.buildPath(O,D,!1)}});W.exports=k},27304:(W,G,T)=>{var L=T(10712),R=T(48988),k=T(24111).subPixelOptimizeRect,O={},D=L.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(E,I){var S,_,g,u;this.subPixelOptimize?(k(O,I,this.style),S=O.x,_=O.y,g=O.width,u=O.height,O.r=I.r,I=O):(S=I.x,_=I.y,g=I.width,u=I.height),I.r?R.buildPath(E,I):E.rect(S,_,g,u),E.closePath()}});W.exports=D},85795:(W,G,T)=>{var L=T(10712).extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(R,k){var O=k.cx,D=k.cy,E=2*Math.PI;R.moveTo(O+k.r,D),R.arc(O,D,k.r,0,E,!1),R.moveTo(O+k.r0,D),R.arc(O,D,k.r0,0,E,!0)}});W.exports=L},74520:(W,G,T)=>{var L=T(10712),R=T(60873),k=L.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:R(L.prototype.brush),buildPath:function(O,D){var E=D.cx,I=D.cy,S=Math.max(D.r0||0,0),_=Math.max(D.r,0),g=D.startAngle,u=D.endAngle,c=D.clockwise,l=Math.cos(g),e=Math.sin(g);O.moveTo(l*S+E,e*S+I),O.lineTo(l*_+E,e*_+I),O.arc(E,I,_,g,u,!c),O.lineTo(Math.cos(u)*S+E,Math.sin(u)*S+I),S!==0&&O.arc(E,I,S,u,g,c),O.closePath()}});W.exports=k},7131:(W,G,T)=>{var L=T(64383),R=T(48612),k=T(33051),O=k.isString,D=k.isFunction,E=k.isObject,I=k.isArrayLike,S=k.indexOf,_=function(){this.animators=[]};function g(e,t,i,s,a,o,r,n){O(s)?(o=a,a=s,s=0):D(a)?(o=a,a="linear",s=0):D(s)?(o=s,s=0):D(i)?(o=i,i=500):i||(i=500),e.stopAnimation(),u(e,"",e,t,i,s,n);var h=e.animators.slice(),p=h.length;function d(){--p||o&&o()}p||o&&o();for(var f=0;f<h.length;f++)h[f].done(d).start(a,r)}function u(e,t,i,s,a,o,r){var n={},h=0;for(var p in s)s.hasOwnProperty(p)&&(i[p]!=null?E(s[p])&&!I(s[p])?u(e,t?t+"."+p:p,i[p],s[p],a,o,r):(r?(n[p]=i[p],c(e,t,p,s[p])):n[p]=s[p],h++):s[p]==null||r||c(e,t,p,s[p]));h>0&&e.animate(t,!1).when(a==null?500:a,n).delay(o||0)}function c(e,t,i,s){if(t){var a={};a[t]={},a[t][i]=s,e.attr(a)}else e.attr(i,s)}_.prototype={constructor:_,animate:function(e,t){var i,s=!1,a=this,o=this.__zr;if(e){var r=e.split("."),n=a;s=r[0]==="shape";for(var h=0,p=r.length;h<p;h++)n&&(n=n[r[h]]);n&&(i=n)}else i=a;if(i){var d=a.animators,f=new L(i,t);return f.during(function(v){a.dirty(s)}).done(function(){d.splice(S(d,f),1)}),d.push(f),o&&o.animation.addAnimator(f),f}R('Property "'+e+'" is not existed in element '+a.id)},stopAnimation:function(e){for(var t=this.animators,i=t.length,s=0;s<i;s++)t[s].stop(e);return t.length=0,this},animateTo:function(e,t,i,s,a,o){g(this,e,t,i,s,a,o)},animateFrom:function(e,t,i,s,a,o){g(this,e,t,i,s,a,o,!0)}};var l=_;W.exports=l},17780:W=>{function G(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function T(R,k){return{target:R,topTarget:k&&k.topTarget}}G.prototype={constructor:G,_dragStart:function(R){for(var k=R.target;k&&!k.draggable;)k=k.parent;k&&(this._draggingTarget=k,k.dragging=!0,this._x=R.offsetX,this._y=R.offsetY,this.dispatchToElement(T(k,R),"dragstart",R.event))},_drag:function(R){var k=this._draggingTarget;if(k){var O=R.offsetX,D=R.offsetY,E=O-this._x,I=D-this._y;this._x=O,this._y=D,k.drift(E,I,R),this.dispatchToElement(T(k,R),"drag",R.event);var S=this.findHover(O,D,k).target,_=this._dropTarget;this._dropTarget=S,k!==S&&(_&&S!==_&&this.dispatchToElement(T(_,R),"dragleave",R.event),S&&S!==_&&this.dispatchToElement(T(S,R),"dragenter",R.event))}},_dragEnd:function(R){var k=this._draggingTarget;k&&(k.dragging=!1),this.dispatchToElement(T(k,R),"dragend",R.event),this._dropTarget&&this.dispatchToElement(T(this._dropTarget,R),"drop",R.event),this._draggingTarget=null,this._dropTarget=null}};var L=G;W.exports=L},41502:W=>{var G=Array.prototype.slice,T=function(k){this._$handlers={},this._$eventProcessor=k};function L(k,O,D,E,I,S){var _=k._$handlers;if(typeof D=="function"&&(I=E,E=D,D=null),!E||!O)return k;D=function(e,t){var i=e._$eventProcessor;return t!=null&&i&&i.normalizeQuery&&(t=i.normalizeQuery(t)),t}(k,D),_[O]||(_[O]=[]);for(var g=0;g<_[O].length;g++)if(_[O][g].h===E)return k;var u={h:E,one:S,query:D,ctx:I||k,callAtLast:E.zrEventfulCallAtLast},c=_[O].length-1,l=_[O][c];return l&&l.callAtLast?_[O].splice(c,0,u):_[O].push(u),k}T.prototype={constructor:T,one:function(k,O,D,E){return L(this,k,O,D,E,!0)},on:function(k,O,D,E){return L(this,k,O,D,E,!1)},isSilent:function(k){var O=this._$handlers;return!O[k]||!O[k].length},off:function(k,O){var D=this._$handlers;if(!k)return this._$handlers={},this;if(O){if(D[k]){for(var E=[],I=0,S=D[k].length;I<S;I++)D[k][I].h!==O&&E.push(D[k][I]);D[k]=E}D[k]&&D[k].length===0&&delete D[k]}else delete D[k];return this},trigger:function(k){var O=this._$handlers[k],D=this._$eventProcessor;if(O){var E=arguments,I=E.length;I>3&&(E=G.call(E,1));for(var S=O.length,_=0;_<S;){var g=O[_];if(D&&D.filter&&g.query!=null&&!D.filter(k,g.query))_++;else{switch(I){case 1:g.h.call(g.ctx);break;case 2:g.h.call(g.ctx,E[1]);break;case 3:g.h.call(g.ctx,E[1],E[2]);break;default:g.h.apply(g.ctx,E)}g.one?(O.splice(_,1),S--):_++}}}return D&&D.afterTrigger&&D.afterTrigger(k),this},triggerWithContext:function(k){var O=this._$handlers[k],D=this._$eventProcessor;if(O){var E=arguments,I=E.length;I>4&&(E=G.call(E,1,E.length-1));for(var S=E[E.length-1],_=O.length,g=0;g<_;){var u=O[g];if(D&&D.filter&&u.query!=null&&!D.filter(k,u.query))g++;else{switch(I){case 1:u.h.call(S);break;case 2:u.h.call(S,E[1]);break;case 3:u.h.call(S,E[1],E[2]);break;default:u.h.apply(S,E)}u.one?(O.splice(g,1),_--):g++}}}return D&&D.afterTrigger&&D.afterTrigger(k),this}};var R=T;W.exports=R},58023:(W,G,T)=>{var L=T(32892),R=T(45280),k=L.identity;function O(u){return u>5e-5||u<-5e-5}var D=function(u){(u=u||{}).position||(this.position=[0,0]),u.rotation==null&&(this.rotation=0),u.scale||(this.scale=[1,1]),this.origin=this.origin||null},E=D.prototype;E.transform=null,E.needLocalTransform=function(){return O(this.rotation)||O(this.position[0])||O(this.position[1])||O(this.scale[0]-1)||O(this.scale[1]-1)};var I=[];E.updateTransform=function(){var u=this.parent,c=u&&u.transform,l=this.needLocalTransform(),e=this.transform;if(l||c){e=e||L.create(),l?this.getLocalTransform(e):k(e),c&&(l?L.mul(e,u.transform,e):L.copy(e,u.transform)),this.transform=e;var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(I);var i=I[0]<0?-1:1,s=I[1]<0?-1:1,a=((I[0]-i)*t+i)/I[0]||0,o=((I[1]-s)*t+s)/I[1]||0;e[0]*=a,e[1]*=a,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||L.create(),L.invert(this.invTransform,e)}else e&&k(e)},E.getLocalTransform=function(u){return D.getLocalTransform(this,u)},E.setTransform=function(u){var c=this.transform,l=u.dpr||1;c?u.setTransform(l*c[0],l*c[1],l*c[2],l*c[3],l*c[4],l*c[5]):u.setTransform(l,0,0,l,0,0)},E.restoreTransform=function(u){var c=u.dpr||1;u.setTransform(c,0,0,c,0,0)};var S=[],_=L.create();E.setLocalTransform=function(u){if(u){var c=u[0]*u[0]+u[1]*u[1],l=u[2]*u[2]+u[3]*u[3],e=this.position,t=this.scale;O(c-1)&&(c=Math.sqrt(c)),O(l-1)&&(l=Math.sqrt(l)),u[0]<0&&(c=-c),u[3]<0&&(l=-l),e[0]=u[4],e[1]=u[5],t[0]=c,t[1]=l,this.rotation=Math.atan2(-u[1]/l,u[0]/c)}},E.decomposeTransform=function(){if(this.transform){var u=this.parent,c=this.transform;u&&u.transform&&(L.mul(S,u.invTransform,c),c=S);var l=this.origin;l&&(l[0]||l[1])&&(_[4]=l[0],_[5]=l[1],L.mul(S,c,_),S[4]-=l[0],S[5]-=l[1],c=S),this.setLocalTransform(c)}},E.getGlobalScale=function(u){var c=this.transform;return u=u||[],c?(u[0]=Math.sqrt(c[0]*c[0]+c[1]*c[1]),u[1]=Math.sqrt(c[2]*c[2]+c[3]*c[3]),c[0]<0&&(u[0]=-u[0]),c[3]<0&&(u[1]=-u[1]),u):(u[0]=1,u[1]=1,u)},E.transformCoordToLocal=function(u,c){var l=[u,c],e=this.invTransform;return e&&R.applyTransform(l,l,e),l},E.transformCoordToGlobal=function(u,c){var l=[u,c],e=this.transform;return e&&R.applyTransform(l,l,e),l},D.getLocalTransform=function(u,c){k(c=c||[]);var l=u.origin,e=u.scale||[1,1],t=u.rotation||0,i=u.position||[0,0];return l&&(c[4]-=l[0],c[5]-=l[1]),L.scale(c,c,e),t&&L.rotate(c,c,t),l&&(c[4]+=l[0],c[5]+=l[1]),c[4]+=i[0],c[5]+=i[1],c};var g=D;W.exports=g},58331:(W,G,T)=>{var L=T(62288).createElement,R=T(33051),k=T(48612),O=T(10712),D=T(44535),E=T(96498),I=T(39351),S=T(51037),_=T(55860),g=T(41472),u=T(37953),c=u.path,l=u.image,e=u.text;function t(d){return parseInt(d,10)}function i(d,f){return f&&d&&f.parentNode!==d}function s(d,f,v){if(i(d,f)&&v){var m=v.nextSibling;m?d.insertBefore(f,m):d.appendChild(f)}}function a(d,f){if(i(d,f)){var v=d.firstChild;v?d.insertBefore(f,v):d.appendChild(f)}}function o(d,f){f&&d&&f.parentNode===d&&d.removeChild(f)}function r(d){return d.__textSvgEl}function n(d){return d.__svgEl}var h=function(d,f,v,m){this.root=d,this.storage=f,this._opts=v=R.extend({},v||{});var y=L("svg");y.setAttribute("xmlns","http://www.w3.org/2000/svg"),y.setAttribute("version","1.1"),y.setAttribute("baseProfile","full"),y.style.cssText="user-select:none;position:absolute;left:0;top:0;";var x=L("g");y.appendChild(x);var w=L("g");y.appendChild(w),this.gradientManager=new S(m,w),this.clipPathManager=new _(m,w),this.shadowManager=new g(m,w);var M=document.createElement("div");M.style.cssText="overflow:hidden;position:relative",this._svgDom=y,this._svgRoot=w,this._backgroundRoot=x,this._viewport=M,d.appendChild(M),M.appendChild(y),this.resize(v.width,v.height),this._visibleList=[]};h.prototype={constructor:h,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var d=this.getViewportRoot();if(d)return{offsetLeft:d.offsetLeft||0,offsetTop:d.offsetTop||0}},refresh:function(){var d=this.storage.getDisplayList(!0);this._paintList(d)},setBackgroundColor:function(d){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var f=L("rect");f.setAttribute("width",this.getWidth()),f.setAttribute("height",this.getHeight()),f.setAttribute("x",0),f.setAttribute("y",0),f.setAttribute("id",0),f.style.fill=d,this._backgroundRoot.appendChild(f),this._backgroundNode=f},_paintList:function(d){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var f,v,m=this._svgRoot,y=this._visibleList,x=d.length,w=[];for(f=0;f<x;f++){var M=d[f],C=(v=M)instanceof O?c:v instanceof D?l:v instanceof E?e:c,A=n(M)||r(M);M.invisible||(M.__dirty&&(C&&C.brush(M),this.clipPathManager.update(M),M.style&&(this.gradientManager.update(M.style.fill),this.gradientManager.update(M.style.stroke),this.shadowManager.update(A,M)),M.__dirty=!1),w.push(M))}var P,b=I(y,w);for(f=0;f<b.length;f++)if((z=b[f]).removed)for(var N=0;N<z.count;N++){A=n(M=y[z.indices[N]]);var B=r(M);o(m,A),o(m,B)}for(f=0;f<b.length;f++){var z;if((z=b[f]).added)for(N=0;N<z.count;N++)A=n(M=w[z.indices[N]]),B=r(M),P?s(m,A,P):a(m,A),A?s(m,B,A):P?s(m,B,P):a(m,B),s(m,B,A),P=B||A||P,this.gradientManager.addWithoutUpdate(A||B,M),this.shadowManager.addWithoutUpdate(A||B,M),this.clipPathManager.markUsed(M);else if(!z.removed)for(N=0;N<z.count;N++)A=n(M=w[z.indices[N]]),B=r(M),A=n(M),B=r(M),this.gradientManager.markUsed(M),this.gradientManager.addWithoutUpdate(A||B,M),this.shadowManager.markUsed(M),this.shadowManager.addWithoutUpdate(A||B,M),this.clipPathManager.markUsed(M),B&&s(m,B,A),P=A||B||P}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=w},_getDefs:function(d){var f,v=this._svgDom;return(f=v.getElementsByTagName("defs")).length===0?d?((f=v.insertBefore(L("defs"),v.firstChild)).contains||(f.contains=function(m){var y=f.children;if(!y)return!1;for(var x=y.length-1;x>=0;--x)if(y[x]===m)return!0;return!1}),f):null:f[0]},resize:function(d,f){var v=this._viewport;v.style.display="none";var m=this._opts;if(d!=null&&(m.width=d),f!=null&&(m.height=f),d=this._getSize(0),f=this._getSize(1),v.style.display="",this._width!==d||this._height!==f){this._width=d,this._height=f;var y=v.style;y.width=d+"px",y.height=f+"px";var x=this._svgDom;x.setAttribute("width",d),x.setAttribute("height",f)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",d),this._backgroundNode.setAttribute("height",f))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(d){var f=this._opts,v=["width","height"][d],m=["clientWidth","clientHeight"][d],y=["paddingLeft","paddingTop"][d],x=["paddingRight","paddingBottom"][d];if(f[v]!=null&&f[v]!=="auto")return parseFloat(f[v]);var w=this.root,M=document.defaultView.getComputedStyle(w);return(w[m]||t(M[v])||t(w.style[v]))-(t(M[y])||0)-(t(M[x])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,`>
\r<`))}},R.each(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(d){var f;h.prototype[d]=(f=d,function(){k('In SVG mode painter not support method "'+f+'"')})});var p=h;W.exports=p},62288:(W,G)=>{G.createElement=function(T){return document.createElementNS("http://www.w3.org/2000/svg",T)}},37953:(W,G,T)=>{var L=T(62288).createElement,R=T(14014),k=T(60479),O=T(32892),D=T(80423),E=T(98886),I=T(96498),S=R.CMD,_=Array.prototype.join,g="none",u=Math.round,c=Math.sin,l=Math.cos,e=Math.PI,t=2*Math.PI,i=180/e;function s(C){return u(1e4*C)/1e4}function a(C){return C<1e-4&&C>-1e-4}function o(C,A){A&&r(C,"transform","matrix("+_.call(A,",")+")")}function r(C,A,P){(!P||P.type!=="linear"&&P.type!=="radial")&&C.setAttribute(A,P)}function n(C,A,P,b){if(function(z,F){var V=F?z.textFill:z.fill;return V!=null&&V!==g}(A,P)){var N=P?A.textFill:A.fill;r(C,"fill",N=N==="transparent"?g:N),r(C,"fill-opacity",A.fillOpacity!=null?A.fillOpacity*A.opacity:A.opacity)}else r(C,"fill",g);if(function(z,F){var V=F?z.textStroke:z.stroke;return V!=null&&V!==g}(A,P)){var B=P?A.textStroke:A.stroke;r(C,"stroke",B=B==="transparent"?g:B),r(C,"stroke-width",(P?A.textStrokeWidth:A.lineWidth)/(!P&&A.strokeNoScale?b.getLineScale():1)),r(C,"paint-order",P?"stroke":"fill"),r(C,"stroke-opacity",A.strokeOpacity!=null?A.strokeOpacity:A.opacity),A.lineDash?(r(C,"stroke-dasharray",A.lineDash.join(",")),r(C,"stroke-dashoffset",u(A.lineDashOffset||0))):r(C,"stroke-dasharray",""),A.lineCap&&r(C,"stroke-linecap",A.lineCap),A.lineJoin&&r(C,"stroke-linejoin",A.lineJoin),A.miterLimit&&r(C,"stroke-miterlimit",A.miterLimit)}else r(C,"stroke",g)}var h={brush:function(C){var A=C.style,P=C.__svgEl;P||(P=L("path"),C.__svgEl=P),C.path||C.createPathProxy();var b=C.path;if(C.__dirtyPath){b.beginPath(),b.subPixelOptimize=!1,C.buildPath(b,C.shape),C.__dirtyPath=!1;var N=function(B){for(var z=[],F=B.data,V=B.len(),H=0;H<V;){var U="",j=0;switch(F[H++]){case S.M:U="M",j=2;break;case S.L:U="L",j=2;break;case S.Q:U="Q",j=4;break;case S.C:U="C",j=6;break;case S.A:var X=F[H++],Y=F[H++],J=F[H++],K=F[H++],Q=F[H++],Z=F[H++],q=F[H++],tt=F[H++],$=Math.abs(Z),rt=a($-t)||(tt?Z>=t:-Z>=t),et=Z>0?Z%t:Z%t+t,it=!1;it=!!rt||!a($)&&et>=e==!!tt;var ot=s(X+J*l(Q)),st=s(Y+K*c(Q));rt&&(Z=tt?t-1e-4:1e-4-t,it=!0,H===9&&z.push("M",ot,st));var at=s(X+J*l(Q+Z)),vt=s(Y+K*c(Q+Z));z.push("A",s(J),s(K),u(q*i),+it,+tt,at,vt);break;case S.Z:U="Z";break;case S.R:at=s(F[H++]),vt=s(F[H++]);var yt=s(F[H++]),gt=s(F[H++]);z.push("M",at,vt,"L",at+yt,vt,"L",at+yt,vt+gt,"L",at,vt+gt,"L",at,vt)}U&&z.push(U);for(var pt=0;pt<j;pt++)z.push(s(F[H++]))}return z.join(" ")}(b);N.indexOf("NaN")<0&&r(P,"d",N)}n(P,A,!1,C),o(P,C.transform),A.text!=null?x(C,C.getBoundingRect()):M(C)}},p={brush:function(C){var A=C.style,P=A.image;if(P instanceof HTMLImageElement&&(P=P.src),P){var b=A.x||0,N=A.y||0,B=A.width,z=A.height,F=C.__svgEl;F||(F=L("image"),C.__svgEl=F),P!==C.__imageSrc&&(function(V,H,U){V.setAttributeNS("http://www.w3.org/1999/xlink","href",U)}(F,0,P),C.__imageSrc=P),r(F,"width",B),r(F,"height",z),r(F,"x",b),r(F,"y",N),o(F,C.transform),A.text!=null?x(C,C.getBoundingRect()):M(C)}}},d={},f=new k,v={},m=[],y={left:"start",right:"end",center:"middle",middle:"middle"},x=function(C,A){var P=C.style,b=C.transform,N=C instanceof I||P.transformText;C.__dirty&&E.normalizeTextStyle(P,!0);var B=P.text;if(B!=null&&(B+=""),E.needDrawText(B,P)){B==null&&(B=""),!N&&b&&(f.copy(A),f.applyTransform(b),A=f);var z=C.__textSvgEl;z||(z=L("text"),C.__textSvgEl=z);var F=z.style,V=P.font||D.DEFAULT_FONT,H=z.__computedFont;V!==z.__styleFont&&(F.font=z.__styleFont=V,H=z.__computedFont=F.font);var U=P.textPadding,j=P.textLineHeight,X=C.__textCotentBlock;X&&!C.__dirtyText||(X=C.__textCotentBlock=D.parsePlainText(B,H,U,j,P.truncate));var Y=X.outerHeight,J=X.lineHeight;E.getBoxPosition(v,C,P,A);var K=v.baseX,Q=v.baseY,Z=v.textAlign||"left",q=v.textVerticalAlign;(function(gt,pt,bt,mt,nt,lt,ct){O.identity(m),pt&&bt&&O.copy(m,bt);var ht=mt.textRotation;if(nt&&ht){var ft=mt.textOrigin;ft==="center"?(lt=nt.width/2+nt.x,ct=nt.height/2+nt.y):ft&&(lt=ft[0]+nt.x,ct=ft[1]+nt.y),m[4]-=lt,m[5]-=ct,O.rotate(m,m,ht),m[4]+=lt,m[5]+=ct}o(gt,m)})(z,N,b,P,A,K,Q);var tt=K,$=D.adjustTextY(Q,Y,q);U&&(tt=function(gt,pt,bt){return pt==="right"?gt-bt[1]:pt==="center"?gt+bt[3]/2-bt[1]/2:gt+bt[3]}(K,Z,U),$+=U[0]),$+=J/2,n(z,P,!0,C);var rt=X.canCacheByTextString,et=C.__tspanList||(C.__tspanList=[]),it=et.length;if(rt&&C.__canCacheByTextString&&C.__text===B){if(C.__dirtyText&&it)for(var ot=0;ot<it;++ot)w(et[ot],Z,tt,$+ot*J)}else{C.__text=B,C.__canCacheByTextString=rt;var st=X.lines,at=st.length;for(ot=0;ot<at;ot++){var vt=et[ot],yt=st[ot];vt?vt.__zrText!==yt&&(vt.innerHTML="",vt.appendChild(document.createTextNode(yt))):(vt=et[ot]=L("tspan"),z.appendChild(vt),vt.appendChild(document.createTextNode(yt))),w(vt,Z,tt,$+ot*J)}if(it>at){for(;ot<it;ot++)z.removeChild(et[ot]);et.length=at}}}};function w(C,A,P,b){r(C,"dominant-baseline","middle"),r(C,"text-anchor",y[A]),r(C,"x",P),r(C,"y",b)}function M(C){C&&C.__textSvgEl&&(C.__textSvgEl.parentNode&&C.__textSvgEl.parentNode.removeChild(C.__textSvgEl),C.__textSvgEl=null,C.__tspanList=[],C.__text=null)}d.drawRectText=x,d.brush=function(C){C.style.text!=null?x(C,!1):M(C)},G.path=h,G.image=p,G.text=d},55860:(W,G,T)=>{var L=T(6740),R=T(33051),k=T(32892);function O(E,I){L.call(this,E,I,"clipPath","__clippath_in_use__")}R.inherits(O,L),O.prototype.update=function(E){var I=this.getSvgElement(E);I&&this.updateDom(I,E.__clipPaths,!1);var S=this.getTextSvgElement(E);S&&this.updateDom(S,E.__clipPaths,!0),this.markUsed(E)},O.prototype.updateDom=function(E,I,S){if(I&&I.length>0){var _,g,u=this.getDefs(!0),c=I[0],l=S?"_textDom":"_dom";c[l]?(g=c[l].getAttribute("id"),_=c[l],u.contains(_)||u.appendChild(_)):(g="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(_=this.createElement("clipPath")).setAttribute("id",g),u.appendChild(_),c[l]=_);var e=this.getSvgProxy(c);if(c.transform&&c.parent.invTransform&&!S){var t=Array.prototype.slice.call(c.transform);k.mul(c.transform,c.parent.invTransform,c.transform),e.brush(c),c.transform=t}else e.brush(c);var i=this.getSvgElement(c);_.innerHTML="",_.appendChild(i.cloneNode()),E.setAttribute("clip-path","url(#"+g+")"),I.length>1&&this.updateDom(_,I.slice(1),S)}else E&&E.setAttribute("clip-path","none")},O.prototype.markUsed=function(E){var I=this;E.__clipPaths&&R.each(E.__clipPaths,function(S){S._dom&&L.prototype.markUsed.call(I,S._dom),S._textDom&&L.prototype.markUsed.call(I,S._textDom)})};var D=O;W.exports=D},6740:(W,G,T)=>{var L=T(62288).createElement,R=T(33051),k=T(10712),O=T(44535),D=T(96498),E=T(37953),I=E.path,S=E.image,_=E.text;function g(c,l,e,t,i){this._zrId=c,this._svgRoot=l,this._tagNames=typeof e=="string"?[e]:e,this._markLabel=t,this._domName=i||"_dom",this.nextId=0}g.prototype.createElement=L,g.prototype.getDefs=function(c){var l=this._svgRoot,e=this._svgRoot.getElementsByTagName("defs");return e.length===0?c?((e=l.insertBefore(this.createElement("defs"),l.firstChild)).contains||(e.contains=function(t){var i=e.children;if(!i)return!1;for(var s=i.length-1;s>=0;--s)if(i[s]===t)return!0;return!1}),e):null:e[0]},g.prototype.update=function(c,l){if(c){var e=this.getDefs(!1);if(c[this._domName]&&e.contains(c[this._domName]))typeof l=="function"&&l(c);else{var t=this.add(c);t&&(c[this._domName]=t)}}},g.prototype.addDom=function(c){this.getDefs(!0).appendChild(c)},g.prototype.removeDom=function(c){var l=this.getDefs(!1);l&&c[this._domName]&&(l.removeChild(c[this._domName]),c[this._domName]=null)},g.prototype.getDoms=function(){var c=this.getDefs(!1);if(!c)return[];var l=[];return R.each(this._tagNames,function(e){var t=c.getElementsByTagName(e);l=l.concat([].slice.call(t))}),l},g.prototype.markAllUnused=function(){var c=this.getDoms(),l=this;R.each(c,function(e){e[l._markLabel]="0"})},g.prototype.markUsed=function(c){c&&(c[this._markLabel]="1")},g.prototype.removeUnused=function(){var c=this.getDefs(!1);if(c){var l=this.getDoms(),e=this;R.each(l,function(t){t[e._markLabel]!=="1"&&c.removeChild(t)})}},g.prototype.getSvgProxy=function(c){return c instanceof k?I:c instanceof O?S:c instanceof D?_:I},g.prototype.getTextSvgElement=function(c){return c.__textSvgEl},g.prototype.getSvgElement=function(c){return c.__svgEl};var u=g;W.exports=u},51037:(W,G,T)=>{var L=T(6740),R=T(33051),k=T(48612),O=T(21092);function D(I,S){L.call(this,I,S,["linearGradient","radialGradient"],"__gradient_in_use__")}R.inherits(D,L),D.prototype.addWithoutUpdate=function(I,S){if(S&&S.style){var _=this;R.each(["fill","stroke"],function(g){if(S.style[g]&&(S.style[g].type==="linear"||S.style[g].type==="radial")){var u,c=S.style[g],l=_.getDefs(!0);c._dom?(u=c._dom,l.contains(c._dom)||_.addDom(u)):u=_.add(c),_.markUsed(S);var e=u.getAttribute("id");I.setAttribute(g,"url(#"+e+")")}})}},D.prototype.add=function(I){var S;if(I.type==="linear")S=this.createElement("linearGradient");else{if(I.type!=="radial")return k("Illegal gradient type."),null;S=this.createElement("radialGradient")}return I.id=I.id||this.nextId++,S.setAttribute("id","zr"+this._zrId+"-gradient-"+I.id),this.updateDom(I,S),this.addDom(S),S},D.prototype.update=function(I){var S=this;L.prototype.update.call(this,I,function(){var _=I.type,g=I._dom.tagName;_==="linear"&&g==="linearGradient"||_==="radial"&&g==="radialGradient"?S.updateDom(I,I._dom):(S.removeDom(I),S.add(I))})},D.prototype.updateDom=function(I,S){if(I.type==="linear")S.setAttribute("x1",I.x),S.setAttribute("y1",I.y),S.setAttribute("x2",I.x2),S.setAttribute("y2",I.y2);else{if(I.type!=="radial")return void k("Illegal gradient type.");S.setAttribute("cx",I.x),S.setAttribute("cy",I.y),S.setAttribute("r",I.r)}I.global?S.setAttribute("gradientUnits","userSpaceOnUse"):S.setAttribute("gradientUnits","objectBoundingBox"),S.innerHTML="";for(var _=I.colorStops,g=0,u=_.length;g<u;++g){var c=this.createElement("stop");c.setAttribute("offset",100*_[g].offset+"%");var l=_[g].color;if(l.indexOf("rgba")>-1){var e=O.parse(l)[3],t=O.toHex(l);c.setAttribute("stop-color","#"+t),c.setAttribute("stop-opacity",e)}else c.setAttribute("stop-color",_[g].color);S.appendChild(c)}I._dom=S},D.prototype.markUsed=function(I){if(I.style){var S=I.style.fill;S&&S._dom&&L.prototype.markUsed.call(this,S._dom),(S=I.style.stroke)&&S._dom&&L.prototype.markUsed.call(this,S._dom)}};var E=D;W.exports=E},41472:(W,G,T)=>{var L=T(6740);function R(D,E){L.call(this,D,E,["filter"],"__filter_in_use__","_shadowDom")}function k(D){return D&&(D.shadowBlur||D.shadowOffsetX||D.shadowOffsetY||D.textShadowBlur||D.textShadowOffsetX||D.textShadowOffsetY)}T(33051).inherits(R,L),R.prototype.addWithoutUpdate=function(D,E){if(E&&k(E.style)){var I;E._shadowDom?(I=E._shadowDom,this.getDefs(!0).contains(E._shadowDom)||this.addDom(I)):I=this.add(E),this.markUsed(E);var S=I.getAttribute("id");D.style.filter="url(#"+S+")"}},R.prototype.add=function(D){var E=this.createElement("filter");return D._shadowDomId=D._shadowDomId||this.nextId++,E.setAttribute("id","zr"+this._zrId+"-shadow-"+D._shadowDomId),this.updateDom(D,E),this.addDom(E),E},R.prototype.update=function(D,E){if(k(E.style)){var I=this;L.prototype.update.call(this,E,function(){I.updateDom(E,E._shadowDom)})}else this.remove(D,E)},R.prototype.remove=function(D,E){E._shadowDomId!=null&&(this.removeDom(D),D.style.filter="")},R.prototype.updateDom=function(D,E){var I=E.getElementsByTagName("feDropShadow");I=I.length===0?this.createElement("feDropShadow"):I[0];var S,_,g,u,c=D.style,l=D.scale&&D.scale[0]||1,e=D.scale&&D.scale[1]||1;if(c.shadowBlur||c.shadowOffsetX||c.shadowOffsetY)S=c.shadowOffsetX||0,_=c.shadowOffsetY||0,g=c.shadowBlur,u=c.shadowColor;else{if(!c.textShadowBlur)return void this.removeDom(E,c);S=c.textShadowOffsetX||0,_=c.textShadowOffsetY||0,g=c.textShadowBlur,u=c.textShadowColor}I.setAttribute("dx",S/l),I.setAttribute("dy",_/e),I.setAttribute("flood-color",u);var t=g/2/l+" "+g/2/e;I.setAttribute("stdDeviation",t),E.setAttribute("x","-100%"),E.setAttribute("y","-100%"),E.setAttribute("width",Math.ceil(g/2*200)+"%"),E.setAttribute("height",Math.ceil(g/2*200)+"%"),E.appendChild(I),D._shadowDom=E},R.prototype.markUsed=function(D){D._shadowDom&&L.prototype.markUsed.call(this,D._shadowDom)};var O=R;W.exports=O},31663:(W,G,T)=>{T(37953),(0,T(31931).registerPainter)("svg",T(58331))},21092:(W,G,T)=>{var L=T(92528),R={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function k(n){return(n=Math.round(n))<0?0:n>255?255:n}function O(n){return n<0?0:n>1?1:n}function D(n){return n.length&&n.charAt(n.length-1)==="%"?k(parseFloat(n)/100*255):k(parseInt(n,10))}function E(n){return n.length&&n.charAt(n.length-1)==="%"?O(parseFloat(n)/100):O(parseFloat(n))}function I(n,h,p){return p<0?p+=1:p>1&&(p-=1),6*p<1?n+(h-n)*p*6:2*p<1?h:3*p<2?n+(h-n)*(.6666666666666666-p)*6:n}function S(n,h,p){return n+(h-n)*p}function _(n,h,p,d,f){return n[0]=h,n[1]=p,n[2]=d,n[3]=f,n}function g(n,h){return n[0]=h[0],n[1]=h[1],n[2]=h[2],n[3]=h[3],n}var u=new L(20),c=null;function l(n,h){c&&g(c,h),c=u.put(n,c||h.slice())}function e(n,h){if(n){h=h||[];var p=u.get(n);if(p)return g(h,p);var d,f=(n+="").replace(/ /g,"").toLowerCase();if(f in R)return g(h,R[f]),l(n,h),h;if(f.charAt(0)==="#")return f.length===4?(d=parseInt(f.substr(1),16))>=0&&d<=4095?(_(h,(3840&d)>>4|(3840&d)>>8,240&d|(240&d)>>4,15&d|(15&d)<<4,1),l(n,h),h):void _(h,0,0,0,1):f.length===7?(d=parseInt(f.substr(1),16))>=0&&d<=16777215?(_(h,(16711680&d)>>16,(65280&d)>>8,255&d,1),l(n,h),h):void _(h,0,0,0,1):void 0;var v=f.indexOf("("),m=f.indexOf(")");if(v!==-1&&m+1===f.length){var y=f.substr(0,v),x=f.substr(v+1,m-(v+1)).split(","),w=1;switch(y){case"rgba":if(x.length!==4)return void _(h,0,0,0,1);w=E(x.pop());case"rgb":return x.length!==3?void _(h,0,0,0,1):(_(h,D(x[0]),D(x[1]),D(x[2]),w),l(n,h),h);case"hsla":return x.length!==4?void _(h,0,0,0,1):(x[3]=E(x[3]),t(x,h),l(n,h),h);case"hsl":return x.length!==3?void _(h,0,0,0,1):(t(x,h),l(n,h),h);default:return}}_(h,0,0,0,1)}}function t(n,h){var p=(parseFloat(n[0])%360+360)%360/360,d=E(n[1]),f=E(n[2]),v=f<=.5?f*(d+1):f+d-f*d,m=2*f-v;return _(h=h||[],k(255*I(m,v,p+.3333333333333333)),k(255*I(m,v,p)),k(255*I(m,v,p-.3333333333333333)),1),n.length===4&&(h[3]=n[3]),h}function i(n,h,p){if(h&&h.length&&n>=0&&n<=1){p=p||[];var d=n*(h.length-1),f=Math.floor(d),v=Math.ceil(d),m=h[f],y=h[v],x=d-f;return p[0]=k(S(m[0],y[0],x)),p[1]=k(S(m[1],y[1],x)),p[2]=k(S(m[2],y[2],x)),p[3]=O(S(m[3],y[3],x)),p}}var s=i;function a(n,h,p){if(h&&h.length&&n>=0&&n<=1){var d=n*(h.length-1),f=Math.floor(d),v=Math.ceil(d),m=e(h[f]),y=e(h[v]),x=d-f,w=r([k(S(m[0],y[0],x)),k(S(m[1],y[1],x)),k(S(m[2],y[2],x)),O(S(m[3],y[3],x))],"rgba");return p?{color:w,leftIndex:f,rightIndex:v,value:d}:w}}var o=a;function r(n,h){if(n&&n.length){var p=n[0]+","+n[1]+","+n[2];return h!=="rgba"&&h!=="hsva"&&h!=="hsla"||(p+=","+n[3]),h+"("+p+")"}}G.parse=e,G.lift=function(n,h){var p=e(n);if(p){for(var d=0;d<3;d++)p[d]=h<0?p[d]*(1-h)|0:(255-p[d])*h+p[d]|0,p[d]>255?p[d]=255:n[d]<0&&(p[d]=0);return r(p,p.length===4?"rgba":"rgb")}},G.toHex=function(n){var h=e(n);if(h)return(16777216+(h[0]<<16)+(h[1]<<8)+ +h[2]).toString(16).slice(1)},G.fastLerp=i,G.fastMapToColor=s,G.lerp=a,G.mapToColor=o,G.modifyHSL=function(n,h,p,d){if(n=e(n))return n=function(v){if(v){var m,y,x=v[0]/255,w=v[1]/255,M=v[2]/255,C=Math.min(x,w,M),A=Math.max(x,w,M),P=A-C,b=(A+C)/2;if(P===0)m=0,y=0;else{y=b<.5?P/(A+C):P/(2-A-C);var N=((A-x)/6+P/2)/P,B=((A-w)/6+P/2)/P,z=((A-M)/6+P/2)/P;x===A?m=z-B:w===A?m=.3333333333333333+N-z:M===A&&(m=.6666666666666666+B-N),m<0&&(m+=1),m>1&&(m-=1)}var F=[360*m,y,b];return v[3]!=null&&F.push(v[3]),F}}(n),h!=null&&(n[0]=(f=h,(f=Math.round(f))<0?0:f>360?360:f)),p!=null&&(n[1]=E(p)),d!=null&&(n[2]=E(d)),r(t(n),"rgba");var f},G.modifyAlpha=function(n,h){if((n=e(n))&&h!=null)return n[3]=O(h),r(n,"rgba")},G.stringify=r},10003:(W,G,T)=>{var L=T(8524),R=T(44535),k=T(96498),O=T(69538),D=T(27304),E=T(92797),I=T(22095),S=T(10712),_=T(95094),g=T(62514),u=T(74438),c=T(40342),l=T(32892),e=T(75991).createFromString,t=T(33051),i=t.isString,s=t.extend,a=t.defaults,o=t.trim,r=t.each,n=/[\s,]+/;function h(b){for(i(b)&&(b=new DOMParser().parseFromString(b,"text/xml")),b.nodeType===9&&(b=b.firstChild);b.nodeName.toLowerCase()!=="svg"||b.nodeType!==1;)b=b.nextSibling;return b}function p(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}p.prototype.parse=function(b,N){N=N||{};var B=h(b);if(!B)throw new Error("Illegal svg");var z=new L;this._root=z;var F=B.getAttribute("viewBox")||"",V=parseFloat(B.getAttribute("width")||N.width),H=parseFloat(B.getAttribute("height")||N.height);isNaN(V)&&(V=null),isNaN(H)&&(H=null),x(B,z,null,!0);for(var U,j,X=B.firstChild;X;)this._parseNode(X,z),X=X.nextSibling;if(F){var Y=o(F).split(n);Y.length>=4&&(U={x:parseFloat(Y[0]||0),y:parseFloat(Y[1]||0),width:parseFloat(Y[2]),height:parseFloat(Y[3])})}if(U&&V!=null&&H!=null&&(j=P(U,V,H),!N.ignoreViewBox)){var J=z;(z=new L).add(J),J.scale=j.scale.slice(),J.position=j.position.slice()}return N.ignoreRootClip||V==null||H==null||z.setClipPath(new D({shape:{x:0,y:0,width:V,height:H}})),{root:z,width:V,height:H,viewBoxRect:U,viewBoxTransform:j}},p.prototype._parseNode=function(b,N){var B,z,F=b.nodeName.toLowerCase();if(F==="defs"?this._isDefine=!0:F==="text"&&(this._isText=!0),this._isDefine){if(z=f[F]){var V=z.call(this,b),H=b.getAttribute("id");H&&(this._defs[H]=V)}}else(z=d[F])&&(B=z.call(this,b,N),N.add(B));for(var U=b.firstChild;U;)U.nodeType===1&&this._parseNode(U,B),U.nodeType===3&&this._isText&&this._parseText(U,B),U=U.nextSibling;F==="defs"?this._isDefine=!1:F==="text"&&(this._isText=!1)},p.prototype._parseText=function(b,N){if(b.nodeType===1){var B=b.getAttribute("dx")||0,z=b.getAttribute("dy")||0;this._textX+=parseFloat(B),this._textY+=parseFloat(z)}var F=new k({style:{text:b.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});v(N,F),x(b,F,this._defs);var V=F.style.fontSize;V&&V<9&&(F.style.fontSize=9,F.scale=F.scale||[1,1],F.scale[0]*=V/9,F.scale[1]*=V/9);var H=F.getBoundingRect();return this._textX+=H.width,N.add(F),F};var d={g:function(b,N){var B=new L;return v(N,B),x(b,B,this._defs),B},rect:function(b,N){var B=new D;return v(N,B),x(b,B,this._defs),B.setShape({x:parseFloat(b.getAttribute("x")||0),y:parseFloat(b.getAttribute("y")||0),width:parseFloat(b.getAttribute("width")||0),height:parseFloat(b.getAttribute("height")||0)}),B},circle:function(b,N){var B=new O;return v(N,B),x(b,B,this._defs),B.setShape({cx:parseFloat(b.getAttribute("cx")||0),cy:parseFloat(b.getAttribute("cy")||0),r:parseFloat(b.getAttribute("r")||0)}),B},line:function(b,N){var B=new I;return v(N,B),x(b,B,this._defs),B.setShape({x1:parseFloat(b.getAttribute("x1")||0),y1:parseFloat(b.getAttribute("y1")||0),x2:parseFloat(b.getAttribute("x2")||0),y2:parseFloat(b.getAttribute("y2")||0)}),B},ellipse:function(b,N){var B=new E;return v(N,B),x(b,B,this._defs),B.setShape({cx:parseFloat(b.getAttribute("cx")||0),cy:parseFloat(b.getAttribute("cy")||0),rx:parseFloat(b.getAttribute("rx")||0),ry:parseFloat(b.getAttribute("ry")||0)}),B},polygon:function(b,N){var B=b.getAttribute("points");B&&(B=m(B));var z=new _({shape:{points:B||[]}});return v(N,z),x(b,z,this._defs),z},polyline:function(b,N){var B=new S;v(N,B),x(b,B,this._defs);var z=b.getAttribute("points");return z&&(z=m(z)),new g({shape:{points:z||[]}})},image:function(b,N){var B=new R;return v(N,B),x(b,B,this._defs),B.setStyle({image:b.getAttribute("xlink:href"),x:b.getAttribute("x"),y:b.getAttribute("y"),width:b.getAttribute("width"),height:b.getAttribute("height")}),B},text:function(b,N){var B=b.getAttribute("x")||0,z=b.getAttribute("y")||0,F=b.getAttribute("dx")||0,V=b.getAttribute("dy")||0;this._textX=parseFloat(B)+parseFloat(F),this._textY=parseFloat(z)+parseFloat(V);var H=new L;return v(N,H),x(b,H,this._defs),H},tspan:function(b,N){var B=b.getAttribute("x"),z=b.getAttribute("y");B!=null&&(this._textX=parseFloat(B)),z!=null&&(this._textY=parseFloat(z));var F=b.getAttribute("dx")||0,V=b.getAttribute("dy")||0,H=new L;return v(N,H),x(b,H,this._defs),this._textX+=F,this._textY+=V,H},path:function(b,N){var B=b.getAttribute("d")||"",z=e(B);return v(N,z),x(b,z,this._defs),z}},f={lineargradient:function(b){var N=parseInt(b.getAttribute("x1")||0,10),B=parseInt(b.getAttribute("y1")||0,10),z=parseInt(b.getAttribute("x2")||10,10),F=parseInt(b.getAttribute("y2")||0,10),V=new u(N,B,z,F);return function(H,U){for(var j=H.firstChild;j;){if(j.nodeType===1){var X=j.getAttribute("offset");X=X.indexOf("%")>0?parseInt(X,10)/100:X?parseFloat(X):0;var Y=j.getAttribute("stop-color")||"#000000";U.addColorStop(X,Y)}j=j.nextSibling}}(b,V),V},radialgradient:function(b){}};function v(b,N){b&&b.__inheritedStyle&&(N.__inheritedStyle||(N.__inheritedStyle={}),a(N.__inheritedStyle,b.__inheritedStyle))}function m(b){for(var N=o(b).split(n),B=[],z=0;z<N.length;z+=2){var F=parseFloat(N[z]),V=parseFloat(N[z+1]);B.push([F,V])}return B}var y={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function x(b,N,B,z){var F=N.__inheritedStyle||{},V=N.type==="text";if(b.nodeType===1&&(function(J,K){var Q=J.getAttribute("transform");if(Q){Q=Q.replace(/,/g," ");var Z=null,q=[];Q.replace(C,function(et,it,ot){q.push(it,ot)});for(var tt=q.length-1;tt>0;tt-=2){var $=q[tt],rt=q[tt-1];switch(Z=Z||l.create(),rt){case"translate":$=o($).split(n),l.translate(Z,Z,[parseFloat($[0]),parseFloat($[1]||0)]);break;case"scale":$=o($).split(n),l.scale(Z,Z,[parseFloat($[0]),parseFloat($[1]||$[0])]);break;case"rotate":$=o($).split(n),l.rotate(Z,Z,parseFloat($[0]));break;case"skew":$=o($).split(n),console.warn("Skew transform is not supported yet");break;case"matrix":$=o($).split(n),Z[0]=parseFloat($[0]),Z[1]=parseFloat($[1]),Z[2]=parseFloat($[2]),Z[3]=parseFloat($[3]),Z[4]=parseFloat($[4]),Z[5]=parseFloat($[5])}}K.setLocalTransform(Z)}}(b,N),s(F,function(J){var K=J.getAttribute("style"),Q={};if(!K)return Q;var Z,q={};for(A.lastIndex=0;(Z=A.exec(K))!=null;)q[Z[1]]=Z[2];for(var tt in y)y.hasOwnProperty(tt)&&q[tt]!=null&&(Q[y[tt]]=q[tt]);return Q}(b)),!z)){for(var H in y)if(y.hasOwnProperty(H)){var U=b.getAttribute(H);U!=null&&(F[y[H]]=U)}}var j=V?"textFill":"fill",X=V?"textStroke":"stroke";N.style=N.style||new c;var Y=N.style;F.fill!=null&&Y.set(j,M(F.fill,B)),F.stroke!=null&&Y.set(X,M(F.stroke,B)),r(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(J){var K=J==="lineWidth"&&V?"textStrokeWidth":J;F[J]!=null&&Y.set(K,parseFloat(F[J]))}),F.textBaseline&&F.textBaseline!=="auto"||(F.textBaseline="alphabetic"),F.textBaseline==="alphabetic"&&(F.textBaseline="bottom"),F.textAlign==="start"&&(F.textAlign="left"),F.textAlign==="end"&&(F.textAlign="right"),r(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(J){F[J]!=null&&Y.set(J,F[J])}),F.lineDash&&(N.style.lineDash=o(F.lineDash).split(n)),Y[X]&&Y[X]!=="none"&&(N[X]=!0),N.__inheritedStyle=F}var w=/url\(\s*#(.*?)\)/;function M(b,N){var B=N&&b&&b.match(w);return B?N[o(B[1])]:b}var C=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,A=/([^\s:;]+)\s*:\s*([^:;]+)/g;function P(b,N,B){var z=N/b.width,F=B/b.height,V=Math.min(z,F);return{scale:[V,V],position:[-(b.x+b.width/2)*V+N/2,-(b.y+b.height/2)*V+B/2]}}G.parseXML=h,G.makeViewBoxTransform=P,G.parseSVG=function(b,N){return new p().parse(b,N)}},75991:(W,G,T)=>{var L=T(10712),R=T(14014),k=T(35028),O=Math.sqrt,D=Math.sin,E=Math.cos,I=Math.PI,S=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},_=function(t,i){return(t[0]*i[0]+t[1]*i[1])/(S(t)*S(i))},g=function(t,i){return(t[0]*i[1]<t[1]*i[0]?-1:1)*Math.acos(_(t,i))};function u(t,i,s,a,o,r,n,h,p,d,f){var v=p*(I/180),m=E(v)*(t-s)/2+D(v)*(i-a)/2,y=-1*D(v)*(t-s)/2+E(v)*(i-a)/2,x=m*m/(n*n)+y*y/(h*h);x>1&&(n*=O(x),h*=O(x));var w=(o===r?-1:1)*O((n*n*(h*h)-n*n*(y*y)-h*h*(m*m))/(n*n*(y*y)+h*h*(m*m)))||0,M=w*n*y/h,C=w*-h*m/n,A=(t+s)/2+E(v)*M-D(v)*C,P=(i+a)/2+D(v)*M+E(v)*C,b=g([1,0],[(m-M)/n,(y-C)/h]),N=[(m-M)/n,(y-C)/h],B=[(-1*m-M)/n,(-1*y-C)/h],z=g(N,B);_(N,B)<=-1&&(z=I),_(N,B)>=1&&(z=0),r===0&&z>0&&(z-=2*I),r===1&&z<0&&(z+=2*I),f.addData(d,A,P,n,h,b,z,v,r)}var c=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,l=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function e(t,i){var s=function(a){if(!a)return new R;for(var o,r=0,n=0,h=r,p=n,d=new R,f=R.CMD,v=a.match(c),m=0;m<v.length;m++){for(var y,x=v[m],w=x.charAt(0),M=x.match(l)||[],C=M.length,A=0;A<C;A++)M[A]=parseFloat(M[A]);for(var P=0;P<C;){var b,N,B,z,F,V,H,U=r,j=n;switch(w){case"l":r+=M[P++],n+=M[P++],y=f.L,d.addData(y,r,n);break;case"L":r=M[P++],n=M[P++],y=f.L,d.addData(y,r,n);break;case"m":r+=M[P++],n+=M[P++],y=f.M,d.addData(y,r,n),h=r,p=n,w="l";break;case"M":r=M[P++],n=M[P++],y=f.M,d.addData(y,r,n),h=r,p=n,w="L";break;case"h":r+=M[P++],y=f.L,d.addData(y,r,n);break;case"H":r=M[P++],y=f.L,d.addData(y,r,n);break;case"v":n+=M[P++],y=f.L,d.addData(y,r,n);break;case"V":n=M[P++],y=f.L,d.addData(y,r,n);break;case"C":y=f.C,d.addData(y,M[P++],M[P++],M[P++],M[P++],M[P++],M[P++]),r=M[P-2],n=M[P-1];break;case"c":y=f.C,d.addData(y,M[P++]+r,M[P++]+n,M[P++]+r,M[P++]+n,M[P++]+r,M[P++]+n),r+=M[P-2],n+=M[P-1];break;case"S":b=r,N=n;var X=d.len(),Y=d.data;o===f.C&&(b+=r-Y[X-4],N+=n-Y[X-3]),y=f.C,U=M[P++],j=M[P++],r=M[P++],n=M[P++],d.addData(y,b,N,U,j,r,n);break;case"s":b=r,N=n,X=d.len(),Y=d.data,o===f.C&&(b+=r-Y[X-4],N+=n-Y[X-3]),y=f.C,U=r+M[P++],j=n+M[P++],r+=M[P++],n+=M[P++],d.addData(y,b,N,U,j,r,n);break;case"Q":U=M[P++],j=M[P++],r=M[P++],n=M[P++],y=f.Q,d.addData(y,U,j,r,n);break;case"q":U=M[P++]+r,j=M[P++]+n,r+=M[P++],n+=M[P++],y=f.Q,d.addData(y,U,j,r,n);break;case"T":b=r,N=n,X=d.len(),Y=d.data,o===f.Q&&(b+=r-Y[X-4],N+=n-Y[X-3]),r=M[P++],n=M[P++],y=f.Q,d.addData(y,b,N,r,n);break;case"t":b=r,N=n,X=d.len(),Y=d.data,o===f.Q&&(b+=r-Y[X-4],N+=n-Y[X-3]),r+=M[P++],n+=M[P++],y=f.Q,d.addData(y,b,N,r,n);break;case"A":B=M[P++],z=M[P++],F=M[P++],V=M[P++],H=M[P++],u(U=r,j=n,r=M[P++],n=M[P++],V,H,B,z,F,y=f.A,d);break;case"a":B=M[P++],z=M[P++],F=M[P++],V=M[P++],H=M[P++],u(U=r,j=n,r+=M[P++],n+=M[P++],V,H,B,z,F,y=f.A,d)}}w!=="z"&&w!=="Z"||(y=f.Z,d.addData(y),r=h,n=p),o=y}return d.toStatic(),d}(t);return(i=i||{}).buildPath=function(a){if(a.setData)a.setData(s.data),(o=a.getContext())&&a.rebuildPath(o);else{var o=a;s.rebuildPath(o)}},i.applyTransform=function(a){k(s,a),this.dirty(!0)},i}G.createFromString=function(t,i){return new L(e(t,i))},G.extendFromString=function(t,i){return L.extend(e(t,i))},G.mergePath=function(t,i){for(var s=[],a=t.length,o=0;o<a;o++){var r=t[o];r.path||r.createPathProxy(),r.__dirtyPath&&r.buildPath(r.path,r.shape,!0),s.push(r.path)}var n=new L(i);return n.createPathProxy(),n.buildPath=function(h){h.appendPath(s);var p=h.getContext();p&&h.rebuildPath(p)},n}},35028:(W,G,T)=>{var L=T(14014),R=T(45280).applyTransform,k=L.CMD,O=[[],[],[]],D=Math.sqrt,E=Math.atan2;W.exports=function(I,S){var _,g,u,c,l,e=I.data,t=k.M,i=k.C,s=k.L,a=k.R,o=k.A,r=k.Q;for(u=0,c=0;u<e.length;){switch(_=e[u++],c=u,g=0,_){case t:case s:g=1;break;case i:g=3;break;case r:g=2;break;case o:var n=S[4],h=S[5],p=D(S[0]*S[0]+S[1]*S[1]),d=D(S[2]*S[2]+S[3]*S[3]),f=E(-S[1]/d,S[0]/p);e[u]*=p,e[u++]+=n,e[u]*=d,e[u++]+=h,e[u++]*=p,e[u++]*=d,e[u++]+=f,e[u++]+=f,c=u+=2;break;case a:v[0]=e[u++],v[1]=e[u++],R(v,v,S),e[c++]=v[0],e[c++]=v[1],v[0]+=e[u++],v[1]+=e[u++],R(v,v,S),e[c++]=v[0],e[c++]=v[1]}for(l=0;l<g;l++){var v;(v=O[l])[0]=e[u++],v[1]=e[u++],R(v,v,S),e[c++]=v[0],e[c++]=v[1]}}}},85762:(W,G,T)=>{var L=T(48612),R=T(50381),k=T(33051).each;function O(I){return parseInt(I,10)}function D(I,S){R.initVML(),this.root=I,this.storage=S;var _=document.createElement("div"),g=document.createElement("div");_.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",g.style.cssText="position:absolute;left:0;top:0;",I.appendChild(_),this._vmlRoot=g,this._vmlViewport=_,this.resize();var u=S.delFromStorage,c=S.addToStorage;S.delFromStorage=function(l){u.call(S,l),l&&l.onRemove&&l.onRemove(g)},S.addToStorage=function(l){l.onAdd&&l.onAdd(g),c.call(S,l)},this._firstPaint=!0}D.prototype={constructor:D,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var I=this.getViewportRoot();if(I)return{offsetLeft:I.offsetLeft||0,offsetTop:I.offsetTop||0}},refresh:function(){var I=this.storage.getDisplayList(!0,!0);this._paintList(I)},_paintList:function(I){for(var S=this._vmlRoot,_=0;_<I.length;_++){var g=I[_];g.invisible||g.ignore?(g.__alreadyNotVisible||g.onRemove(S),g.__alreadyNotVisible=!0):(g.__alreadyNotVisible&&g.onAdd(S),g.__alreadyNotVisible=!1,g.__dirty&&(g.beforeBrush&&g.beforeBrush(),(g.brushVML||g.brush).call(g,S),g.afterBrush&&g.afterBrush())),g.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(S),this._firstPaint=!1)},resize:function(I,S){if(I=I==null?this._getWidth():I,S=S==null?this._getHeight():S,this._width!==I||this._height!==S){this._width=I,this._height=S;var _=this._vmlViewport.style;_.width=I+"px",_.height=S+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var I=this.root,S=I.currentStyle;return(I.clientWidth||O(S.width))-O(S.paddingLeft)-O(S.paddingRight)|0},_getHeight:function(){var I=this.root,S=I.currentStyle;return(I.clientHeight||O(S.height))-O(S.paddingTop)-O(S.paddingBottom)|0}},k(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(I){var S;D.prototype[I]=(S=I,function(){L('In IE8.0 VML mode painter not support method "'+S+'"')})});var E=D;W.exports=E},50381:(W,G,T)=>{var L,R=T(66387),k="urn:schemas-microsoft-com:vml",O=typeof window>"u"?null:window,D=!1,E=O&&O.document;if(E&&!R.canvasSupported)try{!E.namespaces.zrvml&&E.namespaces.add("zrvml",k),L=function(I){return E.createElement("<zrvml:"+I+' class="zrvml">')}}catch{L=function(S){return E.createElement("<"+S+' xmlns="'+k+'" class="zrvml">')}}G.doc=E,G.createNode=function(I){return L(I)},G.initVML=function(){if(!D&&E){D=!0;var I=E.styleSheets;I.length<31?E.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):I[0].addRule(".zrvml","behavior:url(#default#VML)")}}},91862:(W,G,T)=>{var L=T(66387),R=T(45280).applyTransform,k=T(60479),O=T(21092),D=T(80423),E=T(98886),I=T(41406),S=T(7719),_=T(44535),g=T(96498),u=T(10712),c=T(14014),l=T(31797),e=T(50381),t=c.CMD,i=Math.round,s=Math.sqrt,a=Math.abs,o=Math.cos,r=Math.sin,n=Math.max;if(!L.canvasSupported){var h=",",p="progid:DXImageTransform.Microsoft",d=21600,f=d/2,v=function(K){K.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",K.coordsize=d+","+d,K.coordorigin="0,0"},m=function(K,Q,Z){return"rgb("+[K,Q,Z].join(",")+")"},y=function(K,Q){Q&&K&&Q.parentNode!==K&&K.appendChild(Q)},x=function(K,Q){Q&&K&&Q.parentNode===K&&K.removeChild(Q)},w=function(K,Q,Z){return 1e5*(parseFloat(K)||0)+1e3*(parseFloat(Q)||0)+Z},M=E.parsePercent,C=function(K,Q,Z){var q=O.parse(Q);Z=+Z,isNaN(Z)&&(Z=1),q&&(K.color=m(q[0],q[1],q[2]),K.opacity=Z*q[3])},A=function(K,Q,Z,q){var tt=Q==="fill",$=K.getElementsByTagName(Q)[0];Z[Q]!=null&&Z[Q]!=="none"&&(tt||!tt&&Z.lineWidth)?(K[tt?"filled":"stroked"]="true",Z[Q]instanceof l&&x(K,$),$||($=e.createNode(Q)),tt?function(rt,et,it){var ot,st,at=et.fill;if(at!=null)if(at instanceof l){var vt,yt=0,gt=[0,0],pt=0,bt=1,mt=it.getBoundingRect(),nt=mt.width,lt=mt.height;if(at.type==="linear"){vt="gradient";var ct=it.transform,ht=[at.x*nt,at.y*lt],ft=[at.x2*nt,at.y2*lt];ct&&(R(ht,ht,ct),R(ft,ft,ct));var _t=ft[0]-ht[0],wt=ft[1]-ht[1];(yt=180*Math.atan2(_t,wt)/Math.PI)<0&&(yt+=360),yt<1e-6&&(yt=0)}else{vt="gradientradial",ht=[at.x*nt,at.y*lt],ct=it.transform;var Tt=it.scale,It=nt,Mt=lt;gt=[(ht[0]-mt.x)/It,(ht[1]-mt.y)/Mt],ct&&R(ht,ht,ct),It/=Tt[0]*d,Mt/=Tt[1]*d;var Lt=n(It,Mt);pt=0/Lt,bt=2*at.r/Lt-pt}var kt=at.colorStops.slice();kt.sort(function(Nt,Ot){return Nt.offset-Ot.offset});for(var Rt=kt.length,ut=[],dt=[],xt=0;xt<Rt;xt++){var St=kt[xt],At=(ot=St.color,st=O.parse(ot),[m(st[0],st[1],st[2]),st[3]]);dt.push(St.offset*bt+pt+" "+At[0]),xt!==0&&xt!==Rt-1||ut.push(At)}if(Rt>=2){var Ct=ut[0][0],Dt=ut[1][0],Pt=ut[0][1]*et.opacity,Et=ut[1][1]*et.opacity;rt.type=vt,rt.method="none",rt.focus="100%",rt.angle=yt,rt.color=Ct,rt.color2=Dt,rt.colors=dt.join(","),rt.opacity=Et,rt.opacity2=Pt}vt==="radial"&&(rt.focusposition=gt.join(","))}else C(rt,at,et.opacity)}($,Z,q):function(rt,et){et.lineDash&&(rt.dashstyle=et.lineDash.join(" ")),et.stroke==null||et.stroke instanceof l||C(rt,et.stroke,et.opacity)}($,Z),y(K,$)):(K[tt?"filled":"stroked"]="false",x(K,$))},P=[[],[],[]];u.prototype.brushVML=function(K){var Q=this.style,Z=this._vmlEl;Z||(Z=e.createNode("shape"),v(Z),this._vmlEl=Z),A(Z,"fill",Q,this),A(Z,"stroke",Q,this);var q=this.transform,tt=q!=null,$=Z.getElementsByTagName("stroke")[0];if($){var rt=Q.lineWidth;if(tt&&!Q.strokeNoScale){var et=q[0]*q[3]-q[1]*q[2];rt*=s(a(et))}$.weight=rt+"px"}var it=this.path||(this.path=new c);this.__dirtyPath&&(it.beginPath(),it.subPixelOptimize=!1,this.buildPath(it,this.shape),it.toStatic(),this.__dirtyPath=!1),Z.path=function(ot,st){var at,vt,yt,gt,pt,bt,mt=t.M,nt=t.C,lt=t.L,ct=t.A,ht=t.Q,ft=[],_t=ot.data,wt=ot.len();for(gt=0;gt<wt;){switch(vt="",at=0,yt=_t[gt++]){case mt:vt=" m ",at=1,pt=_t[gt++],bt=_t[gt++],P[0][0]=pt,P[0][1]=bt;break;case lt:vt=" l ",at=1,pt=_t[gt++],bt=_t[gt++],P[0][0]=pt,P[0][1]=bt;break;case ht:case nt:vt=" c ",at=3;var Tt,It,Mt=_t[gt++],Lt=_t[gt++],kt=_t[gt++],Rt=_t[gt++];yt===ht?(Tt=kt,It=Rt,kt=(kt+2*Mt)/3,Rt=(Rt+2*Lt)/3,Mt=(pt+2*Mt)/3,Lt=(bt+2*Lt)/3):(Tt=_t[gt++],It=_t[gt++]),P[0][0]=Mt,P[0][1]=Lt,P[1][0]=kt,P[1][1]=Rt,P[2][0]=Tt,P[2][1]=It,pt=Tt,bt=It;break;case ct:var ut=0,dt=0,xt=1,St=1,At=0;st&&(ut=st[4],dt=st[5],xt=s(st[0]*st[0]+st[1]*st[1]),St=s(st[2]*st[2]+st[3]*st[3]),At=Math.atan2(-st[1]/St,st[0]/xt));var Ct=_t[gt++],Dt=_t[gt++],Pt=_t[gt++],Et=_t[gt++],Nt=_t[gt++]+At,Ot=_t[gt++]+Nt+At;gt++;var zt=_t[gt++],Ft=Ct+o(Nt)*Pt,Bt=Dt+r(Nt)*Et,Xt=(Mt=Ct+o(Ot)*Pt,Lt=Dt+r(Ot)*Et,zt?" wa ":" at ");Math.abs(Ft-Mt)<1e-4&&(Math.abs(Ot-Nt)>.01?zt&&(Ft+=270/d):Math.abs(Bt-Dt)<1e-4?zt&&Ft<Ct||!zt&&Ft>Ct?Lt-=270/d:Lt+=270/d:zt&&Bt<Dt||!zt&&Bt>Dt?Mt+=270/d:Mt-=270/d),ft.push(Xt,i(((Ct-Pt)*xt+ut)*d-f),h,i(((Dt-Et)*St+dt)*d-f),h,i(((Ct+Pt)*xt+ut)*d-f),h,i(((Dt+Et)*St+dt)*d-f),h,i((Ft*xt+ut)*d-f),h,i((Bt*St+dt)*d-f),h,i((Mt*xt+ut)*d-f),h,i((Lt*St+dt)*d-f)),pt=Mt,bt=Lt;break;case t.R:var Gt=P[0],Yt=P[1];Gt[0]=_t[gt++],Gt[1]=_t[gt++],Yt[0]=Gt[0]+_t[gt++],Yt[1]=Gt[1]+_t[gt++],st&&(R(Gt,Gt,st),R(Yt,Yt,st)),Gt[0]=i(Gt[0]*d-f),Yt[0]=i(Yt[0]*d-f),Gt[1]=i(Gt[1]*d-f),Yt[1]=i(Yt[1]*d-f),ft.push(" m ",Gt[0],h,Gt[1]," l ",Yt[0],h,Gt[1]," l ",Yt[0],h,Yt[1]," l ",Gt[0],h,Yt[1]);break;case t.Z:ft.push(" x ")}if(at>0){ft.push(vt);for(var Zt=0;Zt<at;Zt++){var qt=P[Zt];st&&R(qt,qt,st),ft.push(i(qt[0]*d-f),h,i(qt[1]*d-f),Zt<at-1?h:"")}}}return ft.join("")}(it,this.transform),Z.style.zIndex=w(this.zlevel,this.z,this.z2),y(K,Z),Q.text!=null?this.drawRectText(K,this.getBoundingRect()):this.removeRectText(K)},u.prototype.onRemove=function(K){x(K,this._vmlEl),this.removeRectText(K)},u.prototype.onAdd=function(K){y(K,this._vmlEl),this.appendRectText(K)},_.prototype.brushVML=function(K){var Q,Z,q,tt=this.style,$=tt.image;if(typeof(q=$)=="object"&&q.tagName&&q.tagName.toUpperCase()==="IMG"){var rt=$.src;if(rt===this._imageSrc)Q=this._imageWidth,Z=this._imageHeight;else{var et=$.runtimeStyle,it=et.width,ot=et.height;et.width="auto",et.height="auto",Q=$.width,Z=$.height,et.width=it,et.height=ot,this._imageSrc=rt,this._imageWidth=Q,this._imageHeight=Z}$=rt}else $===this._imageSrc&&(Q=this._imageWidth,Z=this._imageHeight);if($){var st=tt.x||0,at=tt.y||0,vt=tt.width,yt=tt.height,gt=tt.sWidth,pt=tt.sHeight,bt=tt.sx||0,mt=tt.sy||0,nt=gt&&pt,lt=this._vmlEl;lt||(lt=e.doc.createElement("div"),v(lt),this._vmlEl=lt);var ct,ht=lt.style,ft=!1,_t=1,wt=1;if(this.transform&&(ct=this.transform,_t=s(ct[0]*ct[0]+ct[1]*ct[1]),wt=s(ct[2]*ct[2]+ct[3]*ct[3]),ft=ct[1]||ct[2]),ft){var Tt=[st,at],It=[st+vt,at],Mt=[st,at+yt],Lt=[st+vt,at+yt];R(Tt,Tt,ct),R(It,It,ct),R(Mt,Mt,ct),R(Lt,Lt,ct);var kt=n(Tt[0],It[0],Mt[0],Lt[0]),Rt=n(Tt[1],It[1],Mt[1],Lt[1]),ut=[];ut.push("M11=",ct[0]/_t,h,"M12=",ct[2]/wt,h,"M21=",ct[1]/_t,h,"M22=",ct[3]/wt,h,"Dx=",i(st*_t+ct[4]),h,"Dy=",i(at*wt+ct[5])),ht.padding="0 "+i(kt)+"px "+i(Rt)+"px 0",ht.filter=p+".Matrix("+ut.join("")+", SizingMethod=clip)"}else ct&&(st=st*_t+ct[4],at=at*wt+ct[5]),ht.filter="",ht.left=i(st)+"px",ht.top=i(at)+"px";var dt=this._imageEl,xt=this._cropEl;dt||(dt=e.doc.createElement("div"),this._imageEl=dt);var St=dt.style;if(nt){if(Q&&Z)St.width=i(_t*Q*vt/gt)+"px",St.height=i(wt*Z*yt/pt)+"px";else{var At=new Image,Ct=this;At.onload=function(){At.onload=null,Q=At.width,Z=At.height,St.width=i(_t*Q*vt/gt)+"px",St.height=i(wt*Z*yt/pt)+"px",Ct._imageWidth=Q,Ct._imageHeight=Z,Ct._imageSrc=$},At.src=$}xt||((xt=e.doc.createElement("div")).style.overflow="hidden",this._cropEl=xt);var Dt=xt.style;Dt.width=i((vt+bt*vt/gt)*_t),Dt.height=i((yt+mt*yt/pt)*wt),Dt.filter=p+".Matrix(Dx="+-bt*vt/gt*_t+",Dy="+-mt*yt/pt*wt+")",xt.parentNode||lt.appendChild(xt),dt.parentNode!==xt&&xt.appendChild(dt)}else St.width=i(_t*vt)+"px",St.height=i(wt*yt)+"px",lt.appendChild(dt),xt&&xt.parentNode&&(lt.removeChild(xt),this._cropEl=null);var Pt="",Et=tt.opacity;Et<1&&(Pt+=".Alpha(opacity="+i(100*Et)+") "),Pt+=p+".AlphaImageLoader(src="+$+", SizingMethod=scale)",St.filter=Pt,lt.style.zIndex=w(this.zlevel,this.z,this.z2),y(K,lt),tt.text!=null&&this.drawRectText(K,this.getBoundingRect())}},_.prototype.onRemove=function(K){x(K,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(K)},_.prototype.onAdd=function(K){y(K,this._vmlEl),this.appendRectText(K)};var b,N="normal",B={},z=0,F=document.createElement("div");D.$override("measureText",function(K,Q){var Z=e.doc;b||((b=Z.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",e.doc.body.appendChild(b));try{b.style.font=Q}catch{}return b.innerHTML="",b.appendChild(Z.createTextNode(K)),{width:b.offsetWidth}});for(var V=new k,H=function(K,Q,Z,q){var tt=this.style;this.__dirty&&E.normalizeTextStyle(tt,!0);var $=tt.text;if($!=null&&($+=""),$){if(tt.rich){var rt=D.parseRichText($,tt);$=[];for(var et=0;et<rt.lines.length;et++){for(var it=rt.lines[et].tokens,ot=[],st=0;st<it.length;st++)ot.push(it[st].text);$.push(ot.join(""))}$=$.join(`
`)}var at,vt,yt=tt.textAlign,gt=tt.textVerticalAlign,pt=function(Mt){var Lt=B[Mt];if(!Lt){z>100&&(z=0,B={});var kt,Rt=F.style;try{Rt.font=Mt,kt=Rt.fontFamily.split(",")[0]}catch{}Lt={style:Rt.fontStyle||N,variant:Rt.fontVariant||N,weight:Rt.fontWeight||N,size:0|parseFloat(Rt.fontSize||12),family:kt||"Microsoft YaHei"},B[Mt]=Lt,z++}return Lt}(tt.font),bt=pt.style+" "+pt.variant+" "+pt.weight+" "+pt.size+'px "'+pt.family+'"';Z=Z||D.getBoundingRect($,bt,yt,gt,tt.textPadding,tt.textLineHeight);var mt=this.transform;if(mt&&!q&&(V.copy(Q),V.applyTransform(mt),Q=V),q)at=Q.x,vt=Q.y;else{var nt=tt.textPosition;if(nt instanceof Array)at=Q.x+M(nt[0],Q.width),vt=Q.y+M(nt[1],Q.height),yt=yt||"left";else{var lt=this.calculateTextPosition?this.calculateTextPosition({},tt,Q):D.calculateTextPosition({},tt,Q);at=lt.x,vt=lt.y,yt=yt||lt.textAlign,gt=gt||lt.textVerticalAlign}}at=D.adjustTextX(at,Z.width,yt),vt=D.adjustTextY(vt,Z.height,gt),vt+=Z.height/2;var ct,ht,ft,_t=e.createNode,wt=this._textVmlEl;wt?ht=(ct=(ft=wt.firstChild).nextSibling).nextSibling:(wt=_t("line"),ct=_t("path"),ht=_t("textpath"),ft=_t("skew"),ht.style["v-text-align"]="left",v(wt),ct.textpathok=!0,ht.on=!0,wt.from="0 0",wt.to="1000 0.05",y(wt,ft),y(wt,ct),y(wt,ht),this._textVmlEl=wt);var Tt=[at,vt],It=wt.style;mt&&q?(R(Tt,Tt,mt),ft.on=!0,ft.matrix=mt[0].toFixed(3)+h+mt[2].toFixed(3)+h+mt[1].toFixed(3)+h+mt[3].toFixed(3)+",0,0",ft.offset=(i(Tt[0])||0)+","+(i(Tt[1])||0),ft.origin="0 0",It.left="0px",It.top="0px"):(ft.on=!1,It.left=i(at)+"px",It.top=i(vt)+"px"),ht.string=String($).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{ht.style.font=bt}catch{}A(wt,"fill",{fill:tt.textFill,opacity:tt.opacity},this),A(wt,"stroke",{stroke:tt.textStroke,opacity:tt.opacity,lineDash:tt.lineDash||null},this),wt.style.zIndex=w(this.zlevel,this.z,this.z2),y(K,wt)}},U=function(K){x(K,this._textVmlEl),this._textVmlEl=null},j=function(K){y(K,this._textVmlEl)},X=[I,S,_,u,g],Y=0;Y<X.length;Y++){var J=X[Y].prototype;J.drawRectText=H,J.removeRectText=U,J.appendRectText=j}g.prototype.brushVML=function(K){var Q=this.style;Q.text!=null?this.drawRectText(K,{x:Q.x||0,y:Q.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(K)},g.prototype.onRemove=function(K){this.removeRectText(K)},g.prototype.onAdd=function(K){this.appendRectText(K)}}},62227:(W,G,T)=>{T(91862),(0,T(31931).registerPainter)("vml",T(85762))},31931:(W,G,T)=>{var L=T(78038),R=T(66387),k=T(33051),O=T(48173),D=T(8822),E=T(19847),I=T(76069),S=T(85546),_=!R.canvasSupported,g={canvas:E},u={},c=function(l,e,t){t=t||{},this.dom=e,this.id=l;var i=this,s=new D,a=t.renderer;if(_){if(!g.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");a="vml"}else a&&g[a]||(a="canvas");var o=new g[a](e,s,t,l);this.storage=s,this.painter=o;var r=R.node||R.worker?null:new S(o.getViewportRoot(),o.root);this.handler=new O(s,o,r,o.root),this.animation=new I({stage:{update:k.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var n=s.delFromStorage,h=s.addToStorage;s.delFromStorage=function(p){n.call(s,p),p&&p.removeSelfFromZr(i)},s.addToStorage=function(p){h.call(s,p),p.addSelfToZr(i)}};c.prototype={constructor:c,getId:function(){return this.id},add:function(l){this.storage.addRoot(l),this._needsRefresh=!0},remove:function(l){this.storage.delRoot(l),this._needsRefresh=!0},configLayer:function(l,e){this.painter.configLayer&&this.painter.configLayer(l,e),this._needsRefresh=!0},setBackgroundColor:function(l){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(l),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var l;this._needsRefresh&&(l=!0,this.refreshImmediately()),this._needsRefreshHover&&(l=!0,this.refreshHoverImmediately()),l&&this.trigger("rendered")},addHover:function(l,e){if(this.painter.addHover){var t=this.painter.addHover(l,e);return this.refreshHover(),t}},removeHover:function(l){this.painter.removeHover&&(this.painter.removeHover(l),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(l){l=l||{},this.painter.resize(l.width,l.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(l,e){return this.painter.pathToImage(l,e)},setCursorStyle:function(l){this.handler.setCursorStyle(l)},findHover:function(l,e){return this.handler.findHover(l,e)},on:function(l,e,t){this.handler.on(l,e,t)},off:function(l,e){this.handler.off(l,e)},trigger:function(l,e){this.handler.trigger(l,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){var l;this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,l=this.id,delete u[l]}},G.version="4.3.2",G.init=function(l,e){var t=new c(L(),l,e);return u[t.id]=t,t},G.dispose=function(l){if(l)l.dispose();else{for(var e in u)u.hasOwnProperty(e)&&u[e].dispose();u={}}return this},G.getInstance=function(l){return u[l]},G.registerPainter=function(l,e){g[l]=e}},92649:(W,G,T)=>{var L,R,k,O;function D(I,S){return S!=null&&typeof Symbol<"u"&&S[Symbol.hasInstance]?!!S[Symbol.hasInstance](I):I instanceof S}function E(I){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},E(I)}W=T.nmd(W),O=function(I){var S={};return function(_){var g={};function u(c){if(g[c])return g[c].exports;var l=g[c]={i:c,l:!1,exports:{}};return _[c].call(l.exports,l,l.exports,u),l.l=!0,l.exports}return u.m=_,u.c=g,u.d=function(c,l,e){u.o(c,l)||Object.defineProperty(c,l,{configurable:!1,enumerable:!0,get:e})},u.n=function(c){var l=c&&c.__esModule?function(){return c.default}:function(){return c};return u.d(l,"a",l),l},u.o=function(c,l){return Object.prototype.hasOwnProperty.call(c,l)},u.p="",u(u.s=105)}([function(_,g){_.exports=I},function(_,g,u){var c=u(41),l=u(52),e=u(5),t=u(4),i=u(9),s=u(19),a=u(35),o=u(14),r=u(0),n=u.n(r),h=u(36),p=u(74),d=u.n(p),f=u(60),v=u(123),m=u(124),y=u(128),x=u(129),w=u(2),M=u(131),C=u(43),A=u(76),P=u(132),b=u(133),N=u(134),B=u(135),z=u(37),F=u(38),V=u(26),H=u(3),U=u(136),j=u(56),X=u(137),Y=u(138),J=u(139),K=u(7),Q=u(73),Z=u(54),q=u(18),tt=u(59),$=u(140),rt=u(145),et=u(70),it=u(146),ot=u(147),st=u(148),at=u(149),vt=u(150),yt=u(151);function gt(ht){return D(ht,HTMLCanvasElement)||D(ht,HTMLImageElement)||D(ht,Image)}n.a.util.extend(a.a.prototype,$.a),i.a.import(rt.a),i.a.import(et.a),i.a.import(it.a),i.a.import(ot.a),i.a.import(st.a),i.a.import(at.a),i.a.import(vt.a),i.a.import(yt.a);var pt=h.a.prototype.addToScene,bt=h.a.prototype.removeFromScene;h.a.prototype.addToScene=function(ht){if(pt.call(this,ht),this.__zr){var ft=this.__zr;ht.traverse(function(_t){_t.__zr=ft,_t.addAnimatorsToZr&&_t.addAnimatorsToZr(ft)})}},h.a.prototype.removeFromScene=function(ht){bt.call(this,ht),ht.traverse(function(ft){var _t=ft.__zr;ft.__zr=null,_t&&ft.removeAnimatorsFromZr&&ft.removeAnimatorsFromZr(_t)})},s.a.prototype.setTextureImage=function(ht,ft,_t,wt){if(this.shader){var Tt,It,Mt=_t.getZr(),Lt=this;return Lt.autoUpdateTextureStatus=!1,Lt.disableTexture(ht),(It=ft)&&It!=="none"&&(Tt=mt.loadTexture(ft,_t,wt,function(kt){Lt.enableTexture(ht),Mt&&Mt.refresh()}),Lt.set(ht,Tt)),Tt}};var mt={};mt.Renderer=l.a,mt.Node=a.a,mt.Mesh=c.a,mt.Shader=i.a,mt.Material=s.a,mt.Texture=t.a,mt.Texture2D=e.a,mt.Geometry=o.a,mt.SphereGeometry=M.a,mt.PlaneGeometry=C.a,mt.CubeGeometry=A.a,mt.AmbientLight=P.a,mt.DirectionalLight=b.a,mt.PointLight=N.a,mt.SpotLight=B.a,mt.PerspectiveCamera=z.a,mt.OrthographicCamera=F.a,mt.Vector2=V.a,mt.Vector3=H.a,mt.Vector4=U.a,mt.Quaternion=j.a,mt.Matrix2=X.a,mt.Matrix2d=Y.a,mt.Matrix3=J.a,mt.Matrix4=K.a,mt.Plane=Q.a,mt.Ray=Z.a,mt.BoundingBox=q.a,mt.Frustum=tt.a;var nt=f.a.createBlank("rgba(255,255,255,0)").image;function lt(ht){return Math.pow(2,Math.round(Math.log(ht)/Math.LN2))}function ct(ht){if((ht.wrapS===t.a.REPEAT||ht.wrapT===t.a.REPEAT)&&ht.image){var ft=lt(ht.width),_t=lt(ht.height);if(ft!==ht.width||_t!==ht.height){var wt=document.createElement("canvas");wt.width=ft,wt.height=_t,wt.getContext("2d").drawImage(ht.image,0,0,ft,_t),ht.image=wt}}}mt.loadTexture=function(ht,ft,_t,wt){typeof _t=="function"&&(wt=_t,_t={}),_t=_t||{};for(var Tt=Object.keys(_t).sort(),It="",Mt=0;Mt<Tt.length;Mt++)It+=Tt[Mt]+"_"+_t[Tt[Mt]]+"_";var Lt,kt=ft.__textureCache=ft.__textureCache||new d.a(20);if((Lt=ht).getZr&&Lt.setOption){var Rt=ht.__textureid__;if(dt=kt.get(It+Rt))dt.texture.surface.setECharts(ht),wt&&wt(dt.texture);else{var ut=new v.a(ht);for(ut.onupdate=function(){ft.getZr().refresh()},dt={texture:ut.getTexture()},Mt=0;Mt<Tt.length;Mt++)dt.texture[Tt[Mt]]=_t[Tt[Mt]];Rt=ht.__textureid__||"__ecgl_ec__"+dt.texture.__uid__,ht.__textureid__=Rt,kt.put(It+Rt,dt),wt&&wt(dt.texture)}return dt.texture}if(gt(ht)){var dt;if(Rt=ht.__textureid__,!(dt=kt.get(It+Rt))){for(dt={texture:new mt.Texture2D({image:ht})},Mt=0;Mt<Tt.length;Mt++)dt.texture[Tt[Mt]]=_t[Tt[Mt]];Rt=ht.__textureid__||"__ecgl_image__"+dt.texture.__uid__,ht.__textureid__=Rt,kt.put(It+Rt,dt),ct(dt.texture),wt&&wt(dt.texture)}return dt.texture}if(dt=kt.get(It+ht))dt.callbacks?dt.callbacks.push(wt):wt&&wt(dt.texture);else if(ht.match(/.hdr$|^data:application\/octet-stream/)){dt={callbacks:[wt]};var xt=f.a.loadTexture(ht,{exposure:_t.exposure,fileType:"hdr"},function(){xt.dirty(),dt.callbacks.forEach(function(At){At&&At(xt)}),dt.callbacks=null});dt.texture=xt,kt.put(It+ht,dt)}else{for(xt=new mt.Texture2D({image:new Image}),Mt=0;Mt<Tt.length;Mt++)xt[Tt[Mt]]=_t[Tt[Mt]];dt={texture:xt,callbacks:[wt]};var St=xt.image;St.onload=function(){xt.image=St,ct(xt),xt.dirty(),dt.callbacks.forEach(function(At){At&&At(xt)}),dt.callbacks=null},St.src=ht,xt.image=nt,kt.put(It+ht,dt)}return dt.texture},mt.createAmbientCubemap=function(ht,ft,_t,wt){var Tt=(ht=ht||{}).texture,It=w.a.firstNotNull(ht.exposure,1),Mt=new m.a({intensity:w.a.firstNotNull(ht.specularIntensity,1)}),Lt=new y.a({intensity:w.a.firstNotNull(ht.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return Mt.cubemap=mt.loadTexture(Tt,_t,{exposure:It},function(){Mt.cubemap.flipY=!1;var kt=Date.now();Mt.prefilter(ft,32);var Rt=Date.now()-kt;console.log("Prefilter environment map: "+Rt+"ms"),Lt.coefficients=x.a.projectEnvironmentMap(ft,Mt.cubemap,{lod:1}),wt&&wt()}),{specular:Mt,diffuse:Lt}},mt.createBlankTexture=f.a.createBlank,mt.isImage=gt,mt.additiveBlend=function(ht){ht.blendEquation(ht.FUNC_ADD),ht.blendFunc(ht.SRC_ALPHA,ht.ONE)},mt.parseColor=function(ht,ft){return D(ht,Array)?(ft||(ft=[]),ft[0]=ht[0],ft[1]=ht[1],ft[2]=ht[2],ht.length>3?ft[3]=ht[3]:ft[3]=1,ft):((ft=n.a.color.parse(ht||"#000",ft)||[0,0,0,0])[0]/=255,ft[1]/=255,ft[2]/=255,ft)},mt.directionFromAlphaBeta=function(ht,ft){var _t=ht/180*Math.PI+Math.PI/2,wt=-ft/180*Math.PI+Math.PI/2,Tt=[],It=Math.sin(_t);return Tt[0]=It*Math.cos(wt),Tt[1]=-Math.cos(_t),Tt[2]=It*Math.sin(wt),Tt},mt.getShadowResolution=function(ht){var ft=1024;switch(ht){case"low":ft=512;break;case"medium":break;case"high":ft=2048;break;case"ultra":ft=4096}return ft},mt.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"],mt.createShader=function(ht){ht==="ecgl.shadow"&&(ht="ecgl.displayShadow");var ft=i.a.source(ht+".vertex"),_t=i.a.source(ht+".fragment");ft||console.error("Vertex shader of '%s' not exits",ht),_t||console.error("Fragment shader of '%s' not exits",ht);var wt=new i.a(ft,_t);return wt.name=ht,wt},mt.createMaterial=function(ht,ft){D(ft,Array)||(ft=[ft]);var _t=mt.createShader(ht),wt=new s.a({shader:_t});return ft.forEach(function(Tt){typeof Tt=="string"&&wt.define(Tt)}),wt},mt.setMaterialFromModel=function(ht,ft,_t,wt){ft.autoUpdateTextureStatus=!1;var Tt=_t.getModel(ht+"Material"),It=Tt.get("detailTexture"),Mt=w.a.firstNotNull(Tt.get("textureTiling"),1),Lt=w.a.firstNotNull(Tt.get("textureOffset"),0);typeof Mt=="number"&&(Mt=[Mt,Mt]),typeof Lt=="number"&&(Lt=[Lt,Lt]);var kt=Mt[0]>1||Mt[1]>1?mt.Texture.REPEAT:mt.Texture.CLAMP_TO_EDGE,Rt={anisotropic:8,wrapS:kt,wrapT:kt};if(ht==="realistic"){var ut=Tt.get("roughness"),dt=Tt.get("metalness");dt!=null?isNaN(dt)&&(ft.setTextureImage("metalnessMap",dt,wt,Rt),dt=w.a.firstNotNull(Tt.get("metalnessAdjust"),.5)):dt=0,ut!=null?isNaN(ut)&&(ft.setTextureImage("roughnessMap",ut,wt,Rt),ut=w.a.firstNotNull(Tt.get("roughnessAdjust"),.5)):ut=.5;var xt=Tt.get("normalTexture");ft.setTextureImage("detailMap",It,wt,Rt),ft.setTextureImage("normalMap",xt,wt,Rt),ft.set({roughness:ut,metalness:dt,detailUvRepeat:Mt,detailUvOffset:Lt})}else if(ht==="lambert")ft.setTextureImage("detailMap",It,wt,Rt),ft.set({detailUvRepeat:Mt,detailUvOffset:Lt});else if(ht==="color")ft.setTextureImage("detailMap",It,wt,Rt),ft.set({detailUvRepeat:Mt,detailUvOffset:Lt});else if(ht==="hatching"){var St=Tt.get("hatchingTextures")||[];St.length<6&&console.error("Invalid hatchingTextures.");for(var At=0;At<6;At++)ft.setTextureImage("hatch"+(At+1),St[At],wt,{anisotropic:8,wrapS:mt.Texture.REPEAT,wrapT:mt.Texture.REPEAT});ft.set({detailUvRepeat:Mt,detailUvOffset:Lt})}},mt.updateVertexAnimation=function(ht,ft,_t,wt){var Tt=wt.get("animation"),It=wt.get("animationDurationUpdate"),Mt=wt.get("animationEasingUpdate"),Lt=_t.shadowDepthMaterial;if(Tt&&ft&&It>0&&ft.geometry.vertexCount===_t.geometry.vertexCount){_t.material.define("vertex","VERTEX_ANIMATION"),_t.ignorePreZ=!0,Lt&&Lt.define("vertex","VERTEX_ANIMATION");for(var kt=0;kt<ht.length;kt++)_t.geometry.attributes[ht[kt][0]].value=ft.geometry.attributes[ht[kt][1]].value;_t.geometry.dirty(),_t.__percent=0,_t.material.set("percent",0),_t.stopAnimation(),_t.animate().when(It,{__percent:1}).during(function(){_t.material.set("percent",_t.__percent),Lt&&Lt.set("percent",_t.__percent)}).done(function(){_t.ignorePreZ=!1,_t.material.undefine("vertex","VERTEX_ANIMATION"),Lt&&Lt.undefine("vertex","VERTEX_ANIMATION")}).start(Mt)}else _t.material.undefine("vertex","VERTEX_ANIMATION"),Lt&&Lt.undefine("vertex","VERTEX_ANIMATION")},g.a=mt},function(_,g,u){var c=u(0),l=u.n(c),e={firstNotNull:function(){for(var t=0,i=arguments.length;t<i;t++)if(arguments[t]!=null)return arguments[t]},queryDataIndex:function(t,i){return i.dataIndexInside!=null?i.dataIndexInside:i.dataIndex!=null?l.a.util.isArray(i.dataIndex)?l.a.util.map(i.dataIndex,function(s){return t.indexOfRawIndex(s)}):t.indexOfRawIndex(i.dataIndex):i.name!=null?l.a.util.isArray(i.name)?l.a.util.map(i.name,function(s){return t.indexOfName(s)}):t.indexOfName(i.name):void 0}};g.a=e},function(_,g,u){var c=u(12),l=function(r,n,h){r=r||0,n=n||0,h=h||0,this.array=c.a.fromValues(r,n,h),this._dirty=!0};l.prototype={constructor:l,add:function(r){return c.a.add(this.array,this.array,r.array),this._dirty=!0,this},set:function(r,n,h){return this.array[0]=r,this.array[1]=n,this.array[2]=h,this._dirty=!0,this},setArray:function(r){return this.array[0]=r[0],this.array[1]=r[1],this.array[2]=r[2],this._dirty=!0,this},clone:function(){return new l(this.x,this.y,this.z)},copy:function(r){return c.a.copy(this.array,r.array),this._dirty=!0,this},cross:function(r,n){return c.a.cross(this.array,r.array,n.array),this._dirty=!0,this},dist:function(r){return c.a.dist(this.array,r.array)},distance:function(r){return c.a.distance(this.array,r.array)},div:function(r){return c.a.div(this.array,this.array,r.array),this._dirty=!0,this},divide:function(r){return c.a.divide(this.array,this.array,r.array),this._dirty=!0,this},dot:function(r){return c.a.dot(this.array,r.array)},len:function(){return c.a.len(this.array)},length:function(){return c.a.length(this.array)},lerp:function(r,n,h){return c.a.lerp(this.array,r.array,n.array,h),this._dirty=!0,this},min:function(r){return c.a.min(this.array,this.array,r.array),this._dirty=!0,this},max:function(r){return c.a.max(this.array,this.array,r.array),this._dirty=!0,this},mul:function(r){return c.a.mul(this.array,this.array,r.array),this._dirty=!0,this},multiply:function(r){return c.a.multiply(this.array,this.array,r.array),this._dirty=!0,this},negate:function(){return c.a.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return c.a.normalize(this.array,this.array),this._dirty=!0,this},random:function(r){return c.a.random(this.array,r),this._dirty=!0,this},scale:function(r){return c.a.scale(this.array,this.array,r),this._dirty=!0,this},scaleAndAdd:function(r,n){return c.a.scaleAndAdd(this.array,this.array,r.array,n),this._dirty=!0,this},sqrDist:function(r){return c.a.sqrDist(this.array,r.array)},squaredDistance:function(r){return c.a.squaredDistance(this.array,r.array)},sqrLen:function(){return c.a.sqrLen(this.array)},squaredLength:function(){return c.a.squaredLength(this.array)},sub:function(r){return c.a.sub(this.array,this.array,r.array),this._dirty=!0,this},subtract:function(r){return c.a.subtract(this.array,this.array,r.array),this._dirty=!0,this},transformMat3:function(r){return c.a.transformMat3(this.array,this.array,r.array),this._dirty=!0,this},transformMat4:function(r){return c.a.transformMat4(this.array,this.array,r.array),this._dirty=!0,this},transformQuat:function(r){return c.a.transformQuat(this.array,this.array,r.array),this._dirty=!0,this},applyProjection:function(r){var n=this.array;if((r=r.array)[15]===0){var h=-1/n[2];n[0]=r[0]*n[0]*h,n[1]=r[5]*n[1]*h,n[2]=(r[10]*n[2]+r[14])*h}else n[0]=r[0]*n[0]+r[12],n[1]=r[5]*n[1]+r[13],n[2]=r[10]*n[2]+r[14];return this._dirty=!0,this},eulerFromQuat:function(r,n){l.eulerFromQuat(this,r,n)},eulerFromMat3:function(r,n){l.eulerFromMat3(this,r,n)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var e=Object.defineProperty;if(e){var t=l.prototype;e(t,"x",{get:function(){return this.array[0]},set:function(r){this.array[0]=r,this._dirty=!0}}),e(t,"y",{get:function(){return this.array[1]},set:function(r){this.array[1]=r,this._dirty=!0}}),e(t,"z",{get:function(){return this.array[2]},set:function(r){this.array[2]=r,this._dirty=!0}})}function i(r,n,h){return r<n?n:r>h?h:r}l.add=function(r,n,h){return c.a.add(r.array,n.array,h.array),r._dirty=!0,r},l.set=function(r,n,h,p){c.a.set(r.array,n,h,p),r._dirty=!0},l.copy=function(r,n){return c.a.copy(r.array,n.array),r._dirty=!0,r},l.cross=function(r,n,h){return c.a.cross(r.array,n.array,h.array),r._dirty=!0,r},l.distance=l.dist=function(r,n){return c.a.distance(r.array,n.array)},l.divide=l.div=function(r,n,h){return c.a.divide(r.array,n.array,h.array),r._dirty=!0,r},l.dot=function(r,n){return c.a.dot(r.array,n.array)},l.len=function(r){return c.a.length(r.array)},l.lerp=function(r,n,h,p){return c.a.lerp(r.array,n.array,h.array,p),r._dirty=!0,r},l.min=function(r,n,h){return c.a.min(r.array,n.array,h.array),r._dirty=!0,r},l.max=function(r,n,h){return c.a.max(r.array,n.array,h.array),r._dirty=!0,r},l.multiply=l.mul=function(r,n,h){return c.a.multiply(r.array,n.array,h.array),r._dirty=!0,r},l.negate=function(r,n){return c.a.negate(r.array,n.array),r._dirty=!0,r},l.normalize=function(r,n){return c.a.normalize(r.array,n.array),r._dirty=!0,r},l.random=function(r,n){return c.a.random(r.array,n),r._dirty=!0,r},l.scale=function(r,n,h){return c.a.scale(r.array,n.array,h),r._dirty=!0,r},l.scaleAndAdd=function(r,n,h,p){return c.a.scaleAndAdd(r.array,n.array,h.array,p),r._dirty=!0,r},l.squaredDistance=l.sqrDist=function(r,n){return c.a.sqrDist(r.array,n.array)},l.squaredLength=l.sqrLen=function(r){return c.a.sqrLen(r.array)},l.subtract=l.sub=function(r,n,h){return c.a.subtract(r.array,n.array,h.array),r._dirty=!0,r},l.transformMat3=function(r,n,h){return c.a.transformMat3(r.array,n.array,h.array),r._dirty=!0,r},l.transformMat4=function(r,n,h){return c.a.transformMat4(r.array,n.array,h.array),r._dirty=!0,r},l.transformQuat=function(r,n,h){return c.a.transformQuat(r.array,n.array,h.array),r._dirty=!0,r};var s=Math.atan2,a=Math.asin,o=Math.abs;l.eulerFromQuat=function(r,n,h){r._dirty=!0,n=n.array;var p=r.array,d=n[0],f=n[1],v=n[2],m=n[3],y=d*d,x=f*f,w=v*v,M=m*m;switch(h=(h||"XYZ").toUpperCase()){case"XYZ":p[0]=s(2*(d*m-f*v),M-y-x+w),p[1]=a(i(2*(d*v+f*m),-1,1)),p[2]=s(2*(v*m-d*f),M+y-x-w);break;case"YXZ":p[0]=a(i(2*(d*m-f*v),-1,1)),p[1]=s(2*(d*v+f*m),M-y-x+w),p[2]=s(2*(d*f+v*m),M-y+x-w);break;case"ZXY":p[0]=a(i(2*(d*m+f*v),-1,1)),p[1]=s(2*(f*m-v*d),M-y-x+w),p[2]=s(2*(v*m-d*f),M-y+x-w);break;case"ZYX":p[0]=s(2*(d*m+v*f),M-y-x+w),p[1]=a(i(2*(f*m-d*v),-1,1)),p[2]=s(2*(d*f+v*m),M+y-x-w);break;case"YZX":p[0]=s(2*(d*m-v*f),M-y+x-w),p[1]=s(2*(f*m-d*v),M+y-x-w),p[2]=a(i(2*(d*f+v*m),-1,1));break;case"XZY":p[0]=s(2*(d*m+f*v),M-y+x-w),p[1]=s(2*(d*v+f*m),M+y-x-w),p[2]=a(i(2*(v*m-d*f),-1,1));break;default:console.warn("Unkown order: "+h)}return r},l.eulerFromMat3=function(r,n,h){var p=n.array,d=p[0],f=p[3],v=p[6],m=p[1],y=p[4],x=p[7],w=p[2],M=p[5],C=p[8],A=r.array;switch(h=(h||"XYZ").toUpperCase()){case"XYZ":A[1]=a(i(v,-1,1)),o(v)<.99999?(A[0]=s(-x,C),A[2]=s(-f,d)):(A[0]=s(M,y),A[2]=0);break;case"YXZ":A[0]=a(-i(x,-1,1)),o(x)<.99999?(A[1]=s(v,C),A[2]=s(m,y)):(A[1]=s(-w,d),A[2]=0);break;case"ZXY":A[0]=a(i(M,-1,1)),o(M)<.99999?(A[1]=s(-w,C),A[2]=s(-f,y)):(A[1]=0,A[2]=s(m,d));break;case"ZYX":A[1]=a(-i(w,-1,1)),o(w)<.99999?(A[0]=s(M,C),A[2]=s(m,d)):(A[0]=0,A[2]=s(-f,y));break;case"YZX":A[2]=a(i(m,-1,1)),o(m)<.99999?(A[0]=s(-x,y),A[1]=s(-w,d)):(A[0]=0,A[1]=s(v,C));break;case"XZY":A[2]=a(-i(f,-1,1)),o(f)<.99999?(A[0]=s(M,y),A[1]=s(v,d)):(A[0]=s(-x,C),A[1]=0);break;default:console.warn("Unkown order: "+h)}return r._dirty=!0,r},Object.defineProperties(l,{POSITIVE_X:{get:function(){return new l(1,0,0)}},NEGATIVE_X:{get:function(){return new l(-1,0,0)}},POSITIVE_Y:{get:function(){return new l(0,1,0)}},NEGATIVE_Y:{get:function(){return new l(0,-1,0)}},POSITIVE_Z:{get:function(){return new l(0,0,1)}},NEGATIVE_Z:{get:function(){return new l(0,0,-1)}},UP:{get:function(){return new l(0,1,0)}},ZERO:{get:function(){return new l}}}),g.a=l},function(_,g,u){var c=u(8),l=u(11),e=u(57),t=c.a.extend({width:512,height:512,type:l.a.UNSIGNED_BYTE,format:l.a.RGBA,wrapS:l.a.REPEAT,wrapT:l.a.REPEAT,minFilter:l.a.LINEAR_MIPMAP_LINEAR,magFilter:l.a.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new e.a},{getWebGLTexture:function(i){var s=i.gl,a=this._cache;return a.use(i.__uid__),a.miss("webgl_texture")&&a.put("webgl_texture",s.createTexture()),this.dynamic?this.update(i):a.isDirty()&&(this.update(i),a.fresh()),a.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(i){},updateCommon:function(i){var s=i.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,this.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),this.format===l.a.DEPTH_COMPONENT&&(this.useMipmap=!1);var a=i.getGLExtension("EXT_sRGB");this.format!==t.SRGB||a||(this.format=t.RGB),this.format!==t.SRGB_ALPHA||a||(this.format=t.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?l.a.CLAMP_TO_EDGE:this.wrapS},getAvailableWrapT:function(){return this.NPOT?l.a.CLAMP_TO_EDGE:this.wrapT},getAvailableMinFilter:function(){var i=this.minFilter;return this.NPOT||!this.useMipmap?i===l.a.NEAREST_MIPMAP_NEAREST||i===l.a.NEAREST_MIPMAP_LINEAR?l.a.NEAREST:i===l.a.LINEAR_MIPMAP_LINEAR||i===l.a.LINEAR_MIPMAP_NEAREST?l.a.LINEAR:i:i},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(i){--i;for(var s=1;s<32;s<<=1)i|=i>>s;return i+1},dispose:function(i){var s=this._cache;s.use(i.__uid__);var a=s.get("webgl_texture");a&&i.gl.deleteTexture(a),s.deleteContext(i.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(i){this._width=i}}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(i){this._height=i}}),t.BYTE=l.a.BYTE,t.UNSIGNED_BYTE=l.a.UNSIGNED_BYTE,t.SHORT=l.a.SHORT,t.UNSIGNED_SHORT=l.a.UNSIGNED_SHORT,t.INT=l.a.INT,t.UNSIGNED_INT=l.a.UNSIGNED_INT,t.FLOAT=l.a.FLOAT,t.HALF_FLOAT=36193,t.UNSIGNED_INT_24_8_WEBGL=34042,t.DEPTH_COMPONENT=l.a.DEPTH_COMPONENT,t.DEPTH_STENCIL=l.a.DEPTH_STENCIL,t.ALPHA=l.a.ALPHA,t.RGB=l.a.RGB,t.RGBA=l.a.RGBA,t.LUMINANCE=l.a.LUMINANCE,t.LUMINANCE_ALPHA=l.a.LUMINANCE_ALPHA,t.SRGB=35904,t.SRGB_ALPHA=35906,t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,t.COMPRESSED_RGB_ETC1_WEBGL=36196,t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840,t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842,t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841,t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843,t.COMPRESSED_RGB_ATC_WEBGL=35986,t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987,t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798,t.NEAREST=l.a.NEAREST,t.LINEAR=l.a.LINEAR,t.NEAREST_MIPMAP_NEAREST=l.a.NEAREST_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST=l.a.LINEAR_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR=l.a.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_LINEAR=l.a.LINEAR_MIPMAP_LINEAR,t.REPEAT=l.a.REPEAT,t.CLAMP_TO_EDGE=l.a.CLAMP_TO_EDGE,t.MIRRORED_REPEAT=l.a.MIRRORED_REPEAT,g.a=t},function(_,g,u){var c=u(4),l=u(11),e=u(13),t=u(72).a.isPowerOfTwo;function i(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))}var s=c.a.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(a){var o=a.gl;o.bindTexture(o.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(a);var r=this.format,n=this.type,h=!(!this.convertToPOT||this.mipmaps.length||!this.image||this.wrapS!==c.a.REPEAT&&this.wrapT!==c.a.REPEAT||!this.NPOT);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,h?this.wrapS:this.getAvailableWrapS()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,h?this.wrapT:this.getAvailableWrapT()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,h?this.magFilter:this.getAvailableMagFilter()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,h?this.minFilter:this.getAvailableMinFilter());var p=a.getGLExtension("EXT_texture_filter_anisotropic");if(p&&this.anisotropic>1&&o.texParameterf(o.TEXTURE_2D,p.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),n===36193&&(a.getGLExtension("OES_texture_half_float")||(n=l.a.FLOAT)),this.mipmaps.length)for(var d=this.width,f=this.height,v=0;v<this.mipmaps.length;v++){var m=this.mipmaps[v];this._updateTextureData(o,m,v,d,f,r,n,!1),d/=2,f/=2}else this._updateTextureData(o,this,0,this.width,this.height,r,n,h),!this.useMipmap||this.NPOT&&!h||o.generateMipmap(o.TEXTURE_2D);o.bindTexture(o.TEXTURE_2D,null)},_updateTextureData:function(a,o,r,n,h,p,d,f){if(o.image){var v=o.image;f&&(this._potCanvas=function(m,y){var x=i(m.width),w=i(m.height);return(y=y||document.createElement("canvas")).width=x,y.height=w,y.getContext("2d").drawImage(m.image,0,0,x,w),y}(this,this._potCanvas),v=this._potCanvas),a.texImage2D(a.TEXTURE_2D,r,p,p,d,v)}else p<=c.a.COMPRESSED_RGBA_S3TC_DXT5_EXT&&p>=c.a.COMPRESSED_RGB_S3TC_DXT1_EXT||p===c.a.COMPRESSED_RGB_ETC1_WEBGL||p>=c.a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG&&p<=c.a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG||p===c.a.COMPRESSED_RGB_ATC_WEBGL&&p===c.a.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL&&p===c.a.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL?a.compressedTexImage2D(a.TEXTURE_2D,r,p,n,h,0,o.pixels):a.texImage2D(a.TEXTURE_2D,r,p,n,h,0,p,d,o.pixels)},generateMipmap:function(a){var o=a.gl;this.useMipmap&&!this.NPOT&&(o.bindTexture(o.TEXTURE_2D,this._cache.get("webgl_texture")),o.generateMipmap(o.TEXTURE_2D))},isPowerOfTwo:function(){return t(this.width)&&t(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!(!this.width||!this.height)},bind:function(a){a.gl.bindTexture(a.gl.TEXTURE_2D,this.getWebGLTexture(a))},unbind:function(a){a.gl.bindTexture(a.gl.TEXTURE_2D,null)},load:function(a,o){var r=e.a.createImage();o&&(r.crossOrigin=o);var n=this;return r.onload=function(){n.dirty(),n.trigger("success",n)},r.onerror=function(){n.trigger("error",n)},r.src=a,this.image=r,this}});Object.defineProperty(s.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(a){this.image?console.warn("Texture from image can't set width"):(this._width!==a&&this.dirty(),this._width=a)}}),Object.defineProperty(s.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(a){this.image?console.warn("Texture from image can't set height"):(this._height!==a&&this.dirty(),this._height=a)}}),g.a=s},function(_,g,u){var c=u(160);g.a=c.a},function(_,g,u){var c,l,e,t,i=u(21),s=u(12),a=u(55),o=u(34),r=u(3),n=function(){this._axisX=new r.a,this._axisY=new r.a,this._axisZ=new r.a,this.array=i.a.create(),this._dirty=!0};n.prototype={constructor:n,setArray:function(d){for(var f=0;f<this.array.length;f++)this.array[f]=d[f];return this._dirty=!0,this},adjoint:function(){return i.a.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new n().copy(this)},copy:function(d){return i.a.copy(this.array,d.array),this._dirty=!0,this},determinant:function(){return i.a.determinant(this.array)},fromQuat:function(d){return i.a.fromQuat(this.array,d.array),this._dirty=!0,this},fromRotationTranslation:function(d,f){return i.a.fromRotationTranslation(this.array,d.array,f.array),this._dirty=!0,this},fromMat2d:function(d){return n.fromMat2d(this,d),this},frustum:function(d,f,v,m,y,x){return i.a.frustum(this.array,d,f,v,m,y,x),this._dirty=!0,this},identity:function(){return i.a.identity(this.array),this._dirty=!0,this},invert:function(){return i.a.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(d,f,v){return i.a.lookAt(this.array,d.array,f.array,v.array),this._dirty=!0,this},mul:function(d){return i.a.mul(this.array,this.array,d.array),this._dirty=!0,this},mulLeft:function(d){return i.a.mul(this.array,d.array,this.array),this._dirty=!0,this},multiply:function(d){return i.a.multiply(this.array,this.array,d.array),this._dirty=!0,this},multiplyLeft:function(d){return i.a.multiply(this.array,d.array,this.array),this._dirty=!0,this},ortho:function(d,f,v,m,y,x){return i.a.ortho(this.array,d,f,v,m,y,x),this._dirty=!0,this},perspective:function(d,f,v,m){return i.a.perspective(this.array,d,f,v,m),this._dirty=!0,this},rotate:function(d,f){return i.a.rotate(this.array,this.array,d,f.array),this._dirty=!0,this},rotateX:function(d){return i.a.rotateX(this.array,this.array,d),this._dirty=!0,this},rotateY:function(d){return i.a.rotateY(this.array,this.array,d),this._dirty=!0,this},rotateZ:function(d){return i.a.rotateZ(this.array,this.array,d),this._dirty=!0,this},scale:function(d){return i.a.scale(this.array,this.array,d.array),this._dirty=!0,this},translate:function(d){return i.a.translate(this.array,this.array,d.array),this._dirty=!0,this},transpose:function(){return i.a.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:(c=s.a.create(),l=s.a.create(),e=s.a.create(),t=o.a.create(),function(d,f,v){var m=this.array;s.a.set(c,m[0],m[1],m[2]),s.a.set(l,m[4],m[5],m[6]),s.a.set(e,m[8],m[9],m[10]);var y=s.a.length(c),x=s.a.length(l),w=s.a.length(e);this.determinant()<0&&(y=-y),d&&d.set(y,x,w),v.set(m[12],m[13],m[14]),o.a.fromMat4(t,m),t[0]/=y,t[1]/=y,t[2]/=y,t[3]/=x,t[4]/=x,t[5]/=x,t[6]/=w,t[7]/=w,t[8]/=w,a.a.fromMat3(f.array,t),a.a.normalize(f.array,f.array),f._dirty=!0,v._dirty=!0}),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var h=Object.defineProperty;if(h){var p=n.prototype;h(p,"z",{get:function(){var d=this.array;return this._axisZ.set(d[8],d[9],d[10]),this._axisZ},set:function(d){var f=this.array;d=d.array,f[8]=d[0],f[9]=d[1],f[10]=d[2],this._dirty=!0}}),h(p,"y",{get:function(){var d=this.array;return this._axisY.set(d[4],d[5],d[6]),this._axisY},set:function(d){var f=this.array;d=d.array,f[4]=d[0],f[5]=d[1],f[6]=d[2],this._dirty=!0}}),h(p,"x",{get:function(){var d=this.array;return this._axisX.set(d[0],d[1],d[2]),this._axisX},set:function(d){var f=this.array;d=d.array,f[0]=d[0],f[1]=d[1],f[2]=d[2],this._dirty=!0}})}n.adjoint=function(d,f){return i.a.adjoint(d.array,f.array),d._dirty=!0,d},n.copy=function(d,f){return i.a.copy(d.array,f.array),d._dirty=!0,d},n.determinant=function(d){return i.a.determinant(d.array)},n.identity=function(d){return i.a.identity(d.array),d._dirty=!0,d},n.ortho=function(d,f,v,m,y,x,w){return i.a.ortho(d.array,f,v,m,y,x,w),d._dirty=!0,d},n.perspective=function(d,f,v,m,y){return i.a.perspective(d.array,f,v,m,y),d._dirty=!0,d},n.lookAt=function(d,f,v,m){return i.a.lookAt(d.array,f.array,v.array,m.array),d._dirty=!0,d},n.invert=function(d,f){return i.a.invert(d.array,f.array),d._dirty=!0,d},n.multiply=n.mul=function(d,f,v){return i.a.mul(d.array,f.array,v.array),d._dirty=!0,d},n.fromQuat=function(d,f){return i.a.fromQuat(d.array,f.array),d._dirty=!0,d},n.fromRotationTranslation=function(d,f,v){return i.a.fromRotationTranslation(d.array,f.array,v.array),d._dirty=!0,d},n.fromMat2d=function(d,f){return d._dirty=!0,f=f.array,(d=d.array)[0]=f[0],d[4]=f[2],d[12]=f[4],d[1]=f[1],d[5]=f[3],d[13]=f[5],d},n.rotate=function(d,f,v,m){return i.a.rotate(d.array,f.array,v,m.array),d._dirty=!0,d},n.rotateX=function(d,f,v){return i.a.rotateX(d.array,f.array,v),d._dirty=!0,d},n.rotateY=function(d,f,v){return i.a.rotateY(d.array,f.array,v),d._dirty=!0,d},n.rotateZ=function(d,f,v){return i.a.rotateZ(d.array,f.array,v),d._dirty=!0,d},n.scale=function(d,f,v){return i.a.scale(d.array,f.array,v.array),d._dirty=!0,d},n.transpose=function(d,f){return i.a.transpose(d.array,f.array),d._dirty=!0,d},n.translate=function(d,f,v){return i.a.translate(d.array,f.array,v.array),d._dirty=!0,d},g.a=n},function(_,g,u){var c=u(109),l=u(53),e=u(23),t=function(){this.__uid__=e.a.genGUID()};t.__initializers__=[function(i){e.a.extend(this,i)}],e.a.extend(t,c.a),e.a.extend(t.prototype,l.a),g.a=t},function(_,g,u){var c=u(23),l=u(13),e=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,t=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,i=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,s={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function a(C){for(var A=[],P=0;P<C;P++)A[P]=0;return A}var o={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return a(2)},vec3:function(){return a(3)},vec4:function(){return a(4)},ivec2:function(){return a(2)},ivec3:function(){return a(3)},ivec4:function(){return a(4)},mat2:function(){return a(4)},mat3:function(){return a(9)},mat4:function(){return a(16)},array:function(){return[]}},r=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],n=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME","LOG_DEPTH_BUFFER_FC"],h=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],p={vec4:4,vec3:3,vec2:2,float:1},d={},f={};function v(C){return C.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function m(){console.error("Wrong uniform/attributes syntax")}function y(C,A){for(var P=/[,=\(\):]/,b=A.replace(/:\s*\[\s*(.*)\s*\]/g,"="+C+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),N=[],B=0;B<b.length;B++)b[B].match(P)?N.push(b[B].charAt(0),b[B].slice(1)):N.push(b[B]);var z,F=0,V={},H=null;function U(Y){Y||m();var J=Y.match(/\[(.*?)\]/);z=Y.replace(/\[(.*?)\]/,""),V[z]={},J&&(V[z].isArray=!0,V[z].arraySize=J[1])}for(U((b=N)[0]),B=1;B<b.length;B++){var j=b[B];if(j)if(j!=="=")if(j!==":")if(j!==",")if(j!==")")if(j!=="(")if(j.indexOf("vec")>=0){if(F!==1&&F!==4){m();break}F=2,H=[]}else if(F!==1)if(F!==4)U(j),F=0;else{var X=j;r.indexOf(X)>=0||n.indexOf(X)>=0||h.indexOf(X)>=0?V[z].semantic=X:X==="ignore"||X==="unconfigurable"?V[z].ignore=!0:V[z].value=C==="bool"?X==="true":parseFloat(X)}else V[z].value=C==="bool"?j==="true":parseFloat(j),H=null;else{if(F!==2){m();break}if(!D(H,Array)){m();break}H.push(+b[++B])}else V[z].value=new l.a.Float32Array(H),H=null,F=5;else if(F===2){if(!D(H,Array)){m();break}H.push(+b[++B])}else F=5;else F=4;else{if(F!==0&&F!==3){m();break}F=1}}return V}function x(C,A){E(C)==="object"&&(A=C.fragment,C=C.vertex),C=v(C),A=v(A),this._shaderID=function(P,b){var N="vertex:"+P+"fragment:"+b;if(d[N])return d[N];var B=c.a.genGUID();return d[N]=B,f[B]={vertex:P,fragment:b},B}(C,A),this._vertexCode=x.parseImport(C),this._fragmentCode=x.parseImport(A),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}x.prototype={constructor:x,createUniforms:function(){var C={};for(var A in this.uniformTemplates){var P=this.uniformTemplates[A];C[A]={type:P.type,value:P.value()}}return C},_parseImport:function(){this._vertexCode=x.parseImport(this.vertex),this._fragmentCode=x.parseImport(this.fragment)},_addSemanticUniform:function(C,A,P){if(r.indexOf(P)>=0)this.attributeSemantics[P]={symbol:C,type:A};else if(h.indexOf(P)>=0){var b=!1,N=P;P.match(/TRANSPOSE$/)&&(b=!0,N=P.slice(0,-9)),this.matrixSemantics[P]={symbol:C,type:A,isTranspose:b,semanticNoTranspose:N}}else n.indexOf(P)>=0&&(this.uniformSemantics[P]={symbol:C,type:A})},_addMaterialUniform:function(C,A,P,b,N,B){B[C]={type:P,value:N?o.array:b||o[A],semantic:null}},_parseUniforms:function(){var C={},A=this;function P(N){return N!=null?function(){return N}:null}function b(N,B,z){var F=y(B,z),V=[];for(var H in F){var U=F[H],j=U.semantic,X=H,Y=s[B],J=P(F[H].value);F[H].isArray&&(X+="["+F[H].arraySize+"]",Y+="v"),V.push(X),A._uniformList.push(H),U.ignore||(B!=="sampler2D"&&B!=="samplerCube"||(A.textures[H]={shaderType:"fragment",type:B}),j?A._addSemanticUniform(H,Y,j):A._addMaterialUniform(H,B,Y,J,F[H].isArray,C))}return V.length>0?"uniform "+B+" "+V.join(",")+`;
`:""}this._uniformList=[],this._vertexCode=this._vertexCode.replace(e,b),this._fragmentCode=this._fragmentCode.replace(e,b),A.matrixSemanticKeys=Object.keys(this.matrixSemantics),this.uniformTemplates=C},_parseAttributes:function(){var C={},A=this;this._vertexCode=this._vertexCode.replace(t,function(P,b,N){var B=y(b,N),z=p[b]||1,F=[];for(var V in B){var H=B[V].semantic;if(C[V]={type:"float",size:z,semantic:H||null},H){if(r.indexOf(H)<0)throw new Error('Unkown semantic "'+H+'"');A.attributeSemantics[H]={symbol:V,type:b}}F.push(V)}return"attribute "+b+" "+F.join(",")+`;
`}),this.attributes=C},_parseDefines:function(){var C=this;function A(P,b,N){var B=C.fragmentDefines;return B[b]||(B[b]=N!=="false"&&(N==="true"||(N?isNaN(parseFloat(N))?N.trim():parseFloat(N):null))),""}this._vertexCode=this._vertexCode.replace(i,A),this._fragmentCode=this._fragmentCode.replace(i,A)},clone:function(){var C=f[this._shaderID];return new x(C.vertex,C.fragment)}},Object.defineProperty&&(Object.defineProperty(x.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(x.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(x.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(x.prototype,"uniforms",{get:function(){return this._uniformList}}));var w=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;x.parseImport=function(C){return C.replace(w,function(A,P,b){return(A=x.source(b))?x.parseImport(A):(console.error('Shader chunk "'+b+'" not existed in library'),"")})};var M=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;x.import=function(C){C.replace(M,function(A,P,b,N){if(N=N.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"")){for(var B,z=b.split("."),F=x.codes,V=0;V<z.length-1;)F[B=z[V++]]||(F[B]={}),F=F[B];F[B=z[V]]=N}return N})},x.codes={},x.source=function(C){for(var A=C.split("."),P=x.codes,b=0;P&&b<A.length;)P=P[A[b++]];return typeof P!="string"?(console.error('Shader "'+C+'" not existed in library'),""):P},g.a=x},function(_,g,u){var c=u(8),l=u(4),e=(u(27),u(11)),t=u(57),i="framebuffer",s="renderbuffer",a="renderbuffer_width",o="renderbuffer_height",r="renderbuffer_attached",n="depthtexture_attached",h=e.a.FRAMEBUFFER,p=e.a.RENDERBUFFER,d=e.a.DEPTH_ATTACHMENT,f=e.a.COLOR_ATTACHMENT0,v=c.a.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new t.a,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(m){if(m.__currentFrameBuffer){if(m.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}m.__currentFrameBuffer=this;var y=m.gl;y.bindFramebuffer(h,this._getFrameBufferGL(m)),this._boundRenderer=m;var x=this._cache;x.put("viewport",m.viewport);var w,M,C=!1;for(var A in this._textures){C=!0;var P=this._textures[A];P&&(w=P.texture.width,M=P.texture.height,this._doAttach(m,P.texture,A,P.target))}this._width=w,this._height=M,!C&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?m.setViewport(this.viewport):m.setViewport(0,0,w,M,1);var b=x.get("attached_textures");if(b){for(var A in b)if(!this._textures[A]){var N=b[A];this._doDetach(y,A,N)}}if(!x.get(n)&&this.depthBuffer){x.miss(s)&&x.put(s,y.createRenderbuffer());var B=x.get(s);w===x.get(a)&&M===x.get(o)||(y.bindRenderbuffer(p,B),y.renderbufferStorage(p,y.DEPTH_COMPONENT16,w,M),x.put(a,w),x.put(o,M),y.bindRenderbuffer(p,null)),x.get(r)||(y.framebufferRenderbuffer(h,d,p,B),x.put(r,!0))}},unbind:function(m){m.__currentFrameBuffer=null,m.gl.bindFramebuffer(h,null),this._boundRenderer=null,this._cache.use(m.__uid__);var y=this._cache.get("viewport");y&&m.setViewport(y),this.updateMipmap(m)},updateMipmap:function(m){var y=m.gl;for(var x in this._textures){var w=this._textures[x];if(w){var M=w.texture;if(!M.NPOT&&M.useMipmap&&M.minFilter===l.a.LINEAR_MIPMAP_LINEAR){var C=M.textureType==="textureCube"?e.a.TEXTURE_CUBE_MAP:e.a.TEXTURE_2D;y.bindTexture(C,M.getWebGLTexture(m)),y.generateMipmap(C),y.bindTexture(C,null)}}}},checkStatus:function(m){return m.checkFramebufferStatus(h)},_getFrameBufferGL:function(m){var y=this._cache;return y.use(m.__uid__),y.miss(i)&&y.put(i,m.gl.createFramebuffer()),y.get(i)},attach:function(m,y,x){if(!m.width)throw new Error("The texture attached to color buffer is not a valid.");y=y||f,x=x||e.a.TEXTURE_2D;var w,M=this._boundRenderer;if(M&&M.gl){var C=this._cache;C.use(M.__uid__),w=C.get("attached_textures")}var A=this._textures[y];if(!A||A.target!==x||A.texture!==m||!w||w[y]==null){var P=!0;M&&(P=this._doAttach(M,m,y,x),this.viewport||M.setViewport(0,0,m.width,m.height,1)),P&&(this._textures[y]=this._textures[y]||{},this._textures[y].texture=m,this._textures[y].target=x)}},_doAttach:function(m,y,x,w){var M=m.gl,C=y.getWebGLTexture(m),A=this._cache.get("attached_textures");if(A&&A[x]){var P=A[x];if(P.texture===y&&P.target===w)return}var b=!0;if(((x=+x)===d||x===e.a.DEPTH_STENCIL_ATTACHMENT)&&(m.getGLExtension("WEBGL_depth_texture")||console.error("Depth texture is not supported by the browser"),y.format!==e.a.DEPTH_COMPONENT&&y.format!==e.a.DEPTH_STENCIL&&(console.error("The texture attached to depth buffer is not a valid."),b=!1),b)){var N=this._cache.get(s);N&&(M.framebufferRenderbuffer(h,d,p,null),M.deleteRenderbuffer(N),this._cache.put(s,!1)),this._cache.put(r,!1),this._cache.put(n,!0)}return M.framebufferTexture2D(h,x,w,C,0),A||(A={},this._cache.put("attached_textures",A)),A[x]=A[x]||{},A[x].texture=y,A[x].target=w,b},_doDetach:function(m,y,x){m.framebufferTexture2D(h,y,x,null,0);var w=this._cache.get("attached_textures");w&&w[y]&&(w[y]=null),y!==d&&y!==e.a.DEPTH_STENCIL_ATTACHMENT||this._cache.put(n,!1)},detach:function(m,y){this._textures[m]=null,this._boundRenderer&&(this._cache.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,m,y))},dispose:function(m){var y=m.gl,x=this._cache;x.use(m.__uid__);var w=x.get(s);w&&y.deleteRenderbuffer(w);var M=x.get(i);M&&y.deleteFramebuffer(M),x.deleteContext(m.__uid__),this._textures={}}});v.DEPTH_ATTACHMENT=d,v.COLOR_ATTACHMENT0=f,v.STENCIL_ATTACHMENT=e.a.STENCIL_ATTACHMENT,v.DEPTH_STENCIL_ATTACHMENT=e.a.DEPTH_STENCIL_ATTACHMENT,g.a=v},function(_,g,u){g.a={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444}},function(_,g,u){var c,l=u(20),e={create:function(){var t=new l.a(3);return t[0]=0,t[1]=0,t[2]=0,t},clone:function(t){var i=new l.a(3);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i},fromValues:function(t,i,s){var a=new l.a(3);return a[0]=t,a[1]=i,a[2]=s,a},copy:function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t},set:function(t,i,s,a){return t[0]=i,t[1]=s,t[2]=a,t},add:function(t,i,s){return t[0]=i[0]+s[0],t[1]=i[1]+s[1],t[2]=i[2]+s[2],t},subtract:function(t,i,s){return t[0]=i[0]-s[0],t[1]=i[1]-s[1],t[2]=i[2]-s[2],t}};e.sub=e.subtract,e.multiply=function(t,i,s){return t[0]=i[0]*s[0],t[1]=i[1]*s[1],t[2]=i[2]*s[2],t},e.mul=e.multiply,e.divide=function(t,i,s){return t[0]=i[0]/s[0],t[1]=i[1]/s[1],t[2]=i[2]/s[2],t},e.div=e.divide,e.min=function(t,i,s){return t[0]=Math.min(i[0],s[0]),t[1]=Math.min(i[1],s[1]),t[2]=Math.min(i[2],s[2]),t},e.max=function(t,i,s){return t[0]=Math.max(i[0],s[0]),t[1]=Math.max(i[1],s[1]),t[2]=Math.max(i[2],s[2]),t},e.scale=function(t,i,s){return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t},e.scaleAndAdd=function(t,i,s,a){return t[0]=i[0]+s[0]*a,t[1]=i[1]+s[1]*a,t[2]=i[2]+s[2]*a,t},e.distance=function(t,i){var s=i[0]-t[0],a=i[1]-t[1],o=i[2]-t[2];return Math.sqrt(s*s+a*a+o*o)},e.dist=e.distance,e.squaredDistance=function(t,i){var s=i[0]-t[0],a=i[1]-t[1],o=i[2]-t[2];return s*s+a*a+o*o},e.sqrDist=e.squaredDistance,e.length=function(t){var i=t[0],s=t[1],a=t[2];return Math.sqrt(i*i+s*s+a*a)},e.len=e.length,e.squaredLength=function(t){var i=t[0],s=t[1],a=t[2];return i*i+s*s+a*a},e.sqrLen=e.squaredLength,e.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t},e.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],t},e.normalize=function(t,i){var s=i[0],a=i[1],o=i[2],r=s*s+a*a+o*o;return r>0&&(r=1/Math.sqrt(r),t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r),t},e.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]},e.cross=function(t,i,s){var a=i[0],o=i[1],r=i[2],n=s[0],h=s[1],p=s[2];return t[0]=o*p-r*h,t[1]=r*n-a*p,t[2]=a*h-o*n,t},e.lerp=function(t,i,s,a){var o=i[0],r=i[1],n=i[2];return t[0]=o+a*(s[0]-o),t[1]=r+a*(s[1]-r),t[2]=n+a*(s[2]-n),t},e.random=function(t,i){i=i||1;var s=2*Object(l.c)()*Math.PI,a=2*Object(l.c)()-1,o=Math.sqrt(1-a*a)*i;return t[0]=Math.cos(s)*o,t[1]=Math.sin(s)*o,t[2]=a*i,t},e.transformMat4=function(t,i,s){var a=i[0],o=i[1],r=i[2],n=s[3]*a+s[7]*o+s[11]*r+s[15];return n=n||1,t[0]=(s[0]*a+s[4]*o+s[8]*r+s[12])/n,t[1]=(s[1]*a+s[5]*o+s[9]*r+s[13])/n,t[2]=(s[2]*a+s[6]*o+s[10]*r+s[14])/n,t},e.transformMat3=function(t,i,s){var a=i[0],o=i[1],r=i[2];return t[0]=a*s[0]+o*s[3]+r*s[6],t[1]=a*s[1]+o*s[4]+r*s[7],t[2]=a*s[2]+o*s[5]+r*s[8],t},e.transformQuat=function(t,i,s){var a=i[0],o=i[1],r=i[2],n=s[0],h=s[1],p=s[2],d=s[3],f=d*a+h*r-p*o,v=d*o+p*a-n*r,m=d*r+n*o-h*a,y=-n*a-h*o-p*r;return t[0]=f*d+y*-n+v*-p-m*-h,t[1]=v*d+y*-h+m*-n-f*-p,t[2]=m*d+y*-p+f*-h-v*-n,t},e.rotateX=function(t,i,s,a){var o=[],r=[];return o[0]=i[0]-s[0],o[1]=i[1]-s[1],o[2]=i[2]-s[2],r[0]=o[0],r[1]=o[1]*Math.cos(a)-o[2]*Math.sin(a),r[2]=o[1]*Math.sin(a)+o[2]*Math.cos(a),t[0]=r[0]+s[0],t[1]=r[1]+s[1],t[2]=r[2]+s[2],t},e.rotateY=function(t,i,s,a){var o=[],r=[];return o[0]=i[0]-s[0],o[1]=i[1]-s[1],o[2]=i[2]-s[2],r[0]=o[2]*Math.sin(a)+o[0]*Math.cos(a),r[1]=o[1],r[2]=o[2]*Math.cos(a)-o[0]*Math.sin(a),t[0]=r[0]+s[0],t[1]=r[1]+s[1],t[2]=r[2]+s[2],t},e.rotateZ=function(t,i,s,a){var o=[],r=[];return o[0]=i[0]-s[0],o[1]=i[1]-s[1],o[2]=i[2]-s[2],r[0]=o[0]*Math.cos(a)-o[1]*Math.sin(a),r[1]=o[0]*Math.sin(a)+o[1]*Math.cos(a),r[2]=o[2],t[0]=r[0]+s[0],t[1]=r[1]+s[1],t[2]=r[2]+s[2],t},e.forEach=(c=e.create(),function(t,i,s,a,o,r){var n,h;for(i||(i=3),s||(s=0),h=a?Math.min(a*i+s,t.length):t.length,n=s;n<h;n+=i)c[0]=t[n],c[1]=t[n+1],c[2]=t[n+2],o(c,c,r),t[n]=c[0],t[n+1]=c[1],t[n+2]=c[2];return t}),e.angle=function(t,i){var s=e.fromValues(t[0],t[1],t[2]),a=e.fromValues(i[0],i[1],i[2]);e.normalize(s,s),e.normalize(a,a);var o=e.dot(s,a);return o>1?0:Math.acos(o)},g.a=e},function(_,g,u){(function(c){var l,e=u(111),t={supportWebGL:function(){if(l==null)try{var s=document.createElement("canvas");if(!s.getContext("webgl")&&!s.getContext("experimental-webgl"))throw new Error}catch{l=!1}return l}};t.Int8Array=typeof Int8Array>"u"?Array:Int8Array,t.Uint8Array=typeof Uint8Array>"u"?Array:Uint8Array,t.Uint16Array=typeof Uint16Array>"u"?Array:Uint16Array,t.Uint32Array=typeof Uint32Array>"u"?Array:Uint32Array,t.Int16Array=typeof Int16Array>"u"?Array:Int16Array,t.Float32Array=typeof Float32Array>"u"?Array:Float32Array,t.Float64Array=typeof Float64Array>"u"?Array:Float64Array;var i={};typeof window<"u"?i=window:c!==void 0&&(i=c),t.requestAnimationFrame=i.requestAnimationFrame||i.msRequestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||function(s){setTimeout(s,16)},t.createCanvas=function(){return document.createElement("canvas")},t.createImage=function(){return new i.Image},t.request={get:e.a.get},t.addEventListener=function(s,a,o,r){s.addEventListener(a,o,r)},t.removeEventListener=function(s,a,o){s.removeEventListener(a,o)},g.a=t}).call(g,u(67))},function(_,g,u){var c=u(13),l=u(12),e=u(21),t=u(18),i=u(117),s=l.a.create,a=l.a.add,o=l.a.set,r=i.a.Attribute,n=i.a.extend(function(){return{attributes:{position:new r("position","float",3,"POSITION"),texcoord0:new r("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new r("texcoord1","float",2,"TEXCOORD_1"),normal:new r("normal","float",3,"NORMAL"),tangent:new r("tangent","float",4,"TANGENT"),color:new r("color","float",4,"COLOR"),weight:new r("weight","float",3,"WEIGHT"),joint:new r("joint","float",4,"JOINT"),barycentric:new r("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var h=this.boundingBox;h||(h=this.boundingBox=new t.a);var p=this.attributes.position.value;if(p&&p.length){var d=h.min,f=h.max,v=d.array,m=f.array;l.a.set(v,p[0],p[1],p[2]),l.a.set(m,p[0],p[1],p[2]);for(var y=3;y<p.length;){var x=p[y++],w=p[y++],M=p[y++];x<v[0]&&(v[0]=x),w<v[1]&&(v[1]=w),M<v[2]&&(v[2]=M),x>m[0]&&(m[0]=x),w>m[1]&&(m[1]=w),M>m[2]&&(m[2]=M)}d._dirty=!0,f._dirty=!0}},generateVertexNormals:function(){if(this.vertexCount){var h=this.indices,p=this.attributes,d=p.position.value,f=p.normal.value;if(f&&f.length===d.length)for(var v=0;v<f.length;v++)f[v]=0;else f=p.normal.value=new c.a.Float32Array(d.length);for(var m,y,x,w=s(),M=s(),C=s(),A=s(),P=s(),b=s(),N=h?h.length:this.vertexCount,B=0;B<N;)for(h?(m=h[B++],y=h[B++],x=h[B++]):(m=B++,y=B++,x=B++),o(w,d[3*m],d[3*m+1],d[3*m+2]),o(M,d[3*y],d[3*y+1],d[3*y+2]),o(C,d[3*x],d[3*x+1],d[3*x+2]),l.a.sub(A,w,M),l.a.sub(P,M,C),l.a.cross(b,A,P),v=0;v<3;v++)f[3*m+v]=f[3*m+v]+b[v],f[3*y+v]=f[3*y+v]+b[v],f[3*x+v]=f[3*x+v]+b[v];for(v=0;v<f.length;)o(b,f[v],f[v+1],f[v+2]),l.a.normalize(b,b),f[v++]=b[0],f[v++]=b[1],f[v++]=b[2];this.dirty()}},generateFaceNormals:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var h=this.indices,p=this.attributes,d=p.position.value,f=p.normal.value,v=s(),m=s(),y=s(),x=s(),w=s(),M=s();f||(f=p.normal.value=new Float32Array(d.length));for(var C,A,P,b=h?h.length:this.vertexCount,N=0;N<b;){h?(C=h[N++],A=h[N++],P=h[N++]):(C=N++,A=N++,P=N++),o(v,d[3*C],d[3*C+1],d[3*C+2]),o(m,d[3*A],d[3*A+1],d[3*A+2]),o(y,d[3*P],d[3*P+1],d[3*P+2]),l.a.sub(x,v,m),l.a.sub(w,m,y),l.a.cross(M,x,w),l.a.normalize(M,M);for(var B=0;B<3;B++)f[3*C+B]=M[B],f[3*A+B]=M[B],f[3*P+B]=M[B]}this.dirty()}},generateTangents:function(){if(this.vertexCount){var h=this.vertexCount,p=this.attributes;p.tangent.value||(p.tangent.value=new Float32Array(4*h));var d=p.texcoord0.value,f=p.position.value,v=p.tangent.value,m=p.normal.value;if(d){for(var y=[],x=[],w=0;w<h;w++)y[w]=[0,0,0],x[w]=[0,0,0];var M,C,A,P=[0,0,0],b=[0,0,0],N=this.indices,B=N?N.length:this.vertexCount;for(w=0;w<B;){N?(M=N[w++],C=N[w++],A=N[w++]):(M=w++,C=w++,A=w++);var z=d[2*M],F=d[2*C],V=d[2*A],H=d[2*M+1],U=d[2*C+1],j=d[2*A+1],X=f[3*M],Y=f[3*C],J=f[3*A],K=f[3*M+1],Q=f[3*C+1],Z=f[3*A+1],q=f[3*M+2],tt=Y-X,$=J-X,rt=Q-K,et=Z-K,it=f[3*C+2]-q,ot=f[3*A+2]-q,st=F-z,at=V-z,vt=U-H,yt=j-H,gt=1/(st*yt-vt*at);P[0]=(yt*tt-vt*$)*gt,P[1]=(yt*rt-vt*et)*gt,P[2]=(yt*it-vt*ot)*gt,b[0]=(st*$-at*tt)*gt,b[1]=(st*et-at*rt)*gt,b[2]=(st*ot-at*it)*gt,a(y[M],y[M],P),a(y[C],y[C],P),a(y[A],y[A],P),a(x[M],x[M],b),a(x[C],x[C],b),a(x[A],x[A],b)}var pt=s(),bt=s(),mt=s();for(w=0;w<h;w++){mt[0]=m[3*w],mt[1]=m[3*w+1],mt[2]=m[3*w+2];var nt=y[w];l.a.scale(pt,mt,l.a.dot(mt,nt)),l.a.sub(pt,nt,pt),l.a.normalize(pt,pt),l.a.cross(bt,mt,nt),v[4*w]=pt[0],v[4*w+1]=pt[1],v[4*w+2]=pt[2],v[4*w+3]=l.a.dot(bt,x[w])<0?-1:1}this.dirty()}else console.warn("Geometry without texcoords can't generate tangents.")}},isUniqueVertex:function(){return!this.isUseIndices()||this.vertexCount===this.indices.length},generateUniqueVertex:function(){if(this.vertexCount&&this.indices){this.indices.length>65535&&(this.indices=new c.a.Uint32Array(this.indices));for(var h=this.attributes,p=this.indices,d=this.getEnabledAttributes(),f={},v=0;v<d.length;v++)f[w=d[v]]=h[w].value,h[w].init(this.indices.length);for(var m=0,y=0;y<p.length;y++){var x=p[y];for(v=0;v<d.length;v++)for(var w,M=h[w=d[v]].value,C=h[w].size,A=0;A<C;A++)M[m*C+A]=f[w][x*C+A];p[y]=m,m++}this.dirty()}},generateBarycentric:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var h=this.attributes,p=h.barycentric.value,d=this.indices;if(!p||p.length!==3*d.length){p=h.barycentric.value=new Float32Array(3*d.length);for(var f=0;f<(d?d.length:this.vertexCount/3);)for(var v=0;v<3;v++)p[3*(d?d[f++]:3*f+v)+v]=1;this.dirty()}}},applyTransform:function(h){var p=this.attributes,d=p.position.value,f=p.normal.value,v=p.tangent.value;h=h.array;var m=e.a.create();e.a.invert(m,h),e.a.transpose(m,m);var y=l.a.transformMat4,x=l.a.forEach;x(d,3,0,null,y,h),f&&x(f,3,0,null,y,m),v&&x(v,4,0,null,y,m),this.boundingBox&&this.updateBoundingBox()},dispose:function(h){var p=this._cache;p.use(h.__uid__);var d=p.get("chunks");if(d)for(var f=0;f<d.length;f++){for(var v=d[f],m=0;m<v.attributeBuffers.length;m++){var y=v.attributeBuffers[m];h.gl.deleteBuffer(y.buffer)}v.indicesBuffer&&h.gl.deleteBuffer(v.indicesBuffer.buffer)}if(this.__vaoCache){var x=h.getGLExtension("OES_vertex_array_object");for(var w in this.__vaoCache){var M=this.__vaoCache[w].vao;M&&x.deleteVertexArrayOES(M)}}this.__vaoCache={},p.deleteContext(h.__uid__)}});n.STATIC_DRAW=i.a.STATIC_DRAW,n.DYNAMIC_DRAW=i.a.DYNAMIC_DRAW,n.STREAM_DRAW=i.a.STREAM_DRAW,n.AttributeBuffer=i.a.AttributeBuffer,n.IndicesBuffer=i.a.IndicesBuffer,n.Attribute=r,g.a=n},function(_,g,u){var c=u(8),l=u(38),e=u(43),t=u(9),i=u(19),s=u(41),a=u(11),o=u(125);t.a.import(o.a);var r=new e.a,n=new s.a({geometry:r,frustumCulling:!1}),h=new l.a,p=c.a.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var d=new t.a(t.a.source("clay.compositor.vertex"),this.fragment),f=new i.a({shader:d});f.enableTexturesAll(),this.material=f},{setUniform:function(d,f){this.material.setUniform(d,f)},getUniform:function(d){var f=this.material.uniforms[d];if(f)return f.value},attachOutput:function(d,f){this.outputs||(this.outputs={}),f=f||a.a.COLOR_ATTACHMENT0,this.outputs[f]=d},detachOutput:function(d){for(var f in this.outputs)this.outputs[f]===d&&(this.outputs[f]=null)},bind:function(d,f){if(this.outputs)for(var v in this.outputs){var m=this.outputs[v];m&&f.attach(m,v)}f&&f.bind(d)},unbind:function(d,f){f.unbind(d)},render:function(d,f){var v=d.gl;if(f){this.bind(d,f);var m=d.getGLExtension("EXT_draw_buffers");if(m&&this.outputs){var y=[];for(var x in this.outputs)(x=+x)>=v.COLOR_ATTACHMENT0&&x<=v.COLOR_ATTACHMENT0+8&&y.push(x);m.drawBuffersEXT(y)}}this.trigger("beforerender",this,d);var w=this.clearDepth?v.DEPTH_BUFFER_BIT:0;if(v.depthMask(!0),this.clearColor){w|=v.COLOR_BUFFER_BIT,v.colorMask(!0,!0,!0,!0);var M=this.clearColor;Array.isArray(M)&&v.clearColor(M[0],M[1],M[2],M[3])}v.clear(w),this.blendWithPrevious?(v.enable(v.BLEND),this.material.transparent=!0):(v.disable(v.BLEND),this.material.transparent=!1),this.renderQuad(d),this.trigger("afterrender",this,d),f&&this.unbind(d,f)},renderQuad:function(d){n.material=this.material,d.renderPass([n],h)},dispose:function(d){}});g.a=p},function(_,g){var u={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},c={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},l=Object.prototype.toString,e=Array.prototype,t=e.forEach,i=e.filter,s=e.slice,a=e.map,o=e.reduce,r={};function n(b){if(b==null||E(b)!=="object")return b;var N=b,B=l.call(b);if(B==="[object Array]"){if(!A(b)){N=[];for(var z=0,F=b.length;z<F;z++)N[z]=n(b[z])}}else if(c[B]){if(!A(b)){var V=b.constructor;if(b.constructor.from)N=V.from(b);else for(N=new V(b.length),z=0,F=b.length;z<F;z++)N[z]=n(b[z])}}else if(!u[B]&&!A(b)&&!M(b))for(var H in N={},b)b.hasOwnProperty(H)&&(N[H]=n(b[H]));return N}function h(b,N,B){if(!x(N)||!x(b))return B?n(N):b;for(var z in N)if(N.hasOwnProperty(z)){var F=b[z],V=N[z];!x(V)||!x(F)||y(V)||y(F)||M(V)||M(F)||w(V)||w(F)||A(V)||A(F)?!B&&z in b||(b[z]=n(N[z])):h(F,V,B)}return b}function p(b,N,B){for(var z in N)N.hasOwnProperty(z)&&(B?N[z]!=null:b[z]==null)&&(b[z]=N[z]);return b}var d,f=function(){return r.createCanvas()};function v(b,N,B){if(b&&N)if(b.forEach&&b.forEach===t)b.forEach(N,B);else if(b.length===+b.length)for(var z=0,F=b.length;z<F;z++)N.call(B,b[z],z,b);else for(var V in b)b.hasOwnProperty(V)&&N.call(B,b[V],V,b)}function m(b,N){var B=s.call(arguments,2);return function(){return b.apply(N,B.concat(s.call(arguments)))}}function y(b){return l.call(b)==="[object Array]"}function x(b){var N=E(b);return N==="function"||!!b&&N==="object"}function w(b){return!!u[l.call(b)]}function M(b){return E(b)==="object"&&typeof b.nodeType=="number"&&E(b.ownerDocument)==="object"}r.createCanvas=function(){return document.createElement("canvas")};var C="__ec_primitive__";function A(b){return b[C]}function P(b){var N=y(b);this.data={};var B=this;function z(F,V){N?B.set(F,V):B.set(V,F)}D(b,P)?b.each(z):b&&v(b,z)}P.prototype={constructor:P,get:function(b){return this.data.hasOwnProperty(b)?this.data[b]:null},set:function(b,N){return this.data[b]=N},each:function(b,N){for(var B in N!==void 0&&(b=m(b,N)),this.data)this.data.hasOwnProperty(B)&&b(this.data[B],B)},removeKey:function(b){delete this.data[b]}},g.$override=function(b,N){b==="createCanvas"&&(d=null),r[b]=N},g.clone=n,g.merge=h,g.mergeAll=function(b,N){for(var B=b[0],z=1,F=b.length;z<F;z++)B=h(B,b[z],N);return B},g.extend=function(b,N){for(var B in N)N.hasOwnProperty(B)&&(b[B]=N[B]);return b},g.defaults=p,g.createCanvas=f,g.getContext=function(){return d||(d=f().getContext("2d")),d},g.indexOf=function(b,N){if(b){if(b.indexOf)return b.indexOf(N);for(var B=0,z=b.length;B<z;B++)if(b[B]===N)return B}return-1},g.inherits=function(b,N){var B=b.prototype;function z(){}for(var F in z.prototype=N.prototype,b.prototype=new z,B)B.hasOwnProperty(F)&&(b.prototype[F]=B[F]);b.prototype.constructor=b,b.superClass=N},g.mixin=function(b,N,B){p(b="prototype"in b?b.prototype:b,N="prototype"in N?N.prototype:N,B)},g.isArrayLike=function(b){if(b)return typeof b!="string"&&typeof b.length=="number"},g.each=v,g.map=function(b,N,B){if(b&&N){if(b.map&&b.map===a)return b.map(N,B);for(var z=[],F=0,V=b.length;F<V;F++)z.push(N.call(B,b[F],F,b));return z}},g.reduce=function(b,N,B,z){if(b&&N){if(b.reduce&&b.reduce===o)return b.reduce(N,B,z);for(var F=0,V=b.length;F<V;F++)B=N.call(z,B,b[F],F,b);return B}},g.filter=function(b,N,B){if(b&&N){if(b.filter&&b.filter===i)return b.filter(N,B);for(var z=[],F=0,V=b.length;F<V;F++)N.call(B,b[F],F,b)&&z.push(b[F]);return z}},g.find=function(b,N,B){if(b&&N){for(var z=0,F=b.length;z<F;z++)if(N.call(B,b[z],z,b))return b[z]}},g.bind=m,g.curry=function(b){var N=s.call(arguments,1);return function(){return b.apply(this,N.concat(s.call(arguments)))}},g.isArray=y,g.isFunction=function(b){return typeof b=="function"},g.isString=function(b){return l.call(b)==="[object String]"},g.isObject=x,g.isBuiltInObject=w,g.isTypedArray=function(b){return!!c[l.call(b)]},g.isDom=M,g.eqNaN=function(b){return b!=b},g.retrieve=function(b){for(var N=0,B=arguments.length;N<B;N++)if(arguments[N]!=null)return arguments[N]},g.retrieve2=function(b,N){return b!=null?b:N},g.retrieve3=function(b,N,B){return b!=null?b:N!=null?N:B},g.slice=function(){return Function.call.apply(s,arguments)},g.normalizeCssArray=function(b){if(typeof b=="number")return[b,b,b,b];var N=b.length;return N===2?[b[0],b[1],b[0],b[1]]:N===3?[b[0],b[1],b[2],b[1]]:b},g.assert=function(b,N){if(!b)throw new Error(N)},g.trim=function(b){return b==null?null:typeof b.trim=="function"?b.trim():b.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},g.setAsPrimitive=function(b){b[C]=!0},g.isPrimitive=A,g.createHashMap=function(b){return new P(b)},g.concatArray=function(b,N){for(var B=new b.constructor(b.length+N.length),z=0;z<b.length;z++)B[z]=b[z];var F=b.length;for(z=0;z<N.length;z++)B[z+F]=N[z];return B},g.noop=function(){}},function(_,g,u){g.a=function(c,l,e){return{seriesType:c,reset:function(t,i){var s=t.getData(),a=t.visualColorAccessPath.split(".");a[a.length-1]="opacity";var o=t.get(a);return s.setVisual("opacity",o==null?1:o),{dataEach:s.hasItemOption?function(r,n){var h=r.getItemModel(n).get(a,!0);h!=null&&r.setItemVisual(n,"opacity",h)}:null}}}}},function(_,g,u){var c,l,e,t,i,s,a=u(3),o=u(12),r=o.a.set,n=o.a.copy,h=function(p,d){this.min=p||new a.a(1/0,1/0,1/0),this.max=d||new a.a(-1/0,-1/0,-1/0),this.vertices=null};h.prototype={constructor:h,updateFromVertices:function(p){if(p.length>0){var d=this.min,f=this.max,v=d.array,m=f.array;n(v,p[0]),n(m,p[0]);for(var y=1;y<p.length;y++){var x=p[y];x[0]<v[0]&&(v[0]=x[0]),x[1]<v[1]&&(v[1]=x[1]),x[2]<v[2]&&(v[2]=x[2]),x[0]>m[0]&&(m[0]=x[0]),x[1]>m[1]&&(m[1]=x[1]),x[2]>m[2]&&(m[2]=x[2])}d._dirty=!0,f._dirty=!0}},union:function(p){var d=this.min,f=this.max;return o.a.min(d.array,d.array,p.min.array),o.a.max(f.array,f.array,p.max.array),d._dirty=!0,f._dirty=!0,this},intersection:function(p){var d=this.min,f=this.max;return o.a.max(d.array,d.array,p.min.array),o.a.min(f.array,f.array,p.max.array),d._dirty=!0,f._dirty=!0,this},intersectBoundingBox:function(p){var d=this.min.array,f=this.max.array,v=p.min.array,m=p.max.array;return!(d[0]>m[0]||d[1]>m[1]||d[2]>m[2]||f[0]<v[0]||f[1]<v[1]||f[2]<v[2])},containBoundingBox:function(p){var d=this.min.array,f=this.max.array,v=p.min.array,m=p.max.array;return d[0]<=v[0]&&d[1]<=v[1]&&d[2]<=v[2]&&f[0]>=m[0]&&f[1]>=m[1]&&f[2]>=m[2]},containPoint:function(p){var d=this.min.array,f=this.max.array,v=p.array;return d[0]<=v[0]&&d[1]<=v[1]&&d[2]<=v[2]&&f[0]>=v[0]&&f[1]>=v[1]&&f[2]>=v[2]},isFinite:function(p){function d(){return p.apply(this,arguments)}return d.toString=function(){return p.toString()},d}(function(){var p=this.min.array,d=this.max.array;return isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(d[0])&&isFinite(d[1])&&isFinite(d[2])}),applyTransform:function(p){this.transformFrom(this,p)},transformFrom:(c=o.a.create(),l=o.a.create(),e=o.a.create(),t=o.a.create(),i=o.a.create(),s=o.a.create(),function(p,d){var f=p.min.array,v=p.max.array,m=d.array;return c[0]=m[0]*f[0],c[1]=m[1]*f[0],c[2]=m[2]*f[0],l[0]=m[0]*v[0],l[1]=m[1]*v[0],l[2]=m[2]*v[0],e[0]=m[4]*f[1],e[1]=m[5]*f[1],e[2]=m[6]*f[1],t[0]=m[4]*v[1],t[1]=m[5]*v[1],t[2]=m[6]*v[1],i[0]=m[8]*f[2],i[1]=m[9]*f[2],i[2]=m[10]*f[2],s[0]=m[8]*v[2],s[1]=m[9]*v[2],s[2]=m[10]*v[2],f=this.min.array,v=this.max.array,f[0]=Math.min(c[0],l[0])+Math.min(e[0],t[0])+Math.min(i[0],s[0])+m[12],f[1]=Math.min(c[1],l[1])+Math.min(e[1],t[1])+Math.min(i[1],s[1])+m[13],f[2]=Math.min(c[2],l[2])+Math.min(e[2],t[2])+Math.min(i[2],s[2])+m[14],v[0]=Math.max(c[0],l[0])+Math.max(e[0],t[0])+Math.max(i[0],s[0])+m[12],v[1]=Math.max(c[1],l[1])+Math.max(e[1],t[1])+Math.max(i[1],s[1])+m[13],v[2]=Math.max(c[2],l[2])+Math.max(e[2],t[2])+Math.max(i[2],s[2])+m[14],this.min._dirty=!0,this.max._dirty=!0,this}),applyProjection:function(p){var d=this.min.array,f=this.max.array,v=p.array,m=d[0],y=d[1],x=d[2],w=f[0],M=f[1],C=d[2],A=f[0],P=f[1],b=f[2];if(v[15]===1)d[0]=v[0]*m+v[12],d[1]=v[5]*y+v[13],f[2]=v[10]*x+v[14],f[0]=v[0]*A+v[12],f[1]=v[5]*P+v[13],d[2]=v[10]*b+v[14];else{var N=-1/x;d[0]=v[0]*m*N,d[1]=v[5]*y*N,f[2]=(v[10]*x+v[14])*N,N=-1/C,f[0]=v[0]*w*N,f[1]=v[5]*M*N,N=-1/b,d[2]=(v[10]*b+v[14])*N}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var p=this.vertices;if(!p){p=[];for(var d=0;d<8;d++)p[d]=o.a.fromValues(0,0,0);this.vertices=p}var f=this.min.array,v=this.max.array;return r(p[0],f[0],f[1],f[2]),r(p[1],f[0],v[1],f[2]),r(p[2],v[0],f[1],f[2]),r(p[3],v[0],v[1],f[2]),r(p[4],f[0],f[1],v[2]),r(p[5],f[0],v[1],v[2]),r(p[6],v[0],f[1],v[2]),r(p[7],v[0],v[1],v[2]),this},copy:function(p){var d=this.min,f=this.max;return n(d.array,p.min.array),n(f.array,p.max.array),d._dirty=!0,f._dirty=!0,this},clone:function(){var p=new h;return p.copy(this),p}},g.a=h},function(_,g,u){var c=u(8),l=u(23),e=u(112).a.parseToFloat,t={};function i(a){var o=Object.keys(a);o.sort();for(var r=[],n=0;n<o.length;n++){var h=o[n],p=a[h];p===null?r.push(h):r.push(h+" "+p.toString())}return r.join(`
`)}var s=c.a.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(a,o){o===void 0&&console.warn('Uniform value "'+a+'" is undefined');var r=this.uniforms[a];r&&(typeof o=="string"&&(o=e(o)||o),r.value=o,this.autoUpdateTextureStatus&&r.type==="t"&&(o?this.enableTexture(a):this.disableTexture(a)))},setUniforms:function(a){for(var o in a){var r=a[o];this.setUniform(o,r)}},isUniformEnabled:function(a){return this._enabledUniforms.indexOf(a)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(a,o){if(E(a)==="object")for(var r in a){var n=a[r];this.setUniform(r,n)}else this.setUniform(a,o)},get:function(a){var o=this.uniforms[a];if(o)return o.value},attachShader:function(a,o){var r=this.uniforms;this.uniforms=a.createUniforms(),this.shader=a;var n=this.uniforms;this._enabledUniforms=Object.keys(n),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(m){var y=this.uniforms[m].type;return y==="t"||y==="tv"},this);var h=this.vertexDefines,p=this.fragmentDefines;if(this.vertexDefines=l.a.clone(a.vertexDefines),this.fragmentDefines=l.a.clone(a.fragmentDefines),o){for(var d in r)n[d]&&(n[d].value=r[d].value);l.a.defaults(this.vertexDefines,h),l.a.defaults(this.fragmentDefines,p)}var f={};for(var v in a.textures)f[v]={shaderType:a.textures[v].shaderType,type:a.textures[v].type,enabled:!(!o||!this._textureStatus[v])&&this._textureStatus[v].enabled};this._textureStatus=f,this._programKey=""},clone:function(){var a=new this.constructor({name:this.name,shader:this.shader});for(var o in this.uniforms)a.uniforms[o].value=this.uniforms[o].value;return a.depthTest=this.depthTest,a.depthMask=this.depthMask,a.transparent=this.transparent,a.blend=this.blend,a.vertexDefines=l.a.clone(this.vertexDefines),a.fragmentDefines=l.a.clone(this.fragmentDefines),a.enableTexture(this.getEnabledTextures()),a.precision=this.precision,a},define:function(a,o,r){var n=this.vertexDefines,h=this.fragmentDefines;a!=="vertex"&&a!=="fragment"&&a!=="both"&&arguments.length<3&&(r=o,o=a,a="both"),r=r!=null?r:null,a!=="vertex"&&a!=="both"||n[o]!==r&&(n[o]=r,this._programKey=""),a!=="fragment"&&a!=="both"||h[o]!==r&&(h[o]=r,a!=="both"&&(this._programKey=""))},undefine:function(a,o){a!=="vertex"&&a!=="fragment"&&a!=="both"&&arguments.length<2&&(o=a,a="both"),a!=="vertex"&&a!=="both"||this.isDefined("vertex",o)&&(delete this.vertexDefines[o],this._programKey=""),a!=="fragment"&&a!=="both"||this.isDefined("fragment",o)&&(delete this.fragmentDefines[o],a!=="both"&&(this._programKey=""))},isDefined:function(a,o){switch(a){case"vertex":return this.vertexDefines[o]!==void 0;case"fragment":return this.fragmentDefines[o]!==void 0}},getDefine:function(a,o){switch(a){case"vertex":return this.vertexDefines[o];case"fragment":return this.fragmentDefines[o]}},enableTexture:function(a){if(Array.isArray(a))for(var o=0;o<a.length;o++)this.enableTexture(a[o]);else{var r=this._textureStatus[a];r&&(r.enabled||(r.enabled=!0,this._programKey=""))}},enableTexturesAll:function(){var a=this._textureStatus;for(var o in a)a[o].enabled=!0;this._programKey=""},disableTexture:function(a){if(Array.isArray(a))for(var o=0;o<a.length;o++)this.disableTexture(a[o]);else{var r=this._textureStatus[a];r&&(!r.enabled||(r.enabled=!1,this._programKey=""))}},disableTexturesAll:function(){var a=this._textureStatus;for(var o in a)a[o].enabled=!1;this._programKey=""},isTextureEnabled:function(a){var o=this._textureStatus;return!!o[a]&&o[a].enabled},getEnabledTextures:function(){var a=[],o=this._textureStatus;for(var r in o)o[r].enabled&&a.push(r);return a},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=function(a,o,r){r.sort();for(var n=[],h=0;h<r.length;h++){var p=r[h];n.push(p)}var d=i(a)+`
`+i(o)+`
`+n.join(`
`);if(t[d])return t[d];var f=l.a.genGUID();return t[d]=f,f}(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}});g.a=s},function(_,g,u){u.d(g,"b",function(){return c}),u.d(g,"a",function(){return l}),u.d(g,"c",function(){return e});var c=1e-6,l=Array,e=Math.random},function(_,g,u){var c=u(20),l={create:function(){var e=new c.a(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){var t=new c.a(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){if(e===t){var i=t[1],s=t[2],a=t[3],o=t[6],r=t[7],n=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=o,e[11]=t[14],e[12]=a,e[13]=r,e[14]=n}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},invert:function(e,t){var i=t[0],s=t[1],a=t[2],o=t[3],r=t[4],n=t[5],h=t[6],p=t[7],d=t[8],f=t[9],v=t[10],m=t[11],y=t[12],x=t[13],w=t[14],M=t[15],C=i*n-s*r,A=i*h-a*r,P=i*p-o*r,b=s*h-a*n,N=s*p-o*n,B=a*p-o*h,z=d*x-f*y,F=d*w-v*y,V=d*M-m*y,H=f*w-v*x,U=f*M-m*x,j=v*M-m*w,X=C*j-A*U+P*H+b*V-N*F+B*z;return X?(X=1/X,e[0]=(n*j-h*U+p*H)*X,e[1]=(a*U-s*j-o*H)*X,e[2]=(x*B-w*N+M*b)*X,e[3]=(v*N-f*B-m*b)*X,e[4]=(h*V-r*j-p*F)*X,e[5]=(i*j-a*V+o*F)*X,e[6]=(w*P-y*B-M*A)*X,e[7]=(d*B-v*P+m*A)*X,e[8]=(r*U-n*V+p*z)*X,e[9]=(s*V-i*U-o*z)*X,e[10]=(y*N-x*P+M*C)*X,e[11]=(f*P-d*N-m*C)*X,e[12]=(n*F-r*H-h*z)*X,e[13]=(i*H-s*F+a*z)*X,e[14]=(x*A-y*b-w*C)*X,e[15]=(d*b-f*A+v*C)*X,e):null},adjoint:function(e,t){var i=t[0],s=t[1],a=t[2],o=t[3],r=t[4],n=t[5],h=t[6],p=t[7],d=t[8],f=t[9],v=t[10],m=t[11],y=t[12],x=t[13],w=t[14],M=t[15];return e[0]=n*(v*M-m*w)-f*(h*M-p*w)+x*(h*m-p*v),e[1]=-(s*(v*M-m*w)-f*(a*M-o*w)+x*(a*m-o*v)),e[2]=s*(h*M-p*w)-n*(a*M-o*w)+x*(a*p-o*h),e[3]=-(s*(h*m-p*v)-n*(a*m-o*v)+f*(a*p-o*h)),e[4]=-(r*(v*M-m*w)-d*(h*M-p*w)+y*(h*m-p*v)),e[5]=i*(v*M-m*w)-d*(a*M-o*w)+y*(a*m-o*v),e[6]=-(i*(h*M-p*w)-r*(a*M-o*w)+y*(a*p-o*h)),e[7]=i*(h*m-p*v)-r*(a*m-o*v)+d*(a*p-o*h),e[8]=r*(f*M-m*x)-d*(n*M-p*x)+y*(n*m-p*f),e[9]=-(i*(f*M-m*x)-d*(s*M-o*x)+y*(s*m-o*f)),e[10]=i*(n*M-p*x)-r*(s*M-o*x)+y*(s*p-o*n),e[11]=-(i*(n*m-p*f)-r*(s*m-o*f)+d*(s*p-o*n)),e[12]=-(r*(f*w-v*x)-d*(n*w-h*x)+y*(n*v-h*f)),e[13]=i*(f*w-v*x)-d*(s*w-a*x)+y*(s*v-a*f),e[14]=-(i*(n*w-h*x)-r*(s*w-a*x)+y*(s*h-a*n)),e[15]=i*(n*v-h*f)-r*(s*v-a*f)+d*(s*h-a*n),e},determinant:function(e){var t=e[0],i=e[1],s=e[2],a=e[3],o=e[4],r=e[5],n=e[6],h=e[7],p=e[8],d=e[9],f=e[10],v=e[11],m=e[12],y=e[13],x=e[14],w=e[15];return(t*r-i*o)*(f*w-v*x)-(t*n-s*o)*(d*w-v*y)+(t*h-a*o)*(d*x-f*y)+(i*n-s*r)*(p*w-v*m)-(i*h-a*r)*(p*x-f*m)+(s*h-a*n)*(p*y-d*m)},multiply:function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=t[4],h=t[5],p=t[6],d=t[7],f=t[8],v=t[9],m=t[10],y=t[11],x=t[12],w=t[13],M=t[14],C=t[15],A=i[0],P=i[1],b=i[2],N=i[3];return e[0]=A*s+P*n+b*f+N*x,e[1]=A*a+P*h+b*v+N*w,e[2]=A*o+P*p+b*m+N*M,e[3]=A*r+P*d+b*y+N*C,A=i[4],P=i[5],b=i[6],N=i[7],e[4]=A*s+P*n+b*f+N*x,e[5]=A*a+P*h+b*v+N*w,e[6]=A*o+P*p+b*m+N*M,e[7]=A*r+P*d+b*y+N*C,A=i[8],P=i[9],b=i[10],N=i[11],e[8]=A*s+P*n+b*f+N*x,e[9]=A*a+P*h+b*v+N*w,e[10]=A*o+P*p+b*m+N*M,e[11]=A*r+P*d+b*y+N*C,A=i[12],P=i[13],b=i[14],N=i[15],e[12]=A*s+P*n+b*f+N*x,e[13]=A*a+P*h+b*v+N*w,e[14]=A*o+P*p+b*m+N*M,e[15]=A*r+P*d+b*y+N*C,e},multiplyAffine:function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[4],n=t[5],h=t[6],p=t[8],d=t[9],f=t[10],v=t[12],m=t[13],y=t[14],x=i[0],w=i[1],M=i[2];return e[0]=x*s+w*r+M*p,e[1]=x*a+w*n+M*d,e[2]=x*o+w*h+M*f,x=i[4],w=i[5],M=i[6],e[4]=x*s+w*r+M*p,e[5]=x*a+w*n+M*d,e[6]=x*o+w*h+M*f,x=i[8],w=i[9],M=i[10],e[8]=x*s+w*r+M*p,e[9]=x*a+w*n+M*d,e[10]=x*o+w*h+M*f,x=i[12],w=i[13],M=i[14],e[12]=x*s+w*r+M*p+v,e[13]=x*a+w*n+M*d+m,e[14]=x*o+w*h+M*f+y,e}};l.mul=l.multiply,l.mulAffine=l.multiplyAffine,l.translate=function(e,t,i){var s,a,o,r,n,h,p,d,f,v,m,y,x=i[0],w=i[1],M=i[2];return t===e?(e[12]=t[0]*x+t[4]*w+t[8]*M+t[12],e[13]=t[1]*x+t[5]*w+t[9]*M+t[13],e[14]=t[2]*x+t[6]*w+t[10]*M+t[14],e[15]=t[3]*x+t[7]*w+t[11]*M+t[15]):(s=t[0],a=t[1],o=t[2],r=t[3],n=t[4],h=t[5],p=t[6],d=t[7],f=t[8],v=t[9],m=t[10],y=t[11],e[0]=s,e[1]=a,e[2]=o,e[3]=r,e[4]=n,e[5]=h,e[6]=p,e[7]=d,e[8]=f,e[9]=v,e[10]=m,e[11]=y,e[12]=s*x+n*w+f*M+t[12],e[13]=a*x+h*w+v*M+t[13],e[14]=o*x+p*w+m*M+t[14],e[15]=r*x+d*w+y*M+t[15]),e},l.scale=function(e,t,i){var s=i[0],a=i[1],o=i[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.rotate=function(e,t,i,s){var a,o,r,n,h,p,d,f,v,m,y,x,w,M,C,A,P,b,N,B,z,F,V,H,U=s[0],j=s[1],X=s[2],Y=Math.sqrt(U*U+j*j+X*X);return Math.abs(Y)<c.b?null:(U*=Y=1/Y,j*=Y,X*=Y,a=Math.sin(i),r=1-(o=Math.cos(i)),n=t[0],h=t[1],p=t[2],d=t[3],f=t[4],v=t[5],m=t[6],y=t[7],x=t[8],w=t[9],M=t[10],C=t[11],A=U*U*r+o,P=j*U*r+X*a,b=X*U*r-j*a,N=U*j*r-X*a,B=j*j*r+o,z=X*j*r+U*a,F=U*X*r+j*a,V=j*X*r-U*a,H=X*X*r+o,e[0]=n*A+f*P+x*b,e[1]=h*A+v*P+w*b,e[2]=p*A+m*P+M*b,e[3]=d*A+y*P+C*b,e[4]=n*N+f*B+x*z,e[5]=h*N+v*B+w*z,e[6]=p*N+m*B+M*z,e[7]=d*N+y*B+C*z,e[8]=n*F+f*V+x*H,e[9]=h*F+v*V+w*H,e[10]=p*F+m*V+M*H,e[11]=d*F+y*V+C*H,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},l.rotateX=function(e,t,i){var s=Math.sin(i),a=Math.cos(i),o=t[4],r=t[5],n=t[6],h=t[7],p=t[8],d=t[9],f=t[10],v=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+p*s,e[5]=r*a+d*s,e[6]=n*a+f*s,e[7]=h*a+v*s,e[8]=p*a-o*s,e[9]=d*a-r*s,e[10]=f*a-n*s,e[11]=v*a-h*s,e},l.rotateY=function(e,t,i){var s=Math.sin(i),a=Math.cos(i),o=t[0],r=t[1],n=t[2],h=t[3],p=t[8],d=t[9],f=t[10],v=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a-p*s,e[1]=r*a-d*s,e[2]=n*a-f*s,e[3]=h*a-v*s,e[8]=o*s+p*a,e[9]=r*s+d*a,e[10]=n*s+f*a,e[11]=h*s+v*a,e},l.rotateZ=function(e,t,i){var s=Math.sin(i),a=Math.cos(i),o=t[0],r=t[1],n=t[2],h=t[3],p=t[4],d=t[5],f=t[6],v=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+p*s,e[1]=r*a+d*s,e[2]=n*a+f*s,e[3]=h*a+v*s,e[4]=p*a-o*s,e[5]=d*a-r*s,e[6]=f*a-n*s,e[7]=v*a-h*s,e},l.fromRotationTranslation=function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=s+s,h=a+a,p=o+o,d=s*n,f=s*h,v=s*p,m=a*h,y=a*p,x=o*p,w=r*n,M=r*h,C=r*p;return e[0]=1-(m+x),e[1]=f+C,e[2]=v-M,e[3]=0,e[4]=f-C,e[5]=1-(d+x),e[6]=y+w,e[7]=0,e[8]=v+M,e[9]=y-w,e[10]=1-(d+m),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e},l.fromQuat=function(e,t){var i=t[0],s=t[1],a=t[2],o=t[3],r=i+i,n=s+s,h=a+a,p=i*r,d=s*r,f=s*n,v=a*r,m=a*n,y=a*h,x=o*r,w=o*n,M=o*h;return e[0]=1-f-y,e[1]=d+M,e[2]=v-w,e[3]=0,e[4]=d-M,e[5]=1-p-y,e[6]=m+x,e[7]=0,e[8]=v+w,e[9]=m-x,e[10]=1-p-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},l.frustum=function(e,t,i,s,a,o,r){var n=1/(i-t),h=1/(a-s),p=1/(o-r);return e[0]=2*o*n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*h,e[6]=0,e[7]=0,e[8]=(i+t)*n,e[9]=(a+s)*h,e[10]=(r+o)*p,e[11]=-1,e[12]=0,e[13]=0,e[14]=r*o*2*p,e[15]=0,e},l.perspective=function(e,t,i,s,a){var o=1/Math.tan(t/2),r=1/(s-a);return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+s)*r,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*s*r,e[15]=0,e},l.ortho=function(e,t,i,s,a,o,r){var n=1/(t-i),h=1/(s-a),p=1/(o-r);return e[0]=-2*n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*p,e[11]=0,e[12]=(t+i)*n,e[13]=(a+s)*h,e[14]=(r+o)*p,e[15]=1,e},l.lookAt=function(e,t,i,s){var a,o,r,n,h,p,d,f,v,m,y=t[0],x=t[1],w=t[2],M=s[0],C=s[1],A=s[2],P=i[0],b=i[1],N=i[2];return Math.abs(y-P)<c.b&&Math.abs(x-b)<c.b&&Math.abs(w-N)<c.b?l.identity(e):(d=y-P,f=x-b,v=w-N,a=C*(v*=m=1/Math.sqrt(d*d+f*f+v*v))-A*(f*=m),o=A*(d*=m)-M*v,r=M*f-C*d,(m=Math.sqrt(a*a+o*o+r*r))?(a*=m=1/m,o*=m,r*=m):(a=0,o=0,r=0),n=f*r-v*o,h=v*a-d*r,p=d*o-f*a,(m=Math.sqrt(n*n+h*h+p*p))?(n*=m=1/m,h*=m,p*=m):(n=0,h=0,p=0),e[0]=a,e[1]=n,e[2]=d,e[3]=0,e[4]=o,e[5]=h,e[6]=f,e[7]=0,e[8]=r,e[9]=p,e[10]=v,e[11]=0,e[12]=-(a*y+o*x+r*w),e[13]=-(n*y+h*x+p*w),e[14]=-(d*y+f*x+v*w),e[15]=1,e)},l.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},g.a=l},function(_,g,u){var c=u(0),l=u.n(c),e=u(36),t=u(176),i=u(37),s=u(38),a=u(7),o=u(3),r=u(26),n=u(53),h=u(178),p=u(202),d=u(49);function f(m){m=m||"perspective",this.layer=null,this.scene=new e.a,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(m),this._compositor=new h.a,this._temporalSS=new p.a,this._shadowMapPass=new t.a;for(var y=[],x=0,w=0;w<30;w++){for(var M=[],C=0;C<6;C++)M.push(4*Object(d.a)(x,2)-2),M.push(4*Object(d.a)(x,3)-2),x++;y.push(M)}this._pcfKernels=y,this.scene.on("beforerender",function(A,P,b){this.needsTemporalSS()&&this._temporalSS.jitterProjection(A,b)},this)}f.prototype.setProjection=function(m){var y=this.camera;y&&y.update(),m==="perspective"?D(this.camera,i.a)||(this.camera=new i.a,y&&this.camera.setLocalTransform(y.localTransform)):D(this.camera,s.a)||(this.camera=new s.a,y&&this.camera.setLocalTransform(y.localTransform)),this.camera.near=.1,this.camera.far=2e3},f.prototype.setViewport=function(m,y,x,w,M){D(this.camera,i.a)&&(this.camera.aspect=x/w),M=M||1,this.viewport.x=m,this.viewport.y=y,this.viewport.width=x,this.viewport.height=w,this.viewport.devicePixelRatio=M,this._compositor.resize(x*M,w*M),this._temporalSS.resize(x*M,w*M)},f.prototype.containPoint=function(m,y){var x=this.viewport;return y=this.layer.renderer.getHeight()-y,m>=x.x&&y>=x.y&&m<=x.x+x.width&&y<=x.y+x.height};var v=new r.a;f.prototype.castRay=function(m,y,x){var w=this.layer.renderer,M=w.viewport;return w.viewport=this.viewport,w.screenToNDC(m,y,v),this.camera.castRay(v,x),w.viewport=M,x},f.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var m=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var y=0;y<m.transparent.length;y++){var x=m.transparent[y].geometry;x.needsSortVerticesProgressively&&x.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),x.needsSortTrianglesProgressively&&x.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()},f.prototype.render=function(m,y){this._doRender(m,y,this._frame),this._frame++},f.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively},f.prototype.needsTemporalSS=function(){var m=this._enableTemporalSS;return m==="auto"&&(m=this._enablePostEffect),m},f.prototype.hasDOF=function(){return this._enableDOF},f.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30},f.prototype._doRender=function(m,y,x){var w=this.scene,M=this.camera;x=x||0,this._updateTransparent(m,w,M,x),y||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(m,w,M,!0)),this._updateShadowPCFKernel(x);var C,A=m.clearColor;m.gl.clearColor(A[0],A[1],A[2],A[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(m,M),this._compositor.updateNormal(m,w,M,this._temporalSS.getFrame())),this._updateSSAO(m,w,M,this._temporalSS.getFrame()),this._enablePostEffect?((C=this._compositor.getSourceFrameBuffer()).bind(m),m.gl.clear(m.gl.DEPTH_BUFFER_BIT|m.gl.COLOR_BUFFER_BIT),m.render(w,M,!0,!0),C.unbind(m),this.needsTemporalSS()&&y?(this._compositor.composite(m,w,M,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),m.setViewport(this.viewport),this._temporalSS.render(m)):(m.setViewport(this.viewport),this._compositor.composite(m,w,M,null,0))):this.needsTemporalSS()&&y?((C=this._temporalSS.getSourceFrameBuffer()).bind(m),m.saveClear(),m.clearBit=m.gl.DEPTH_BUFFER_BIT|m.gl.COLOR_BUFFER_BIT,m.render(w,M,!0,!0),m.restoreClear(),C.unbind(m),m.setViewport(this.viewport),this._temporalSS.render(m)):(m.setViewport(this.viewport),m.render(w,M,!0,!0))},f.prototype._updateTransparent=function(m,y,x,w){for(var M=new o.a,C=new a.a,A=x.getWorldPosition(),P=y.getRenderList(x).transparent,b=0;b<P.length;b++){var N=P[b],B=N.geometry;a.a.invert(C,N.worldTransform),o.a.transformMat4(M,A,C),B.needsSortTriangles&&B.needsSortTriangles()&&B.doSortTriangles(M,w),B.needsSortVertices&&B.needsSortVertices()&&B.doSortVertices(M,w)}},f.prototype._updateSSAO=function(m,y,x){var w=this._enableSSAO&&this._enablePostEffect;w&&this._compositor.updateSSAO(m,y,x,this._temporalSS.getFrame());for(var M=y.getRenderList(x),C=0;C<M.opaque.length;C++){var A=M.opaque[C];A.renderNormal&&A.material[w?"enableTexture":"disableTexture"]("ssaoMap"),w&&A.material.set("ssaoMap",this._compositor.getSSAOTexture())}},f.prototype._updateShadowPCFKernel=function(m){for(var y=this._pcfKernels[m%this._pcfKernels.length],x=this.scene.getRenderList(this.camera).opaque,w=0;w<x.length;w++)x[w].receiveShadow&&(x[w].material.set("pcfKernel",y),x[w].material.define("fragment","PCF_KERNEL_SIZE",y.length/2))},f.prototype.dispose=function(m){this._compositor.dispose(m.gl),this._temporalSS.dispose(m.gl),this._shadowMapPass.dispose(m)},f.prototype.setPostEffect=function(m,y){var x=this._compositor;this._enablePostEffect=m.get("enable");var w=m.getModel("bloom"),M=m.getModel("edge"),C=m.getModel("DOF",m.getModel("depthOfField")),A=m.getModel("SSAO",m.getModel("screenSpaceAmbientOcclusion")),P=m.getModel("SSR",m.getModel("screenSpaceReflection")),b=m.getModel("FXAA"),N=m.getModel("colorCorrection");w.get("enable")?x.enableBloom():x.disableBloom(),C.get("enable")?x.enableDOF():x.disableDOF(),P.get("enable")?x.enableSSR():x.disableSSR(),N.get("enable")?x.enableColorCorrection():x.disableColorCorrection(),M.get("enable")?x.enableEdge():x.disableEdge(),b.get("enable")?x.enableFXAA():x.disableFXAA(),this._enableDOF=C.get("enable"),this._enableSSAO=A.get("enable"),this._enableSSAO?x.enableSSAO():x.disableSSAO(),x.setBloomIntensity(w.get("intensity")),x.setEdgeColor(M.get("color")),x.setColorLookupTexture(N.get("lookupTexture"),y),x.setExposure(N.get("exposure")),["radius","quality","intensity"].forEach(function(B){x.setSSAOParameter(B,A.get(B))}),["quality","maxRoughness","physical"].forEach(function(B){x.setSSRParameter(B,P.get(B))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(B){x.setDOFParameter(B,C.get(B))}),["brightness","contrast","saturation"].forEach(function(B){x.setColorCorrection(B,N.get(B))})},f.prototype.setDOFFocusOnPoint=function(m){if(this._enablePostEffect)return m>this.camera.far||m<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",m),!0)},f.prototype.setTemporalSuperSampling=function(m){this._enableTemporalSS=m.get("enable")},f.prototype.isLinearSpace=function(){return this._enablePostEffect},f.prototype.setRootNode=function(m){if(this.rootNode!==m){for(var y=this.rootNode.children(),x=0;x<y.length;x++)m.add(y[x]);m!==this.scene&&this.scene.add(m),this.rootNode=m}},f.prototype.add=function(m){this.rootNode.add(m)},f.prototype.remove=function(m){this.rootNode.remove(m)},f.prototype.removeAll=function(m){this.rootNode.removeAll(m)},l.a.util.extend(f.prototype,n.a),g.a=f},function(_,g,u){var c=0,l=Array.prototype.forEach,e={genGUID:function(){return++c},relative2absolute:function(t,i){if(!i||t.match(/^\//))return t;for(var s=t.split("/"),a=i.split("/"),o=s[0];o==="."||o==="..";)o===".."&&a.pop(),s.shift(),o=s[0];return a.join("/")+"/"+s.join("/")},extend:function(t,i){if(i)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s]);return t},defaults:function(t,i){if(i)for(var s in i)t[s]===void 0&&(t[s]=i[s]);return t},extendWithPropList:function(t,i,s){if(i)for(var a=0;a<s.length;a++){var o=s[a];t[o]=i[o]}return t},defaultsWithPropList:function(t,i,s){if(i)for(var a=0;a<s.length;a++){var o=s[a];t[o]==null&&(t[o]=i[o])}return t},each:function(t,i,s){if(t&&i)if(t.forEach&&t.forEach===l)t.forEach(i,s);else if(t.length===+t.length)for(var a=0,o=t.length;a<o;a++)i.call(s,t[a],a,t);else for(var r in t)t.hasOwnProperty(r)&&i.call(s,t[r],r,t)},isObject:function(t){return t===Object(t)},isArray:function(t){return Array.isArray(t)},isArrayLike:function(t){return!!t&&t.length===+t.length},clone:function(t){if(e.isObject(t)){if(e.isArray(t))return t.slice();if(e.isArrayLike(t)){for(var i=new t.constructor(t.length),s=0;s<t.length;s++)i[s]=t[s];return i}return e.extend({},t)}return t}};g.a=e},function(_,g,u){var c=u(35),l=u(9),e=u(118);l.a.import(e.a);var t=c.a.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var i=c.a.prototype.clone.call(this);return i.color=Array.prototype.slice.call(this.color),i.intensity=this.intensity,i.castShadow=this.castShadow,i.shadowResolution=this.shadowResolution,i}});g.a=t},function(_,g,u){var c=u(14),l=u(0),e=u.n(l),t=u(39),i=u(6).a.vec3,s=[[0,0],[1,1]],a=c.a.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new c.a.Attribute("position","float",3,"POSITION"),positionPrev:new c.a.Attribute("positionPrev","float",3),positionNext:new c.a.Attribute("positionNext","float",3),prevPositionPrev:new c.a.Attribute("prevPositionPrev","float",3),prevPosition:new c.a.Attribute("prevPosition","float",3),prevPositionNext:new c.a.Attribute("prevPositionNext","float",3),offset:new c.a.Attribute("offset","float",1),color:new c.a.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(o){var r=this.attributes;this.vertexCount!==o&&(r.position.init(o),r.color.init(o),this.useNativeLine||(r.positionPrev.init(o),r.positionNext.init(o),r.offset.init(o)),o>65535?D(this.indices,Uint16Array)&&(this.indices=new Uint32Array(this.indices)):D(this.indices,Uint32Array)&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(o){this.triangleCount!==o&&(this.indices=o===0?null:this.vertexCount>65535?new Uint32Array(3*o):new Uint16Array(3*o))},_getCubicCurveApproxStep:function(o,r,n,h){return 1/(i.dist(o,r)+i.dist(n,r)+i.dist(h,n)+1)*this.segmentScale},getCubicCurveVertexCount:function(o,r,n,h){var p=this._getCubicCurveApproxStep(o,r,n,h),d=Math.ceil(1/p);return this.useNativeLine?2*d:2*d+2},getCubicCurveTriangleCount:function(o,r,n,h){var p=this._getCubicCurveApproxStep(o,r,n,h),d=Math.ceil(1/p);return this.useNativeLine?0:2*d},getLineVertexCount:function(){return this.getPolylineVertexCount(s)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(s)},getPolylineVertexCount:function(o){var r;return r=typeof o=="number"?o:typeof o[0]!="number"?o.length:o.length/3,this.useNativeLine?2*(r-1):2*(r-1)+2},getPolylineTriangleCount:function(o){var r;return r=typeof o=="number"?o:typeof o[0]!="number"?o.length:o.length/3,this.useNativeLine?0:2*Math.max(r-1,0)},addCubicCurve:function(o,r,n,h,p,d){d==null&&(d=1);var f=o[0],v=o[1],m=o[2],y=r[0],x=r[1],w=r[2],M=n[0],C=n[1],A=n[2],P=h[0],b=h[1],N=h[2],B=this._getCubicCurveApproxStep(o,r,n,h),z=B*B,F=z*B,V=3*B,H=3*z,U=6*z,j=6*F,X=f-2*y+M,Y=v-2*x+C,J=m-2*w+A,K=3*(y-M)-f+P,Q=3*(x-C)-v+b,Z=3*(w-A)-m+N,q=f,tt=v,$=m,rt=(y-f)*V+X*H+K*F,et=(x-v)*V+Y*H+Q*F,it=(w-m)*V+J*H+Z*F,ot=X*U+K*j,st=Y*U+Q*j,at=J*U+Z*j,vt=K*j,yt=Q*j,gt=Z*j,pt=0,bt=0,mt=Math.ceil(1/B),nt=new Float32Array(3*(mt+1)),lt=(nt=[],0);for(bt=0;bt<mt+1;bt++)nt[lt++]=q,nt[lt++]=tt,nt[lt++]=$,q+=rt,tt+=et,$+=it,rt+=ot,et+=st,it+=at,ot+=vt,st+=yt,at+=gt,(pt+=B)>1&&(q=rt>0?Math.min(q,P):Math.max(q,P),tt=et>0?Math.min(tt,b):Math.max(tt,b),$=it>0?Math.min($,N):Math.max($,N));return this.addPolyline(nt,p,d)},addLine:function(o,r,n,h){return this.addPolyline([o,r],n,h)},addPolyline:function(o,r,n,h,p){if(o.length){var d=typeof o[0]!="number";if(p==null&&(p=d?o.length:o.length/3),!(p<2)){h==null&&(h=0),n==null&&(n=1),this._itemVertexOffsets.push(this._vertexOffset);var f,v,m=(d=typeof o[0]!="number")?typeof r[0]!="number":r.length/4===p,y=this.attributes.position,x=this.attributes.positionPrev,w=this.attributes.positionNext,M=this.attributes.color,C=this.attributes.offset,A=this.indices,P=this._vertexOffset;n=Math.max(n,.01);for(var b=h;b<p;b++){if(d)f=o[b],v=m?r[b]:r;else{var N=3*b;if((f=f||[])[0]=o[N],f[1]=o[N+1],f[2]=o[N+2],m){var B=4*b;(v=v||[])[0]=r[B],v[1]=r[B+1],v[2]=r[B+2],v[3]=r[B+3]}else v=r}if(this.useNativeLine?b>1&&(y.copy(P,P-1),M.copy(P,P-1),P++):(b<p-1&&(x.set(P+2,f),x.set(P+3,f)),b>0&&(w.set(P-2,f),w.set(P-1,f)),y.set(P,f),y.set(P+1,f),M.set(P,v),M.set(P+1,v),C.set(P,n/2),C.set(P+1,-n/2),P+=2),this.useNativeLine)M.set(P,v),y.set(P,f),P++;else if(b>0){var z=3*this._triangleOffset;(A=this.indices)[z]=P-4,A[z+1]=P-3,A[z+2]=P-2,A[z+3]=P-3,A[z+4]=P-1,A[z+5]=P-2,this._triangleOffset+=2}}if(!this.useNativeLine){var F=this._vertexOffset,V=this._vertexOffset+2*p;x.copy(F,F+2),x.copy(F+1,F+3),w.copy(V-1,V-3),w.copy(V-2,V-4)}return this._vertexOffset=P,this._vertexOffset}}},setItemColor:function(o,r){for(var n=this._itemVertexOffsets[o],h=o<this._itemVertexOffsets.length-1?this._itemVertexOffsets[o+1]:this._vertexOffset,p=n;p<h;p++)this.attributes.color.set(p,r);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});e.a.util.defaults(a.prototype,t.a),g.a=a},function(_,g,u){var c=u(69),l=function(t,i){t=t||0,i=i||0,this.array=c.a.fromValues(t,i),this._dirty=!0};if(l.prototype={constructor:l,add:function(t){return c.a.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,i){return this.array[0]=t,this.array[1]=i,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this._dirty=!0,this},clone:function(){return new l(this.x,this.y)},copy:function(t){return c.a.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,i){return c.a.cross(t.array,this.array,i.array),t._dirty=!0,this},dist:function(t){return c.a.dist(this.array,t.array)},distance:function(t){return c.a.distance(this.array,t.array)},div:function(t){return c.a.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return c.a.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return c.a.dot(this.array,t.array)},len:function(){return c.a.len(this.array)},length:function(){return c.a.length(this.array)},lerp:function(t,i,s){return c.a.lerp(this.array,t.array,i.array,s),this._dirty=!0,this},min:function(t){return c.a.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return c.a.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return c.a.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return c.a.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return c.a.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return c.a.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return c.a.random(this.array,t),this._dirty=!0,this},scale:function(t){return c.a.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,i){return c.a.scaleAndAdd(this.array,this.array,t.array,i),this._dirty=!0,this},sqrDist:function(t){return c.a.sqrDist(this.array,t.array)},squaredDistance:function(t){return c.a.squaredDistance(this.array,t.array)},sqrLen:function(){return c.a.sqrLen(this.array)},squaredLength:function(){return c.a.squaredLength(this.array)},sub:function(t){return c.a.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return c.a.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat2:function(t){return c.a.transformMat2(this.array,this.array,t.array),this._dirty=!0,this},transformMat2d:function(t){return c.a.transformMat2d(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return c.a.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return c.a.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var e=l.prototype;Object.defineProperty(e,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Object.defineProperty(e,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}})}l.add=function(t,i,s){return c.a.add(t.array,i.array,s.array),t._dirty=!0,t},l.set=function(t,i,s){return c.a.set(t.array,i,s),t._dirty=!0,t},l.copy=function(t,i){return c.a.copy(t.array,i.array),t._dirty=!0,t},l.cross=function(t,i,s){return c.a.cross(t.array,i.array,s.array),t._dirty=!0,t},l.distance=l.dist=function(t,i){return c.a.distance(t.array,i.array)},l.divide=l.div=function(t,i,s){return c.a.divide(t.array,i.array,s.array),t._dirty=!0,t},l.dot=function(t,i){return c.a.dot(t.array,i.array)},l.len=function(t){return c.a.length(t.array)},l.lerp=function(t,i,s,a){return c.a.lerp(t.array,i.array,s.array,a),t._dirty=!0,t},l.min=function(t,i,s){return c.a.min(t.array,i.array,s.array),t._dirty=!0,t},l.max=function(t,i,s){return c.a.max(t.array,i.array,s.array),t._dirty=!0,t},l.multiply=l.mul=function(t,i,s){return c.a.multiply(t.array,i.array,s.array),t._dirty=!0,t},l.negate=function(t,i){return c.a.negate(t.array,i.array),t._dirty=!0,t},l.normalize=function(t,i){return c.a.normalize(t.array,i.array),t._dirty=!0,t},l.random=function(t,i){return c.a.random(t.array,i),t._dirty=!0,t},l.scale=function(t,i,s){return c.a.scale(t.array,i.array,s),t._dirty=!0,t},l.scaleAndAdd=function(t,i,s,a){return c.a.scaleAndAdd(t.array,i.array,s.array,a),t._dirty=!0,t},l.squaredDistance=l.sqrDist=function(t,i){return c.a.sqrDist(t.array,i.array)},l.squaredLength=l.sqrLen=function(t){return c.a.sqrLen(t.array)},l.subtract=l.sub=function(t,i,s){return c.a.subtract(t.array,i.array,s.array),t._dirty=!0,t},l.transformMat2=function(t,i,s){return c.a.transformMat2(t.array,i.array,s.array),t._dirty=!0,t},l.transformMat2d=function(t,i,s){return c.a.transformMat2d(t.array,i.array,s.array),t._dirty=!0,t},l.transformMat3=function(t,i,s){return c.a.transformMat3(t.array,i.array,s.array),t._dirty=!0,t},l.transformMat4=function(t,i,s){return c.a.transformMat4(t.array,i.array,s.array),t._dirty=!0,t},g.a=l},function(_,g,u){var c=u(4),l=u(11),e=u(23),t=u(72),i=u(13),s=t.a.isPowerOfTwo,a=["px","nx","py","ny","pz","nz"],o=c.a.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(n){var h=n.gl;h.bindTexture(h.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(n);var p=this.format,d=this.type;h.texParameteri(h.TEXTURE_CUBE_MAP,h.TEXTURE_WRAP_S,this.getAvailableWrapS()),h.texParameteri(h.TEXTURE_CUBE_MAP,h.TEXTURE_WRAP_T,this.getAvailableWrapT()),h.texParameteri(h.TEXTURE_CUBE_MAP,h.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),h.texParameteri(h.TEXTURE_CUBE_MAP,h.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var f=n.getGLExtension("EXT_texture_filter_anisotropic");if(f&&this.anisotropic>1&&h.texParameterf(h.TEXTURE_CUBE_MAP,f.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),d===36193&&(n.getGLExtension("OES_texture_half_float")||(d=l.a.FLOAT)),this.mipmaps.length)for(var v=this.width,m=this.height,y=0;y<this.mipmaps.length;y++){var x=this.mipmaps[y];this._updateTextureData(h,x,y,v,m,p,d),v/=2,m/=2}else this._updateTextureData(h,this,0,this.width,this.height,p,d),!this.NPOT&&this.useMipmap&&h.generateMipmap(h.TEXTURE_CUBE_MAP);h.bindTexture(h.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(n,h,p,d,f,v,m){for(var y=0;y<6;y++){var x=a[y],w=h.image&&h.image[x];w?n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+y,p,v,v,m,w):n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+y,p,v,d,f,0,v,m,h.pixels&&h.pixels[x])}},generateMipmap:function(n){var h=n.gl;this.useMipmap&&!this.NPOT&&(h.bindTexture(h.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),h.generateMipmap(h.TEXTURE_CUBE_MAP))},bind:function(n){n.gl.bindTexture(n.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(n))},unbind:function(n){n.gl.bindTexture(n.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?s(this.image.px.width)&&s(this.image.px.height):s(this.width)&&s(this.height)},isRenderable:function(){return this.image.px?r(this.image.px)&&r(this.image.nx)&&r(this.image.py)&&r(this.image.ny)&&r(this.image.pz)&&r(this.image.nz):!(!this.width||!this.height)},load:function(n,h){var p=0,d=this;return e.a.each(n,function(f,v){var m=i.a.createImage();h&&(m.crossOrigin=h),m.onload=function(){--p==0&&(d.dirty(),d.trigger("success",d))},m.onerror=function(){p--},p++,m.src=f,d.image[v]=m}),this}});function r(n){return n.width>0&&n.height>0}Object.defineProperty(o.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(n){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==n&&this.dirty(),this._width=n)}}),Object.defineProperty(o.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(n){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==n&&this.dirty(),this._height=n)}}),g.a=o},function(_,g,u){g.a={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}}},function(_,g,u){g.a={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}}},function(_,g,u){var c=u(1),l=u(42),e=u(0),t=u.n(e);function i(){}i.prototype={constructor:i,setScene:function(s){this._scene=s,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(s){this._lightRoot=s,this.mainLight=new c.a.DirectionalLight({shadowBias:.005}),this.ambientLight=new c.a.AmbientLight,s.add(this.mainLight),s.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(s){var a=this.mainLight,o=this.ambientLight,r=s.getModel("light"),n=r.getModel("main"),h=r.getModel("ambient");a.intensity=n.get("intensity"),o.intensity=h.get("intensity"),a.color=c.a.parseColor(n.get("color")).slice(0,3),o.color=c.a.parseColor(h.get("color")).slice(0,3);var p=n.get("alpha")||0,d=n.get("beta")||0;a.position.setArray(c.a.directionFromAlphaBeta(p,d)),a.lookAt(c.a.Vector3.ZERO),a.castShadow=n.get("shadow"),a.shadowResolution=c.a.getShadowResolution(n.get("shadowQuality"))},updateAmbientCubemap:function(s,a,o){var r=a.getModel("light.ambientCubemap"),n=r.get("texture");if(n){this._cubemapLightsCache=this._cubemapLightsCache||{};var h=this._cubemapLightsCache[n];if(!h){var p=this;h=this._cubemapLightsCache[n]=c.a.createAmbientCubemap(r.option,s,o,function(){p._isSkyboxFromAmbientCubemap&&p._skybox.setEnvironmentMap(h.specular.cubemap),o.getZr().refresh()})}this._lightRoot.add(h.diffuse),this._lightRoot.add(h.specular),this._currentCubemapLights=h}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(s,a,o){var r=a.get("environment"),n=this,h=(n._skybox=n._skybox||new l.a,n._skybox);if(r&&r!=="none")if(r==="auto")if(this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights){var p=this._currentCubemapLights.specular.cubemap;h.setEnvironmentMap(p),this._scene&&h.attachScene(this._scene),h.material.set("lod",3)}else this._skybox&&this._skybox.detachScene();else if(E(r)==="object"&&r.colorStops||typeof r=="string"&&t.a.color.parse(r)){this._isSkyboxFromAmbientCubemap=!1;var d=new c.a.Texture2D({anisotropic:8,flipY:!1});h.setEnvironmentMap(d);var f=d.image=document.createElement("canvas");f.width=f.height=16;var v=f.getContext("2d");new t.a.graphic.Rect({shape:{x:0,y:0,width:16,height:16},style:{fill:r}}).brush(v),h.attachScene(this._scene)}else this._isSkyboxFromAmbientCubemap=!1,d=c.a.loadTexture(r,o,{anisotropic:8,flipY:!1}),h.setEnvironmentMap(d),h.attachScene(this._scene);else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var m=a.coordinateSystem;if(this._skybox)if(!m||!m.viewGL||r==="auto"||r.match&&r.match(/.hdr$/))this._skybox.material.undefine("fragment","SRGB_DECODE");else{var y=m.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[y]("fragment","SRGB_DECODE")}}},g.a=i},function(_,g,u){g.a={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}}},function(_,g,u){var c=u(0),l=u.n(c),e={getFormattedLabel:function(t,i,s,a,o){s=s||"normal";var r=t.getData(a).getItemModel(i),n=t.getDataParams(i,a);o!=null&&D(n.value,Array)&&(n.value=n.value[o]);var h,p=r.get(s==="normal"?["label","formatter"]:["emphasis","label","formatter"]);return p==null&&(p=r.get(["label","formatter"])),typeof p=="function"?(n.status=s,h=p(n)):typeof p=="string"&&(h=l.a.format.formatTpl(p,n)),h},normalizeToArray:function(t){return D(t,Array)?t:t==null?[]:[t]}};g.a=e},function(_,g,u){var c,l=u(20),e={create:function(){var t=new l.a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},clone:function(t){var i=new l.a(4);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i},fromValues:function(t,i,s,a){var o=new l.a(4);return o[0]=t,o[1]=i,o[2]=s,o[3]=a,o},copy:function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t},set:function(t,i,s,a,o){return t[0]=i,t[1]=s,t[2]=a,t[3]=o,t},add:function(t,i,s){return t[0]=i[0]+s[0],t[1]=i[1]+s[1],t[2]=i[2]+s[2],t[3]=i[3]+s[3],t},subtract:function(t,i,s){return t[0]=i[0]-s[0],t[1]=i[1]-s[1],t[2]=i[2]-s[2],t[3]=i[3]-s[3],t}};e.sub=e.subtract,e.multiply=function(t,i,s){return t[0]=i[0]*s[0],t[1]=i[1]*s[1],t[2]=i[2]*s[2],t[3]=i[3]*s[3],t},e.mul=e.multiply,e.divide=function(t,i,s){return t[0]=i[0]/s[0],t[1]=i[1]/s[1],t[2]=i[2]/s[2],t[3]=i[3]/s[3],t},e.div=e.divide,e.min=function(t,i,s){return t[0]=Math.min(i[0],s[0]),t[1]=Math.min(i[1],s[1]),t[2]=Math.min(i[2],s[2]),t[3]=Math.min(i[3],s[3]),t},e.max=function(t,i,s){return t[0]=Math.max(i[0],s[0]),t[1]=Math.max(i[1],s[1]),t[2]=Math.max(i[2],s[2]),t[3]=Math.max(i[3],s[3]),t},e.scale=function(t,i,s){return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=i[3]*s,t},e.scaleAndAdd=function(t,i,s,a){return t[0]=i[0]+s[0]*a,t[1]=i[1]+s[1]*a,t[2]=i[2]+s[2]*a,t[3]=i[3]+s[3]*a,t},e.distance=function(t,i){var s=i[0]-t[0],a=i[1]-t[1],o=i[2]-t[2],r=i[3]-t[3];return Math.sqrt(s*s+a*a+o*o+r*r)},e.dist=e.distance,e.squaredDistance=function(t,i){var s=i[0]-t[0],a=i[1]-t[1],o=i[2]-t[2],r=i[3]-t[3];return s*s+a*a+o*o+r*r},e.sqrDist=e.squaredDistance,e.length=function(t){var i=t[0],s=t[1],a=t[2],o=t[3];return Math.sqrt(i*i+s*s+a*a+o*o)},e.len=e.length,e.squaredLength=function(t){var i=t[0],s=t[1],a=t[2],o=t[3];return i*i+s*s+a*a+o*o},e.sqrLen=e.squaredLength,e.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t[3]=-i[3],t},e.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],t[3]=1/i[3],t},e.normalize=function(t,i){var s=i[0],a=i[1],o=i[2],r=i[3],n=s*s+a*a+o*o+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=i[3]*n),t},e.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]},e.lerp=function(t,i,s,a){var o=i[0],r=i[1],n=i[2],h=i[3];return t[0]=o+a*(s[0]-o),t[1]=r+a*(s[1]-r),t[2]=n+a*(s[2]-n),t[3]=h+a*(s[3]-h),t},e.random=function(t,i){return i=i||1,t[0]=Object(l.c)(),t[1]=Object(l.c)(),t[2]=Object(l.c)(),t[3]=Object(l.c)(),e.normalize(t,t),e.scale(t,t,i),t},e.transformMat4=function(t,i,s){var a=i[0],o=i[1],r=i[2],n=i[3];return t[0]=s[0]*a+s[4]*o+s[8]*r+s[12]*n,t[1]=s[1]*a+s[5]*o+s[9]*r+s[13]*n,t[2]=s[2]*a+s[6]*o+s[10]*r+s[14]*n,t[3]=s[3]*a+s[7]*o+s[11]*r+s[15]*n,t},e.transformQuat=function(t,i,s){var a=i[0],o=i[1],r=i[2],n=s[0],h=s[1],p=s[2],d=s[3],f=d*a+h*r-p*o,v=d*o+p*a-n*r,m=d*r+n*o-h*a,y=-n*a-h*o-p*r;return t[0]=f*d+y*-n+v*-p-m*-h,t[1]=v*d+y*-h+m*-n-f*-p,t[2]=m*d+y*-p+f*-h-v*-n,t},e.forEach=(c=e.create(),function(t,i,s,a,o,r){var n,h;for(i||(i=4),s||(s=0),h=a?Math.min(a*i+s,t.length):t.length,n=s;n<h;n+=i)c[0]=t[n],c[1]=t[n+1],c[2]=t[n+2],c[3]=t[n+3],o(c,c,r),t[n]=c[0],t[n+1]=c[1],t[n+2]=c[2],t[n+3]=c[3];return t}),g.a=e},function(_,g,u){var c=u(20),l={create:function(){var e=new c.a(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},clone:function(e){var t=new c.a(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,t){if(e===t){var i=t[1],s=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=s,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var i=t[0],s=t[1],a=t[2],o=t[3],r=t[4],n=t[5],h=t[6],p=t[7],d=t[8],f=d*r-n*p,v=-d*o+n*h,m=p*o-r*h,y=i*f+s*v+a*m;return y?(y=1/y,e[0]=f*y,e[1]=(-d*s+a*p)*y,e[2]=(n*s-a*r)*y,e[3]=v*y,e[4]=(d*i-a*h)*y,e[5]=(-n*i+a*o)*y,e[6]=m*y,e[7]=(-p*i+s*h)*y,e[8]=(r*i-s*o)*y,e):null},adjoint:function(e,t){var i=t[0],s=t[1],a=t[2],o=t[3],r=t[4],n=t[5],h=t[6],p=t[7],d=t[8];return e[0]=r*d-n*p,e[1]=a*p-s*d,e[2]=s*n-a*r,e[3]=n*h-o*d,e[4]=i*d-a*h,e[5]=a*o-i*n,e[6]=o*p-r*h,e[7]=s*h-i*p,e[8]=i*r-s*o,e},determinant:function(e){var t=e[0],i=e[1],s=e[2],a=e[3],o=e[4],r=e[5],n=e[6],h=e[7],p=e[8];return t*(p*o-r*h)+i*(-p*a+r*n)+s*(h*a-o*n)},multiply:function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=t[4],h=t[5],p=t[6],d=t[7],f=t[8],v=i[0],m=i[1],y=i[2],x=i[3],w=i[4],M=i[5],C=i[6],A=i[7],P=i[8];return e[0]=v*s+m*r+y*p,e[1]=v*a+m*n+y*d,e[2]=v*o+m*h+y*f,e[3]=x*s+w*r+M*p,e[4]=x*a+w*n+M*d,e[5]=x*o+w*h+M*f,e[6]=C*s+A*r+P*p,e[7]=C*a+A*n+P*d,e[8]=C*o+A*h+P*f,e}};l.mul=l.multiply,l.translate=function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=t[4],h=t[5],p=t[6],d=t[7],f=t[8],v=i[0],m=i[1];return e[0]=s,e[1]=a,e[2]=o,e[3]=r,e[4]=n,e[5]=h,e[6]=v*s+m*r+p,e[7]=v*a+m*n+d,e[8]=v*o+m*h+f,e},l.rotate=function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=t[4],h=t[5],p=t[6],d=t[7],f=t[8],v=Math.sin(i),m=Math.cos(i);return e[0]=m*s+v*r,e[1]=m*a+v*n,e[2]=m*o+v*h,e[3]=m*r-v*s,e[4]=m*n-v*a,e[5]=m*h-v*o,e[6]=p,e[7]=d,e[8]=f,e},l.scale=function(e,t,i){var s=i[0],a=i[1];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},l.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},l.fromQuat=function(e,t){var i=t[0],s=t[1],a=t[2],o=t[3],r=i+i,n=s+s,h=a+a,p=i*r,d=s*r,f=s*n,v=a*r,m=a*n,y=a*h,x=o*r,w=o*n,M=o*h;return e[0]=1-f-y,e[3]=d-M,e[6]=v+w,e[1]=d+M,e[4]=1-p-y,e[7]=m-x,e[2]=v-w,e[5]=m+x,e[8]=1-p-f,e},l.normalFromMat4=function(e,t){var i=t[0],s=t[1],a=t[2],o=t[3],r=t[4],n=t[5],h=t[6],p=t[7],d=t[8],f=t[9],v=t[10],m=t[11],y=t[12],x=t[13],w=t[14],M=t[15],C=i*n-s*r,A=i*h-a*r,P=i*p-o*r,b=s*h-a*n,N=s*p-o*n,B=a*p-o*h,z=d*x-f*y,F=d*w-v*y,V=d*M-m*y,H=f*w-v*x,U=f*M-m*x,j=v*M-m*w,X=C*j-A*U+P*H+b*V-N*F+B*z;return X?(X=1/X,e[0]=(n*j-h*U+p*H)*X,e[1]=(h*V-r*j-p*F)*X,e[2]=(r*U-n*V+p*z)*X,e[3]=(a*U-s*j-o*H)*X,e[4]=(i*j-a*V+o*F)*X,e[5]=(s*V-i*U-o*z)*X,e[6]=(x*B-w*N+M*b)*X,e[7]=(w*P-y*B-M*A)*X,e[8]=(y*N-x*P+M*C)*X,e):null},l.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},g.a=l},function(_,g,u){var c,l,e,t,i=u(8),s=u(3),a=u(56),o=u(7),r=u(21),n=u(18),h=0,p=i.a.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+h++),this.position||(this.position=new s.a),this.rotation||(this.rotation=new a.a),this.scale||(this.scale=new s.a(1,1,1)),this.worldTransform=new o.a,this.localTransform=new o.a,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(d){var f=this._scene;if(f){var v=f._nodeRepository;delete v[this.name],v[d]=this}this.name=d},add:function(d){var f=d._parent;if(f!==this){f&&f.remove(d),d._parent=this,this._children.push(d);var v=this._scene;v&&v!==d.scene&&d.traverse(this._addSelfToScene,this),d._needsUpdateWorldTransform=!0}},remove:function(d){var f=this._children,v=f.indexOf(d);v<0||(f.splice(v,1),d._parent=null,this._scene&&d.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var d=this._children,f=0;f<d.length;f++)d[f]._parent=null,this._scene&&d[f].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(d){d._scene.removeFromScene(d),d._scene=null},_addSelfToScene:function(d){this._scene.addToScene(d),d._scene=this._scene},isAncestor:function(d){for(var f=d._parent;f;){if(f===this)return!0;f=f._parent}return!1},children:function(){return this._children.slice()},childAt:function(d){return this._children[d]},getChildByName:function(d){for(var f=this._children,v=0;v<f.length;v++)if(f[v].name===d)return f[v]},getDescendantByName:function(d){for(var f=this._children,v=0;v<f.length;v++){var m=f[v];if(m.name===d)return m;var y=m.getDescendantByName(d);if(y)return y}},queryNode:function(d){if(d){for(var f=d.split("/"),v=this,m=0;m<f.length;m++){var y=f[m];if(y){for(var x=!1,w=v._children,M=0;M<w.length;M++){var C=w[M];if(C.name===y){v=C,x=!0;break}}if(!x)return}}return v}},getPath:function(d){if(!this._parent)return"/";for(var f=this._parent,v=this.name;f._parent&&(v=f.name+"/"+v,f._parent!=d);)f=f._parent;return!f._parent&&d?null:v},traverse:function(d,f){d.call(f,this);for(var v=this._children,m=0,y=v.length;m<y;m++)v[m].traverse(d,f)},eachChild:function(d,f){for(var v=this._children,m=0,y=v.length;m<y;m++){var x=v[m];d.call(f,x,m)}},setLocalTransform:function(d){r.a.copy(this.localTransform.array,d.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(d){var f=d?null:this.scale;this.localTransform.decomposeMatrix(f,this.rotation,this.position)},setWorldTransform:function(d){r.a.copy(this.worldTransform.array,d.array),this.decomposeWorldTransform()},decomposeWorldTransform:(t=r.a.create(),function(d){var f=this.localTransform,v=this.worldTransform;this._parent?(r.a.invert(t,this._parent.worldTransform.array),r.a.multiply(f.array,t,v.array)):r.a.copy(f.array,v.array);var m=d?null:this.scale;f.decomposeMatrix(m,this.rotation,this.position)}),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var d=this.position,f=this.rotation,v=this.scale;if(this.transformNeedsUpdate()){var m=this.localTransform.array;r.a.fromRotationTranslation(m,f.array,d.array),r.a.scale(m,m,v.array),f._dirty=!1,v._dirty=!1,d._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var d=this.localTransform.array,f=this.worldTransform.array;this._parent?r.a.multiplyAffine(f,this._parent.worldTransform.array,d):r.a.copy(f,d)},updateWorldTransform:function(){for(var d=this;d&&d.getParent()&&d.getParent().transformNeedsUpdate();)d=d.getParent();d.update()},update:function(d){this.autoUpdateLocalTransform?this.updateLocalTransform():d=!0,(d||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),d=!0,this._needsUpdateWorldTransform=!1);for(var f=this._children,v=0,m=f.length;v<m;v++)f[v].update(d)},getBoundingBox:function(){function d(y){return!y.invisible&&y.geometry}var f=new n.a,v=new o.a,m=new o.a;return function(y,x){return x=x||new n.a,this._parent?o.a.invert(m,this._parent.worldTransform):o.a.identity(m),this.traverse(function(w){w.geometry&&w.geometry.boundingBox&&(f.copy(w.geometry.boundingBox),o.a.multiply(v,m,w.worldTransform),f.applyTransform(v),x.union(f))},this,d),x}}(),getWorldPosition:function(d){this.transformNeedsUpdate()&&this.updateWorldTransform();var f=this.worldTransform.array;if(d){var v=d.array;return v[0]=f[12],v[1]=f[13],v[2]=f[14],d}return new s.a(f[12],f[13],f[14])},clone:function(){var d=new this.constructor,f=this._children;d.setName(this.name),d.position.copy(this.position),d.rotation.copy(this.rotation),d.scale.copy(this.scale);for(var v=0;v<f.length;v++)d.add(f[v].clone());return d},rotateAround:(l=new s.a,e=new o.a,function(d,f,v){l.copy(this.position).subtract(d);var m=this.localTransform;m.identity(),m.translate(d),m.rotate(v,f),e.fromRotationTranslation(this.rotation,l),m.multiply(e),m.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}),lookAt:(c=new o.a,function(d,f){c.lookAt(this.position,d,f||this.localTransform.y).invert(),this.setLocalTransform(c),this.target=d})});g.a=p},function(_,g,u){var c=u(35),l=u(24),e=u(58),t=u(18),i=u(23),s=u(21),a=u(68),o=u(7),r=s.a.create(),n=s.a.create(),h={};function p(x){var w=[],M=Object.keys(x);M.sort();for(var C=0;C<M.length;C++){var A=M[C];w.push(A+" "+x[A])}var P=w.join(`
`);if(h[P])return h[P];var b=i.a.genGUID();return h[P]=b,b}function d(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}d.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},d.prototype.add=function(x,w){w?this.transparent[this._transparentCount++]=x:this.opaque[this._opaqueCount++]=x},d.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var f,v,m=c.a.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new t.a,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new a.a(20)}},function(){this._scene=this},{addToScene:function(x){D(x,e.a)?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(x)):D(x,l.a)&&this.lights.push(x),x.name&&(this._nodeRepository[x.name]=x)},removeFromScene:function(x){var w;D(x,e.a)?(w=this._cameraList.indexOf(x))>=0&&this._cameraList.splice(w,1):D(x,l.a)&&(w=this.lights.indexOf(x))>=0&&this.lights.splice(w,1),x.name&&delete this._nodeRepository[x.name]},getNode:function(x){return this._nodeRepository[x]},setMainCamera:function(x){var w=this._cameraList.indexOf(x);w>=0&&this._cameraList.splice(w,1),this._cameraList.unshift(x)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var x=this.lights;this._previousLightNumber=this._lightNumber;for(var w={},M=0;M<x.length;M++){var C=x[M];if(!C.invisible){var A=C.group;w[A]||(w[A]={}),w[A][C.type]=w[A][C.type]||0,w[A][C.type]++}}for(var P in this._lightNumber=w,w)this._lightProgramKeys[P]=p(w[P]);this._updateLightUniforms()},cloneNode:function(x){var w=x.clone(),M={};return function C(A,P){M[A.__uid__]=P;for(var b=0;b<A._children.length;b++)C(A._children[b],P._children[b])}(x,w),w.traverse(function(C){C.skeleton&&(C.skeleton=C.skeleton.clone(M)),C.material&&(C.material=C.material.clone())}),w},updateRenderList:function(x,w){var M=x.__uid__,C=this._renderLists.get(M);C||(C=new d,this._renderLists.put(M,C)),C.startCount(),w&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0));var A=this.material&&this.material.transparent||!1;return this._doUpdateRenderList(this,x,A,C,w),C.endCount(),C},getRenderList:function(x){return this._renderLists.get(x.__uid__)},_doUpdateRenderList:function(x,w,M,C,A){if(!x.invisible)for(var P=0;P<x._children.length;P++){var b=x._children[P];if(b.isRenderable()){var N=b.isSkinnedMesh()?r:b.worldTransform.array,B=b.geometry;s.a.multiplyAffine(n,w.viewMatrix.array,N),(A&&!B.boundingBox||!this.isFrustumCulled(b,w,n))&&C.add(b,b.material.transparent||M)}b._children.length>0&&this._doUpdateRenderList(b,w,M,C,A)}},isFrustumCulled:(f=new t.a,v=new o.a,function(x,w,M){var C=x.boundingBox;if(C||(C=x.skeleton&&x.skeleton.boundingBox?x.skeleton.boundingBox:x.geometry.boundingBox),!C)return!1;if(v.array=M,f.transformFrom(C,v),x.castShadow&&this.viewBoundingBoxLastFrame.union(f),x.frustumCulling){if(!f.intersectBoundingBox(w.frustum.boundingBox))return!0;v.array=w.projectionMatrix.array,f.max.array[2]>0&&f.min.array[2]<0&&(f.max.array[2]=-1e-20),f.applyProjection(v);var A=f.min.array,P=f.max.array;if(P[0]<-1||A[0]>1||P[1]<-1||A[1]>1||P[2]<-1||A[2]>1)return!0}return!1}),_updateLightUniforms:function(){var x=this.lights;x.sort(y);var w=this._lightUniforms;for(var M in w)for(var C in w[M])w[M][C].value.length=0;for(var A=0;A<x.length;A++){var P=x[A];if(!P.invisible)for(var C in M=P.group,P.uniformTemplates){var b=P.uniformTemplates[C],N=b.value(P);if(N!=null){w[M]||(w[M]={}),w[M][C]||(w[M][C]={type:"",value:[]});var B=w[M][C];switch(B.type=b.type+"v",b.type){case"1i":case"1f":case"t":B.value.push(N);break;case"2f":case"3f":case"4f":for(var z=0;z<N.length;z++)B.value.push(N[z]);break;default:console.error("Unkown light uniform type "+b.type)}}}}},getLightGroups:function(){var x=[];for(var w in this._lightNumber)x.push(w);return x},getNumberChangedLightGroups:function(){var x=[];for(var w in this._lightNumber)this.isLightNumberChanged(w)&&x.push(w);return x},isLightNumberChanged:function(x){var w=this._previousLightNumber,M=this._lightNumber;for(var C in M[x])if(!w[x]||M[x][C]!==w[x][C])return!0;for(var C in w[x])if(!M[x]||M[x][C]!==w[x][C])return!0;return!1},getLightsNumbers:function(x){return this._lightNumber[x]},getProgramKey:function(x){return this._lightProgramKeys[x]},setLightUniforms:function(){function x(w,M,C){for(var A in w){var P=w[A];if(P.type==="tv"){if(!M.hasUniform(A))continue;for(var b=[],N=0;N<P.value.length;N++){var B=P.value[N],z=M.takeCurrentTextureSlot(C,B);b.push(z)}M.setUniform(C.gl,"1iv",A,b)}else M.setUniform(C.gl,P.type,A,P.value)}}return function(w,M,C){x(this._lightUniforms[M],w,C),x(this.shadowUniforms,w,C)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function y(x,w){if(w.castShadow&&!x.castShadow)return!0}g.a=m},function(_,g,u){var c=u(58),l=c.a.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var e=this.fov/180*Math.PI;this.projectionMatrix.perspective(e,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array,t=2*Math.atan(1/e[5]);this.fov=t/Math.PI*180,this.aspect=e[5]/e[0],this.near=e[14]/(e[10]-1),this.far=e[14]/(e[10]+1)},clone:function(){var e=c.a.prototype.clone.call(this);return e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e}});g.a=l},function(_,g,u){var c=u(58),l=c.a.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array;this.left=(-1-e[12])/e[0],this.right=(1-e[12])/e[0],this.top=(1-e[13])/e[5],this.bottom=(-1-e[13])/e[5],this.near=-(-1-e[14])/e[10],this.far=-(1-e[14])/e[10]},clone:function(){var e=c.a.prototype.clone.call(this);return e.left=this.left,e.right=this.right,e.near=this.near,e.far=this.far,e.top=this.top,e.bottom=this.bottom,e}});g.a=l},function(_,g,u){g.a={convertToDynamicArray:function(c){c&&this.resetOffset();var l=this.attributes;for(var e in l)c||!l[e].value?l[e].value=[]:l[e].value=Array.prototype.slice.call(l[e].value);c||!this.indices?this.indices=[]:this.indices=Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var c=this.attributes;for(var l in c)c[l].value&&c[l].value.length>0?c[l].value=new Float32Array(c[l].value):c[l].value=null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}}},function(_,g,u){var c=u(0),l=u.n(c);g.a=function(e,t,i){var s=e.getData(),a=e.getRawValue(t),o=l.a.util.isArray(a)?function(d){var f=[],v=function(y,x){var w=[];return l.a.util.each(y.dimensions,function(M){var C=y.getDimensionInfo(M),A=C.otherDims.tooltip;A!=null&&A!==!1&&(w[A]=C.name)}),w}(s);function m(y,x){var w=s.getDimensionInfo(x);if(w&&w.otherDims.tooltip!==!1){var M=w.type,C="- "+(w.tooltipName||w.name)+": "+(M==="ordinal"?y+"":M==="time"?i?"":l.a.format.formatTime("yyyy/MM/dd hh:mm:ss",y):l.a.format.addCommas(y));C&&f.push(l.a.format.encodeHTML(C))}}return v.length?l.a.util.each(v,function(y){m(s.get(y,t),y)}):l.a.util.each(d,m),"<br/>"+f.join("<br/>")}(a):l.a.format.encodeHTML(l.a.format.addCommas(a)),r=s.getName(t),n=s.getItemVisual(t,"color");l.a.util.isObject(n)&&n.colorStops&&(n=(n.colorStops[0]||{}).color),n=n||"transparent";var h=l.a.format.getTooltipMarker(n),p=e.name;return p==="\0-"&&(p=""),p=p?l.a.format.encodeHTML(p)+(i?": ":"<br/>"):"",i?h+p+o:p+h+(r?l.a.format.encodeHTML(r)+": "+o:o)}},function(_,g,u){var c=u(71),l=u(11),e=c.a.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var t=c.a.prototype.clone.call(this);return t.skeleton=this.skeleton,this.joints&&(t.joints=this.joints.slice()),t}});e.POINTS=l.a.POINTS,e.LINES=l.a.LINES,e.LINE_LOOP=l.a.LINE_LOOP,e.LINE_STRIP=l.a.LINE_STRIP,e.TRIANGLES=l.a.TRIANGLES,e.TRIANGLE_STRIP=l.a.TRIANGLE_STRIP,e.TRIANGLE_FAN=l.a.TRIANGLE_FAN,e.BACK=l.a.BACK,e.FRONT=l.a.FRONT,e.FRONT_AND_BACK=l.a.FRONT_AND_BACK,e.CW=l.a.CW,e.CCW=l.a.CCW,g.a=e},function(_,g,u){var c=u(41),l=u(76),e=u(9),t=u(19),i=u(4),s=u(37),a=u(7),o=u(120);e.a.import(o.a);var r=c.a.extend(function(){var n=new e.a({vertex:e.a.source("clay.skybox.vertex"),fragment:e.a.source("clay.skybox.fragment")}),h=new t.a({shader:n,depthMask:!1});return{scene:null,geometry:new l.a,material:h,environmentMap:null,culling:!1,_dummyCamera:new s.a}},function(){var n=this.scene;n&&this.attachScene(n),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(n){this.scene&&this.detachScene(),n.skybox=this,this.scene=n,n.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(n){this.detachScene(),this.geometry.dispose(n)},setEnvironmentMap:function(n){n.textureType==="texture2D"?(this.material.define("EQUIRECTANGULAR"),n.minFilter=i.a.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",n)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(n,h,p){this.renderSkybox(n,p)},renderSkybox:function(n,h){var p=this._dummyCamera;p.aspect=n.getViewportAspect(),p.fov=h.fov||50,p.updateProjectionMatrix(),a.a.invert(p.invProjectionMatrix,p.projectionMatrix),p.worldTransform.copy(h.worldTransform),p.viewMatrix.copy(h.viewMatrix),this.position.copy(h.getWorldPosition()),this.update(),n.gl.disable(n.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),n.renderPass([this],p)}});g.a=r},function(_,g,u){var c=u(14),l=u(18),e=c.a.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var t=this.heightSegments,i=this.widthSegments,s=this.attributes,a=[],o=[],r=[],n=[],h=0;h<=t;h++)for(var p=h/t,d=0;d<=i;d++){var f=d/i;if(a.push([2*f-1,2*p-1,0]),o&&o.push([f,p]),r&&r.push([0,0,1]),d<i&&h<t){var v=d+h*(i+1);n.push([v,v+1,v+i+1]),n.push([v+i+1,v+1,v+i+2])}}s.position.fromArray(a),s.texcoord0.fromArray(o),s.normal.fromArray(r),this.initIndicesFromArray(n),this.boundingBox=new l.a,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}});g.a=e},function(_,g,u){g.a={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(c){c=c||{},this.option.viewControl=this.option.viewControl||{},c.alpha!=null&&(this.option.viewControl.alpha=c.alpha),c.beta!=null&&(this.option.viewControl.beta=c.beta),c.distance!=null&&(this.option.viewControl.distance=c.distance),c.center!=null&&(this.option.viewControl.center=c.center)}}},function(_,g,u){var c=u(8),l=u(26),e=u(3),t=(u(56),u(2).a.firstNotNull),i={left:0,middle:1,right:2};function s(o){return D(o,Array)||(o=[o,o]),o}var a=c.a.extend(function(){return{zr:null,viewGL:null,_center:new e.a,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new l.a,_panVelocity:new l.a,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(o){this[o]=this[o].bind(this)},this)},{init:function(){var o=this.zr;o&&(o.on("mousedown",this._mouseDownHandler),o.on("globalout",this._mouseUpHandler),o.on("mousewheel",this._mouseWheelHandler),o.on("pinch",this._pinchHandler),o.animation.on("frame",this._update),o.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var o=this.zr;o&&(o.off("mousedown",this._mouseDownHandler),o.off("mousemove",this._mouseMoveHandler),o.off("mouseup",this._mouseUpHandler),o.off("mousewheel",this._mouseWheelHandler),o.off("pinch",this._pinchHandler),o.off("globalout",this._mouseUpHandler),o.dom.removeEventListener("contextmenu",this._contextMenuHandler),o.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(o){this._distance=o,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(o){this._orthoSize=o,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(o){o=Math.max(Math.min(this.maxAlpha,o),this.minAlpha),this._theta=o/180*Math.PI,this._needsUpdate=!0},setBeta:function(o){o=Math.max(Math.min(this.maxBeta,o),this.minBeta),this._phi=-o/180*Math.PI,this._needsUpdate=!0},setCenter:function(o){this._center.setArray(o)},setViewGL:function(o){this.viewGL=o},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(o,r){var n=(r=r||{}).baseDistance||0,h=r.baseOrthoSize||1,p=o.get("projection");p!=="perspective"&&p!=="orthographic"&&p!=="isometric"&&(console.error("Unkown projection type %s, use perspective projection instead.",p),p="perspective"),this._projection=p,this.viewGL.setProjection(p);var d=o.get("distance")+n,f=o.get("orthographicSize")+h;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(M){this[M[0]]=t(o.get(M[0]),M[1])},this),this.minDistance+=n,this.maxDistance+=n,this.minOrthographicSize+=h,this.maxOrthographicSize+=h;var v=o.ecModel,m={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(M){m[M]=t(o.get(M),v&&v.get(M))});var y=t(r.alpha,o.get("alpha"))||0,x=t(r.beta,o.get("beta"))||0,w=t(r.center,o.get("center"))||[0,0,0];m.animation&&m.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:y,beta:x,center:w,distance:d,orthographicSize:f,easing:m.animationEasingUpdate,duration:m.animationDurationUpdate}):(this.setDistance(d),this.setAlpha(y),this.setBeta(x),this.setCenter(w),this.setOrthographicSize(f)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){i[this.panMouseButton]==null&&console.error("Unkown panMouseButton %s. It should be left|middle|right",this.panMouseButton),i[this.rotateMouseButton]==null&&console.error("Unkown rotateMouseButton %s. It should be left|middle|right",this.rotateMouseButton),this.autoRotateDirection!=="cw"&&this.autoRotateDirection!=="ccw"&&console.error("Unkown autoRotateDirection %s. It should be cw|ccw",this.autoRotateDirection)},animateTo:function(o){var r=this.zr,n=this,h={},p={};return o.distance!=null&&(h.distance=this.getDistance(),p.distance=o.distance),o.orthographicSize!=null&&(h.orthographicSize=this.getOrthographicSize(),p.orthographicSize=o.orthographicSize),o.alpha!=null&&(h.alpha=this.getAlpha(),p.alpha=o.alpha),o.beta!=null&&(h.beta=this.getBeta(),p.beta=o.beta),o.center!=null&&(h.center=this.getCenter(),p.center=o.center),this._addAnimator(r.animation.animate(h).when(o.duration||1e3,p).during(function(){h.alpha!=null&&n.setAlpha(h.alpha),h.beta!=null&&n.setBeta(h.beta),h.distance!=null&&n.setDistance(h.distance),h.center!=null&&n.setCenter(h.center),h.orthographicSize!=null&&n.setOrthographicSize(h.orthographicSize),n._needsUpdate=!0})).start(o.easing||"linear")},stopAllAnimation:function(){for(var o=0;o<this._animators.length;o++)this._animators[o].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(o){if(this._rotating){var r=(this.autoRotateDirection==="cw"?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=r*o/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(o=Math.min(o,50),this._updateDistanceOrSize(o),this._updatePan(o),this._updateRotate(o),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(o){var r=this._rotateVelocity;this._phi=r.y*o/20+this._phi,this._theta=r.x*o/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(r,Math.pow(this.damping,o/16))},_updateDistanceOrSize:function(o){this._projection==="perspective"?this._setDistance(this._distance+this._zoomSpeed*o/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*o/20),this._zoomSpeed*=Math.pow(this.damping,o/16)},_setDistance:function(o){this._distance=Math.max(Math.min(o,this.maxDistance),this.minDistance)},_setOrthoSize:function(o){this._orthoSize=Math.max(Math.min(o,this.maxOrthographicSize),this.minOrthographicSize);var r=this.getCamera(),n=this._orthoSize,h=n/this.viewGL.viewport.height*this.viewGL.viewport.width;r.left=-h/2,r.right=h/2,r.top=n/2,r.bottom=-n/2},_updatePan:function(o){var r=this._panVelocity,n=this._distance,h=this.getCamera(),p=h.worldTransform.y,d=h.worldTransform.x;this._center.scaleAndAdd(d,-r.x*n/200).scaleAndAdd(p,-r.y*n/200),this._vectorDamping(r,0)},_updateTransform:function(){var o=this.getCamera(),r=new e.a,n=this._theta+Math.PI/2,h=this._phi+Math.PI/2,p=Math.sin(n);r.x=p*Math.cos(h),r.y=-Math.cos(n),r.z=p*Math.sin(h),o.position.copy(this._center).scaleAndAdd(r,this._distance),o.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var o=this.autoRotateAfterStill,r=this;!isNaN(o)&&o>0&&(this._stillTimeout=setTimeout(function(){r._rotating=!0},1e3*o))},_vectorDamping:function(o,r){var n=o.len();(n*=r)<1e-4&&(n=0),o.normalize().scale(n)},_decomposeTransform:function(){if(this.getCamera()){this.getCamera().updateWorldTransform();var o=this.getCamera().worldTransform.z,r=Math.asin(o.y),n=Math.atan2(o.x,o.z);this._theta=r,this._phi=-n,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(o){if(!o.target&&!this._isAnimating()){var r=o.offsetX,n=o.offsetY;this.viewGL&&!this.viewGL.containPoint(r,n)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),o.event.targetTouches?o.event.targetTouches.length===1&&(this._mode="rotate"):o.event.button===i[this.rotateMouseButton]?this._mode="rotate":o.event.button===i[this.panMouseButton]?this._mode="pan":this._mode="",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=o.offsetX,this._mouseY=o.offsetY)}},_mouseMoveHandler:function(o){if(!(o.target&&o.target.__isGLToZRProxy||this._isAnimating())){var r=s(this.panSensitivity),n=s(this.rotateSensitivity);this._mode==="rotate"?(this._rotateVelocity.y=(o.offsetX-this._mouseX)/this.zr.getHeight()*2*n[0],this._rotateVelocity.x=(o.offsetY-this._mouseY)/this.zr.getWidth()*2*n[1]):this._mode==="pan"&&(this._panVelocity.x=(o.offsetX-this._mouseX)/this.zr.getWidth()*r[0]*400,this._panVelocity.y=(-o.offsetY+this._mouseY)/this.zr.getHeight()*r[1]*400),this._mouseX=o.offsetX,this._mouseY=o.offsetY,o.event.preventDefault()}},_mouseWheelHandler:function(o){if(!this._isAnimating()){var r=o.event.wheelDelta||-o.event.detail;this._zoomHandler(o,r)}},_pinchHandler:function(o){this._isAnimating()||(this._zoomHandler(o,o.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(o,r){if(r!==0){var n,h=o.offsetX,p=o.offsetY;this.viewGL&&!this.viewGL.containPoint(h,p)||(n=this._projection==="perspective"?Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(r>0?-1:1)*n*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&this._mode==="rotate"&&this._startCountingStill(),o.event.preventDefault())}},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return this.rotateMouseButton==="right"||this.panMouseButton==="right"},_contextMenuHandler:function(o){this._isRightMouseButtonUsed()&&o.preventDefault()},_addAnimator:function(o){var r=this._animators;return r.push(o),o.done(function(){var n=r.indexOf(o);n>=0&&r.splice(n,1)}),o}});Object.defineProperty(a.prototype,"autoRotate",{get:function(o){return this._autoRotate},set:function(o){this._autoRotate=o,this._rotating=o}}),g.a=a},function(_,g,u){g.a=`@export ecgl.lines3D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

void main()
{
 gl_Position = worldViewProjection * vec4(position, 1.0);
 v_Color = a_Color;
}

@end

@export ecgl.lines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif
}
@end



@export ecgl.lines3D.clipNear

vec4 clipNear(vec4 p1, vec4 p2) {
 float n = (p1.w - near) / (p1.w - p2.w);
 return vec4(mix(p1.xy, p2.xy, n), -near, near);
}

@end

@export ecgl.lines3D.expandLine
#ifdef VERTEX_ANIMATION
 vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);
 vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);
 vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);
#else
 vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);
 vec4 currProj = worldViewProjection * vec4(position, 1.0);
 vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);
#endif

 if (currProj.w < 0.0) {
 if (nextProj.w > 0.0) {
 currProj = clipNear(currProj, nextProj);
 }
 else if (prevProj.w > 0.0) {
 currProj = clipNear(currProj, prevProj);
 }
 }

 vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;

 vec2 dir;
 float len = offset;
 if (position == positionPrev) {
 dir = normalize(nextScreen - currScreen);
 }
 else if (position == positionNext) {
 dir = normalize(currScreen - prevScreen);
 }
 else {
 vec2 dirA = normalize(currScreen - prevScreen);
 vec2 dirB = normalize(nextScreen - currScreen);

 vec2 tanget = normalize(dirA + dirB);

 float miter = 1.0 / max(dot(tanget, dirA), 0.5);
 len *= miter;
 dir = tanget;
 }

 dir = vec2(-dir.y, dir.x) * len;
 currScreen += dir;

 currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);
@end


@export ecgl.meshLines3D.vertex

attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute vec4 a_Color : COLOR;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevPositionPrev;
attribute vec3 prevPositionNext;
uniform float percent : 1.0;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

varying vec4 v_Color;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain
}
@end


@export ecgl.meshLines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain
}

@end`},function(_,g,u){var c=u(16),l=u(83),e=u(84).parsePercent,t=u(172),i=c.each,s=["left","right","top","bottom","width","height"],a=[["width","left","right"],["height","top","bottom"]];function o(f,v,m,y,x){var w=0,M=0;y==null&&(y=1/0),x==null&&(x=1/0);var C=0;v.eachChild(function(A,P){var b,N,B=A.position,z=A.getBoundingRect(),F=v.childAt(P+1),V=F&&F.getBoundingRect();if(f==="horizontal"){var H=z.width+(V?-V.x+z.x:0);(b=w+H)>y||A.newline?(w=0,b=H,M+=C+m,C=z.height):C=Math.max(C,z.height)}else{var U=z.height+(V?-V.y+z.y:0);(N=M+U)>x||A.newline?(w+=C+m,M=0,N=U,C=z.width):C=Math.max(C,z.width)}A.newline||(B[0]=w,B[1]=M,f==="horizontal"?w=b+m:M=N+m)})}var r=o,n=c.curry(o,"vertical"),h=c.curry(o,"horizontal");function p(f,v,m){m=t.normalizeCssArray(m||0);var y=v.width,x=v.height,w=e(f.left,y),M=e(f.top,x),C=e(f.right,y),A=e(f.bottom,x),P=e(f.width,y),b=e(f.height,x),N=m[2]+m[0],B=m[1]+m[3],z=f.aspect;switch(isNaN(P)&&(P=y-C-B-w),isNaN(b)&&(b=x-A-N-M),z!=null&&(isNaN(P)&&isNaN(b)&&(z>y/x?P=.8*y:b=.8*x),isNaN(P)&&(P=z*b),isNaN(b)&&(b=P/z)),isNaN(w)&&(w=y-C-P-B),isNaN(M)&&(M=x-A-b-N),f.left||f.right){case"center":w=y/2-P/2-m[3];break;case"right":w=y-P-B}switch(f.top||f.bottom){case"middle":case"center":M=x/2-b/2-m[0];break;case"bottom":M=x-b-N}w=w||0,M=M||0,isNaN(P)&&(P=y-B-w-(C||0)),isNaN(b)&&(b=x-N-M-(A||0));var F=new l(w+m[3],M+m[0],P,b);return F.margin=m,F}function d(f,v){return v&&f&&i(s,function(m){v.hasOwnProperty(m)&&(f[m]=v[m])}),f}g.LOCATION_PARAMS=s,g.HV_NAMES=a,g.box=r,g.vbox=n,g.hbox=h,g.getAvailableSize=function(f,v,m){var y=v.width,x=v.height,w=e(f.x,y),M=e(f.y,x),C=e(f.x2,y),A=e(f.y2,x);return(isNaN(w)||isNaN(parseFloat(f.x)))&&(w=0),(isNaN(C)||isNaN(parseFloat(f.x2)))&&(C=y),(isNaN(M)||isNaN(parseFloat(f.y)))&&(M=0),(isNaN(A)||isNaN(parseFloat(f.y2)))&&(A=x),m=t.normalizeCssArray(m||0),{width:Math.max(C-w-m[1]-m[3],0),height:Math.max(A-M-m[0]-m[2],0)}},g.getLayoutRect=p,g.positionElement=function(f,v,m,y,x){var w=!x||!x.hv||x.hv[0],M=!x||!x.hv||x.hv[1],C=x&&x.boundingMode||"all";if(w||M){var A;if(C==="raw")A=f.type==="group"?new l(0,0,+v.width||0,+v.height||0):f.getBoundingRect();else if(A=f.getBoundingRect(),f.needLocalTransform()){var P=f.getLocalTransform();(A=A.clone()).applyTransform(P)}v=p(c.defaults({width:A.width,height:A.height},v),m,y);var b=f.position,N=w?v.x-A.x:0,B=M?v.y-A.y:0;f.attr("position",C==="raw"?[N,B]:[b[0]+N,b[1]+B])}},g.sizeCalculable=function(f,v){return f[a[v][0]]!=null||f[a[v][1]]!=null&&f[a[v][2]]!=null},g.mergeLayoutParam=function(f,v,m){!c.isObject(m)&&(m={});var y=m.ignoreSize;!c.isArray(y)&&(y=[y,y]);var x=M(a[0],0),w=M(a[1],1);function M(b,N){var B={},z=0,F={},V=0;if(i(b,function(j){F[j]=f[j]}),i(b,function(j){C(v,j)&&(B[j]=F[j]=v[j]),A(B,j)&&z++,A(F,j)&&V++}),y[N])return A(v,b[1])?F[b[2]]=null:A(v,b[2])&&(F[b[1]]=null),F;if(V!==2&&z){if(z>=2)return B;for(var H=0;H<b.length;H++){var U=b[H];if(!C(B,U)&&C(f,U)){B[U]=f[U];break}}return B}return F}function C(b,N){return b.hasOwnProperty(N)}function A(b,N){return b[N]!=null&&b[N]!=="auto"}function P(b,N,B){i(b,function(z){N[z]=B[z]})}P(a[0],f,x),P(a[1],f,w)},g.getLayoutParams=function(f){return d({},f)},g.copyLayoutParams=d},function(_,g,u){var c=u(8).a.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(l,e){var t,i,s=this.outputs[l],a=s.parameters,o=s._parametersCopy;if(o||(o=s._parametersCopy={}),a)for(var r in a)r!=="width"&&r!=="height"&&(o[r]=a[r]);return t=D(a.width,Function)?a.width.call(this,e):a.width,i=D(a.height,Function)?a.height.call(this,e):a.height,o.width===t&&o.height===i||this._outputTextures[l]&&this._outputTextures[l].dispose(e.gl),o.width=t,o.height=i,o},setParameter:function(l,e){},getParameter:function(l){},setParameters:function(l){for(var e in l)this.setParameter(e,l[e])},render:function(){},getOutput:function(l,e){if(e==null)return e=l,this._outputTextures[e];var t=this.outputs[e];return t?this._rendered?t.outputLastFrame?this._prevOutputTextures[e]:this._outputTextures[e]:this._rendering?(this._prevOutputTextures[e]||(this._prevOutputTextures[e]=this._compositor.allocateTexture(t.parameters||{})),this._prevOutputTextures[e]):(this.render(l),this._outputTextures[e]):void 0},removeReference:function(l){this._outputReferences[l]--,this._outputReferences[l]===0&&(this.outputs[l].keepLastFrame?(this._prevOutputTextures[l]&&this._compositor.releaseTexture(this._prevOutputTextures[l]),this._prevOutputTextures[l]=this._outputTextures[l]):this._compositor.releaseTexture(this._outputTextures[l]))},link:function(l,e,t){this.inputLinks[l]={node:e,pin:t},e.outputLinks[t]||(e.outputLinks[t]=[]),e.outputLinks[t].push({node:this,pin:l}),this.pass.material.enableTexture(l)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(l){if(!this._rendering){for(var e in this._rendering=!0,this.inputLinks){var t=this.inputLinks[e];t.node.updateReference(t.pin)}this._rendering=!1}l&&this._outputReferences[l]++},beforeFrame:function(){for(var l in this._rendered=!1,this.outputLinks)this._outputReferences[l]=0},afterFrame:function(){for(var l in this.outputLinks)this._outputReferences[l]>0&&(this.outputs[l].keepLastFrame?(this._prevOutputTextures[l]&&this._compositor.releaseTexture(this._prevOutputTextures[l]),this._prevOutputTextures[l]=this._outputTextures[l]):this._compositor.releaseTexture(this._outputTextures[l]))}});g.a=c},function(_,g,u){g.a=function(c,l){for(var e=0,t=1/l,i=c;i>0;)e+=t*(i%l),i=Math.floor(i/l),t/=l;return e}},function(_,g,u){var c=u(0),l=u.n(c);g.a=function(e,t,i){i=i||e.getSource();var s=t||l.a.getCoordinateSystemDimensions(e.get("coordinateSystem"))||["x","y","z"],a=l.a.helper.createDimensions(i,{dimensionsDefine:i.dimensionsDefine||e.get("dimensions"),encodeDefine:i.encodeDefine||e.get("encode"),coordDimensions:s.map(function(n){var h=e.getReferringComponents(n+"Axis3D")[0];return{type:h&&h.get("type")==="category"?"ordinal":"float",name:n}})});e.get("coordinateSystem")==="cartesian3D"&&a.forEach(function(n){if(s.indexOf(n.coordDim)>=0){var h=e.getReferringComponents(n.coordDim+"Axis3D")[0];h&&h.get("type")==="category"&&(n.ordinalMeta=h.getOrdinalMeta())}});var o=l.a.helper.dataStack.enableDataStack(e,a,{byIndex:!0,stackedCoordDimension:"z"}),r=new l.a.List(a,e);return r.setCalculationInfo(o),r.initData(i),r}},function(_,g,u){var c=u(16).isFunction;_.exports=function(l,e,t){return{seriesType:l,performRawSeries:!0,reset:function(i,s,a){var o=i.getData(),r=i.get("symbol"),n=i.get("symbolSize"),h=i.get("symbolKeepAspect"),p=c(r),d=c(n),f=p||d,v=!p&&r?r:e,m=d?null:n;if(o.setVisual({legendSymbol:t||v,symbol:v,symbolSize:m,symbolKeepAspect:h}),!s.isSeriesFiltered(i))return{dataEach:o.hasItemOption||f?function(y,x){if(f){var w=i.getRawValue(x),M=i.getDataParams(x);p&&y.setItemVisual(x,"symbol",r(w,M)),d&&y.setItemVisual(x,"symbolSize",n(w,M))}if(y.hasItemOption){var C=y.getItemModel(x),A=C.getShallow("symbol",!0),P=C.getShallow("symbolSize",!0),b=C.getShallow("symbolKeepAspect",!0);A!=null&&y.setItemVisual(x,"symbol",A),P!=null&&y.setItemVisual(x,"symbolSize",P),b!=null&&y.setItemVisual(x,"symbolKeepAspect",b)}}:null}}}}},function(_,g,u){var c=u(8),l=u(110),e=u(11),t=u(13),i=u(19),s=u(26),a=u(114),o=u(9),r=u(70),n=u(21),h=u(12);o.a.import(r.a);var p=n.a.create,d={};function f(b){return b.material}function v(b,N,B){return N.uniforms[B].value}function m(b,N,B,z){return B!==z}function y(b){return!0}function x(){}var w={float:e.a.FLOAT,byte:e.a.BYTE,ubyte:e.a.UNSIGNED_BYTE,short:e.a.SHORT,ushort:e.a.UNSIGNED_SHORT};function M(b,N,B){this.availableAttributes=b,this.availableAttributeSymbols=N,this.indicesBuffer=B,this.vao=null}function C(b){var N,B;this.bind=function(z){N||((N=t.a.createCanvas()).width=N.height=1,N.getContext("2d"));var F=z.gl,V=!B;V&&(B=F.createTexture()),F.bindTexture(F.TEXTURE_2D,B),V&&F.texImage2D(F.TEXTURE_2D,0,F.RGBA,F.RGBA,F.UNSIGNED_BYTE,N)},this.unbind=function(z){z.gl.bindTexture(z.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var A=c.a.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window<"u"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,logDepthBuffer:!1,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=t.a.createCanvas());var b=this.canvas;try{var N={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=b.getContext("webgl",N)||b.getContext("experimental-webgl",N),!this.gl)throw new Error;this._glinfo=new l.a(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(B){throw"Error creating WebGL Context "+B}this._programMgr=new a.a(this),this._placeholderTexture=new C},{resize:function(b,N){var B=this.canvas,z=this.devicePixelRatio;b!=null?(B.style&&(B.style.width=b+"px",B.style.height=N+"px"),B.width=b*z,B.height=N*z,this._width=b,this._height=N):(this._width=B.width/z,this._height=B.height/z),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var b=this.viewport;return b.width/b.height},setDevicePixelRatio:function(b){this.devicePixelRatio=b,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(b){return this._glinfo.getExtension(b)},getGLParameter:function(b){return this._glinfo.getParameter(b)},setViewport:function(b,N,B,z,F){if(E(b)==="object"){var V=b;b=V.x,N=V.y,B=V.width,z=V.height,F=V.devicePixelRatio}F=F||this.devicePixelRatio,this.gl.viewport(b*F,N*F,B*F,z*F),this.viewport={x:b,y:N,width:B,height:z,devicePixelRatio:F}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var b=this._clearStack.pop();this.clearColor=b.clearColor,this.clearBit=b.clearBit}},bindSceneRendering:function(b){this._sceneRendering=b},render:function(b,N,B,z){var F=this.gl,V=this.clearColor;if(this.clearBit){F.colorMask(!0,!0,!0,!0),F.depthMask(!0);var H=this.viewport,U=!1,j=H.devicePixelRatio;(H.width!==this._width||H.height!==this._height||j&&j!==this.devicePixelRatio||H.x||H.y)&&(U=!0,F.enable(F.SCISSOR_TEST),F.scissor(H.x*j,H.y*j,H.width*j,H.height*j)),F.clearColor(V[0],V[1],V[2],V[3]),F.clear(this.clearBit),U&&F.disable(F.SCISSOR_TEST)}if(B||b.update(!1),b.updateLights(),N=N||b.getMainCamera()){N.update();var X=b.updateRenderList(N,!0);this._sceneRendering=b;var Y=X.opaque,J=X.transparent,K=b.material;b.trigger("beforerender",this,b,N,X),z?(this.renderPreZ(Y,b,N),F.depthFunc(F.LEQUAL)):F.depthFunc(F.LESS);for(var Q=p(),Z=h.a.create(),q=0;q<J.length;q++){var tt=J[q];n.a.multiplyAffine(Q,N.viewMatrix.array,tt.worldTransform.array),h.a.transformMat4(Z,tt.position.array,Q),tt.__depth=Z[2]}this.renderPass(Y,N,{getMaterial:function($){return K||$.material},sortCompare:this.opaqueSortCompare}),this.renderPass(J,N,{getMaterial:function($){return K||$.material},sortCompare:this.transparentSortCompare}),b.trigger("afterrender",this,b,N,X),this._sceneRendering=null}else console.error("Can't find camera in the scene.")},getProgram:function(b,N,B){return N=N||b.material,this._programMgr.getProgram(b,N,B,this)},validateProgram:function(b){if(b.__error){var N=b.__error;if(d[b.__uid__])return;if(d[b.__uid__]=!0,this.throwError)throw new Error(N);this.trigger("error",N)}},updatePrograms:function(b,N,B){var z=B&&B.getMaterial||f;N=N||null;for(var F=0;F<b.length;F++){var V=b[F],H=z.call(this,V);if(F>0){var U=b[F-1],j=U.joints?U.joints.length:0;if((V.joints?V.joints.length:0)===j&&V.material===U.material&&V.lightGroup===U.lightGroup){V.__program=U.__program;continue}}var X=this._programMgr.getProgram(V,H,N,this);this.validateProgram(X),V.__program=X}},renderPass:function(b,N,B){this.trigger("beforerenderpass",this,b,N,B),(B=B||{}).getMaterial=B.getMaterial||f,B.getUniform=B.getUniform||v,B.isMaterialChanged=B.isMaterialChanged||m,B.beforeRender=B.beforeRender||x,B.afterRender=B.afterRender||x;var z=B.ifRender||y;this.updatePrograms(b,this._sceneRendering,B),B.sortCompare&&b.sort(B.sortCompare);var F=this.viewport,V=F.devicePixelRatio,H=[F.x*V,F.y*V,F.width*V,F.height*V],U=this.devicePixelRatio,j=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*U,this._height*U],X=[H[2],H[3]],Y=Date.now();N?(n.a.copy(P.VIEW,N.viewMatrix.array),n.a.copy(P.PROJECTION,N.projectionMatrix.array),n.a.copy(P.VIEWINVERSE,N.worldTransform.array)):(n.a.identity(P.VIEW),n.a.identity(P.PROJECTION),n.a.identity(P.VIEWINVERSE)),n.a.multiply(P.VIEWPROJECTION,P.PROJECTION,P.VIEW),n.a.invert(P.PROJECTIONINVERSE,P.PROJECTION),n.a.invert(P.VIEWPROJECTIONINVERSE,P.VIEWPROJECTION);for(var J,K,Q,Z,q,tt,$,rt,et,it,ot,st,at=this.gl,vt=this._sceneRendering,yt=0;yt<b.length;yt++){var gt,pt=b[yt],bt=pt.worldTransform!=null;if(z(pt)){bt&&(gt=pt.isSkinnedMesh&&pt.isSkinnedMesh()?pt.offsetMatrix?pt.offsetMatrix.array:P.IDENTITY:pt.worldTransform.array);var mt=pt.geometry,nt=B.getMaterial.call(this,pt),lt=pt.__program,ct=nt.shader,ht=mt.__uid__+"-"+lt.__uid__,ft=ht!==it;it=ht,bt&&(n.a.copy(P.WORLD,gt),n.a.multiply(P.WORLDVIEWPROJECTION,P.VIEWPROJECTION,gt),n.a.multiplyAffine(P.WORLDVIEW,P.VIEW,gt),(ct.matrixSemantics.WORLDINVERSE||ct.matrixSemantics.WORLDINVERSETRANSPOSE)&&n.a.invert(P.WORLDINVERSE,gt),(ct.matrixSemantics.WORLDVIEWINVERSE||ct.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&n.a.invert(P.WORLDVIEWINVERSE,P.WORLDVIEW),(ct.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||ct.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&n.a.invert(P.WORLDVIEWPROJECTIONINVERSE,P.WORLDVIEWPROJECTION)),pt.beforeRender&&pt.beforeRender(this),B.beforeRender.call(this,pt,nt,J);var _t=lt!==K;_t?(lt.bind(this),lt.setUniformOfSemantic(at,"VIEWPORT",H),lt.setUniformOfSemantic(at,"WINDOW_SIZE",j),N&&(lt.setUniformOfSemantic(at,"NEAR",N.near),lt.setUniformOfSemantic(at,"FAR",N.far),this.logDepthBuffer&&lt.setUniformOfSemantic(at,"LOG_DEPTH_BUFFER_FC",2/(Math.log(N.far+1)/Math.LN2))),lt.setUniformOfSemantic(at,"DEVICEPIXELRATIO",V),lt.setUniformOfSemantic(at,"TIME",Y),lt.setUniformOfSemantic(at,"VIEWPORT_SIZE",X),vt&&vt.setLightUniforms(lt,pt.lightGroup,this)):lt=K,(_t||B.isMaterialChanged(pt,Q,nt,J))&&(nt.depthTest!==Z&&(nt.depthTest?at.enable(at.DEPTH_TEST):at.disable(at.DEPTH_TEST),Z=nt.depthTest),nt.depthMask!==q&&(at.depthMask(nt.depthMask),q=nt.depthMask),nt.transparent!==et&&(nt.transparent?at.enable(at.BLEND):at.disable(at.BLEND),et=nt.transparent),nt.transparent&&(nt.blend?nt.blend(at):(at.blendEquationSeparate(at.FUNC_ADD,at.FUNC_ADD),at.blendFuncSeparate(at.SRC_ALPHA,at.ONE_MINUS_SRC_ALPHA,at.ONE,at.ONE_MINUS_SRC_ALPHA))),st=this._bindMaterial(pt,nt,lt,Q||null,J||null,K||null,B.getUniform),J=nt);var wt=ct.matrixSemanticKeys;if(bt)for(var Tt=0;Tt<wt.length;Tt++){var It=wt[Tt],Mt=ct.matrixSemantics[It],Lt=P[It];if(Mt.isTranspose){var kt=P[Mt.semanticNoTranspose];n.a.transpose(Lt,kt)}lt.setUniform(at,Mt.type,Mt.symbol,Lt)}pt.cullFace!==$&&($=pt.cullFace,at.cullFace($)),pt.frontFace!==rt&&(rt=pt.frontFace,at.frontFace(rt)),pt.culling!==tt&&((tt=pt.culling)?at.enable(at.CULL_FACE):at.disable(at.CULL_FACE)),this._updateSkeleton(pt,lt,st),ft&&(ot=this._bindVAO(null,ct,mt,lt)),this._renderObject(pt,ot,lt),B.afterRender(this,pt),pt.afterRender&&pt.afterRender(this),K=lt,Q=pt}}this.trigger("afterrenderpass",this,b,N,B)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(b,N,B){var z=this.gl,F=b.skeleton;if(F)if(F.update(),b.joints.length>this.getMaxJointNumber()){var V=F.getSubSkinMatricesTexture(b.__uid__,b.joints);N.useTextureSlot(this,V,B),N.setUniform(z,"1i","skinMatricesTexture",B),N.setUniform(z,"1f","skinMatricesTextureSize",V.width)}else{var H=F.getSubSkinMatrices(b.__uid__,b.joints);N.setUniformOfSemantic(z,"SKIN_MATRIX",H)}},_renderObject:function(b,N,B){var z=this.gl,F=b.geometry,V=b.mode;V==null&&(V=4);var H=null,U=b.isInstancedMesh&&b.isInstancedMesh();if(!U||(H=this.getGLExtension("ANGLE_instanced_arrays"))){var j;if(U&&(j=this._bindInstancedAttributes(b,B,H)),N.indicesBuffer){var X=this.getGLExtension("OES_element_index_uint")&&D(F.indices,Uint32Array)?z.UNSIGNED_INT:z.UNSIGNED_SHORT;U?H.drawElementsInstancedANGLE(V,N.indicesBuffer.count,X,0,b.getInstanceCount()):z.drawElements(V,N.indicesBuffer.count,X,0)}else U?H.drawArraysInstancedANGLE(V,0,F.vertexCount,b.getInstanceCount()):z.drawArrays(V,0,F.vertexCount);if(U)for(var Y=0;Y<j.length;Y++)j[Y].enabled||z.disableVertexAttribArray(j[Y].location),H.vertexAttribDivisorANGLE(j[Y].location,0)}else console.warn("Device not support ANGLE_instanced_arrays extension")},_bindInstancedAttributes:function(b,N,B){for(var z=this.gl,F=b.getInstancedAttributesBuffers(this),V=[],H=0;H<F.length;H++){var U=F[H],j=N.getAttribLocation(z,U.symbol);if(!(j<0)){var X=w[U.type]||z.FLOAT,Y=N.isAttribEnabled(this,j);N.isAttribEnabled(this,j)||z.enableVertexAttribArray(j),V.push({location:j,enabled:Y}),z.bindBuffer(z.ARRAY_BUFFER,U.buffer),z.vertexAttribPointer(j,U.size,X,!1,0,0),B.vertexAttribDivisorANGLE(j,U.divisor)}}return V},_bindMaterial:function(b,N,B,z,F,V,H){for(var U=this.gl,j=V===B,X=B.currentTextureSlot(),Y=N.getEnabledUniforms(),J=N.getTextureUniforms(),K=this._placeholderTexture,Q=0;Q<J.length;Q++){var Z=H(b,N,$=J[Q]);if((tt=N.uniforms[$].type)==="t"&&Z)Z.__slot=-1;else if(tt==="tv")for(var q=0;q<Z.length;q++)Z[q]&&(Z[q].__slot=-1)}for(K.__slot=-1,Q=0;Q<Y.length;Q++){var tt,$=Y[Q],rt=N.uniforms[$],et=(Z=H(b,N,$),(tt=rt.type)==="t");if(et&&(Z&&Z.isRenderable()||(Z=K)),F&&j){var it=H(z,F,$);if(et&&(it&&it.isRenderable()||(it=K)),it===Z){if(et)B.takeCurrentTextureSlot(this,null);else if(tt==="tv"&&Z)for(q=0;q<Z.length;q++)B.takeCurrentTextureSlot(this,null);continue}}if(Z!=null)if(et)if(Z.__slot<0){var ot=B.currentTextureSlot();B.setUniform(U,"1i",$,ot)&&(B.takeCurrentTextureSlot(this,Z),Z.__slot=ot)}else B.setUniform(U,"1i",$,Z.__slot);else if(Array.isArray(Z)){if(Z.length===0)continue;if(tt==="tv"){if(!B.hasUniform($))continue;var st=[];for(q=0;q<Z.length;q++){var at=Z[q];at.__slot<0?(ot=B.currentTextureSlot(),st.push(ot),B.takeCurrentTextureSlot(this,at),at.__slot=ot):st.push(at.__slot)}B.setUniform(U,"1iv",$,st)}else B.setUniform(U,rt.type,$,Z)}else B.setUniform(U,rt.type,$,Z)}var vt=B.currentTextureSlot();return B.resetTextureSlot(X),vt},_bindVAO:function(b,N,B,z){var F=!B.dynamic,V=this.gl,H=this.__uid__+"-"+z.__uid__,U=B.__vaoCache[H];if(!U){var j=B.getBufferChunks(this);if(!j||!j.length)return;for(var X=j[0],Y=X.attributeBuffers,J=X.indicesBuffer,K=[],Q=[],Z=0;Z<Y.length;Z++){var q,tt=(st=Y[Z]).name,$=st.semantic;if($){var rt=N.attributeSemantics[$];q=rt&&rt.symbol}else q=tt;q&&z.attributes[q]&&(K.push(st),Q.push(q))}U=new M(K,Q,J),F&&(B.__vaoCache[H]=U)}var et=!0;if(b&&F&&(U.vao==null?U.vao=b.createVertexArrayOES():et=!1,b.bindVertexArrayOES(U.vao)),K=U.availableAttributes,J=U.indicesBuffer,et){var it=z.enableAttributes(this,U.availableAttributeSymbols,b&&F&&U);for(Z=0;Z<K.length;Z++){var ot=it[Z];if(ot!==-1){var st,at=(st=K[Z]).buffer,vt=st.size,yt=w[st.type]||V.FLOAT;V.bindBuffer(V.ARRAY_BUFFER,at),V.vertexAttribPointer(ot,vt,yt,!1,0,0)}}B.isUseIndices()&&V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,J.buffer)}return U},renderPreZ:function(b,N,B){var z=this.gl,F=this._prezMaterial||new i.a({shader:new o.a(o.a.source("clay.prez.vertex"),o.a.source("clay.prez.fragment"))});this._prezMaterial=F,this.logDepthBuffer&&this._prezMaterial.setUniform("logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),z.colorMask(!1,!1,!1,!1),z.depthMask(!0),this.renderPass(b,B,{ifRender:function(V){return!V.ignorePreZ},isMaterialChanged:function(V,H){var U=V.material,j=H.material;return U.get("diffuseMap")!==j.get("diffuseMap")||(U.get("alphaCutoff")||0)!==(j.get("alphaCutoff")||0)},getUniform:function(V,H,U){return U==="alphaMap"?V.material.get("diffuseMap"):U==="alphaCutoff"?V.material.isDefined("fragment","ALPHA_TEST")&&V.material.get("diffuseMap")&&V.material.get("alphaCutoff")||0:U==="uvRepeat"?V.material.get("uvRepeat"):U==="uvOffset"?V.material.get("uvOffset"):H.get(U)},getMaterial:function(){return F},sort:this.opaqueSortCompare}),z.colorMask(!0,!0,!0,!0),z.depthMask(!0)},disposeScene:function(b){this.disposeNode(b,!0,!0),b.dispose()},disposeNode:function(b,N,B){b.getParent()&&b.getParent().remove(b);var z={};b.traverse(function(F){var V=F.material;if(F.geometry&&N&&F.geometry.dispose(this),B&&V&&!z[V.__uid__]){for(var H=V.getTextureUniforms(),U=0;U<H.length;U++){var j=H[U],X=V.uniforms[j].value,Y=V.uniforms[j].type;if(X){if(Y==="t")X.dispose&&X.dispose(this);else if(Y==="tv")for(var J=0;J<X.length;J++)X[J]&&X[J].dispose&&X[J].dispose(this)}}z[V.__uid__]=!0}F.dispose&&F.dispose(this)},this)},disposeGeometry:function(b){b.dispose(this)},disposeTexture:function(b){b.dispose(this)},disposeFrameBuffer:function(b){b.dispose(this)},dispose:function(){},screenToNDC:function(b,N,B){B||(B=new s.a),N=this._height-N;var z=this.viewport,F=B.array;return F[0]=(b-z.x)/z.width,F[0]=2*F[0]-1,F[1]=(N-z.y)/z.height,F[1]=2*F[1]-1,B}});A.opaqueSortCompare=A.prototype.opaqueSortCompare=function(b,N){return b.renderOrder===N.renderOrder?b.__program===N.__program?b.material===N.material?b.geometry.__uid__-N.geometry.__uid__:b.material.__uid__-N.material.__uid__:b.__program&&N.__program?b.__program.__uid__-N.__program.__uid__:0:b.renderOrder-N.renderOrder},A.transparentSortCompare=A.prototype.transparentSortCompare=function(b,N){return b.renderOrder===N.renderOrder?b.__depth===N.__depth?b.__program===N.__program?b.material===N.material?b.geometry.__uid__-N.geometry.__uid__:b.material.__uid__-N.material.__uid__:b.__program&&N.__program?b.__program.__uid__-N.__program.__uid__:0:b.__depth-N.__depth:b.renderOrder-N.renderOrder};var P={IDENTITY:p(),WORLD:p(),VIEW:p(),PROJECTION:p(),WORLDVIEW:p(),VIEWPROJECTION:p(),WORLDVIEWPROJECTION:p(),WORLDINVERSE:p(),VIEWINVERSE:p(),PROJECTIONINVERSE:p(),WORLDVIEWINVERSE:p(),VIEWPROJECTIONINVERSE:p(),WORLDVIEWPROJECTIONINVERSE:p(),WORLDTRANSPOSE:p(),VIEWTRANSPOSE:p(),PROJECTIONTRANSPOSE:p(),WORLDVIEWTRANSPOSE:p(),VIEWPROJECTIONTRANSPOSE:p(),WORLDVIEWPROJECTIONTRANSPOSE:p(),WORLDINVERSETRANSPOSE:p(),VIEWINVERSETRANSPOSE:p(),PROJECTIONINVERSETRANSPOSE:p(),WORLDVIEWINVERSETRANSPOSE:p(),VIEWPROJECTIONINVERSETRANSPOSE:p(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:p()};A.COLOR_BUFFER_BIT=e.a.COLOR_BUFFER_BIT,A.DEPTH_BUFFER_BIT=e.a.DEPTH_BUFFER_BIT,A.STENCIL_BUFFER_BIT=e.a.STENCIL_BUFFER_BIT,g.a=A},function(_,g,u){function c(e,t){this.action=e,this.context=t}var l={trigger:function(e){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(e)){var t=this.__handlers__[e],i=t.length,s=-1,a=arguments;switch(a.length){case 1:for(;++s<i;)t[s].action.call(t[s].context);return;case 2:for(;++s<i;){var o=a[1];o.offsetX,o.offsetY,t[s].action.call(t[s].context,a[1])}return;case 3:for(;++s<i;)t[s].action.call(t[s].context,a[1],a[2]);return;case 4:for(;++s<i;)t[s].action.call(t[s].context,a[1],a[2],a[3]);return;case 5:for(;++s<i;)t[s].action.call(t[s].context,a[1],a[2],a[3],a[4]);return;default:for(;++s<i;)t[s].action.apply(t[s].context,Array.prototype.slice.call(a,1));return}}},on:function(e,t,i){if(e&&t){var s=this.__handlers__||(this.__handlers__={});if(s[e]){if(this.has(e,t))return}else s[e]=[];var a=new c(t,i||this);return s[e].push(a),this}},once:function(e,t,i){if(e&&t){var s=this;return this.on(e,function a(){s.off(e,a),t.apply(this,arguments)},i)}},before:function(e,t,i){if(e&&t)return e="before"+e,this.on(e,t,i)},after:function(e,t,i){if(e&&t)return e="after"+e,this.on(e,t,i)},success:function(e,t){return this.once("success",e,t)},error:function(e,t){return this.once("error",e,t)},off:function(e,t){var i=this.__handlers__||(this.__handlers__={});if(t){if(i[e]){for(var s=i[e],a=[],o=0;o<s.length;o++)t&&s[o].action!==t&&a.push(s[o]);i[e]=a}return this}i[e]=[]},has:function(e,t){var i=this.__handlers__;if(!i||!i[e])return!1;for(var s=i[e],a=0;a<s.length;a++)if(s[a].action===t)return!0}};g.a=l},function(_,g,u){var c,l,e,t,i,s=u(3),a=u(12),o=function(r,n){this.origin=r||new s.a,this.direction=n||new s.a};o.prototype={constructor:o,intersectPlane:function(r,n){var h=r.normal.array,p=r.distance,d=this.origin.array,f=this.direction.array,v=a.a.dot(h,f);if(v===0)return null;n||(n=new s.a);var m=(a.a.dot(h,d)-p)/v;return a.a.scaleAndAdd(n.array,d,f,-m),n._dirty=!0,n},mirrorAgainstPlane:function(r){var n=a.a.dot(r.normal.array,this.direction.array);a.a.scaleAndAdd(this.direction.array,this.direction.array,r.normal.array,2*-n),this.direction._dirty=!0},distanceToPoint:(i=a.a.create(),function(r){a.a.sub(i,r,this.origin.array);var n=a.a.dot(i,this.direction.array);if(n<0)return a.a.distance(this.origin.array,r);var h=a.a.lenSquared(i);return Math.sqrt(h-n*n)}),intersectSphere:function(){var r=a.a.create();return function(n,h,p){var d=this.origin.array,f=this.direction.array;n=n.array,a.a.sub(r,n,d);var v=a.a.dot(r,f),m=a.a.squaredLength(r)-v*v,y=h*h;if(!(m>y)){var x=Math.sqrt(y-m),w=v-x,M=v+x;return p||(p=new s.a),w<0?M<0?null:(a.a.scaleAndAdd(p.array,d,f,M),p):(a.a.scaleAndAdd(p.array,d,f,w),p)}}}(),intersectBoundingBox:function(r,n){var h,p,d,f,v,m,y=this.direction.array,x=this.origin.array,w=r.min.array,M=r.max.array,C=1/y[0],A=1/y[1],P=1/y[2];if(C>=0?(h=(w[0]-x[0])*C,p=(M[0]-x[0])*C):(p=(w[0]-x[0])*C,h=(M[0]-x[0])*C),A>=0?(d=(w[1]-x[1])*A,f=(M[1]-x[1])*A):(f=(w[1]-x[1])*A,d=(M[1]-x[1])*A),h>f||d>p||((d>h||h!=h)&&(h=d),(f<p||p!=p)&&(p=f),P>=0?(v=(w[2]-x[2])*P,m=(M[2]-x[2])*P):(m=(w[2]-x[2])*P,v=(M[2]-x[2])*P),h>m||v>p)||((v>h||h!=h)&&(h=v),(m<p||p!=p)&&(p=m),p<0))return null;var b=h>=0?h:p;return n||(n=new s.a),a.a.scaleAndAdd(n.array,x,y,b),n},intersectTriangle:(c=a.a.create(),l=a.a.create(),e=a.a.create(),t=a.a.create(),function(r,n,h,p,d,f){var v=this.direction.array,m=this.origin.array;r=r.array,n=n.array,h=h.array,a.a.sub(c,n,r),a.a.sub(l,h,r),a.a.cross(t,l,v);var y=a.a.dot(c,t);if(p){if(y>-1e-5)return null}else if(y>-1e-5&&y<1e-5)return null;a.a.sub(e,m,r);var x=a.a.dot(t,e)/y;if(x<0||x>1)return null;a.a.cross(t,c,e);var w=a.a.dot(v,t)/y;if(w<0||w>1||x+w>1)return null;a.a.cross(t,c,l);var M=-a.a.dot(e,t)/y;return M<0?null:(d||(d=new s.a),f&&s.a.set(f,1-x-w,x,w),a.a.scaleAndAdd(d.array,m,v,M),d)}),applyTransform:function(r){s.a.add(this.direction,this.direction,this.origin),s.a.transformMat4(this.origin,this.origin,r),s.a.transformMat4(this.direction,this.direction,r),s.a.sub(this.direction,this.direction,this.origin),s.a.normalize(this.direction,this.direction)},copy:function(r){s.a.copy(this.origin,r.origin),s.a.copy(this.direction,r.direction)},clone:function(){var r=new o;return r.copy(this),r}},g.a=o},function(_,g,u){var c,l,e,t,i=u(20),s=u(12),a=u(33),o=u(34),r={create:function(){var n=new i.a(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}};r.rotationTo=(c=s.a.create(),l=s.a.fromValues(1,0,0),e=s.a.fromValues(0,1,0),function(n,h,p){var d=s.a.dot(h,p);return d<-.999999?(s.a.cross(c,l,h),s.a.length(c)<1e-6&&s.a.cross(c,e,h),s.a.normalize(c,c),r.setAxisAngle(n,c,Math.PI),n):d>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(s.a.cross(c,h,p),n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=1+d,r.normalize(n,n))}),r.setAxes=(t=o.a.create(),function(n,h,p,d){return t[0]=p[0],t[3]=p[1],t[6]=p[2],t[1]=d[0],t[4]=d[1],t[7]=d[2],t[2]=-h[0],t[5]=-h[1],t[8]=-h[2],r.normalize(n,r.fromMat3(n,t))}),r.clone=a.a.clone,r.fromValues=a.a.fromValues,r.copy=a.a.copy,r.set=a.a.set,r.identity=function(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n},r.setAxisAngle=function(n,h,p){p*=.5;var d=Math.sin(p);return n[0]=d*h[0],n[1]=d*h[1],n[2]=d*h[2],n[3]=Math.cos(p),n},r.add=a.a.add,r.multiply=function(n,h,p){var d=h[0],f=h[1],v=h[2],m=h[3],y=p[0],x=p[1],w=p[2],M=p[3];return n[0]=d*M+m*y+f*w-v*x,n[1]=f*M+m*x+v*y-d*w,n[2]=v*M+m*w+d*x-f*y,n[3]=m*M-d*y-f*x-v*w,n},r.mul=r.multiply,r.scale=a.a.scale,r.rotateX=function(n,h,p){p*=.5;var d=h[0],f=h[1],v=h[2],m=h[3],y=Math.sin(p),x=Math.cos(p);return n[0]=d*x+m*y,n[1]=f*x+v*y,n[2]=v*x-f*y,n[3]=m*x-d*y,n},r.rotateY=function(n,h,p){p*=.5;var d=h[0],f=h[1],v=h[2],m=h[3],y=Math.sin(p),x=Math.cos(p);return n[0]=d*x-v*y,n[1]=f*x+m*y,n[2]=v*x+d*y,n[3]=m*x-f*y,n},r.rotateZ=function(n,h,p){p*=.5;var d=h[0],f=h[1],v=h[2],m=h[3],y=Math.sin(p),x=Math.cos(p);return n[0]=d*x+f*y,n[1]=f*x-d*y,n[2]=v*x+m*y,n[3]=m*x-v*y,n},r.calculateW=function(n,h){var p=h[0],d=h[1],f=h[2];return n[0]=p,n[1]=d,n[2]=f,n[3]=Math.sqrt(Math.abs(1-p*p-d*d-f*f)),n},r.dot=a.a.dot,r.lerp=a.a.lerp,r.slerp=function(n,h,p,d){var f,v,m,y,x,w=h[0],M=h[1],C=h[2],A=h[3],P=p[0],b=p[1],N=p[2],B=p[3];return(v=w*P+M*b+C*N+A*B)<0&&(v=-v,P=-P,b=-b,N=-N,B=-B),1-v>1e-6?(f=Math.acos(v),m=Math.sin(f),y=Math.sin((1-d)*f)/m,x=Math.sin(d*f)/m):(y=1-d,x=d),n[0]=y*w+x*P,n[1]=y*M+x*b,n[2]=y*C+x*N,n[3]=y*A+x*B,n},r.invert=function(n,h){var p=h[0],d=h[1],f=h[2],v=h[3],m=p*p+d*d+f*f+v*v,y=m?1/m:0;return n[0]=-p*y,n[1]=-d*y,n[2]=-f*y,n[3]=v*y,n},r.conjugate=function(n,h){return n[0]=-h[0],n[1]=-h[1],n[2]=-h[2],n[3]=h[3],n},r.length=a.a.length,r.len=r.length,r.squaredLength=a.a.squaredLength,r.sqrLen=r.squaredLength,r.normalize=a.a.normalize,r.fromMat3=function(n,h){var p,d=h[0]+h[4]+h[8];if(d>0)p=Math.sqrt(d+1),n[3]=.5*p,p=.5/p,n[0]=(h[5]-h[7])*p,n[1]=(h[6]-h[2])*p,n[2]=(h[1]-h[3])*p;else{var f=0;h[4]>h[0]&&(f=1),h[8]>h[3*f+f]&&(f=2);var v=(f+1)%3,m=(f+2)%3;p=Math.sqrt(h[3*f+f]-h[3*v+v]-h[3*m+m]+1),n[f]=.5*p,p=.5/p,n[3]=(h[3*v+m]-h[3*m+v])*p,n[v]=(h[3*v+f]+h[3*f+v])*p,n[m]=(h[3*m+f]+h[3*f+m])*p}return n},g.a=r},function(_,g,u){var c,l=u(55),e=u(34),t=function(a,o,r,n){a=a||0,o=o||0,r=r||0,n=n===void 0?1:n,this.array=l.a.fromValues(a,o,r,n),this._dirty=!0};t.prototype={constructor:t,add:function(a){return l.a.add(this.array,this.array,a.array),this._dirty=!0,this},calculateW:function(){return l.a.calculateW(this.array,this.array),this._dirty=!0,this},set:function(a,o,r,n){return this.array[0]=a,this.array[1]=o,this.array[2]=r,this.array[3]=n,this._dirty=!0,this},setArray:function(a){return this.array[0]=a[0],this.array[1]=a[1],this.array[2]=a[2],this.array[3]=a[3],this._dirty=!0,this},clone:function(){return new t(this.x,this.y,this.z,this.w)},conjugate:function(){return l.a.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(a){return l.a.copy(this.array,a.array),this._dirty=!0,this},dot:function(a){return l.a.dot(this.array,a.array)},fromMat3:function(a){return l.a.fromMat3(this.array,a.array),this._dirty=!0,this},fromMat4:(c=e.a.create(),function(a){return e.a.fromMat4(c,a.array),e.a.transpose(c,c),l.a.fromMat3(this.array,c),this._dirty=!0,this}),identity:function(){return l.a.identity(this.array),this._dirty=!0,this},invert:function(){return l.a.invert(this.array,this.array),this._dirty=!0,this},len:function(){return l.a.len(this.array)},length:function(){return l.a.length(this.array)},lerp:function(a,o,r){return l.a.lerp(this.array,a.array,o.array,r),this._dirty=!0,this},mul:function(a){return l.a.mul(this.array,this.array,a.array),this._dirty=!0,this},mulLeft:function(a){return l.a.multiply(this.array,a.array,this.array),this._dirty=!0,this},multiply:function(a){return l.a.multiply(this.array,this.array,a.array),this._dirty=!0,this},multiplyLeft:function(a){return l.a.multiply(this.array,a.array,this.array),this._dirty=!0,this},normalize:function(){return l.a.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(a){return l.a.rotateX(this.array,this.array,a),this._dirty=!0,this},rotateY:function(a){return l.a.rotateY(this.array,this.array,a),this._dirty=!0,this},rotateZ:function(a){return l.a.rotateZ(this.array,this.array,a),this._dirty=!0,this},rotationTo:function(a,o){return l.a.rotationTo(this.array,a.array,o.array),this._dirty=!0,this},setAxes:function(a,o,r){return l.a.setAxes(this.array,a.array,o.array,r.array),this._dirty=!0,this},setAxisAngle:function(a,o){return l.a.setAxisAngle(this.array,a.array,o),this._dirty=!0,this},slerp:function(a,o,r){return l.a.slerp(this.array,a.array,o.array,r),this._dirty=!0,this},sqrLen:function(){return l.a.sqrLen(this.array)},squaredLength:function(){return l.a.squaredLength(this.array)},fromEuler:function(a,o){return t.fromEuler(this,a,o)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var i=Object.defineProperty;if(i){var s=t.prototype;i(s,"x",{get:function(){return this.array[0]},set:function(a){this.array[0]=a,this._dirty=!0}}),i(s,"y",{get:function(){return this.array[1]},set:function(a){this.array[1]=a,this._dirty=!0}}),i(s,"z",{get:function(){return this.array[2]},set:function(a){this.array[2]=a,this._dirty=!0}}),i(s,"w",{get:function(){return this.array[3]},set:function(a){this.array[3]=a,this._dirty=!0}})}t.add=function(a,o,r){return l.a.add(a.array,o.array,r.array),a._dirty=!0,a},t.set=function(a,o,r,n,h){l.a.set(a.array,o,r,n,h),a._dirty=!0},t.copy=function(a,o){return l.a.copy(a.array,o.array),a._dirty=!0,a},t.calculateW=function(a,o){return l.a.calculateW(a.array,o.array),a._dirty=!0,a},t.conjugate=function(a,o){return l.a.conjugate(a.array,o.array),a._dirty=!0,a},t.identity=function(a){return l.a.identity(a.array),a._dirty=!0,a},t.invert=function(a,o){return l.a.invert(a.array,o.array),a._dirty=!0,a},t.dot=function(a,o){return l.a.dot(a.array,o.array)},t.len=function(a){return l.a.length(a.array)},t.lerp=function(a,o,r,n){return l.a.lerp(a.array,o.array,r.array,n),a._dirty=!0,a},t.slerp=function(a,o,r,n){return l.a.slerp(a.array,o.array,r.array,n),a._dirty=!0,a},t.multiply=t.mul=function(a,o,r){return l.a.multiply(a.array,o.array,r.array),a._dirty=!0,a},t.rotateX=function(a,o,r){return l.a.rotateX(a.array,o.array,r),a._dirty=!0,a},t.rotateY=function(a,o,r){return l.a.rotateY(a.array,o.array,r),a._dirty=!0,a},t.rotateZ=function(a,o,r){return l.a.rotateZ(a.array,o.array,r),a._dirty=!0,a},t.setAxisAngle=function(a,o,r){return l.a.setAxisAngle(a.array,o.array,r),a._dirty=!0,a},t.normalize=function(a,o){return l.a.normalize(a.array,o.array),a._dirty=!0,a},t.squaredLength=t.sqrLen=function(a){return l.a.sqrLen(a.array)},t.fromMat3=function(a,o){return l.a.fromMat3(a.array,o.array),a._dirty=!0,a},t.setAxes=function(a,o,r,n){return l.a.setAxes(a.array,o.array,r.array,n.array),a._dirty=!0,a},t.rotationTo=function(a,o,r){return l.a.rotationTo(a.array,o.array,r.array),a._dirty=!0,a},t.fromEuler=function(a,o,r){a._dirty=!0,o=o.array;var n=a.array,h=Math.cos(o[0]/2),p=Math.cos(o[1]/2),d=Math.cos(o[2]/2),f=Math.sin(o[0]/2),v=Math.sin(o[1]/2),m=Math.sin(o[2]/2);switch(r=(r||"XYZ").toUpperCase()){case"XYZ":n[0]=f*p*d+h*v*m,n[1]=h*v*d-f*p*m,n[2]=h*p*m+f*v*d,n[3]=h*p*d-f*v*m;break;case"YXZ":n[0]=f*p*d+h*v*m,n[1]=h*v*d-f*p*m,n[2]=h*p*m-f*v*d,n[3]=h*p*d+f*v*m;break;case"ZXY":n[0]=f*p*d-h*v*m,n[1]=h*v*d+f*p*m,n[2]=h*p*m+f*v*d,n[3]=h*p*d-f*v*m;break;case"ZYX":n[0]=f*p*d-h*v*m,n[1]=h*v*d+f*p*m,n[2]=h*p*m-f*v*d,n[3]=h*p*d+f*v*m;break;case"YZX":n[0]=f*p*d+h*v*m,n[1]=h*v*d+f*p*m,n[2]=h*p*m-f*v*d,n[3]=h*p*d-f*v*m;break;case"XZY":n[0]=f*p*d-h*v*m,n[1]=h*v*d-f*p*m,n[2]=h*p*m+f*v*d,n[3]=h*p*d+f*v*m}},g.a=t},function(_,g,u){var c="__dt__",l=function(){this._contextId=0,this._caches=[],this._context={}};(l.prototype={use:function(e,t){var i=this._caches;i[e]||(i[e]={},t&&(i[e]=t())),this._contextId=e,this._context=i[e]},put:function(e,t){this._context[e]=t},get:function(e){return this._context[e]},dirty:function(e){var t=c+(e=e||"");this.put(t,!0)},dirtyAll:function(e){for(var t=c+(e=e||""),i=this._caches,s=0;s<i.length;s++)i[s]&&(i[s][t]=!0)},fresh:function(e){var t=c+(e=e||"");this.put(t,!1)},freshAll:function(e){for(var t=c+(e=e||""),i=this._caches,s=0;s<i.length;s++)i[s]&&(i[s][t]=!1)},isDirty:function(e){var t=c+(e=e||""),i=this._context;return!i.hasOwnProperty(t)||i[t]===!0},deleteContext:function(e){delete this._caches[e],this._context={}},delete:function(e){delete this._context[e]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(e,t){Object.keys(this._caches).forEach(function(i){e&&e.call(t,i)})},miss:function(e){return!this._context.hasOwnProperty(e)}}).constructor=l,g.a=l},function(_,g,u){var c,l=u(35),e=u(7),t=u(59),i=u(54),s=u(33),a=u(12),o=l.a.extend(function(){return{projectionMatrix:new e.a,invProjectionMatrix:new e.a,viewMatrix:new e.a,frustum:new t.a}},function(){this.update(!0)},{update:function(r){l.a.prototype.update.call(this,r),e.a.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),e.a.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(r){e.a.copy(this.viewMatrix,r),e.a.invert(this.worldTransform,r),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(r){e.a.copy(this.projectionMatrix,r),e.a.invert(this.invProjectionMatrix,r),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:(c=s.a.create(),function(r,n){var h=n!==void 0?n:new i.a,p=r.array[0],d=r.array[1];return s.a.set(c,p,d,-1,1),s.a.transformMat4(c,c,this.invProjectionMatrix.array),s.a.transformMat4(c,c,this.worldTransform.array),a.a.scale(h.origin.array,c,1/c[3]),s.a.set(c,p,d,1,1),s.a.transformMat4(c,c,this.invProjectionMatrix.array),s.a.transformMat4(c,c,this.worldTransform.array),a.a.scale(c,c,1/c[3]),a.a.sub(h.direction.array,c,h.origin.array),a.a.normalize(h.direction.array,h.direction.array),h.direction._dirty=!0,h.origin._dirty=!0,h})});g.a=o},function(_,g,u){var c,l=u(18),e=u(73),t=u(12),i=t.a.set,s=t.a.copy,a=t.a.transformMat4,o=Math.min,r=Math.max,n=function(){this.planes=[];for(var h=0;h<6;h++)this.planes.push(new e.a);for(this.boundingBox=new l.a,this.vertices=[],h=0;h<8;h++)this.vertices[h]=t.a.fromValues(0,0,0)};n.prototype={setFromProjection:function(h){var p=this.planes,d=h.array,f=d[0],v=d[1],m=d[2],y=d[3],x=d[4],w=d[5],M=d[6],C=d[7],A=d[8],P=d[9],b=d[10],N=d[11],B=d[12],z=d[13],F=d[14],V=d[15];i(p[0].normal.array,y-f,C-x,N-A),p[0].distance=-(V-B),p[0].normalize(),i(p[1].normal.array,y+f,C+x,N+A),p[1].distance=-(V+B),p[1].normalize(),i(p[2].normal.array,y+v,C+w,N+P),p[2].distance=-(V+z),p[2].normalize(),i(p[3].normal.array,y-v,C-w,N-P),p[3].distance=-(V-z),p[3].normalize(),i(p[4].normal.array,y-m,C-M,N-b),p[4].distance=-(V-F),p[4].normalize(),i(p[5].normal.array,y+m,C+M,N+b),p[5].distance=-(V+F),p[5].normalize();var H=this.boundingBox,U=this.vertices;if(V===0){var j=w/f,X=-F/(b-1),Y=-F/(b+1),J=-Y/w,K=-X/w;H.min.set(-J*j,-J,Y),H.max.set(J*j,J,X),i(U[0],-J*j,-J,Y),i(U[1],-J*j,J,Y),i(U[2],J*j,-J,Y),i(U[3],J*j,J,Y),i(U[4],-K*j,-K,X),i(U[5],-K*j,K,X),i(U[6],K*j,-K,X),i(U[7],K*j,K,X)}else{var Q=(-1-B)/f,Z=(1-B)/f,q=(1-z)/w,tt=(-1-z)/w,$=(-1-F)/b,rt=(1-F)/b;H.min.set(Math.min(Q,Z),Math.min(tt,q),Math.min(rt,$)),H.max.set(Math.max(Z,Q),Math.max(q,tt),Math.max($,rt));var et=H.min.array,it=H.max.array;i(U[0],et[0],et[1],et[2]),i(U[1],et[0],it[1],et[2]),i(U[2],it[0],et[1],et[2]),i(U[3],it[0],it[1],et[2]),i(U[4],et[0],et[1],it[2]),i(U[5],et[0],it[1],it[2]),i(U[6],it[0],et[1],it[2]),i(U[7],it[0],it[1],it[2])}},getTransformedBoundingBox:(c=t.a.create(),function(h,p){var d=this.vertices,f=p.array,v=h.min,m=h.max,y=v.array,x=m.array,w=d[0];a(c,w,f),s(y,c),s(x,c);for(var M=1;M<8;M++)w=d[M],a(c,w,f),y[0]=o(c[0],y[0]),y[1]=o(c[1],y[1]),y[2]=o(c[2],y[2]),x[0]=r(c[0],x[0]),x[1]=r(c[1],x[1]),x[2]=r(c[2],x[2]);return v._dirty=!0,m._dirty=!0,h})},g.a=n},function(_,g,u){var c=u(5),l=u(27),e=u(13),t=u(61),i=u(75),s=u(36),a=u(121),o=u(122),r={loadTexture:function(n,h,p,d){var f;if(typeof h=="function"?(d=p=h,h={}):h=h||{},typeof n=="string"){if(n.match(/.hdr$/)||h.fileType==="hdr")return f=new c.a({width:0,height:0,sRGB:!1}),r._fetchTexture(n,function(v){o.a.parseRGBE(v,f,h.exposure),f.dirty(),p&&p(f)},d),f;n.match(/.dds$/)||h.fileType==="dds"?(f=new c.a({width:0,height:0}),r._fetchTexture(n,function(v){a.a.parse(v,f),f.dirty(),p&&p(f)},d)):((f=new c.a).load(n),f.success(p),f.error(d))}else E(n)==="object"&&n.px!==void 0&&((f=new l.a).load(n),f.success(p),f.error(d));return f},loadPanorama:function(n,h,p,d,f,v){var m=this;typeof d=="function"?(v=f=d,d={}):d=d||{},r.loadTexture(h,d,function(y){y.flipY=d.flipY||!1,m.panoramaToCubeMap(n,y,p,d),y.dispose(n),f&&f(p)},v)},panoramaToCubeMap:function(n,h,p,d){var f=new t.a,v=new i.a({scene:new s.a});return v.setEnvironmentMap(h),(d=d||{}).encodeRGBM&&v.material.define("fragment","RGBM_ENCODE"),p.sRGB=h.sRGB,f.texture=p,f.render(n,v.scene),f.texture=null,f.dispose(n),p},heightToNormal:function(n,h){var p=document.createElement("canvas"),d=p.width=n.width,f=p.height=n.height,v=p.getContext("2d");v.drawImage(n,0,0,d,f),h=h||!1;for(var m=v.getImageData(0,0,d,f),y=v.createImageData(d,f),x=0;x<m.data.length;x+=4){if(h){var w=m.data[x],M=m.data[x+1],C=m.data[x+2];if(Math.abs(w-M)+Math.abs(M-C)>20)return console.warn("Given image is not a height map"),n}var A,P,b,N;x%(4*d)==0?(A=m.data[x],b=m.data[x+4]):x%(4*d)==4*(d-1)?(A=m.data[x-4],b=m.data[x]):(A=m.data[x-4],b=m.data[x+4]),x<4*d?(P=m.data[x],N=m.data[x+4*d]):x>d*(f-1)*4?(P=m.data[x-4*d],N=m.data[x]):(P=m.data[x-4*d],N=m.data[x+4*d]),y.data[x]=A-b+127,y.data[x+1]=P-N+127,y.data[x+2]=255,y.data[x+3]=255}return v.putImageData(y,0,0),p},isHeightImage:function(n,h,p){if(!n||!n.width||!n.height)return!1;var d=document.createElement("canvas"),f=d.getContext("2d"),v=h||32;p=p||20,d.width=d.height=v,f.drawImage(n,0,0,v,v);for(var m=f.getImageData(0,0,v,v),y=0;y<m.data.length;y+=4){var x=m.data[y],w=m.data[y+1],M=m.data[y+2];if(Math.abs(x-w)+Math.abs(w-M)>p)return!1}return!0},_fetchTexture:function(n,h,p){e.a.request.get({url:n,responseType:"arraybuffer",onload:h,onerror:p})},createChessboard:function(n,h,p,d){n=n||512,h=h||64,p=p||"black",d=d||"white";var f=Math.ceil(n/h),v=document.createElement("canvas");v.width=n,v.height=n;var m=v.getContext("2d");m.fillStyle=d,m.fillRect(0,0,n,n),m.fillStyle=p;for(var y=0;y<f;y++)for(var x=0;x<f;x++)(x%2?y%2:y%2-1)&&m.fillRect(y*h,x*h,h,h);return new c.a({image:v,anisotropic:8})},createBlank:function(n){var h=document.createElement("canvas");h.width=1,h.height=1;var p=h.getContext("2d");return p.fillStyle=n,p.fillRect(0,0,1,1),new c.a({image:h})}};g.a=r},function(_,g,u){var c=u(8),l=u(3),e=u(37),t=u(10),i=["px","nx","py","ny","pz","nz"],s=c.a.extend(function(){var a={position:new l.a,far:1e3,near:.1,texture:null,shadowMapPass:null},o=a._cameras={px:new e.a({fov:90}),nx:new e.a({fov:90}),py:new e.a({fov:90}),ny:new e.a({fov:90}),pz:new e.a({fov:90}),nz:new e.a({fov:90})};return o.px.lookAt(l.a.POSITIVE_X,l.a.NEGATIVE_Y),o.nx.lookAt(l.a.NEGATIVE_X,l.a.NEGATIVE_Y),o.py.lookAt(l.a.POSITIVE_Y,l.a.POSITIVE_Z),o.ny.lookAt(l.a.NEGATIVE_Y,l.a.NEGATIVE_Z),o.pz.lookAt(l.a.POSITIVE_Z,l.a.NEGATIVE_Y),o.nz.lookAt(l.a.NEGATIVE_Z,l.a.NEGATIVE_Y),a._frameBuffer=new t.a,a},{getCamera:function(a){return this._cameras[a]},render:function(a,o,r){var n=a.gl;r||o.update();for(var h=this.texture.width,p=2*Math.atan(h/(h-.5))/Math.PI*180,d=0;d<6;d++){var f=i[d],v=this._cameras[f];if(l.a.copy(v.position,this.position),v.far=this.far,v.near=this.near,v.fov=p,this.shadowMapPass){v.update();var m=o.getBoundingBox();m.applyTransform(v.viewMatrix),o.viewBoundingBoxLastFrame.copy(m),this.shadowMapPass.render(a,o,v,!0)}this._frameBuffer.attach(this.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+d),this._frameBuffer.bind(a),a.render(o,v,!0),this._frameBuffer.unbind(a)}},dispose:function(a){this._frameBuffer.dispose(a)}});g.a=s},function(_,g,u){var c=u(1),l=u(164),e=u(165);c.a.Shader.import(e.a),g.a=c.a.Mesh.extend(function(){return{geometry:new l.a({dynamic:!0}),material:new c.a.Material({shader:c.a.createShader("ecgl.labels"),transparent:!0,depthMask:!1}),culling:!1,castShadow:!1,ignorePicking:!0}})},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(206),i=u(25),s=u(2),a=u(6),o=u(64),r=u(65),n=u(46),h=a.a.vec3;function p(d){this.rootNode=new e.a.Node,this._triangulationResults={},this._shadersMap=e.a.COMMON_SHADERS.reduce(function(v,m){return v[m]=e.a.createShader("ecgl."+m),v},{}),this._linesShader=e.a.createShader("ecgl.meshLines3D");var f={};e.a.COMMON_SHADERS.forEach(function(v){f[v]=new e.a.Material({shader:e.a.createShader("ecgl."+v)})}),this._groundMaterials=f,this._groundMesh=new e.a.Mesh({geometry:new e.a.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new r.a(512,512,d),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=d}e.a.Shader.import(n.a),p.prototype={constructor:p,extrudeY:!0,update:function(d,f,v,m,y){var x=d.getData();m==null&&(m=0),y==null&&(y=x.count()),this._startIndex=m,this._endIndex=y-1,this._triangulation(d,m,y);var w=this._getShader(d.get("shading"));this._prepareMesh(d,w,v,m,y),this.rootNode.updateWorldTransform(),this._updateRegionMesh(d,v,m,y);var M=d.coordinateSystem;M.type==="geo3D"&&this._updateGroundPlane(d,M,v);var C=this;this._labelsBuilder.updateData(x,m,y),this._labelsBuilder.getLabelPosition=function(A,P,b){var N=x.getName(A),B=b;if(M.type==="geo3D"){var z=M.getRegion(N);return z?(V=z.center,M.dataToPoint([V[0],V[1],B])):[NaN,NaN,NaN]}var F=C._triangulationResults[A-C._startIndex],V=C.extrudeY?[(F.max[0]+F.min[0])/2,F.max[1]+B,(F.max[2]+F.min[2])/2]:[(F.max[0]+F.min[0])/2,(F.max[1]+F.min[1])/2,F.max[2]+B]},this._data=x,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(d),this._lastHoverDataIndex=0},_initMeshes:function(){var d,f=(d=new e.a.Mesh({name:"Polygon",material:new e.a.Material({shader:this._shadersMap.lambert}),geometry:new e.a.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0}),l.a.util.extend(d.geometry,o.a),d),v=new e.a.Mesh({material:new e.a.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new i.a({useNativeLine:!1})});this.rootNode.add(f),this.rootNode.add(v),f.material.define("both","VERTEX_COLOR"),f.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=f,this._linesMesh=v,this.rootNode.add(this._groundMesh)},_getShader:function(d){var f=this._shadersMap[d];return f||(console.warn("Unkown shading "+d),f=this._shadersMap.lambert),f.__shading=d,f},_prepareMesh:function(d,f,v,m,y){for(var x=0,w=0,M=0,C=0,A=m;A<y;A++){var P=this._getRegionPolygonInfo(A),b=this._getRegionLinesInfo(A,d,this._linesMesh.geometry);x+=P.vertexCount,w+=P.triangleCount,M+=b.vertexCount,C+=b.triangleCount}var N=this._polygonMesh,B=N.geometry;["position","normal","texcoord0","color"].forEach(function(z){B.attributes[z].init(x)}),B.indices=x>65535?new Uint32Array(3*w):new Uint16Array(3*w),N.material.shader!==f&&N.material.attachShader(f,!0),e.a.setMaterialFromModel(f.__shading,N.material,d,v),M>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(M),this._linesMesh.geometry.setTriangleCount(C)),this._dataIndexOfVertex=new Uint32Array(x),this._vertexRangeOfDataIndex=new Uint32Array(2*(y-m))},_updateRegionMesh:function(d,f,v,m){for(var y=d.getData(),x=0,w=0,M=!1,C=this._polygonMesh,A=this._linesMesh,P=v;P<m;P++){var b=d.getRegionModel(P),N=b.getModel("itemStyle"),B=N.get("color"),z=s.a.firstNotNull(N.get("opacity"),1),F=y.getItemVisual(P,"color",!0);F!=null&&y.hasValue(P)&&(B=F),y.setItemVisual(P,"color",B),y.setItemVisual(P,"opacity",z),B=e.a.parseColor(B);var V=e.a.parseColor(N.get("borderColor"));B[3]*=z,V[3]*=z;var H=B[3]<.99;C.material.set("color",[1,1,1,1]),M=M||H;for(var U=s.a.firstNotNull(b.get("height",!0),d.get("regionHeight")),j=this._updatePolygonGeometry(d,C.geometry,P,U,x,w,B),X=x;X<j.vertexOffset;X++)this._dataIndexOfVertex[X]=P;this._vertexRangeOfDataIndex[2*(P-v)]=x,this._vertexRangeOfDataIndex[2*(P-v)+1]=j.vertexOffset,x=j.vertexOffset,w=j.triangleOffset;var Y=N.get("borderWidth"),J=Y>0;J&&(Y*=f.getDevicePixelRatio(),this._updateLinesGeometry(A.geometry,d,P,U,Y,d.coordinateSystem.transform)),A.invisible=!J,A.material.set({color:V})}(C=this._polygonMesh).material.transparent=M,C.material.depthMask=!M,C.geometry.updateBoundingBox(),C.frontFace=this.extrudeY?e.a.Mesh.CCW:e.a.Mesh.CW,C.material.get("normalMap")&&C.geometry.generateTangents(),C.seriesIndex=d.seriesIndex,C.on("mousemove",this._onmousemove,this),C.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(d){var f=d.getModel("debug.wireframe");if(f.get("show")){var v=e.a.parseColor(f.get("lineStyle.color")||"rgba(0,0,0,0.5)"),m=s.a.firstNotNull(f.get("lineStyle.width"),1),y=this._polygonMesh;y.geometry.generateBarycentric(),y.material.define("both","WIREFRAME_TRIANGLE"),y.material.set("wireframeLineColor",v),y.material.set("wireframeLineWidth",m)}},_onmousemove:function(d){var f=this._dataIndexOfVertex[d.triangle[0]];f==null&&(f=-1),f!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(f),this._labelsBuilder.updateLabels([f])),this._lastHoverDataIndex=f,this._polygonMesh.dataIndex=f;const v=S;v.offsetX=d.offsetX,v.offsetY=d.offsetY,v.fnWatch&&v.fnWatch({name:"mapMousemove",data:v})},_onmouseout:function(d){d.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1,S.fnWatch&&S.fnWatch({name:"mapMouseout"})),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(d,f,v){var m=d.getModel("groundPlane",d);if(this._groundMesh.invisible=!m.get("show",!0),!this._groundMesh.invisible){var y=d.get("shading"),x=this._groundMaterials[y];x||(console.warn("Unkown shading "+y),x=this._groundMaterials.lambert),e.a.setMaterialFromModel(y,x,m,v),x.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=x,this._groundMesh.material.set("color",e.a.parseColor(m.get("color"))),this._groundMesh.scale.set(f.size[0],f.size[2],1)}},_triangulation:function(d,f,v){this._triangulationResults=[];for(var m=[1/0,1/0,1/0],y=[-1/0,-1/0,-1/0],x=d.coordinateSystem,w=f;w<v;w++){for(var M=[],C=d.getRegionPolygonCoords(w),A=0;A<C.length;A++){var P=C[A].exterior,b=C[A].interiors,N=[],B=[];if(!(P.length<3)){for(var z=0,F=0;F<P.length;F++){var V=P[F];N[z++]=V[0],N[z++]=V[1]}for(F=0;F<b.length;F++)if(!(b[F].length<3)){for(var H=N.length/2,U=0;U<b[F].length;U++)V=b[F][U],N.push(V[0]),N.push(V[1]);B.push(H)}var j=Object(t.a)(N,B),X=new Float64Array(N.length/2*3),Y=[],J=[1/0,1/0,1/0],K=[-1/0,-1/0,-1/0],Q=0;for(F=0;F<N.length;)h.set(Y,N[F++],0,N[F++]),x&&x.transform&&h.transformMat4(Y,Y,x.transform),h.min(J,J,Y),h.max(K,K,Y),X[Q++]=Y[0],X[Q++]=Y[1],X[Q++]=Y[2];h.min(m,m,J),h.max(y,y,K),M.push({points:X,indices:j,min:J,max:K})}}this._triangulationResults.push(M)}this._geoBoundingBox=[m,y]},_getRegionPolygonInfo:function(d){for(var f=this._triangulationResults[d-this._startIndex],v=0,m=0,y=0;y<f.length;y++)v+=f[y].points.length/3,m+=f[y].indices.length/3;return{vertexCount:2*v+4*v,triangleCount:2*m+2*v}},_updatePolygonGeometry:function(d,f,v,m,y,x,w){var M=d.get("projectUVOnGround"),C=f.attributes.position,A=f.attributes.normal,P=f.attributes.texcoord0,b=f.attributes.color,N=this._triangulationResults[v-this._startIndex],B=b.value&&w,z=f.indices,F=this.extrudeY?1:2,V=this.extrudeY?2:1,H=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],U=h.mul([],this._geoBoundingBox[0],H),j=h.mul([],this._geoBoundingBox[1],H),X=Math.max(j[0]-U[0],j[2]-U[2]);function Y(ct,ht,ft){var _t=y;(function(It,Mt,Lt){for(var kt=It.points,Rt=kt.length,ut=[],dt=[],xt=0;xt<Rt;xt+=3)ut[0]=kt[xt],ut[F]=Mt,ut[V]=kt[xt+2],dt[0]=(kt[xt]*H[0]-U[0])/X,dt[1]=(kt[xt+2]*H[V]-U[2])/X,C.set(y,ut),B&&b.set(y,w),P.set(y++,dt)})(ct,ht);for(var wt=ct.indices.length,Tt=0;Tt<wt;Tt++)z[3*x+Tt]=ct.indices[Tt]+_t;x+=ct.indices.length/3}for(var J=this.extrudeY?[0,1,0]:[0,0,1],K=h.negate([],J),Q=0;Q<N.length;Q++){var Z=y,q=N[Q];Y(q,0),Y(q,m);for(var tt=q.points.length/3,$=0;$<tt;$++)A.set(Z+$,K),A.set(Z+$+tt,J);var rt=[0,3,1,1,3,2],et=[[],[],[],[]],it=[],ot=[],st=[],at=[],vt=0;for($=0;$<tt;$++){for(var yt=($+1)%tt,gt=(q.points[3*yt]-q.points[3*$])*H[0],pt=(q.points[3*yt+2]-q.points[3*$+2])*H[V],bt=Math.sqrt(gt*gt+pt*pt),mt=0;mt<4;mt++){var nt=mt===0||mt===3,lt=3*(nt?$:yt);et[mt][0]=q.points[lt],et[mt][F]=mt>1?m:0,et[mt][V]=q.points[lt+2],C.set(y+mt,et[mt]),M?(at[0]=(q.points[lt]*H[0]-U[0])/X,at[1]=(q.points[lt+2]*H[V]-U[V])/X):(at[0]=(nt?vt:vt+bt)/X,at[1]=(et[mt][F]*H[F]-U[F])/X),P.set(y+mt,at)}for(h.sub(it,et[1],et[0]),h.sub(ot,et[3],et[0]),h.cross(st,it,ot),h.normalize(st,st),mt=0;mt<4;mt++)A.set(y+mt,st),B&&b.set(y+mt,w);for(mt=0;mt<6;mt++)z[3*x+mt]=rt[mt]+y;y+=4,x+=2,vt+=bt}}return f.dirty(),{vertexOffset:y,triangleOffset:x}},_getRegionLinesInfo:function(d,f,v){var m=0,y=0;return f.getRegionModel(d).getModel("itemStyle").get("borderWidth")>0&&f.getRegionPolygonCoords(d).forEach(function(x){var w=x.exterior,M=x.interiors;m+=v.getPolylineVertexCount(w),y+=v.getPolylineTriangleCount(w);for(var C=0;C<M.length;C++)m+=v.getPolylineVertexCount(M[C]),y+=v.getPolylineTriangleCount(M[C])},this),{vertexCount:m,triangleCount:y}},_updateLinesGeometry:function(d,f,v,m,y,x){function w(C){for(var A=new Float64Array(3*C.length),P=0,b=[],N=0;N<C.length;N++)b[0]=C[N][0],b[1]=m+.1,b[2]=C[N][1],x&&h.transformMat4(b,b,x),A[P++]=b[0],A[P++]=b[1],A[P++]=b[2];return A}var M=[1,1,1,1];f.getRegionPolygonCoords(v).forEach(function(C){var A=C.exterior,P=C.interiors;d.addPolyline(w(A),M,y);for(var b=0;b<P.length;b++)d.addPolyline(w(P[b]),M,y)})},highlight:function(d){var f=this._data;if(f){var v=f.getItemModel(d).getModel("emphasis.itemStyle"),m=v.get("color"),y=s.a.firstNotNull(v.get("opacity"),f.getItemVisual(d,"opacity"),1);if(m==null){var x=f.getItemVisual(d,"color");m=l.a.color.lift(x,-.4)}y==null&&(y=f.getItemVisual(d,"opacity"));var w=e.a.parseColor(m);w[3]*=y,this._setColorOfDataIndex(f,d,w)}},downplay:function(d){var f=this._data;if(f){var v=f.getItemVisual(d,"color"),m=s.a.firstNotNull(f.getItemVisual(d,"opacity"),1),y=e.a.parseColor(v);y[3]*=m,this._setColorOfDataIndex(f,d,y)}},_setColorOfDataIndex:function(d,f,v){if(!(f<this._startIndex&&f>this._endIndex)){f-=this._startIndex;for(var m=this._vertexRangeOfDataIndex[2*f];m<this._vertexRangeOfDataIndex[2*f+1];m++)this._polygonMesh.geometry.attributes.color.set(m,v);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}},g.a=p},function(_,g,u){var c=u(96),l=u(6).a.vec3,e=l.create(),t=l.create(),i=l.create();g.a={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(s,a){var o=this.indices;if(a===0){var r=this.attributes.position;s=s.array,this._triangleZList&&this._triangleZList.length===this.triangleCount||(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new o.constructor(o.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var n,h=0,p=0;p<o.length;){r.get(o[p++],e),r.get(o[p++],t),r.get(o[p++],i);var d=l.sqrDist(e,s),f=l.sqrDist(t,s),v=l.sqrDist(i,s),m=Math.min(d,f);m=Math.min(m,v),p===3?(n=m,m=0):m-=n,this._triangleZList[h++]=m}}var y=this._sortedTriangleIndices;for(p=0;p<y.length;p++)y[p]=p;if(this.triangleCount<2e4)a===0&&this._simpleSort(!0);else for(p=0;p<3;p++)this._progressiveQuickSort(3*a+p);var x=this._indicesTmp,w=this._triangleZListTmp,M=this._triangleZList;for(p=0;p<this.triangleCount;p++){var C=3*y[p],A=3*p;x[A++]=o[C++],x[A++]=o[C++],x[A]=o[C],w[p]=M[y[p]]}var P=this._indicesTmp;this._indicesTmp=this.indices,this.indices=P,P=this._triangleZListTmp,this._triangleZListTmp=this._triangleZList,this._triangleZList=P,this.dirtyIndices()},_simpleSort:function(s){var a=this._triangleZList,o=this._sortedTriangleIndices;function r(n,h){return a[h]-a[n]}s?Array.prototype.sort.call(o,r):c.a.sort(o,r,0,o.length-1)},_progressiveQuickSort:function(s){var a=this._triangleZList,o=this._sortedTriangleIndices;this._quickSort=this._quickSort||new c.a,this._quickSort.step(o,function(r,n){return a[n]-a[r]},s)}}},function(_,g,u){var c=u(0),l=u.n(c),e=u(82),t=u(62),i=u(2);function s(a,o,r){this._labelsMesh=new t.a,this._labelTextureSurface=new e.a({width:512,height:512,devicePixelRatio:r.getDevicePixelRatio(),onupdate:function(){r.getZr().refresh()}}),this._api=r,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}s.prototype.getLabelPosition=function(a,o,r){return[0,0,0]},s.prototype.getLabelDistance=function(a,o,r){return 0},s.prototype.getMesh=function(){return this._labelsMesh},s.prototype.updateData=function(a,o,r){o==null&&(o=0),r==null&&(r=a.count()),this._labelsVisibilitiesBits&&this._labelsVisibilitiesBits.length===r-o||(this._labelsVisibilitiesBits=new Uint8Array(r-o));for(var n=["label","show"],h=["emphasis","label","show"],p=o;p<r;p++){var d=a.getItemModel(p),f=d.get(n),v=d.get(h);v==null&&(v=f);var m=(f?1:0)|(v?2:0);this._labelsVisibilitiesBits[p-o]=m}this._start=o,this._end=r,this._data=a},s.prototype.updateLabels=function(a){if(this._data){for(var o=(a=a||[]).length>0,r={},n=0;n<a.length;n++)r[a[n]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var h=["label"],p=["emphasis","label"],d=this._data.hostModel,f=this._data,v=d.getModel(h),m=d.getModel(p,v),y={left:"right",right:"left",top:"center",bottom:"center"},x={left:"middle",right:"middle",top:"bottom",bottom:"top"},w=this._start;w<this._end;w++){var M=!1;if(o&&r[w]&&(M=!0),this._labelsVisibilitiesBits[w-this._start]&(M?2:1)){var C=f.getItemModel(w).getModel(M?p:h,M?m:v),A=C.get("distance")||0,P=C.get("position"),b=C.getModel("textStyle"),N=this._api.getDevicePixelRatio(),B=d.getFormattedLabel(w,M?"emphasis":"normal");if(B==null||B==="")return;var z=new l.a.graphic.Text;l.a.graphic.setTextStyle(z.style,b,{text:B,textFill:b.get("color")||f.getItemVisual(w,"color")||"#000",textAlign:"left",textVerticalAlign:"top",opacity:i.a.firstNotNull(b.get("opacity"),f.getItemVisual(w,"opacity"),1)});var F=z.getBoundingRect();F.height*=1.2;var V=this._labelTextureSurface.add(z),H=y[P]||"center",U=x[P]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(w,P,A),[F.width*N,F.height*N],V,H,U,this.getLabelDistance(w,P,A)*N)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}},g.a=s},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(241),i=u(242),s=u(65),a=u(7),o=u(2);function r(n,h){this.rootNode=new e.a.Node,this.is2D=n,this._labelsBuilder=new s.a(256,256,h),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=h,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}r.prototype={constructor:r,highlightOnMouseover:!0,update:function(n,h,p,d,f){var v=this._prevMesh;this._prevMesh=this._mesh,this._mesh=v;var m=n.getData();if(d==null&&(d=0),f==null&&(f=m.count()),this._startDataIndex=d,this._endDataIndex=f-1,!this._mesh){var y=this._prevMesh&&this._prevMesh.material;this._mesh=new i.a({renderOrder:10,frustumCulling:!1}),y&&(this._mesh.material=y)}y=this._mesh.material;var x=this._mesh.geometry,w=x.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var M=this._getSymbolInfo(n,d,f),C=p.getDevicePixelRatio(),A=n.getModel("itemStyle").getItemStyle(),P=n.get("large"),b=1;M.maxSize>2?(b=this._updateSymbolSprite(n,A,M,C),y.enableTexture("sprite")):y.disableTexture("sprite"),w.position.init(f-d);var N=[];if(P){y.undefine("VERTEX_SIZE"),y.undefine("VERTEX_COLOR");var B=m.getVisual("color"),z=m.getVisual("opacity");e.a.parseColor(B,N),N[3]*=z,y.set({color:N,u_Size:M.maxSize*this._sizeScale})}else y.set({color:[1,1,1,1]}),y.define("VERTEX_SIZE"),y.define("VERTEX_COLOR"),w.size.init(f-d),w.color.init(f-d),this._originalOpacity=new Float32Array(f-d);for(var F=m.getLayout("points"),V=w.position.value,H=0;H<f-d;H++){var U=3*H,j=2*H;if(this.is2D?(V[U]=F[j],V[U+1]=F[j+1],V[U+2]=-10):(V[U]=F[U],V[U+1]=F[U+1],V[U+2]=F[U+2]),!P){B=m.getItemVisual(H,"color"),z=m.getItemVisual(H,"opacity"),e.a.parseColor(B,N),N[3]*=z,w.color.set(H,N),N[3];var X=m.getItemVisual(H,"symbolSize");X=D(X,Array)?Math.max(X[0],X[1]):X,isNaN(X)&&(X=0),w.size.value[H]=X*b*this._sizeScale,this._originalOpacity[H]=N[3]}}this._mesh.sizeScale=b,x.updateBoundingBox(),x.dirty(),this._updateMaterial(n,A);var Y=n.coordinateSystem;Y&&Y.viewGL&&y[Y.viewGL.isLinearSpace()?"define":"undefine"]("fragment","SRGB_DECODE"),P||this._updateLabelBuilder(n,d,f),this._updateHandler(n,h,p),this._updateAnimation(n),this._api=p},getPointsMesh:function(){return this._mesh},updateLabels:function(n){this._labelsBuilder.updateLabels(n)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},_updateSymbolSprite:function(n,h,p,d){p.maxSize=Math.min(2*p.maxSize,200);var f,v,m=[];return p.aspect>1?(m[0]=p.maxSize,m[1]=p.maxSize/p.aspect):(m[1]=p.maxSize,m[0]=p.maxSize*p.aspect),m[0]=m[0]||1,m[1]=m[1]||1,this._symbolType===p.type&&(v=m,(f=this._symbolSize)&&v&&f[0]===v[0]&&f[1]===v[1])&&this._lineWidth===h.lineWidth||(t.a.createSymbolSprite(p.type,m,{fill:"#fff",lineWidth:h.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(m[0]/2,10)},this._spriteImageCanvas),t.a.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),20,this._mesh.material.get("sprite").image),this._symbolType=p.type,this._symbolSize=m,this._lineWidth=h.lineWidth),this._spriteImageCanvas.width/p.maxSize*d},_updateMaterial:function(n,h){var p=n.get("blendMode")==="lighter"?e.a.additiveBlend:null,d=this._mesh.material;d.blend=p,d.set("lineWidth",h.lineWidth/20);var f=e.a.parseColor(h.stroke);d.set("strokeColor",f),d.transparent=!0,d.depthMask=!1,d.depthTest=!this.is2D,d.sortVertices=!this.is2D},_updateLabelBuilder:function(n,h,p){var d=n.getData(),f=this._mesh.geometry,v=f.attributes.position.value,m=(h=this._startDataIndex,this._mesh.sizeScale);this._labelsBuilder.updateData(d,h,p),this._labelsBuilder.getLabelPosition=function(y,x,w){var M=3*(y-h);return[v[M],v[M+1],v[M+2]]},this._labelsBuilder.getLabelDistance=function(y,x,w){return f.attributes.size.get(y-h)/m/2+w},this._labelsBuilder.updateLabels()},_updateAnimation:function(n){e.a.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,n)},_updateHandler:function(n,h,p){var d,f=n.getData(),v=this._mesh,m=this,y=-1,x=n.coordinateSystem&&n.coordinateSystem.type==="cartesian3D";x&&(d=n.coordinateSystem.model),v.seriesIndex=n.seriesIndex,v.off("mousemove"),v.off("mouseout"),v.on("mousemove",function(w){var M=w.vertexIndex+m._startDataIndex;M!==y&&(this.highlightOnMouseover&&(this.downplay(f,y),this.highlight(f,M),this._labelsBuilder.updateLabels([M])),x&&p.dispatchAction({type:"grid3DShowAxisPointer",value:[f.get(n.coordDimToDataDim("x")[0],M),f.get(n.coordDimToDataDim("y")[0],M),f.get(n.coordDimToDataDim("z")[0],M)],grid3DIndex:d.componentIndex})),v.dataIndex=M,y=M},this),v.on("mouseout",function(w){var M=w.vertexIndex+m._startDataIndex;this.highlightOnMouseover&&(this.downplay(f,M),this._labelsBuilder.updateLabels()),y=-1,v.dataIndex=-1,x&&p.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:d.componentIndex})},this)},updateLayout:function(n,h,p){var d=n.getData();if(this._mesh){var f=this._mesh.geometry.attributes.position.value,v=d.getLayout("points");if(this.is2D)for(var m=0;m<v.length/2;m++){var y=3*m,x=2*m;f[y]=v[x],f[y+1]=v[x+1],f[y+2]=-10}else for(m=0;m<v.length;m++)f[m]=v[m];this._mesh.geometry.dirty(),p.getZr().refresh()}},updateView:function(n){if(this._mesh){var h=new a.a;a.a.mul(h,n.viewMatrix,this._mesh.worldTransform),a.a.mul(h,n.projectionMatrix,h),this._mesh.updateNDCPosition(h,this.is2D,this._api)}},highlight:function(n,h){if(!(h>this._endDataIndex||h<this._startDataIndex)){var p=n.getItemModel(h).getModel("emphasis.itemStyle"),d=p.get("color"),f=p.get("opacity");if(d==null){var v=n.getItemVisual(h,"color");d=l.a.color.lift(v,-.4)}f==null&&(f=n.getItemVisual(h,"opacity"));var m=e.a.parseColor(d);m[3]*=f,this._mesh.geometry.attributes.color.set(h-this._startDataIndex,m),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(n,h){if(!(h>this._endDataIndex||h<this._startDataIndex)){var p=n.getItemVisual(h,"color"),d=n.getItemVisual(h,"opacity"),f=e.a.parseColor(p);f[3]*=d,this._mesh.geometry.attributes.color.set(h-this._startDataIndex,f),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(n){if(this._originalOpacity){for(var h=this._mesh.geometry,p=0;p<h.vertexCount;p++){var d=this._originalOpacity[p]*n;h.attributes.color.value[4*p+3]=d}h.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(n){this._mesh&&this._setPositionTextureToMesh(this._mesh,n),this._positionTexture=n},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(n){if(n!==this._sizeScale){if(this._mesh){var h=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",h/this._sizeScale*n);var p=this._mesh.geometry.attributes;if(p.size.value)for(var d=0;d<p.size.value.length;d++)p.size.value[d]=p.size.value[d]/this._sizeScale*n}this._sizeScale=n}},_setPositionTextureToMesh:function(n,h){h&&n.material.set("positionTexture",h),n.material[h?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(n,h,p){if(n.get("large"))return D(C=o.a.firstNotNull(n.get("symbolSize"),1),Array)?(x=Math.max(C[0],C[1]),d=C[0]/C[1]):(x=C,d=1),{maxSize:C,type:n.get("symbol"),aspect:d};for(var d,f=n.getData(),v=!1,m=f.getItemVisual(0,"symbol")||"circle",y=!1,x=0,w=h;w<p;w++){var M,C=f.getItemVisual(w,"symbolSize"),A=f.getItemVisual(w,"symbol");if(D(C,Array))M=C[0]/C[1],x=Math.max(Math.max(C[0],C[1]),x);else{if(isNaN(C))return;M=1,x=Math.max(C,x)}d!=null&&Math.abs(M-d)>.05&&(v=!0),A!==m&&(y=!0),m=A,d=M}return v&&console.warn("Different symbol width / height ratio will be ignored."),y&&console.warn("Different symbol type will be ignored."),{maxSize:x,type:m,aspect:d}}},g.a=r},function(_,g){var u;u=function(){return this}();try{u=u||Function("return this")()||(0,eval)("this")}catch{(typeof window>"u"?"undefined":E(window))==="object"&&(u=window)}_.exports=u},function(_,g,u){var c=u(113),l=function(e){this._list=new c.a,this._map={},this._maxSize=e||10};l.prototype.setMaxSize=function(e){this._maxSize=e},l.prototype.put=function(e,t){if(!this._map.hasOwnProperty(e)){var i=this._list.length();if(i>=this._maxSize&&i>0){var s=this._list.head;this._list.remove(s),delete this._map[s.key]}var a=this._list.insert(t);a.key=e,this._map[e]=a}},l.prototype.get=function(e){var t=this._map[e];if(this._map.hasOwnProperty(e))return t!==this._list.tail&&(this._list.remove(t),this._list.insertEntry(t)),t.value},l.prototype.remove=function(e){var t=this._map[e];t!==void 0&&(delete this._map[e],this._list.remove(t))},l.prototype.clear=function(){this._list.clear(),this._map={}},g.a=l},function(_,g,u){var c,l=u(20),e={create:function(){var t=new l.a(2);return t[0]=0,t[1]=0,t},clone:function(t){var i=new l.a(2);return i[0]=t[0],i[1]=t[1],i},fromValues:function(t,i){var s=new l.a(2);return s[0]=t,s[1]=i,s},copy:function(t,i){return t[0]=i[0],t[1]=i[1],t},set:function(t,i,s){return t[0]=i,t[1]=s,t},add:function(t,i,s){return t[0]=i[0]+s[0],t[1]=i[1]+s[1],t},subtract:function(t,i,s){return t[0]=i[0]-s[0],t[1]=i[1]-s[1],t}};e.sub=e.subtract,e.multiply=function(t,i,s){return t[0]=i[0]*s[0],t[1]=i[1]*s[1],t},e.mul=e.multiply,e.divide=function(t,i,s){return t[0]=i[0]/s[0],t[1]=i[1]/s[1],t},e.div=e.divide,e.min=function(t,i,s){return t[0]=Math.min(i[0],s[0]),t[1]=Math.min(i[1],s[1]),t},e.max=function(t,i,s){return t[0]=Math.max(i[0],s[0]),t[1]=Math.max(i[1],s[1]),t},e.scale=function(t,i,s){return t[0]=i[0]*s,t[1]=i[1]*s,t},e.scaleAndAdd=function(t,i,s,a){return t[0]=i[0]+s[0]*a,t[1]=i[1]+s[1]*a,t},e.distance=function(t,i){var s=i[0]-t[0],a=i[1]-t[1];return Math.sqrt(s*s+a*a)},e.dist=e.distance,e.squaredDistance=function(t,i){var s=i[0]-t[0],a=i[1]-t[1];return s*s+a*a},e.sqrDist=e.squaredDistance,e.length=function(t){var i=t[0],s=t[1];return Math.sqrt(i*i+s*s)},e.len=e.length,e.squaredLength=function(t){var i=t[0],s=t[1];return i*i+s*s},e.sqrLen=e.squaredLength,e.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t},e.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t},e.normalize=function(t,i){var s=i[0],a=i[1],o=s*s+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=i[0]*o,t[1]=i[1]*o),t},e.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]},e.cross=function(t,i,s){var a=i[0]*s[1]-i[1]*s[0];return t[0]=t[1]=0,t[2]=a,t},e.lerp=function(t,i,s,a){var o=i[0],r=i[1];return t[0]=o+a*(s[0]-o),t[1]=r+a*(s[1]-r),t},e.random=function(t,i){i=i||1;var s=2*GLMAT_RANDOM()*Math.PI;return t[0]=Math.cos(s)*i,t[1]=Math.sin(s)*i,t},e.transformMat2=function(t,i,s){var a=i[0],o=i[1];return t[0]=s[0]*a+s[2]*o,t[1]=s[1]*a+s[3]*o,t},e.transformMat2d=function(t,i,s){var a=i[0],o=i[1];return t[0]=s[0]*a+s[2]*o+s[4],t[1]=s[1]*a+s[3]*o+s[5],t},e.transformMat3=function(t,i,s){var a=i[0],o=i[1];return t[0]=s[0]*a+s[3]*o+s[6],t[1]=s[1]*a+s[4]*o+s[7],t},e.transformMat4=function(t,i,s){var a=i[0],o=i[1];return t[0]=s[0]*a+s[4]*o+s[12],t[1]=s[1]*a+s[5]*o+s[13],t},e.forEach=(c=e.create(),function(t,i,s,a,o,r){var n,h;for(i||(i=2),s||(s=0),h=a?Math.min(a*i+s,t.length):t.length,n=s;n<h;n+=i)c[0]=t[n],c[1]=t[n+1],o(c,c,r),t[n]=c[0],t[n+1]=c[1];return t}),g.a=e},function(_,g,u){g.a=`@export clay.prez.vertex
#define SHADER_NAME prez
uniform mat4 WVP : WORLDVIEWPROJECTION;
attribute vec3 pos : POSITION;
attribute vec2 uv : TEXCOORD_0;
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
@import clay.util.logdepth_vertex_header
varying vec2 v_Texcoord;
void main()
{
 vec4 P = vec4(pos, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = WVP * P;
 v_Texcoord = uv * uvRepeat + uvOffset;
 @import clay.util.logdepth_vertex_main
}
@end
@export clay.prez.fragment
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
@import clay.util.logdepth_fragment_header
varying vec2 v_Texcoord;
void main()
{
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
 gl_FragColor = vec4(0.0,0.0,0.0,1.0);
 @import clay.util.logdepth_fragment_main
}
@end`},function(_,g,u){var c,l=u(35),e=u(11),t=l.a.extend({material:null,geometry:null,mode:e.a.TRIANGLES,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:e.a.BACK,frontFace:e.a.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(i){},afterRender:function(i,s){},getBoundingBox:function(i,s){return s=l.a.prototype.getBoundingBox.call(this,i,s),this.geometry&&this.geometry.boundingBox&&s.union(this.geometry.boundingBox),s},clone:(c=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"],function(){var i=l.a.prototype.clone.call(this);i.geometry=this.geometry,i.material=this.material;for(var s=0;s<c.length;s++){var a=c[s];i[a]!==this[a]&&(i[a]=this[a])}return i})});t.POINTS=e.a.POINTS,t.LINES=e.a.LINES,t.LINE_LOOP=e.a.LINE_LOOP,t.LINE_STRIP=e.a.LINE_STRIP,t.TRIANGLES=e.a.TRIANGLES,t.TRIANGLE_STRIP=e.a.TRIANGLE_STRIP,t.TRIANGLE_FAN=e.a.TRIANGLE_FAN,t.BACK=e.a.BACK,t.FRONT=e.a.FRONT,t.FRONT_AND_BACK=e.a.FRONT_AND_BACK,t.CW=e.a.CW,t.CCW=e.a.CCW,g.a=t},function(_,g,u){var c={isPowerOfTwo:function(l){return(l&l-1)==0},nextPowerOfTwo:function(l){return l--,l|=l>>1,l|=l>>2,l|=l>>4,l|=l>>8,l|=l>>16,++l},nearestPowerOfTwo:function(l){return Math.pow(2,Math.round(Math.log(l)/Math.LN2))}};g.a=c},function(_,g,u){var c,l,e,t,i=u(3),s=u(21),a=u(12),o=u(33),r=function(n,h){this.normal=n||new i.a(0,1,0),this.distance=h||0};r.prototype={constructor:r,distanceToPoint:function(n){return a.a.dot(n.array,this.normal.array)-this.distance},projectPoint:function(n,h){h||(h=new i.a);var p=this.distanceToPoint(n);return a.a.scaleAndAdd(h.array,n.array,this.normal.array,-p),h._dirty=!0,h},normalize:function(){var n=1/a.a.len(this.normal.array);a.a.scale(this.normal.array,n),this.distance*=n},intersectFrustum:function(n){for(var h=n.vertices,p=this.normal.array,d=a.a.dot(h[0].array,p)>this.distance,f=1;f<8;f++)if(a.a.dot(h[f].array,p)>this.distance!=d)return!0},intersectLine:(t=a.a.create(),function(n,h,p){var d=this.distanceToPoint(n),f=this.distanceToPoint(h);if(d>0&&f>0||d<0&&f<0)return null;var v=this.normal.array,m=this.distance,y=n.array;a.a.sub(t,h.array,n.array),a.a.normalize(t,t);var x=a.a.dot(v,t);if(x===0)return null;p||(p=new i.a);var w=(a.a.dot(v,y)-m)/x;return a.a.scaleAndAdd(p.array,y,t,-w),p._dirty=!0,p}),applyTransform:(c=s.a.create(),l=o.a.create(),e=o.a.create(),e[3]=1,function(n){n=n.array,a.a.scale(e,this.normal.array,this.distance),o.a.transformMat4(e,e,n),this.distance=a.a.dot(e,this.normal.array),s.a.invert(c,n),s.a.transpose(c,c),l[3]=0,a.a.copy(l,this.normal.array),o.a.transformMat4(l,l,c),a.a.copy(this.normal.array,l)}),copy:function(n){a.a.copy(this.normal.array,n.normal.array),this.normal._dirty=!0,this.distance=n.distance},clone:function(){var n=new r;return n.copy(this),n}},g.a=r},function(_,g){var u=function(){this.head=null,this.tail=null,this._len=0},c=u.prototype;c.insert=function(s){var a=new l(s);return this.insertEntry(a),a},c.insertEntry=function(s){this.head?(this.tail.next=s,s.prev=this.tail,s.next=null,this.tail=s):this.head=this.tail=s,this._len++},c.remove=function(s){var a=s.prev,o=s.next;a?a.next=o:this.head=o,o?o.prev=a:this.tail=a,s.next=s.prev=null,this._len--},c.len=function(){return this._len},c.clear=function(){this.head=this.tail=null,this._len=0};var l=function(s){this.value=s,this.next,this.prev},e=function(s){this._list=new u,this._map={},this._maxSize=s||10,this._lastRemovedEntry=null},t=e.prototype;t.put=function(s,a){var o=this._list,r=this._map,n=null;if(r[s]==null){var h=o.len(),p=this._lastRemovedEntry;if(h>=this._maxSize&&h>0){var d=o.head;o.remove(d),delete r[d.key],n=d.value,this._lastRemovedEntry=d}p?p.value=a:p=new l(a),p.key=s,o.insertEntry(p),r[s]=p}return n},t.get=function(s){var a=this._map[s],o=this._list;if(a!=null)return a!==o.tail&&(o.remove(a),o.insertEntry(a)),a.value},t.clear=function(){this._list.clear(),this._map={}};var i=e;_.exports=i},function(_,g,u){var c=u(42);g.a=c.a},function(_,g,u){var c=u(14),l=u(43),e=u(7),t=u(3),i=u(18),s=u(13),a=new e.a,o=c.a.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var n={px:r("px",this.depthSegments,this.heightSegments),nx:r("nx",this.depthSegments,this.heightSegments),py:r("py",this.widthSegments,this.depthSegments),ny:r("ny",this.widthSegments,this.depthSegments),pz:r("pz",this.widthSegments,this.heightSegments),nz:r("nz",this.widthSegments,this.heightSegments)},h=["position","texcoord0","normal"],p=0,d=0;for(var f in n)p+=n[f].vertexCount,d+=n[f].indices.length;for(var v=0;v<h.length;v++)this.attributes[h[v]].init(p);this.indices=new s.a.Uint16Array(d);var m=0,y=0;for(var f in n){var x=n[f];for(v=0;v<h.length;v++)for(var w=h[v],M=x.attributes[w].value,C=x.attributes[w].size,A=w==="normal",P=0;P<M.length;P++){var b=M[P];this.inside&&A&&(b=-b),this.attributes[w].value[P+C*y]=b}var N=x.indices.length;for(P=0;P<x.indices.length;P++)this.indices[P+m]=y+x.indices[this.inside?N-P-1:P];m+=x.indices.length,y+=x.vertexCount}this.boundingBox=new i.a,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function r(n,h,p){a.identity();var d=new l.a({widthSegments:h,heightSegments:p});switch(n){case"px":e.a.translate(a,a,t.a.POSITIVE_X),e.a.rotateY(a,a,Math.PI/2);break;case"nx":e.a.translate(a,a,t.a.NEGATIVE_X),e.a.rotateY(a,a,-Math.PI/2);break;case"py":e.a.translate(a,a,t.a.POSITIVE_Y),e.a.rotateX(a,a,-Math.PI/2);break;case"ny":e.a.translate(a,a,t.a.NEGATIVE_Y),e.a.rotateX(a,a,Math.PI/2);break;case"pz":e.a.translate(a,a,t.a.POSITIVE_Z);break;case"nz":e.a.translate(a,a,t.a.NEGATIVE_Z),e.a.rotateY(a,a,Math.PI)}return d.applyTransform(a),d}g.a=o},function(_,g,u){var c=u(5),l=u(27),e=u(4),t=u(10),i=u(15),s=u(19),a=u(9),o=u(42),r=u(36),n=u(61),h=u(13),p=u(60),d=u(126),f=u(127),v={},m=["px","nx","py","ny","pz","nz"];v.prefilterEnvironmentMap=function(y,x,w,M,C){C&&M||(M=v.generateNormalDistribution(),C=v.integrateBRDF(y,M));var A=(w=w||{}).width||64,P=w.height||64,b=w.type||x.type,N=new l.a({width:A,height:P,type:b,flipY:!1,mipmaps:[]});N.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var B=Math.min(A,P),z=Math.log(B)/Math.log(2)+1,F=new s.a({shader:new a.a({vertex:a.a.source("clay.skybox.vertex"),fragment:f.a})});F.set("normalDistribution",M),w.encodeRGBM&&F.define("fragment","RGBM_ENCODE"),w.decodeRGBM&&F.define("fragment","RGBM_DECODE");var V,H=new r.a;if(x.textureType==="texture2D"){var U=new l.a({width:A,height:P,type:b===e.a.FLOAT?e.a.HALF_FLOAT:b});p.a.panoramaToCubeMap(y,x,U,{encodeRGBM:w.decodeRGBM}),x=U}(V=new o.a({scene:H,material:F})).material.set("environmentMap",x);var j=new n.a({texture:N});w.encodeRGBM&&(b=N.type=e.a.UNSIGNED_BYTE);for(var X=new c.a({width:A,height:P,type:b}),Y=new t.a({depthBuffer:!1}),J=h.a[b===e.a.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],K=0;K<z;K++){N.mipmaps[K]={pixels:{}},V.material.set("roughness",K/(z-1));for(var Q=X.width,Z=2*Math.atan(Q/(Q-.5))/Math.PI*180,q=0;q<m.length;q++){var tt=new J(X.width*X.height*4);Y.attach(X),Y.bind(y);var $=j.getCamera(m[q]);$.fov=Z,y.render(H,$),y.gl.readPixels(0,0,X.width,X.height,e.a.RGBA,b,tt),Y.unbind(y),N.mipmaps[K].pixels[m[q]]=tt}X.width/=2,X.height/=2,X.dirty()}return Y.dispose(y),X.dispose(y),V.dispose(y),M.dispose(y),{environmentMap:N,brdfLookup:C,normalDistribution:M,maxMipmapLevel:z}},v.integrateBRDF=function(y,x){x=x||v.generateNormalDistribution();var w=new t.a({depthBuffer:!1}),M=new i.a({fragment:d.a}),C=new c.a({width:512,height:256,type:e.a.HALF_FLOAT,wrapS:e.a.CLAMP_TO_EDGE,wrapT:e.a.CLAMP_TO_EDGE,minFilter:e.a.NEAREST,magFilter:e.a.NEAREST,useMipmap:!1});return M.setUniform("normalDistribution",x),M.setUniform("viewportSize",[512,256]),M.attachOutput(C),M.render(y,w),w.dispose(y),C},v.generateNormalDistribution=function(y,x){y=y||256,x=x||1024;for(var w=new c.a({width:y,height:x,type:e.a.FLOAT,minFilter:e.a.NEAREST,magFilter:e.a.NEAREST,wrapS:e.a.CLAMP_TO_EDGE,wrapT:e.a.CLAMP_TO_EDGE,useMipmap:!1}),M=new Float32Array(x*y*4),C=[],A=0;A<y;A++){for(var P=A/y,b=P*P,N=0;N<x;N++){var B=(N<<16|N>>>16)>>>0;B=(((16711935&(B=((252645135&(B=((858993459&(B=((1431655765&B)<<1|(2863311530&B)>>>1)>>>0))<<2|(3435973836&B)>>>2)>>>0))<<4|(4042322160&B)>>>4)>>>0))<<8|(4278255360&B)>>>8)>>>0)/4294967296;var z=Math.sqrt((1-B)/(1+(b*b-1)*B));C[N]=z}for(N=0;N<x;N++){var F=4*(N*y+A),V=(z=C[N],Math.sqrt(1-z*z)),H=N/x,U=2*Math.PI*H;M[F]=V*Math.cos(U),M[F+1]=z,M[F+2]=V*Math.sin(U),M[F+3]=1}}return w.pixels=M,w},g.a=v},function(_,g,u){var c=u(20),l={create:function(){var e=new c.a(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},clone:function(e){var t=new c.a(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},transpose:function(e,t){if(e===t){var i=t[1];e[1]=t[2],e[2]=i}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},invert:function(e,t){var i=t[0],s=t[1],a=t[2],o=t[3],r=i*o-a*s;return r?(r=1/r,e[0]=o*r,e[1]=-s*r,e[2]=-a*r,e[3]=i*r,e):null},adjoint:function(e,t){var i=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=i,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},multiply:function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=i[0],h=i[1],p=i[2],d=i[3];return e[0]=s*n+o*h,e[1]=a*n+r*h,e[2]=s*p+o*d,e[3]=a*p+r*d,e}};l.mul=l.multiply,l.rotate=function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=Math.sin(i),h=Math.cos(i);return e[0]=s*h+o*n,e[1]=a*h+r*n,e[2]=s*-n+o*h,e[3]=a*-n+r*h,e},l.scale=function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=i[0],h=i[1];return e[0]=s*n,e[1]=a*n,e[2]=o*h,e[3]=r*h,e},l.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},l.LDU=function(e,t,i,s){return e[2]=s[2]/s[0],i[0]=s[0],i[1]=s[1],i[3]=s[3]-e[2]*i[1],[e,t,i]},g.a=l},function(_,g,u){var c=u(20),l={create:function(){var e=new c.a(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},clone:function(e){var t=new c.a(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},invert:function(e,t){var i=t[0],s=t[1],a=t[2],o=t[3],r=t[4],n=t[5],h=i*o-s*a;return h?(h=1/h,e[0]=o*h,e[1]=-s*h,e[2]=-a*h,e[3]=i*h,e[4]=(a*n-o*r)*h,e[5]=(s*r-i*n)*h,e):null},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=t[4],h=t[5],p=i[0],d=i[1],f=i[2],v=i[3],m=i[4],y=i[5];return e[0]=s*p+o*d,e[1]=a*p+r*d,e[2]=s*f+o*v,e[3]=a*f+r*v,e[4]=s*m+o*y+n,e[5]=a*m+r*y+h,e}};l.mul=l.multiply,l.rotate=function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=t[4],h=t[5],p=Math.sin(i),d=Math.cos(i);return e[0]=s*d+o*p,e[1]=a*d+r*p,e[2]=s*-p+o*d,e[3]=a*-p+r*d,e[4]=n,e[5]=h,e},l.scale=function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=t[4],h=t[5],p=i[0],d=i[1];return e[0]=s*p,e[1]=a*p,e[2]=o*d,e[3]=r*d,e[4]=n,e[5]=h,e},l.translate=function(e,t,i){var s=t[0],a=t[1],o=t[2],r=t[3],n=t[4],h=t[5],p=i[0],d=i[1];return e[0]=s,e[1]=a,e[2]=o,e[3]=r,e[4]=s*p+o*d+n,e[5]=a*p+r*d+h,e},l.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},g.a=l},function(_,g){var u={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},c={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},l=Object.prototype.toString,e=Array.prototype,t=e.forEach,i=e.filter,s=e.slice,a=e.map,o=e.reduce,r={};function n(b){if(b==null||E(b)!="object")return b;var N=b,B=l.call(b);if(B==="[object Array]"){if(!A(b)){N=[];for(var z=0,F=b.length;z<F;z++)N[z]=n(b[z])}}else if(c[B]){if(!A(b)){var V=b.constructor;if(b.constructor.from)N=V.from(b);else for(N=new V(b.length),z=0,F=b.length;z<F;z++)N[z]=n(b[z])}}else if(!u[B]&&!A(b)&&!M(b))for(var H in N={},b)b.hasOwnProperty(H)&&(N[H]=n(b[H]));return N}function h(b,N,B){if(!x(N)||!x(b))return B?n(N):b;for(var z in N)if(N.hasOwnProperty(z)){var F=b[z],V=N[z];!x(V)||!x(F)||y(V)||y(F)||M(V)||M(F)||w(V)||w(F)||A(V)||A(F)?!B&&z in b||(b[z]=n(N[z])):h(F,V,B)}return b}function p(b,N,B){for(var z in N)N.hasOwnProperty(z)&&(B?N[z]!=null:b[z]==null)&&(b[z]=N[z]);return b}var d,f=function(){return r.createCanvas()};function v(b,N,B){if(b&&N)if(b.forEach&&b.forEach===t)b.forEach(N,B);else if(b.length===+b.length)for(var z=0,F=b.length;z<F;z++)N.call(B,b[z],z,b);else for(var V in b)b.hasOwnProperty(V)&&N.call(B,b[V],V,b)}function m(b,N){var B=s.call(arguments,2);return function(){return b.apply(N,B.concat(s.call(arguments)))}}function y(b){return l.call(b)==="[object Array]"}function x(b){var N=E(b);return N==="function"||!!b&&N=="object"}function w(b){return!!u[l.call(b)]}function M(b){return E(b)==="object"&&typeof b.nodeType=="number"&&E(b.ownerDocument)==="object"}r.createCanvas=function(){return document.createElement("canvas")};var C="__ec_primitive__";function A(b){return b[C]}function P(b){var N=y(b);this.data={};var B=this;function z(F,V){N?B.set(F,V):B.set(V,F)}D(b,P)?b.each(z):b&&v(b,z)}P.prototype={constructor:P,get:function(b){return this.data.hasOwnProperty(b)?this.data[b]:null},set:function(b,N){return this.data[b]=N},each:function(b,N){for(var B in N!==void 0&&(b=m(b,N)),this.data)this.data.hasOwnProperty(B)&&b(this.data[B],B)},removeKey:function(b){delete this.data[b]}},g.$override=function(b,N){b==="createCanvas"&&(d=null),r[b]=N},g.clone=n,g.merge=h,g.mergeAll=function(b,N){for(var B=b[0],z=1,F=b.length;z<F;z++)B=h(B,b[z],N);return B},g.extend=function(b,N){for(var B in N)N.hasOwnProperty(B)&&(b[B]=N[B]);return b},g.defaults=p,g.createCanvas=f,g.getContext=function(){return d||(d=f().getContext("2d")),d},g.indexOf=function(b,N){if(b){if(b.indexOf)return b.indexOf(N);for(var B=0,z=b.length;B<z;B++)if(b[B]===N)return B}return-1},g.inherits=function(b,N){var B=b.prototype;function z(){}for(var F in z.prototype=N.prototype,b.prototype=new z,B)b.prototype[F]=B[F];b.prototype.constructor=b,b.superClass=N},g.mixin=function(b,N,B){p(b="prototype"in b?b.prototype:b,N="prototype"in N?N.prototype:N,B)},g.isArrayLike=function(b){if(b)return typeof b!="string"&&typeof b.length=="number"},g.each=v,g.map=function(b,N,B){if(b&&N){if(b.map&&b.map===a)return b.map(N,B);for(var z=[],F=0,V=b.length;F<V;F++)z.push(N.call(B,b[F],F,b));return z}},g.reduce=function(b,N,B,z){if(b&&N){if(b.reduce&&b.reduce===o)return b.reduce(N,B,z);for(var F=0,V=b.length;F<V;F++)B=N.call(z,B,b[F],F,b);return B}},g.filter=function(b,N,B){if(b&&N){if(b.filter&&b.filter===i)return b.filter(N,B);for(var z=[],F=0,V=b.length;F<V;F++)N.call(B,b[F],F,b)&&z.push(b[F]);return z}},g.find=function(b,N,B){if(b&&N){for(var z=0,F=b.length;z<F;z++)if(N.call(B,b[z],z,b))return b[z]}},g.bind=m,g.curry=function(b){var N=s.call(arguments,1);return function(){return b.apply(this,N.concat(s.call(arguments)))}},g.isArray=y,g.isFunction=function(b){return typeof b=="function"},g.isString=function(b){return l.call(b)==="[object String]"},g.isObject=x,g.isBuiltInObject=w,g.isTypedArray=function(b){return!!c[l.call(b)]},g.isDom=M,g.eqNaN=function(b){return b!=b},g.retrieve=function(b){for(var N=0,B=arguments.length;N<B;N++)if(arguments[N]!=null)return arguments[N]},g.retrieve2=function(b,N){return b!=null?b:N},g.retrieve3=function(b,N,B){return b!=null?b:N!=null?N:B},g.slice=function(){return Function.call.apply(s,arguments)},g.normalizeCssArray=function(b){if(typeof b=="number")return[b,b,b,b];var N=b.length;return N===2?[b[0],b[1],b[0],b[1]]:N===3?[b[0],b[1],b[2],b[1]]:b},g.assert=function(b,N){if(!b)throw new Error(N)},g.trim=function(b){return b==null?null:typeof b.trim=="function"?b.trim():b.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},g.setAsPrimitive=function(b){b[C]=!0},g.isPrimitive=A,g.createHashMap=function(b){return new P(b)},g.concatArray=function(b,N){for(var B=new b.constructor(b.length+N.length),z=0;z<b.length;z++)B[z]=b[z];var F=b.length;for(z=0;z<N.length;z++)B[z+F]=N[z];return B},g.noop=function(){}},function(_,g){var u=typeof window<"u"&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(c){setTimeout(c,16)};_.exports=u},function(_,g,u){var c=u(0),l=u.n(c),e=u(5);function t(s,a,o,r,n,h,p){this._zr=s,this._x=0,this._y=0,this._rowHeight=0,this.width=r,this.height=n,this.offsetX=a,this.offsetY=o,this.dpr=p,this.gap=h}function i(s){(s=s||{}).width=s.width||512,s.height=s.height||512,s.devicePixelRatio=s.devicePixelRatio||1,s.gap=s.gap==null?2:s.gap;var a=document.createElement("canvas");a.width=s.width*s.devicePixelRatio,a.height=s.height*s.devicePixelRatio,this._canvas=a,this._texture=new e.a({image:a,flipY:!1});var o=this;this._zr=l.a.zrender.init(a);var r=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){r.call(this),o._texture.dirty(),o.onupdate&&o.onupdate()},this._dpr=s.devicePixelRatio,this._coords={},this.onupdate=s.onupdate,this._gap=s.gap,this._textureAtlasNodes=[new t(this._zr,0,0,s.width,s.height,this._gap,this._dpr)],this._nodeWidth=s.width,this._nodeHeight=s.height,this._currentNodeIdx=0}t.prototype={constructor:t,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(s,a,o){var r=s.getBoundingRect();a==null&&(a=r.width),o==null&&(o=r.height),a*=this.dpr,o*=this.dpr,this._fitElement(s,a,o);var n=this._x,h=this._y,p=this.width*this.dpr,d=this.height*this.dpr,f=this.gap;if(n+a+f>p&&(n=this._x=0,h+=this._rowHeight+f,this._y=h,this._rowHeight=0),this._x+=a+f,this._rowHeight=Math.max(this._rowHeight,o),h+o+f>d)return null;s.position[0]+=this.offsetX*this.dpr+n,s.position[1]+=this.offsetY*this.dpr+h,this._zr.add(s);var v=[this.offsetX/this.width,this.offsetY/this.height];return[[n/p+v[0],h/d+v[1]],[(n+a)/p+v[0],(h+o)/d+v[1]]]},_fitElement:function(s,a,o){var r=s.getBoundingRect(),n=a/r.width,h=o/r.height;s.position=[-r.x*n,-r.y*h],s.scale=[n,h],s.update()}},i.prototype={clear:function(){for(var s=0;s<this._textureAtlasNodes.length;s++)this._textureAtlasNodes[s].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var s=4096/this._dpr,a=this._textureAtlasNodes.length,o=a*this._nodeWidth%s,r=Math.floor(a*this._nodeWidth/s)*this._nodeHeight;if(!(r>=s)){var n=(o+this._nodeWidth)*this._dpr,h=(r+this._nodeHeight)*this._dpr;try{this._zr.resize({width:n,height:h})}catch{this._canvas.width=n,this._canvas.height=h}var p=new t(this._zr,o,r,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(p),p}console.error("Too much labels. Some will be ignored.")},add:function(s,a,o){if(this._coords[s.id])return console.warn("Element already been add"),this._coords[s.id];var r=this._getCurrentNode().add(s,a,o);if(!r){var n=this._expand();if(!n)return;r=n.add(s,a,o)}return this._coords[s.id]=r,r},getCoordsScale:function(){var s=this._dpr;return[this._nodeWidth/this._canvas.width*s,this._nodeHeight/this._canvas.height*s]},getCoords:function(s){return this._coords[s]}},g.a=i},function(_,g,u){var c,l,e,t,i=u(170),s=u(171),a=i.applyTransform,o=Math.min,r=Math.max;function n(p,d,f,v){f<0&&(p+=f,f=-f),v<0&&(d+=v,v=-v),this.x=p,this.y=d,this.width=f,this.height=v}n.prototype={constructor:n,union:function(p){var d=o(p.x,this.x),f=o(p.y,this.y);this.width=r(p.x+p.width,this.x+this.width)-d,this.height=r(p.y+p.height,this.y+this.height)-f,this.x=d,this.y=f},applyTransform:(c=[],l=[],e=[],t=[],function(p){if(p){c[0]=e[0]=this.x,c[1]=t[1]=this.y,l[0]=t[0]=this.x+this.width,l[1]=e[1]=this.y+this.height,a(c,c,p),a(l,l,p),a(e,e,p),a(t,t,p),this.x=o(c[0],l[0],e[0],t[0]),this.y=o(c[1],l[1],e[1],t[1]);var d=r(c[0],l[0],e[0],t[0]),f=r(c[1],l[1],e[1],t[1]);this.width=d-this.x,this.height=f-this.y}}),calculateTransform:function(p){var d=this,f=p.width/d.width,v=p.height/d.height,m=s.create();return s.translate(m,m,[-d.x,-d.y]),s.scale(m,m,[f,v]),s.translate(m,m,[p.x,p.y]),m},intersect:function(p){if(!p)return!1;D(p,n)||(p=n.create(p));var d=this,f=d.x,v=d.x+d.width,m=d.y,y=d.y+d.height,x=p.x,w=p.x+p.width,M=p.y,C=p.y+p.height;return!(v<x||w<f||y<M||C<m)},contain:function(p,d){var f=this;return p>=f.x&&p<=f.x+f.width&&d>=f.y&&d<=f.y+f.height},clone:function(){return new n(this.x,this.y,this.width,this.height)},copy:function(p){this.x=p.x,this.y=p.y,this.width=p.width,this.height=p.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},n.create=function(p){return new n(p.x,p.y,p.width,p.height)};var h=n;_.exports=h},function(_,g,u){var c=u(16),l=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function e(t){return Math.floor(Math.log(t)/Math.LN10)}g.linearMap=function(t,i,s,a){var o=i[1]-i[0],r=s[1]-s[0];if(o===0)return r===0?s[0]:(s[0]+s[1])/2;if(a)if(o>0){if(t<=i[0])return s[0];if(t>=i[1])return s[1]}else{if(t>=i[0])return s[0];if(t<=i[1])return s[1]}else{if(t===i[0])return s[0];if(t===i[1])return s[1]}return(t-i[0])/o*r+s[0]},g.parsePercent=function(t,i){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return typeof t=="string"?(s=t,s.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(t)/100*i:parseFloat(t):t==null?NaN:+t;var s},g.round=function(t,i,s){return i==null&&(i=10),i=Math.min(Math.max(0,i),20),t=(+t).toFixed(i),s?t:+t},g.asc=function(t){return t.sort(function(i,s){return i-s}),t},g.getPrecision=function(t){if(t=+t,isNaN(t))return 0;for(var i=1,s=0;Math.round(t*i)/i!==t;)i*=10,s++;return s},g.getPrecisionSafe=function(t){var i=t.toString(),s=i.indexOf("e");if(s>0){var a=+i.slice(s+1);return a<0?-a:0}var o=i.indexOf(".");return o<0?0:i.length-1-o},g.getPixelPrecision=function(t,i){var s=Math.log,a=Math.LN10,o=Math.floor(s(t[1]-t[0])/a),r=Math.round(s(Math.abs(i[1]-i[0]))/a),n=Math.min(Math.max(-o+r,0),20);return isFinite(n)?n:20},g.getPercentWithPrecision=function(t,i,s){if(!t[i])return 0;var a=c.reduce(t,function(x,w){return x+(isNaN(w)?0:w)},0);if(a===0)return 0;for(var o=Math.pow(10,s),r=c.map(t,function(x){return(isNaN(x)?0:x)/a*o*100}),n=100*o,h=c.map(r,function(x){return Math.floor(x)}),p=c.reduce(h,function(x,w){return x+w},0),d=c.map(r,function(x,w){return x-h[w]});p<n;){for(var f=Number.NEGATIVE_INFINITY,v=null,m=0,y=d.length;m<y;++m)d[m]>f&&(f=d[m],v=m);++h[v],d[v]=0,++p}return h[i]/o},g.MAX_SAFE_INTEGER=9007199254740991,g.remRadian=function(t){var i=2*Math.PI;return(t%i+i)%i},g.isRadianAroundZero=function(t){return t>-1e-4&&t<1e-4},g.parseDate=function(t){if(D(t,Date))return t;if(typeof t=="string"){var i=l.exec(t);if(!i)return new Date(NaN);if(i[8]){var s=+i[4]||0;return i[8].toUpperCase()!=="Z"&&(s-=i[8].slice(0,3)),new Date(Date.UTC(+i[1],+(i[2]||1)-1,+i[3]||1,s,+(i[5]||0),+i[6]||0,+i[7]||0))}return new Date(+i[1],+(i[2]||1)-1,+i[3]||1,+i[4]||0,+(i[5]||0),+i[6]||0,+i[7]||0)}return t==null?new Date(NaN):new Date(Math.round(t))},g.quantity=function(t){return Math.pow(10,e(t))},g.nice=function(t,i){var s=e(t),a=Math.pow(10,s),o=t/a;return t=(i?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10)*a,s>=-20?+t.toFixed(s<0?-s:0):t},g.quantile=function(t,i){var s=(t.length-1)*i+1,a=Math.floor(s),o=+t[a-1],r=s-a;return r?o+r*(t[a]-o):o},g.reformIntervals=function(t){t.sort(function(p,d){return h(p,d,0)?-1:1});for(var i=-1/0,s=1,a=0;a<t.length;){for(var o=t[a].interval,r=t[a].close,n=0;n<2;n++)o[n]<=i&&(o[n]=i,r[n]=n?1:1-s),i=o[n],s=r[n];o[0]===o[1]&&r[0]*r[1]!=1?t.splice(a,1):a++}return t;function h(p,d,f){return p.interval[f]<d.interval[f]||p.interval[f]===d.interval[f]&&(p.close[f]-d.close[f]==(f?-1:1)||!f&&h(p,d,1))}},g.isNumeric=function(t){return t-parseFloat(t)>=0}},function(_,g,u){var c=u(5),l=u(11),e=u(23),t=function(){this._pool={},this._allocatedTextures=[]};t.prototype={constructor:t,get:function(o){var r=a(o);this._pool.hasOwnProperty(r)||(this._pool[r]=[]);var n=this._pool[r];if(!n.length){var h=new c.a(o);return this._allocatedTextures.push(h),h}return n.pop()},put:function(o){var r=a(o);this._pool.hasOwnProperty(r)||(this._pool[r]=[]),this._pool[r].push(o)},clear:function(o){for(var r=0;r<this._allocatedTextures.length;r++)this._allocatedTextures[r].dispose(o);this._pool={},this._allocatedTextures=[]}};var i={width:512,height:512,type:l.a.UNSIGNED_BYTE,format:l.a.RGBA,wrapS:l.a.CLAMP_TO_EDGE,wrapT:l.a.CLAMP_TO_EDGE,minFilter:l.a.LINEAR_MIPMAP_LINEAR,magFilter:l.a.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},s=Object.keys(i);function a(o){var r,n,h,p;e.a.defaultsWithPropList(o,i,s),n=(r=o).width,h=r.height,p=(n&n-1)==0&&(h&h-1)==0,r.format===l.a.DEPTH_COMPONENT&&(r.useMipmap=!1),p&&r.useMipmap||(r.minFilter==l.a.NEAREST_MIPMAP_NEAREST||r.minFilter==l.a.NEAREST_MIPMAP_LINEAR?r.minFilter=l.a.NEAREST:r.minFilter!=l.a.LINEAR_MIPMAP_LINEAR&&r.minFilter!=l.a.LINEAR_MIPMAP_NEAREST||(r.minFilter=l.a.LINEAR)),p||(r.wrapS=l.a.CLAMP_TO_EDGE,r.wrapT=l.a.CLAMP_TO_EDGE);for(var d="",f=0;f<s.length;f++)d+=o[s[f]].toString();return d}g.a=t},function(_,g,u){g.a=`@export clay.compositor.kernel.gaussian_9
float gaussianKernel[9];
gaussianKernel[0] = 0.07;
gaussianKernel[1] = 0.09;
gaussianKernel[2] = 0.12;
gaussianKernel[3] = 0.14;
gaussianKernel[4] = 0.16;
gaussianKernel[5] = 0.14;
gaussianKernel[6] = 0.12;
gaussianKernel[7] = 0.09;
gaussianKernel[8] = 0.07;
@end
@export clay.compositor.kernel.gaussian_13
float gaussianKernel[13];
gaussianKernel[0] = 0.02;
gaussianKernel[1] = 0.03;
gaussianKernel[2] = 0.06;
gaussianKernel[3] = 0.08;
gaussianKernel[4] = 0.11;
gaussianKernel[5] = 0.13;
gaussianKernel[6] = 0.14;
gaussianKernel[7] = 0.13;
gaussianKernel[8] = 0.11;
gaussianKernel[9] = 0.08;
gaussianKernel[10] = 0.06;
gaussianKernel[11] = 0.03;
gaussianKernel[12] = 0.02;
@end
@export clay.compositor.gaussian_blur
#define SHADER_NAME gaussian_blur
uniform sampler2D texture;varying vec2 v_Texcoord;
uniform float blurSize : 2.0;
uniform vec2 textureSize : [512.0, 512.0];
uniform float blurDir : 0.0;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main (void)
{
 @import clay.compositor.kernel.gaussian_9
 vec2 off = blurSize / textureSize;
 off *= vec2(1.0 - blurDir, blurDir);
 vec4 sum = vec4(0.0);
 float weightAll = 0.0;
 for (int i = 0; i < 9; i++) {
 float w = gaussianKernel[i];
 vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));
 sum += texel * w;
 weightAll += w;
 }
 gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));
}
@end
`},function(_,g,u){g.a=`
@export clay.compositor.lut
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform sampler2D lookup;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 float blueColor = tex.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec4 newColor1 = texture2D(lookup, texPos1);
 vec4 newColor2 = texture2D(lookup, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 gl_FragColor = vec4(newColor.rgb, tex.w);
}
@end`},function(_,g,u){g.a=`@export clay.compositor.output
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = tex.rgb;
#ifdef OUTPUT_ALPHA
 gl_FragColor.a = tex.a;
#else
 gl_FragColor.a = 1.0;
#endif
 gl_FragColor = encodeHDR(gl_FragColor);
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`},function(_,g,u){g.a=`@export clay.compositor.bright
uniform sampler2D texture;
uniform float threshold : 1;
uniform float scale : 1.0;
uniform vec2 textureSize: [512, 512];
varying vec2 v_Texcoord;
const vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
vec4 median(vec4 a, vec4 b, vec4 c)
{
 return a + b + c - min(min(a, b), c) - max(max(a, b), c);
}
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
#ifdef ANTI_FLICKER
 vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);
 vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));
 vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));
 vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));
 vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));
 texel = median(median(texel, s1, s2), s3, s4);
#endif
 float lum = dot(texel.rgb , lumWeight);
 vec4 color;
 if (lum > threshold && texel.a > 0.0)
 {
 color = vec4(texel.rgb * scale, texel.a * scale);
 }
 else
 {
 color = vec4(0.0);
 }
 gl_FragColor = encodeHDR(color);
}
@end
`},function(_,g,u){g.a=`@export clay.compositor.downsample
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
varying vec2 v_Texcoord;
@import clay.util.rgbm
float brightness(vec3 c)
{
 return max(max(c.r, c.g), c.b);
}
@import clay.util.clamp_sample
void main()
{
 vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;
#ifdef ANTI_FLICKER
 vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;
 vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;
 vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;
 vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;
 float s1w = 1.0 / (brightness(s1) + 1.0);
 float s2w = 1.0 / (brightness(s2) + 1.0);
 float s3w = 1.0 / (brightness(s3) + 1.0);
 float s4w = 1.0 / (brightness(s4) + 1.0);
 float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);
 vec4 color = vec4(
 (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,
 1.0
 );
#else
 vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 color *= 0.25;
#endif
 gl_FragColor = encodeHDR(color);
}
@end`},function(_,g,u){g.a=`
@export clay.compositor.upsample
#define HIGH_QUALITY
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
uniform float sampleScale: 0.5;
varying vec2 v_Texcoord;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main()
{
#ifdef HIGH_QUALITY
 vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 gl_FragColor = encodeHDR(s / 16.0);
#else
 vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 gl_FragColor = encodeHDR(s / 4.0);
#endif
}
@end`},function(_,g,u){g.a=`@export clay.compositor.hdr.composite
#define TONEMAPPING
uniform sampler2D texture;
#ifdef BLOOM_ENABLED
uniform sampler2D bloom;
#endif
#ifdef LENSFLARE_ENABLED
uniform sampler2D lensflare;
uniform sampler2D lensdirt;
#endif
#ifdef LUM_ENABLED
uniform sampler2D lum;
#endif
#ifdef LUT_ENABLED
uniform sampler2D lut;
#endif
#ifdef COLOR_CORRECTION
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float saturation : 1.0;
#endif
#ifdef VIGNETTE
uniform float vignetteDarkness: 1.0;
uniform float vignetteOffset: 1.0;
#endif
uniform float exposure : 1.0;
uniform float bloomIntensity : 0.25;
uniform float lensflareIntensity : 1;
varying vec2 v_Texcoord;
@import clay.util.srgb
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
float eyeAdaption(float fLum)
{
 return mix(0.2, fLum, 0.5);
}
#ifdef LUT_ENABLED
vec3 lutTransform(vec3 color) {
 float blueColor = color.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec4 newColor1 = texture2D(lut, texPos1);
 vec4 newColor2 = texture2D(lut, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 return newColor.rgb;
}
#endif
@import clay.util.rgbm
void main()
{
 vec4 texel = vec4(0.0);
 vec4 originalTexel = vec4(0.0);
#ifdef TEXTURE_ENABLED
 texel = decodeHDR(texture2D(texture, v_Texcoord));
 originalTexel = texel;
#endif
#ifdef BLOOM_ENABLED
 vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));
 texel.rgb += bloomTexel.rgb * bloomIntensity;
 texel.a += bloomTexel.a * bloomIntensity;
#endif
#ifdef LENSFLARE_ENABLED
 texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;
#endif
 texel.a = min(texel.a, 1.0);
#ifdef LUM_ENABLED
 float fLum = texture2D(lum, vec2(0.5, 0.5)).r;
 float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));
 float exposureBias = adaptedLumDest * exposure;
#else
 float exposureBias = exposure;
#endif
#ifdef TONEMAPPING
 texel.rgb *= exposureBias;
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
 texel = linearTosRGB(texel);
#ifdef LUT_ENABLED
 texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));
#endif
#ifdef COLOR_CORRECTION
 texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);
 texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));
 texel.rgb = mix(vec3(lum), texel.rgb, saturation);
#endif
#ifdef VIGNETTE
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);
 texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));
#endif
 gl_FragColor = encodeHDR(texel);
#ifdef DEBUG
 #if DEBUG == 1
 gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));
 #elif DEBUG == 2
 gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);
 #elif DEBUG == 3
 gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));
 #endif
#endif
 if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {
 gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));
 }
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`},function(_,g,u){g.a=`@export clay.compositor.blend
#define SHADER_NAME blend
#ifdef TEXTURE1_ENABLED
uniform sampler2D texture1;
uniform float weight1 : 1.0;
#endif
#ifdef TEXTURE2_ENABLED
uniform sampler2D texture2;
uniform float weight2 : 1.0;
#endif
#ifdef TEXTURE3_ENABLED
uniform sampler2D texture3;
uniform float weight3 : 1.0;
#endif
#ifdef TEXTURE4_ENABLED
uniform sampler2D texture4;
uniform float weight4 : 1.0;
#endif
#ifdef TEXTURE5_ENABLED
uniform sampler2D texture5;
uniform float weight5 : 1.0;
#endif
#ifdef TEXTURE6_ENABLED
uniform sampler2D texture6;
uniform float weight6 : 1.0;
#endif
varying vec2 v_Texcoord;
@import clay.util.rgbm
void main()
{
 vec4 tex = vec4(0.0);
#ifdef TEXTURE1_ENABLED
 tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;
#endif
#ifdef TEXTURE2_ENABLED
 tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;
#endif
#ifdef TEXTURE3_ENABLED
 tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;
#endif
#ifdef TEXTURE4_ENABLED
 tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;
#endif
#ifdef TEXTURE5_ENABLED
 tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;
#endif
#ifdef TEXTURE6_ENABLED
 tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;
#endif
 gl_FragColor = encodeHDR(tex);
}
@end`},function(_,g,u){g.a=`@export clay.compositor.fxaa
uniform sampler2D texture;
uniform vec4 viewport : VIEWPORT;
varying vec2 v_Texcoord;
#define FXAA_REDUCE_MIN (1.0/128.0)
#define FXAA_REDUCE_MUL (1.0/8.0)
#define FXAA_SPAN_MAX 8.0
@import clay.util.rgbm
void main()
{
 vec2 resolution = 1.0 / viewport.zw;
 vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;
 vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );
 vec3 rgbM = rgbaM.xyz;
 float opacity = rgbaM.w;
 vec3 luma = vec3( 0.299, 0.587, 0.114 );
 float lumaNW = dot( rgbNW, luma );
 float lumaNE = dot( rgbNE, luma );
 float lumaSW = dot( rgbSW, luma );
 float lumaSE = dot( rgbSE, luma );
 float lumaM = dot( rgbM, luma );
 float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );
 float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );
 vec2 dir;
 dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
 dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));
 float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );
 float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );
 dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),
 max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
 dir * rcpDirMin)) * resolution;
 vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA *= 0.5;
 vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;
 rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;
 rgbB *= 0.25;
 rgbB += rgbA * 0.5;
 float lumaB = dot( rgbB, luma );
 if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )
 {
 gl_FragColor = vec4( rgbA, opacity );
 }
 else {
 gl_FragColor = vec4( rgbB, opacity );
 }
}
@end`},function(_,g,u){var c=u(0),l=u.n(c);g.a={getFilledRegions:function(e,t){var i,s=(e||[]).slice();if(typeof t=="string"?i=(t=l.a.getMap(t))&&t.geoJson:t&&t.features&&(i=t),!i)return console.error("Map "+t+" not exists. You can download map file on http://echarts.baidu.com/download-map.html"),i.features||console.error("Invalid GeoJSON for map3D"),[];for(var a={},o=i.features,r=0;r<s.length;r++)a[s[r].name]=s[r];for(r=0;r<o.length;r++){var n=o[r].properties.name;a[n]||s.push({name:n})}return s},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}}},function(_,g,u){function c(i,s,a){var o=i[s];i[s]=i[a],i[a]=o}function l(i,s,a,o,r){var n=a,h=i[s];c(i,s,o);for(var p=a;p<o;p++)r(i[p],h)<0&&(c(i,p,n),n++);return c(i,o,n),n}function e(i,s,a,o){if(a<o){var r=l(i,Math.floor((a+o)/2),a,o,s);e(i,s,a,r-1),e(i,s,r+1,o)}}function t(){this._parts=[]}t.prototype.step=function(i,s,a){var o=i.length;if(a===0){this._parts=[],this._sorted=!1;var r=Math.floor(o/2);this._parts.push({pivot:r,left:0,right:o-1}),this._currentSortPartIdx=0}if(!this._sorted){var n=this._parts;if(n.length===0)return this._sorted=!0,!0;if(n.length<512){for(var h=0;h<n.length;h++)n[h].pivot=l(i,n[h].pivot,n[h].left,n[h].right,s);var p=[];for(h=0;h<n.length;h++){var d,f=n[h].left;(d=n[h].pivot-1)>f&&p.push({pivot:Math.floor((d+f)/2),left:f,right:d}),f=n[h].pivot+1,(d=n[h].right)>f&&p.push({pivot:Math.floor((d+f)/2),left:f,right:d})}n=this._parts=p}else for(h=0;h<Math.floor(n.length/10);h++){var v=n.length-1-this._currentSortPartIdx;if(e(i,s,n[v].left,n[v].right),this._currentSortPartIdx++,this._currentSortPartIdx===n.length)return this._sorted=!0,!0}return!1}},t.sort=e,g.a=t},function(_,g,u){var c=u(98),l=u(0),e=u.n(l),t=u(47),i=u.n(t),s=u(22),a=u(2);function o(p,d){var f=p.getBoxLayoutParams(),v=i.a.getLayoutRect(f,{width:d.getWidth(),height:d.getHeight()});v.y=d.getHeight()-v.y-v.height,this.viewGL.setViewport(v.x,v.y,v.width,v.height,d.getDevicePixelRatio());var m=this.getGeoBoundingRect(),y=m.width/m.height*(p.get("aspectScale")||.75),x=p.get("boxWidth"),w=p.get("boxDepth"),M=p.get("boxHeight");M==null&&(M=5),isNaN(x)&&isNaN(w)&&(x=100),isNaN(w)?w=x/y:isNaN(x)&&(x=w/y),this.setSize(x,M,w),this.regionHeight=p.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(M-this.regionHeight,0))}function r(p,d){var f=[1/0,-1/0];if(p.eachSeries(function(m){if(m.coordinateSystem===this&&m.type!=="series.map3D"){var y=m.getData(),x=m.coordDimToDataDim("alt"),w=x&&x[0];if(w){var M=y.getDataExtent(w,!0);f[0]=Math.min(f[0],M[0]),f[1]=Math.max(f[1],M[1])}}},this),f&&isFinite(f[1]-f[0])){var v=e.a.helper.createScale(f,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new e.a.Axis("altitude",v),this.resize(this.model,d)}}var n=0,h={dimensions:c.a.prototype.dimensions,create:function(p,d){var f=[];if(!e.a.getMap)throw new Error("geo3D component depends on geo component");function v(m,y){var x=h.createGeo3D(m);m.__viewGL=m.__viewGL||new s.a,x.viewGL=m.__viewGL,m.coordinateSystem=x,x.model=m,f.push(x),x.resize=o,x.resize(m,d),x.update=r}return p.eachComponent("geo3D",function(m,y){v(m)}),p.eachSeriesByType("map3D",function(m,y){var x=m.get("coordinateSystem");x==null&&(x="geo3D"),x==="geo3D"&&v(m)}),p.eachSeries(function(m){if(m.get("coordinateSystem")==="geo3D"){if(m.type==="series.map3D")return;var y=m.getReferringComponents("geo3D")[0];if(y||(y=p.getComponent("geo3D")),!y)throw new Error('geo "'+a.a.firstNotNull(m.get("geo3DIndex"),m.get("geo3DId"),0)+'" not found');m.coordinateSystem=y.coordinateSystem}}),f},createGeo3D:function(p){var d,f=p.get("map");if(typeof f=="string"?(d=f,f=e.a.getMap(f)):f&&f.features&&(f={geoJson:f}),f||function(v){console.error("Map "+v+" not exists. You can download map file on http://echarts.baidu.com/download-map.html")}(f),!f.geoJson.features)throw new Error("Invalid GeoJSON for map3D");return d==null&&(d="GEO_ANONYMOUS_"+n++),new c.a(d+n++,d,f&&f.geoJson,f&&f.specialAreas,p.get("nameMap"))}};e.a.registerCoordinateSystem("geo3D",h),g.a=h},function(_,g,u){var c=u(0),l=u.n(c),e=u(6),t=u(207),i=u.n(t),s=u(208),a=u.n(s),o=e.a.vec3,r=e.a.mat4,n=[i.a,a.a];function h(p,d,f,v,m){this.name=p,this.map=d,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(f,v,m),this.transform=r.identity(new Float64Array(16)),this.invTransform=r.identity(new Float64Array(16)),this.extrudeY=!0,this.altitudeAxis}h.prototype={constructor:h,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(p,d,f){var v=l.a.parseGeoJSON||l.a.parseGeoJson;try{this.regions=p?v(p):[]}catch(C){throw`Invalid geoJson format
`+C}d=d||{},f=f||{};for(var m=this.regions,y={},x=0;x<m.length;x++){var w=m[x].name;w=f[w]||w,m[x].name=w,y[w]=m[x],this.addGeoCoord(w,m[x].center);var M=d[w];M&&m[x].transformTo(M.left,M.top,M.width,M.height)}this._regionsMap=y,this._geoRect=null,n.forEach(function(C){C(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var p,d=this.regions,f=0;f<d.length;f++){var v=d[f].getBoundingRect();(p=p||v.clone()).union(v)}return this._geoRect=p||new l.a.graphic.BoundingRect(0,0,0,0)},addGeoCoord:function(p,d){this._nameCoordMap[p]=d},getRegion:function(p){return this._regionsMap[p]},getRegionByCoord:function(p){for(var d=this.regions,f=0;f<d.length;f++)if(d[f].contain(p))return d[f]},setSize:function(p,d,f){this.size=[p,d,f];var v=this.getGeoBoundingRect(),m=p/v.width,y=-f/v.height,x=-p/2-v.x*m,w=f/2-v.y*y,M=this.extrudeY?[x,0,w]:[x,w,0],C=this.extrudeY?[m,1,y]:[m,y,1],A=this.transform;r.identity(A),r.translate(A,A,M),r.scale(A,A,C),r.invert(this.invTransform,A)},dataToPoint:function(p,d){d=d||[];var f=this.extrudeY?1:2,v=this.extrudeY?2:1,m=p[2];return isNaN(m)&&(m=0),d[0]=p[0],d[v]=p[1],this.altitudeAxis?d[f]=this.altitudeAxis.dataToCoord(m):d[f]=0,d[f]+=this.regionHeight,o.transformMat4(d,d,this.transform),d},pointToData:function(p,d){}},g.a=h},function(_,g,u){var c=u(6).a.mat4,l=512,e=.6435011087932844,t=Math.PI,i=.1;function s(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.altitudeExtent,this.bearing=0,this.pitch=0,this.center=[0,0],this._origin,this.zoom=0,this._initialZoom,this.maxPitch=60,this.zoomOffset=0}s.prototype={constructor:s,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(a){this.bearing=a.bearing,this.pitch=a.pitch,this.center=a.center,this.zoom=a.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,l)),this._initialZoom==null&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(this.height){var a=.5/Math.tan(e/2)*this.height*i,o=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,r=e/2,n=Math.PI/2+o,h=Math.sin(r)*a/Math.sin(Math.PI-n-r),p=1.1*(Math.cos(Math.PI/2-o)*h+a);this.pitch>50&&(p=1e3);var d=[];c.perspective(d,e,this.width/this.height,1,p),this.viewGL.camera.projectionMatrix.setArray(d),this.viewGL.camera.decomposeProjectionMatrix(),d=c.identity([]);var f=this.dataToPoint(this.center);c.scale(d,d,[1,-1,1]),c.translate(d,d,[0,0,-a]),c.rotateX(d,d,o),c.rotateZ(d,d,-this.bearing/180*Math.PI),c.translate(d,d,[-f[0]*this.getScale()*i,-f[1]*this.getScale()*i,0]),this.viewGL.camera.viewMatrix.array=d;var v=[];c.invert(v,d),this.viewGL.camera.worldTransform.array=v,this.viewGL.camera.decomposeWorldTransform();var m,y=l*this.getScale();if(this.altitudeExtent&&!isNaN(this.boxHeight)){var x=this.altitudeExtent[1]-this.altitudeExtent[0];m=this.boxHeight/x*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset)}else m=y/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*i;this.viewGL.rootNode.scale.set(this.getScale()*i,this.getScale()*i,m)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(a,o){return this.projectOnTileWithScale(a,this.getScale()*l,o)},projectOnTileWithScale:function(a,o,r){var n=a[0],h=a[1]*t/180,p=o*(n*t/180+t)/(2*t),d=o*(t-Math.log(Math.tan(t/4+.5*h)))/(2*t);return(r=r||[])[0]=p,r[1]=d,r},unprojectFromTile:function(a,o){return this.unprojectOnTileWithScale(a,this.getScale()*l,o)},unprojectOnTileWithScale:function(a,o,r){var n=a[0],h=a[1],p=n/o*(2*t)-t,d=2*(Math.atan(Math.exp(t-h/o*(2*t)))-t/4);return(r=r||[])[0]=180*p/t,r[1]=180*d/t,r},dataToPoint:function(a,o){return(o=this.projectOnTileWithScale(a,l,o))[0]-=this._origin[0],o[1]-=this._origin[1],o[2]=isNaN(a[2])?0:a[2],isNaN(a[2])||(o[2]=a[2],this.altitudeExtent&&(o[2]-=this.altitudeExtent[0])),o}},g.a=s},function(_,g,u){var c=u(2),l=u(1),e=u(22);g.a=function(t,i,s){function a(r,n){var h=n.getWidth(),p=n.getHeight(),d=n.getDevicePixelRatio();this.viewGL.setViewport(0,0,h,p,d),this.width=h,this.height=p,this.altitudeScale=r.get("altitudeScale"),this.boxHeight=r.get("boxHeight")}function o(r,n){if(this.model.get("boxHeight")!=="auto"){var h=[1/0,-1/0];r.eachSeries(function(p){if(p.coordinateSystem===this){var d=p.getData(),f=p.coordDimToDataDim("alt")[0];if(f){var v=d.getDataExtent(f,!0);h[0]=Math.min(h[0],v[0]),h[1]=Math.max(h[1],v[1])}}},this),h&&isFinite(h[1]-h[0])&&(this.altitudeExtent=h)}}return{dimensions:i.prototype.dimensions,create:function(r,n){var h=[];return r.eachComponent(t,function(p){var d=p.__viewGL;d||(d=p.__viewGL=new e.a).setRootNode(new l.a.Node);var f=new i;f.viewGL=p.__viewGL,f.resize=a,f.resize(p,n),h.push(f),p.coordinateSystem=f,f.model=p,f.update=o}),r.eachSeries(function(p){if(p.get("coordinateSystem")===t){var d=p.getReferringComponents(t)[0];if(d||(d=r.getComponent(t)),!d)throw new Error(t+' "'+c.a.firstNotNull(p.get(t+"Index"),p.get(t+"Id"),0)+'" not found');p.coordinateSystem=d.coordinateSystem}}),s&&s(h,r,n),h}}}},function(_,g,u){g.a=`
@export ecgl.displayShadow.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_WorldPosition;

varying vec3 v_Normal;

void main()
{
 @import ecgl.common.uv.main
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);

 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}

@end


@export ecgl.displayShadow.fragment

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform float roughness: 0.2;

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.ssaoMap.header

@import clay.plugin.compute_shadow_map

void main()
{
 float shadow = 1.0;

 @import ecgl.common.ssaoMap.main

#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
 for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {
 shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);
 }
#endif

 shadow *= 0.5 + ao * 0.5;
 shadow = clamp(shadow, 0.0, 1.0);

 gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);
}

@end`},function(_,g,u){var c=u(264),l=u.n(c),e=u(265),t=u.n(e);function i(s){this.viewGL=s}i.prototype.reset=function(s,a){this._updateCamera(a.getWidth(),a.getHeight(),a.getDevicePixelRatio()),this._viewTransform=l.a.create(),this.updateTransform(s,a)},i.prototype.updateTransform=function(s,a){var o=s.coordinateSystem;o.getRoamTransform&&(l.a.invert(this._viewTransform,o.getRoamTransform()),this._setCameraTransform(this._viewTransform),a.getZr().refresh())},i.prototype.dataToPoint=function(s,a,o){o=s.dataToPoint(a,null,o);var r=this._viewTransform;r&&t.a.applyTransform(o,o,r)},i.prototype.removeTransformInPoint=function(s){return this._viewTransform&&t.a.applyTransform(s,s,this._viewTransform),s},i.prototype.getZoom=function(){if(this._viewTransform){var s=this._viewTransform;return 1/Math.max(Math.sqrt(s[0]*s[0]+s[1]*s[1]),Math.sqrt(s[2]*s[2]+s[3]*s[3]))}return 1},i.prototype._setCameraTransform=function(s){var a=this.viewGL.camera;a.position.set(s[4],s[5],0),a.scale.set(Math.sqrt(s[0]*s[0]+s[1]*s[1]),Math.sqrt(s[2]*s[2]+s[3]*s[3]),1)},i.prototype._updateCamera=function(s,a,o){this.viewGL.setViewport(0,0,s,a,o);var r=this.viewGL.camera;r.left=r.top=0,r.bottom=a,r.right=s,r.near=0,r.far=100},g.a=i},function(_,g,u){(function(c){var l;typeof window<"u"?l=window.__DEV__:c!==void 0&&(l=c.__DEV__),l===void 0&&(l=!0);var e=l;g.__DEV__=e}).call(g,u(67))},function(_,g,u){var c,l,e,t,i,s,a,o=u(14),r=u(0),n=u.n(r),h=u(39),p=u(6).a.vec2,d=[[0,0],[1,1]],f=o.a.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new o.a.Attribute("position","float",2,"POSITION"),normal:new o.a.Attribute("normal","float",2),offset:new o.a.Attribute("offset","float",1),color:new o.a.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(v){var m=this.attributes;this.vertexCount!==v&&(m.position.init(v),m.color.init(v),this.useNativeLine||(m.offset.init(v),m.normal.init(v)),v>65535?D(this.indices,Uint16Array)&&(this.indices=new Uint32Array(this.indices)):D(this.indices,Uint32Array)&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(v){this.triangleCount!==v&&(this.indices=v===0?null:this.vertexCount>65535?new Uint32Array(3*v):new Uint16Array(3*v))},_getCubicCurveApproxStep:function(v,m,y,x){return 1/(p.dist(v,m)+p.dist(y,m)+p.dist(x,y)+1)*this.segmentScale},getCubicCurveVertexCount:function(v,m,y,x){var w=this._getCubicCurveApproxStep(v,m,y,x),M=Math.ceil(1/w);return this.useNativeLine?2*M:2*M+2},getCubicCurveTriangleCount:function(v,m,y,x){var w=this._getCubicCurveApproxStep(v,m,y,x),M=Math.ceil(1/w);return this.useNativeLine?0:2*M},getLineVertexCount:function(){return this.getPolylineVertexCount(d)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(d)},getPolylineVertexCount:function(v){var m;return m=typeof v=="number"?v:typeof v[0]!="number"?v.length:v.length/2,this.useNativeLine?2*(m-1):2*(m-1)+2},getPolylineTriangleCount:function(v){var m;return m=typeof v=="number"?v:typeof v[0]!="number"?v.length:v.length/2,this.useNativeLine?0:2*(m-1)},addCubicCurve:function(v,m,y,x,w,M){M==null&&(M=1);var C=v[0],A=v[1],P=m[0],b=m[1],N=y[0],B=y[1],z=x[0],F=x[1],V=this._getCubicCurveApproxStep(v,m,y,x),H=V*V,U=H*V,j=3*V,X=3*H,Y=6*H,J=6*U,K=C-2*P+N,Q=A-2*b+B,Z=3*(P-N)-C+z,q=3*(b-B)-A+F,tt=C,$=A,rt=(P-C)*j+K*X+Z*U,et=(b-A)*j+Q*X+q*U,it=K*Y+Z*J,ot=Q*Y+q*J,st=Z*J,at=q*J,vt=0,yt=0,gt=Math.ceil(1/V),pt=new Float32Array(3*(gt+1)),bt=(pt=[],0);for(yt=0;yt<gt+1;yt++)pt[bt++]=tt,pt[bt++]=$,tt+=rt,$+=et,rt+=it,et+=ot,it+=st,ot+=at,(vt+=V)>1&&(tt=rt>0?Math.min(tt,z):Math.max(tt,z),$=et>0?Math.min($,F):Math.max($,F));this.addPolyline(pt,w,M)},addLine:function(v,m,y,x){this.addPolyline([v,m],y,x)},addPolyline:(c=p.create(),l=p.create(),e=p.create(),t=p.create(),i=[],s=[],a=[],function(v,m,y,x,w){if(v.length){var M=typeof v[0]!="number";if(w==null&&(w=M?v.length:v.length/2),!(w<2)){x==null&&(x=0),y==null&&(y=1),this._itemVertexOffsets.push(this._vertexOffset);for(var C,A=M?typeof m[0]!="number":m.length/4===w,P=this.attributes.position,b=this.attributes.color,N=this.attributes.offset,B=this.attributes.normal,z=this.indices,F=this._vertexOffset,V=0;V<w;V++){if(M)i=v[V+x],C=A?m[V+x]:m;else{var H=2*V+x;if((i=i||[])[0]=v[H],i[1]=v[H+1],A){var U=4*V+x;(C=C||[])[0]=m[U],C[1]=m[U+1],C[2]=m[U+2],C[3]=m[U+3]}else C=m}if(this.useNativeLine)V>1&&(P.copy(F,F-1),b.copy(F,F-1),F++);else{var j;if(V<w-1)if(M?p.copy(s,v[V+1]):(H=2*(V+1)+x,(s=s||[])[0]=v[H],s[1]=v[H+1]),V>0){p.sub(c,i,a),p.sub(l,s,i),p.normalize(c,c),p.normalize(l,l),p.add(t,c,l),p.normalize(t,t);var X=y/2*Math.min(1/p.dot(c,t),2);e[0]=-t[1],e[1]=t[0],j=X}else p.sub(c,s,i),p.normalize(c,c),e[0]=-c[1],e[1]=c[0],j=y/2;else p.sub(c,i,a),p.normalize(c,c),e[0]=-c[1],e[1]=c[0],j=y/2;B.set(F,e),B.set(F+1,e),N.set(F,j),N.set(F+1,-j),p.copy(a,i),P.set(F,i),P.set(F+1,i),b.set(F,C),b.set(F+1,C),F+=2}if(this.useNativeLine)b.set(F,C),P.set(F,i),F++;else if(V>0){var Y=3*this._faceOffset;(z=this.indices)[Y]=F-4,z[Y+1]=F-3,z[Y+2]=F-2,z[Y+3]=F-3,z[Y+4]=F-1,z[Y+5]=F-2,this._faceOffset+=2}}this._vertexOffset=F}}}),setItemColor:function(v,m){for(var y=this._itemVertexOffsets[v],x=v<this._itemVertexOffsets.length-1?this._itemVertexOffsets[v+1]:this._vertexOffset,w=y;w<x;w++)this.attributes.color.set(w,m);this.dirty("color")}});n.a.util.defaults(f.prototype,h.a),g.a=f},function(_,g,u){Object.defineProperty(g,"__esModule",{value:!0}),u(106),u(153),u(203),u(209),u(215),u(221),u(227),u(234),u(238),u(245),u(251),u(254),u(258),u(261),u(266),u(279),u(285)},function(_,g,u){var c=u(0),l=u.n(c),e=u(107),t=u(108),i=u(152),s=u(1),a={echarts:"4.1.0",claygl:"1.2.1"};function o(h,p){h.replace(".","")-0<a[p].replace(".","")-0&&function(d){throw new Error(d+" version is too old, needs "+a[d]+" or higher")}(p),console.log("Loaded "+p+", version "+h)}function r(h){this._layers={},this._zr=h}o(e.a,"claygl"),o(l.a.version,"echarts"),r.prototype.update=function(h,p){var d=this,f=p.getZr();if(f.getWidth()&&f.getHeight()){for(var v in this._layers)this._layers[v].removeViewsAll();h.eachComponent(function(x,w){if(x!=="series"){var M=p.getViewOfComponentModel(w),C=w.coordinateSystem;if(M.__ecgl__){if(C){if(!C.viewGL)return void console.error("Can't find viewGL in coordinateSystem of component "+w.id);A=C.viewGL}else{if(!w.viewGL)return void console.error("Can't find viewGL of component "+w.id);A=C.viewGL}var A=C.viewGL,P=m(w);P.addView(A),M.afterRender&&M.afterRender(w,h,p,P),y(M.groupGL,w.get("silent"))}}}),h.eachSeries(function(x){var w=p.getViewOfSeriesModel(x),M=x.coordinateSystem;if(w.__ecgl__){if(M&&!M.viewGL&&!w.viewGL)return void console.error("Can't find viewGL of series "+w.id);var C=M&&M.viewGL||w.viewGL,A=m(x);A.addView(C),w.afterRender&&w.afterRender(x,h,p,A),y(w.groupGL,x.get("silent"))}})}else console.warn("Dom has no width or height");function m(x){var w;x.coordinateSystem&&x.coordinateSystem.model,w=x.get("zlevel");var M=d._layers,C=M[w];if(!C){if(C=M[w]=new t.a("gl-"+w,f),f.painter.isSingleCanvas()){C.virtual=!0;var A=new l.a.graphic.Image({z:1e4,style:{image:C.renderer.canvas},silent:!0});C.__hostImage=A,f.add(A)}f.painter.insertLayer(w,C)}return C.__hostImage&&C.__hostImage.setStyle({width:C.renderer.getWidth(),height:C.renderer.getHeight()}),C}function y(x,w){x&&x.traverse(function(M){M.isRenderable&&M.isRenderable()&&(M.ignorePicking=M.$ignorePicking!=null?M.$ignorePicking:w)})}};var n=l.a.init;l.a.init=function(){var h=n.apply(this,arguments);return h.getZr().painter.getRenderedCanvas=function(p){if(p=p||{},this._singleCanvas)return this._layers[0].dom;var d=document.createElement("canvas"),f=p.pixelRatio||this.dpr;d.width=this.getWidth()*f,d.height=this.getHeight()*f;var v=d.getContext("2d");v.dpr=f,v.clearRect(0,0,d.width,d.height),p.backgroundColor&&(v.fillStyle=p.backgroundColor,v.fillRect(0,0,d.width,d.height));var m,y=this.storage.getDisplayList(!0),x={},w=this;function M(b,N){var B,z=w._zlevelList;b==null&&(b=-1/0);for(var F=0;F<z.length;F++){var V=z[F],H=w._layers[V];if(!H.__builtin__&&V>b&&V<N){B=H;break}}B&&B.renderToCanvas&&(v.save(),B.renderToCanvas(v),v.restore())}for(var C={ctx:v},A=0;A<y.length;A++){var P=y[A];P.zlevel!==m&&(M(m,P.zlevel),m=P.zlevel),this._doPaintEl(P,C,!0,x)}return M(m,1/0),d},h},l.a.registerPostUpdate(function(h,p){var d=p.getZr();(d.__egl=d.__egl||new r(d)).update(h,p)}),l.a.registerPreprocessor(i.a),l.a.graphicGL=s.a},function(_,g,u){g.a="1.3.0"},function(_,g,u){var c=u(0),l=u.n(c),e=u(52),t=u(116),i=u(4),s=u(1),a=u(53),o=u(81),r=u.n(o),n=function(y,x){this.id=y,this.zr=x;try{this.renderer=new e.a({clearBit:0,devicePixelRatio:x.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(x.painter.getWidth(),x.painter.getHeight())}catch(M){return this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",void console.error(M)}this.onglobalout=this.onglobalout.bind(this),x.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var w=this.dom.style;w.position="absolute",w.left="0",w.top="0",this.views=[],this._picking=new t.a({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new l.a.graphic.Rect({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null};function h(y){var x=y.__zr;y.__zr=null,x&&y.removeAnimatorsFromZr&&y.removeAnimatorsFromZr(x)}n.prototype.addView=function(y){if(y.layer!==this){var x=this._viewsToDispose.indexOf(y);x>=0&&this._viewsToDispose.splice(x,1),this.views.push(y),y.layer=this;var w=this.zr;y.scene.traverse(function(M){M.__zr=w,M.addAnimatorsToZr&&M.addAnimatorsToZr(w)})}},n.prototype.removeView=function(y){if(y.layer===this){var x=this.views.indexOf(y);x>=0&&(this.views.splice(x,1),y.scene.traverse(h,this),y.layer=null,this._viewsToDispose.push(y))}},n.prototype.removeViewsAll=function(){this.views.forEach(function(y){y.scene.traverse(h,this),y.layer=null,this._viewsToDispose.push(y)},this),this.views.length=0},n.prototype.resize=function(y,x){this.renderer.resize(y,x)},n.prototype.clear=function(){var y=this.renderer.gl,x=this._backgroundColor||[0,0,0,0];y.clearColor(x[0],x[1],x[2],x[3]),y.depthMask(!0),y.colorMask(!0,!0,!0,!0),y.clear(y.DEPTH_BUFFER_BIT|y.COLOR_BUFFER_BIT)},n.prototype.clearDepth=function(){var y=this.renderer.gl;y.clear(y.DEPTH_BUFFER_BIT)},n.prototype.clearColor=function(){var y=this.renderer.gl;y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT)},n.prototype.needsRefresh=function(){this.zr.refresh()},n.prototype.refresh=function(y){this._backgroundColor=y?s.a.parseColor(y):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var x=0;x<this.views.length;x++)this.views[x].prepareRender(this.renderer);for(this._doRender(!1),this._trackAndClean(),x=0;x<this._viewsToDispose.length;x++)this._viewsToDispose[x].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()},n.prototype.renderToCanvas=function(y){this._startAccumulating(!0),y.drawImage(this.dom,0,0,y.canvas.width,y.canvas.height)},n.prototype._doRender=function(y){this.clear(),this.renderer.saveViewport();for(var x=0;x<this.views.length;x++)this.views[x].render(this.renderer,y);this.renderer.restoreViewport()},n.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var p=1;function d(y){for(var x=0;x<y.length;x++)y[x].__used__=0}function f(y,x){for(var w=0;w<x.length;w++)x[w].__used__||x[w].dispose(y)}function v(y,x){y.__used__=y.__used__||0,y.__used__++,y.__used__===1&&x.push(y)}function m(y,x,w){var M,C;y.traverse(function(P){if(P.isRenderable()){var b=P.geometry,N=P.material;if(N!==M)for(var B=N.getTextureUniforms(),z=0;z<B.length;z++){var F=B[z],V=N.uniforms[F].value;if(V){if(D(V,i.a))v(V,x);else if(D(V,Array))for(var H=0;H<V.length;H++)D(V[H],i.a)&&v(V[H],x)}}b!==C&&v(b,w),M=N,C=b}});for(var A=0;A<y.lights.length;A++)y.lights[A].cubemap&&v(y.lights[A].cubemap,x)}n.prototype._startAccumulating=function(y){var x=this;this._stopAccumulating();for(var w=!1,M=0;M<this.views.length;M++)w=this.views[M].needsAccumulate()||w;function C(A){if(x._accumulatingId&&A===x._accumulatingId){for(var P=!0,b=0;b<x.views.length;b++)P=x.views[b].isAccumulateFinished()&&w;P||(x._doRender(!0),y?C(A):r()(function(){C(A)}))}}w&&(this._accumulatingId=p++,y?C(x._accumulatingId):this._accumulatingTimeout=setTimeout(function(){C(x._accumulatingId)},50))},n.prototype._trackAndClean=function(){var y=[],x=[];this._textureList&&(d(this._textureList),d(this._geometriesList));for(var w=0;w<this.views.length;w++)m(this.views[w].scene,y,x);this._textureList&&(f(this.renderer,this._textureList),f(this.renderer,this._geometriesList)),this._textureList=y,this._geometriesList=x},n.prototype.dispose=function(){this._stopAccumulating(),this.renderer.disposeScene(this.scene),this.zr.off("globalout",this.onglobalout)},n.prototype.onmousedown=function(y){if(!y.target||!y.target.__isGLToZRProxy){y=y.event;var x=this.pickObject(y.offsetX,y.offsetY);x&&(this._dispatchEvent("mousedown",y,x),this._dispatchDataEvent("mousedown",y,x)),this._downX=y.offsetX,this._downY=y.offsetY}},n.prototype.onmousemove=function(y){if(!y.target||!y.target.__isGLToZRProxy){y=y.event;var x=this.pickObject(y.offsetX,y.offsetY),w=x&&x.target,M=this._hovered;this._hovered=x,M&&w!==M.target&&(M.relatedTarget=w,this._dispatchEvent("mouseout",y,M),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",y,x),x&&(this.zr.setCursorStyle("pointer"),M&&w===M.target||this._dispatchEvent("mouseover",y,x)),this._dispatchDataEvent("mousemove",y,x)}},n.prototype.onmouseup=function(y){if(!y.target||!y.target.__isGLToZRProxy){y=y.event;var x=this.pickObject(y.offsetX,y.offsetY);x&&(this._dispatchEvent("mouseup",y,x),this._dispatchDataEvent("mouseup",y,x)),this._upX=y.offsetX,this._upY=y.offsetY}},n.prototype.onclick=n.prototype.dblclick=function(y){if(!y.target||!y.target.__isGLToZRProxy){var x=this._upX-this._downX,w=this._upY-this._downY;if(!(Math.sqrt(x*x+w*w)>20)){y=y.event;var M=this.pickObject(y.offsetX,y.offsetY);M&&(this._dispatchEvent(y.type,y,M),this._dispatchDataEvent(y.type,y,M));var C=this._clickToSetFocusPoint(y);C&&C.view.setDOFFocusOnPoint(C.distance)&&this.zr.refresh()}}},n.prototype._clickToSetFocusPoint=function(y){for(var x=this.renderer,w=x.viewport,M=this.views.length-1;M>=0;M--){var C=this.views[M];if(C.hasDOF()&&C.containPoint(y.offsetX,y.offsetY)){this._picking.scene=C.scene,this._picking.camera=C.camera,x.viewport=C.viewport;var A=this._picking.pick(y.offsetX,y.offsetY,!0);if(A)return A.view=C,A}}x.viewport=w},n.prototype.onglobalout=function(y){var x=this._hovered;x&&this._dispatchEvent("mouseout",y,{target:x.target})},n.prototype.pickObject=function(y,x){for(var w=[],M=this.renderer,C=M.viewport,A=0;A<this.views.length;A++){var P=this.views[A];P.containPoint(y,x)&&(this._picking.scene=P.scene,this._picking.camera=P.camera,M.viewport=P.viewport,this._picking.pickAll(y,x,w))}return M.viewport=C,w.sort(function(b,N){return b.distance-N.distance}),w[0]},n.prototype._dispatchEvent=function(y,x,w){w||(w={});var M=w.target;for(w.cancelBubble=!1,w.event=x,w.type=y,w.offsetX=x.offsetX,w.offsetY=x.offsetY;M&&(M.trigger(y,w),M=M.getParent(),!w.cancelBubble););this._dispatchToView(y,w)},n.prototype._dispatchDataEvent=function(y,x,w){var M=w&&w.target,C=M&&M.dataIndex,A=M&&M.seriesIndex,P=M&&M.eventData,b=!1,N=this._zrEventProxy;N.position=[x.offsetX,x.offsetY],N.update();var B={target:N};y==="mousemove"&&(C!=null?C!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(N.dataIndex=this._lastDataIndex,N.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(B,"mouseout",x)),b=!0):P!=null&&P!==this._lastEventData&&(this._lastEventData!=null&&(N.eventData=this._lastEventData,this.zr.handler.dispatchToElement(B,"mouseout",x)),b=!0),this._lastEventData=P,this._lastDataIndex=C,this._lastSeriesIndex=A),N.eventData=P,N.dataIndex=C,N.seriesIndex=A,(P!=null||parseInt(C,10)>=0&&parseInt(A,10)>=0)&&(this.zr.handler.dispatchToElement(B,y,x),b&&this.zr.handler.dispatchToElement(B,"mouseover",x))},n.prototype._dispatchToView=function(y,x){for(var w=0;w<this.views.length;w++)this.views[w].containPoint(x.offsetX,x.offsetY)&&this.views[w].trigger(y,x)},l.a.util.extend(n.prototype,a.a),g.a=n},function(_,g,u){function c(t,i,s){E(i)=="object"&&(s=i,i=null);var a,o=this;if(!D(t,Function))for(var r in a=[],t)t.hasOwnProperty(r)&&a.push(r);var n=function p(d){if(o.apply(this,arguments),D(t,Function)?l(this,t.call(this,d)):e(this,t,a),this.constructor===p)for(var f=p.__initializers__,v=0;v<f.length;v++)f[v].apply(this,arguments)};n.__super__=o,n.__initializers__=o.__initializers__?o.__initializers__.slice():[],i&&n.__initializers__.push(i);var h=function(){};return h.prototype=o.prototype,(n.prototype=new h).constructor=n,l(n.prototype,s),n.extend=o.extend,n.derive=o.extend,n}function l(t,i){if(i)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}function e(t,i,s){for(var a=0;a<s.length;a++){var o=s[a];t[o]=i[o]}}g.a={extend:c,derive:c}},function(_,g,u){var c=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_astc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],l=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];g.a=function(e){for(var t={},i={},s=0;s<c.length;s++)o(c[s]);for(s=0;s<l.length;s++){var a=l[s];i[a]=e.getParameter(e[a])}function o(r){if(e.getExtension){var n=e.getExtension(r);n||(n=e.getExtension("MOZ_"+r)),n||(n=e.getExtension("WEBKIT_"+r)),t[r]=n}}this.getExtension=function(r){return r in t||o(r),t[r]},this.getParameter=function(r){return i[r]}}},function(_,g,u){g.a={get:function(c){var l=new XMLHttpRequest;l.open("get",c.url),l.responseType=c.responseType||"text",c.onprogress&&(l.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total;c.onprogress(t,e.loaded,e.total)}else c.onprogress(null)}),l.onload=function(e){l.status>=400?c.onerror&&c.onerror():c.onload&&c.onload(l.response)},c.onerror&&(l.onerror=c.onerror),l.send(null)}}},function(_,g,u){var c=u(68),l={},e={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function t(m){return(m=Math.round(m))<0?0:m>255?255:m}function i(m){return m<0?0:m>1?1:m}function s(m){return m.length&&m.charAt(m.length-1)==="%"?t(parseFloat(m)/100*255):t(parseInt(m,10))}function a(m){return m.length&&m.charAt(m.length-1)==="%"?i(parseFloat(m)/100):i(parseFloat(m))}function o(m,y,x){return x<0?x+=1:x>1&&(x-=1),6*x<1?m+(y-m)*x*6:2*x<1?y:3*x<2?m+(y-m)*(.6666666666666666-x)*6:m}function r(m,y,x){return m+(y-m)*x}function n(m,y,x,w,M){return m[0]=y,m[1]=x,m[2]=w,m[3]=M,m}function h(m,y){return m[0]=y[0],m[1]=y[1],m[2]=y[2],m[3]=y[3],m}var p=new c.a(20),d=null;function f(m,y){d&&h(d,y),d=p.put(m,d||y.slice())}function v(m,y){var x=(parseFloat(m[0])%360+360)%360/360,w=a(m[1]),M=a(m[2]),C=M<=.5?M*(w+1):M+w-M*w,A=2*M-C;return n(y=y||[],t(255*o(A,C,x+.3333333333333333)),t(255*o(A,C,x)),t(255*o(A,C,x-.3333333333333333)),1),m.length===4&&(y[3]=m[3]),y}l.parse=function(m,y){if(m){y=y||[];var x=p.get(m);if(x)return h(y,x);var w,M=(m+="").replace(/ /g,"").toLowerCase();if(M in e)return h(y,e[M]),f(m,y),y;if(M.charAt(0)==="#")return M.length===4?(w=parseInt(M.substr(1),16))>=0&&w<=4095?(n(y,(3840&w)>>4|(3840&w)>>8,240&w|(240&w)>>4,15&w|(15&w)<<4,1),f(m,y),y):void n(y,0,0,0,1):M.length===7?(w=parseInt(M.substr(1),16))>=0&&w<=16777215?(n(y,(16711680&w)>>16,(65280&w)>>8,255&w,1),f(m,y),y):void n(y,0,0,0,1):void 0;var C=M.indexOf("("),A=M.indexOf(")");if(C!==-1&&A+1===M.length){var P=M.substr(0,C),b=M.substr(C+1,A-(C+1)).split(","),N=1;switch(P){case"rgba":if(b.length!==4)return void n(y,0,0,0,1);N=a(b.pop());case"rgb":return b.length!==3?void n(y,0,0,0,1):(n(y,s(b[0]),s(b[1]),s(b[2]),N),f(m,y),y);case"hsla":return b.length!==4?void n(y,0,0,0,1):(b[3]=a(b[3]),v(b,y),f(m,y),y);case"hsl":return b.length!==3?void n(y,0,0,0,1):(v(b,y),f(m,y),y);default:return}}n(y,0,0,0,1)}},l.parseToFloat=function(m,y){if(y=l.parse(m,y))return y[0]/=255,y[1]/=255,y[2]/=255,y},l.lift=function(m,y){var x=l.parse(m);if(x){for(var w=0;w<3;w++)x[w]=y<0?x[w]*(1-y)|0:(255-x[w])*y+x[w]|0;return l.stringify(x,x.length===4?"rgba":"rgb")}},l.toHex=function(m){var y=l.parse(m);if(y)return(16777216+(y[0]<<16)+(y[1]<<8)+ +y[2]).toString(16).slice(1)},l.fastLerp=function(m,y,x){if(y&&y.length&&m>=0&&m<=1){x=x||[];var w=m*(y.length-1),M=Math.floor(w),C=Math.ceil(w),A=y[M],P=y[C],b=w-M;return x[0]=t(r(A[0],P[0],b)),x[1]=t(r(A[1],P[1],b)),x[2]=t(r(A[2],P[2],b)),x[3]=i(r(A[3],P[3],b)),x}},l.fastMapToColor=l.fastLerp,l.lerp=function(m,y,x){if(y&&y.length&&m>=0&&m<=1){var w=m*(y.length-1),M=Math.floor(w),C=Math.ceil(w),A=l.parse(y[M]),P=l.parse(y[C]),b=w-M,N=l.stringify([t(r(A[0],P[0],b)),t(r(A[1],P[1],b)),t(r(A[2],P[2],b)),i(r(A[3],P[3],b))],"rgba");return x?{color:N,leftIndex:M,rightIndex:C,value:w}:N}},l.mapToColor=l.lerp,l.modifyHSL=function(m,y,x,w){if(m=l.parse(m))return m=function(C){if(C){var A,P,b=C[0]/255,N=C[1]/255,B=C[2]/255,z=Math.min(b,N,B),F=Math.max(b,N,B),V=F-z,H=(F+z)/2;if(V===0)A=0,P=0;else{P=H<.5?V/(F+z):V/(2-F-z);var U=((F-b)/6+V/2)/V,j=((F-N)/6+V/2)/V,X=((F-B)/6+V/2)/V;b===F?A=X-j:N===F?A=.3333333333333333+U-X:B===F&&(A=.6666666666666666+j-U),A<0&&(A+=1),A>1&&(A-=1)}var Y=[360*A,P,H];return C[3]!=null&&Y.push(C[3]),Y}}(m),y!=null&&(m[0]=(M=y,(M=Math.round(M))<0?0:M>360?360:M)),x!=null&&(m[1]=a(x)),w!=null&&(m[2]=a(w)),l.stringify(v(m),"rgba");var M},l.modifyAlpha=function(m,y){if((m=l.parse(m))&&y!=null)return m[3]=i(y),l.stringify(m,"rgba")},l.stringify=function(m,y){if(m&&m.length){var x=m[0]+","+m[1]+","+m[2];return y!=="rgba"&&y!=="hsva"&&y!=="hsla"||(x+=","+m[3]),y+"("+x+")"}},g.a=l},function(_,g,u){var c=function(){this.head=null,this.tail=null,this._length=0};c.prototype.insert=function(l){var e=new c.Entry(l);return this.insertEntry(e),e},c.prototype.insertAt=function(l,e){if(!(l<0)){for(var t=this.head,i=0;t&&i!=l;)t=t.next,i++;if(t){var s=new c.Entry(e),a=t.prev;a?(a.next=s,s.prev=a):this.head=s,s.next=t,t.prev=s}else this.insert(e)}},c.prototype.insertBeforeEntry=function(l,e){var t=new c.Entry(l),i=e.prev;i?(i.next=t,t.prev=i):this.head=t,t.next=e,e.prev=t,this._length++},c.prototype.insertEntry=function(l){this.head?(this.tail.next=l,l.prev=this.tail,this.tail=l):this.head=this.tail=l,this._length++},c.prototype.remove=function(l){var e=l.prev,t=l.next;e?e.next=t:this.head=t,t?t.prev=e:this.tail=e,l.next=l.prev=null,this._length--},c.prototype.removeAt=function(l){if(!(l<0)){for(var e=this.head,t=0;e&&t!=l;)e=e.next,t++;return e?(this.remove(e),e.value):void 0}},c.prototype.getHead=function(){if(this.head)return this.head.value},c.prototype.getTail=function(){if(this.tail)return this.tail.value},c.prototype.getAt=function(l){if(!(l<0)){for(var e=this.head,t=0;e&&t!=l;)e=e.next,t++;return e.value}},c.prototype.indexOf=function(l){for(var e=this.head,t=0;e;){if(e.value===l)return t;e=e.next,t++}},c.prototype.length=function(){return this._length},c.prototype.isEmpty=function(){return this._length===0},c.prototype.forEach=function(l,e){for(var t=this.head,i=0,s=e!==void 0;t;)s?l.call(e,t.value,i):l(t.value,i),t=t.next,i++},c.prototype.clear=function(){this.tail=this.head=null,this._length=0},c.Entry=function(l){this.value=l,this.next=null,this.prev=null},g.a=c},function(_,g,u){var c=u(115);function l(i,s,a){var o={};for(var r in a)o[r+"_COUNT"]=a[r];return i.replace("/fors*?(ints*?_idx_s*=s*([w-]+);s*_idx_s*<s*([w-]+);s*_idx_s*++s*)s*{{([sS]+?)(?=}})}}/g",function(n,h,p,d){var f="";isNaN(h)&&(h=h in s?s[h]:o[h]),isNaN(p)&&(p=p in s?s[p]:o[p]);for(var v=parseInt(h);v<parseInt(p);v++)f+="{"+d.replace(/float\s*\(\s*_idx_\s*\)/g,v.toFixed(1)).replace(/_idx_/g,v)+"}";return f})}function e(i,s,a){var o=[];if(s)for(var r in s){var n=s[r];n>0&&o.push("#define "+r.toUpperCase()+"_COUNT "+n)}if(a)for(var h=0;h<a.length;h++){var p=a[h];o.push("#define "+p.toUpperCase()+"_ENABLED")}for(var p in i){var d=i[p];d===null?o.push("#define "+p):o.push("#define "+p+" "+d.toString())}return o.join(`
`)}function t(i){this._renderer=i,this._cache={}}t.prototype.getProgram=function(i,s,a,o){var r=this._cache,n=i.isSkinnedMesh&&i.isSkinnedMesh(),h=i.isInstancedMesh&&i.isInstancedMesh(),p="s"+s.shader.shaderID+"m"+s.getProgramKey();if(a&&(p+="se"+a.getProgramKey(i.lightGroup)),n&&(p+=",sk"+i.joints.length),h&&(p+=",is"),o.logDepthBuffer&&(p+=",ld"),b=r[p])return b;var d=a?a.getLightsNumbers(i.lightGroup):{},f=(o=this._renderer).gl,v=s.getEnabledTextures(),m="";if(n){var y={SKINNING:null,JOINT_COUNT:i.joints.length};i.joints.length>o.getMaxJointNumber()&&(y.USE_SKIN_MATRICES_TEXTURE=null),m+=`
`+e(y)+`
`}h&&(m+=`
#define INSTANCING
`),o.logDepthBuffer&&(m+=`
#define LOG_DEPTH
`);for(var x=m+e(s.vertexDefines,d,v),w=m+e(s.fragmentDefines,d,v),M=[["OES_standard_derivatives","TEXTURE_LOD"],["EXT_shader_texture_lod","STANDARD_DERIVATIVES"],["EXT_frag_depth","FRAG_DEPTH"]].filter(function(H){return o.getGLExtension(H[0])!=null}),C=0;C<M.length;C++){var A=`
#define SUPPORT_`+M[C][1];w+=A,x+=A}var P,b,N=x+`
`+s.shader.vertex,B=function(H){for(var U=[],j=0;j<H.length;j++)U.push("#extension GL_"+H[j][0]+" : enable");return U.join(`
`)}(M)+`
`+["precision",P=s.precision,"float"].join(" ")+`;
`+["precision",P,"int"].join(" ")+`;
`+["precision",P,"sampler2D"].join(" ")+`;

`+w+`
`+s.shader.fragment,z=l(N,s.vertexDefines,d),F=l(B,s.fragmentDefines,d);(b=new c.a).uniformSemantics=s.shader.uniformSemantics,b.attributes=s.shader.attributes;var V=b.buildProgram(f,s.shader,z,F);return b.__error=V,r[p]=b,b},g.a=t},function(_,g,u){var c=u(13),l=u(8),e={};function t(o){for(var r=o.split(`
`),n=0,h=r.length;n<h;n++)r[n]=n+1+": "+r[n];return r.join(`
`)}function i(o,r,n){if(!o.getShaderParameter(r,o.COMPILE_STATUS))return[o.getShaderInfoLog(r),t(n)].join(`
`)}var s=new c.a.Float32Array(16),a=l.a.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(o){this._textureSlot=0,o.gl.useProgram(this._program)},hasUniform:function(o){return this._locations[o]!=null},useTextureSlot:function(o,r,n){r&&(o.gl.activeTexture(o.gl.TEXTURE0+n),r.isRenderable()?r.bind(o):r.unbind(o))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(o){this._textureSlot=o||0},takeCurrentTextureSlot:function(o,r){var n=this._textureSlot;return this.useTextureSlot(o,r,n),this._textureSlot++,n},setUniform:function(o,r,n,h){var p=this._locations[n];if(p==null)return!1;switch(r){case"m4":if(!D(h,Float32Array)){for(var d=0;d<h.length;d++)s[d]=h[d];h=s}o.uniformMatrix4fv(p,!1,h);break;case"2i":o.uniform2i(p,h[0],h[1]);break;case"2f":o.uniform2f(p,h[0],h[1]);break;case"3i":o.uniform3i(p,h[0],h[1],h[2]);break;case"3f":o.uniform3f(p,h[0],h[1],h[2]);break;case"4i":o.uniform4i(p,h[0],h[1],h[2],h[3]);break;case"4f":o.uniform4f(p,h[0],h[1],h[2],h[3]);break;case"1i":o.uniform1i(p,h);break;case"1f":o.uniform1f(p,h);break;case"1fv":o.uniform1fv(p,h);break;case"1iv":o.uniform1iv(p,h);break;case"2iv":o.uniform2iv(p,h);break;case"2fv":o.uniform2fv(p,h);break;case"3iv":o.uniform3iv(p,h);break;case"3fv":o.uniform3fv(p,h);break;case"4iv":o.uniform4iv(p,h);break;case"4fv":o.uniform4fv(p,h);break;case"m2":case"m2v":o.uniformMatrix2fv(p,!1,h);break;case"m3":case"m3v":o.uniformMatrix3fv(p,!1,h);break;case"m4v":if(Array.isArray(h)&&Array.isArray(h[0])){var f=new c.a.Float32Array(16*h.length),v=0;for(d=0;d<h.length;d++)for(var m=h[d],y=0;y<16;y++)f[v++]=m[y];o.uniformMatrix4fv(p,!1,f)}else o.uniformMatrix4fv(p,!1,h)}return!0},setUniformOfSemantic:function(o,r,n){var h=this.uniformSemantics[r];return!!h&&this.setUniform(o,h.type,h.symbol,n)},enableAttributes:function(o,r,n){var h,p=o.gl,d=this._program,f=this._locations;(h=n?n.__enabledAttributeList:e[o.__uid__])||(h=n?n.__enabledAttributeList=[]:e[o.__uid__]=[]);for(var v=[],m=0;m<r.length;m++){var y=r[m];if(this.attributes[y]){var x=f[y];if(x==null){if((x=p.getAttribLocation(d,y))===-1){v[m]=-1;continue}f[y]=x}v[m]=x,h[x]?h[x]=2:h[x]=1}else v[m]=-1}for(m=0;m<h.length;m++)switch(h[m]){case 1:p.enableVertexAttribArray(m),h[m]=3;break;case 2:h[m]=3;break;case 3:p.disableVertexAttribArray(m),h[m]=0}return v},getAttribLocation:function(o,r){var n=this._locations,h=n[r];return h==null&&(h=o.getAttribLocation(this._program,r),n[r]=h),h},isAttribEnabled:function(o,r){return!!(e[o.__uid__]||[])[r]},buildProgram:function(o,r,n,h){var p=o.createShader(o.VERTEX_SHADER),d=o.createProgram();o.shaderSource(p,n),o.compileShader(p);var f=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(f,h),o.compileShader(f);var v=i(o,p,n);if(v||(v=i(o,f,h)))return v;if(o.attachShader(d,p),o.attachShader(d,f),r.attributeSemantics.POSITION)o.bindAttribLocation(d,0,r.attributeSemantics.POSITION.symbol);else{var m=Object.keys(this.attributes);o.bindAttribLocation(d,0,m[0])}if(o.linkProgram(d),o.deleteShader(p),o.deleteShader(f),this._program=d,this.vertexCode=n,this.fragmentCode=h,!o.getProgramParameter(d,o.LINK_STATUS))return`Could not link program
`+o.getProgramInfoLog(d);for(var y=0;y<r.uniforms.length;y++){var x=r.uniforms[y];this._locations[x]=o.getUniformLocation(d,x)}}});g.a=a},function(_,g,u){var c,l,e,t,i,s=u(8),a=u(54),o=u(26),r=u(3),n=u(7),h=u(71),p=u(11),d=u(12),f=s.a.extend({scene:null,camera:null,renderer:null},function(){this._ray=new a.a,this._ndc=new o.a},{pick:function(v,m,y){return this.pickAll(v,m,[],y)[0]||null},pickAll:function(v,m,y,x){return this.renderer.screenToNDC(v,m,this._ndc),this.camera.castRay(this._ndc,this._ray),y=y||[],this._intersectNode(this.scene,y,x||!1),y.sort(this._intersectionCompareFunc),y},_intersectNode:function(v,m,y){D(v,h.a)&&v.isRenderable()&&(v.ignorePicking&&!y||!(v.mode===p.a.TRIANGLES&&v.geometry.isUseIndices()||v.geometry.pickByRay||v.geometry.pick)||this._intersectRenderable(v,m));for(var x=0;x<v._children.length;x++)this._intersectNode(v._children[x],m,y)},_intersectRenderable:(c=new r.a,l=new r.a,e=new r.a,t=new a.a,i=new n.a,function(v,m){var y=v.isSkinnedMesh();t.copy(this._ray),n.a.invert(i,v.worldTransform),y||t.applyTransform(i);var x=v.geometry,w=y?v.skeleton.boundingBox:x.boundingBox;if(!w||t.intersectBoundingBox(w))if(x.pick)x.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,v,m);else if(x.pickByRay)x.pickByRay(t,v,m);else{var M,C,A=v.cullFace===p.a.BACK&&v.frontFace===p.a.CCW||v.cullFace===p.a.FRONT&&v.frontFace===p.a.CW,P=x.indices,b=x.attributes.position,N=x.attributes.weight,B=x.attributes.joint,z=[];if(b&&b.value&&P){if(y){C=v.skeleton.getSubSkinMatrices(v.__uid__,v.joints);for(var F=0;F<v.joints.length;F++){z[F]=z[F]||[];for(var V=0;V<16;V++)z[F][V]=C[16*F+V]}var H=[],U=[],j=[],X=[],Y=[],J=x.attributes.skinnedPosition;for(J&&J.value||(x.createAttribute("skinnedPosition","f",3),(J=x.attributes.skinnedPosition).init(x.vertexCount)),F=0;F<x.vertexCount;F++){for(b.get(F,H),N.get(F,U),B.get(F,j),U[3]=1-U[0]-U[1]-U[2],d.a.set(X,0,0,0),V=0;V<4;V++)j[V]>=0&&U[V]>1e-4&&(d.a.transformMat4(Y,H,z[j[V]]),d.a.scaleAndAdd(X,X,Y,U[V]));J.set(F,X)}}for(F=0;F<P.length;F+=3){var K=P[F],Q=P[F+1],Z=P[F+2],q=y?x.attributes.skinnedPosition:b;if(q.get(K,c.array),q.get(Q,l.array),q.get(Z,e.array),M=A?t.intersectTriangle(c,l,e,v.culling):t.intersectTriangle(c,e,l,v.culling)){var tt=new r.a;y?r.a.copy(tt,M):r.a.transformMat4(tt,M,v.worldTransform),m.push(new f.Intersection(M,tt,v,[K,Q,Z],F/3,r.a.dist(tt,this._ray.origin)))}}}}}),_intersectionCompareFunc:function(v,m){return v.distance-m.distance}});f.Intersection=function(v,m,y,x,w,M){this.point=v,this.pointWorld=m,this.target=y,this.triangle=x,this.triangleIndex=w,this.distance=M},g.a=f},function(_,g,u){var c=u(8),l=u(11),e=u(57),t=u(13);function i(h){return{byte:t.a.Int8Array,ubyte:t.a.Uint8Array,short:t.a.Int16Array,ushort:t.a.Uint16Array}[h]||t.a.Float32Array}function s(h){return"attr_"+h}function a(h,p,d,f){switch(this.name=h,this.type=p,this.size=d,this.semantic=f||"",this.value=null,d){case 1:this.get=function(v){return this.value[v]},this.set=function(v,m){this.value[v]=m},this.copy=function(v,m){this.value[v]=this.value[v]};break;case 2:this.get=function(v,m){var y=this.value;return m[0]=y[2*v],m[1]=y[2*v+1],m},this.set=function(v,m){var y=this.value;y[2*v]=m[0],y[2*v+1]=m[1]},this.copy=function(v,m){var y=this.value;m*=2,y[v*=2]=y[m],y[v+1]=y[m+1]};break;case 3:this.get=function(v,m){var y=3*v,x=this.value;return m[0]=x[y],m[1]=x[y+1],m[2]=x[y+2],m},this.set=function(v,m){var y=3*v,x=this.value;x[y]=m[0],x[y+1]=m[1],x[y+2]=m[2]},this.copy=function(v,m){var y=this.value;m*=3,y[v*=3]=y[m],y[v+1]=y[m+1],y[v+2]=y[m+2]};break;case 4:this.get=function(v,m){var y=this.value,x=4*v;return m[0]=y[x],m[1]=y[x+1],m[2]=y[x+2],m[3]=y[x+3],m},this.set=function(v,m){var y=this.value,x=4*v;y[x]=m[0],y[x+1]=m[1],y[x+2]=m[2],y[x+3]=m[3]},this.copy=function(v,m){var y=this.value;m*=4,y[v*=4]=y[m],y[v+1]=y[m+1],y[v+2]=y[m+2],y[v+3]=y[m+3]}}}function o(h,p,d,f,v){this.name=h,this.type=p,this.buffer=d,this.size=f,this.semantic=v,this.symbol="",this.needsRemove=!1}function r(h){this.buffer=h,this.count=0}a.prototype.init=function(h){if(!this.value||this.value.length!==h*this.size){var p=i(this.type);this.value=new p(h*this.size)}},a.prototype.fromArray=function(h){var p,d=i(this.type);if(h[0]&&h[0].length){var f=0,v=this.size;p=new d(h.length*v);for(var m=0;m<h.length;m++)for(var y=0;y<v;y++)p[f++]=h[m][y]}else p=new d(h);this.value=p},a.prototype.clone=function(h){var p=new a(this.name,this.type,this.size,this.semantic);return h&&console.warn("todo"),p};var n=c.a.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new e.a,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var h=this.getEnabledAttributes(),p=0;p<h.length;p++)this.dirtyAttribute(h[p]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirtyAll("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(h){this._cache.dirtyAll(s(h)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(h,p){if(h<this.triangleCount&&h>=0){p||(p=[]);var d=this.indices;return p[0]=d[3*h],p[1]=d[3*h+1],p[2]=d[3*h+2],p}},setTriangleIndices:function(h,p){var d=this.indices;d[3*h]=p[0],d[3*h+1]=p[1],d[3*h+2]=p[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(h){var p,d=this.vertexCount>65535?t.a.Uint32Array:t.a.Uint16Array;if(h[0]&&h[0].length){var f=0;p=new d(3*h.length);for(var v=0;v<h.length;v++)for(var m=0;m<3;m++)p[f++]=h[v][m]}else p=new d(h);this.indices=p},createAttribute:function(h,p,d,f){var v=new a(h,p,d,f);return this.attributes[h]&&this.removeAttribute(h),this.attributes[h]=v,this._attributeList.push(h),v},removeAttribute:function(h){var p=this._attributeList,d=p.indexOf(h);return d>=0&&(p.splice(d,1),delete this.attributes[h],!0)},getAttribute:function(h){return this.attributes[h]},getEnabledAttributes:function(){var h=this._enabledAttributes,p=this._attributeList;if(h)return h;for(var d=[],f=this.vertexCount,v=0;v<p.length;v++){var m=p[v],y=this.attributes[m];y.value&&y.value.length===f*y.size&&d.push(m)}return this._enabledAttributes=d,d},getBufferChunks:function(h){var p=this._cache;p.use(h.__uid__);var d=p.isDirty("attributes"),f=p.isDirty("indices");if(d||f){this._updateBuffer(h.gl,d,f);for(var v=this.getEnabledAttributes(),m=0;m<v.length;m++)p.fresh(s(v[m]));p.fresh("attributes"),p.fresh("indices")}return p.fresh("any"),p.get("chunks")},_updateBuffer:function(h,p,d){var f=this._cache,v=f.get("chunks"),m=!1;v||((v=[])[0]={attributeBuffers:[],indicesBuffer:null},f.put("chunks",v),m=!0);var y=v[0],x=y.attributeBuffers,w=y.indicesBuffer;if(p||m){var M=this.getEnabledAttributes(),C={};if(!m)for(var A=0;A<x.length;A++)C[x[A].name]=x[A];for(var P=0;P<M.length;P++){var b,N,B=M[P],z=this.attributes[B];m||(b=C[B]),N=b?b.buffer:h.createBuffer(),f.isDirty(s(B))&&(h.bindBuffer(h.ARRAY_BUFFER,N),h.bufferData(h.ARRAY_BUFFER,z.value,this.dynamic?h.DYNAMIC_DRAW:h.STATIC_DRAW)),x[P]=new o(B,z.type,N,z.size,z.semantic)}for(A=P;A<x.length;A++)h.deleteBuffer(x[A].buffer);x.length=P}this.isUseIndices()&&(d||m)&&(w||(w=new r(h.createBuffer()),y.indicesBuffer=w),w.count=this.indices.length,h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,w.buffer),h.bufferData(h.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?h.DYNAMIC_DRAW:h.STATIC_DRAW))},dispose:function(h){var p=this._cache;p.use(h.__uid__);var d=p.get("chunks");if(d)for(var f=0;f<d.length;f++){for(var v=d[f],m=0;m<v.attributeBuffers.length;m++){var y=v.attributeBuffers[m];h.gl.deleteBuffer(y.buffer)}v.indicesBuffer&&h.gl.deleteBuffer(v.indicesBuffer.buffer)}if(this.__vaoCache){var x=h.getGLExtension("OES_vertex_array_object");for(var w in this.__vaoCache){var M=this.__vaoCache[w].vao;M&&x.deleteVertexArrayOES(M)}}this.__vaoCache={},p.deleteContext(h.__uid__)}});Object.defineProperty&&(Object.defineProperty(n.prototype,"vertexCount",{enumerable:!1,get:function(){var h=this.attributes[this.mainAttribute];return h||(h=this.attributes[this._attributeList[0]]),h&&h.value?h.value.length/h.size:0}}),Object.defineProperty(n.prototype,"triangleCount",{enumerable:!1,get:function(){var h=this.indices;return h?h.length/3:0}})),n.STATIC_DRAW=l.a.STATIC_DRAW,n.DYNAMIC_DRAW=l.a.DYNAMIC_DRAW,n.STREAM_DRAW=l.a.STREAM_DRAW,n.AttributeBuffer=o,n.IndicesBuffer=r,n.Attribute=a,g.a=n},function(_,g,u){var c=u(119),l="@export clay.header.",e="@end",t=":unconfigurable;";g.a=[l+"directional_light","uniform vec3 directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+t,"uniform vec3 directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+t,e,l+"ambient_light","uniform vec3 ambientLightColor[AMBIENT_LIGHT_COUNT]"+t,e,l+"ambient_sh_light","uniform vec3 ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+t,"uniform vec3 ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+t,c.a,e,l+"ambient_cubemap_light","uniform vec3 ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+t,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+t,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+t,e,l+"point_light","uniform vec3 pointLightPosition[POINT_LIGHT_COUNT]"+t,"uniform float pointLightRange[POINT_LIGHT_COUNT]"+t,"uniform vec3 pointLightColor[POINT_LIGHT_COUNT]"+t,e,l+"spot_light","uniform vec3 spotLightPosition[SPOT_LIGHT_COUNT]"+t,"uniform vec3 spotLightDirection[SPOT_LIGHT_COUNT]"+t,"uniform float spotLightRange[SPOT_LIGHT_COUNT]"+t,"uniform float spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+t,"uniform float spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+t,"uniform float spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+t,"uniform vec3 spotLightColor[SPOT_LIGHT_COUNT]"+t,e].join(`
`)},function(_,g,u){g.a=`vec3 calcAmbientSHLight(int idx, vec3 N) {
 int offset = 9 * idx;
 return ambientSHLightCoefficients[0]
 + ambientSHLightCoefficients[1] * N.x
 + ambientSHLightCoefficients[2] * N.y
 + ambientSHLightCoefficients[3] * N.z
 + ambientSHLightCoefficients[4] * N.x * N.z
 + ambientSHLightCoefficients[5] * N.z * N.y
 + ambientSHLightCoefficients[6] * N.y * N.x
 + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)
 + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);
}`},function(_,g,u){g.a=`@export clay.skybox.vertex
#define SHADER_NAME skybox
uniform mat4 world : WORLD;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
varying vec3 v_WorldPosition;
void main()
{
 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end
@export clay.skybox.fragment
#define PI 3.1415926
uniform mat4 viewInverse : VIEWINVERSE;
#ifdef EQUIRECTANGULAR
uniform sampler2D environmentMap;
#else
uniform samplerCube environmentMap;
#endif
uniform float lod: 0.0;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
@import clay.util.srgb
@import clay.util.ACES
void main()
{
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
#ifdef EQUIRECTANGULAR
 float phi = acos(V.y);
 float theta = atan(-V.x, V.z) + PI * 0.5;
 vec2 uv = vec2(theta / 2.0 / PI, phi / PI);
 vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));
#else
 #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)
 vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));
 #else
 vec4 texel = decodeHDR(textureCube(environmentMap, V));
 #endif
#endif
#ifdef SRGB_DECODE
 texel = sRGBToLinear(texel);
#endif
#ifdef TONEMAPPING
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
#ifdef SRGB_ENCODE
 texel = linearTosRGB(texel);
#endif
 gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));
}
@end`},function(_,g,u){var c=u(4),l=u(5);function e(o){return o.charCodeAt(0)+(o.charCodeAt(1)<<8)+(o.charCodeAt(2)<<16)+(o.charCodeAt(3)<<24)}u(27);var t=e("DXT1"),i=e("DXT3"),s=e("DXT5"),a={parse:function(o,r){var n=new Int32Array(o,0,31);if(n[0]!==542327876||4&!n(20))return null;var h,p,d=n(21),f=n[4],v=n[3],m=512&n[28],y=131072&n[2];switch(d){case t:h=8,p=c.a.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case i:h=16,p=c.a.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case s:h=16,p=c.a.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var x=n[1]+4,w=m?6:1,M=1;y&&(M=Math.max(1,n[7]));for(var C=[],A=0;A<w;A++){var P=f,b=v;C[A]=new l.a({width:P,height:b,format:p});for(var N=[],B=0;B<M;B++){var z=Math.max(4,P)/4*Math.max(4,b)/4*h,F=new Uint8Array(o,x,z);x+=z,P*=.5,b*=.5,N[B]=F}C[A].pixels=N[0],y&&(C[A].mipmaps=N)}if(!r)return C[0];r.width=C[0].width,r.height=C[0].height,r.format=C[0].format,r.pixels=C[0].pixels,r.mipmaps=C[0].mipmaps}};g.a=a},function(_,g,u){var c=u(4),l=u(5),e=String.fromCharCode;function t(o,r,n,h){if(o[3]>0){var p=Math.pow(2,o[3]-128-8+h);r[n+0]=o[0]*p,r[n+1]=o[1]*p,r[n+2]=o[2]*p}else r[n+0]=0,r[n+1]=0,r[n+2]=0;return r[n+3]=1,r}function i(o,r,n,h){for(var p,d,f=0,v=0,m=h;m>0;)if(o[v][0]=r[n++],o[v][1]=r[n++],o[v][2]=r[n++],o[v][3]=r[n++],o[v][0]===1&&o[v][1]===1&&o[v][2]===1){for(var y=o[v][3]<<f>>>0;y>0;y--)p=o[v-1],(d=o[v])[0]=p[0],d[1]=p[1],d[2]=p[2],d[3]=p[3],v++,m--;f+=8}else v++,m--,f=0;return n}function s(o,r,n,h){if(h<8|h>32767)return i(o,r,n,h);if((p=r[n++])!=2)return i(o,r,n-1,h);if(o[0][1]=r[n++],o[0][2]=r[n++],p=r[n++],(o[0][2]<<8>>>0|p)>>>0!==h)return null;for(var p=0;p<4;p++)for(var d=0;d<h;){var f=r[n++];if(f>128){f=(127&f)>>>0;for(var v=r[n++];f--;)o[d++][p]=v}else for(;f--;)o[d++][p]=r[n++]}return n}var a={parseRGBE:function(o,r,n){n==null&&(n=0);var h=new Uint8Array(o),p=h.length;if(function(B,z,F){for(var V="",H=0;H<2;H++)V+=e(B[H]);return V}(h)==="#?"){for(var d=2;d<p&&(e(h[d])!==`
`||e(h[d+1])!==`
`);d++);if(!(d>=p)){d+=2;for(var f="";d<p;d++){var v=e(h[d]);if(v===`
`)break;f+=v}var m=f.split(" "),y=parseInt(m[1]),x=parseInt(m[3]);if(x&&y){for(var w=d+1,M=[],C=0;C<x;C++){M[C]=[];for(var A=0;A<4;A++)M[C][A]=0}for(var P=new Float32Array(x*y*4),b=0,N=0;N<y;N++){if(!(w=s(M,h,w,x)))return null;for(C=0;C<x;C++)t(M[C],P,b,n),b+=4}return r||(r=new l.a),r.width=x,r.height=y,r.pixels=P,r.type=c.a.FLOAT,r}}}},parseRGBEFromPNG:function(o){}};g.a=a},function(_,g,u){var c=u(5),l=u(3),e=u(26),t=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function i(v){return"_on"+v}var s,a,o,r,n,h,p,d,f=function(v){var m=this;this._texture=new c.a({anisotropic:32,flipY:!1,surface:this,dispose:function(y){m.dispose(),c.a.prototype.dispose.call(this,y)}}),t.forEach(function(y){this[i(y)]=function(x){x.triangle&&this._meshes.forEach(function(w){this.dispatchEvent(y,w,x.triangle,x.point)},this)}},this),this._meshes=[],v&&this.setECharts(v),this.onupdate=null};f.prototype={constructor:f,getTexture:function(){return this._texture},setECharts:function(v){this._chart=v;var m=v.getDom();if(D(m,HTMLCanvasElement)){var y=this,x=v.getZr(),w=x.__oldRefreshImmediately||x.refreshImmediately;x.refreshImmediately=function(){w.call(this),y._texture.dirty(),y.onupdate&&y.onupdate()},x.__oldRefreshImmediately=w}else console.error("ECharts must init on canvas if it is used as texture."),m=document.createElement("canvas");this._texture.image=m,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:(s=new l.a,a=new l.a,o=new l.a,r=new e.a,n=new e.a,h=new e.a,p=new e.a,d=new l.a,function(v,m,y,x){var w=m.geometry,M=w.attributes.position,C=w.attributes.texcoord0,A=l.a.dot,P=l.a.cross;M.get(y[0],s.array),M.get(y[1],a.array),M.get(y[2],o.array),C.get(y[0],r.array),C.get(y[1],n.array),C.get(y[2],h.array),P(d,a,o);var b=A(s,d),N=A(x,d)/b;P(d,o,s);var B=A(x,d)/b;P(d,s,a);var z=A(x,d)/b;e.a.scale(p,r,N),e.a.scaleAndAdd(p,p,n,B),e.a.scaleAndAdd(p,p,h,z);var F=p.x*this._chart.getWidth(),V=p.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(v,{zrX:F,zrY:V})}),attachToMesh:function(v){this._meshes.indexOf(v)>=0||(t.forEach(function(m){v.on(m,this[i(m)],this)},this),this._meshes.push(v))},detachFromMesh:function(v){var m=this._meshes.indexOf(v);m>=0&&this._meshes.splice(m,1),t.forEach(function(y){v.off(y,this[i(y)])},this)},dispose:function(){this._meshes.forEach(function(v){this.detachFromMesh(v)},this)}},g.a=f},function(_,g,u){var c=u(24),l=u(77),e=c.a.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(t,i){if(t.getGLExtension("EXT_shader_texture_lod")){this._brdfLookup||(this._normalDistribution=l.a.generateNormalDistribution(),this._brdfLookup=l.a.integrateBRDF(t,this._normalDistribution));var s=this.cubemap;if(!s.__prefiltered){var a=l.a.prefilterEnvironmentMap(t,s,{encodeRGBM:!0,width:i,height:i},this._normalDistribution,this._brdfLookup);this.cubemap=a.environmentMap,this.cubemap.__prefiltered=!0,s.dispose(t)}}else console.warn("Device not support textureCubeLodEXT")},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(t){var i=t.color,s=t.intensity;return[i[0]*s,i[1]*s,i[2]*s]}},ambientCubemapLightCubemap:{type:"t",value:function(t){return t.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(t){return t._brdfLookup}}}});g.a=e},function(_,g,u){g.a=`
@export clay.compositor.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
varying vec2 v_Texcoord;
void main()
{
 v_Texcoord = texcoord;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end`},function(_,g,u){g.a=`#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform sampler2D normalDistribution;
uniform vec2 viewportSize : [512, 256];
const vec3 N = vec3(0.0, 0.0, 1.0);
const float fSampleNumber = float(SAMPLE_NUMBER);
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
float G_Smith(float roughness, float NoV, float NoL) {
 float k = roughness * roughness / 2.0;
 float G1V = NoV / (NoV * (1.0 - k) + k);
 float G1L = NoL / (NoL * (1.0 - k) + k);
 return G1L * G1V;
}
void main() {
 vec2 uv = gl_FragCoord.xy / viewportSize;
 float NoV = uv.x;
 float roughness = uv.y;
 vec3 V;
 V.x = sqrt(1.0 - NoV * NoV);
 V.y = 0.0;
 V.z = NoV;
 float A = 0.0;
 float B = 0.0;
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(L.z, 0.0, 1.0);
 float NoH = clamp(H.z, 0.0, 1.0);
 float VoH = clamp(dot(V, H), 0.0, 1.0);
 if (NoL > 0.0) {
 float G = G_Smith(roughness, NoV, NoL);
 float G_Vis = G * VoH / (NoH * NoV);
 float Fc = pow(1.0 - VoH, 5.0);
 A += (1.0 - Fc) * G_Vis;
 B += Fc * G_Vis;
 }
 }
 gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);
}
`},function(_,g,u){g.a=`#define SHADER_NAME prefilter
#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform mat4 viewInverse : VIEWINVERSE;
uniform samplerCube environmentMap;
uniform sampler2D normalDistribution;
uniform float roughness : 0.5;
varying vec2 v_Texcoord;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
void main() {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
 vec3 N = V;
 vec3 prefilteredColor = vec3(0.0);
 float totalWeight = 0.0;
 float fMaxSampleNumber = float(SAMPLE_NUMBER);
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(dot(N, L), 0.0, 1.0);
 if (NoL > 0.0) {
 prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;
 totalWeight += NoL;
 }
 }
 gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));
}
`},function(_,g,u){var c=u(24),l=u(13),e=c.a.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new l.a.Float32Array(27)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(t){var i=t.color,s=t.intensity;return[i[0]*s,i[1]*s,i[2]*s]}},ambientSHLightCoefficients:{type:"3f",value:function(t){for(var i=t._coefficientsTmpArr,s=0;s<t.coefficients.length;s++)i[s]=t.coefficients[s];return i}}}});g.a=e},function(_,g,u){var c=u(4),l=u(10),e=u(5),t=(u(15),u(13)),i=u(42),s=u(75),a=u(61),o=u(36),r=u(12),n=(u(130),{}),h=["px","nx","py","ny","pz","nz"];function p(f,v){var m=f[0],y=f[1],x=f[2];return v===0?1:v===1?m:v===2?y:v===3?x:v===4?m*x:v===5?y*x:v===6?m*y:v===7?3*x*x-1:m*m-y*y}var d={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};n.projectEnvironmentMap=function(f,v,m){var y;(m=m||{}).lod=m.lod||0;var x=new o.a,w=64;v.textureType==="texture2D"?y=new s.a({scene:x,environmentMap:v}):(w=v.image&&v.image.px?v.image.px.width:v.width,y=new i.a({scene:x,environmentMap:v}));var M=Math.ceil(w/Math.pow(2,m.lod)),C=Math.ceil(w/Math.pow(2,m.lod)),A=new e.a({width:M,height:C}),P=new l.a;y.material.define("fragment","RGBM_ENCODE"),m.decodeRGBM&&y.material.define("fragment","RGBM_DECODE"),y.material.set("lod",m.lod);for(var b=new a.a({texture:A}),N={},B=0;B<h.length;B++){N[h[B]]=new Uint8Array(M*C*4);var z=b.getCamera(h[B]);z.fov=90,P.attach(A),P.bind(f),f.render(x,z),f.gl.readPixels(0,0,M,C,c.a.RGBA,c.a.UNSIGNED_BYTE,N[h[B]]),P.unbind(f)}return y.dispose(f),P.dispose(f),A.dispose(f),function(F,V,H,U){for(var j=new t.a.Float32Array(27),X=r.a.create(),Y=r.a.create(),J=r.a.create(),K=0;K<9;K++){for(var Q=r.a.create(),Z=0;Z<h.length;Z++){for(var q=V[h[Z]],tt=r.a.create(),$=0,rt=0,et=d[h[Z]],it=0;it<U;it++)for(var ot=0;ot<H;ot++){X[0]=ot/(H-1)*2-1,X[1]=it/(U-1)*2-1,X[2]=-1,r.a.normalize(X,X),J[0]=X[et[0]]*et[3],J[1]=X[et[1]]*et[4],J[2]=X[et[2]]*et[5],Y[0]=q[rt++]/255,Y[1]=q[rt++]/255,Y[2]=q[rt++]/255;var st=q[rt++]/255*8.12;Y[0]*=st,Y[1]*=st,Y[2]*=st,r.a.scaleAndAdd(tt,tt,Y,p(J,K)*-X[2]),$+=-X[2]}r.a.scaleAndAdd(Q,Q,tt,1/$)}j[3*K]=Q[0]/6,j[3*K+1]=Q[1]/6,j[3*K+2]=Q[2]/6}return j}(0,N,M,C)},g.a=n},function(_,g,u){g.a=`uniform samplerCube environmentMap;
varying vec2 v_Texcoord;
#define TEXTURE_SIZE 16
mat3 front = mat3(
 1.0, 0.0, 0.0,
 0.0, 1.0, 0.0,
 0.0, 0.0, 1.0
);
mat3 back = mat3(
 -1.0, 0.0, 0.0,
 0.0, 1.0, 0.0,
 0.0, 0.0, -1.0
);
mat3 left = mat3(
 0.0, 0.0, -1.0,
 0.0, 1.0, 0.0,
 1.0, 0.0, 0.0
);
mat3 right = mat3(
 0.0, 0.0, 1.0,
 0.0, 1.0, 0.0,
 -1.0, 0.0, 0.0
);
mat3 up = mat3(
 1.0, 0.0, 0.0,
 0.0, 0.0, 1.0,
 0.0, -1.0, 0.0
);
mat3 down = mat3(
 1.0, 0.0, 0.0,
 0.0, 0.0, -1.0,
 0.0, 1.0, 0.0
);
float harmonics(vec3 normal){
 int index = int(gl_FragCoord.x);
 float x = normal.x;
 float y = normal.y;
 float z = normal.z;
 if(index==0){
 return 1.0;
 }
 else if(index==1){
 return x;
 }
 else if(index==2){
 return y;
 }
 else if(index==3){
 return z;
 }
 else if(index==4){
 return x*z;
 }
 else if(index==5){
 return y*z;
 }
 else if(index==6){
 return x*y;
 }
 else if(index==7){
 return 3.0*z*z - 1.0;
 }
 else{
 return x*x - y*y;
 }
}
vec3 sampleSide(mat3 rot)
{
 vec3 result = vec3(0.0);
 float divider = 0.0;
 for (int i = 0; i < TEXTURE_SIZE * TEXTURE_SIZE; i++) {
 float x = mod(float(i), float(TEXTURE_SIZE));
 float y = float(i / TEXTURE_SIZE);
 vec2 sidecoord = ((vec2(x, y) + vec2(0.5, 0.5)) / vec2(TEXTURE_SIZE)) * 2.0 - 1.0;
 vec3 normal = normalize(vec3(sidecoord, -1.0));
 vec3 fetchNormal = rot * normal;
 vec3 texel = textureCube(environmentMap, fetchNormal).rgb;
 result += harmonics(fetchNormal) * texel * -normal.z;
 divider += -normal.z;
 }
 return result / divider;
}
void main()
{
 vec3 result = (
 sampleSide(front) +
 sampleSide(back) +
 sampleSide(left) +
 sampleSide(right) +
 sampleSide(up) +
 sampleSide(down)
 ) / 6.0;
 gl_FragColor = vec4(result, 1.0);
}`},function(_,g,u){var c=u(14),l=u(18),e=c.a.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var t=this.heightSegments,i=this.widthSegments,s=this.attributes.position,a=this.attributes.texcoord0,o=this.attributes.normal,r=(i+1)*(t+1);s.init(r),a.init(r),o.init(r);var n,h,p,d,f,v,m,y,x,w,M,C=r>65535?Uint32Array:Uint16Array,A=this.indices=new C(i*t*6),P=this.radius,b=this.phiStart,N=this.phiLength,B=this.thetaStart,z=this.thetaLength,F=[],V=[],H=0,U=1/(P=this.radius);for(m=0;m<=t;m++)for(v=0;v<=i;v++)d=v/i,f=m/t,n=-P*Math.cos(b+d*N)*Math.sin(B+f*z),h=P*Math.cos(B+f*z),p=P*Math.sin(b+d*N)*Math.sin(B+f*z),F[0]=n,F[1]=h,F[2]=p,V[0]=d,V[1]=f,s.set(H,F),a.set(H,V),F[0]*=U,F[1]*=U,F[2]*=U,o.set(H,F),H++;var j=i+1,X=0;for(m=0;m<t;m++)for(v=0;v<i;v++)x=m*j+v,y=m*j+v+1,M=(m+1)*j+v+1,w=(m+1)*j+v,A[X++]=y,A[X++]=x,A[X++]=M,A[X++]=x,A[X++]=w,A[X++]=M;this.boundingBox=new l.a,this.boundingBox.max.set(P,P,P),this.boundingBox.min.set(-P,-P,-P)}});g.a=e},function(_,g,u){var c=u(24).a.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(l){var e=l.color,t=l.intensity;return[e[0]*t,e[1]*t,e[2]*t]}}}});g.a=c},function(_,g,u){var c=u(24),l=u(3),e=c.a.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new l.a,t.__dir.copy(t.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(t){var i=t.color,s=t.intensity;return[i[0]*s,i[1]*s,i[2]*s]}}},clone:function(){var t=c.a.prototype.clone.call(this);return t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}});g.a=e},function(_,g,u){var c=u(24),l=c.a.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(e){return e.range}},pointLightColor:{type:"3f",value:function(e){var t=e.color,i=e.intensity;return[t[0]*i,t[1]*i,t[2]*i]}}},clone:function(){var e=c.a.prototype.clone.call(this);return e.range=this.range,e}});g.a=l},function(_,g,u){var c=u(24),l=u(3),e=c.a.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(t){return t.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(t){return t.falloffFactor}},spotLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new l.a,t.__dir.copy(t.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(t){var i=t.color,s=t.intensity;return[i[0]*s,i[1]*s,i[2]*s]}}},clone:function(){var t=c.a.prototype.clone.call(this);return t.range=this.range,t.umbraAngle=this.umbraAngle,t.penumbraAngle=this.penumbraAngle,t.falloffFactor=this.falloffFactor,t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}});g.a=e},function(_,g,u){var c=u(33),l=function(i,s,a,o){i=i||0,s=s||0,a=a||0,o=o||0,this.array=c.a.fromValues(i,s,a,o),this._dirty=!0};l.prototype={constructor:l,add:function(i){return c.a.add(this.array,this.array,i.array),this._dirty=!0,this},set:function(i,s,a,o){return this.array[0]=i,this.array[1]=s,this.array[2]=a,this.array[3]=o,this._dirty=!0,this},setArray:function(i){return this.array[0]=i[0],this.array[1]=i[1],this.array[2]=i[2],this.array[3]=i[3],this._dirty=!0,this},clone:function(){return new l(this.x,this.y,this.z,this.w)},copy:function(i){return c.a.copy(this.array,i.array),this._dirty=!0,this},dist:function(i){return c.a.dist(this.array,i.array)},distance:function(i){return c.a.distance(this.array,i.array)},div:function(i){return c.a.div(this.array,this.array,i.array),this._dirty=!0,this},divide:function(i){return c.a.divide(this.array,this.array,i.array),this._dirty=!0,this},dot:function(i){return c.a.dot(this.array,i.array)},len:function(){return c.a.len(this.array)},length:function(){return c.a.length(this.array)},lerp:function(i,s,a){return c.a.lerp(this.array,i.array,s.array,a),this._dirty=!0,this},min:function(i){return c.a.min(this.array,this.array,i.array),this._dirty=!0,this},max:function(i){return c.a.max(this.array,this.array,i.array),this._dirty=!0,this},mul:function(i){return c.a.mul(this.array,this.array,i.array),this._dirty=!0,this},multiply:function(i){return c.a.multiply(this.array,this.array,i.array),this._dirty=!0,this},negate:function(){return c.a.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return c.a.normalize(this.array,this.array),this._dirty=!0,this},random:function(i){return c.a.random(this.array,i),this._dirty=!0,this},scale:function(i){return c.a.scale(this.array,this.array,i),this._dirty=!0,this},scaleAndAdd:function(i,s){return c.a.scaleAndAdd(this.array,this.array,i.array,s),this._dirty=!0,this},sqrDist:function(i){return c.a.sqrDist(this.array,i.array)},squaredDistance:function(i){return c.a.squaredDistance(this.array,i.array)},sqrLen:function(){return c.a.sqrLen(this.array)},squaredLength:function(){return c.a.squaredLength(this.array)},sub:function(i){return c.a.sub(this.array,this.array,i.array),this._dirty=!0,this},subtract:function(i){return c.a.subtract(this.array,this.array,i.array),this._dirty=!0,this},transformMat4:function(i){return c.a.transformMat4(this.array,this.array,i.array),this._dirty=!0,this},transformQuat:function(i){return c.a.transformQuat(this.array,this.array,i.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var e=Object.defineProperty;if(e){var t=l.prototype;e(t,"x",{get:function(){return this.array[0]},set:function(i){this.array[0]=i,this._dirty=!0}}),e(t,"y",{get:function(){return this.array[1]},set:function(i){this.array[1]=i,this._dirty=!0}}),e(t,"z",{get:function(){return this.array[2]},set:function(i){this.array[2]=i,this._dirty=!0}}),e(t,"w",{get:function(){return this.array[3]},set:function(i){this.array[3]=i,this._dirty=!0}})}l.add=function(i,s,a){return c.a.add(i.array,s.array,a.array),i._dirty=!0,i},l.set=function(i,s,a,o,r){c.a.set(i.array,s,a,o,r),i._dirty=!0},l.copy=function(i,s){return c.a.copy(i.array,s.array),i._dirty=!0,i},l.distance=l.dist=function(i,s){return c.a.distance(i.array,s.array)},l.divide=l.div=function(i,s,a){return c.a.divide(i.array,s.array,a.array),i._dirty=!0,i},l.dot=function(i,s){return c.a.dot(i.array,s.array)},l.len=function(i){return c.a.length(i.array)},l.lerp=function(i,s,a,o){return c.a.lerp(i.array,s.array,a.array,o),i._dirty=!0,i},l.min=function(i,s,a){return c.a.min(i.array,s.array,a.array),i._dirty=!0,i},l.max=function(i,s,a){return c.a.max(i.array,s.array,a.array),i._dirty=!0,i},l.multiply=l.mul=function(i,s,a){return c.a.multiply(i.array,s.array,a.array),i._dirty=!0,i},l.negate=function(i,s){return c.a.negate(i.array,s.array),i._dirty=!0,i},l.normalize=function(i,s){return c.a.normalize(i.array,s.array),i._dirty=!0,i},l.random=function(i,s){return c.a.random(i.array,s),i._dirty=!0,i},l.scale=function(i,s,a){return c.a.scale(i.array,s.array,a),i._dirty=!0,i},l.scaleAndAdd=function(i,s,a,o){return c.a.scaleAndAdd(i.array,s.array,a.array,o),i._dirty=!0,i},l.squaredDistance=l.sqrDist=function(i,s){return c.a.sqrDist(i.array,s.array)},l.squaredLength=l.sqrLen=function(i){return c.a.sqrLen(i.array)},l.subtract=l.sub=function(i,s,a){return c.a.subtract(i.array,s.array,a.array),i._dirty=!0,i},l.transformMat4=function(i,s,a){return c.a.transformMat4(i.array,s.array,a.array),i._dirty=!0,i},l.transformQuat=function(i,s,a){return c.a.transformQuat(i.array,s.array,a.array),i._dirty=!0,i},g.a=l},function(_,g,u){var c=u(78),l=function(){this.array=c.a.create(),this._dirty=!0};l.prototype={constructor:l,setArray:function(e){for(var t=0;t<this.array.length;t++)this.array[t]=e[t];return this._dirty=!0,this},clone:function(){return new l().copy(this)},copy:function(e){return c.a.copy(this.array,e.array),this._dirty=!0,this},adjoint:function(){return c.a.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return c.a.determinant(this.array)},identity:function(){return c.a.identity(this.array),this._dirty=!0,this},invert:function(){return c.a.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return c.a.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return c.a.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return c.a.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return c.a.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return c.a.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return c.a.scale(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return c.a.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},l.adjoint=function(e,t){return c.a.adjoint(e.array,t.array),e._dirty=!0,e},l.copy=function(e,t){return c.a.copy(e.array,t.array),e._dirty=!0,e},l.determinant=function(e){return c.a.determinant(e.array)},l.identity=function(e){return c.a.identity(e.array),e._dirty=!0,e},l.invert=function(e,t){return c.a.invert(e.array,t.array),e._dirty=!0,e},l.multiply=l.mul=function(e,t,i){return c.a.mul(e.array,t.array,i.array),e._dirty=!0,e},l.rotate=function(e,t,i){return c.a.rotate(e.array,t.array,i),e._dirty=!0,e},l.scale=function(e,t,i){return c.a.scale(e.array,t.array,i.array),e._dirty=!0,e},l.transpose=function(e,t){return c.a.transpose(e.array,t.array),e._dirty=!0,e},g.a=l},function(_,g,u){var c=u(79),l=function(){this.array=c.a.create(),this._dirty=!0};l.prototype={constructor:l,setArray:function(e){for(var t=0;t<this.array.length;t++)this.array[t]=e[t];return this._dirty=!0,this},clone:function(){return new l().copy(this)},copy:function(e){return c.a.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return c.a.determinant(this.array)},identity:function(){return c.a.identity(this.array),this._dirty=!0,this},invert:function(){return c.a.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return c.a.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return c.a.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return c.a.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return c.a.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return c.a.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return c.a.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return c.a.translate(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},l.copy=function(e,t){return c.a.copy(e.array,t.array),e._dirty=!0,e},l.determinant=function(e){return c.a.determinant(e.array)},l.identity=function(e){return c.a.identity(e.array),e._dirty=!0,e},l.invert=function(e,t){return c.a.invert(e.array,t.array),e._dirty=!0,e},l.multiply=l.mul=function(e,t,i){return c.a.mul(e.array,t.array,i.array),e._dirty=!0,e},l.rotate=function(e,t,i){return c.a.rotate(e.array,t.array,i),e._dirty=!0,e},l.scale=function(e,t,i){return c.a.scale(e.array,t.array,i.array),e._dirty=!0,e},l.translate=function(e,t,i){return c.a.translate(e.array,t.array,i.array),e._dirty=!0,e},g.a=l},function(_,g,u){var c=u(34),l=function(){this.array=c.a.create(),this._dirty=!0};l.prototype={constructor:l,setArray:function(e){for(var t=0;t<this.array.length;t++)this.array[t]=e[t];return this._dirty=!0,this},adjoint:function(){return c.a.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new l().copy(this)},copy:function(e){return c.a.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return c.a.determinant(this.array)},fromMat2d:function(e){return c.a.fromMat2d(this.array,e.array),this._dirty=!0,this},fromMat4:function(e){return c.a.fromMat4(this.array,e.array),this._dirty=!0,this},fromQuat:function(e){return c.a.fromQuat(this.array,e.array),this._dirty=!0,this},identity:function(){return c.a.identity(this.array),this._dirty=!0,this},invert:function(){return c.a.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return c.a.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return c.a.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return c.a.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return c.a.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return c.a.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return c.a.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return c.a.translate(this.array,this.array,e.array),this._dirty=!0,this},normalFromMat4:function(e){return c.a.normalFromMat4(this.array,e.array),this._dirty=!0,this},transpose:function(){return c.a.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},l.adjoint=function(e,t){return c.a.adjoint(e.array,t.array),e._dirty=!0,e},l.copy=function(e,t){return c.a.copy(e.array,t.array),e._dirty=!0,e},l.determinant=function(e){return c.a.determinant(e.array)},l.identity=function(e){return c.a.identity(e.array),e._dirty=!0,e},l.invert=function(e,t){return c.a.invert(e.array,t.array),e},l.multiply=l.mul=function(e,t,i){return c.a.mul(e.array,t.array,i.array),e._dirty=!0,e},l.fromMat2d=function(e,t){return c.a.fromMat2d(e.array,t.array),e._dirty=!0,e},l.fromMat4=function(e,t){return c.a.fromMat4(e.array,t.array),e._dirty=!0,e},l.fromQuat=function(e,t){return c.a.fromQuat(e.array,t.array),e._dirty=!0,e},l.normalFromMat4=function(e,t){return c.a.normalFromMat4(e.array,t.array),e._dirty=!0,e},l.rotate=function(e,t,i){return c.a.rotate(e.array,t.array,i),e._dirty=!0,e},l.scale=function(e,t,i){return c.a.scale(e.array,t.array,i.array),e._dirty=!0,e},l.transpose=function(e,t){return c.a.transpose(e.array,t.array),e._dirty=!0,e},l.translate=function(e,t,i){return c.a.translate(e.array,t.array,i.array),e._dirty=!0,e},g.a=l},function(_,g,u){var c=u(141),l=u.n(c),e={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(t,i){var s;if(this._animators=this._animators||[],t){for(var a=t.split("."),o=this,r=0,n=a.length;r<n;r++)o&&(o=o[a[r]]);o&&(s=o)}else s=this;if(s==null)throw new Error("Target "+t+" not exists");var h=this._animators,p=new l.a(s,i),d=this;return p.during(function(){d.__zr&&d.__zr.refresh()}).done(function(){var f=h.indexOf(p);f>=0&&h.splice(f,1)}),h.push(p),this.__zr&&this.__zr.animation.addAnimator(p),p},stopAnimation:function(t){this._animators=this._animators||[];for(var i=this._animators,s=i.length,a=0;a<s;a++)i[a].stop(t);return i.length=0,this},addAnimatorsToZr:function(t){if(this._animators)for(var i=0;i<this._animators.length;i++)t.animation.addAnimator(this._animators[i])},removeAnimatorsFromZr:function(t){if(this._animators)for(var i=0;i<this._animators.length;i++)t.animation.removeAnimator(this._animators[i])}};g.a=e},function(_,g,u){var c=u(142),l=u(144),e=u(80).isArrayLike,t=Array.prototype.slice;function i(w,M){return w[M]}function s(w,M,C){w[M]=C}function a(w,M,C){return(M-w)*C+w}function o(w,M,C){return C>.5?M:w}function r(w,M,C,A,P){var b=w.length;if(P==1)for(var N=0;N<b;N++)A[N]=a(w[N],M[N],C);else{var B=b&&w[0].length;for(N=0;N<b;N++)for(var z=0;z<B;z++)A[N][z]=a(w[N][z],M[N][z],C)}}function n(w,M,C){var A=w.length,P=M.length;if(A!==P)if(A>P)w.length=P;else for(var b=A;b<P;b++)w.push(C===1?M[b]:t.call(M[b]));var N=w[0]&&w[0].length;for(b=0;b<w.length;b++)if(C===1)isNaN(w[b])&&(w[b]=M[b]);else for(var B=0;B<N;B++)isNaN(w[b][B])&&(w[b][B]=M[b][B])}function h(w,M,C){if(w===M)return!0;var A=w.length;if(A!==M.length)return!1;if(C===1){for(var P=0;P<A;P++)if(w[P]!==M[P])return!1}else{var b=w[0].length;for(P=0;P<A;P++)for(var N=0;N<b;N++)if(w[P][N]!==M[P][N])return!1}return!0}function p(w,M,C,A,P,b,N,B,z){var F=w.length;if(z==1)for(var V=0;V<F;V++)B[V]=d(w[V],M[V],C[V],A[V],P,b,N);else{var H=w[0].length;for(V=0;V<F;V++)for(var U=0;U<H;U++)B[V][U]=d(w[V][U],M[V][U],C[V][U],A[V][U],P,b,N)}}function d(w,M,C,A,P,b,N){var B=.5*(C-w),z=.5*(A-M);return(2*(M-C)+B+z)*N+(-3*(M-C)-2*B-z)*b+B*P+M}function f(w){if(e(w)){var M=w.length;if(e(w[0])){for(var C=[],A=0;A<M;A++)C.push(t.call(w[A]));return C}return t.call(w)}return w}function v(w){return w[0]=Math.floor(w[0]),w[1]=Math.floor(w[1]),w[2]=Math.floor(w[2]),"rgba("+w.join(",")+")"}function m(w,M,C,A,P,b){var N=w._getter,B=w._setter,z=M==="spline",F=A.length;if(F){var V,H=A[0].value,U=e(H),j=!1,X=!1,Y=U?function(bt){var mt=bt[bt.length-1].value;return e(mt&&mt[0])?2:1}(A):0;A.sort(function(bt,mt){return bt.time-mt.time}),V=A[F-1].time;for(var J=[],K=[],Q=A[0].value,Z=!0,q=0;q<F;q++){J.push(A[q].time/V);var tt=A[q].value;if(U&&h(tt,Q,Y)||!U&&tt===Q||(Z=!1),Q=tt,typeof tt=="string"){var $=l.parse(tt);$?(tt=$,j=!0):X=!0}K.push(tt)}if(b||!Z){var rt=K[F-1];for(q=0;q<F-1;q++)U?n(K[q],rt,Y):!isNaN(K[q])||isNaN(rt)||X||j||(K[q]=rt);U&&n(N(w._target,P),rt,Y);var et,it,ot,st,at,vt=0,yt=0;if(j)var gt=[0,0,0,0];var pt=new c({target:w._target,life:V,loop:w._loop,delay:w._delay,onframe:function(bt,mt){var nt;if(mt<0)nt=0;else if(mt<yt){for(nt=Math.min(vt+1,F-1);nt>=0&&!(J[nt]<=mt);nt--);nt=Math.min(nt,F-2)}else{for(nt=vt;nt<F&&!(J[nt]>mt);nt++);nt=Math.min(nt-1,F-2)}vt=nt,yt=mt;var lt=J[nt+1]-J[nt];if(lt!==0)if(et=(mt-J[nt])/lt,z)if(ot=K[nt],it=K[nt===0?nt:nt-1],st=K[nt>F-2?F-1:nt+1],at=K[nt>F-3?F-1:nt+2],U)p(it,ot,st,at,et,et*et,et*et*et,N(bt,P),Y);else{if(j)ct=p(it,ot,st,at,et,et*et,et*et*et,gt,1),ct=v(gt);else{if(X)return o(ot,st,et);ct=d(it,ot,st,at,et,et*et,et*et*et)}B(bt,P,ct)}else if(U)r(K[nt],K[nt+1],et,N(bt,P),Y);else{var ct;if(j)r(K[nt],K[nt+1],et,gt,1),ct=v(gt);else{if(X)return o(K[nt],K[nt+1],et);ct=a(K[nt],K[nt+1],et)}B(bt,P,ct)}},ondestroy:C});return M&&M!=="spline"&&(pt.easing=M),pt}}}var y=function(w,M,C,A){this._tracks={},this._target=w,this._loop=M||!1,this._getter=C||i,this._setter=A||s,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};y.prototype={when:function(w,M){var C=this._tracks;for(var A in M)if(M.hasOwnProperty(A)){if(!C[A]){C[A]=[];var P=this._getter(this._target,A);if(P==null)continue;w!==0&&C[A].push({time:0,value:f(P)})}C[A].push({time:w,value:M[A]})}return this},during:function(w){return this._onframeList.push(w),this},pause:function(){for(var w=0;w<this._clipList.length;w++)this._clipList[w].pause();this._paused=!0},resume:function(){for(var w=0;w<this._clipList.length;w++)this._clipList[w].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var w=this._doneList,M=w.length,C=0;C<M;C++)w[C].call(this)},start:function(w,M){var C,A=this,P=0,b=function(){--P||A._doneCallback()};for(var N in this._tracks)if(this._tracks.hasOwnProperty(N)){var B=m(this,w,b,this._tracks[N],N,M);B&&(this._clipList.push(B),P++,this.animation&&this.animation.addClip(B),C=B)}if(C){var z=C.onframe;C.onframe=function(F,V){z(F,V);for(var H=0;H<A._onframeList.length;H++)A._onframeList[H](F,V)}}return P||this._doneCallback(),this},stop:function(w){for(var M=this._clipList,C=this.animation,A=0;A<M.length;A++){var P=M[A];w&&P.onframe(this._target,1),C&&C.removeClip(P)}M.length=0},delay:function(w){return this._delay=w,this},done:function(w){return w&&this._doneList.push(w),this},getClips:function(){return this._clipList}};var x=y;_.exports=x},function(_,g,u){var c=u(143);function l(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=t.loop!=null&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}l.prototype={constructor:l,step:function(t,i){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=i;else{var s=(t-this._startTime-this._pausedTime)/this._life;if(!(s<0)){s=Math.min(s,1);var a=this.easing,o=typeof a=="string"?c[a]:a,r=typeof o=="function"?o(s):s;return this.fire("frame",r),s==1?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var i=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-i+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,i){this[t="on"+t]&&this[t](this._target,i)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var e=l;_.exports=e},function(_,g){var u={linear:function(l){return l},quadraticIn:function(l){return l*l},quadraticOut:function(l){return l*(2-l)},quadraticInOut:function(l){return(l*=2)<1?.5*l*l:-.5*(--l*(l-2)-1)},cubicIn:function(l){return l*l*l},cubicOut:function(l){return--l*l*l+1},cubicInOut:function(l){return(l*=2)<1?.5*l*l*l:.5*((l-=2)*l*l+2)},quarticIn:function(l){return l*l*l*l},quarticOut:function(l){return 1- --l*l*l*l},quarticInOut:function(l){return(l*=2)<1?.5*l*l*l*l:-.5*((l-=2)*l*l*l-2)},quinticIn:function(l){return l*l*l*l*l},quinticOut:function(l){return--l*l*l*l*l+1},quinticInOut:function(l){return(l*=2)<1?.5*l*l*l*l*l:.5*((l-=2)*l*l*l*l+2)},sinusoidalIn:function(l){return 1-Math.cos(l*Math.PI/2)},sinusoidalOut:function(l){return Math.sin(l*Math.PI/2)},sinusoidalInOut:function(l){return .5*(1-Math.cos(Math.PI*l))},exponentialIn:function(l){return l===0?0:Math.pow(1024,l-1)},exponentialOut:function(l){return l===1?1:1-Math.pow(2,-10*l)},exponentialInOut:function(l){return l===0?0:l===1?1:(l*=2)<1?.5*Math.pow(1024,l-1):.5*(2-Math.pow(2,-10*(l-1)))},circularIn:function(l){return 1-Math.sqrt(1-l*l)},circularOut:function(l){return Math.sqrt(1- --l*l)},circularInOut:function(l){return(l*=2)<1?-.5*(Math.sqrt(1-l*l)-1):.5*(Math.sqrt(1-(l-=2)*l)+1)},elasticIn:function(l){var e,t=.1;return l===0?0:l===1?1:(!t||t<1?(t=1,e=.1):e=.4*Math.asin(1/t)/(2*Math.PI),-t*Math.pow(2,10*(l-=1))*Math.sin((l-e)*(2*Math.PI)/.4))},elasticOut:function(l){var e,t=.1;return l===0?0:l===1?1:(!t||t<1?(t=1,e=.1):e=.4*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*l)*Math.sin((l-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(l){var e,t=.1;return l===0?0:l===1?1:(!t||t<1?(t=1,e=.1):e=.4*Math.asin(1/t)/(2*Math.PI),(l*=2)<1?t*Math.pow(2,10*(l-=1))*Math.sin((l-e)*(2*Math.PI)/.4)*-.5:t*Math.pow(2,-10*(l-=1))*Math.sin((l-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(l){var e=1.70158;return l*l*((e+1)*l-e)},backOut:function(l){var e=1.70158;return--l*l*((e+1)*l+e)+1},backInOut:function(l){var e=2.5949095;return(l*=2)<1?l*l*((e+1)*l-e)*.5:.5*((l-=2)*l*((e+1)*l+e)+2)},bounceIn:function(l){return 1-u.bounceOut(1-l)},bounceOut:function(l){return l<.36363636363636365?7.5625*l*l:l<.7272727272727273?7.5625*(l-=.5454545454545454)*l+.75:l<.9090909090909091?7.5625*(l-=.8181818181818182)*l+.9375:7.5625*(l-=.9545454545454546)*l+.984375},bounceInOut:function(l){return l<.5?.5*u.bounceIn(2*l):.5*u.bounceOut(2*l-1)+.5}},c=u;_.exports=c},function(_,g,u){var c=u(74),l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function e(C){return(C=Math.round(C))<0?0:C>255?255:C}function t(C){return C<0?0:C>1?1:C}function i(C){return C.length&&C.charAt(C.length-1)==="%"?e(parseFloat(C)/100*255):e(parseInt(C,10))}function s(C){return C.length&&C.charAt(C.length-1)==="%"?t(parseFloat(C)/100):t(parseFloat(C))}function a(C,A,P){return P<0?P+=1:P>1&&(P-=1),6*P<1?C+(A-C)*P*6:2*P<1?A:3*P<2?C+(A-C)*(.6666666666666666-P)*6:C}function o(C,A,P){return C+(A-C)*P}function r(C,A,P,b,N){return C[0]=A,C[1]=P,C[2]=b,C[3]=N,C}function n(C,A){return C[0]=A[0],C[1]=A[1],C[2]=A[2],C[3]=A[3],C}var h=new c(20),p=null;function d(C,A){p&&n(p,A),p=h.put(C,p||A.slice())}function f(C,A){if(C){A=A||[];var P=h.get(C);if(P)return n(A,P);var b,N=(C+="").replace(/ /g,"").toLowerCase();if(N in l)return n(A,l[N]),d(C,A),A;if(N.charAt(0)==="#")return N.length===4?(b=parseInt(N.substr(1),16))>=0&&b<=4095?(r(A,(3840&b)>>4|(3840&b)>>8,240&b|(240&b)>>4,15&b|(15&b)<<4,1),d(C,A),A):void r(A,0,0,0,1):N.length===7?(b=parseInt(N.substr(1),16))>=0&&b<=16777215?(r(A,(16711680&b)>>16,(65280&b)>>8,255&b,1),d(C,A),A):void r(A,0,0,0,1):void 0;var B=N.indexOf("("),z=N.indexOf(")");if(B!==-1&&z+1===N.length){var F=N.substr(0,B),V=N.substr(B+1,z-(B+1)).split(","),H=1;switch(F){case"rgba":if(V.length!==4)return void r(A,0,0,0,1);H=s(V.pop());case"rgb":return V.length!==3?void r(A,0,0,0,1):(r(A,i(V[0]),i(V[1]),i(V[2]),H),d(C,A),A);case"hsla":return V.length!==4?void r(A,0,0,0,1):(V[3]=s(V[3]),v(V,A),d(C,A),A);case"hsl":return V.length!==3?void r(A,0,0,0,1):(v(V,A),d(C,A),A);default:return}}r(A,0,0,0,1)}}function v(C,A){var P=(parseFloat(C[0])%360+360)%360/360,b=s(C[1]),N=s(C[2]),B=N<=.5?N*(b+1):N+b-N*b,z=2*N-B;return r(A=A||[],e(255*a(z,B,P+.3333333333333333)),e(255*a(z,B,P)),e(255*a(z,B,P-.3333333333333333)),1),C.length===4&&(A[3]=C[3]),A}function m(C,A,P){if(A&&A.length&&C>=0&&C<=1){P=P||[];var b=C*(A.length-1),N=Math.floor(b),B=Math.ceil(b),z=A[N],F=A[B],V=b-N;return P[0]=e(o(z[0],F[0],V)),P[1]=e(o(z[1],F[1],V)),P[2]=e(o(z[2],F[2],V)),P[3]=t(o(z[3],F[3],V)),P}}var y=m;function x(C,A,P){if(A&&A.length&&C>=0&&C<=1){var b=C*(A.length-1),N=Math.floor(b),B=Math.ceil(b),z=f(A[N]),F=f(A[B]),V=b-N,H=M([e(o(z[0],F[0],V)),e(o(z[1],F[1],V)),e(o(z[2],F[2],V)),t(o(z[3],F[3],V))],"rgba");return P?{color:H,leftIndex:N,rightIndex:B,value:b}:H}}var w=x;function M(C,A){if(C&&C.length){var P=C[0]+","+C[1]+","+C[2];return A!=="rgba"&&A!=="hsva"&&A!=="hsla"||(P+=","+C[3]),A+"("+P+")"}}g.parse=f,g.lift=function(C,A){var P=f(C);if(P){for(var b=0;b<3;b++)P[b]=A<0?P[b]*(1-A)|0:(255-P[b])*A+P[b]|0,P[b]>255?P[b]=255:C[b]<0&&(P[b]=0);return M(P,P.length===4?"rgba":"rgb")}},g.toHex=function(C){var A=f(C);if(A)return(16777216+(A[0]<<16)+(A[1]<<8)+ +A[2]).toString(16).slice(1)},g.fastLerp=m,g.fastMapToColor=y,g.lerp=x,g.mapToColor=w,g.modifyHSL=function(C,A,P,b){if(C=f(C))return C=function(B){if(B){var z,F,V=B[0]/255,H=B[1]/255,U=B[2]/255,j=Math.min(V,H,U),X=Math.max(V,H,U),Y=X-j,J=(X+j)/2;if(Y===0)z=0,F=0;else{F=J<.5?Y/(X+j):Y/(2-X-j);var K=((X-V)/6+Y/2)/Y,Q=((X-H)/6+Y/2)/Y,Z=((X-U)/6+Y/2)/Y;V===X?z=Z-Q:H===X?z=.3333333333333333+K-Z:U===X&&(z=.6666666666666666+Q-K),z<0&&(z+=1),z>1&&(z-=1)}var q=[360*z,F,J];return B[3]!=null&&q.push(B[3]),q}}(C),A!=null&&(C[0]=(N=A,(N=Math.round(N))<0?0:N>360?360:N)),P!=null&&(C[1]=s(P)),b!=null&&(C[2]=s(b)),M(v(C),"rgba");var N},g.modifyAlpha=function(C,A){if((C=f(C))&&A!=null)return C[3]=t(A),M(C,"rgba")},g.stringify=M},function(_,g,u){g.a=`
@export clay.util.rand
highp float rand(vec2 uv) {
 const highp float a = 12.9898, b = 78.233, c = 43758.5453;
 highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);
 return fract(sin(sn) * c);
}
@end
@export clay.util.calculate_attenuation
uniform float attenuationFactor : 5.0;
float lightAttenuation(float dist, float range)
{
 float attenuation = 1.0;
 attenuation = dist*dist/(range*range+1.0);
 float att_s = attenuationFactor;
 attenuation = 1.0/(attenuation*att_s+1.0);
 att_s = 1.0/(att_s+1.0);
 attenuation = attenuation - att_s;
 attenuation /= 1.0 - att_s;
 return clamp(attenuation, 0.0, 1.0);
}
@end
@export clay.util.edge_factor
#ifdef SUPPORT_STANDARD_DERIVATIVES
float edgeFactor(float width)
{
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#else
float edgeFactor(float width)
{
 return 1.0;
}
#endif
@end
@export clay.util.encode_float
vec4 encodeFloat(const in float depth)
{
 const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
 const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
 vec4 res = fract(depth * bitShifts);
 res -= res.xxyz * bit_mask;
 return res;
}
@end
@export clay.util.decode_float
float decodeFloat(const in vec4 color)
{
 const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);
 return dot(color, bitShifts);
}
@end
@export clay.util.float
@import clay.util.encode_float
@import clay.util.decode_float
@end
@export clay.util.rgbm_decode
vec3 RGBMDecode(vec4 rgbm, float range) {
 return range * rgbm.rgb * rgbm.a;
}
@end
@export clay.util.rgbm_encode
vec4 RGBMEncode(vec3 color, float range) {
 if (dot(color, color) == 0.0) {
 return vec4(0.0);
 }
 vec4 rgbm;
 color /= range;
 rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);
 rgbm.a = ceil(rgbm.a * 255.0) / 255.0;
 rgbm.rgb = color / rgbm.a;
 return rgbm;
}
@end
@export clay.util.rgbm
@import clay.util.rgbm_decode
@import clay.util.rgbm_encode
vec4 decodeHDR(vec4 color)
{
#if defined(RGBM_DECODE) || defined(RGBM)
 return vec4(RGBMDecode(color, 8.12), 1.0);
#else
 return color;
#endif
}
vec4 encodeHDR(vec4 color)
{
#if defined(RGBM_ENCODE) || defined(RGBM)
 return RGBMEncode(color.xyz, 8.12);
#else
 return color;
#endif
}
@end
@export clay.util.srgb
vec4 sRGBToLinear(in vec4 value) {
 return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);
}
vec4 linearTosRGB(in vec4 value) {
 return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);
}
@end
@export clay.chunk.skinning_header
#ifdef SKINNING
attribute vec3 weight : WEIGHT;
attribute vec4 joint : JOINT;
#ifdef USE_SKIN_MATRICES_TEXTURE
uniform sampler2D skinMatricesTexture : ignore;
uniform float skinMatricesTextureSize: ignore;
mat4 getSkinMatrix(sampler2D tex, float idx) {
 float j = idx * 4.0;
 float x = mod(j, skinMatricesTextureSize);
 float y = floor(j / skinMatricesTextureSize) + 0.5;
 vec2 scale = vec2(skinMatricesTextureSize);
 return mat4(
 texture2D(tex, vec2(x + 0.5, y) / scale),
 texture2D(tex, vec2(x + 1.5, y) / scale),
 texture2D(tex, vec2(x + 2.5, y) / scale),
 texture2D(tex, vec2(x + 3.5, y) / scale)
 );
}
mat4 getSkinMatrix(float idx) {
 return getSkinMatrix(skinMatricesTexture, idx);
}
#else
uniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;
mat4 getSkinMatrix(float idx) {
 return skinMatrix[int(idx)];
}
#endif
#endif
@end
@export clay.chunk.skin_matrix
mat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;
if (weight.y > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.y) * weight.y;
}
if (weight.z > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.z) * weight.z;
}
float weightW = 1.0-weight.x-weight.y-weight.z;
if (weightW > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.w) * weightW;
}
@end
@export clay.chunk.instancing_header
#ifdef INSTANCING
attribute vec4 instanceMat1;
attribute vec4 instanceMat2;
attribute vec4 instanceMat3;
#endif
@end
@export clay.chunk.instancing_matrix
mat4 instanceMat = mat4(
 vec4(instanceMat1.xyz, 0.0),
 vec4(instanceMat2.xyz, 0.0),
 vec4(instanceMat3.xyz, 0.0),
 vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)
);
@end
@export clay.util.parallax_correct
vec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {
 vec3 first = (boxMax - pos) / dir;
 vec3 second = (boxMin - pos) / dir;
 vec3 further = max(first, second);
 float dist = min(further.x, min(further.y, further.z));
 vec3 fixedPos = pos + dir * dist;
 vec3 boxCenter = (boxMax + boxMin) * 0.5;
 return normalize(fixedPos - boxCenter);
}
@end
@export clay.util.clamp_sample
vec4 clampSample(const in sampler2D texture, const in vec2 coord)
{
#ifdef STEREO
 float eye = step(0.5, coord.x) * 0.5;
 vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));
#else
 vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));
#endif
 return texture2D(texture, coordClamped);
}
@end
@export clay.util.ACES
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
@end
@export clay.util.logdepth_vertex_header
#ifdef LOG_DEPTH
#ifdef SUPPORT_FRAG_DEPTH
varying float v_FragDepth;
#else
uniform float logDepthBufFC: LOG_DEPTH_BUFFER_FC;
#endif
#endif
@end
@export clay.util.logdepth_vertex_main
#ifdef LOG_DEPTH
 #ifdef SUPPORT_FRAG_DEPTH
 v_FragDepth = 1.0 + gl_Position.w;
 #else
 gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC - 1.0;
 gl_Position.z *= gl_Position.w;
 #endif
#endif
@end
@export clay.util.logdepth_fragment_header
#if defined(LOG_DEPTH) && defined(SUPPORT_FRAG_DEPTH)
varying float v_FragDepth;
uniform float logDepthBufFC : LOG_DEPTH_BUFFER_FC;
#endif
@end
@export clay.util.logdepth_fragment_main
#if defined(LOG_DEPTH) && defined(SUPPORT_FRAG_DEPTH)
 gl_FragDepthEXT = log2(v_FragDepth) * logDepthBufFC * 0.5;
#endif
@end
`},function(_,g,u){g.a=`
@export ecgl.common.transformUniforms
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
uniform mat4 world : WORLD;
@end

@export ecgl.common.attributes
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 normal : NORMAL;
@end

@export ecgl.common.uv.header
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
uniform vec2 detailUvRepeat : [1.0, 1.0];
uniform vec2 detailUvOffset : [0.0, 0.0];

varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end

@export ecgl.common.uv.main
v_Texcoord = texcoord * uvRepeat + uvOffset;
v_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;
@end

@export ecgl.common.uv.fragmentHeader
varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end


@export ecgl.common.albedo.main

 vec4 albedoTexel = vec4(1.0);
#ifdef DIFFUSEMAP_ENABLED
 albedoTexel = texture2D(diffuseMap, v_Texcoord);
 #ifdef SRGB_DECODE
 albedoTexel = sRGBToLinear(albedoTexel);
 #endif
#endif

#ifdef DETAILMAP_ENABLED
 vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);
 #ifdef SRGB_DECODE
 detailTexel = sRGBToLinear(detailTexel);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);
 albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;
#endif

@end

@export ecgl.common.wireframe.vertexHeader

#ifdef WIREFRAME_QUAD
attribute vec4 barycentric;
varying vec4 v_Barycentric;
#elif defined(WIREFRAME_TRIANGLE)
attribute vec3 barycentric;
varying vec3 v_Barycentric;
#endif

@end

@export ecgl.common.wireframe.vertexMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 v_Barycentric = barycentric;
#endif

@end


@export ecgl.common.wireframe.fragmentHeader

uniform float wireframeLineWidth : 1;
uniform vec4 wireframeLineColor: [0, 0, 0, 0.5];

#ifdef WIREFRAME_QUAD
varying vec4 v_Barycentric;
float edgeFactor () {
 vec4 d = fwidth(v_Barycentric);
 vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(min(a4.x, a4.y), a4.z), a4.w);
}
#elif defined(WIREFRAME_TRIANGLE)
varying vec3 v_Barycentric;
float edgeFactor () {
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#endif

@end


@export ecgl.common.wireframe.fragmentMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 if (wireframeLineWidth > 0.) {
 vec4 lineColor = wireframeLineColor;
#ifdef SRGB_DECODE
 lineColor = sRGBToLinear(lineColor);
#endif

 gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);
 }
#endif
@end




@export ecgl.common.bumpMap.header

#ifdef BUMPMAP_ENABLED
uniform sampler2D bumpMap;
uniform float bumpScale : 1.0;


vec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)
{
 vec2 dSTdx = dFdx(v_Texcoord);
 vec2 dSTdy = dFdy(v_Texcoord);

 float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;
 float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;
 float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;

 vec3 vSigmaX = dFdx(surfPos);
 vec3 vSigmaY = dFdy(surfPos);
 vec3 vN = surfNormal;

 vec3 R1 = cross(vSigmaY, vN);
 vec3 R2 = cross(vN, vSigmaX);

 float fDet = dot(vSigmaX, R1);

 vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);
 return normalize(abs(fDet) * baseNormal - vGrad);

}
#endif

@end

@export ecgl.common.normalMap.vertexHeader

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.vertexMain

#ifdef NORMALMAP_ENABLED
 if (dot(tangent, tangent) > 0.0) {
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
 }
#endif

@end


@export ecgl.common.normalMap.fragmentHeader

#ifdef NORMALMAP_ENABLED
uniform sampler2D normalMap;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.fragmentMain
#ifdef NORMALMAP_ENABLED
 if (dot(v_Tangent, v_Tangent) > 0.0) {
 vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;
 if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;
 mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);
 N = normalize(tbn * N);
 }
 }
#endif
@end



@export ecgl.common.vertexAnimation.header

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevNormal;
uniform float percent;
#endif

@end

@export ecgl.common.vertexAnimation.main

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 vec3 norm = mix(prevNormal, normal, percent);
#else
 vec3 pos = position;
 vec3 norm = normal;
#endif

@end


@export ecgl.common.ssaoMap.header
#ifdef SSAOMAP_ENABLED
uniform sampler2D ssaoMap;
uniform vec4 viewport : VIEWPORT;
#endif
@end

@export ecgl.common.ssaoMap.main
 float ao = 1.0;
#ifdef SSAOMAP_ENABLED
 ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;
#endif
@end




@export ecgl.common.diffuseLayer.header

#if (LAYER_DIFFUSEMAP_COUNT > 0)
uniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];
uniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];
#endif

@end

@export ecgl.common.emissiveLayer.header

#if (LAYER_EMISSIVEMAP_COUNT > 0)
uniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];
uniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];
#endif

@end

@export ecgl.common.layers.header
@import ecgl.common.diffuseLayer.header
@import ecgl.common.emissiveLayer.header
@end

@export ecgl.common.diffuseLayer.main

#if (LAYER_DIFFUSEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{
 float intensity = layerDiffuseIntensity[_idx_];
 vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);
 albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;
 }}
#endif

@end

@export ecgl.common.emissiveLayer.main

#if (LAYER_EMISSIVEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)
 {{
 vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 float intensity = layerEmissionIntensity[_idx_];
 gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;
 }}
#endif

@end
`},function(_,g,u){g.a=`@export ecgl.color.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

@import ecgl.common.uv.header

attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 position: POSITION;

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

void main()
{
#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 @import ecgl.common.uv.main

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end

@export ecgl.color.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.layers.header

@import ecgl.common.uv.fragmentHeader

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain

}
@end`},function(_,g,u){g.a=`/**
 * http: */

@export ecgl.lambert.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header


@import ecgl.common.attributes

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif


@import ecgl.common.vertexAnimation.header


varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{
 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main


 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

 @import ecgl.common.wireframe.vertexMain
}

@end


@export ecgl.lambert.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 gl_FragColor *= sRGBToLinear(v_Color);
 #else
 gl_FragColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseColor = vec3(0.0, 0.0, 0.0);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 diffuseColor += ambientLightColor[i] * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 vec3 lightColor = directionalLightColor[i];

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor.rgb *= diffuseColor;

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`},function(_,g,u){g.a=`@export ecgl.realistic.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes


@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@import ecgl.common.vertexAnimation.header

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{

 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef NORMALMAP_ENABLED
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end



@export ecgl.realistic.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0
#define PI 3.14159265358979
#define ROUGHNESS_CHANEL 0
#define METALNESS_CHANEL 1

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;

uniform sampler2D detailMap;
uniform sampler2D metalnessMap;
uniform sampler2D roughnessMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform float metalness : 0.0;
uniform float roughness : 0.5;

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
@import clay.header.ambient_cubemap_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.normalMap.fragmentHeader

@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import clay.util.rgbm

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}

float D_Phong(float g, float ndh) {
 float a = pow(8192.0, g);
 return (a + 2.0) / 8.0 * pow(ndh, a);
}

void main()
{
 vec4 albedoColor = color;

 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);
#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 albedoColor *= sRGBToLinear(v_Color);
 #else
 albedoColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 albedoColor *= albedoTexel;

 float m = metalness;

#ifdef METALNESSMAP_ENABLED
 float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];
 m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 baseColor = albedoColor.rgb;
 albedoColor.rgb = baseColor * (1.0 - m);
 vec3 specFactor = mix(vec3(0.04), baseColor, m);

 float g = 1.0 - roughness;

#ifdef ROUGHNESSMAP_ENABLED
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 N = v_Normal;

#ifdef DOUBLE_SIDED
 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

@import ecgl.common.normalMap.fragmentMain

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseTerm = vec3(0.0);
 vec3 specularTerm = vec3(0.0);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 vec3 fresnelTerm = F_Schlick(ndv, specFactor);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;
 }}
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)
 {{
 vec3 L = -directionalLightDirection[_idx_];
 vec3 lc = directionalLightColor[_idx_];

 vec3 H = normalize(L + V);
 float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[_idx_];
 }
#endif

 vec3 li = lc * ndl * shadowContrib;

 diffuseTerm += li;
 specularTerm += li * fresnelTerm * D_Phong(g, ndh);
 }}
#endif


#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
 vec3 L = reflect(-V, N);
 L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);
 float rough2 = clamp(1.0 - g, 0.0, 1.0);
 float bias2 = rough2 * 5.0;
 vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;
 vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;
 vec3 envTexel2;
 for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)
 {{
 envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);
 specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;
 }}
#endif

 gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;
 gl_FragColor.a = albedoColor.a;

#ifdef SRGB_ENCODE
 gl_FragColor = linearTosRGB(gl_FragColor);
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`},function(_,g,u){g.a=`@export ecgl.hatching.vertex

@import ecgl.realistic.vertex

@end


@export ecgl.hatching.fragment

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform vec4 color : [0.0, 0.0, 0.0, 1.0];
uniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

uniform sampler2D hatch1;
uniform sampler2D hatch2;
uniform sampler2D hatch3;
uniform sampler2D hatch4;
uniform sampler2D hatch5;
uniform sampler2D hatch6;

float shade(in float tone) {
 vec4 c = vec4(1. ,1., 1., 1.);
 float step = 1. / 6.;
 vec2 uv = v_DetailTexcoord;
 if (tone <= step / 2.0) {
 c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);
 }
 else if (tone <= step) {
 c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);
 }
 if(tone > step && tone <= 2. * step){
 c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));
 }
 if(tone > 2. * step && tone <= 3. * step){
 c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));
 }
 if(tone > 3. * step && tone <= 4. * step){
 c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));
 }
 if(tone > 4. * step && tone <= 5. * step){
 c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));
 }
 if(tone > 5. * step){
 c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));
 }

 return c.r;
}

const vec3 w = vec3(0.2125, 0.7154, 0.0721);

void main()
{
#ifdef SRGB_DECODE
 vec4 inkColor = sRGBToLinear(color);
#else
 vec4 inkColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 inkColor *= sRGBToLinear(v_Color);
 #else
 inkColor *= v_Color;
 #endif
#endif

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float tone = 0.0;

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 tone += dot(ambientLightColor[i], w) * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 float lightTone = dot(directionalLightColor[i], w);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 tone += lightTone * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));
 }
@end
`},function(_,g,u){g.a=`@export ecgl.sm.depth.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;

void main(){

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 v_ViewPosition = worldViewProjection * vec4(pos, 1.0);
 gl_Position = v_ViewPosition;

 v_Texcoord = texcoord;

}
@end



@export ecgl.sm.depth.fragment

@import clay.sm.depth.fragment

@end`},function(_,g,u){var c=u(0),l=u.n(c),e=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function t(s,a){if(s&&s[a]&&(s[a].normal||s[a].emphasis)){var o=s[a].normal,r=s[a].emphasis;o&&(s[a]=o),r&&(s.emphasis=s.emphasis||{},s.emphasis[a]=r)}}function i(s){s&&(D(s,Array)||(s=[s]),l.a.util.each(s,function(a){if(a.axisLabel){var o=a.axisLabel;l.a.util.extend(o,o.textStyle),o.textStyle=null}}))}g.a=function(s){l.a.util.each(s.series,function(a){l.a.util.indexOf(e,a.type)>=0&&(function(o){t(o,"itemStyle"),t(o,"lineStyle"),t(o,"areaStyle"),t(o,"label")}(a),a.coordinateSystem==="mapbox"&&(a.coordinateSystem="mapbox3D",s.mapbox3D=s.mapbox))}),i(s.xAxis3D),i(s.yAxis3D),i(s.zAxis3D),i(s.grid3D),t(s.geo3D)}},function(_,g,u){u(154),u(158),u(159),u(166);var c=u(0),l=u.n(c);l.a.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(e,t){t.eachComponent({mainType:"grid3D",query:e},function(i){i.setView(e)})}),l.a.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(e,t){}),l.a.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(e,t){})},function(_,g,u){var c=u(0),l=u.n(c),e=u(155),t=l.a.extendComponentModel({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});function i(s,a){return a.type||(a.data?"category":"value")}l.a.helper.mixinAxisModelCommonMethods(t),Object(e.a)("x",t,i,{name:"X"}),Object(e.a)("y",t,i,{name:"Y"}),Object(e.a)("z",t,i,{name:"Z"})},function(_,g,u){var c=u(0),l=u.n(c),e=u(156),t=u(157),i=u.n(t),s=["value","category","time","log"];g.a=function(a,o,r,n){l.a.util.each(s,function(h){o.extend({type:a+"Axis3D."+h,__ordinalMeta:null,mergeDefaultAndTheme:function(p,d){var f=d.getTheme();l.a.util.merge(p,f.get(h+"Axis3D")),l.a.util.merge(p,this.getDefaultOption()),p.type=r(a,p)},optionUpdated:function(){this.option.type==="category"&&(this.__ordinalMeta=i.a.createByAxisModel(this))},getCategories:function(){if(this.option.type==="category")return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:l.a.util.merge(l.a.util.clone(e.a[h+"Axis3D"]),n||{},!0)})}),o.superClass.registerSubTypeDefaulter(a+"Axis3D",l.a.util.curry(r,a))}},function(_,g,u){var c=u(0),l=u.n(c),e={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},t=l.a.util.merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},e),i=l.a.util.merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},e),s=l.a.util.defaults({scale:!0,min:"dataMin",max:"dataMax"},i),a=l.a.util.defaults({logBase:10},i);a.scale=!0,g.a={categoryAxis3D:t,valueAxis3D:i,timeAxis3D:s,logAxis3D:a}},function(_,g,u){var c=u(16),l=c.createHashMap,e=c.isObject,t=c.map;function i(n){this.categories=n.categories||[],this._needCollect=n.needCollect,this._deduplication=n.deduplication,this._map}i.createByAxisModel=function(n){var h=n.option,p=h.data,d=p&&t(p,o);return new i({categories:d,needCollect:!d,deduplication:h.dedplication!==!1})};var s=i.prototype;function a(n){return n._map||(n._map=l(n.categories))}function o(n){return e(n)&&n.value!=null?n.value:n+""}s.getOrdinal=function(n){return a(this).get(n)},s.parseAndCollect=function(n){var h,p=this._needCollect;if(typeof n!="string"&&!p)return n;if(p&&!this._deduplication)return h=this.categories.length,this.categories[h]=n,h;var d=a(this);return(h=d.get(n))==null&&(p?(h=this.categories.length,this.categories[h]=n,d.set(n,h)):h=NaN),h};var r=i;_.exports=r},function(_,g,u){var c=u(0),l=u.n(c),e=u(44),t=u(28),i=u(29),s=l.a.extendComponentModel({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});l.a.util.merge(s.prototype,e.a),l.a.util.merge(s.prototype,t.a),l.a.util.merge(s.prototype,i.a)},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(45),i=u(25),s=u(2),a=u(82),o=u(30),r=u(161),n=u(163),h=u(62),p=u(46),d=s.a.firstNotNull;e.a.Shader.import(p.a),["x","y","z"].forEach(function(v){l.a.extendComponentView({type:v+"Axis3D"})});var f={x:0,y:2,z:1};l.a.extendComponentView({type:"grid3D",__ecgl__:!0,init:function(v,m){var y=new e.a.Material({shader:e.a.createShader("ecgl.color"),depthMask:!1,transparent:!0}),x=new e.a.Material({shader:e.a.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});y.define("fragment","DOUBLE_SIDED"),y.define("both","VERTEX_COLOR"),this.groupGL=new e.a.Node,this._control=new t.a({zr:m.getZr()}),this._control.init(),this._faces=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]].map(function(M){var C=new r.a(M,x,y);return this.groupGL.add(C.rootNode),C},this),this._axes=["x","y","z"].map(function(M){var C=new n.a(M,x);return this.groupGL.add(C.rootNode),C},this);var w=m.getDevicePixelRatio();this._axisLabelSurface=new a.a({width:256,height:256,devicePixelRatio:w}),this._axisLabelSurface.onupdate=function(){m.getZr().refresh()},this._axisPointerLineMesh=new e.a.Mesh({geometry:new i.a({useNativeLine:!1}),material:x,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new a.a({width:128,height:128,devicePixelRatio:w}),this._axisPointerLabelsMesh=new h.a({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new e.a.Node,this._sceneHelper=new o.a,this._sceneHelper.initLight(this._lightRoot)},render:function(v,m,y){this._model=v,this._api=y;var x=v.coordinateSystem;x.viewGL.add(this._lightRoot),v.get("show")?x.viewGL.add(this.groupGL):x.viewGL.remove(this.groupGL);var w=this._control;w.setViewGL(x.viewGL);var M=v.getModel("viewControl");w.setFromViewControlModel(M,0),this._axisLabelSurface.clear(),w.off("update"),v.get("show")&&(this._faces.forEach(function(C){C.update(v,m,y)},this),this._axes.forEach(function(C){C.update(v,this._axisLabelSurface,y)},this)),w.on("update",this._onCameraChange.bind(this,v,y),this),this._sceneHelper.setScene(x.viewGL.scene),this._sceneHelper.updateLight(v),x.viewGL.setPostEffect(v.getModel("postEffect"),y),x.viewGL.setTemporalSuperSampling(v.getModel("temporalSuperSampling")),this._initMouseHandler(v)},afterRender:function(v,m,y,x){var w=x.renderer;this._sceneHelper.updateAmbientCubemap(w,v,y),this._sceneHelper.updateSkybox(w,v,y)},showAxisPointer:function(v,m,y,x){this._doShowAxisPointer(),this._updateAxisPointer(x.value)},hideAxisPointer:function(v,m,y,x){this._doHideAxisPointer()},_initMouseHandler:function(v){var m=v.coordinateSystem.viewGL;v.get("show")&&v.get("axisPointer.show")?m.on("mousemove",this._updateAxisPointerOnMousePosition,this):m.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(v){if(!v.target){for(var m,y=this._model.coordinateSystem,x=y.viewGL,w=x.castRay(v.offsetX,v.offsetY,new e.a.Ray),M=0;M<this._faces.length;M++){var C=this._faces[M];if(!C.rootNode.invisible){C.plane.normal.dot(x.camera.worldTransform.z)<0&&C.plane.normal.negate();var A=w.intersectPlane(C.plane);if(A){var P=y.getAxis(C.faceInfo[0]),b=y.getAxis(C.faceInfo[1]),N=f[C.faceInfo[0]],B=f[C.faceInfo[1]];P.contain(A.array[N])&&b.contain(A.array[B])&&(m=A)}}}if(m){var z=y.pointToData(m.array,[],!0);this._updateAxisPointer(z),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(v,m){v.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var y=this._control;m.dispatchAction({type:"grid3DChangeCamera",alpha:y.getAlpha(),beta:y.getBeta(),distance:y.getDistance(),center:y.getCenter(),from:this.uid,grid3DId:v.id})},_updateFaceVisibility:function(){var v=this._control.getCamera(),m=new e.a.Vector3;v.update();for(var y=0;y<this._faces.length/2;y++){for(var x=[],w=0;w<2;w++)this._faces[2*y+w].rootNode.getWorldPosition(m),m.transformMat4(v.viewMatrix),x[w]=m.z;var M=x[0]>x[1]?0:1,C=this._faces[2*y+M],A=this._faces[2*y+1-M];C.rootNode.invisible=!0,A.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var v=this._model.coordinateSystem,m=v.getAxis("x"),y=v.getAxis("y"),x=v.getAxis("z"),w=x.getExtentMax(),M=x.getExtentMin(),C=m.getExtentMin(),A=m.getExtentMax(),P=y.getExtentMax(),b=y.getExtentMin(),N=this._axes[0].rootNode,B=this._axes[1].rootNode,z=this._axes[2].rootNode,F=this._faces,V=F[4].rootNode.invisible?b:P,H=F[2].rootNode.invisible?w:M,U=F[0].rootNode.invisible?C:A,j=F[2].rootNode.invisible?w:M,X=F[0].rootNode.invisible?A:C,Y=F[4].rootNode.invisible?b:P;N.rotation.identity(),B.rotation.identity(),z.rotation.identity(),F[4].rootNode.invisible&&(this._axes[0].flipped=!0,N.rotation.rotateX(Math.PI)),F[0].rootNode.invisible&&(this._axes[1].flipped=!0,B.rotation.rotateZ(Math.PI)),F[4].rootNode.invisible&&(this._axes[2].flipped=!0,z.rotation.rotateY(Math.PI)),N.position.set(0,H,V),B.position.set(U,j,0),z.position.set(X,0,Y),N.update(),B.update(),z.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var v=this._control.getCamera(),m=[new e.a.Vector4,new e.a.Vector4],y=new e.a.Vector4;this.groupGL.getWorldPosition(y),y.w=1,y.transformMat4(v.viewMatrix).transformMat4(v.projectionMatrix),y.x/=y.w,y.y/=y.w,this._axes.forEach(function(x){for(var w=x.axisLineCoords,M=(x.labelsMesh.geometry,0);M<m.length;M++)m[M].setArray(w[M]),m[M].w=1,m[M].transformMat4(x.rootNode.worldTransform).transformMat4(v.viewMatrix).transformMat4(v.projectionMatrix),m[M].x/=m[M].w,m[M].y/=m[M].w;var C,A,P=m[1].x-m[0].x,b=m[1].y-m[0].y,N=(m[1].x+m[0].x)/2,B=(m[1].y+m[0].y)/2;Math.abs(b/P)<.5?(C="center",A=B>y.y?"bottom":"top"):(A="middle",C=N>y.x?"left":"right"),x.setSpriteAlign(C,A,this._api)},this)},_doShowAxisPointer:function(){this._axisPointerLineMesh.invisible&&(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(v){var m=this._model.coordinateSystem,y=m.dataToPoint(v),x=this._axisPointerLineMesh.geometry,w=this._model.getModel("axisPointer"),M=this._api.getDevicePixelRatio();function C(Z){return s.a.firstNotNull(Z.model.get("axisPointer.show"),w.get("show"))}function A(Z){var q=Z.model.getModel("axisPointer",w).getModel("lineStyle"),tt=e.a.parseColor(q.get("color")),$=d(q.get("width"),1),rt=d(q.get("opacity"),1);return tt[3]*=rt,{color:tt,lineWidth:$}}x.convertToDynamicArray(!0);for(var P=0;P<this._faces.length;P++){var b=this._faces[P];if(!b.rootNode.invisible){for(var N=b.faceInfo,B=N[3]<0?m.getAxis(N[2]).getExtentMin():m.getAxis(N[2]).getExtentMax(),z=f[N[2]],F=0;F<2;F++){var V=N[F],H=N[1-F],U=m.getAxis(V),j=m.getAxis(H);if(C(U)){var X=f[V],Y=f[H];(Q=[0,0,0])[X]=(K=[0,0,0])[X]=y[X],Q[z]=K[z]=B,Q[Y]=j.getExtentMin(),K[Y]=j.getExtentMax();var J=A(U);x.addLine(Q,K,J.color,J.lineWidth*M)}}if(C(m.getAxis(N[2]))){var K,Q=y.slice();(K=y.slice())[z]=B,J=A(m.getAxis(N[2])),x.addLine(Q,K,J.color,J.lineWidth*M)}}}x.convertToTypedArray(),this._updateAxisPointerLabelsMesh(v),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(v){var m=this._model,y=this._axisPointerLabelsMesh,x=this._axisPointerLabelsSurface,w=m.coordinateSystem,M=m.getModel("axisPointer");y.geometry.convertToDynamicArray(!0),x.clear();var C={x:"y",y:"x",z:"y"};this._axes.forEach(function(A,P){var b=w.getAxis(A.dim),N=b.model.getModel("axisPointer",M),B=N.getModel("label"),z=N.get("lineStyle.color");if(B.get("show")&&N.get("show")){var F=v[P],V=B.get("formatter"),H=b.scale.getLabel(F);if(V!=null)H=V(H,v);else if(b.scale.type==="interval"||b.scale.type==="log"){var U=l.a.number.getPrecisionSafe(b.scale.getTicks()[0]);H=F.toFixed(U+2)}var j=B.getModel("textStyle"),X=j.get("color"),Y=new l.a.graphic.Text;l.a.graphic.setTextStyle(Y.style,j,{text:H,textFill:X||z,textAlign:"left",textVerticalAlign:"top"});var J=x.add(Y),K=Y.getBoundingRect(),Q=this._api.getDevicePixelRatio(),Z=A.rootNode.position.toArray();Z[f[C[A.dim]]]+=(A.flipped?-1:1)*B.get("margin"),Z[f[A.dim]]=b.dataToCoord(v[P]),y.geometry.addSprite(Z,[K.width*Q,K.height*Q],J,A.textAlign,A.textVerticalAlign)}},this),x.getZr().refreshImmediately(),y.material.set("uvScale",x.getCoordsScale()),y.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose()}})},function(_,g,u){var c=u(69),l=u(12),e=u(33),t=u(78),i=u(79),s=u(34),a=u(21),o=u(55);g.a={vec2:c.a,vec3:l.a,vec4:e.a,mat2:t.a,mat2d:i.a,mat3:s.a,mat4:a.a,quat:o.a}},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(2),i=u(25),s=u(162),a=t.a.firstNotNull,o={x:0,y:2,z:1};function r(n,h,p){this.rootNode=new e.a.Node;var d=new e.a.Mesh({geometry:new i.a({useNativeLine:!1}),material:h,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),f=new e.a.Mesh({geometry:new s.a,material:p,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(f),this.rootNode.add(d),this.faceInfo=n,this.plane=new e.a.Plane,this.linesMesh=d,this.quadsMesh=f}r.prototype.update=function(n,h,p){var d=n.coordinateSystem,f=[d.getAxis(this.faceInfo[0]),d.getAxis(this.faceInfo[1])],v=this.linesMesh.geometry,m=this.quadsMesh.geometry;v.convertToDynamicArray(!0),m.convertToDynamicArray(!0),this._updateSplitLines(v,f,n,p),this._udpateSplitAreas(m,f,n,p),v.convertToTypedArray(),m.convertToTypedArray();var y=d.getAxis(this.faceInfo[2]);(function(x,w,M,C){var A=[0,0,0],P=C<0?M.getExtentMin():M.getExtentMax();A[o[M.dim]]=P,x.position.setArray(A),x.rotation.identity(),w.distance=-Math.abs(P),w.normal.set(0,0,0),M.dim==="x"?(x.rotation.rotateY(C*Math.PI/2),w.normal.x=-C):M.dim==="z"?(x.rotation.rotateX(-C*Math.PI/2),w.normal.y=-C):(C>0&&x.rotation.rotateY(Math.PI),w.normal.z=-C)})(this.rootNode,this.plane,y,this.faceInfo[3])},r.prototype._updateSplitLines=function(n,h,p,d){var f=d.getDevicePixelRatio();h.forEach(function(v,m){var y=v.model,x=h[1-m].getExtent();if(!v.scale.isBlank()){var w=y.getModel("splitLine",p.getModel("splitLine"));if(w.get("show")){var M=w.getModel("lineStyle"),C=M.get("color"),A=a(M.get("opacity"),1),P=a(M.get("width"),1);C=l.a.util.isArray(C)?C:[C];for(var b=v.getTicksCoords({tickModel:w}),N=0,B=0;B<b.length;B++){var z=b[B].coord,F=e.a.parseColor(C[N%C.length]);F[3]*=A;var V=[0,0,0],H=[0,0,0];V[m]=H[m]=z,V[1-m]=x[0],H[1-m]=x[1],n.addLine(V,H,F,P*f),N++}}}})},r.prototype._udpateSplitAreas=function(n,h,p,d){h.forEach(function(f,v){var m=f.model,y=h[1-v].getExtent();if(!f.scale.isBlank()){var x=m.getModel("splitArea",p.getModel("splitArea"));if(x.get("show")){var w=x.getModel("areaStyle"),M=w.get("color"),C=a(w.get("opacity"),1);M=l.a.util.isArray(M)?M:[M];for(var A=f.getTicksCoords({tickModel:x,clamp:!0}),P=0,b=[0,0,0],N=[0,0,0],B=0;B<A.length;B++){var z=A[B].coord,F=[0,0,0],V=[0,0,0];if(F[v]=V[v]=z,F[1-v]=y[0],V[1-v]=y[1],B!==0){var H=e.a.parseColor(M[P%M.length]);H[3]*=C,n.addQuad([b,F,V,N],H),b=F,N=V,P++}else b=F,N=V}}}})},g.a=r},function(_,g,u){var c,l,e,t,i=u(14),s=u(0),a=u.n(s),o=u(39),r=u(6).a.vec3,n=i.a.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new i.a.Attribute("position","float",3,"POSITION"),normal:new i.a.Attribute("normal","float",3,"NORMAL"),color:new i.a.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(h){var p=this.attributes,d=this.getQuadVertexCount()*h,f=this.getQuadTriangleCount()*h;this.vertexCount!==d&&(p.position.init(d),p.normal.init(d),p.color.init(d)),this.triangleCount!==f&&(this.indices=d>65535?new Uint32Array(3*f):new Uint16Array(3*f))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:(c=r.create(),l=r.create(),e=r.create(),t=[0,3,1,3,2,1],function(h,p){var d=this.attributes.position,f=this.attributes.normal,v=this.attributes.color;r.sub(c,h[1],h[0]),r.sub(l,h[2],h[1]),r.cross(e,c,l),r.normalize(e,e);for(var m=0;m<4;m++)d.set(this._vertexOffset+m,h[m]),v.set(this._vertexOffset+m,p),f.set(this._vertexOffset+m,e);var y=3*this._faceOffset;for(m=0;m<6;m++)this.indices[y+m]=t[m]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2})});a.a.util.defaults(n.prototype,o.a),g.a=n},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(25),i=u(2),s=u(62),a=i.a.firstNotNull,o={x:0,y:2,z:1};function r(h,p){var d=new e.a.Mesh({geometry:new t.a({useNativeLine:!1}),material:p,castShadow:!1,ignorePicking:!0,renderOrder:2}),f=new s.a;f.material.depthMask=!1;var v=new e.a.Node;v.add(d),v.add(f),this.rootNode=v,this.dim=h,this.linesMesh=d,this.labelsMesh=f,this.axisLineCoords=null,this.labelElements=[]}var n={x:"y",y:"x",z:"y"};r.prototype.update=function(h,p,d){var f=h.coordinateSystem.getAxis(this.dim),v=this.linesMesh.geometry,m=this.labelsMesh.geometry;v.convertToDynamicArray(!0),m.convertToDynamicArray(!0);var y=f.model,x=f.getExtent(),w=d.getDevicePixelRatio(),M=y.getModel("axisLine",h.getModel("axisLine")),C=y.getModel("axisTick",h.getModel("axisTick")),A=y.getModel("axisLabel",h.getModel("axisLabel")),P=M.get("lineStyle.color");if(M.get("show")){var b=M.getModel("lineStyle"),N=[0,0,0];(J=[0,0,0])[K=o[f.dim]]=x[0],N[K]=x[1],this.axisLineCoords=[J,N];var B=e.a.parseColor(P),z=a(b.get("width"),1),F=a(b.get("opacity"),1);B[3]*=F,v.addLine(J,N,B,z*w)}if(C.get("show")){var V=C.getModel("lineStyle"),H=e.a.parseColor(a(V.get("color"),P));z=a(V.get("width"),1),H[3]*=a(V.get("opacity"),1);for(var U=f.getTicksCoords(),j=C.get("length"),X=0;X<U.length;X++){var Y=U[X].coord,J=[0,0,0],K=(N=[0,0,0],o[f.dim]),Q=o[n[f.dim]];J[K]=N[K]=Y,N[Q]=j,v.addLine(J,N,H,z*w)}}if(this.labelElements=[],w=d.getDevicePixelRatio(),A.get("show")){U=f.getTicksCoords();var Z=y.get("data"),q=A.get("margin"),tt=f.getViewLabels();for(X=0;X<tt.length;X++){var $=tt[X].tickValue,rt=tt[X].formattedLabel,et=tt[X].rawLabel,it=(Y=f.dataToCoord($),[0,0,0]);K=o[f.dim],Q=o[n[f.dim]],it[K]=it[K]=Y,it[Q]=q;var ot=A;Z&&Z[$]&&Z[$].textStyle&&(ot=new l.a.Model(Z[$].textStyle,A,y.ecModel));var st=a(ot.get("color"),P),at=new l.a.graphic.Text;l.a.graphic.setTextStyle(at.style,ot,{text:rt,textFill:typeof st=="function"?st(f.type==="category"?et:f.type==="value"?$+"":$,X):st,textVerticalAlign:"top",textAlign:"left"});var vt=p.add(at),yt=at.getBoundingRect();m.addSprite(it,[yt.width*w,yt.height*w],vt),this.labelElements.push(at)}}if(y.get("name")){var gt=y.getModel("nameTextStyle"),pt=(it=[0,0,0],K=o[f.dim],Q=o[n[f.dim]],a(gt.get("color"),P)),bt=gt.get("borderColor");z=gt.get("borderWidth"),it[K]=it[K]=(x[0]+x[1])/2,it[Q]=y.get("nameGap"),at=new l.a.graphic.Text,l.a.graphic.setTextStyle(at.style,gt,{text:y.get("name"),textFill:pt,textStroke:bt,lineWidth:z}),vt=p.add(at),yt=at.getBoundingRect(),m.addSprite(it,[yt.width*w,yt.height*w],vt),at.__idx=this.labelElements.length,this.nameLabelElement=at}this.labelsMesh.material.set("textureAtlas",p.getTexture()),this.labelsMesh.material.set("uvScale",p.getCoordsScale()),v.convertToTypedArray(),m.convertToTypedArray()},r.prototype.setSpriteAlign=function(h,p,d){for(var f=d.getDevicePixelRatio(),v=this.labelsMesh.geometry,m=0;m<this.labelElements.length;m++){var y=this.labelElements[m].getBoundingRect();v.setSpriteAlign(m,[y.width*f,y.height*f],h,p)}var x=this.nameLabelElement;x&&(y=x.getBoundingRect(),v.setSpriteAlign(x.__idx,[y.width*f,y.height*f],h,p),v.dirty()),this.textAlign=h,this.textVerticalAlign=p},g.a=r},function(_,g,u){var c=u(0),l=u.n(c),e=u(14),t=u(39),i=[0,1,2,0,2,3],s=e.a.extend(function(){return{attributes:{position:new e.a.Attribute("position","float",3,"POSITION"),texcoord:new e.a.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new e.a.Attribute("offset","float",2),color:new e.a.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(a){this._spriteCount=a;var o=4*a,r=2*a;this.vertexCount!==o&&(this.attributes.position.init(o),this.attributes.offset.init(o),this.attributes.color.init(o)),this.triangleCount!==r&&(this.indices=o>65535?new Uint32Array(3*r):new Uint16Array(3*r))},setSpriteAlign:function(a,o,r,n,h){var p,d,f,v;switch(r==null&&(r="left"),n==null&&(n="top"),h=h||0,r){case"left":p=h,f=o[0]+h;break;case"center":case"middle":p=-o[0]/2,f=o[0]/2;break;case"right":p=-o[0]-h,f=-h}switch(n){case"bottom":d=h,v=o[1]+h;break;case"middle":d=-o[1]/2,v=o[1]/2;break;case"top":d=-o[1]-h,v=-h}var m=4*a,y=this.attributes.offset;y.set(m,[p,v]),y.set(m+1,[f,v]),y.set(m+2,[f,d]),y.set(m+3,[p,d])},addSprite:function(a,o,r,n,h,p){var d=this._vertexOffset;this.setSprite(this._vertexOffset/4,a,o,r,n,h,p);for(var f=0;f<i.length;f++)this.indices[3*this._faceOffset+f]=i[f]+d;return this._faceOffset+=2,this._vertexOffset+=4,d/4},setSprite:function(a,o,r,n,h,p,d){for(var f=4*a,v=this.attributes,m=0;m<4;m++)v.position.set(f+m,o);var y=v.texcoord;y.set(f,[n[0][0],n[0][1]]),y.set(f+1,[n[1][0],n[0][1]]),y.set(f+2,[n[1][0],n[1][1]]),y.set(f+3,[n[0][0],n[1][1]]),this.setSpriteAlign(a,r,h,p,d)}});l.a.util.defaults(s.prototype,t.a),g.a=s},function(_,g,u){g.a=`@export ecgl.labels.vertex

attribute vec3 position: POSITION;
attribute vec2 texcoord: TEXCOORD_0;
attribute vec2 offset;
#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec2 v_Texcoord;

void main()
{
 vec4 proj = worldViewProjection * vec4(position, 1.0);

 vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;

 screen += offset;

 proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);
 gl_Position = proj;
#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif
 v_Texcoord = texcoord;
}
@end


@export ecgl.labels.fragment

uniform vec3 color : [1.0, 1.0, 1.0];
uniform float alpha : 1.0;
uniform sampler2D textureAtlas;
uniform vec2 uvScale: [1.0, 1.0];

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif
varying float v_Miter;

varying vec2 v_Texcoord;

void main()
{
 gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);
#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif
}

@end`},function(_,g,u){var c=u(167),l=u(169),e=u(0),t=u.n(e),i=u(47),s=u.n(i),a=u(22),o=u(2);function r(p,d){var f=p.getBoxLayoutParams(),v=s.a.getLayoutRect(f,{width:d.getWidth(),height:d.getHeight()});v.y=d.getHeight()-v.y-v.height,this.viewGL.setViewport(v.x,v.y,v.width,v.height,d.getDevicePixelRatio());var m=p.get("boxWidth"),y=p.get("boxHeight"),x=p.get("boxDepth");["x","y","z"].forEach(function(w){if(!this.getAxis(w))throw new Error("Grid"+p.id+" don't have "+w+"Axis")},this),this.getAxis("x").setExtent(-m/2,m/2),this.getAxis("y").setExtent(x/2,-x/2),this.getAxis("z").setExtent(-y/2,y/2),this.size=[m,y,x]}function n(p,d){var f={};p.eachSeries(function(v){if(v.coordinateSystem===this){var m=v.getData();["x","y","z"].forEach(function(y){m.mapDimension(y,!0).forEach(function(x){var w,M;w=y,M=m.getDataExtent(x,!0),f[w]=f[w]||[1/0,-1/0],f[w][0]=Math.min(M[0],f[w][0]),f[w][1]=Math.max(M[1],f[w][1])})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(v){p.eachComponent(v,function(m){var y=v.charAt(0),x=m.getReferringComponents("grid3D")[0],w=x.coordinateSystem;if(w===this){var M=w.getAxis(y);if(M)console.warn("Can't have two %s in one grid3D",v);else{var C=t.a.helper.createScale(f[y]||[1/0,-1/0],m);(M=new l.a(y,C)).type=m.get("type");var A=M.type==="category";M.onBand=A&&m.get("boundaryGap"),M.inverse=m.get("inverse"),m.axis=M,M.model=m,M.getLabelModel=function(){return m.getModel("axisLabel",x.getModel("axisLabel"))},M.getTickModel=function(){return m.getModel("axisTick",x.getModel("axisTick"))},w.addAxis(M)}}},this)},this),this.resize(this.model,d)}var h={dimensions:c.a.prototype.dimensions,create:function(p,d){var f=[];p.eachComponent("grid3D",function(m){m.__viewGL=m.__viewGL||new a.a;var y=new c.a;y.model=m,y.viewGL=m.__viewGL,m.coordinateSystem=y,f.push(y),y.resize=r,y.update=n});var v=["xAxis3D","yAxis3D","zAxis3D"];return p.eachSeries(function(m){if(m.get("coordinateSystem")==="cartesian3D"){if((x=m.getReferringComponents("grid3D")[0])==null){var y=function(M,C){return v.map(function(A){var P=M.getReferringComponents(A)[0];if(P==null&&(P=C.getComponent(A)),!P)throw new Error(A+' "'+o.a.firstNotNull(M.get(A+"Index"),M.get(A+"Id"),0)+'" not found');return P})}(m,p),x=y[0].getCoordSysModel();y.forEach(function(M){var C=M.getCoordSysModel();if(!C)throw new Error('grid3D "'+o.a.firstNotNull(M.get("gridIndex"),M.get("gridId"),0)+'" not found');if(C!==x)throw new Error("xAxis3D, yAxis3D, zAxis3D must use the same grid")})}var w=x.coordinateSystem;m.coordinateSystem=w}}),f}};t.a.registerCoordinateSystem("grid3D",h)},function(_,g,u){var c=u(0),l=u.n(c),e=u(168),t=u.n(e);function i(s){t.a.call(this,s),this.size=[0,0,0]}i.prototype={constructor:i,type:"cartesian3D",dimensions:["x","y","z"],model:null,containPoint:function(s){return this.getAxis("x").contain(s[0])&&this.getAxis("y").contain(s[2])&&this.getAxis("z").contain(s[1])},containData:function(s){return this.getAxis("x").containData(s[0])&&this.getAxis("y").containData(s[1])&&this.getAxis("z").containData(s[2])},dataToPoint:function(s,a,o){return(a=a||[])[0]=this.getAxis("x").dataToCoord(s[0],o),a[2]=this.getAxis("y").dataToCoord(s[1],o),a[1]=this.getAxis("z").dataToCoord(s[2],o),a},pointToData:function(s,a,o){return(a=a||[])[0]=this.getAxis("x").coordToData(s[0],o),a[1]=this.getAxis("y").coordToData(s[2],o),a[2]=this.getAxis("z").coordToData(s[1],o),a}},l.a.util.inherits(i,t.a),g.a=i},function(_,g,u){var c=u(16);function l(i){return this._axes[i]}var e=function(i){this._axes={},this._dimList=[],this.name=i||""};e.prototype={constructor:e,type:"cartesian",getAxis:function(i){return this._axes[i]},getAxes:function(){return c.map(this._dimList,l,this)},getAxesByScale:function(i){return i=i.toLowerCase(),c.filter(this.getAxes(),function(s){return s.scale.type===i})},addAxis:function(i){var s=i.dim;this._axes[s]=i,this._dimList.push(s)},dataToCoord:function(i){return this._dataCoordConvert(i,"dataToCoord")},coordToData:function(i){return this._dataCoordConvert(i,"coordToData")},_dataCoordConvert:function(i,s){for(var a=this._dimList,o=D(i,Array)?[]:{},r=0;r<a.length;r++){var n=a[r],h=this._axes[n];o[n]=h[s](i[n])}return o}};var t=e;_.exports=t},function(_,g,u){var c=u(0),l=u.n(c);function e(t,i,s){l.a.Axis.call(this,t,i,s)}e.prototype={constructor:e,getExtentMin:function(){var t=this._extent;return Math.min(t[0],t[1])},getExtentMax:function(){var t=this._extent;return Math.max(t[0],t[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}},l.a.util.inherits(e,l.a.Axis),g.a=e},function(_,g){var u=typeof Float32Array>"u"?Array:Float32Array;function c(r){return Math.sqrt(e(r))}var l=c;function e(r){return r[0]*r[0]+r[1]*r[1]}var t=e;function i(r,n){return Math.sqrt((r[0]-n[0])*(r[0]-n[0])+(r[1]-n[1])*(r[1]-n[1]))}var s=i;function a(r,n){return(r[0]-n[0])*(r[0]-n[0])+(r[1]-n[1])*(r[1]-n[1])}var o=a;g.create=function(r,n){var h=new u(2);return r==null&&(r=0),n==null&&(n=0),h[0]=r,h[1]=n,h},g.copy=function(r,n){return r[0]=n[0],r[1]=n[1],r},g.clone=function(r){var n=new u(2);return n[0]=r[0],n[1]=r[1],n},g.set=function(r,n,h){return r[0]=n,r[1]=h,r},g.add=function(r,n,h){return r[0]=n[0]+h[0],r[1]=n[1]+h[1],r},g.scaleAndAdd=function(r,n,h,p){return r[0]=n[0]+h[0]*p,r[1]=n[1]+h[1]*p,r},g.sub=function(r,n,h){return r[0]=n[0]-h[0],r[1]=n[1]-h[1],r},g.len=c,g.length=l,g.lenSquare=e,g.lengthSquare=t,g.mul=function(r,n,h){return r[0]=n[0]*h[0],r[1]=n[1]*h[1],r},g.div=function(r,n,h){return r[0]=n[0]/h[0],r[1]=n[1]/h[1],r},g.dot=function(r,n){return r[0]*n[0]+r[1]*n[1]},g.scale=function(r,n,h){return r[0]=n[0]*h,r[1]=n[1]*h,r},g.normalize=function(r,n){var h=c(n);return h===0?(r[0]=0,r[1]=0):(r[0]=n[0]/h,r[1]=n[1]/h),r},g.distance=i,g.dist=s,g.distanceSquare=a,g.distSquare=o,g.negate=function(r,n){return r[0]=-n[0],r[1]=-n[1],r},g.lerp=function(r,n,h,p){return r[0]=n[0]+p*(h[0]-n[0]),r[1]=n[1]+p*(h[1]-n[1]),r},g.applyTransform=function(r,n,h){var p=n[0],d=n[1];return r[0]=h[0]*p+h[2]*d+h[4],r[1]=h[1]*p+h[3]*d+h[5],r},g.min=function(r,n,h){return r[0]=Math.min(n[0],h[0]),r[1]=Math.min(n[1],h[1]),r},g.max=function(r,n,h){return r[0]=Math.max(n[0],h[0]),r[1]=Math.max(n[1],h[1]),r}},function(_,g){var u=typeof Float32Array>"u"?Array:Float32Array;function c(){var t=new u(6);return l(t),t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function e(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t}g.create=c,g.identity=l,g.copy=e,g.mul=function(t,i,s){var a=i[0]*s[0]+i[2]*s[1],o=i[1]*s[0]+i[3]*s[1],r=i[0]*s[2]+i[2]*s[3],n=i[1]*s[2]+i[3]*s[3],h=i[0]*s[4]+i[2]*s[5]+i[4],p=i[1]*s[4]+i[3]*s[5]+i[5];return t[0]=a,t[1]=o,t[2]=r,t[3]=n,t[4]=h,t[5]=p,t},g.translate=function(t,i,s){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4]+s[0],t[5]=i[5]+s[1],t},g.rotate=function(t,i,s){var a=i[0],o=i[2],r=i[4],n=i[1],h=i[3],p=i[5],d=Math.sin(s),f=Math.cos(s);return t[0]=a*f+n*d,t[1]=-a*d+n*f,t[2]=o*f+h*d,t[3]=-o*d+f*h,t[4]=f*r+d*p,t[5]=f*p-d*r,t},g.scale=function(t,i,s){var a=s[0],o=s[1];return t[0]=i[0]*a,t[1]=i[1]*o,t[2]=i[2]*a,t[3]=i[3]*o,t[4]=i[4]*a,t[5]=i[5]*o,t},g.invert=function(t,i){var s=i[0],a=i[2],o=i[4],r=i[1],n=i[3],h=i[5],p=s*n-r*a;return p?(p=1/p,t[0]=n*p,t[1]=-r*p,t[2]=-a*p,t[3]=s*p,t[4]=(a*h-n*o)*p,t[5]=(r*o-s*h)*p,t):null},g.clone=function(t){var i=c();return e(i,t),i}},function(_,g,u){var c=u(16),l=u(173),e=u(84),t=c.normalizeCssArray,i=/([&<>"'])/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function a(p){return p==null?"":(p+"").replace(i,function(d,f){return s[f]})}var o=["a","b","c","d","e","f","g"],r=function(p,d){return"{"+p+(d==null?"":d)+"}"};function n(p,d){return"0000".substr(0,d-(p+="").length)+p}var h=l.truncateText;g.addCommas=function(p){return isNaN(p)?"-":(p=(p+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(p.length>1?"."+p[1]:"")},g.toCamelCase=function(p,d){return p=(p||"").toLowerCase().replace(/-(.)/g,function(f,v){return v.toUpperCase()}),d&&p&&(p=p.charAt(0).toUpperCase()+p.slice(1)),p},g.normalizeCssArray=t,g.encodeHTML=a,g.formatTpl=function(p,d,f){c.isArray(d)||(d=[d]);var v=d.length;if(!v)return"";for(var m=d[0].$vars||[],y=0;y<m.length;y++){var x=o[y];p=p.replace(r(x),r(x,0))}for(var w=0;w<v;w++)for(var M=0;M<m.length;M++){var C=d[w][m[M]];p=p.replace(r(o[M],w),f?a(C):C)}return p},g.formatTplSimple=function(p,d,f){return c.each(d,function(v,m){p=p.replace("{"+m+"}",f?a(v):v)}),p},g.getTooltipMarker=function(p,d){var f=(p=c.isString(p)?{color:p,extraCssText:d}:p||{}).color,v=p.type,m=(d=p.extraCssText,p.renderMode||"html"),y=p.markerId||"X";return f?m==="html"?v==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+a(f)+";"+(d||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+a(f)+";"+(d||"")+'"></span>':{renderMode:m,content:"{marker"+y+"|}  ",style:{color:f}}:""},g.formatTime=function(p,d,f){p!=="week"&&p!=="month"&&p!=="quarter"&&p!=="half-year"&&p!=="year"||(p=`MM-dd
yyyy`);var v=e.parseDate(d),m=f?"UTC":"",y=v["get"+m+"FullYear"](),x=v["get"+m+"Month"]()+1,w=v["get"+m+"Date"](),M=v["get"+m+"Hours"](),C=v["get"+m+"Minutes"](),A=v["get"+m+"Seconds"](),P=v["get"+m+"Milliseconds"]();return p.replace("MM",n(x,2)).replace("M",x).replace("yyyy",y).replace("yy",y%100).replace("dd",n(w,2)).replace("d",w).replace("hh",n(M,2)).replace("h",M).replace("mm",n(C,2)).replace("m",C).replace("ss",n(A,2)).replace("s",A).replace("SSS",n(P,3))},g.capitalFirst=function(p){return p&&p.charAt(0).toUpperCase()+p.substr(1)},g.truncateText=h,g.getTextBoundingRect=function(p){return l.getBoundingRect(p.text,p.font,p.textAlign,p.textVerticalAlign,p.textPadding,p.textLineHeight,p.rich,p.truncate)},g.getTextRect=function(p,d,f,v,m,y,x,w){return l.getBoundingRect(p,d,f,v,m,w,y,x)}},function(_,g,u){var c=u(83),l=u(174),e=u(16),t=e.getContext,i=e.extend,s=e.retrieve2,a=e.retrieve3,o=e.trim,r={},n=0,h=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,p="12px sans-serif",d={};function f(z,F){var V=z+":"+(F=F||p);if(r[V])return r[V];for(var H=(z+"").split(`
`),U=0,j=0,X=H.length;j<X;j++)U=Math.max(P(H[j],F).width,U);return n>5e3&&(n=0,r={}),n++,r[V]=U,U}function v(z,F,V){return V==="right"?z-=F:V==="center"&&(z-=F/2),z}function m(z,F,V){return V==="middle"?z-=F/2:V==="bottom"&&(z-=F),z}function y(z,F,V){var H=F.textPosition,U=F.textDistance,j=V.x,X=V.y,Y=V.height,J=V.width,K=Y/2,Q="left",Z="top";switch(H){case"left":j-=U,X+=K,Q="right",Z="middle";break;case"right":j+=U+J,X+=K,Z="middle";break;case"top":j+=J/2,X-=U,Q="center",Z="bottom";break;case"bottom":j+=J/2,X+=Y+U,Q="center";break;case"inside":j+=J/2,X+=K,Q="center",Z="middle";break;case"insideLeft":j+=U,X+=K,Z="middle";break;case"insideRight":j+=J-U,X+=K,Q="right",Z="middle";break;case"insideTop":j+=J/2,X+=U,Q="center";break;case"insideBottom":j+=J/2,X+=Y-U,Q="center",Z="bottom";break;case"insideTopLeft":j+=U,X+=U;break;case"insideTopRight":j+=J-U,X+=U,Q="right";break;case"insideBottomLeft":j+=U,X+=Y-U,Z="bottom";break;case"insideBottomRight":j+=J-U,X+=Y-U,Q="right",Z="bottom"}return(z=z||{}).x=j,z.y=X,z.textAlign=Q,z.textVerticalAlign=Z,z}function x(z,F,V,H,U){if(!F)return"";var j=(z+"").split(`
`);U=w(F,V,H,U);for(var X=0,Y=j.length;X<Y;X++)j[X]=M(j[X],U);return j.join(`
`)}function w(z,F,V,H){(H=i({},H)).font=F,V=s(V,"..."),H.maxIterations=s(H.maxIterations,2);var U=H.minChar=s(H.minChar,0);H.cnCharWidth=f("\u56FD",F);var j=H.ascCharWidth=f("a",F);H.placeholder=s(H.placeholder,"");for(var X=z=Math.max(0,z-1),Y=0;Y<U&&X>=j;Y++)X-=j;var J=f(V,F);return J>X&&(V="",J=0),X=z-J,H.ellipsis=V,H.ellipsisWidth=J,H.contentWidth=X,H.containerWidth=z,H}function M(z,F){var V=F.containerWidth,H=F.font,U=F.contentWidth;if(!V)return"";var j=f(z,H);if(j<=V)return z;for(var X=0;;X++){if(j<=U||X>=F.maxIterations){z+=F.ellipsis;break}var Y=X===0?C(z,U,F.ascCharWidth,F.cnCharWidth):j>0?Math.floor(z.length*U/j):0;j=f(z=z.substr(0,Y),H)}return z===""&&(z=F.placeholder),z}function C(z,F,V,H){for(var U=0,j=0,X=z.length;j<X&&U<F;j++){var Y=z.charCodeAt(j);U+=0<=Y&&Y<=127?V:H}return j}function A(z){return f("\u56FD",z)}function P(z,F){return d.measureText(z,F)}function b(z,F,V,H,U){z!=null&&(z+="");var j=s(H,A(F)),X=z?z.split(`
`):[],Y=X.length*j,J=Y;if(V&&(J+=V[0]+V[2]),z&&U){var K=U.outerHeight,Q=U.outerWidth;if(K!=null&&J>K)z="",X=[];else if(Q!=null)for(var Z=w(Q-(V?V[1]+V[3]:0),F,U.ellipsis,{minChar:U.minChar,placeholder:U.placeholder}),q=0,tt=X.length;q<tt;q++)X[q]=M(X[q],Z)}return{lines:X,height:Y,outerHeight:J,lineHeight:j}}function N(z,F){var V={lines:[],width:0,height:0};if(z!=null&&(z+=""),!z)return V;for(var H,U=h.lastIndex=0;(H=h.exec(z))!=null;){var j=H.index;j>U&&B(V,z.substring(U,j)),B(V,H[2],H[1]),U=h.lastIndex}U<z.length&&B(V,z.substring(U,z.length));var X=V.lines,Y=0,J=0,K=[],Q=F.textPadding,Z=F.truncate,q=Z&&Z.outerWidth,tt=Z&&Z.outerHeight;Q&&(q!=null&&(q-=Q[1]+Q[3]),tt!=null&&(tt-=Q[0]+Q[2]));for(var $=0;$<X.length;$++){for(var rt=X[$],et=0,it=0,ot=0;ot<rt.tokens.length;ot++){var st=(ct=rt.tokens[ot]).styleName&&F.rich[ct.styleName]||{},at=ct.textPadding=st.textPadding,vt=ct.font=st.font||F.font,yt=ct.textHeight=s(st.textHeight,A(vt));if(at&&(yt+=at[0]+at[2]),ct.height=yt,ct.lineHeight=a(st.textLineHeight,F.textLineHeight,yt),ct.textAlign=st&&st.textAlign||F.textAlign,ct.textVerticalAlign=st&&st.textVerticalAlign||"middle",tt!=null&&Y+ct.lineHeight>tt)return{lines:[],width:0,height:0};ct.textWidth=f(ct.text,vt);var gt=st.textWidth,pt=gt==null||gt==="auto";if(typeof gt=="string"&&gt.charAt(gt.length-1)==="%")ct.percentWidth=gt,K.push(ct),gt=0;else{if(pt){gt=ct.textWidth;var bt=st.textBackgroundColor,mt=bt&&bt.image;mt&&(mt=l.findExistImage(mt),l.isImageReady(mt)&&(gt=Math.max(gt,mt.width*yt/mt.height)))}var nt=at?at[1]+at[3]:0;gt+=nt;var lt=q!=null?q-it:null;lt!=null&&lt<gt&&(!pt||lt<nt?(ct.text="",ct.textWidth=gt=0):(ct.text=x(ct.text,lt-nt,vt,Z.ellipsis,{minChar:Z.minChar}),ct.textWidth=f(ct.text,vt),gt=ct.textWidth+nt))}it+=ct.width=gt,st&&(et=Math.max(et,ct.lineHeight))}rt.width=it,rt.lineHeight=et,Y+=et,J=Math.max(J,it)}for(V.outerWidth=V.width=s(F.textWidth,J),V.outerHeight=V.height=s(F.textHeight,Y),Q&&(V.outerWidth+=Q[1]+Q[3],V.outerHeight+=Q[0]+Q[2]),$=0;$<K.length;$++){var ct,ht=(ct=K[$]).percentWidth;ct.width=parseInt(ht,10)/100*J}return V}function B(z,F,V){for(var H=F==="",U=F.split(`
`),j=z.lines,X=0;X<U.length;X++){var Y=U[X],J={styleName:V,text:Y,isLineHolder:!Y&&!H};if(X)j.push({tokens:[J]});else{var K=(j[j.length-1]||(j[0]={tokens:[]})).tokens,Q=K.length;Q===1&&K[0].isLineHolder?K[0]=J:(Y||!Q||H)&&K.push(J)}}}d.measureText=function(z,F){var V=t();return V.font=F||p,V.measureText(z)},g.DEFAULT_FONT=p,g.$override=function(z,F){d[z]=F},g.getWidth=f,g.getBoundingRect=function(z,F,V,H,U,j,X,Y){return X?function(J,K,Q,Z,q,tt,$,rt){var et=N(J,{rich:$,truncate:rt,font:K,textAlign:Q,textPadding:q,textLineHeight:tt}),it=et.outerWidth,ot=et.outerHeight,st=v(0,it,Q),at=m(0,ot,Z);return new c(st,at,it,ot)}(z,F,V,H,U,j,X,Y):function(J,K,Q,Z,q,tt,$){var rt=b(J,K,q,tt,$),et=f(J,K);q&&(et+=q[1]+q[3]);var it=rt.outerHeight,ot=v(0,et,Q),st=m(0,it,Z),at=new c(ot,st,et,it);return at.lineHeight=rt.lineHeight,at}(z,F,V,H,U,j,Y)},g.adjustTextX=v,g.adjustTextY=m,g.calculateTextPosition=y,g.adjustTextPositionOnRect=function(z,F,V){return y({},{textPosition:z,textDistance:V},F)},g.truncateText=x,g.getLineHeight=A,g.measureText=P,g.parsePlainText=b,g.parseRichText=N,g.makeFont=function(z){var F=(z.fontSize||z.fontFamily)&&[z.fontStyle,z.fontWeight,(z.fontSize||12)+"px",z.fontFamily||"sans-serif"].join(" ");return F&&o(F)||z.textFont||z.font}},function(_,g,u){var c=new(u(175))(50);function l(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var i=0;i<t.pending.length;i++){var s=t.pending[i],a=s.cb;a&&a(this,s.cbPayload),s.hostEl.dirty()}t.pending.length=0}function e(t){return t&&t.width&&t.height}g.findExistImage=function(t){if(typeof t=="string"){var i=c.get(t);return i&&i.image}return t},g.createOrUpdateImage=function(t,i,s,a,o){if(t){if(typeof t=="string"){if(i&&i.__zrImageSrc===t||!s)return i;var r=c.get(t),n={hostEl:s,cb:a,cbPayload:o};return r?!e(i=r.image)&&r.pending.push(n):((i=new Image).onload=i.onerror=l,c.put(t,i.__cachedImgObj={image:i,pending:[n]}),i.src=i.__zrImageSrc=t),i}return t}return i},g.isImageReady=e},function(_,g){var u=function(){this.head=null,this.tail=null,this._len=0},c=u.prototype;c.insert=function(s){var a=new l(s);return this.insertEntry(a),a},c.insertEntry=function(s){this.head?(this.tail.next=s,s.prev=this.tail,s.next=null,this.tail=s):this.head=this.tail=s,this._len++},c.remove=function(s){var a=s.prev,o=s.next;a?a.next=o:this.head=o,o?o.prev=a:this.tail=a,s.next=s.prev=null,this._len--},c.len=function(){return this._len},c.clear=function(){this.head=this.tail=null,this._len=0};var l=function(s){this.value=s,this.next,this.prev},e=function(s){this._list=new u,this._map={},this._maxSize=s||10,this._lastRemovedEntry=null},t=e.prototype;t.put=function(s,a){var o=this._list,r=this._map,n=null;if(r[s]==null){var h=o.len(),p=this._lastRemovedEntry;if(h>=this._maxSize&&h>0){var d=o.head;o.remove(d),delete r[d.key],n=d.value,this._lastRemovedEntry=d}p?p.value=a:p=new l(a),p.key=s,o.insertEntry(p),r[s]=p}return n},t.get=function(s){var a=this._map[s],o=this._list;if(a!=null)return a!==o.tail&&(o.remove(a),o.insertEntry(a)),a.value},t.clear=function(){this._list.clear(),this._map={}};var i=e;_.exports=i},function(_,g,u){var c=u(8),l=u(11),e=u(3),t=u(18),i=u(59),s=u(7),a=u(52),o=u(9),r=u(19),n=u(10),h=u(4),p=u(5),d=u(27),f=u(37),v=u(38),m=u(15),y=u(85),x=u(21),w=u(177),M=["px","nx","py","ny","pz","nz"];function C(U,j,X){return X==="alphaMap"?U.material.get("diffuseMap"):X==="alphaCutoff"?U.material.isDefined("fragment","ALPHA_TEST")&&U.material.get("diffuseMap")&&U.material.get("alphaCutoff")||0:X==="uvRepeat"?U.material.get("uvRepeat"):X==="uvOffset"?U.material.get("uvOffset"):j.get(X)}function A(U,j){var X=U.material,Y=j.material;return X.get("diffuseMap")!==Y.get("diffuseMap")||(X.get("alphaCutoff")||0)!==(Y.get("alphaCutoff")||0)}o.a.import(w.a);var P,b,N,B,z,F,V,H=c.a.extend(function(){return{softShadow:H.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new n.a,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new y.a}},function(){this._gaussianPassH=new m.a({fragment:o.a.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new m.a({fragment:o.a.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new m.a({fragment:o.a.source("clay.sm.debug_depth")})},{render:function(U,j,X,Y){X||(X=j.getMainCamera()),this.trigger("beforerender",this,U,j,X),this._renderShadowPass(U,j,X,Y),this.trigger("afterrender",this,U,j,X)},renderDebug:function(U,j){U.saveClear();var X=U.viewport,Y=0,J=j||X.width/4,K=J;for(var Q in this.softShadow===H.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM"),this._textures){var Z=this._textures[Q];U.setViewport(Y,0,J*Z.width/Z.height,K),this._outputDepthPass.setUniform("depthMap",Z),this._outputDepthPass.render(U),Y+=J*Z.width/Z.height}U.setViewport(X),U.restoreClear()},_updateReceivers:function(U,j){if(j.receiveShadow?(this._receivers.push(j),j.material.set("shadowEnabled",1),j.material.set("pcfKernel",this.kernelPCF)):j.material.set("shadowEnabled",0),this.softShadow===H.VSM)j.material.define("fragment","USE_VSM"),j.material.undefine("fragment","PCF_KERNEL_SIZE");else{j.material.undefine("fragment","USE_VSM");var X=this.kernelPCF;X&&X.length?j.material.define("fragment","PCF_KERNEL_SIZE",X.length/2):j.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(U,j){var X=this;j.traverse(function(K){K.isRenderable()&&X._updateReceivers(U,K)});for(var Y=0;Y<j.lights.length;Y++){var J=j.lights[Y];J.castShadow&&!J.invisible&&this._lightsCastShadow.push(J)}},_renderShadowPass:function(U,j,X,Y){for(var J in this._shadowMapNumber)this._shadowMapNumber[J]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var K=U.gl;if(Y||j.update(),X&&X.update(),j.updateLights(),this._update(U,j),this._lightsCastShadow.length||!this._lastRenderNotCastShadow){this._lastRenderNotCastShadow=this._lightsCastShadow===0,K.enable(K.DEPTH_TEST),K.depthMask(!0),K.disable(K.BLEND),K.clearColor(1,1,1,1);for(var Q,Z=[],q=[],tt=[],$=[],rt=[],et=[],it=0;it<this._lightsCastShadow.length;it++){var ot=this._lightsCastShadow[it];if(ot.type==="DIRECTIONAL_LIGHT"){if(Q){console.warn("Only one direectional light supported with shadow cascade");continue}if(ot.shadowCascade>4){console.warn("Support at most 4 cascade");continue}ot.shadowCascade>1&&(Q=ot),this.renderDirectionalLightShadow(U,j,X,ot,rt,$,tt)}else ot.type==="SPOT_LIGHT"?this.renderSpotLightShadow(U,j,ot,q,Z):ot.type==="POINT_LIGHT"&&this.renderPointLightShadow(U,j,ot,et);this._shadowMapNumber[ot.type]++}for(var st in this._shadowMapNumber){var at=this._shadowMapNumber[st],vt=st+"_SHADOWMAP_COUNT";for(it=0;it<this._receivers.length;it++)(yt=this._receivers[it].material).fragmentDefines[vt]!==at&&(at>0?yt.define("fragment",vt,at):yt.isDefined("fragment",vt)&&yt.undefine("fragment",vt))}for(it=0;it<this._receivers.length;it++){var yt=this._receivers[it].material;Q?yt.define("fragment","SHADOW_CASCADE",Q.shadowCascade):yt.undefine("fragment","SHADOW_CASCADE")}var gt=j.shadowUniforms;if(tt.length>0){var pt=tt.map(lt);if(gt.directionalLightShadowMaps={value:tt,type:"tv"},gt.directionalLightMatrices={value:$,type:"m4v"},gt.directionalLightShadowMapSizes={value:pt,type:"1fv"},Q){var bt=rt.slice(),mt=rt.slice();bt.pop(),mt.shift(),bt.reverse(),mt.reverse(),$.reverse(),gt.shadowCascadeClipsNear={value:bt,type:"1fv"},gt.shadowCascadeClipsFar={value:mt,type:"1fv"}}}if(Z.length>0){var nt=Z.map(lt);(gt=j.shadowUniforms).spotLightShadowMaps={value:Z,type:"tv"},gt.spotLightMatrices={value:q,type:"m4v"},gt.spotLightShadowMapSizes={value:nt,type:"1fv"}}et.length>0&&(gt.pointLightShadowMaps={value:et,type:"tv"})}function lt(ct){return ct.height}},renderDirectionalLightShadow:(P=new i.a,b=new s.a,N=new t.a,B=new s.a,z=new s.a,F=new s.a,V=new s.a,function(U,j,X,Y,J,K,Q){var Z=this._getDepthMaterial(Y),q={getMaterial:function(Mt){return Mt.shadowDepthMaterial||Z},isMaterialChanged:A,getUniform:C,ifRender:function(Mt){return Mt.castShadow},sortCompare:a.a.opaqueSortCompare};if(!j.viewBoundingBoxLastFrame.isFinite()){var tt=j.getBoundingBox();j.viewBoundingBoxLastFrame.copy(tt).applyTransform(X.viewMatrix)}var $=Math.min(-j.viewBoundingBoxLastFrame.min.z,X.far),rt=Math.max(-j.viewBoundingBoxLastFrame.max.z,X.near),et=this._getDirectionalLightCamera(Y,j,X),it=F.array;V.copy(et.projectionMatrix),x.a.invert(z.array,et.worldTransform.array),x.a.multiply(z.array,z.array,X.worldTransform.array),x.a.multiply(it,V.array,z.array);for(var ot=[],st=D(X,f.a),at=(X.near+X.far)/(X.near-X.far),vt=2*X.near*X.far/(X.near-X.far),yt=0;yt<=Y.shadowCascade;yt++){var gt=rt*Math.pow($/rt,yt/Y.shadowCascade),pt=rt+($-rt)*yt/Y.shadowCascade,bt=gt*Y.cascadeSplitLogFactor+pt*(1-Y.cascadeSplitLogFactor);ot.push(bt),J.push(-(-bt*at+vt)/-bt)}var mt=this._getTexture(Y,Y.shadowCascade);Q.push(mt);var nt=U.viewport,lt=U.gl;for(this._frameBuffer.attach(mt),this._frameBuffer.bind(U),lt.clear(lt.COLOR_BUFFER_BIT|lt.DEPTH_BUFFER_BIT),yt=0;yt<Y.shadowCascade;yt++){var ct=ot[yt],ht=ot[yt+1];st?x.a.perspective(b.array,X.fov/180*Math.PI,X.aspect,ct,ht):x.a.ortho(b.array,X.left,X.right,X.bottom,X.top,ct,ht),P.setFromProjection(b),P.getTransformedBoundingBox(N,z),N.applyProjection(V);var ft=N.min.array,_t=N.max.array;ft[0]=Math.max(ft[0],-1),ft[1]=Math.max(ft[1],-1),_t[0]=Math.min(_t[0],1),_t[1]=Math.min(_t[1],1),B.ortho(ft[0],_t[0],ft[1],_t[1],1,-1),et.projectionMatrix.multiplyLeft(B);var wt=Y.shadowResolution||512;U.setViewport((Y.shadowCascade-yt-1)*wt,0,wt,wt,1);var Tt=j.updateRenderList(et);U.renderPass(Tt.opaque,et,q),this.softShadow===H.VSM&&this._gaussianFilter(U,mt,mt.width);var It=new s.a;It.copy(et.viewMatrix).multiplyLeft(et.projectionMatrix),K.push(It.array),et.projectionMatrix.copy(V)}this._frameBuffer.unbind(U),U.setViewport(nt)}),renderSpotLightShadow:function(U,j,X,Y,J){var K=this._getTexture(X),Q=this._getSpotLightCamera(X),Z=U.gl;this._frameBuffer.attach(K),this._frameBuffer.bind(U),Z.clear(Z.COLOR_BUFFER_BIT|Z.DEPTH_BUFFER_BIT);var q=this._getDepthMaterial(X),tt={getMaterial:function(et){return et.shadowDepthMaterial||q},isMaterialChanged:A,getUniform:C,ifRender:function(et){return et.castShadow},sortCompare:a.a.opaqueSortCompare},$=j.updateRenderList(Q);U.renderPass($.opaque,Q,tt),this._frameBuffer.unbind(U),this.softShadow===H.VSM&&this._gaussianFilter(U,K,K.width);var rt=new s.a;rt.copy(Q.worldTransform).invert().multiplyLeft(Q.projectionMatrix),J.push(K),Y.push(rt.array)},renderPointLightShadow:function(U,j,X,Y){var J=this._getTexture(X),K=U.gl;Y.push(J);var Q=this._getDepthMaterial(X),Z={getMaterial:function(yt){return yt.shadowDepthMaterial||Q},getUniform:C,sortCompare:a.a.opaqueSortCompare},q={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},tt=new t.a,$=X.getWorldPosition().array,rt=new t.a,et=X.range;rt.min.setArray($),rt.max.setArray($);var it=new e.a(et,et,et);rt.max.add(it),rt.min.sub(it);var ot={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};j.traverse(function(yt){if(yt.isRenderable()&&yt.castShadow){var gt=yt.geometry;if(!gt.boundingBox){for(var pt=0;pt<M.length;pt++)q[M[pt]].push(yt);return}if(tt.transformFrom(gt.boundingBox,yt.worldTransform),!tt.intersectBoundingBox(rt))return;for(tt.updateVertices(),pt=0;pt<M.length;pt++)ot[M[pt]]=!1;for(pt=0;pt<8;pt++){var bt=tt.vertices[pt],mt=bt[0]-$[0],nt=bt[1]-$[1],lt=bt[2]-$[2],ct=Math.abs(mt),ht=Math.abs(nt),ft=Math.abs(lt);ct>ht?ct>ft?ot[mt>0?"px":"nx"]=!0:ot[lt>0?"pz":"nz"]=!0:ht>ft?ot[nt>0?"py":"ny"]=!0:ot[lt>0?"pz":"nz"]=!0}for(pt=0;pt<M.length;pt++)ot[M[pt]]&&q[M[pt]].push(yt)}});for(var st=0;st<6;st++){var at=M[st],vt=this._getPointLightCamera(X,at);this._frameBuffer.attach(J,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+st),this._frameBuffer.bind(U),K.clear(K.COLOR_BUFFER_BIT|K.DEPTH_BUFFER_BIT),U.renderPass(q[at],vt,Z)}this._frameBuffer.unbind(U)},_getDepthMaterial:function(U){var j=this._lightMaterials[U.__uid__],X=U.type==="POINT_LIGHT";if(!j){var Y=X?"clay.sm.distance.":"clay.sm.depth.";j=new r.a({precision:this.precision,shader:new o.a(o.a.source(Y+"vertex"),o.a.source(Y+"fragment"))}),this._lightMaterials[U.__uid__]=j}return U.shadowSlopeScale!=null&&j.setUniform("slopeScale",U.shadowSlopeScale),U.shadowBias!=null&&j.setUniform("bias",U.shadowBias),this.softShadow===H.VSM?j.define("fragment","USE_VSM"):j.undefine("fragment","USE_VSM"),X&&(j.set("lightPosition",U.getWorldPosition().array),j.set("range",U.range)),j},_gaussianFilter:function(U,j,X){var Y={width:X,height:X,type:h.a.FLOAT},J=this._texturePool.get(Y);this._frameBuffer.attach(J),this._frameBuffer.bind(U),this._gaussianPassH.setUniform("texture",j),this._gaussianPassH.setUniform("textureWidth",X),this._gaussianPassH.render(U),this._frameBuffer.attach(j),this._gaussianPassV.setUniform("texture",J),this._gaussianPassV.setUniform("textureHeight",X),this._gaussianPassV.render(U),this._frameBuffer.unbind(U),this._texturePool.put(J)},_getTexture:function(U,j){var X=U.__uid__,Y=this._textures[X],J=U.shadowResolution||512;return j=j||1,Y||((Y=U.type==="POINT_LIGHT"?new d.a:new p.a).width=J*j,Y.height=J,this.softShadow===H.VSM?(Y.type=h.a.FLOAT,Y.anisotropic=4):(Y.minFilter=l.a.NEAREST,Y.magFilter=l.a.NEAREST,Y.useMipmap=!1),this._textures[X]=Y),Y},_getPointLightCamera:function(U,j){this._lightCameras.point||(this._lightCameras.point={px:new f.a,nx:new f.a,py:new f.a,ny:new f.a,pz:new f.a,nz:new f.a});var X=this._lightCameras.point[j];switch(X.far=U.range,X.fov=90,X.position.set(0,0,0),j){case"px":X.lookAt(e.a.POSITIVE_X,e.a.NEGATIVE_Y);break;case"nx":X.lookAt(e.a.NEGATIVE_X,e.a.NEGATIVE_Y);break;case"py":X.lookAt(e.a.POSITIVE_Y,e.a.POSITIVE_Z);break;case"ny":X.lookAt(e.a.NEGATIVE_Y,e.a.NEGATIVE_Z);break;case"pz":X.lookAt(e.a.POSITIVE_Z,e.a.NEGATIVE_Y);break;case"nz":X.lookAt(e.a.NEGATIVE_Z,e.a.NEGATIVE_Y)}return U.getWorldPosition(X.position),X.update(),X},_getDirectionalLightCamera:function(){var U=new s.a,j=new t.a,X=new t.a;return function(Y,J,K){this._lightCameras.directional||(this._lightCameras.directional=new v.a);var Q=this._lightCameras.directional;j.copy(J.viewBoundingBoxLastFrame),j.intersection(K.frustum.boundingBox),Q.position.copy(j.min).add(j.max).scale(.5).transformMat4(K.worldTransform),Q.rotation.copy(Y.rotation),Q.scale.copy(Y.scale),Q.updateWorldTransform(),s.a.invert(U,Q.worldTransform),s.a.multiply(U,U,K.worldTransform),X.copy(j).applyTransform(U);var Z=X.min.array,q=X.max.array;return Q.position.set((Z[0]+q[0])/2,(Z[1]+q[1])/2,q[2]).transformMat4(Q.worldTransform),Q.near=0,Q.far=-Z[2]+q[2],isNaN(this.lightFrustumBias)?Q.far*=4:Q.far+=this.lightFrustumBias,Q.left=Z[0],Q.right=q[0],Q.top=q[1],Q.bottom=Z[1],Q.update(!0),Q}}(),_getSpotLightCamera:function(U){this._lightCameras.spot||(this._lightCameras.spot=new f.a);var j=this._lightCameras.spot;return j.fov=2*U.penumbraAngle,j.far=U.range,j.worldTransform.copy(U.worldTransform),j.updateProjectionMatrix(),x.a.invert(j.viewMatrix.array,j.worldTransform.array),j},dispose:function(U){var j=U.gl||U;for(var X in this._frameBuffer&&this._frameBuffer.dispose(j),this._textures)this._textures[X].dispose(j);this._texturePool.clear(U.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var Y=0;Y<this._receivers.length;Y++){var J=this._receivers[Y];if(J.material){var K=J.material;K.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),K.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),K.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),K.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});H.VSM=1,H.PCF=2,g.a=H},function(_,g,u){g.a=`@export clay.sm.depth.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
uniform vec2 uvRepeat = vec2(1.0, 1.0);
uniform vec2 uvOffset = vec2(0.0, 0.0);
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
void main(){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 v_ViewPosition = worldViewProjection * P;
 gl_Position = v_ViewPosition;
 v_Texcoord = texcoord * uvRepeat + uvOffset;
}
@end
@export clay.sm.depth.fragment
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
uniform float bias : 0.001;
uniform float slopeScale : 1.0;
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
@import clay.util.encode_float
void main(){
 float depth = v_ViewPosition.z / v_ViewPosition.w;
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
#ifdef USE_VSM
 depth = depth * 0.5 + 0.5;
 float moment1 = depth;
 float moment2 = depth * depth;
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 moment2 += 0.25*(dx*dx+dy*dy);
 #endif
 gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);
#else
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;
 #else
 depth += bias;
 #endif
 gl_FragColor = encodeFloat(depth * 0.5 + 0.5);
#endif
}
@end
@export clay.sm.debug_depth
uniform sampler2D depthMap;
varying vec2 v_Texcoord;
@import clay.util.decode_float
void main() {
 vec4 tex = texture2D(depthMap, v_Texcoord);
#ifdef USE_VSM
 gl_FragColor = vec4(tex.rgb, 1.0);
#else
 float depth = decodeFloat(tex);
 gl_FragColor = vec4(depth, depth, depth, 1.0);
#endif
}
@end
@export clay.sm.distance.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 world : WORLD;
attribute vec3 position : POSITION;
@import clay.chunk.skinning_header
varying vec3 v_WorldPosition;
void main (){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = worldViewProjection * P;
 v_WorldPosition = (world * P).xyz;
}
@end
@export clay.sm.distance.fragment
uniform vec3 lightPosition;
uniform float range : 100;
varying vec3 v_WorldPosition;
@import clay.util.encode_float
void main(){
 float dist = distance(lightPosition, v_WorldPosition);
#ifdef USE_VSM
 gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);
#else
 dist = dist / range;
 gl_FragColor = encodeFloat(dist);
#endif
}
@end
@export clay.plugin.shadow_map_common
@import clay.util.decode_float
float tapShadowMap(sampler2D map, vec2 uv, float z){
 vec4 tex = texture2D(map, uv);
 return step(z, decodeFloat(tex) * 2.0 - 1.0);
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {
 float shadowContrib = tapShadowMap(map, uv, z);
 vec2 offset = vec2(1.0 / textureSize) * scale;
#ifdef PCF_KERNEL_SIZE
 for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{
 shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);
 }}
 return shadowContrib / float(PCF_KERNEL_SIZE + 1);
#else
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);
 return shadowContrib / 9.0;
#endif
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize) {
 return pcf(map, uv, z, textureSize, vec2(1.0));
}
float chebyshevUpperBound(vec2 moments, float z){
 float p = 0.0;
 z = z * 0.5 + 0.5;
 if (z <= moments.x) {
 p = 1.0;
 }
 float variance = moments.y - moments.x * moments.x;
 variance = max(variance, 0.0000001);
 float mD = moments.x - z;
 float pMax = variance / (variance + mD * mD);
 pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);
 return max(p, pMax);
}
float computeShadowContrib(
 sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset
) {
 vec4 posInLightSpace = lightVPM * vec4(position, 1.0);
 posInLightSpace.xyz /= posInLightSpace.w;
 float z = posInLightSpace.z;
 if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&
 all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){
 vec2 uv = (posInLightSpace.xy+1.0) / 2.0;
 #ifdef USE_VSM
 vec2 moments = texture2D(map, uv * scale + offset).xy;
 return chebyshevUpperBound(moments, z);
 #else
 return pcf(map, uv * scale + offset, z, textureSize, scale);
 #endif
 }
 return 1.0;
}
float computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {
 return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));
}
float computeShadowContribOmni(samplerCube map, vec3 direction, float range)
{
 float dist = length(direction);
 vec4 shadowTex = textureCube(map, direction);
#ifdef USE_VSM
 vec2 moments = shadowTex.xy;
 float variance = moments.y - moments.x * moments.x;
 float mD = moments.x - dist;
 float p = variance / (variance + mD * mD);
 if(moments.x + 0.001 < dist){
 return clamp(p, 0.0, 1.0);
 }else{
 return 1.0;
 }
#else
 return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);
#endif
}
@end
@export clay.plugin.compute_shadow_map
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)
#ifdef SPOT_LIGHT_SHADOWMAP_COUNT
uniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT
#if defined(SHADOW_CASCADE)
uniform sampler2D directionalLightShadowMaps[1]:unconfigurable;
uniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;
uniform float directionalLightShadowMapSizes[1]:unconfigurable;
uniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;
uniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;
#else
uniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#endif
#ifdef POINT_LIGHT_SHADOWMAP_COUNT
uniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
uniform bool shadowEnabled : true;
#ifdef PCF_KERNEL_SIZE
uniform vec2 pcfKernel[PCF_KERNEL_SIZE];
#endif
@import clay.plugin.shadow_map_common
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,
 spotLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
#ifdef SHADOW_CASCADE
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)
 / (gl_DepthRange.far - gl_DepthRange.near);
 float shadowContrib;
 shadowContribs[0] = 1.0;
 for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{
 if (
 depth >= shadowCascadeClipsNear[_idx_] &&
 depth <= shadowCascadeClipsFar[_idx_]
 ) {
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[0],
 vec2(1.0 / float(SHADOW_CASCADE), 1.0),
 vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)
 );
 shadowContribs[0] = shadowContrib;
 }
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#else
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
#if defined(POINT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){
 vec3 lightPosition;
 vec3 direction;
 for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 lightPosition = pointLightPosition[_idx_];
 direction = position - lightPosition;
 shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);
 }}
 for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
@end`},function(_,g,u){var c=u(9),l=u(5),e=u(4),t=u(10),i=u(179),s=u(191),a=u(193),o=u(195),r=u(1),n=u(196),h=u(198),p=(u(7),u(199)),d=u(86),f=u(87),v=u(88),m=u(89),y=u(90),x=u(91),w=u(92),M=u(93),C=u(94),A=u(200),P=u(201);c.a.import(d.a),c.a.import(f.a),c.a.import(v.a),c.a.import(m.a),c.a.import(y.a),c.a.import(x.a),c.a.import(w.a),c.a.import(M.a),c.a.import(C.a),c.a.import(A.a),c.a.import(P.a);var b={color:{parameters:{width:function(z){return z.getWidth()},height:function(z){return z.getHeight()}}}},N=["composite","FXAA"];function B(){this._sourceTexture=new l.a({type:e.a.HALF_FLOAT}),this._depthTexture=new l.a({format:e.a.DEPTH_COMPONENT,type:e.a.UNSIGNED_INT}),this._framebuffer=new t.a,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,t.a.DEPTH_ATTACHMENT),this._normalPass=new n.a,this._compositor=Object(i.a)(p.a);var z=this._compositor.getNodeByName("source");z.texture=this._sourceTexture;var F=this._compositor.getNodeByName("coc");this._sourceNode=z,this._cocNode=F,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(H){return this._compositor.getNodeByName(H)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=N.map(function(H){return this._compositor.getNodeByName(H)},this);var V={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new s.a(V),this._ssrPass=new a.a(V),this._edgePass=new h.a(V)}B.prototype.resize=function(z,F,V){z*=V=V||1,F*=V;var H=this._sourceTexture,U=this._depthTexture;H.width=z,H.height=F,U.width=z,U.height=F},B.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR},B.prototype._getPrevNode=function(z){for(var F=N.indexOf(z.name)-1,V=this._finalNodesChain[F];V&&!this._compositor.getNodeByName(V.name);)F-=1,V=this._finalNodesChain[F];return V},B.prototype._getNextNode=function(z){for(var F=N.indexOf(z.name)+1,V=this._finalNodesChain[F];V&&!this._compositor.getNodeByName(V.name);)F+=1,V=this._finalNodesChain[F];return V},B.prototype._addChainNode=function(z){var F=this._getPrevNode(z),V=this._getNextNode(z);F&&(F.outputs=b,z.inputs.texture=F.name,V?(z.outputs=b,V.inputs.texture=z.name):z.outputs=null,this._compositor.addNode(z))},B.prototype._removeChainNode=function(z){var F=this._getPrevNode(z),V=this._getNextNode(z);F&&(V?(F.outputs=b,V.inputs.texture=F.name):F.outputs=null,this._compositor.removeNode(z))},B.prototype.updateNormal=function(z,F,V,H){this._ifRenderNormalPass()&&this._normalPass.update(z,F,V)},B.prototype.updateSSAO=function(z,F,V,H){this._ssaoPass.update(z,V,H)},B.prototype.enableSSAO=function(){this._enableSSAO=!0},B.prototype.disableSSAO=function(){this._enableSSAO=!1},B.prototype.enableSSR=function(){this._enableSSR=!0},B.prototype.disableSSR=function(){this._enableSSR=!1},B.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()},B.prototype.getSourceFrameBuffer=function(){return this._framebuffer},B.prototype.getSourceTexture=function(){return this._sourceTexture},B.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)},B.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)},B.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()},B.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()},B.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()},B.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()},B.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0},B.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1},B.prototype.enableEdge=function(){this._enableEdge=!0},B.prototype.disableEdge=function(){this._enableEdge=!1},B.prototype.setBloomIntensity=function(z){this._compositeNode.setParameter("bloomIntensity",z)},B.prototype.setSSAOParameter=function(z,F){switch(z){case"quality":var V={low:6,medium:12,high:32,ultra:62}[F]||12;this._ssaoPass.setParameter("kernelSize",V);break;case"radius":this._ssaoPass.setParameter(z,F),this._ssaoPass.setParameter("bias",F/200);break;case"intensity":this._ssaoPass.setParameter(z,F);break;default:console.warn("Unkown SSAO parameter "+z)}},B.prototype.setDOFParameter=function(z,F){switch(z){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(z,F);break;case"blurRadius":for(var V=0;V<this._dofBlurNodes.length;V++)this._dofBlurNodes[V].setParameter("blurRadius",F);break;case"quality":var H={low:4,medium:8,high:16,ultra:32}[F]||8;for(this._dofBlurKernelSize=H,V=0;V<this._dofBlurNodes.length;V++)this._dofBlurNodes[V].pass.material.define("POISSON_KERNEL_SIZE",H);this._dofBlurKernel=new Float32Array(2*H);break;default:console.warn("Unkown DOF parameter "+z)}},B.prototype.setSSRParameter=function(z,F){if(F!=null)switch(z){case"quality":var V={low:10,medium:15,high:30,ultra:80}[F]||20,H={low:32,medium:16,high:8,ultra:4}[F]||16;this._ssrPass.setParameter("maxIteration",V),this._ssrPass.setParameter("pixelStride",H);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-F,1),0));break;case"physical":this.setPhysicallyCorrectSSR(F);break;default:console.warn("Unkown SSR parameter "+z)}},B.prototype.setPhysicallyCorrectSSR=function(z){this._ssrPass.setPhysicallyCorrect(z)},B.prototype.setEdgeColor=function(z){var F=r.a.parseColor(z);this._edgePass.setParameter("edgeColor",F)},B.prototype.setExposure=function(z){this._compositeNode.setParameter("exposure",Math.pow(2,z))},B.prototype.setColorLookupTexture=function(z,F){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?z:"none",F,{minFilter:r.a.Texture.NEAREST,magFilter:r.a.Texture.NEAREST,flipY:!1})},B.prototype.setColorCorrection=function(z,F){this._compositeNode.setParameter(z,F)},B.prototype.isSSREnabled=function(){return this._enableSSR},B.prototype.composite=function(z,F,V,H,U){var j=this._sourceTexture,X=j;this._enableEdge&&(this._edgePass.update(z,V,j,U),j=X=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(z,V,j,U),X=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=X,this._cocNode.setParameter("depth",this._depthTexture);for(var Y=this._dofBlurKernel,J=this._dofBlurKernelSize,K=U%Math.floor(o.a.length/2/J),Q=0;Q<2*J;Q++)Y[Q]=o.a[Q+K*J*2];for(Q=0;Q<this._dofBlurNodes.length;Q++)this._dofBlurNodes[Q].setParameter("percent",U/30),this._dofBlurNodes[Q].setParameter("poissonKernel",Y);this._cocNode.setParameter("zNear",V.near),this._cocNode.setParameter("zFar",V.far),this._compositor.render(z,H)},B.prototype.dispose=function(z){this._sourceTexture.dispose(z),this._depthTexture.dispose(z),this._framebuffer.dispose(z),this._compositor.dispose(z),this._normalPass.dispose(z),this._ssaoPass.dispose(z)},g.a=B},function(_,g,u){var c=u(180);g.a=c.a},function(_,g,u){var c=u(23),l=u(181),e=u(183),t=u(184),i=u(185),s=u(9),a=u(4),o=u(5),r=u(27),n=u(186);Object(n.a)(s.a);var h=/^#source\((.*?)\)/;function p(x,w,M){var C,A,P,b,N=x.type||"filter";if(N==="filter"){var B=x.shader.trim(),z=h.exec(B);if(z?C=s.a.source(z[1].trim()):B.charAt(0)==="#"&&(C=w.shaders[B.substr(1)]),C||(C=B),!C)return}if(x.inputs)for(var F in A={},x.inputs)typeof x.inputs[F]=="string"?A[F]=x.inputs[F]:A[F]={node:x.inputs[F].node,pin:x.inputs[F].pin};if(x.outputs)for(var F in P={},x.outputs){var V=x.outputs[F];P[F]={},V.attachment!=null&&(P[F].attachment=V.attachment),V.keepLastFrame!=null&&(P[F].keepLastFrame=V.keepLastFrame),V.outputLastFrame!=null&&(P[F].outputLastFrame=V.outputLastFrame),V.parameters&&(P[F].parameters=v(V.parameters))}if(b=N==="scene"?new e.a({name:x.name,scene:M.scene,camera:M.camera,outputs:P}):N==="texture"?new t.a({name:x.name,outputs:P}):new i.a({name:x.name,shader:C,inputs:A,outputs:P})){if(x.parameters)for(var F in x.parameters)typeof(H=x.parameters[F])=="string"?(H=H.trim()).charAt(0)==="#"?H=w.textures[H.substr(1)]:b.on("beforerender",m(F,y(H))):typeof H=="function"&&b.on("beforerender",H),b.setParameter(F,H);if(x.defines&&b.pass)for(var F in x.defines){var H=x.defines[F];b.pass.material.define("fragment",F,H)}}return b}function d(x,w){return x}function f(x,w){return w}function v(x){var w={};if(!x)return w;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(C){var A=x[C];A!=null&&(typeof A=="string"&&(A=a.a[A]),w[C]=A)});var M=x.scale||1;return["width","height"].forEach(function(C){if(x[C]!=null){var A=x[C];typeof A=="string"?(A=A.trim(),w[C]=(P=y(A),b=(b=M)||1,function(N){var B=N.getDevicePixelRatio(),z=N.getWidth()*b,F=N.getHeight()*b;return P(z,F,B)})):w[C]=A}var P,b}),w.width||(w.width=d),w.height||(w.height=f),x.useMipmap!=null&&(w.useMipmap=x.useMipmap),w}function m(x,w){return function(M){var C=M.getDevicePixelRatio(),A=M.getWidth(),P=M.getHeight(),b=w(A,P,C);this.setParameter(x,b)}}function y(x){var w=/^expr\((.*)\)$/.exec(x);if(w)try{var M=new Function("width","height","dpr","return "+w[1]);return M(1,1),M}catch{throw new Error("Invalid expression.")}}g.a=function(x,w){var M=new l.a;w=w||{};var C={textures:{},parameters:{}};for(var A in x.parameters){var P=x.parameters[A];C.parameters[A]=v(P)}return function(b,N,B,z){if(b.textures){var F={},V=0,H=!1,U=B.textureRootPath;c.a.each(b.textures,function(j,X){var Y,J=j.path,K=v(j.parameters);if(Array.isArray(J)&&J.length===6)U&&(J=J.map(function(Q){return c.a.relative2absolute(Q,U)})),Y=new r.a(K);else{if(typeof J!="string")return;U&&(J=c.a.relative2absolute(J,U)),Y=new o.a(K)}Y.load(J),V++,Y.once("success",function(){F[X]=Y,--V==0&&(z(F),H=!0)})}),V!==0||H||z(F)}else z({})}(x,0,w,function(b){C.textures=b,function(N,B){for(var z=0;z<x.nodes.length;z++){var F=p(x.nodes[z],C,w);F&&M.addNode(F)}}()}),M}},function(_,g,u){var c=u(182),l=u(85),e=u(10),t=c.a.extend(function(){return{_outputs:[],_texturePool:new l.a,_frameBuffer:new e.a({depthBuffer:!1})}},{addNode:function(i){c.a.prototype.addNode.call(this,i),i._compositor=this},render:function(i,s){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var a=0;a<this.nodes.length;a++)this.nodes[a].outputs||this._outputs.push(this.nodes[a])}for(a=0;a<this.nodes.length;a++)this.nodes[a].beforeFrame();for(a=0;a<this._outputs.length;a++)this._outputs[a].updateReference();for(a=0;a<this._outputs.length;a++)this._outputs[a].render(i,s);for(a=0;a<this.nodes.length;a++)this.nodes[a].afterFrame()},allocateTexture:function(i){return this._texturePool.get(i)},releaseTexture:function(i){this._texturePool.put(i)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(i){this._texturePool.clear(i)}});g.a=t},function(_,g,u){var c=u(8),l=u(48),e=c.a.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(t){this.nodes.indexOf(t)>=0||(this.nodes.push(t),this._dirty=!0)},removeNode:function(t){typeof t=="string"&&(t=this.getNodeByName(t));var i=this.nodes.indexOf(t);i>=0&&(this.nodes.splice(i,1),this._dirty=!0)},getNodeByName:function(t){for(var i=0;i<this.nodes.length;i++)if(this.nodes[i].name===t)return this.nodes[i]},update:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear();for(t=0;t<this.nodes.length;t++){var i=this.nodes[t];if(i.inputs){for(var s in i.inputs)if(i.inputs[s])if(!i.pass||i.pass.material.isUniformEnabled(s)){var a=i.inputs[s],o=this.findPin(a);o?i.link(s,o.node,o.pin):console.warn(typeof a=="string"?"Node "+a+" not exist":"Pin of "+a.node+"."+a.pin+" not exist")}else console.warn("Pin "+i.name+"."+s+" not used.")}}},findPin:function(t){var i;if((typeof t=="string"||D(t,l.a))&&(t={node:t}),typeof t.node=="string")for(var s=0;s<this.nodes.length;s++){var a=this.nodes[s];a.name===t.node&&(i=a)}else i=t.node;if(i){var o=t.pin;if(o||i.outputs&&(o=Object.keys(i.outputs)[0]),i.outputs[o])return{node:i,pin:o}}}});g.a=e},function(_,g,u){var c=u(48),l=u(11),e=u(10),t=c.a.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new e.a},{render:function(i){this._rendering=!0;var s,a=i.gl;if(this.trigger("beforerender"),this.outputs){var o=this.frameBuffer;for(var r in this.outputs){var n=this.updateParameter(r,i),h=this.outputs[r],p=this._compositor.allocateTexture(n);this._outputTextures[r]=p,typeof(v=h.attachment||a.COLOR_ATTACHMENT0)=="string"&&(v=a[v]),o.attach(p,v)}o.bind(i);var d=i.getGLExtension("EXT_draw_buffers");if(d){var f=[];for(var v in this.outputs)(v=parseInt(v))>=a.COLOR_ATTACHMENT0&&v<=a.COLOR_ATTACHMENT0+8&&f.push(v);d.drawBuffersEXT(f)}i.saveClear(),i.clearBit=l.a.DEPTH_BUFFER_BIT|l.a.COLOR_BUFFER_BIT,s=i.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),i.restoreClear(),o.unbind(i)}else s=i.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);this.trigger("afterrender",s),this._rendering=!1,this._rendered=!0}});g.a=t},function(_,g,u){var c=u(48).a.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(l,e){return this.texture},beforeFrame:function(){},afterFrame:function(){}});g.a=c},function(_,g,u){var c=u(15),l=u(48),e=l.a.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var t=new c.a({fragment:this.shader});this.pass=t},{render:function(t,i){this.trigger("beforerender",t),this._rendering=!0;var s=t.gl;for(var a in this.inputLinks){var o=(v=this.inputLinks[a]).node.getOutput(t,v.pin);this.pass.setUniform(a,o)}if(this.outputs){this.pass.outputs={};var r={};for(var n in this.outputs){var h=this.updateParameter(n,t);isNaN(h.width)&&this.updateParameter(n,t);var p=this.outputs[n],d=this._compositor.allocateTexture(h);this._outputTextures[n]=d,typeof(f=p.attachment||s.COLOR_ATTACHMENT0)=="string"&&(f=s[f]),r[f]=d}for(var f in this._compositor.getFrameBuffer().bind(t),r)this._compositor.getFrameBuffer().attach(r[f],f);this.pass.render(t),this._compositor.getFrameBuffer().updateMipmap(t)}else this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(t),this.pass.render(t,i);for(var a in this.inputLinks){var v;(v=this.inputLinks[a]).node.removeReference(v.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",t)},updateParameter:function(t,i){var s,a,o=this.outputs[t],r=o.parameters,n=o._parametersCopy;if(n||(n=o._parametersCopy={}),r)for(var h in r)h!=="width"&&h!=="height"&&(n[h]=r[h]);return s=typeof r.width=="function"?r.width.call(this,i):r.width,a=typeof r.height=="function"?r.height.call(this,i):r.height,s=Math.ceil(s),a=Math.ceil(a),n.width===s&&n.height===a||this._outputTextures[t]&&this._outputTextures[t].dispose(i),n.width=s,n.height=a,n},setParameter:function(t,i){this.pass.setUniform(t,i)},getParameter:function(t){return this.pass.getUniform(t)},setParameters:function(t){for(var i in t)this.setParameter(i,t[i])},define:function(t,i){this.pass.material.define("fragment",t,i)},undefine:function(t){this.pass.material.undefine("fragment",t)},removeReference:function(t){this._outputReferences[t]--,this._outputReferences[t]===0&&(this.outputs[t].keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t]))},clear:function(){l.a.prototype.clear.call(this),this.pass.material.disableTexturesAll()}});g.a=e},function(_,g,u){g.a=function(f){f.import(c.a),f.import(l.a),f.import(e.a),f.import(t.a),f.import(i.a),f.import(s.a),f.import(a.a),f.import(o.a),f.import(r.a),f.import(n.a),f.import(h.a),f.import(p.a),f.import(d.a)};var c=u(187),l=u(86),e=u(188),t=u(87),i=u(189),s=u(88),a=u(89),o=u(90),r=u(91),n=u(92),h=u(190),p=u(93),d=u(94)},function(_,g,u){g.a=`@export clay.compositor.coloradjust
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float exposure : 0.0;
uniform float gamma : 1.0;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);
 color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 color = clamp( color * pow(2.0, exposure), 0.0, 1.0);
 color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);
 float luminance = dot( color, w );
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.brightness
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = tex.rgb + vec3(brightness);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.contrast
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float contrast : 1.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.exposure
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float exposure : 0.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb * pow(2.0, exposure);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.gamma
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float gamma : 1.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = pow(tex.rgb, vec3(gamma));
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.saturation
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb;
 float luminance = dot(color, w);
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end`},function(_,g,u){g.a=`@export clay.compositor.hdr.log_lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 float luminance = dot(tex.rgb, w);
 luminance = log(luminance + 0.001);
 gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));
}
@end
@export clay.compositor.hdr.lum_adaption
varying vec2 v_Texcoord;
uniform sampler2D adaptedLum;
uniform sampler2D currentLum;
uniform float frameTime : 0.02;
@import clay.util.rgbm
void main()
{
 float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;
 float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);
 fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));
 gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));
}
@end
@export clay.compositor.lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord );
 float luminance = dot(tex.rgb, w);
 gl_FragColor = vec4(vec3(luminance), 1.0);
}
@end`},function(_,g,u){g.a=`@export clay.compositor.vignette
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float darkness: 1;
uniform float offset: 1;
@import clay.util.rgbm
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = texel.rgb;
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);
 gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));
}
@end`},function(_,g,u){g.a=`@export clay.compositor.lensflare
#define SAMPLE_NUMBER 8
uniform sampler2D texture;
uniform sampler2D lenscolor;
uniform vec2 textureSize : [512, 512];
uniform float dispersal : 0.3;
uniform float haloWidth : 0.4;
uniform float distortion : 1.0;
varying vec2 v_Texcoord;
@import clay.util.rgbm
vec4 textureDistorted(
 in vec2 texcoord,
 in vec2 direction,
 in vec3 distortion
) {
 return vec4(
 decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,
 1.0
 );
}
void main()
{
 vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;
 vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;
 vec2 haloVec = normalize(ghostVec) * haloWidth;
 vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);
 vec4 result = vec4(0.0);
 for (int i = 0; i < SAMPLE_NUMBER; i++)
 {
 vec2 offset = fract(texcoord + ghostVec * float(i));
 float weight = length(vec2(0.5) - offset) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 }
 result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));
 float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 vec2 offset = fract(texcoord + haloVec);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 gl_FragColor = result;
}
@end`},function(_,g,u){var c=u(7),l=u(3),e=u(5),t=u(4),i=u(15),s=u(9),a=u(10),o=u(49),r=u(192);function n(f){for(var v=new Uint8Array(f*f*4),m=0,y=new l.a,x=0;x<f;x++)for(var w=0;w<f;w++)y.set(2*Math.random()-1,2*Math.random()-1,0).normalize(),v[m++]=255*(.5*y.x+.5),v[m++]=255*(.5*y.y+.5),v[m++]=0,v[m++]=255;return v}function h(f){return new e.a({pixels:n(f),wrapS:t.a.REPEAT,wrapT:t.a.REPEAT,width:f,height:f})}function p(f,v,m){var y=new Float32Array(3*f);v=v||0;for(var x=0;x<f;x++){var w=Object(o.a)(x+v,2)*(m?1:2)*Math.PI,M=Object(o.a)(x+v,3)*Math.PI,C=Math.random(),A=Math.cos(w)*Math.sin(M)*C,P=Math.cos(M)*C,b=Math.sin(w)*Math.sin(M)*C;y[3*x]=A,y[3*x+1]=P,y[3*x+2]=b}return y}function d(f){f=f||{},this._ssaoPass=new i.a({fragment:s.a.source("ecgl.ssao.estimate")}),this._blurPass=new i.a({fragment:s.a.source("ecgl.ssao.blur")}),this._framebuffer=new a.a({depthBuffer:!1}),this._ssaoTexture=new e.a,this._blurTexture=new e.a,this._blurTexture2=new e.a,this._depthTex=f.depthTexture,this._normalTex=f.normalTexture,this.setNoiseSize(4),this.setKernelSize(f.kernelSize||12),f.radius!=null&&this.setParameter("radius",f.radius),f.power!=null&&this.setParameter("power",f.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}s.a.import(r.a),d.prototype.setDepthTexture=function(f){this._depthTex=f},d.prototype.setNormalTexture=function(f){this._normalTex=f,this._ssaoPass.material[f?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)},d.prototype.update=function(f,v,m){var y=f.getWidth(),x=f.getHeight(),w=this._ssaoPass,M=this._blurPass;w.setUniform("kernel",this._kernels[m%this._kernels.length]),w.setUniform("depthTex",this._depthTex),this._normalTex!=null&&w.setUniform("normalTex",this._normalTex),w.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var C=new c.a;c.a.transpose(C,v.worldTransform),w.setUniform("projection",v.projectionMatrix.array),w.setUniform("projectionInv",v.invProjectionMatrix.array),w.setUniform("viewInverseTranspose",C.array);var A=this._ssaoTexture,P=this._blurTexture,b=this._blurTexture2;A.width=y/2,A.height=x/2,P.width=y,P.height=x,b.width=y,b.height=x,this._framebuffer.attach(A),this._framebuffer.bind(f),f.gl.clearColor(1,1,1,1),f.gl.clear(f.gl.COLOR_BUFFER_BIT),w.render(f),M.setUniform("textureSize",[y/2,x/2]),M.setUniform("projection",v.projectionMatrix.array),this._framebuffer.attach(P),M.setUniform("direction",0),M.setUniform("ssaoTexture",A),M.render(f),this._framebuffer.attach(b),M.setUniform("textureSize",[y,x]),M.setUniform("direction",1),M.setUniform("ssaoTexture",P),M.render(f),this._framebuffer.unbind(f);var N=f.clearColor;f.gl.clearColor(N[0],N[1],N[2],N[3])},d.prototype.getTargetTexture=function(){return this._blurTexture2},d.prototype.setParameter=function(f,v){f==="noiseTexSize"?this.setNoiseSize(v):f==="kernelSize"?this.setKernelSize(v):f==="intensity"?this._ssaoPass.material.set("intensity",v):this._ssaoPass.setUniform(f,v)},d.prototype.setKernelSize=function(f){this._kernelSize=f,this._ssaoPass.material.define("fragment","KERNEL_SIZE",f),this._kernels=this._kernels||[];for(var v=0;v<30;v++)this._kernels[v]=p(f,v*f,!!this._normalTex)},d.prototype.setNoiseSize=function(f){var v=this._ssaoPass.getUniform("noiseTex");v?(v.data=n(f),v.width=v.height=f,v.dirty()):(v=h(f),this._ssaoPass.setUniform("noiseTex",h(f))),this._ssaoPass.setUniform("noiseTexSize",[f,f])},d.prototype.dispose=function(f){this._blurTexture.dispose(f),this._ssaoTexture.dispose(f),this._blurTexture2.dispose(f)},g.a=d},function(_,g,u){g.a=`@export ecgl.ssao.estimate

uniform sampler2D depthTex;

uniform sampler2D normalTex;

uniform sampler2D noiseTex;

uniform vec2 depthTexSize;

uniform vec2 noiseTexSize;

uniform mat4 projection;

uniform mat4 projectionInv;

uniform mat4 viewInverseTranspose;

uniform vec3 kernel[KERNEL_SIZE];

uniform float radius : 1;

uniform float power : 1;

uniform float bias: 1e-2;

uniform float intensity: 1.0;

varying vec2 v_Texcoord;

float ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {
 float occlusion = 0.0;

 for (int i = 0; i < KERNEL_SIZE; i++) {
 vec3 samplePos = kernel[i];
#ifdef NORMALTEX_ENABLED
 samplePos = kernelBasis * samplePos;
#endif
 samplePos = samplePos * radius + originPos;

 vec4 texCoord = projection * vec4(samplePos, 1.0);
 texCoord.xy /= texCoord.w;

 vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);

 float sampleDepth = depthTexel.r * 2.0 - 1.0;
 if (projection[3][3] == 0.0) {
 sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);
 }
 else {
 sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];
 }
 
 float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));
 occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);
 }
#ifdef NORMALTEX_ENABLED
 occlusion = 1.0 - occlusion / float(KERNEL_SIZE);
#else
 occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);
#endif
 return pow(occlusion, power);
}

void main()
{

 vec4 depthTexel = texture2D(depthTex, v_Texcoord);

#ifdef NORMALTEX_ENABLED
 vec4 tex = texture2D(normalTex, v_Texcoord);
 if (dot(tex.rgb, tex.rgb) == 0.0) {
 gl_FragColor = vec4(1.0);
 return;
 }
 vec3 N = tex.rgb * 2.0 - 1.0;
 N = (viewInverseTranspose * vec4(N, 0.0)).xyz;

 vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;
 vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;
 vec3 T = normalize(rvec - N * dot(rvec, N));
 vec3 BT = normalize(cross(N, T));
 mat3 kernelBasis = mat3(T, BT, N);
#else
 if (depthTexel.r > 0.99999) {
 gl_FragColor = vec4(1.0);
 return;
 }
 mat3 kernelBasis;
#endif

 float z = depthTexel.r * 2.0 - 1.0;

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * projectedPos;

 vec3 position = p4.xyz / p4.w;

 float ao = ssaoEstimator(position, kernelBasis);
 ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);
 gl_FragColor = vec4(vec3(ao), 1.0);
}

@end


@export ecgl.ssao.blur
#define SHADER_NAME SSAO_BLUR

uniform sampler2D ssaoTexture;

#ifdef NORMALTEX_ENABLED
uniform sampler2D normalTex;
#endif

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

uniform int direction: 0.0;

#ifdef DEPTHTEX_ENABLED
uniform sampler2D depthTex;
uniform mat4 projection;
uniform float depthRange : 0.5;

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}
#endif

void main()
{
 float kernel[5];
 kernel[0] = 0.122581;
 kernel[1] = 0.233062;
 kernel[2] = 0.288713;
 kernel[3] = 0.233062;
 kernel[4] = 0.122581;

 vec2 off = vec2(0.0);
 if (direction == 0) {
 off[0] = blurSize / textureSize.x;
 }
 else {
 off[1] = blurSize / textureSize.y;
 }

 vec2 coord = v_Texcoord;

 float sum = 0.0;
 float weightAll = 0.0;

#ifdef NORMALTEX_ENABLED
 vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;
#endif
#if defined(DEPTHTEX_ENABLED)
 float centerDepth = getLinearDepth(v_Texcoord);
#endif

 for (int i = 0; i < 5; i++) {
 vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));

 float w = kernel[i];
#ifdef NORMALTEX_ENABLED
 vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;
 w *= clamp(dot(normal, centerNormal), 0.0, 1.0);
#endif
#ifdef DEPTHTEX_ENABLED
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));
#endif

 weightAll += w;
 sum += texture2D(ssaoTexture, coord).r * w;
 }

 gl_FragColor = vec4(vec3(sum / weightAll), 1.0);
}

@end
`},function(_,g,u){var c=u(7),l=(u(3),u(5)),e=u(4),t=u(15),i=u(9),s=u(10),a=(u(49),u(77)),o=u(194);function r(n){n=n||{},this._ssrPass=new t.a({fragment:i.a.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new t.a({fragment:i.a.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new t.a({fragment:i.a.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new t.a({fragment:i.a.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",n.normalTexture),this._ssrPass.setUniform("gBufferTexture2",n.depthTexture),this._blurPass1.setUniform("gBufferTexture1",n.normalTexture),this._blurPass1.setUniform("gBufferTexture2",n.depthTexture),this._blurPass2.setUniform("gBufferTexture1",n.normalTexture),this._blurPass2.setUniform("gBufferTexture2",n.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new l.a({type:e.a.HALF_FLOAT}),this._texture2=new l.a({type:e.a.HALF_FLOAT}),this._texture3=new l.a({type:e.a.HALF_FLOAT}),this._prevTexture=new l.a({type:e.a.HALF_FLOAT}),this._currentTexture=new l.a({type:e.a.HALF_FLOAT}),this._frameBuffer=new s.a({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}i.a.import(o.a),r.prototype.setAmbientCubemap=function(n,h){this._ssrPass.material.set("specularCubemap",n),this._ssrPass.material.set("specularIntensity",h);var p=n&&h;this._ssrPass.material[p?"enableTexture":"disableTexture"]("specularCubemap")},r.prototype.update=function(n,h,p,d){var f=n.getWidth(),v=n.getHeight(),m=this._ssrTexture,y=this._texture2,x=this._texture3;m.width=this._prevTexture.width=this._currentTexture.width=f/this._downScale,m.height=this._prevTexture.height=this._currentTexture.height=v/this._downScale,y.width=x.width=f,y.height=x.height=v;var w=this._frameBuffer,M=this._ssrPass,C=this._blurPass1,A=this._blurPass2,P=this._blendPass,b=new c.a,N=new c.a;c.a.transpose(b,h.worldTransform),c.a.transpose(N,h.viewMatrix),M.setUniform("sourceTexture",p),M.setUniform("projection",h.projectionMatrix.array),M.setUniform("projectionInv",h.invProjectionMatrix.array),M.setUniform("toViewSpace",b.array),M.setUniform("toWorldSpace",N.array),M.setUniform("nearZ",h.near);var B=d/this._totalSamples*this._samplePerFrame;if(M.setUniform("jitterOffset",B),M.setUniform("sampleOffset",d*this._samplePerFrame),C.setUniform("textureSize",[m.width,m.height]),A.setUniform("textureSize",[f,v]),A.setUniform("sourceTexture",p),C.setUniform("projection",h.projectionMatrix.array),A.setUniform("projection",h.projectionMatrix.array),w.attach(m),w.bind(n),M.render(n),this._physicallyCorrect&&(w.attach(this._currentTexture),P.setUniform("texture1",this._prevTexture),P.setUniform("texture2",m),P.material.set({weight1:d>=1?.95:0,weight2:d>=1?.05:1}),P.render(n)),w.attach(y),C.setUniform("texture",this._physicallyCorrect?this._currentTexture:m),C.render(n),w.attach(x),A.setUniform("texture",y),A.render(n),w.unbind(n),this._physicallyCorrect){var z=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=z}},r.prototype.getTargetTexture=function(){return this._texture3},r.prototype.setParameter=function(n,h){n==="maxIteration"?this._ssrPass.material.define("fragment","MAX_ITERATION",h):this._ssrPass.setUniform(n,h)},r.prototype.setPhysicallyCorrect=function(n){n?(this._normalDistribution||(this._normalDistribution=a.a.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=n},r.prototype.setSSAOTexture=function(n){var h=this._blurPass2;n?(h.material.enableTexture("ssaoTex"),h.material.set("ssaoTex",n)):h.material.disableTexture("ssaoTex")},r.prototype.isFinished=function(n){return!this._physicallyCorrect||n>this._totalSamples/this._samplePerFrame},r.prototype.dispose=function(n){this._ssrTexture.dispose(n),this._texture2.dispose(n),this._texture3.dispose(n),this._prevTexture.dispose(n),this._currentTexture.dispose(n),this._frameBuffer.dispose(n)},g.a=r},function(_,g,u){g.a=`@export ecgl.ssr.main

#define SHADER_NAME SSR
#define MAX_ITERATION 20;
#define SAMPLE_PER_FRAME 5;
#define TOTAL_SAMPLES 128;

uniform sampler2D sourceTexture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform sampler2D gBufferTexture3;
uniform samplerCube specularCubemap;
uniform float specularIntensity: 1;

uniform mat4 projection;
uniform mat4 projectionInv;
uniform mat4 toViewSpace;
uniform mat4 toWorldSpace;

uniform float maxRayDistance: 200;

uniform float pixelStride: 16;
uniform float pixelStrideZCutoff: 50; 
uniform float screenEdgeFadeStart: 0.9; 
uniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; 
uniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;

uniform float nearZ;
uniform vec2 viewportSize : VIEWPORT_SIZE;

uniform float jitterOffset: 0;

varying vec2 v_Texcoord;

#ifdef DEPTH_DECODE
@import clay.util.decode_float
#endif

#ifdef PHYSICALLY_CORRECT
uniform sampler2D normalDistribution;
uniform float sampleOffset: 0;
uniform vec2 normalDistributionSize;

vec3 transformNormal(vec3 H, vec3 N) {
 vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
vec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {
 float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));
 vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;
 return transformNormal(H, N);
}
float G_Smith(float g, float ndv, float ndl) {
 float roughness = 1.0 - g;
 float k = roughness * roughness / 2.0;
 float G1V = ndv / (ndv * (1.0 - k) + k);
 float G1L = ndl / (ndl * (1.0 - k) + k);
 return G1L * G1V;
}
vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}
#endif

float fetchDepth(sampler2D depthTexture, vec2 uv)
{
 vec4 depthTexel = texture2D(depthTexture, uv);
 return depthTexel.r * 2.0 - 1.0;
}

float linearDepth(float depth)
{
 if (projection[3][3] == 0.0) {
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
 }
 else {
 return (depth - projection[3][2]) / projection[2][2];
 }
}

bool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)
{
 if (rayZFar > rayZNear)
 {
 float t = rayZFar; rayZFar = rayZNear; rayZNear = t;
 }
 float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));
 return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;
}


bool traceScreenSpaceRay(
 vec3 rayOrigin, vec3 rayDir, float jitter,
 out vec2 hitPixel, out vec3 hitPoint, out float iterationCount
)
{
 float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)
 ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;

 vec3 rayEnd = rayOrigin + rayDir * rayLength;

 vec4 H0 = projection * vec4(rayOrigin, 1.0);
 vec4 H1 = projection * vec4(rayEnd, 1.0);

 float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;

 vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;

 vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;
 vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;

 P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;
 vec2 delta = P1 - P0;

 bool permute = false;
 if (abs(delta.x) < abs(delta.y)) {
 permute = true;
 delta = delta.yx;
 P0 = P0.yx;
 P1 = P1.yx;
 }
 float stepDir = sign(delta.x);
 float invdx = stepDir / delta.x;

 vec3 dQ = (Q1 - Q0) * invdx;
 float dk = (k1 - k0) * invdx;

 vec2 dP = vec2(stepDir, delta.y * invdx);

 float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);
 float pixStride = 1.0 + strideScaler * pixelStride;

 dP *= pixStride; dQ *= pixStride; dk *= pixStride;

 vec4 pqk = vec4(P0, Q0.z, k0);
 vec4 dPQK = vec4(dP, dQ.z, dk);

 pqk += dPQK * jitter;
 float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);
 float rayZNear;

 bool intersect = false;

 vec2 texelSize = 1.0 / viewportSize;

 iterationCount = 0.0;

 for (int i = 0; i < MAX_ITERATION; i++)
 {
 pqk += dPQK;

 rayZNear = rayZFar;
 rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);

 hitPixel = permute ? pqk.yx : pqk.xy;
 hitPixel *= texelSize;

 intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);

 iterationCount += 1.0;

 dPQK *= 1.2;

 if (intersect) {
 break;
 }
 }

 Q0.xy += dQ.xy * iterationCount;
 Q0.z = pqk.z;
 hitPoint = Q0 / pqk.w;

 return intersect;
}

float calculateAlpha(
 float iterationCount, float reflectivity,
 vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir
)
{
 float alpha = clamp(reflectivity, 0.0, 1.0);
 alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));
 vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;
 float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));
 alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);

 float _eyeFadeStart = eyeFadeStart;
 float _eyeFadeEnd = eyeFadeEnd;
 if (_eyeFadeStart > _eyeFadeEnd) {
 float tmp = _eyeFadeEnd;
 _eyeFadeEnd = _eyeFadeStart;
 _eyeFadeStart = tmp;
 }

 float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);
 alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);

 alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);

 return alpha;
}

@import clay.util.rand

@import clay.util.rgbm

void main()
{
 vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);

 if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {
 discard;
 }

 float g = normalAndGloss.a;
#if !defined(PHYSICALLY_CORRECT)
 if (g <= minGlossiness) {
 discard;
 }
#endif

 float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);

 vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);
 N = normalize((toViewSpace * vec4(N, 0.0)).xyz);

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);
 vec4 pos = projectionInv * projectedPos;
 vec3 rayOrigin = pos.xyz / pos.w;
 vec3 V = -normalize(rayOrigin);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 float iterationCount;
 float jitter = rand(fract(v_Texcoord + jitterOffset));

#ifdef PHYSICALLY_CORRECT
 vec4 color = vec4(vec3(0.0), 1.0);
 vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);
 vec3 albedo = albedoMetalness.rgb;
 float m = albedoMetalness.a;
 vec3 diffuseColor = albedo * (1.0 - m);
 vec3 spec = mix(vec3(0.04), albedo, m);

 float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);

 for (int i = 0; i < SAMPLE_PER_FRAME; i++) {
 vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);
 vec3 rayDir = normalize(reflect(-V, H));
#else
 vec3 rayDir = normalize(reflect(-V, N));
#endif
 vec2 hitPixel;
 vec3 hitPoint;

 bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);

 float dist = distance(rayOrigin, hitPoint);

 vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;
 hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);
#ifdef PHYSICALLY_CORRECT
 float ndl = clamp(dot(N, rayDir), 0.0, 1.0);
 float vdh = clamp(dot(V, H), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);
 vec3 litTexel = vec3(0.0);
 if (dot(hitNormal, rayDir) < 0.0 && intersect) {
 litTexel = texture2D(sourceTexture, hitPixel).rgb;
 litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);

 }
 else {
 #ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;
#endif
 }
 color.rgb += ndl * litTexel * (
 F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)
 );
 }
 color.rgb /= float(SAMPLE_PER_FRAME);
#else
 #if !defined(SPECULARCUBEMAP_ENABLED)
 if (dot(hitNormal, rayDir) >= 0.0) {
 discard;
 }
 if (!intersect) {
 discard;
 }
#endif
 float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);
 vec4 color = texture2D(sourceTexture, hitPixel);
 color.rgb *= alpha;

#ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 alpha = alpha * (intersect ? 1.0 : 0.0);
 float bias = (1.0 -g) * 5.0;
 color.rgb += (1.0 - alpha)
 * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb
 * specularIntensity;
#endif

#endif

 gl_FragColor = encodeHDR(color);
}
@end

@export ecgl.ssr.blur

uniform sampler2D texture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform mat4 projection;
uniform float depthRange : 0.05;

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

#ifdef BLEND
 #ifdef SSAOTEX_ENABLED
uniform sampler2D ssaoTex;
 #endif
uniform sampler2D sourceTexture;
#endif

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}

@import clay.util.rgbm


void main()
{
 @import clay.compositor.kernel.gaussian_9

 vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);
 float g = centerNTexel.a;
 float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;
#ifdef VERTICAL
 vec2 off = vec2(0.0, maxBlurSize / textureSize.y);
#else
 vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);
#endif

 vec2 coord = v_Texcoord;

 vec4 sum = vec4(0.0);
 float weightAll = 0.0;

 vec3 cN = centerNTexel.rgb * 2.0 - 1.0;
 float cD = getLinearDepth(v_Texcoord);
 for (int i = 0; i < 9; i++) {
 vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));
 float w = gaussianKernel[i]
 * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));

 weightAll += w;
 sum += decodeHDR(texture2D(texture, coord)) * w;
 }

#ifdef BLEND
 float aoFactor = 1.0;
 #ifdef SSAOTEX_ENABLED
 aoFactor = texture2D(ssaoTex, v_Texcoord).r;
 #endif
 gl_FragColor = encodeHDR(
 sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))
 );
#else
 gl_FragColor = encodeHDR(sum / weightAll);
#endif
}

@end`},function(_,g,u){g.a=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925]},function(_,g,u){var c=u(5),l=u(4),e=u(9),t=u(10),i=u(19),s=u(15),a=u(60),o=u(197);function r(p,d,f,v,m){var y=p.gl;d.setUniform(y,"1i",f,m),y.activeTexture(y.TEXTURE0+m),v.isRenderable()?v.bind(p):v.unbind(p)}function n(p,d,f,v,m){var y,x,w,M,C=p.gl;return function(A,P,b){if(!M||M.material!==A.material){var N=A.material,B=A.__program,z=N.get("roughness");z==null&&(z=1);var F=N.get("normalMap")||d,V=N.get("roughnessMap"),H=N.get("bumpMap"),U=N.get("uvRepeat"),j=N.get("uvOffset"),X=N.get("detailUvRepeat"),Y=N.get("detailUvOffset"),J=!!H&&N.isTextureEnabled("bumpMap"),K=!!V&&N.isTextureEnabled("roughnessMap"),Q=N.isDefined("fragment","DOUBLE_SIDED");H=H||f,V=V||v,b!==P?(P.set("normalMap",F),P.set("bumpMap",H),P.set("roughnessMap",V),P.set("useBumpMap",J),P.set("useRoughnessMap",K),P.set("doubleSide",Q),U!=null&&P.set("uvRepeat",U),j!=null&&P.set("uvOffset",j),X!=null&&P.set("detailUvRepeat",X),Y!=null&&P.set("detailUvOffset",Y),P.set("roughness",z)):(B.setUniform(C,"1f","roughness",z),y!==F&&r(p,B,"normalMap",F,0),x!==H&&H&&r(p,B,"bumpMap",H,1),w!==V&&V&&r(p,B,"roughnessMap",V,2),U!=null&&B.setUniform(C,"2f","uvRepeat",U),j!=null&&B.setUniform(C,"2f","uvOffset",j),X!=null&&B.setUniform(C,"2f","detailUvRepeat",X),Y!=null&&B.setUniform(C,"2f","detailUvOffset",Y),B.setUniform(C,"1i","useBumpMap",+J),B.setUniform(C,"1i","useRoughnessMap",+K),B.setUniform(C,"1i","doubleSide",+Q)),y=F,x=H,w=V,M=A}}}function h(p){this._depthTex=new c.a({format:l.a.DEPTH_COMPONENT,type:l.a.UNSIGNED_INT}),this._normalTex=new c.a({type:l.a.HALF_FLOAT}),this._framebuffer=new t.a,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,t.a.DEPTH_ATTACHMENT),this._normalMaterial=new i.a({shader:new e.a(e.a.source("ecgl.normal.vertex"),e.a.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=a.a.createBlank("#000"),this._defaultBumpMap=a.a.createBlank("#000"),this._defaultRoughessMap=a.a.createBlank("#000"),this._debugPass=new s.a({fragment:e.a.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}e.a.import(o.a),h.prototype.getDepthTexture=function(){return this._depthTex},h.prototype.getNormalTexture=function(){return this._normalTex},h.prototype.update=function(p,d,f){var v=p.getWidth(),m=p.getHeight(),y=this._depthTex,x=this._normalTex,w=this._normalMaterial;y.width=v,y.height=m,x.width=v,x.height=m;var M=d.getRenderList(f).opaque;this._framebuffer.bind(p),p.gl.clearColor(0,0,0,0),p.gl.clear(p.gl.COLOR_BUFFER_BIT|p.gl.DEPTH_BUFFER_BIT),p.gl.disable(p.gl.BLEND),p.renderPass(M,f,{getMaterial:function(){return w},ifRender:function(C){return C.renderNormal},beforeRender:n(p,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap,this._normalMaterial),sort:p.opaqueSortCompare}),this._framebuffer.unbind(p)},h.prototype.renderDebug=function(p){this._debugPass.render(p)},h.prototype.dispose=function(p){this._depthTex.dispose(p),this._normalTex.dispose(p)},g.a=h},function(_,g,u){g.a=`@export ecgl.normal.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

@import ecgl.common.normalMap.vertexHeader

@import ecgl.common.vertexAnimation.header

void main()
{

 @import ecgl.common.vertexAnimation.main

 @import ecgl.common.uv.main

 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

 @import ecgl.common.normalMap.vertexMain

 gl_Position = worldViewProjection * vec4(pos, 1.0);

}


@end


@export ecgl.normal.fragment

#define ROUGHNESS_CHANEL 0

uniform bool useBumpMap;
uniform bool useRoughnessMap;
uniform bool doubleSide;
uniform float roughness;

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform mat4 viewInverse : VIEWINVERSE;

@import ecgl.common.normalMap.fragmentHeader
@import ecgl.common.bumpMap.header

uniform sampler2D roughnessMap;

void main()
{
 vec3 N = v_Normal;
 
 bool flipNormal = false;
 if (doubleSide) {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 flipNormal = true;
 }
 }

 @import ecgl.common.normalMap.fragmentMain

 if (useBumpMap) {
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 }

 float g = 1.0 - roughness;

 if (useRoughnessMap) {
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
 }

 if (flipNormal) {
 N = -N;
 }

 gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;
 gl_FragColor.a = g;
}
@end`},function(_,g,u){u(7),u(3);var c=u(5),l=u(4),e=u(15),t=u(9),i=u(10);function s(a){a=a||{},this._edgePass=new e.a({fragment:t.a.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",a.normalTexture),this._edgePass.setUniform("depthTexture",a.depthTexture),this._targetTexture=new c.a({type:l.a.HALF_FLOAT}),this._frameBuffer=new i.a,this._frameBuffer.attach(this._targetTexture)}s.prototype.update=function(a,o,r,n){var h=a.getWidth(),p=a.getHeight(),d=this._targetTexture;d.width=h,d.height=p;var f=this._frameBuffer;f.bind(a),this._edgePass.setUniform("projectionInv",o.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[h,p]),this._edgePass.setUniform("texture",r),this._edgePass.render(a),f.unbind(a)},s.prototype.getTargetTexture=function(){return this._targetTexture},s.prototype.setParameter=function(a,o){this._edgePass.setUniform(a,o)},s.prototype.dispose=function(a){this._targetTexture.dispose(a),this._frameBuffer.dispose(a)},g.a=s},function(_,g,u){g.a={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]}},function(_,g,u){g.a=`@export ecgl.dof.coc

uniform sampler2D depth;

uniform float zNear: 0.1;
uniform float zFar: 2000;

uniform float focalDistance: 3;
uniform float focalRange: 1;
uniform float focalLength: 30;
uniform float fstop: 2.8;

varying vec2 v_Texcoord;

@import clay.util.encode_float

void main()
{
 float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;

 float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));

 float aperture = focalLength / fstop;

 float coc;

 float uppper = focalDistance + focalRange;
 float lower = focalDistance - focalRange;
 if (dist <= uppper && dist >= lower) {
 coc = 0.5;
 }
 else {
 float focalAdjusted = dist > uppper ? uppper : lower;

 coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));
 coc = clamp(coc, 0.0, 2.0) / 2.00001;

 if (dist < lower) {
 coc = -coc;
 }
 coc = coc * 0.5 + 0.5;
 }

 gl_FragColor = encodeFloat(coc);
}
@end


@export ecgl.dof.composite

#define DEBUG 0

uniform sampler2D original;
uniform sampler2D blurred;
uniform sampler2D nearfield;
uniform sampler2D coc;
uniform sampler2D nearcoc;
varying vec2 v_Texcoord;

@import clay.util.rgbm
@import clay.util.float

void main()
{
 vec4 blurredColor = texture2D(blurred, v_Texcoord);
 vec4 originalColor = texture2D(original, v_Texcoord);

 float fCoc = decodeFloat(texture2D(coc, v_Texcoord));

 fCoc = abs(fCoc * 2.0 - 1.0);

 float weight = smoothstep(0.0, 1.0, fCoc);
 
#ifdef NEARFIELD_ENABLED
 vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);
 float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));
 fNearCoc = abs(fNearCoc * 2.0 - 1.0);

 gl_FragColor = encodeHDR(
 mix(
 nearfieldColor, mix(originalColor, blurredColor, weight),
 pow(1.0 - fNearCoc, 4.0)
 )
 );
#else
 gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));
#endif

}

@end



@export ecgl.dof.diskBlur

#define POISSON_KERNEL_SIZE 16;

uniform sampler2D texture;
uniform sampler2D coc;
varying vec2 v_Texcoord;

uniform float blurRadius : 10.0;
uniform vec2 textureSize : [512.0, 512.0];

uniform vec2 poissonKernel[POISSON_KERNEL_SIZE];

uniform float percent;

float nrand(const in vec2 n) {
 return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

@import clay.util.rgbm
@import clay.util.float


void main()
{
 vec2 offset = blurRadius / textureSize;

 float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );
 float cosa = cos(rnd);
 float sina = sin(rnd);
 vec4 basis = vec4(cosa, -sina, sina, cosa);

#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)
 offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);
#endif

#ifdef BLUR_COC
 float cocSum = 0.0;
#else
 vec4 color = vec4(0.0);
#endif


 float weightSum = 0.0;

 for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {
 vec2 ofs = poissonKernel[i];

 ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));

 vec2 uv = v_Texcoord + ofs * offset;
 vec4 texel = texture2D(texture, uv);

 float w = 1.0;
#ifdef BLUR_COC
 float fCoc = decodeFloat(texel) * 2.0 - 1.0;
 cocSum += clamp(fCoc, -1.0, 0.0) * w;
#else
 texel = texel;
 #if !defined(BLUR_NEARFIELD)
 float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;
 w *= abs(fCoc);
 #endif
 texel.rgb *= texel.a;
 color += texel * w;
#endif

 weightSum += w;
 }

#ifdef BLUR_COC
 gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);
#else
 color /= weightSum;
 color.rgb /= (color.a + 0.0001);
 gl_FragColor = color;
#endif
}

@end`},function(_,g,u){g.a=`@export ecgl.edge

uniform sampler2D texture;

uniform sampler2D normalTexture;
uniform sampler2D depthTexture;

uniform mat4 projectionInv;

uniform vec2 textureSize;

uniform vec4 edgeColor: [0,0,0,0.8];

varying vec2 v_Texcoord;

vec3 packColor(vec2 coord) {
 float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;
 vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * p;

 return vec3(
 texture2D(normalTexture, coord).rg,
 -p4.z / p4.w / 5.0
 );
}

void main() {
 vec2 cc = v_Texcoord;
 vec3 center = packColor(cc);

 float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;
 float dx = size / textureSize.x;
 float dy = size / textureSize.y;

 vec2 coord;
 vec3 topLeft = packColor(cc+vec2(-dx, -dy));
 vec3 top = packColor(cc+vec2(0.0, -dy));
 vec3 topRight = packColor(cc+vec2(dx, -dy));
 vec3 left = packColor(cc+vec2(-dx, 0.0));
 vec3 right = packColor(cc+vec2(dx, 0.0));
 vec3 bottomLeft = packColor(cc+vec2(-dx, dy));
 vec3 bottom = packColor(cc+vec2(0.0, dy));
 vec3 bottomRight = packColor(cc+vec2(dx, dy));

 vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;
 vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;

 float edge = sqrt(dot(h, h) + dot(v, v));

 edge = smoothstep(0.8, 1.0, edge);

 gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);
}
@end`},function(_,g,u){var c=u(49),l=u(15),e=u(10),t=u(5),i=u(9),s=u(7);function a(o){for(var r=[],n=0;n<30;n++)r.push([Object(c.a)(n,2),Object(c.a)(n,3)]);this._haltonSequence=r,this._frame=0,this._sourceTex=new t.a,this._sourceFb=new e.a,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new t.a,this._outputTex=new t.a;var h=this._blendPass=new l.a({fragment:i.a.source("clay.compositor.blend")});h.material.disableTexturesAll(),h.material.enableTexture(["texture1","texture2"]),this._blendFb=new e.a({depthBuffer:!1}),this._outputPass=new l.a({fragment:i.a.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(p){p.blendEquationSeparate(p.FUNC_ADD,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE_MINUS_SRC_ALPHA,p.ONE,p.ONE_MINUS_SRC_ALPHA)}}a.prototype={constructor:a,jitterProjection:function(o,r){var n=o.viewport,h=n.devicePixelRatio||o.getDevicePixelRatio(),p=n.width*h,d=n.height*h,f=this._haltonSequence[this._frame%this._haltonSequence.length],v=new s.a;v.array[12]=(2*f[0]-1)/p,v.array[13]=(2*f[1]-1)/d,s.a.mul(r.projectionMatrix,v,r.projectionMatrix),s.a.invert(r.invProjectionMatrix,r.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(o,r){this._prevFrameTex.width=o,this._prevFrameTex.height=r,this._outputTex.width=o,this._outputTex.height=r,this._sourceTex.width=o,this._sourceTex.height=r,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(o,r,n){var h=this._blendPass;this._frame===0?(h.setUniform("weight1",0),h.setUniform("weight2",1)):(h.setUniform("weight1",.9),h.setUniform("weight2",.1)),h.setUniform("texture1",this._prevFrameTex),h.setUniform("texture2",r||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(o),h.render(o),this._blendFb.unbind(o),n||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(o));var p=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=p,this._frame++},dispose:function(o){this._sourceFb.dispose(o),this._blendFb.dispose(o),this._prevFrameTex.dispose(o),this._outputTex.dispose(o),this._sourceTex.dispose(o),this._outputPass.dispose(o),this._blendPass.dispose(o)}},g.a=a},function(_,g,u){var c=u(0),l=u.n(c);u(204),u(205),u(97),l.a.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(e,t){t.eachComponent({mainType:"geo3D",query:e},function(i){i.setView(e)})})},function(_,g,u){var c=u(0),l=u.n(c),e=u(44),t=u(28),i=u(29),s=u(31),a=u(95),o=l.a.extendComponentModel({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var r=this.option;r.regions=this.getFilledRegions(r.regions,r.map);var n=l.a.helper.completeDimensions(["value"],r.data,{encodeDef:this.get("encode"),dimsDef:this.get("dimensions")}),h=new l.a.List(n,this);h.initData(r.regions);var p={};h.each(function(d){var f=h.getName(d),v=h.getItemModel(d);p[f]=v}),this._regionModelMap=p,this._data=h},getData:function(){return this._data},getRegionModel:function(r){var n=this.getData().getName(r);return this._regionModelMap[n]||new l.a.Model(null,this)},getRegionPolygonCoords:function(r){var n=this.getData().getName(r),h=this.coordinateSystem.getRegion(n);return h?h.geometries:[]},getFormattedLabel:function(r,n){var h=this._data.getName(r),p=this.getRegionModel(h),d=p.get(n==="normal"?["label","formatter"]:["emphasis","label","formatter"]);d==null&&(d=p.get(["label","formatter"]));var f={name:h};if(S.fnWatch||(S.fnWatch=this._data.hostModel.option.fnWatch),typeof d=="function")return S.params=f,f.status=n,d(f);if(typeof d=="string"){var v=f.seriesName;return d.replace("{a}",v!=null?v:"")}return h},defaultOption:{regions:[]}});l.a.util.merge(o.prototype,a.a),l.a.util.merge(o.prototype,e.a),l.a.util.merge(o.prototype,t.a),l.a.util.merge(o.prototype,i.a),l.a.util.merge(o.prototype,s.a)},function(_,g,u){var c=u(63),l=u(0),e=u.n(l),t=u(1),i=u(45),s=u(30);e.a.extendComponentView({type:"geo3D",__ecgl__:!0,init:function(a,o){this._geo3DBuilder=new c.a(o),this.groupGL=new t.a.Node,this._lightRoot=new t.a.Node,this._sceneHelper=new s.a(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new i.a({zr:o.getZr()}),this._control.init()},render:function(a,o,r){this.groupGL.add(this._geo3DBuilder.rootNode);var n=a.coordinateSystem;if(n&&n.viewGL){n.viewGL.add(this._lightRoot),a.get("show")?n.viewGL.add(this.groupGL):n.viewGL.remove(this.groupGL);var h=this._control;h.setViewGL(n.viewGL);var p=a.getModel("viewControl");h.setFromViewControlModel(p,0),this._sceneHelper.setScene(n.viewGL.scene),this._sceneHelper.updateLight(a),n.viewGL.setPostEffect(a.getModel("postEffect"),r),n.viewGL.setTemporalSuperSampling(a.getModel("temporalSuperSampling")),this._geo3DBuilder.update(a,o,r,0,a.getData().count());var d=n.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(f){f.material&&f.material[d]("fragment","SRGB_DECODE")}),h.off("update"),h.on("update",function(){r.dispatchAction({type:"geo3DChangeCamera",alpha:h.getAlpha(),beta:h.getBeta(),distance:h.getDistance(),center:h.getCenter(),from:this.uid,geo3DId:a.id})}),h.update()}},afterRender:function(a,o,r,n){var h=n.renderer;this._sceneHelper.updateAmbientCubemap(h,a,r),this._sceneHelper.updateSkybox(h,a,r)},dispose:function(){this._control.dispose()}})},function(_,g,u){function c(b,N,B){B=B||2;var z,F,V,H,U,j,X,Y=N&&N.length,J=Y?N[0]*B:b.length,K=l(b,0,J,B,!0),Q=[];if(!K)return Q;if(Y&&(K=function(q,tt,$,rt){var et,it,ot,st=[];for(et=0,it=tt.length;et<it;et++)(ot=l(q,tt[et]*rt,et<it-1?tt[et+1]*rt:q.length,rt,!1))===ot.next&&(ot.steiner=!0),st.push(p(ot));for(st.sort(r),et=0;et<st.length;et++)n(st[et],$),$=e($,$.next);return $}(b,N,K,B)),b.length>80*B){z=V=b[0],F=H=b[1];for(var Z=B;Z<J;Z+=B)(U=b[Z])<z&&(z=U),(j=b[Z+1])<F&&(F=j),U>V&&(V=U),j>H&&(H=j);X=Math.max(V-z,H-F)}return t(K,Q,B,z,F,X),Q}function l(b,N,B,z,F){var V,H;if(F===P(b,N,B,z)>0)for(V=N;V<B;V+=z)H=M(V,b[V],b[V+1],H);else for(V=B-z;V>=N;V-=z)H=M(V,b[V],b[V+1],H);return H&&m(H,H.next)&&(C(H),H=H.next),H}function e(b,N){if(!b)return b;N||(N=b);var B,z=b;do if(B=!1,z.steiner||!m(z,z.next)&&v(z.prev,z,z.next)!==0)z=z.next;else{if(C(z),(z=N=z.prev)===z.next)return null;B=!0}while(B||z!==N);return N}function t(b,N,B,z,F,V,H){if(b){!H&&V&&function(Y,J,K,Q){var Z=Y;do Z.z===null&&(Z.z=h(Z.x,Z.y,J,K,Q)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==Y);Z.prevZ.nextZ=null,Z.prevZ=null,function(q){var tt,$,rt,et,it,ot,st,at,vt=1;do{for($=q,q=null,it=null,ot=0;$;){for(ot++,rt=$,st=0,tt=0;tt<vt&&(st++,rt=rt.nextZ);tt++);for(at=vt;st>0||at>0&&rt;)st!==0&&(at===0||!rt||$.z<=rt.z)?(et=$,$=$.nextZ,st--):(et=rt,rt=rt.nextZ,at--),it?it.nextZ=et:q=et,et.prevZ=it,it=et;$=rt}it.nextZ=null,vt*=2}while(ot>1)}(Z)}(b,z,F,V);for(var U,j,X=b;b.prev!==b.next;)if(U=b.prev,j=b.next,V?s(b,z,F,V):i(b))N.push(U.i/B),N.push(b.i/B),N.push(j.i/B),C(b),b=j.next,X=j.next;else if((b=j)===X){H?H===1?t(b=a(b,N,B),N,B,z,F,V,2):H===2&&o(b,N,B,z,F,V):t(e(b),N,B,z,F,V,1);break}}}function i(b){var N=b.prev,B=b,z=b.next;if(v(N,B,z)>=0)return!1;for(var F=b.next.next;F!==b.prev;){if(d(N.x,N.y,B.x,B.y,z.x,z.y,F.x,F.y)&&v(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function s(b,N,B,z){var F=b.prev,V=b,H=b.next;if(v(F,V,H)>=0)return!1;for(var U=F.x<V.x?F.x<H.x?F.x:H.x:V.x<H.x?V.x:H.x,j=F.y<V.y?F.y<H.y?F.y:H.y:V.y<H.y?V.y:H.y,X=F.x>V.x?F.x>H.x?F.x:H.x:V.x>H.x?V.x:H.x,Y=F.y>V.y?F.y>H.y?F.y:H.y:V.y>H.y?V.y:H.y,J=h(U,j,N,B,z),K=h(X,Y,N,B,z),Q=b.nextZ;Q&&Q.z<=K;){if(Q!==b.prev&&Q!==b.next&&d(F.x,F.y,V.x,V.y,H.x,H.y,Q.x,Q.y)&&v(Q.prev,Q,Q.next)>=0)return!1;Q=Q.nextZ}for(Q=b.prevZ;Q&&Q.z>=J;){if(Q!==b.prev&&Q!==b.next&&d(F.x,F.y,V.x,V.y,H.x,H.y,Q.x,Q.y)&&v(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}return!0}function a(b,N,B){var z=b;do{var F=z.prev,V=z.next.next;!m(F,V)&&y(F,z,z.next,V)&&x(F,V)&&x(V,F)&&(N.push(F.i/B),N.push(z.i/B),N.push(V.i/B),C(z),C(z.next),z=b=V),z=z.next}while(z!==b);return z}function o(b,N,B,z,F,V){var H=b;do{for(var U=H.next.next;U!==H.prev;){if(H.i!==U.i&&f(H,U)){var j=w(H,U);return H=e(H,H.next),j=e(j,j.next),t(H,N,B,z,F,V),void t(j,N,B,z,F,V)}U=U.next}H=H.next}while(H!==b)}function r(b,N){return b.x-N.x}function n(b,N){if(N=function(z,F){var V,H=F,U=z.x,j=z.y,X=-1/0;do{if(j<=H.y&&j>=H.next.y&&H.next.y!==H.y){var Y=H.x+(j-H.y)*(H.next.x-H.x)/(H.next.y-H.y);if(Y<=U&&Y>X){if(X=Y,Y===U){if(j===H.y)return H;if(j===H.next.y)return H.next}V=H.x<H.next.x?H:H.next}}H=H.next}while(H!==F);if(!V)return null;if(U===X)return V.prev;var J,K=V,Q=V.x,Z=V.y,q=1/0;for(H=V.next;H!==K;)U>=H.x&&H.x>=Q&&U!==H.x&&d(j<Z?U:X,j,Q,Z,j<Z?X:U,j,H.x,H.y)&&((J=Math.abs(j-H.y)/(U-H.x))<q||J===q&&H.x>V.x)&&x(H,z)&&(V=H,q=J),H=H.next;return V}(b,N),N){var B=w(N,b);e(B,B.next)}}function h(b,N,B,z,F){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b=32767*(b-B)/F)|b<<8))|b<<4))|b<<2))|b<<1))|(N=1431655765&((N=858993459&((N=252645135&((N=16711935&((N=32767*(N-z)/F)|N<<8))|N<<4))|N<<2))|N<<1))<<1}function p(b){var N=b,B=b;do N.x<B.x&&(B=N),N=N.next;while(N!==b);return B}function d(b,N,B,z,F,V,H,U){return(F-H)*(N-U)-(b-H)*(V-U)>=0&&(b-H)*(z-U)-(B-H)*(N-U)>=0&&(B-H)*(V-U)-(F-H)*(z-U)>=0}function f(b,N){return b.next.i!==N.i&&b.prev.i!==N.i&&!function(B,z){var F=B;do{if(F.i!==B.i&&F.next.i!==B.i&&F.i!==z.i&&F.next.i!==z.i&&y(F,F.next,B,z))return!0;F=F.next}while(F!==B);return!1}(b,N)&&x(b,N)&&x(N,b)&&function(B,z){var F=B,V=!1,H=(B.x+z.x)/2,U=(B.y+z.y)/2;do F.y>U!=F.next.y>U&&F.next.y!==F.y&&H<(F.next.x-F.x)*(U-F.y)/(F.next.y-F.y)+F.x&&(V=!V),F=F.next;while(F!==B);return V}(b,N)}function v(b,N,B){return(N.y-b.y)*(B.x-N.x)-(N.x-b.x)*(B.y-N.y)}function m(b,N){return b.x===N.x&&b.y===N.y}function y(b,N,B,z){return!!(m(b,N)&&m(B,z)||m(b,z)&&m(B,N))||v(b,N,B)>0!=v(b,N,z)>0&&v(B,z,b)>0!=v(B,z,N)>0}function x(b,N){return v(b.prev,b,b.next)<0?v(b,N,b.next)>=0&&v(b,b.prev,N)>=0:v(b,N,b.prev)<0||v(b,b.next,N)<0}function w(b,N){var B=new A(b.i,b.x,b.y),z=new A(N.i,N.x,N.y),F=b.next,V=N.prev;return b.next=N,N.prev=b,B.next=F,F.prev=B,z.next=B,B.prev=z,V.next=z,z.prev=V,z}function M(b,N,B,z){var F=new A(b,N,B);return z?(F.next=z.next,F.prev=z,z.next.prev=F,z.next=F):(F.prev=F,F.next=F),F}function C(b){b.next.prev=b.prev,b.prev.next=b.next,b.prevZ&&(b.prevZ.nextZ=b.nextZ),b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function A(b,N,B){this.i=b,this.x=N,this.y=B,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(b,N,B,z){for(var F=0,V=N,H=B-z;V<B;V+=z)F+=(b[H]-b[V])*(b[V+1]+b[H+1]),H=V;return F}g.a=c,c.deviation=function(b,N,B,z){var F=N&&N.length,V=F?N[0]*B:b.length,H=Math.abs(P(b,0,V,B));if(F)for(var U=0,j=N.length;U<j;U++){var X=N[U]*B,Y=U<j-1?N[U+1]*B:b.length;H-=Math.abs(P(b,X,Y,B))}var J=0;for(U=0;U<z.length;U+=3){var K=z[U]*B,Q=z[U+1]*B,Z=z[U+2]*B;J+=Math.abs((b[K]-b[Z])*(b[Q+1]-b[K+1])-(b[K]-b[Q])*(b[Z+1]-b[K+1]))}return H===0&&J===0?0:Math.abs((J-H)/H)}},function(_,g){var u={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};_.exports=function(c,l){if(c==="china"){var e=u[l.name];if(e){var t=l.center;t[0]+=e[0]/10.5,t[1]+=-e[1]/14}}}},function(_,g){var u={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};_.exports=function(c,l){if(c==="world"){var e=u[l.name];if(e){var t=l.center;t[0]=e[0],t[1]=e[1]}}}},function(_,g,u){var c=u(0),l=u.n(c);u(210),u(211),u(213),l.a.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(e,t){t.eachComponent({mainType:"globe",query:e},function(i){i.setView(e)})}),l.a.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(e,t){})},function(_,g,u){var c=u(0),l=u.n(c),e=u(44),t=u(28),i=u(29),s=u(31);function a(r,n){r.id=r.id||r.name||n+""}var o=l.a.extendComponentModel({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){o.superApply(this,"init",arguments),l.a.util.each(this.option.layers,function(r,n){l.a.util.merge(r,this.defaultLayerOption),a(r,n)},this)},mergeOption:function(r){var n=this.option.layers;function h(v){return l.a.util.reduce(v,function(m,y,x){return a(y,x),m[y.id]=y,m},{})}if(this.option.layers=null,o.superApply(this,"mergeOption",arguments),n&&n.length){var p=h(r.layers),d=h(n);for(var f in p)d[f]?l.a.util.merge(d[f],p[f],!0):n.push(r.layers[f]);this.option.layers=n}l.a.util.each(this.option.layers,function(v){l.a.util.merge(v,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(r,n,h){this.displacementData=r,this.displacementWidth=n,this.displacementHeight=h},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var r=this.getDisplacementTexture(),n=this.get("displacementScale");return r&&r!=="none"||(n=0),n},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var r=this.getDisplacementTexture(),n=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==r||this._displacementScale!==n,this._displacementTexture=r,this._displacementScale=n},isDisplacementChanged:function(){return this._displacementChanged}});l.a.util.merge(o.prototype,e.a),l.a.util.merge(o.prototype,t.a),l.a.util.merge(o.prototype,i.a),l.a.util.merge(o.prototype,s.a)},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(45),i=u(30),s=u(212),a=u(2);l.a.extendComponentView({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(o,r){this.groupGL=new e.a.Node,this._sphereGeometry=new e.a.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new e.a.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new e.a.PlaneGeometry,this._earthMesh=new e.a.Mesh({renderNormal:!0}),this._lightRoot=new e.a.Node,this._sceneHelper=new i.a,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._earthMesh),this._control=new t.a({zr:r.getZr()}),this._control.init(),this._layerMeshes={}},render:function(o,r,n){var h=o.coordinateSystem,p=o.get("shading");h.viewGL.add(this._lightRoot),o.get("show")?h.viewGL.add(this.groupGL):h.viewGL.remove(this.groupGL),this._sceneHelper.setScene(h.viewGL.scene),h.viewGL.setPostEffect(o.getModel("postEffect"),n),h.viewGL.setTemporalSuperSampling(o.getModel("temporalSuperSampling"));var d=this._earthMesh;d.geometry=this._sphereGeometry;var f="ecgl."+p;d.material&&d.material.shader.name===f||(d.material=e.a.createMaterial(f)),e.a.setMaterialFromModel(p,d.material,o,n),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(x){var w=d.material.get(x);w&&(w.flipY=!1)}),d.material.set("color",e.a.parseColor(o.get("baseColor")));var v=.99*h.radius;d.scale.set(v,v,v);var m=d.material.setTextureImage("diffuseMap",o.get("baseTexture"),n,{flipY:!1,anisotropic:8});m&&m.surface&&m.surface.attachToMesh(d);var y=d.material.setTextureImage("bumpMap",o.get("heightTexture"),n,{flipY:!1,anisotropic:8});y&&y.surface&&y.surface.attachToMesh(d),d.material[o.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(o,n),this._displaceVertices(o,n),this._updateViewControl(o,n),this._updateLayers(o,n)},afterRender:function(o,r,n,h){var p=h.renderer;this._sceneHelper.updateAmbientCubemap(p,o,n),this._sceneHelper.updateSkybox(p,o,n)},_updateLayers:function(o,r){var n=o.coordinateSystem,h=o.get("layers"),p=n.radius,d=[],f=[],v=[],m=[];l.a.util.each(h,function(C){var A=new l.a.Model(C),P=A.get("type"),b=e.a.loadTexture(A.get("texture"),r,{flipY:!1,anisotropic:8});if(b.surface&&b.surface.attachToMesh(this._earthMesh),P==="blend"){var N=A.get("blendTo"),B=a.a.firstNotNull(A.get("intensity"),1);N==="emission"?(v.push(b),m.push(B)):(d.push(b),f.push(B))}else{var z=A.get("id"),F=this._layerMeshes[z];F||(F=this._layerMeshes[z]=new e.a.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0})),A.get("shading")==="lambert"?(F.material=F.__lambertMaterial||new e.a.Material({autoUpdateTextureStatus:!1,shader:e.a.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),F.__lambertMaterial=F.material):(F.material=F.__colorMaterial||new e.a.Material({autoUpdateTextureStatus:!1,shader:e.a.createShader("ecgl.color"),transparent:!0,depthMask:!1}),F.__colorMaterial=F.material),F.material.enableTexture("diffuseMap");var V=A.get("distance"),H=p+(V==null?n.radius/100:V);F.scale.set(H,H,H),p=H;var U=this._blankTexture||(this._blankTexture=e.a.createBlankTexture("rgba(255, 255, 255, 0)"));F.material.set("diffuseMap",U),e.a.loadTexture(A.get("texture"),r,{flipY:!1,anisotropic:8},function(j){j.surface&&j.surface.attachToMesh(F),F.material.set("diffuseMap",j),r.getZr().refresh()}),A.get("show")?this.groupGL.add(F):this.groupGL.remove(F)}},this);var y=this._earthMesh.material;y.define("fragment","LAYER_DIFFUSEMAP_COUNT",d.length),y.define("fragment","LAYER_EMISSIVEMAP_COUNT",v.length),y.set("layerDiffuseMap",d),y.set("layerDiffuseIntensity",f),y.set("layerEmissiveMap",v),y.set("layerEmissionIntensity",m);var x=o.getModel("debug.wireframe");if(x.get("show")){y.define("both","WIREFRAME_TRIANGLE");var w=e.a.parseColor(x.get("lineStyle.color")||"rgba(0,0,0,0.5)"),M=a.a.firstNotNull(x.get("lineStyle.width"),1);y.set("wireframeLineWidth",M),y.set("wireframeLineColor",w)}else y.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(o,r){var n=o.coordinateSystem,h=o.getModel("viewControl"),p=(n.viewGL.camera,this),d=this._control;d.setViewGL(n.viewGL);var f,v,m=h.get("targetCoord");m!=null&&(v=m[0]+90,f=m[1]),d.setFromViewControlModel(h,{baseDistance:n.radius,alpha:f,beta:v}),d.off("update"),d.on("update",function(){r.dispatchAction({type:"globeChangeCamera",alpha:d.getAlpha(),beta:d.getBeta(),distance:d.getDistance()-n.radius,center:d.getCenter(),from:p.uid,globeId:o.id})})},_displaceVertices:function(o,r){var n=o.get("displacementQuality"),h=o.get("debug.wireframe.show"),p=o.coordinateSystem;if(o.isDisplacementChanged()||n!==this._displacementQuality||h!==this._showDebugWireframe){this._displacementQuality=n,this._showDebugWireframe=h;var d=this._sphereGeometry,f={low:100,medium:200,high:400,ultra:800}[n]||200,v=f/2;(d.widthSegments!==f||h)&&(d.widthSegments=f,d.heightSegments=v,d.build()),this._doDisplaceVertices(d,p),h&&d.generateBarycentric()}},_doDisplaceVertices:function(o,r){var n=o.attributes.position.value,h=o.attributes.texcoord0.value,p=o.__originalPosition;p&&p.length===n.length||((p=new Float32Array(n.length)).set(n),o.__originalPosition=p);for(var d=r.displacementWidth,f=r.displacementHeight,v=r.displacementData,m=0;m<o.vertexCount;m++){var y=3*m,x=2*m,w=p[y+1],M=p[y+2],C=p[y+3],A=h[x++],P=h[x++],b=Math.round(A*(d-1)),N=Math.round(P*(f-1)),B=v?v[N*d+b]:0;n[y+1]=w+w*B,n[y+2]=M+M*B,n[y+3]=C+C*B}o.generateVertexNormals(),o.dirty(),o.updateBoundingBox()},_updateLight:function(o,r){var n=this._earthMesh;this._sceneHelper.updateLight(o);var h=this._sceneHelper.mainLight,p=o.get("light.main.time")||new Date,d=s.a.getPosition(l.a.number.parseDate(p),0,0),f=Math.cos(d.altitude);h.position.y=-f*Math.cos(d.azimuth),h.position.x=Math.sin(d.altitude),h.position.z=f*Math.sin(d.azimuth),h.lookAt(n.getWorldPosition())},dispose:function(o,r){this.groupGL.removeAll(),this._control.dispose()}})},function(_,g,u){var c=Math.PI,l=Math.sin,e=Math.cos,t=Math.tan,i=Math.asin,s=Math.atan2,a=c/180,o=23.4397*a;function r(d,f){return s(l(d)*e(o)-t(f)*l(o),e(d))}function n(d,f,v){return s(l(d),e(d)*l(f)-t(v)*e(f))}function h(d,f,v){return i(l(f)*l(v)+e(f)*e(v)*e(d))}var p={getPosition:function(d,f,v){var m=a*-v,y=a*f,x=function(C){return function(A){return A.valueOf()/864e5-.5+2440588}(C)-2451545}(d),w=function(C){var A,P=function(N){return a*(357.5291+.98560028*N)}(C),b=function(N){return N+a*(1.9148*l(N)+.02*l(2*N)+3e-4*l(3*N))+102.9372*a+c}(P);return{dec:(A=b,i(l(0)*e(o)+e(0)*l(o)*l(A))),ra:r(b,0)}}(x),M=function(C,A){return a*(280.16+360.9856235*C)-A}(x,m)-w.ra;return{azimuth:n(M,y,w.dec),altitude:h(M,y,w.dec)}}};g.a=p},function(_,g,u){var c=u(214),l=u(0),e=u.n(l),t=u(47),i=u.n(t),s=u(22),a=u(2),o=u(1);function r(p,d){var f=p.getBoxLayoutParams(),v=i.a.getLayoutRect(f,{width:d.getWidth(),height:d.getHeight()});v.y=d.getHeight()-v.y-v.height,this.viewGL.setViewport(v.x,v.y,v.width,v.height,d.getDevicePixelRatio()),this.radius=p.get("globeRadius");var m=p.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,m-this.radius)}function n(p,d){var f=[1/0,-1/0];if(p.eachSeries(function(m){if(m.coordinateSystem===this){var y=m.getData(),x=m.coordDimToDataDim("alt"),w=x&&x[0];if(w){var M=y.getDataExtent(w,!0);f[0]=Math.min(f[0],M[0]),f[1]=Math.max(f[1],M[1])}}},this),f&&isFinite(f[1]-f[0])){var v=e.a.helper.createScale(f,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new e.a.Axis("altitude",v),this.resize(this.model,d)}}var h={dimensions:c.a.prototype.dimensions,create:function(p,d){var f=[];return p.eachComponent("globe",function(v){v.__viewGL=v.__viewGL||new s.a;var m=new c.a;m.viewGL=v.__viewGL,v.coordinateSystem=m,m.model=v,f.push(m),m.resize=r,m.resize(v,d),m.update=n}),p.eachSeries(function(v){if(v.get("coordinateSystem")==="globe"){var m=v.getReferringComponents("globe")[0];if(m||(m=p.getComponent("globe")),!m)throw new Error('globe "'+a.a.firstNotNull(v.get("globe3DIndex"),v.get("globe3DId"),0)+'" not found');var y=m.coordinateSystem;v.coordinateSystem=y}}),p.eachComponent("globe",function(v,m){var y=v.coordinateSystem,x=v.getDisplacementTexture(),w=v.getDisplacemenScale();if(v.isDisplacementChanged()){if(v.hasDisplacement()){var M=!0;o.a.loadTexture(x,d,function(C){var A=function(P,b){var N=document.createElement("canvas"),B=N.getContext("2d"),z=P.width,F=P.height;N.width=z,N.height=F,B.drawImage(P,0,0,z,F);for(var V=B.getImageData(0,0,z,F).data,H=new Float32Array(V.length/4),U=0;U<V.length/4;U++){var j=V[4*U];H[U]=j/255*b}return{data:H,width:z,height:F}}(C.image,w);v.setDisplacementData(A.data,A.width,A.height),M||d.dispatchAction({type:"globeUpdateDisplacment"})}),M=!1}else y.setDisplacementData(null,0,0);y.setDisplacementData(v.displacementData,v.displacementWidth,v.displacementHeight)}}),f}};e.a.registerCoordinateSystem("globe",h)},function(_,g,u){var c=u(6).a.vec3;function l(e){this.radius=e,this.viewGL=null,this.altitudeAxis,this.displacementData=null,this.displacementWidth,this.displacementHeight}l.prototype={constructor:l,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(e,t,i){this.displacementData=e,this.displacementWidth=t,this.displacementHeight=i},_getDisplacementScale:function(e,t){var i=(e+180)/360*(this.displacementWidth-1),s=(90-t)/180*(this.displacementHeight-1),a=Math.round(i)+Math.round(s)*this.displacementWidth;return this.displacementData[a]},dataToPoint:function(e,t){var i=e[0],s=e[1],a=e[2]||0,o=this.radius;this.displacementData&&(o*=1+this._getDisplacementScale(i,s)),this.altitudeAxis&&(o+=this.altitudeAxis.dataToCoord(a)),i=i*Math.PI/180,s=s*Math.PI/180;var r=Math.cos(s)*o;return(t=t||[])[0]=-r*Math.cos(i+Math.PI),t[1]=Math.sin(s)*o,t[2]=r*Math.sin(i+Math.PI),t},pointToData:function(e,t){var i=e[0],s=e[1],a=e[2],o=c.len(e);i/=o,s/=o,a/=o;var r=Math.asin(s),n=Math.atan2(a,-i);n<0&&(n=2*Math.PI+n);var h=180*r/Math.PI,p=180*n/Math.PI-180;return(t=t||[])[0]=p,t[1]=h,t[2]=o-this.radius,this.altitudeAxis&&(t[2]=this.altitudeAxis.coordToData(t[2])),t}},g.a=l},function(_,g,u){var c=u(0),l=u.n(c);u(216),u(218),u(219),l.a.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(e,t){t.eachComponent({mainType:"mapbox3D",query:e},function(i){i.setMapboxCameraOption(e)})})},function(_,g,u){var c=u(217),l=u(0),e=u.n(l),t=u(100),i=Object(t.a)("mapbox3D",c.a,function(s){s.forEach(function(a){a.setCameraOption(a.model.getMapboxCameraOption())})});e.a.registerCoordinateSystem("mapbox3D",i)},function(_,g,u){var c=u(99);function l(){c.a.apply(this,arguments)}l.prototype=new c.a,l.prototype.constructor=l,l.prototype.type="mapbox3D",g.a=l},function(_,g,u){var c=u(0),l=u.n(c),e=u(28),t=u(29),i=["zoom","center","pitch","bearing"],s=l.a.extendComponentModel({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var a=this;return i.reduce(function(o,r){return o[r]=a.get(r),o},{})},setMapboxCameraOption:function(a){a!=null&&i.forEach(function(o){a[o]!=null&&(this.option[o]=a[o])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(a){this._mapbox=a}});l.a.util.merge(s.prototype,e.a),l.a.util.merge(s.prototype,t.a)},function(_,g,u){var c=u(0),l=u.n(c),e=u(220),t=u(30),i=u(1),s=u(101);i.a.Shader.import(s.a),l.a.extendComponentView({type:"mapbox3D",__ecgl__:!0,init:function(a,o){var r=o.getZr();this._zrLayer=new e.a("mapbox3D",r),r.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new i.a.Node,this._sceneHelper=new t.a(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var n=this._zrLayer.getMapbox(),h=this._dispatchInteractAction.bind(this,o,n);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(p){n.on(p,h)}),this._groundMesh=new i.a.Mesh({geometry:new i.a.PlaneGeometry,material:new i.a.Material({shader:new i.a.Shader({vertex:i.a.Shader.source("ecgl.displayShadow.vertex"),fragment:i.a.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(a,o,r){var n=this._zrLayer.getMapbox(),h=a.get("style"),p=JSON.stringify(h);p!==this._oldStyleStr&&h&&n.setStyle(h),this._oldStyleStr=p,n.setCenter(a.get("center")),n.setZoom(a.get("zoom")),n.setPitch(a.get("pitch")),n.setBearing(a.get("bearing")),a.setMapbox(n);var d=a.coordinateSystem;d.viewGL.scene.add(this._lightRoot),d.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(d.viewGL.scene),this._sceneHelper.updateLight(a),d.viewGL.setPostEffect(a.getModel("postEffect"),r),d.viewGL.setTemporalSuperSampling(a.getModel("temporalSuperSampling")),this._mapbox3DModel=a},afterRender:function(a,o,r,n){var h=n.renderer;this._sceneHelper.updateAmbientCubemap(h,a,r),this._sceneHelper.updateSkybox(h,a,r),a.coordinateSystem.viewGL.scene.traverse(function(p){p.material&&(p.material.define("fragment","NORMAL_UP_AXIS",2),p.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(a,o,r,n){a.coordinateSystem.setCameraOption(n),this._updateGroundMesh(),r.getZr().refresh()},_dispatchInteractAction:function(a,o,r){a.dispatchAction({type:"mapbox3DChangeCamera",pitch:o.getPitch(),zoom:o.getZoom(),center:o.getCenter().toArray(),bearing:o.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var a=this._mapbox3DModel.coordinateSystem,o=a.dataToPoint(a.center);this._groundMesh.position.set(o[0],o[1],-.001);var r=new i.a.Plane(new i.a.Vector3(0,0,1),0),n=a.viewGL.camera.castRay(new i.a.Vector2(-1,-1)),h=a.viewGL.camera.castRay(new i.a.Vector2(1,1)),p=n.intersectPlane(r),d=h.intersectPlane(r),f=p.dist(d)/a.viewGL.rootNode.scale.x;this._groundMesh.scale.set(f,f,1)}},dispose:function(a,o){this._zrLayer&&this._zrLayer.dispose(),o.getZr().painter.delLayer(-1e3)}})},function(_,g,u){function c(e,t){if(this.id=e,this.zr=t,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}c.prototype.resize=function(){this._mapbox.resize()},c.prototype.getMapbox=function(){return this._mapbox},c.prototype.clear=function(){},c.prototype.refresh=function(){this._mapbox.resize()};var l=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];c.prototype._initEvents=function(){var e=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(t){return t.preventDefault(),!1}},l.forEach(function(t){this._handlers[t]=function(i){var s={};for(var a in i)s[a]=i[a];s.bubbles=!1;var o=new i.constructor(i.type,s);e.dispatchEvent(o)},this.zr.dom.addEventListener(t,this._handlers[t])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},c.prototype.dispose=function(){l.forEach(function(e){this.zr.dom.removeEventListener(e,this._handlers[e])},this)},g.a=c},function(_,g,u){var c=u(0),l=u.n(c);u(222),u(224),u(225),l.a.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(e,t){t.eachComponent({mainType:"maptalks3D",query:e},function(i){i.setMaptalksCameraOption(e)})})},function(_,g,u){var c=u(223),l=u(0),e=u.n(l),t=u(100),i=Object(t.a)("maptalks3D",c.a,function(s){s.forEach(function(a){a.setCameraOption(a.model.getMaptalksCameraOption())})});e.a.registerCoordinateSystem("maptalks3D",i)},function(_,g,u){var c=u(99);function l(){c.a.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}l.prototype=new c.a,l.prototype.constructor=l,l.prototype.type="maptalks3D",g.a=l},function(_,g,u){var c=u(0),l=u.n(c),e=u(28),t=u(29),i=["zoom","center","pitch","bearing"],s=l.a.extendComponentModel({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var a=this;return i.reduce(function(o,r){return o[r]=a.get(r),o},{})},setMaptalksCameraOption:function(a){a!=null&&i.forEach(function(o){a[o]!=null&&(this.option[o]=a[o])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(a){this._maptalks=a}});l.a.util.merge(s.prototype,e.a),l.a.util.merge(s.prototype,t.a)},function(_,g,u){var c=u(0),l=u.n(c),e=u(226),t=u(30),i=u(1),s=u(101);i.a.Shader.import(s.a),l.a.extendComponentView({type:"maptalks3D",__ecgl__:!0,init:function(o,r){this._groundMesh=new i.a.Mesh({geometry:new i.a.PlaneGeometry,material:new i.a.Material({shader:new i.a.Shader({vertex:i.a.Shader.source("ecgl.displayShadow.vertex"),fragment:i.a.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(o,r){var n=r.getZr();this._zrLayer=new e.a("maptalks3D",n,o.get("center"),o.get("zoom")),n.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new i.a.Node,this._sceneHelper=new t.a(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var h=this._zrLayer.getMaptalks(),p=this._dispatchInteractAction.bind(this,r,h);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(d){h.on(d,p)})},render:function(o,r,n){this._zrLayer||this._initMaptalksLayer(o,n);var h=this._zrLayer.getMaptalks(),p=o.get("urlTemplate"),d=h.getBaseLayer();p!==this._oldUrlTemplate&&(d?d.setOptions({urlTemplate:p,attribution:o.get("attribution")}):(d=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:p,subdomains:["a","b","c"],attribution:o.get("attribution")}),h.setBaseLayer(d))),this._oldUrlTemplate=p,h.setCenter(o.get("center")),h.setZoom(o.get("zoom"),{animation:!1}),h.setPitch(o.get("pitch")),h.setBearing(o.get("bearing")),o.setMaptalks(h);var f=o.coordinateSystem;f.viewGL.scene.add(this._lightRoot),f.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(f.viewGL.scene),this._sceneHelper.updateLight(o),f.viewGL.setPostEffect(o.getModel("postEffect"),n),f.viewGL.setTemporalSuperSampling(o.getModel("temporalSuperSampling")),this._maptalks3DModel=o},afterRender:function(o,r,n,h){var p=h.renderer;this._sceneHelper.updateAmbientCubemap(p,o,n),this._sceneHelper.updateSkybox(p,o,n),o.coordinateSystem.viewGL.scene.traverse(function(d){d.material&&(d.material.define("fragment","NORMAL_UP_AXIS",2),d.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(o,r,n,h){o.coordinateSystem.setCameraOption(h),this._updateGroundMesh(),n.getZr().refresh()},_dispatchInteractAction:function(o,r,n){var h;o.dispatchAction({type:"maptalks3DChangeCamera",pitch:r.getPitch(),zoom:(h=r.getResolution(),19-Math.log(h/a)/Math.LN2+1),center:r.getCenter().toArray(),bearing:r.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var o=this._maptalks3DModel.coordinateSystem,r=o.dataToPoint(o.center);this._groundMesh.position.set(r[0],r[1],-.001);var n=new i.a.Plane(new i.a.Vector3(0,0,1),0),h=o.viewGL.camera.castRay(new i.a.Vector2(-1,-1)),p=o.viewGL.camera.castRay(new i.a.Vector2(1,1)),d=h.intersectPlane(n),f=p.intersectPlane(n),v=d.dist(f)/o.viewGL.rootNode.scale.x;this._groundMesh.scale.set(v,v,1)}},dispose:function(o,r){this._zrLayer&&this._zrLayer.dispose(),r.getZr().painter.delLayer(-1e3)}});var a=12756274*Math.PI/(256*Math.pow(2,20))},function(_,g,u){function c(e,t,i,s){if(this.id=e,this.zr=t,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:i,zoom:s,doubleClickZoom:!1,fog:!1}),this._initEvents()}c.prototype.resize=function(){this._maptalks.checkSize()},c.prototype.getMaptalks=function(){return this._maptalks},c.prototype.clear=function(){},c.prototype.refresh=function(){this._maptalks.checkSize()};var l=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];c.prototype._initEvents=function(){var e=this.dom;this._handlers=this._handlers||{contextmenu:function(t){return t.preventDefault(),!1}},l.forEach(function(t){this._handlers[t]=function(i){var s={};for(var a in i)s[a]=i[a];s.bubbles=!1;var o=new i.constructor(i.type,s);t==="mousewheel"||t==="DOMMouseScroll"?e.dispatchEvent(o):e.firstElementChild.dispatchEvent(o)},this.zr.dom.addEventListener(t,this._handlers[t])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},c.prototype.dispose=function(){l.forEach(function(e){this.zr.dom.removeEventListener(e,this._handlers[e])},this),this._maptalks.remove()},g.a=c},function(_,g,u){var c=u(0),l=u.n(c),e=(u(228),u(231),u(233),u(17));l.a.registerVisual(Object(e.a)("bar3D")),l.a.registerProcessor(function(t,i){t.eachSeriesByType("bar3d",function(s){var a=s.getData();a.filterSelf(function(o){return a.hasValue(o)})})})},function(_,g,u){var c=u(0),l=u.n(c),e=u(3),t=u(6),i=u(229),s=u(230),a=t.a.vec3,o=l.a.helper.dataStack.isDimensionStacked;function r(n,h){var p=o(n,h[2]);return{dimension:p?n.getCalculationInfo("stackResultDimension"):h[2],isStacked:p}}l.a.registerLayout(function(n,h){n.eachSeriesByType("bar3D",function(p){var d=p.coordinateSystem,f=d&&d.type;if(f==="globe")(function(v,m){var y=v.getData(),x=v.get("minHeight")||0,w=v.get("barSize"),M=["lng","lat","alt"].map(function(b){return v.coordDimToDataDim(b)[0]});if(w==null){var C=m.radius*Math.PI,A=Object(s.a)(y,M[0],M[1]);w=[C/Math.sqrt(y.count()/A),C/Math.sqrt(y.count()/A)]}else l.a.util.isArray(w)||(w=[w,w]);var P=r(y,M);y.each(M,function(b,N,B,z){var F=y.get(P.dimension,z),V=P.isStacked?F-B:m.altitudeAxis.scale.getExtent()[0],H=Math.max(m.altitudeAxis.dataToCoord(B),x),U=m.dataToPoint([b,N,V]),j=m.dataToPoint([b,N,F]),X=a.sub([],j,U);a.normalize(X,X);var Y=[w[0],H,w[1]];y.setItemLayout(z,[U,X,Y])}),y.setLayout("orient",e.a.UP.array)})(p,d);else if(f==="cartesian3D")Object(i.a)(p,d);else if(f==="geo3D")(function(v,m){var y=v.getData(),x=v.get("barSize"),w=v.get("minHeight")||0,M=["lng","lat","alt"].map(function(N){return v.coordDimToDataDim(N)[0]});if(x==null){var C=Math.min(m.size[0],m.size[2]),A=Object(s.a)(y,M[0],M[1]);x=[C/Math.sqrt(y.count()/A),C/Math.sqrt(y.count()/A)]}else l.a.util.isArray(x)||(x=[x,x]);var P=[0,1,0],b=r(y,M);y.each(M,function(N,B,z,F){var V=y.get(b.dimension,F),H=b.isStacked?V-z:m.altitudeAxis.scale.getExtent()[0],U=Math.max(m.altitudeAxis.dataToCoord(z),w),j=m.dataToPoint([N,B,H]),X=[x[0],U,x[1]];y.setItemLayout(F,[j,P,X])}),y.setLayout("orient",[1,0,0])})(p,d);else{if(f!=="mapbox3D"&&f!=="maptalks3D")throw d?new Error("bar3D doesn't support coordinate system "+d.type):new Error("bar3D doesn't have coordinate system.");(function(v,m){var y=v.getData(),x=v.coordDimToDataDim("lng")[0],w=v.coordDimToDataDim("lat")[0],M=v.coordDimToDataDim("alt")[0],C=v.get("barSize"),A=v.get("minHeight")||0;if(C==null){var P=y.getDataExtent(x),b=y.getDataExtent(w),N=m.dataToPoint([P[0],b[0]]),B=m.dataToPoint([P[1],b[1]]),z=Math.min(Math.abs(N[0]-B[0]),Math.abs(N[1]-B[1]))||1,F=Object(s.a)(y,x,w);C=[z/Math.sqrt(y.count()/F),z/Math.sqrt(y.count()/F)]}else l.a.util.isArray(C)||(C=[C,C]),C[0]/=m.getScale()/16,C[1]/=m.getScale()/16;var V=[0,0,1],H=[x,w,M],U=r(y,H);y.each(H,function(j,X,Y,J){var K=y.get(U.dimension,J),Q=U.isStacked?K-Y:0,Z=m.dataToPoint([j,X,Q]),q=m.dataToPoint([j,X,K]),tt=Math.max(q[2]-Z[2],A),$=[C[0],tt,C[1]];y.setItemLayout(J,[Z,V,$])}),y.setLayout("orient",[1,0,0])})(p,d)}})})},function(_,g,u){var c=u(0),l=u.n(c),e=u(6).a.vec3,t=l.a.helper.dataStack.isDimensionStacked;g.a=function(i,s){var a=i.getData(),o=i.get("barSize");if(o==null){var r,n,h=s.size,p=s.getAxis("x"),d=s.getAxis("y");r=p.type==="category"?.7*p.getBandWidth():.6*Math.round(h[0]/Math.sqrt(a.count())),n=d.type==="category"?.7*d.getBandWidth():.6*Math.round(h[1]/Math.sqrt(a.count())),o=[r,n]}else l.a.util.isArray(o)||(o=[o,o]);var f,v,m,y=s.getAxis("z").scale.getExtent(),x=(v=(f=y)[0],m=f[1],!(v>0&&m>0||v<0&&m<0)),w=["x","y","z"].map(function(A){return i.coordDimToDataDim(A)[0]}),M=t(a,w[2]),C=M?a.getCalculationInfo("stackResultDimension"):w[2];a.each(w,function(A,P,b,N){var B=a.get(C,N),z=M?B-b:x?0:y[0],F=s.dataToPoint([A,P,z]),V=s.dataToPoint([A,P,B]),H=e.dist(F,V),U=[0,V[1]<F[1]?-1:1,0];Math.abs(H)===0&&(H=.1);var j=[o[0],H,o[1]];a.setItemLayout(N,[F,U,j])}),a.setLayout("orient",[1,0,0])}},function(_,g,u){g.a=function(c,l,e){for(var t=c.getDataExtent(l),i=c.getDataExtent(e),s=t[1]-t[0]||t[0],a=i[1]-i[0]||i[0],o=new Uint8Array(2500),r=0;r<c.count();r++){var n=c.get(l,r),h=c.get(e,r),p=Math.floor((n-t[0])/s*49),d=50*Math.floor((h-i[0])/a*49)+p;o[d]=o[d]||1}var f=0;for(r=0;r<o.length;r++)o[r]&&f++;return f/o.length}},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(2),i=u(32),s=u(232),a=u(65),o=u(6).a.vec3;l.a.extendChartView({type:"bar3D",__ecgl__:!0,init:function(r,n){this.groupGL=new e.a.Node,this._api=n,this._labelsBuilder=new a.a(256,256,n);var h=this;this._labelsBuilder.getLabelPosition=function(p,d,f){if(h._data){var v=h._data.getItemLayout(p),m=v[0],y=v[1],x=v[2][1];return o.scaleAndAdd([],m,y,f+x)}return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(r,n,h){var p=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=p,this._barMesh||(this._barMesh=new e.a.Mesh({geometry:new s.a,shadowDepthMaterial:new e.a.Material({shader:new e.a.Shader(e.a.Shader.source("ecgl.sm.depth.vertex"),e.a.Shader.source("ecgl.sm.depth.fragment"))}),culling:r.coordinateSystem.type==="cartesian3D",renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var d=r.coordinateSystem;if(this._doRender(r,h),d&&d.viewGL){d.viewGL.add(this.groupGL);var f=d.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[f]("fragment","SRGB_DECODE")}this._data=r.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(r)},_updateAnimation:function(r){e.a.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,r)},_doRender:function(r,n){var h=r.getData(),p=r.get("shading"),d=p!=="color",f=this,v=this._barMesh,m="ecgl."+p;v.material&&v.material.shader.name===m||(v.material=e.a.createMaterial(m,["VERTEX_COLOR"])),e.a.setMaterialFromModel(p,v.material,r,n),v.geometry.enableNormal=d,v.geometry.resetOffset();var y=r.get("bevelSize"),x=r.get("bevelSmoothness");v.geometry.bevelSegments=x,v.geometry.bevelSize=y;var w=[],M=new Float32Array(4*h.count()),C=0,A=0,P=!1;h.each(function(z){if(h.hasValue(z)){var F=h.getItemVisual(z,"color"),V=h.getItemVisual(z,"opacity");V==null&&(V=1),e.a.parseColor(F,w),w[3]*=V,M[C++]=w[0],M[C++]=w[1],M[C++]=w[2],M[C++]=w[3],w[3]>0&&(A++,w[3]<.99&&(P=!0))}}),v.geometry.setBarCount(A);var b=h.getLayout("orient"),N=this._barIndexOfData=new Int32Array(h.count());A=0,h.each(function(z){if(h.hasValue(z)){var F=h.getItemLayout(z),V=F[0],H=F[1],U=F[2],j=4*z;w[0]=M[j++],w[1]=M[j++],w[2]=M[j++],w[3]=M[j++],w[3]>0&&(f._barMesh.geometry.addBar(V,H,b,U,w,z),N[z]=A++)}else N[z]=-1}),v.geometry.dirty(),v.geometry.updateBoundingBox();var B=v.material;B.transparent=P,B.depthMask=!P,v.geometry.sortTriangles=P,this._initHandler(r,n)},_initHandler:function(r,n){var h=r.getData(),p=this._barMesh,d=r.coordinateSystem.type==="cartesian3D";p.seriesIndex=r.seriesIndex;var f=-1;p.off("mousemove"),p.off("mouseout"),p.on("mousemove",function(v){var m=p.geometry.getDataIndexOfVertex(v.triangle[0]);m!==f&&(this._downplay(f),this._highlight(m),this._labelsBuilder.updateLabels([m]),d&&n.dispatchAction({type:"grid3DShowAxisPointer",value:[h.get("x",m),h.get("y",m),h.get("z",m,!0)]})),f=m,p.dataIndex=m},this),p.on("mouseout",function(v){this._downplay(f),this._labelsBuilder.updateLabels(),f=-1,p.dataIndex=-1,d&&n.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(r){var n=this._data;if(n){var h=this._barIndexOfData[r];if(!(h<0)){var p=n.getItemModel(r).getModel("emphasis.itemStyle"),d=p.get("color"),f=p.get("opacity");if(d==null){var v=n.getItemVisual(r,"color");d=l.a.color.lift(v,-.4)}f==null&&(f=n.getItemVisual(r,"opacity"));var m=e.a.parseColor(d);m[3]*=f,this._barMesh.geometry.setColor(h,m),this._api.getZr().refresh()}}},_downplay:function(r){var n=this._data;if(n){var h=this._barIndexOfData[r];if(!(h<0)){var p=n.getItemVisual(r,"color"),d=n.getItemVisual(r,"opacity"),f=e.a.parseColor(p);f[3]*=d,this._barMesh.geometry.setColor(h,f),this._api.getZr().refresh()}}},highlight:function(r,n,h,p){this._toggleStatus("highlight",r,n,h,p)},downplay:function(r,n,h,p){this._toggleStatus("downplay",r,n,h,p)},_toggleStatus:function(r,n,h,p,d){var f=n.getData(),v=t.a.queryDataIndex(f,d),m=this;v!=null?l.a.util.each(i.a.normalizeToArray(v),function(y){r==="highlight"?this._highlight(y):this._downplay(y)},this):f.each(function(y){r==="highlight"?m._highlight(y):m._downplay(y)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}})},function(_,g,u){var c,l,e,t,i,s,a,o,r=u(0),n=u.n(r),h=u(39),p=u(64),d=u(14),f=u(6),v=f.a.vec3,m=f.a.mat3,y=d.a.extend(function(){return{attributes:{position:new d.a.Attribute("position","float",3,"POSITION"),normal:new d.a.Attribute("normal","float",3,"NORMAL"),color:new d.a.Attribute("color","float",4,"COLOR"),prevPosition:new d.a.Attribute("prevPosition","float",3),prevNormal:new d.a.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(x){var w=this.enableNormal,M=this.getBarVertexCount()*x,C=this.getBarTriangleCount()*x;this.vertexCount!==M&&(this.attributes.position.init(M),w?this.attributes.normal.init(M):this.attributes.normal.value=null,this.attributes.color.init(M)),this.triangleCount!==C&&(this.indices=M>65535?new Uint32Array(3*C):new Uint16Array(3*C),this._dataIndices=new Uint32Array(M))},getBarVertexCount:function(){var x=this.bevelSize>0?this.bevelSegments:0;return x>0?this._getBevelBarVertexCount(x):this.enableNormal?24:8},getBarTriangleCount:function(){var x=this.bevelSize>0?this.bevelSegments:0;return x>0?this._getBevelBarTriangleCount(x):12},_getBevelBarVertexCount:function(x){return 4*(x+1)*(x+1)*2},_getBevelBarTriangleCount:function(x){return(4*x+3+1)*(2*x+1)*2+4},setColor:function(x,w){for(var M=this.getBarVertexCount(),C=M*(x+1),A=M*x;A<C;A++)this.attributes.color.set(A,w);this.dirtyAttribute("color")},getDataIndexOfVertex:function(x){return this._dataIndices?this._dataIndices[x]:null},addBar:function(){for(var x=v.create,w=v.scaleAndAdd,M=x(),C=x(),A=x(),P=x(),b=x(),N=x(),B=x(),z=[],F=[],V=0;V<8;V++)z[V]=x();var H=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],U=[0,1,2,0,2,3],j=[];for(V=0;V<H.length;V++)for(var X=H[V],Y=0;Y<2;Y++){for(var J=[],K=0;K<3;K++)J.push(X[U[3*Y+K]]);j.push(J)}return function(Q,Z,q,tt,$,rt){var et=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(Q,Z,q,tt,this.bevelSize,this.bevelSegments,$);else{v.copy(A,Z),v.normalize(A,A),v.cross(P,q,A),v.normalize(P,P),v.cross(C,A,P),v.normalize(P,P),v.negate(b,C),v.negate(N,A),v.negate(B,P),w(z[0],Q,C,tt[0]/2),w(z[0],z[0],P,tt[2]/2),w(z[1],Q,C,tt[0]/2),w(z[1],z[1],B,tt[2]/2),w(z[2],Q,b,tt[0]/2),w(z[2],z[2],B,tt[2]/2),w(z[3],Q,b,tt[0]/2),w(z[3],z[3],P,tt[2]/2),w(M,Q,A,tt[1]),w(z[4],M,C,tt[0]/2),w(z[4],z[4],P,tt[2]/2),w(z[5],M,C,tt[0]/2),w(z[5],z[5],B,tt[2]/2),w(z[6],M,b,tt[0]/2),w(z[6],z[6],B,tt[2]/2),w(z[7],M,b,tt[0]/2),w(z[7],z[7],P,tt[2]/2);var it=this.attributes;if(this.enableNormal){F[0]=C,F[1]=b,F[2]=A,F[3]=N,F[4]=P,F[5]=B;for(var ot=this._vertexOffset,st=0;st<H.length;st++){for(var at=3*this._triangleOffset,vt=0;vt<6;vt++)this.indices[at++]=ot+U[vt];ot+=4,this._triangleOffset+=2}for(st=0;st<H.length;st++){var yt=F[st];for(vt=0;vt<4;vt++){var gt=H[st][vt];it.position.set(this._vertexOffset,z[gt]),it.normal.set(this._vertexOffset,yt),it.color.set(this._vertexOffset++,$)}}}else{for(st=0;st<j.length;st++){for(at=3*this._triangleOffset,vt=0;vt<3;vt++)this.indices[at+vt]=j[st][vt]+this._vertexOffset;this._triangleOffset++}for(st=0;st<z.length;st++)it.position.set(this._vertexOffset,z[st]),it.color.set(this._vertexOffset++,$)}}var pt=this._vertexOffset;for(st=et;st<pt;st++)this._dataIndices[st]=rt}}(),_addBevelBar:(c=v.create(),l=v.create(),e=v.create(),t=m.create(),i=[],s=[1,-1,-1,1],a=[1,1,-1,-1],o=[2,0],function(x,w,M,C,A,P,b){v.copy(l,w),v.normalize(l,l),v.cross(e,M,l),v.normalize(e,e),v.cross(c,l,e),v.normalize(e,e),t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=l[0],t[4]=l[1],t[5]=l[2],t[6]=e[0],t[7]=e[1],t[8]=e[2],A=Math.min(C[0],C[2])/2*A;for(var N=0;N<3;N++)i[N]=Math.max(C[N]-2*A,0);var B=(C[0]-i[0])/2,z=(C[1]-i[1])/2,F=(C[2]-i[2])/2,V=[],H=[],U=this._vertexOffset,j=[];for(N=0;N<2;N++){j[N]=j[N]=[];for(var X=0;X<=P;X++)for(var Y=0;Y<4;Y++){(X===0&&N===0||N===1&&X===P)&&j[N].push(U);for(var J=0;J<=P;J++){var K=J/P*Math.PI/2+Math.PI/2*Y,Q=X/P*Math.PI/2+Math.PI/2*N;H[0]=B*Math.cos(K)*Math.sin(Q),H[1]=z*Math.cos(Q),H[2]=F*Math.sin(K)*Math.sin(Q),V[0]=H[0]+s[Y]*i[0]/2,V[1]=H[1]+z+o[N]*i[1]/2,V[2]=H[2]+a[Y]*i[2]/2,Math.abs(B-z)<1e-6&&Math.abs(z-F)<1e-6||(H[0]/=B*B,H[1]/=z*z,H[2]/=F*F),v.normalize(H,H),v.transformMat3(V,V,t),v.transformMat3(H,H,t),v.add(V,V,x),this.attributes.position.set(U,V),this.enableNormal&&this.attributes.normal.set(U,H),this.attributes.color.set(U,b),U++}}}var Z=4*P+3,q=2*P+1,tt=Z+1;for(Y=0;Y<q;Y++)for(N=0;N<=Z;N++){var $=Y*tt+N+this._vertexOffset,rt=Y*tt+(N+1)%tt+this._vertexOffset,et=(Y+1)*tt+(N+1)%tt+this._vertexOffset,it=(Y+1)*tt+N+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[et,$,rt]),this.setTriangleIndices(this._triangleOffset++,[et,it,$])}this.setTriangleIndices(this._triangleOffset++,[j[0][0],j[0][2],j[0][1]]),this.setTriangleIndices(this._triangleOffset++,[j[0][0],j[0][3],j[0][2]]),this.setTriangleIndices(this._triangleOffset++,[j[1][0],j[1][1],j[1][2]]),this.setTriangleIndices(this._triangleOffset++,[j[1][0],j[1][2],j[1][3]]),this._vertexOffset=U})});n.a.util.defaults(y.prototype,h.a),n.a.util.defaults(y.prototype,p.a),g.a=y},function(_,g,u){var c=u(0),l=u.n(c),e=u(31),t=u(32),i=u(40),s=u(50),a=l.a.extendSeriesModel({type:"series.bar3D",dependencies:["globe"],visualColorAccessPath:"itemStyle.color",getInitialData:function(o,r){return Object(s.a)(this)},getFormattedLabel:function(o,r,n,h){var p=t.a.getFormattedLabel(this,o,r,n,h);return p==null&&(p=this.getData().get("z",o)),p},formatTooltip:function(o){return Object(i.a)(this,o)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});l.a.util.merge(a.prototype,e.a)},function(_,g,u){var c=u(0),l=u.n(c),e=(u(235),u(236),u(51)),t=u.n(e),i=u(17);l.a.registerVisual(t()("line3D","circle",null)),l.a.registerVisual(Object(i.a)("line3D")),l.a.registerLayout(function(s,a){s.eachSeriesByType("line3D",function(o){var r=o.getData(),n=o.coordinateSystem;if(n){if(n.type!=="cartesian3D")return void console.error("line3D needs cartesian3D coordinateSystem");var h=new Float32Array(3*r.count()),p=[],d=[],f=n.dimensions.map(function(v){return o.coordDimToDataDim(v)[0]});n&&r.each(f,function(v,m,y,x){p[0]=v,p[1]=m,p[2]=y,n.dataToPoint(p,d),h[3*x]=d[0],h[3*x+1]=d[1],h[3*x+2]=d[2]}),r.setLayout("points",h)}})})},function(_,g,u){var c=u(0),l=u.n(c),e=u(40),t=u(50);l.a.extendSeriesModel({type:"series.line3D",dependencies:["grid3D"],visualColorAccessPath:"lineStyle.color",getInitialData:function(i,s){return Object(t.a)(this)},formatTooltip:function(i){return Object(e.a)(this,i)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}})},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(2),i=u(25),s=u(7),a=u(3),o=u(237),r=u.n(o),n=u(6),h=u(46),p=n.a.vec3;e.a.Shader.import(h.a),l.a.extendChartView({type:"line3D",__ecgl__:!0,init:function(d,f){this.groupGL=new e.a.Node,this._api=f},render:function(d,f,v){var m=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=m,this._line3DMesh||(this._line3DMesh=new e.a.Mesh({geometry:new i.a({useNativeLine:!1,sortTriangles:!0}),material:new e.a.Material({shader:e.a.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var y=d.coordinateSystem;if(y&&y.viewGL){y.viewGL.add(this.groupGL);var x=y.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[x]("fragment","SRGB_DECODE")}this._doRender(d,v),this._data=d.getData(),this._camera=y.viewGL.camera,this.updateCamera(),this._updateAnimation(d)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(d,f){var v=d.getData(),m=this._line3DMesh;m.geometry.resetOffset();var y=v.getLayout("points"),x=[],w=new Float32Array(y.length/3*4),M=0,C=!1;v.each(function(b){var N=v.getItemVisual(b,"color"),B=v.getItemVisual(b,"opacity");B==null&&(B=1),e.a.parseColor(N,x),x[3]*=B,w[M++]=x[0],w[M++]=x[1],w[M++]=x[2],w[M++]=x[3],x[3]<.99&&(C=!0)}),m.geometry.setVertexCount(m.geometry.getPolylineVertexCount(y)),m.geometry.setTriangleCount(m.geometry.getPolylineTriangleCount(y)),m.geometry.addPolyline(y,w,t.a.firstNotNull(d.get("lineStyle.width"),1)),m.geometry.dirty(),m.geometry.updateBoundingBox();var A=m.material;A.transparent=C,A.depthMask=!C;var P=d.getModel("debug.wireframe");P.get("show")?(m.geometry.createAttribute("barycentric","float",3),m.geometry.generateBarycentric(),m.material.set("both","WIREFRAME_TRIANGLE"),m.material.set("wireframeLineColor",e.a.parseColor(P.get("lineStyle.color")||"rgba(0,0,0,0.5)")),m.material.set("wireframeLineWidth",t.a.firstNotNull(P.get("lineStyle.width"),1))):m.material.set("both","WIREFRAME_TRIANGLE"),this._points=y,this._initHandler(d,f)},_updateAnimation:function(d){e.a.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,d)},_initHandler:function(d,f){var v=d.getData(),m=d.coordinateSystem,y=this._line3DMesh,x=-1;y.seriesIndex=d.seriesIndex,y.off("mousemove"),y.off("mouseout"),y.on("mousemove",function(w){var M=m.pointToData(w.point.array),C=v.indicesOfNearest("x",M[0])[0];C!==x&&(f.dispatchAction({type:"grid3DShowAxisPointer",value:[v.get("x",C),v.get("y",C),v.get("z",C)]}),y.dataIndex=C),x=C},this),y.on("mouseout",function(w){x=-1,y.dataIndex=-1,f.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var d=new s.a,f=this._camera;s.a.multiply(d,f.projectionMatrix,f.viewMatrix);var v=this._positionNDC,m=this._points,y=m.length/3;v&&v.length/2===y||(v=this._positionNDC=new Float32Array(2*y));for(var x=[],w=0;w<y;w++){var M=3*w,C=2*w;x[0]=m[M],x[1]=m[M+1],x[2]=m[M+2],x[3]=1,p.transformMat4(x,x,d.array),v[C]=x[0]/x[3],v[C+1]=x[1]/x[3]}},_pick:function(d,f,v,m,y,x){var w=this._positionNDC,M=this._data.hostModel.get("lineStyle.width"),C=-1,A=.5*v.viewport.width,P=.5*v.viewport.height;d=(d+1)*A,f=(f+1)*P;for(var b=1;b<w.length/2;b++){var N=(w[2*(b-1)]+1)*A,B=(w[2*(b-1)+1]+1)*P,z=(w[2*b]+1)*A,F=(w[2*b+1]+1)*P;r.a.containStroke(N,B,z,F,M,d,f)&&(C=(N-d)*(N-d)+(B-f)*(B-f)<(z-d)*(z-d)+(F-f)*(F-f)?b-1:b)}if(C>=0){var V=3*C,H=new a.a(this._points[V],this._points[V+1],this._points[V+2]);x.push({dataIndex:C,point:H,pointWorld:H.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(H)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}})},function(_,g){g.containStroke=function(u,c,l,e,t,i,s){if(t===0)return!1;var a,o=t;if(s>c+o&&s>e+o||s<c-o&&s<e-o||i>u+o&&i>l+o||i<u-o&&i<l-o)return!1;if(u===l)return Math.abs(i-u)<=o/2;var r=(a=(c-e)/(u-l))*i-s+(u*e-l*c)/(u-l);return r*r/(a*a+1)<=o/2*o/2}},function(_,g,u){var c=u(0),l=u.n(c),e=(u(239),u(240),u(51)),t=u.n(e),i=u(17);l.a.registerVisual(t()("scatter3D","circle",null)),l.a.registerVisual(Object(i.a)("scatter3D")),l.a.registerLayout({seriesType:"scatter3D",reset:function(s){var a=s.coordinateSystem;if(a){var o=a.dimensions;if(o.length<3)return void console.error("scatter3D needs 3D coordinateSystem");var r=o.map(function(p){return s.coordDimToDataDim(p)[0]}),n=[],h=[];return{progress:function(p,d){for(var f=new Float32Array(3*(p.end-p.start)),v=p.start;v<p.end;v++){var m=3*(v-p.start);n[0]=d.get(r[0],v),n[1]=d.get(r[1],v),n[2]=d.get(r[2],v),a.dataToPoint(n,h),f[m]=h[0],f[m+1]=h[1],f[m+2]=h[2]}d.setLayout("points",f)}}}}})},function(_,g,u){var c=u(0),l=u.n(c),e=u(32),t=u(40),i=u(50);l.a.extendSeriesModel({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualColorAccessPath:"itemStyle.color",getInitialData:function(s,a){return Object(i.a)(this)},getFormattedLabel:function(s,a,o,r){var n=e.a.getFormattedLabel(this,s,a,o,r);if(n==null){var h=this.getData(),p=h.dimensions[h.dimensions.length-1];n=h.get(p,s)}return n},formatTooltip:function(s){return Object(t.a)(this,s)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}})},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(2),i=u(32),s=u(66);l.a.extendChartView({type:"scatter3D",__ecgl__:!0,init:function(a,o){this.groupGL=new e.a.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(a,o,r){if(this.groupGL.removeAll(),a.getData().count()){var n=a.coordinateSystem;if(!n||!n.viewGL)throw new Error("Invalid coordinate system");n.viewGL.add(this.groupGL),this._camera=n.viewGL.camera;var h=this._pointsBuilderList[0];h||(h=this._pointsBuilderList[0]=new s.a(!1,r)),this._pointsBuilderList.length=1,this.groupGL.add(h.rootNode),h.update(a,o,r),h.updateView(n.viewGL.camera)}},incrementalPrepareRender:function(a,o,r){var n=a.coordinateSystem;if(!n||!n.viewGL)throw new Error("Invalid coordinate system");n.viewGL.add(this.groupGL),this._camera=n.viewGL.camera,this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(a,o,r,n){if(!(a.end<=a.start)){var h=this._pointsBuilderList[this._currentStep];h||(h=new s.a(!1,n),this._pointsBuilderList[this._currentStep]=h),this.groupGL.add(h.rootNode),h.update(o,r,n,a.start,a.end),h.updateView(o.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(a){a.updateView(this._camera)},this)},highlight:function(a,o,r,n){this._toggleStatus("highlight",a,o,r,n)},downplay:function(a,o,r,n){this._toggleStatus("downplay",a,o,r,n)},_toggleStatus:function(a,o,r,n,h){var p=o.getData(),d=t.a.queryDataIndex(p,h),f=a==="highlight";d!=null?l.a.util.each(i.a.normalizeToArray(d),function(v){for(var m=0;m<this._pointsBuilderList.length;m++){var y=this._pointsBuilderList[m];f?y.highlight(p,v):y.downplay(p,v)}},this):p.each(function(v){for(var m=0;m<this._pointsBuilderList.length;m++){var y=this._pointsBuilderList[m];f?y.highlight(p,v):y.downplay(p,v)}})},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}})},function(_,g,u){var c=u(0),l=u.n(c);function e(i,s,a){(s=s||document.createElement("canvas")).width=i,s.height=i;var o=s.getContext("2d");return a&&a(o),s}var t={getMarginByStyle:function(i){var s=i.minMargin||0,a=0;i.stroke&&i.stroke!=="none"&&(a=i.lineWidth==null?1:i.lineWidth);var o=i.shadowBlur||0,r=i.shadowOffsetX||0,n=i.shadowOffsetY||0,h={};return h.left=Math.max(a/2,-r+o,s),h.right=Math.max(a/2,r+o,s),h.top=Math.max(a/2,-n+o,s),h.bottom=Math.max(a/2,n+o,s),h},createSymbolSprite:function(i,s,a,o){var r=function(h,p,d,f){l.a.util.isArray(p)||(p=[p,p]);var v=t.getMarginByStyle(d,void 0),m=p[0]+v.left+v.right,y=p[1]+v.top+v.bottom,x=l.a.helper.createSymbol(h,0,0,p[0],p[1]),w=Math.max(m,y);x.position=[v.left,v.top],m>y?x.position[1]+=(w-y)/2:x.position[0]+=(w-m)/2;var M=x.getBoundingRect();return x.position[0]-=M.x,x.position[1]-=M.y,x.setStyle(d),x.update(),x.__size=w,x}(i,s,a),n=t.getMarginByStyle(a);return{image:e(r.__size,o,function(h){r.brush(h)}),margin:n}},createSDFFromCanvas:function(i,s,a,o){return e(s,o,function(r){var n=i.getContext("2d").getImageData(0,0,i.width,i.height);r.putImageData(function(h,p,d){var f=p.width,v=p.height,m=h.canvas.width,y=h.canvas.height,x=f/m,w=v/y;function M(z){return z<128?1:-1}function C(z,F){var V=1/0;z=Math.floor(z*x);for(var H=(F=Math.floor(F*w))*f+z,U=M(p.data[4*H]),j=Math.max(F-d,0);j<Math.min(F+d,v);j++)for(var X=Math.max(z-d,0);X<Math.min(z+d,f);X++){H=j*f+X;var Y=X-z,J=j-F;if(U!==M(p.data[4*H])){var K=Y*Y+J*J;K<V&&(V=K)}}return U*Math.sqrt(V)}for(var A=h.createImageData(m,y),P=0;P<y;P++)for(var b=0;b<m;b++){var N=C(b,P)/d*.5+.5,B=4*(P*m+b);A.data[B++]=255*(1-N),A.data[B++]=255*(1-N),A.data[B++]=255*(1-N),A.data[B++]=255}return A}(r,n,a),0,0)})},createSimpleSprite:function(i,s){return e(i,s,function(a){var o=i/2;a.beginPath(),a.arc(o,o,60,0,2*Math.PI,!1),a.closePath();var r=a.createRadialGradient(o,o,0,o,o,o);r.addColorStop(0,"rgba(255, 255, 255, 1)"),r.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),r.addColorStop(1,"rgba(255, 255, 255, 0)"),a.fillStyle=r,a.fill()})}};g.a=t},function(_,g,u){var c=u(1),l=u(243),e=u(0),t=u.n(e),i=u(6),s=u(244),a=i.a.vec4;c.a.Shader.import(s.a);var o=c.a.Mesh.extend(function(){var r=new c.a.Geometry({dynamic:!0,attributes:{color:new c.a.Geometry.Attribute("color","float",4,"COLOR"),position:new c.a.Geometry.Attribute("position","float",3,"POSITION"),size:new c.a.Geometry.Attribute("size","float",1),prevPosition:new c.a.Geometry.Attribute("prevPosition","float",3),prevSize:new c.a.Geometry.Attribute("prevSize","float",1)}});t.a.util.extend(r,l.a);var n=new c.a.Material({shader:c.a.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});n.enableTexture("sprite"),n.define("both","VERTEX_COLOR"),n.define("both","VERTEX_SIZE");var h=new c.a.Texture2D({image:document.createElement("canvas"),flipY:!1});return n.set("sprite",h),r.pick=this._pick.bind(this),{geometry:r,material:n,mode:c.a.Mesh.POINTS,sizeScale:1}},{_pick:function(r,n,h,p,d,f){var v=this._positionNDC;if(v)for(var m=h.viewport,y=2/m.width,x=2/m.height,w=this.geometry.vertexCount-1;w>=0;w--){var M,C=v[2*(M=this.geometry.indices?this.geometry.indices[w]:w)],A=v[2*M+1],P=this.geometry.attributes.size.get(M)/this.sizeScale/2;if(r>C-P*y&&r<C+P*y&&n>A-P*x&&n<A+P*x){var b=new c.a.Vector3,N=new c.a.Vector3;this.geometry.attributes.position.get(M,b.array),c.a.Vector3.transformMat4(N,b,this.worldTransform),f.push({vertexIndex:M,point:b,pointWorld:N,target:this,distance:N.distance(p.getWorldPosition())})}}},updateNDCPosition:function(r,n,h){var p=this._positionNDC,d=this.geometry;p&&p.length/2===d.vertexCount||(p=this._positionNDC=new Float32Array(2*d.vertexCount));for(var f=a.create(),v=0;v<d.vertexCount;v++)d.attributes.position.get(v,f),f[3]=1,a.transformMat4(f,f,r.array),a.scale(f,f,1/f[3]),p[2*v]=f[0],p[2*v+1]=f[1]}});g.a=o},function(_,g,u){var c=u(96),l=u(6).a.vec3;g.a={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(e,t){var i=this.indices,s=l.create();if(!i){i=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var a=0;a<i.length;a++)i[a]=a}if(t===0){var o,r=this.attributes.position,n=(e=e.array,0);for(this._zList&&this._zList.length===this.vertexCount||(this._zList=new Float32Array(this.vertexCount)),a=0;a<this.vertexCount;a++){r.get(a,s);var h=l.sqrDist(s,e);isNaN(h)&&(h=1e7,n++),a===0?(o=h,h=0):h-=o,this._zList[a]=h}this._noneCount=n}if(this.vertexCount<2e4)t===0&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(a=0;a<3;a++)this._progressiveQuickSort(3*t+a);this.dirtyIndices()},_simpleSort:function(e){var t=this._zList,i=this.indices;function s(a,o){return t[o]-t[a]}e?Array.prototype.sort.call(i,s):c.a.sort(i,s,0,i.length-1)},_progressiveQuickSort:function(e){var t=this._zList,i=this.indices;this._quickSort=this._quickSort||new c.a,this._quickSort.step(i,function(s,a){return t[a]-t[s]},e)}}},function(_,g,u){g.a=`@export ecgl.sdfSprite.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform float elapsedTime : 0;

attribute vec3 position : POSITION;

#ifdef VERTEX_SIZE
attribute float size;
#else
uniform float u_Size;
#endif

#ifdef VERTEX_COLOR
attribute vec4 a_FillColor: COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute float prevSize;
uniform float percent : 1.0;
#endif


#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

varying float v_Size;

void main()
{

#ifdef POSITIONTEXTURE_ENABLED
 gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);
#else

 #ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 #else
 vec3 pos = position;
 #endif
 gl_Position = worldViewProjection * vec4(pos, 1.0);
#endif

#ifdef VERTEX_SIZE
#ifdef VERTEX_ANIMATION
 v_Size = mix(prevSize, size, percent);
#else
 v_Size = size;
#endif
#else
 v_Size = u_Size;
#endif

#ifdef VERTEX_COLOR
 v_Color = a_FillColor;
 #endif

 gl_PointSize = v_Size;
}

@end

@export ecgl.sdfSprite.fragment

uniform vec4 color: [1, 1, 1, 1];
uniform vec4 strokeColor: [1, 1, 1, 1];
uniform float smoothing: 0.07;

uniform float lineWidth: 0.0;

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

varying float v_Size;

uniform sampler2D sprite;

@import clay.util.srgb

void main()
{
 gl_FragColor = color;

 vec4 _strokeColor = strokeColor;

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
 #endif

#ifdef SPRITE_ENABLED
 float d = texture2D(sprite, gl_PointCoord).r;
 gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);

 if (lineWidth > 0.0) {
 float sLineWidth = lineWidth / 2.0;

 float outlineMaxValue0 = 0.5 + sLineWidth;
 float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;
 float outlineMinValue0 = 0.5 - sLineWidth - smoothing;
 float outlineMinValue1 = 0.5 - sLineWidth;

 if (d <= outlineMaxValue1 && d >= outlineMinValue0) {
 float a = _strokeColor.a;
 if (d <= outlineMinValue1) {
 a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);
 }
 else {
 a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);
 }
 gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);
 gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;
 }
 }
#endif

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(gl_FragColor);
#endif
}
@end`},function(_,g,u){var c=u(0),l=u.n(c),e=(u(246),u(247),u(250),u(17));l.a.registerVisual(Object(e.a)("lines3D")),l.a.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),l.a.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),l.a.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})},function(_,g,u){var c=u(0),l=u.n(c),e=u(6),t=e.a.vec3,i=e.a.vec2,s=t.normalize,a=t.cross,o=t.sub,r=t.add,n=t.create,h=n(),p=n(),d=n(),f=n(),v=[],m=[];function y(C,A){i.copy(v,C[0]),i.copy(m,C[1]);var P=[],b=P[0]=n(),N=P[1]=n(),B=P[2]=n(),z=P[3]=n();A.dataToPoint(v,b),A.dataToPoint(m,z),s(h,b),o(p,z,b),s(p,p),a(d,p,h),s(d,d),a(p,h,d),r(N,h,p),s(N,N),s(h,z),o(p,b,z),s(p,p),a(d,p,h),s(d,d),a(p,h,d),r(B,h,p),s(B,B),r(f,b,z),s(f,f);var F=t.dot(b,f),V=t.dot(f,N),H=(Math.max(t.len(b),t.len(z))-F)/V*2;return t.scaleAndAdd(N,b,N,H),t.scaleAndAdd(B,z,B,H),P}function x(C,A){for(var P=new Float32Array(3*C.length),b=0,N=[],B=0;B<C.length;B++)A.dataToPoint(C[B],N),P[b++]=N[0],P[b++]=N[1],P[b++]=N[2];return P}function w(C){var A=[];return C.each(function(P){var b=C.getItemModel(P),N=D(b.option,Array)?b.option:b.getShallow("coords",!0);if(!(D(N,Array)&&N.length>0&&D(N[0],Array)))throw new Error("Invalid coords "+JSON.stringify(N)+". Lines must have 2d coords array in data item.");A.push(N)}),{coordsList:A}}function M(C,A,P){var b=C.getData(),N=C.get("polyline"),B=w(b);b.setLayout("lineType",N?"polyline":"cubicBezier"),b.each(function(z){var F=B.coordsList[z],V=N?x(F,A):function(H,U,j){var X=[],Y=X[0]=t.create(),J=X[1]=t.create(),K=X[2]=t.create(),Q=X[3]=t.create();U.dataToPoint(H[0],Y),U.dataToPoint(H[1],Q);var Z=t.dist(Y,Q);return t.lerp(J,Y,Q,.3),t.lerp(K,Y,Q,.3),t.scaleAndAdd(J,J,j,Math.min(.1*Z,10)),t.scaleAndAdd(K,K,j,Math.min(.1*Z,10)),X}(F,A,P);b.setItemLayout(z,V)})}l.a.registerLayout(function(C,A){C.eachSeriesByType("lines3D",function(P){var b=P.coordinateSystem;b.type==="globe"?function(N,B){var z=N.getData(),F=N.get("polyline");z.setLayout("lineType",F?"polyline":"cubicBezier");var V=w(z);z.each(function(H){var U=V.coordsList[H],j=F?x:y;z.setItemLayout(H,j(U,B))})}(P,b):b.type==="geo3D"?M(P,b,[0,1,0]):b.type!=="mapbox3D"&&b.type!=="maptalks3D"||M(P,b,[0,0,1])})})},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(25),i=u(248),s=u(46);e.a.Shader.import(s.a),l.a.extendChartView({type:"lines3D",__ecgl__:!0,init:function(a,o){this.groupGL=new e.a.Node,this._meshLinesMaterial=new e.a.Material({shader:e.a.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new e.a.Mesh({geometry:new t.a,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new i.a},render:function(a,o,r){this.groupGL.add(this._linesMesh);var n=a.coordinateSystem,h=a.getData();if(n&&n.viewGL){n.viewGL.add(this.groupGL),this._updateLines(a,o,r);var p=n.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[p]("fragment","SRGB_DECODE"),this._trailMesh.material[p]("fragment","SRGB_DECODE")}var d=this._trailMesh;if(d.stopAnimation(),a.get("effect.show")){this.groupGL.add(d),d.updateData(h,r,this._linesMesh.geometry),d.__time=d.__time||0;var f=36e5;this._curveEffectsAnimator=d.animate("",{loop:!0}).when(f,{__time:f}).during(function(){d.setAnimationTime(d.__time)}).start()}else this.groupGL.remove(d),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend=a.get("blendMode")==="lighter"?e.a.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var a=this._curveEffectsAnimator;a&&(a.isPaused()?a.resume():a.pause())},_updateLines:function(a,o,r){var n=a.getData(),h=a.coordinateSystem,p=this._linesMesh.geometry,d=a.get("polyline");p.expandLine=!0;var f=function(M){return M.radius!=null?M.radius:M.size!=null?Math.max(M.size[0],M.size[1],M.size[2]):100}(h);p.segmentScale=f/20;var v="lineStyle.width".split("."),m=r.getDevicePixelRatio();n.each(function(M){var C=n.getItemModel(M).get(v);C==null&&(C=1),n.setItemVisual(M,"lineWidth",C)}),p.useNativeLine=!1;var y=0,x=0;n.each(function(M){var C=n.getItemLayout(M);d?(y+=p.getPolylineVertexCount(C),x+=p.getPolylineTriangleCount(C)):(y+=p.getCubicCurveVertexCount(C[0],C[1],C[2],C[3]),x+=p.getCubicCurveTriangleCount(C[0],C[1],C[2],C[3]))}),p.setVertexCount(y),p.setTriangleCount(x),p.resetOffset();var w=[];n.each(function(M){var C=n.getItemLayout(M),A=n.getItemVisual(M,"color"),P=n.getItemVisual(M,"opacity"),b=n.getItemVisual(M,"lineWidth")*m;P==null&&(P=1),(w=e.a.parseColor(A,w))[3]*=P,d?p.addPolyline(C,w,b):p.addCubicCurve(C[0],C[1],C[2],C[3],w,b)}),p.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}})},function(_,g,u){var c=u(0),l=(u.n(c),u(1)),e=u(6),t=u(25),i=u(249),s=e.a.vec3;l.a.Shader.import(i.a),g.a=l.a.Mesh.extend(function(){var a=new l.a.Material({shader:new l.a.Shader(l.a.Shader.source("ecgl.trail2.vertex"),l.a.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),o=new t.a({dynamic:!0});return o.createAttribute("dist","float",1),o.createAttribute("distAll","float",1),o.createAttribute("start","float",1),{geometry:o,material:a,culling:!1,$ignorePicking:!0}},{updateData:function(a,o,r){var n=a.hostModel,h=this.geometry,p=n.getModel("effect"),d=p.get("trailWidth")*o.getDevicePixelRatio(),f=p.get("trailLength"),v=n.get("effect.constantSpeed"),m=1e3*n.get("effect.period"),y=v!=null;this.getScene()||console.error("TrailMesh must been add to scene before updateData"),y?this.material.set("speed",v/1e3):this.material.set("period",m),this.material[y?"define":"undefine"]("vertex","CONSTANT_SPEED");var x=n.get("polyline");h.trailLength=f,this.material.set("trailLength",f),h.resetOffset(),["position","positionPrev","positionNext"].forEach(function(V){h.attributes[V].value=r.attributes[V].value}),["dist","distAll","start","offset","color"].forEach(function(V){h.attributes[V].init(h.vertexCount)}),h.indices=r.indices;var w=[],M=p.get("trailColor"),C=p.get("trailOpacity"),A=M!=null,P=C!=null;this.updateWorldTransform();var b=this.worldTransform.x.len(),N=this.worldTransform.y.len(),B=this.worldTransform.z.len(),z=0,F=0;a.each(function(V){var H=a.getItemLayout(V),U=P?C:a.getItemVisual(V,"opacity"),j=a.getItemVisual(V,"color");U==null&&(U=1),(w=l.a.parseColor(A?M:j,w))[3]*=U;for(var X=x?r.getPolylineVertexCount(H):r.getCubicCurveVertexCount(H[0],H[1],H[2],H[3]),Y=0,J=[],K=[],Q=z;Q<z+X;Q++)h.attributes.position.get(Q,J),J[0]*=b,J[1]*=N,J[2]*=B,Q>z&&(Y+=s.dist(J,K)),h.attributes.dist.set(Q,Y),s.copy(K,J);F=Math.max(F,Y);var Z=Math.random()*(y?Y:m);for(Q=z;Q<z+X;Q++)h.attributes.distAll.set(Q,Y),h.attributes.start.set(Q,Z),h.attributes.offset.set(Q,(r.attributes.offset.get(Q)>0?1:-1)*d/2),h.attributes.color.set(Q,w);z+=X}),this.material.set("spotSize",.1*F*f),this.material.set("spotIntensity",p.get("spotIntensity")),h.dirty()},setAnimationTime:function(a){this.material.set("time",a)}})},function(_,g,u){g.a=`@export ecgl.trail2.vertex
attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute float dist;
attribute float distAll;
attribute float start;

attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

uniform float speed : 0;
uniform float trailLength: 0.3;
uniform float time;
uniform float period: 1000;

uniform float spotSize: 1;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain

#ifdef CONSTANT_SPEED
 float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;
#else
 float t = mod((time + start) / period, 1. + trailLength) - trailLength;
#endif

 float trailLen = distAll * trailLength;

 v_Percent = (dist - t * distAll) / trailLen;

 v_SpotPercent = spotSize / distAll;

 }
@end


@export ecgl.trail2.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform float spotIntensity: 5;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
 if (v_Percent > 1.0 || v_Percent < 0.0) {
 discard;
 }

 float fade = v_Percent;

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain

 if (v_Percent > (1.0 - v_SpotPercent)) {
 gl_FragColor.rgb *= spotIntensity;
 }

 gl_FragColor.a *= fade;
}

@end`},function(_,g,u){var c=u(0),l=u.n(c);l.a.extendSeriesModel({type:"series.lines3D",dependencies:["globe"],visualColorAccessPath:"lineStyle.color",getInitialData:function(e,t){var i=new l.a.List(["value"],this);return i.hasItemOption=!1,i.initData(e.data,[],function(s,a,o,r){if(D(s,Array))return NaN;i.hasItemOption=!0;var n=s.value;return n!=null?D(n,Array)?n[r]:n:void 0}),i},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}})},function(_,g,u){var c=u(0),l=u.n(c),e=(u(252),u(253),u(17));l.a.registerVisual(Object(e.a)("polygons3D"))},function(_,g,u){var c=u(0),l=u.n(c),e=u(31);function t(s,a){for(var o=[],r=0;r<a.length;r++)o.push(s.dataToPoint(a[r]));return o}var i=l.a.extendSeriesModel({type:"series.polygons3D",getRegionModel:function(s){return this.getData().getItemModel(s)},getRegionPolygonCoords:function(s){var a=this.coordinateSystem,o=this.getData().getItemModel(s),r=D(o.option,Array)?o.option:o.getShallow("coords");o.get("multiPolygon")||(r=[r]);for(var n=[],h=0;h<r.length;h++){for(var p=[],d=1;d<r[h].length;d++)p.push(t(a,r[h][d]));n.push({exterior:t(a,r[h][0]),interiors:p})}return n},getInitialData:function(s){var a=new l.a.List(["value"],this);return a.hasItemOption=!1,a.initData(s.data,[],function(o,r,n,h){if(D(o,Array))return NaN;a.hasItemOption=!0;var p=o.value;return p!=null?D(p,Array)?p[h]:p:void 0}),a},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});l.a.util.merge(i.prototype,e.a)},function(_,g,u){var c=u(0),l=u.n(c),e=u(63),t=u(1);l.a.extendChartView({type:"polygons3D",__ecgl__:!0,init:function(i,s){this.groupGL=new t.a.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(i,s,a){this.groupGL.removeAll();var o=i.coordinateSystem;o&&o.viewGL&&o.viewGL.add(this.groupGL);var r=this._geo3DBuilderList[0];r||((r=new e.a(a)).extrudeY=o.type!=="mapbox3D"&&o.type!=="maptalks3D",this._geo3DBuilderList[0]=r),this._updateShaderDefines(o,r),r.update(i,s,a),this._geo3DBuilderList.length=1,this.groupGL.add(r.rootNode)},incrementalPrepareRender:function(i,s,a){this.groupGL.removeAll();var o=i.coordinateSystem;o&&o.viewGL&&o.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(i,s,a,o){var r=this._geo3DBuilderList[this._currentStep],n=s.coordinateSystem;r||((r=new e.a(o)).extrudeY=n.type!=="mapbox3D"&&n.type!=="maptalks3D",this._geo3DBuilderList[this._currentStep]=r),r.update(s,a,o,i.start,i.end),this.groupGL.add(r.rootNode),this._updateShaderDefines(n,r),this._currentStep++},_updateShaderDefines:function(i,s){var a=i.viewGL.isLinearSpace()?"define":"undefine";s.rootNode.traverse(function(o){o.material&&(o.material[a]("fragment","SRGB_DECODE"),i.type!=="mapbox3D"&&i.type!=="maptalks3D"||(o.material.define("fragment","NORMAL_UP_AXIS",2),o.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}})},function(_,g,u){var c=u(0),l=u.n(c),e=(u(255),u(256),u(257),u(17));l.a.registerVisual(Object(e.a)("surface"))},function(_,g,u){var c=u(0),l=u.n(c),e=u(31),t=u(40),i=u(50),s=l.a.extendSeriesModel({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualColorAccessPath:"itemStyle.color",formatTooltip:function(a){return Object(t.a)(this,a)},getInitialData:function(a,o){var r=a.data;function n(q){return!(isNaN(q.min)||isNaN(q.max)||isNaN(q.step))}function h(q){var tt=l.a.number.getPrecisionSafe;return Math.max(tt(q.min),tt(q.max),tt(q.step))+1}if(!r)if(a.parametric){var p=a.parametricEquation||{},d=p.u||{},f=p.v||{};["u","v"].forEach(function(q){n(p[q])||console.error("Invalid parametricEquation.%s",q)}),["x","y","z"].forEach(function(q){typeof p[q]=="function"||console.error("parametricEquation.%s needs to be function",q)});var v=Math.floor((d.max+d.step-d.min)/d.step),m=Math.floor((f.max+f.step-f.min)/f.step);r=new Float32Array(v*m*5);var y=h(d),x=h(f);for(H=0,U=0;U<m;U++)for(j=0;j<v;j++){var w=j*d.step+d.min,M=U*f.step+f.min,C=l.a.number.round(Math.min(w,d.max),y),A=l.a.number.round(Math.min(M,f.max),x);X=p.x(C,A),Y=p.y(C,A),Q=p.z(C,A),r[H++]=X,r[H++]=Y,r[H++]=Q,r[H++]=C,r[H++]=A}}else{var P=a.equation||{},b=P.x||{},N=P.y||{};if(["x","y"].forEach(function(q){n(P[q])||console.error("Invalid equation.%s",q)}),typeof P.z!="function")return void console.error("equation.z needs to be function");var B=Math.floor((b.max+b.step-b.min)/b.step),z=Math.floor((N.max+N.step-N.min)/N.step);r=new Float32Array(B*z*3);for(var F=h(b),V=h(N),H=0,U=0;U<z;U++)for(var j=0;j<B;j++){var X=j*b.step+b.min,Y=U*N.step+N.min,J=l.a.number.round(Math.min(X,b.max),F),K=l.a.number.round(Math.min(Y,N.max),V),Q=P.z(J,K);r[H++]=J,r[H++]=K,r[H++]=Q}}var Z=["x","y","z"];return a.parametric&&Z.push("u","v"),Object(i.a)(this,Z,r)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});l.a.util.merge(s.prototype,e.a)},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=(u(2),u(6)),i=u(64),s=t.a.vec3;l.a.extendChartView({type:"surface",__ecgl__:!0,init:function(a,o){this.groupGL=new e.a.Node},render:function(a,o,r){var n=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=n,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var h=a.coordinateSystem,p=a.get("shading"),d=a.getData(),f="ecgl."+p;if(this._surfaceMesh.material&&this._surfaceMesh.material.shader.name===f||(this._surfaceMesh.material=e.a.createMaterial(f,["VERTEX_COLOR","DOUBLE_SIDED"])),e.a.setMaterialFromModel(p,this._surfaceMesh.material,a,r),h&&h.viewGL){h.viewGL.add(this.groupGL);var v=h.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[v]("fragment","SRGB_DECODE")}var m=a.get("parametric"),y=a.get("dataShape");y||(y=this._getDataShape(d,m),a.get("data")&&console.warn("dataShape is not provided. Guess it is ",y));var x=a.getModel("wireframe"),w=x.get("lineStyle.width"),M=x.get("show")&&w>0;this._updateSurfaceMesh(this._surfaceMesh,a,y,M);var C=this._surfaceMesh.material;M?(C.define("WIREFRAME_QUAD"),C.set("wireframeLineWidth",w),C.set("wireframeLineColor",e.a.parseColor(x.get("lineStyle.color")))):C.undefine("WIREFRAME_QUAD"),this._initHandler(a,r),this._updateAnimation(a)},_updateAnimation:function(a){e.a.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,a)},_createSurfaceMesh:function(){var a=new e.a.Mesh({geometry:new e.a.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new e.a.Material({shader:new e.a.Shader(e.a.Shader.source("ecgl.sm.depth.vertex"),e.a.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return a.geometry.createAttribute("barycentric","float",4),a.geometry.createAttribute("prevPosition","float",3),a.geometry.createAttribute("prevNormal","float",3),l.a.util.extend(a.geometry,i.a),a},_initHandler:function(a,o){var r=a.getData(),n=this._surfaceMesh,h=a.coordinateSystem;n.seriesIndex=a.seriesIndex;var p=-1;n.off("mousemove"),n.off("mouseout"),n.on("mousemove",function(d){var f=function(A,P){for(var b=1/0,N=-1,B=[],z=0;z<A.length;z++){n.geometry.attributes.position.get(A[z],B);var F=s.dist(P.array,B);F<b&&(b=F,N=A[z])}return N}(d.triangle,d.point);if(f>=0){var v=[];n.geometry.attributes.position.get(f,v);for(var m=h.pointToData(v),y=1/0,x=-1,w=[],M=0;M<r.count();M++){w[0]=r.get("x",M),w[1]=r.get("y",M),w[2]=r.get("z",M);var C=s.squaredDistance(w,m);C<y&&(x=M,y=C)}x!==p&&o.dispatchAction({type:"grid3DShowAxisPointer",value:m}),p=x,n.dataIndex=x}else n.dataIndex=-1},this),n.on("mouseout",function(d){p=-1,n.dataIndex=-1,o.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(a,o,r,n){var h=a.geometry,p=o.getData(),d=p.getLayout("points"),f=0;p.each(function(lt){p.hasValue(lt)||f++});var v=f||n,m=h.attributes.position,y=h.attributes.normal,x=h.attributes.texcoord0,w=h.attributes.barycentric,M=h.attributes.color,C=r[0],A=r[1],P=o.get("shading")!=="color";if(v){var b=(C-1)*(A-1)*4;m.init(b),n&&w.init(b)}else m.value=new Float32Array(d);M.init(h.vertexCount),x.init(h.vertexCount);var N,B=[0,3,1,1,3,2],z=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],F=h.indices=new(h.vertexCount>65535?Uint32Array:Uint16Array)((C-1)*(A-1)*6),V=function(lt,ct,ht){ht[1]=lt*A+ct,ht[0]=lt*A+ct+1,ht[3]=(lt+1)*A+ct+1,ht[2]=(lt+1)*A+ct},H=!1;if(v){var U=[],j=[],X=0;P?y.init(h.vertexCount):y.value=null;for(var Y=[[],[],[]],J=[],K=[],Q=s.create(),Z=function(lt,ct,ht){var ft=3*ct;return ht[0]=lt[ft],ht[1]=lt[ft+1],ht[2]=lt[ft+2],ht},q=new Float32Array(d.length),tt=new Float32Array(d.length/3*4),$=0;$<p.count();$++)if(p.hasValue($)){var rt=e.a.parseColor(p.getItemVisual($,"color")),et=p.getItemVisual($,"opacity");rt[3]*=et,rt[3]<.99&&(H=!0);for(var it=0;it<4;it++)tt[4*$+it]=rt[it]}var ot=[1e7,1e7,1e7];for($=0;$<C-1;$++)for(var st=0;st<A-1;st++){var at=4*($*(A-1)+st);V($,st,U);var vt=!1;for(it=0;it<4;it++)Z(d,U[it],j),N=j,(isNaN(N[0])||isNaN(N[1])||isNaN(N[2]))&&(vt=!0);for(it=0;it<4;it++)vt?m.set(at+it,ot):(Z(d,U[it],j),m.set(at+it,j)),n&&w.set(at+it,z[it]);for(it=0;it<6;it++)F[X++]=B[it]+at;if(P&&!vt)for(it=0;it<2;it++){for(var yt=3*it,gt=0;gt<3;gt++)Z(d,mt=U[B[yt]+gt],Y[gt]);for(s.sub(J,Y[0],Y[1]),s.sub(K,Y[1],Y[2]),s.cross(Q,J,K),gt=0;gt<3;gt++){var pt=3*U[B[yt]+gt];q[pt]=q[pt]+Q[0],q[pt+1]=q[pt+1]+Q[1],q[pt+2]=q[pt+2]+Q[2]}}}if(P)for($=0;$<q.length/3;$++)Z(q,$,Q),s.normalize(Q,Q),q[3*$]=Q[0],q[3*$+1]=Q[1],q[3*$+2]=Q[2];rt=[];var bt=[];for($=0;$<C-1;$++)for(st=0;st<A-1;st++)for(at=4*($*(A-1)+st),V($,st,U),it=0;it<4;it++){for(gt=0;gt<4;gt++)rt[gt]=tt[4*U[it]+gt];M.set(at+it,rt),P&&(Z(q,U[it],Q),y.set(at+it,Q));var mt=U[it];bt[0]=mt%A/(A-1),bt[1]=Math.floor(mt/A)/(C-1),x.set(at+it,bt)}}else{for(bt=[],$=0;$<p.count();$++)bt[0]=$%A/(A-1),bt[1]=Math.floor($/A)/(C-1),rt=e.a.parseColor(p.getItemVisual($,"color")),et=p.getItemVisual($,"opacity"),rt[3]*=et,rt[3]<.99&&(H=!0),M.set($,rt),x.set($,bt);U=[];var nt=0;for($=0;$<C-1;$++)for(st=0;st<A-1;st++)for(V($,st,U),it=0;it<6;it++)F[nt++]=U[B[it]];P?h.generateVertexNormals():y.value=null}a.material.get("normalMap")&&h.generateTangents(),h.updateBoundingBox(),h.dirty(),a.material.transparent=H,a.material.depthMask=!H},_getDataShape:function(a,o){for(var r=-1/0,n=0,h=0,p=0,d=!1,f=o?"u":"x",v=a.count(),m=0;m<v;m++){var y=a.get(f,m);y<r&&(p&&p!==h&&(d=!0),p=h,h=0,n++),r=y,h++}if(n&&h!==1||(d=!0),!d)return[n+1,h];for(var x=Math.floor(Math.sqrt(v));x>0;){if(Math.floor(v/x)===v/x)return[x,v/x];x--}return[x=Math.floor(Math.sqrt(v)),x]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}})},function(_,g,u){var c=u(0);u.n(c).a.registerLayout(function(l,e){l.eachSeriesByType("surface",function(t){var i=t.coordinateSystem;i&&i.type==="cartesian3D"||console.error("Surface chart only support cartesian3D coordinateSystem");var s=t.getData(),a=new Float32Array(3*s.count()),o=[NaN,NaN,NaN];if(i&&i.type==="cartesian3D"){var r=i.dimensions.map(function(n){return t.coordDimToDataDim(n)[0]});s.each(r,function(n,h,p,d){var f;f=s.hasValue(d)?i.dataToPoint([n,h,p]):o,a[3*d]=f[0],a[3*d+1]=f[1],a[3*d+2]=f[2]})}s.setLayout("points",a)})})},function(_,g,u){var c=u(0),l=u.n(c),e=(u(98),u(259),u(260),u(17));l.a.registerVisual(Object(e.a)("map3D")),l.a.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(t,i){i.eachComponent({mainType:"series",subType:"map3D",query:t},function(s){s.setView(t)})})},function(_,g,u){var c=u(0),l=u.n(c),e=u(44),t=u(28),i=u(29),s=u(31),a=u(95),o=u(32),r=u(40),n=u(97);function h(d,f){for(var v=[],m=0;m<f.length;m++)v.push(d.dataToPoint(f[m]));return v}var p=l.a.extendSeriesModel({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualColorAccessPath:"itemStyle.color",optionUpdated:function(d){d=d||{};var f=this.get("coordinateSystem");if(f!=null&&f!=="geo3D"){var v=[];["left","top","width","height","boxWidth","boxDepth","boxHeight","light","viewControl","postEffect","temporalSuperSampling","environment","groundPlane"].forEach(function(m){d[m]!=null&&v.push(m)}),v.length&&console.warn("Property %s in map3D series will be ignored if coordinate system is %s",v.join(", "),f),this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null}},getInitialData:function(d){d.data=this.getFilledRegions(d.data,d.map);var f=l.a.helper.completeDimensions(["value"],d.data),v=new l.a.List(f,this);v.initData(d.data);var m={};return v.each(function(y){var x=v.getName(y),w=v.getItemModel(y);m[x]=w}),this._regionModelMap=m,v},formatTooltip:function(d){return Object(r.a)(this,d)},getRegionModel:function(d){var f=this.getData().getName(d);return this._regionModelMap[f]||new l.a.Model(null,this)},getRegionPolygonCoords:function(d){var f=this.coordinateSystem,v=this.getData().getName(d);if(f.transform)return(m=f.getRegion(v))?m.geometries:[];this._geo||(this._geo=n.a.createGeo3D(this));for(var m=this._geo.getRegion(v),y=[],x=0;x<m.geometries.length;x++){var w=m.geometries[x],M=[],C=h(f,w.exterior);if(M&&M.length)for(var A=0;A<w.interiors.length;A++)M.push(h(f,M[A]));y.push({interiors:M,exterior:C})}return y},getFormattedLabel:function(d,f){var v=o.a.getFormattedLabel(this,d,f);return v==null&&(v=this.getData().getName(d)),v},defaultOption:{coordinateSystem:"geo3D",data:null}});l.a.util.merge(p.prototype,a.a),l.a.util.merge(p.prototype,e.a),l.a.util.merge(p.prototype,t.a),l.a.util.merge(p.prototype,i.a),l.a.util.merge(p.prototype,s.a)},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(45),i=u(30),s=u(63);l.a.extendChartView({type:"map3D",__ecgl__:!0,init:function(a,o){this._geo3DBuilder=new s.a(o),this.groupGL=new e.a.Node},render:function(a,o,r){var n=a.coordinateSystem;if(n&&n.viewGL){if(this.groupGL.add(this._geo3DBuilder.rootNode),n.viewGL.add(this.groupGL),n.type==="geo3D"){this._sceneHelper||(this._sceneHelper=new i.a,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(n.viewGL.scene),this._sceneHelper.updateLight(a),n.viewGL.setPostEffect(a.getModel("postEffect"),r),n.viewGL.setTemporalSuperSampling(a.getModel("temporalSuperSampling"));var h=this._control;h||(h=this._control=new t.a({zr:r.getZr()}),this._control.init());var p=a.getModel("viewControl");h.setViewGL(n.viewGL),h.setFromViewControlModel(p,0),h.off("update"),h.on("update",function(){r.dispatchAction({type:"map3DChangeCamera",alpha:h.getAlpha(),beta:h.getBeta(),distance:h.getDistance(),from:this.uid,map3DId:a.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),a.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(a,o,r,0,a.getData().count());var d=n.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(f){f.material&&f.material[d]("fragment","SRGB_DECODE")})}},afterRender:function(a,o,r,n){var h=n.renderer,p=a.coordinateSystem;p&&p.type==="geo3D"&&(this._sceneHelper.updateAmbientCubemap(h,a,r),this._sceneHelper.updateSkybox(h,a,r))},dispose:function(){this.groupGL.removeAll(),this._control.dispose()}})},function(_,g,u){var c=u(0),l=u.n(c),e=(u(262),u(263),u(51)),t=u.n(e),i=u(17);l.a.registerVisual(t()("scatterGL","circle",null)),l.a.registerVisual(Object(i.a)("scatterGL")),l.a.registerLayout({seriesType:"scatterGL",reset:function(s){var a,o=s.coordinateSystem;if(o){var r=o.dimensions,n=[];r.length===1?a=function(h,p){for(var d=new Float32Array(2*(h.end-h.start)),f=h.start;f<h.end;f++){var v=2*(f-h.start),m=p.get(r[0],f),y=o.dataToPoint(m);d[v]=y[0],d[v+1]=y[1]}p.setLayout("points",d)}:r.length===2&&(a=function(h,p){for(var d=new Float32Array(2*(h.end-h.start)),f=h.start;f<h.end;f++){var v=2*(f-h.start),m=p.get(r[0],f),y=p.get(r[1],f);n[0]=m,n[1]=y,n=o.dataToPoint(n),d[v]=n[0],d[v+1]=n[1]}p.setLayout("points",d)})}return{progress:a}}})},function(_,g,u){var c=u(0),l=u.n(c);l.a.extendSeriesModel({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualColorAccessPath:"itemStyle.color",getInitialData:function(){return l.a.helper.createList(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}})},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(22),i=u(66),s=u(102);u(2),l.a.extendChartView({type:"scatterGL",__ecgl__:!0,init:function(a,o){this.groupGL=new e.a.Node,this.viewGL=new t.a("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new s.a(this.viewGL)},render:function(a,o,r){if(this.groupGL.removeAll(),this._glViewHelper.reset(a,r),a.getData().count()){var n=this._pointsBuilderList[0];n||(n=this._pointsBuilderList[0]=new i.a(!0,r)),this._pointsBuilderList.length=1,this.groupGL.add(n.rootNode),this._removeTransformInPoints(a.getData().getLayout("points")),n.update(a,o,r),this.viewGL.setPostEffect(a.getModel("postEffect"),r)}},incrementalPrepareRender:function(a,o,r){this.groupGL.removeAll(),this._glViewHelper.reset(a,r),this._currentStep=0,this.viewGL.setPostEffect(a.getModel("postEffect"),r)},incrementalRender:function(a,o,r,n){if(!(a.end<=a.start)){var h=this._pointsBuilderList[this._currentStep];h||(h=new i.a(!0,n),this._pointsBuilderList[this._currentStep]=h),this.groupGL.add(h.rootNode),this._removeTransformInPoints(o.getData().getLayout("points")),h.setSizeScale(this._sizeScale),h.update(o,r,n,a.start,a.end),n.getZr().refresh(),this._currentStep++}},updateTransform:function(a,o,r){if(a.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(a,r);var n=this._glViewHelper.getZoom(),h=Math.max((a.get("zoomScale")||0)*(n-1)+1,0);this._sizeScale=h,this._pointsBuilderList.forEach(function(p){p.setSizeScale(h)})}},_removeTransformInPoints:function(a){if(a)for(var o=[],r=0;r<a.length;r+=2)o[0]=a[r],o[1]=a[r+1],this._glViewHelper.removeTransformInPoint(o),a[r]=o[0],a[r+1]=o[1]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}})},function(_,g){var u=typeof Float32Array>"u"?Array:Float32Array;function c(){var t=new u(6);return l(t),t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function e(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t}g.create=c,g.identity=l,g.copy=e,g.mul=function(t,i,s){var a=i[0]*s[0]+i[2]*s[1],o=i[1]*s[0]+i[3]*s[1],r=i[0]*s[2]+i[2]*s[3],n=i[1]*s[2]+i[3]*s[3],h=i[0]*s[4]+i[2]*s[5]+i[4],p=i[1]*s[4]+i[3]*s[5]+i[5];return t[0]=a,t[1]=o,t[2]=r,t[3]=n,t[4]=h,t[5]=p,t},g.translate=function(t,i,s){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4]+s[0],t[5]=i[5]+s[1],t},g.rotate=function(t,i,s){var a=i[0],o=i[2],r=i[4],n=i[1],h=i[3],p=i[5],d=Math.sin(s),f=Math.cos(s);return t[0]=a*f+n*d,t[1]=-a*d+n*f,t[2]=o*f+h*d,t[3]=-o*d+f*h,t[4]=f*r+d*p,t[5]=f*p-d*r,t},g.scale=function(t,i,s){var a=s[0],o=s[1];return t[0]=i[0]*a,t[1]=i[1]*o,t[2]=i[2]*a,t[3]=i[3]*o,t[4]=i[4]*a,t[5]=i[5]*o,t},g.invert=function(t,i){var s=i[0],a=i[2],o=i[4],r=i[1],n=i[3],h=i[5],p=s*n-r*a;return p?(p=1/p,t[0]=n*p,t[1]=-r*p,t[2]=-a*p,t[3]=s*p,t[4]=(a*h-n*o)*p,t[5]=(r*o-s*h)*p,t):null},g.clone=function(t){var i=c();return e(i,t),i}},function(_,g){var u=typeof Float32Array>"u"?Array:Float32Array;function c(r){return Math.sqrt(e(r))}var l=c;function e(r){return r[0]*r[0]+r[1]*r[1]}var t=e;function i(r,n){return Math.sqrt((r[0]-n[0])*(r[0]-n[0])+(r[1]-n[1])*(r[1]-n[1]))}var s=i;function a(r,n){return(r[0]-n[0])*(r[0]-n[0])+(r[1]-n[1])*(r[1]-n[1])}var o=a;g.create=function(r,n){var h=new u(2);return r==null&&(r=0),n==null&&(n=0),h[0]=r,h[1]=n,h},g.copy=function(r,n){return r[0]=n[0],r[1]=n[1],r},g.clone=function(r){var n=new u(2);return n[0]=r[0],n[1]=r[1],n},g.set=function(r,n,h){return r[0]=n,r[1]=h,r},g.add=function(r,n,h){return r[0]=n[0]+h[0],r[1]=n[1]+h[1],r},g.scaleAndAdd=function(r,n,h,p){return r[0]=n[0]+h[0]*p,r[1]=n[1]+h[1]*p,r},g.sub=function(r,n,h){return r[0]=n[0]-h[0],r[1]=n[1]-h[1],r},g.len=c,g.length=l,g.lenSquare=e,g.lengthSquare=t,g.mul=function(r,n,h){return r[0]=n[0]*h[0],r[1]=n[1]*h[1],r},g.div=function(r,n,h){return r[0]=n[0]/h[0],r[1]=n[1]/h[1],r},g.dot=function(r,n){return r[0]*n[0]+r[1]*n[1]},g.scale=function(r,n,h){return r[0]=n[0]*h,r[1]=n[1]*h,r},g.normalize=function(r,n){var h=c(n);return h===0?(r[0]=0,r[1]=0):(r[0]=n[0]/h,r[1]=n[1]/h),r},g.distance=i,g.dist=s,g.distanceSquare=a,g.distSquare=o,g.negate=function(r,n){return r[0]=-n[0],r[1]=-n[1],r},g.lerp=function(r,n,h,p){return r[0]=n[0]+p*(h[0]-n[0]),r[1]=n[1]+p*(h[1]-n[1]),r},g.applyTransform=function(r,n,h){var p=n[0],d=n[1];return r[0]=h[0]*p+h[2]*d+h[4],r[1]=h[1]*p+h[3]*d+h[5],r},g.min=function(r,n,h){return r[0]=Math.min(n[0],h[0]),r[1]=Math.min(n[1],h[1]),r},g.max=function(r,n,h){return r[0]=Math.max(n[0],h[0]),r[1]=Math.max(n[1],h[1]),r}},function(_,g,u){var c=u(0),l=u.n(c),e=(u(267),u(272),u(51)),t=u.n(e),i=u(17);function s(){}l.a.registerVisual(t()("graphGL","circle",null)),l.a.registerVisual(Object(i.a)("graphGL")),l.a.registerVisual(function(a){var o={};a.eachSeriesByType("graphGL",function(r){var n=r.getCategoriesData(),h=r.getData(),p={};n.each(function(d){var f=n.getName(d);p[f]=d;var v=n.getItemModel(d).get("itemStyle.color")||r.getColorFromPalette(f,o);n.setItemVisual(d,"color",v)}),n.count()&&h.each(function(d){var f=h.getItemModel(d).getShallow("category");f!=null&&(typeof f=="string"&&(f=p[f]),h.getItemVisual(d,"color",!0)||h.setItemVisual(d,"color",n.getItemVisual(f,"color")))})})}),l.a.registerVisual(function(a){a.eachSeriesByType("graphGL",function(o){var r=o.getGraph(),n=o.getEdgeData(),h="lineStyle.color".split("."),p="lineStyle.opacity".split(".");n.setVisual("color",o.get(h)),n.setVisual("opacity",o.get(p)),n.each(function(d){var f=n.getItemModel(d),v=r.getEdgeByIndex(d),m=f.get(h),y=f.get(p);switch(m){case"source":m=v.node1.getVisual("color");break;case"target":m=v.node2.getVisual("color")}v.setVisual("color",m),v.setVisual("opacity",y)})})}),l.a.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(a,o){o.eachComponent({mainType:"series",query:a},function(r){r.setView(a)})}),l.a.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},s),l.a.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},s),l.a.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},s),l.a.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},s)},function(_,g,u){var c=u(0),l=u.n(c),e=u(268),t=u(32),i=l.a.extendSeriesModel({type:"series.graphGL",visualColorAccessPath:"itemStyle.color",init:function(s){i.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(s){i.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(s,a,o,r){var n=t.a.getFormattedLabel(this,s,a,o,r);if(n==null){var h=this.getData(),p=h.dimensions[h.dimensions.length-1];n=h.get(p,s)}return n},getInitialData:function(s,a){var o=s.edges||s.links||[],r=s.data||s.nodes||[],n=this;if(r&&o)return Object(e.a)(r,o,this,!0,function(h,p){h.wrapMethod("getItemModel",function(m){var y=n._categoriesModels[m.getShallow("category")];return y&&(y.parentModel=m.parentModel,m.parentModel=y),m});var d=n.getModel("edgeLabel"),f=new l.a.Model({label:d.option},d.parentModel,a);function v(m){return(m=this.parsePath(m))&&m[0]==="label"?f:this.parentModel}p.wrapMethod("getItemModel",function(m){return m.customizeGetParent(v),m})}).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(s,a,o){if(o==="edge"){var r=this.getData(),n=this.getDataParams(s,o),h=r.graph.getEdgeByIndex(s),p=r.getName(h.node1.dataIndex),d=r.getName(h.node2.dataIndex),f=[];return p!=null&&f.push(p),d!=null&&f.push(d),f=l.a.format.encodeHTML(f.join(" > ")),n.value&&(f+=" : "+l.a.format.encodeHTML(n.value)),f}return i.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var s=(this.option.categories||[]).map(function(o){return o.value!=null?o:l.a.util.extend({value:0},o)}),a=new l.a.List(["value"],this);a.initData(s),this._categoriesData=a,this._categoriesModels=a.mapArray(function(o){return a.getItemModel(o,!0)})},setView:function(s){s.zoom!=null&&(this.option.zoom=s.zoom),s.offset!=null&&(this.option.offset=s.offset)},setNodePosition:function(s){for(var a=0;a<s.length/2;a++){var o=s[2*a],r=s[2*a+1],n=this.getData().getRawDataItem(a);n.x=o,n.y=r}},isAnimationEnabled:function(){return i.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}})},function(_,g,u){var c=u(0),l=u.n(c),e=u(269),t=u.n(e),i=u(271),s=u.n(i),a=u(2);g.a=function(o,r,n,h,p){for(var d=new t.a(h),f=0;f<o.length;f++)d.addNode(a.a.firstNotNull(o[f].id,o[f].name,f),f);var v,m=[],y=[],x=0;for(f=0;f<r.length;f++){var w=r[f],M=w.source,C=w.target;d.addEdge(M,C,x)&&(y.push(w),m.push(a.a.firstNotNull(w.id,M+" > "+C)),x++)}var A=l.a.helper.completeDimensions(["value"],o);(v=new l.a.List(A,n)).initData(o);var P=new l.a.List(["value"],n);return P.initData(y,m),p&&p(v,P),s()({mainData:v,struct:d,structAttr:"graph",datas:{node:v,edge:P},datasAttr:{node:"data",edge:"edgeData"}}),d.update(),d}},function(_,g,u){u(103).__DEV__;var c=u(16),l=u(270).enableClassCheck;function e(n){return"_EC_"+n}var t=function(n){this._directed=n||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},i=t.prototype;function s(n,h){this.id=n==null?"":n,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=h==null?-1:h}function a(n,h,p){this.node1=n,this.node2=h,this.dataIndex=p==null?-1:p}i.type="graph",i.isDirected=function(){return this._directed},i.addNode=function(n,h){n=n==null?""+h:""+n;var p=this._nodesMap;if(!p[e(n)]){var d=new s(n,h);return d.hostGraph=this,this.nodes.push(d),p[e(n)]=d,d}},i.getNodeByIndex=function(n){var h=this.data.getRawIndex(n);return this.nodes[h]},i.getNodeById=function(n){return this._nodesMap[e(n)]},i.addEdge=function(n,h,p){var d=this._nodesMap,f=this._edgesMap;if(typeof n=="number"&&(n=this.nodes[n]),typeof h=="number"&&(h=this.nodes[h]),s.isInstance(n)||(n=d[e(n)]),s.isInstance(h)||(h=d[e(h)]),n&&h){var v=n.id+"-"+h.id;if(!f[v]){var m=new a(n,h,p);return m.hostGraph=this,this._directed&&(n.outEdges.push(m),h.inEdges.push(m)),n.edges.push(m),n!==h&&h.edges.push(m),this.edges.push(m),f[v]=m,m}}},i.getEdgeByIndex=function(n){var h=this.edgeData.getRawIndex(n);return this.edges[h]},i.getEdge=function(n,h){s.isInstance(n)&&(n=n.id),s.isInstance(h)&&(h=h.id);var p=this._edgesMap;return this._directed?p[n+"-"+h]:p[n+"-"+h]||p[h+"-"+n]},i.eachNode=function(n,h){for(var p=this.nodes,d=p.length,f=0;f<d;f++)p[f].dataIndex>=0&&n.call(h,p[f],f)},i.eachEdge=function(n,h){for(var p=this.edges,d=p.length,f=0;f<d;f++)p[f].dataIndex>=0&&p[f].node1.dataIndex>=0&&p[f].node2.dataIndex>=0&&n.call(h,p[f],f)},i.breadthFirstTraverse=function(n,h,p,d){if(s.isInstance(h)||(h=this._nodesMap[e(h)]),h){for(var f=p==="out"?"outEdges":p==="in"?"inEdges":"edges",v=0;v<this.nodes.length;v++)this.nodes[v].__visited=!1;if(!n.call(d,h,null))for(var m=[h];m.length;){var y=m.shift(),x=y[f];for(v=0;v<x.length;v++){var w=x[v],M=w.node1===y?w.node2:w.node1;if(!M.__visited){if(n.call(d,M,y))return;m.push(M),M.__visited=!0}}}}},i.update=function(){for(var n=this.data,h=this.edgeData,p=this.nodes,d=this.edges,f=0,v=p.length;f<v;f++)p[f].dataIndex=-1;for(f=0,v=n.count();f<v;f++)p[n.getRawIndex(f)].dataIndex=f;for(h.filterSelf(function(m){var y=d[h.getRawIndex(m)];return y.node1.dataIndex>=0&&y.node2.dataIndex>=0}),f=0,v=d.length;f<v;f++)d[f].dataIndex=-1;for(f=0,v=h.count();f<v;f++)d[h.getRawIndex(f)].dataIndex=f},i.clone=function(){for(var n=new t(this._directed),h=this.nodes,p=this.edges,d=0;d<h.length;d++)n.addNode(h[d].id,h[d].dataIndex);for(d=0;d<p.length;d++){var f=p[d];n.addEdge(f.node1.id,f.node2.id,f.dataIndex)}return n},s.prototype={constructor:s,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(n){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(n)}},a.prototype.getModel=function(n){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(n)};var o=function(n,h){return{getValue:function(p){var d=this[n][h];return d.get(d.getDimension(p||"value"),this.dataIndex)},setVisual:function(p,d){this.dataIndex>=0&&this[n][h].setItemVisual(this.dataIndex,p,d)},getVisual:function(p,d){return this[n][h].getItemVisual(this.dataIndex,p,d)},setLayout:function(p,d){this.dataIndex>=0&&this[n][h].setItemLayout(this.dataIndex,p,d)},getLayout:function(){return this[n][h].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][h].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][h].getRawIndex(this.dataIndex)}}};c.mixin(s,o("hostGraph","data")),c.mixin(a,o("hostGraph","edgeData")),t.Node=s,t.Edge=a,l(s),l(a);var r=t;_.exports=r},function(_,g,u){u(103).__DEV__;var c=u(16),l="___EC__COMPONENT__CONTAINER___";function e(a){var o={main:"",sub:""};return a&&(a=a.split("."),o.main=a[0]||"",o.sub=a[1]||""),o}var t=0;function i(a,o){var r=c.slice(arguments,2);return this.superClass.prototype[o].apply(a,r)}function s(a,o,r){return this.superClass.prototype[o].apply(a,r)}g.parseClassType=e,g.enableClassExtend=function(a,o){a.$constructor=a,a.extend=function(r){var n=this,h=function(){r.$constructor?r.$constructor.apply(this,arguments):n.apply(this,arguments)};return c.extend(h.prototype,r),h.extend=this.extend,h.superCall=i,h.superApply=s,c.inherits(h,this),h.superClass=n,h}},g.enableClassCheck=function(a){var o=["__\0is_clz",t++,Math.random().toFixed(3)].join("_");a.prototype[o]=!0,a.isInstance=function(r){return!(!r||!r[o])}},g.enableClassManagement=function(a,o){o=o||{};var r={};if(a.registerClass=function(h,p){if(p)if(function(f){c.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(f),'componentType "'+f+'" illegal')}(p),(p=e(p)).sub){if(p.sub!==l){var d=function(f){var v=r[f.main];return v&&v[l]||((v=r[f.main]={})[l]=!0),v}(p);d[p.sub]=h}}else r[p.main]=h;return h},a.getClass=function(h,p,d){var f=r[h];if(f&&f[l]&&(f=p?f[p]:null),d&&!f)throw new Error(p?"Component "+h+"."+(p||"")+" not exists. Load it first.":h+".type should be specified.");return f},a.getClassesByMainType=function(h){h=e(h);var p=[],d=r[h.main];return d&&d[l]?c.each(d,function(f,v){v!==l&&p.push(f)}):p.push(d),p},a.hasClass=function(h){return h=e(h),!!r[h.main]},a.getAllClassMainTypes=function(){var h=[];return c.each(r,function(p,d){h.push(d)}),h},a.hasSubTypes=function(h){h=e(h);var p=r[h.main];return p&&p[l]},a.parseClassType=e,o.registerWhenExtend){var n=a.extend;n&&(a.extend=function(h){var p=n.call(this,h);return a.registerClass(p,h.type)})}return a},g.setReadOnly=function(a,o){}},function(_,g,u){var c=u(16),l=c.each,e="\0__link_datas",t="\0__link_mainData";function i(h,p){if(this[t]===this){var d=c.extend({},this[e]);d[this.dataType]=p,r(p,d,h)}else n(p,this.dataType,this[t],h);return p}function s(h,p){return h.struct&&h.struct.update(this),p}function a(h,p){return l(p[e],function(d,f){d!==p&&n(d.cloneShallow(),f,p,h)}),p}function o(h){var p=this[t];return h==null||p==null?p:p[e][h]}function r(h,p,d){h[e]={},l(p,function(f,v){n(f,v,h,d)})}function n(h,p,d,f){d[e][p]=h,h[t]=d,h.dataType=p,f.struct&&(h[f.structAttr]=f.struct,f.struct[f.datasAttr[p]]=h),h.getLinkedData=o}_.exports=function(h){var p=h.mainData,d=h.datas;d||(d={main:p},h.datasAttr={main:"data"}),h.datas=h.mainData=null,r(p,d,h),l(d,function(f){l(p.TRANSFERABLE_METHODS,function(v){f.wrapMethod(v,c.curry(i,h))})}),p.wrapMethod("cloneShallow",c.curry(a,h)),l(p.CHANGABLE_METHODS,function(f){p.wrapMethod(f,c.curry(s,h))}),c.assert(d[p.dataType]===p)}},function(_,g,u){var c=u(0),l=u.n(c),e=u(47),t=u.n(e),i=u(1),s=u(22),a=u(104),o=u(2),r=u(273),n=u(275),h=u(81),p=u.n(h),d=u(6),f=u(277),v=u(66),m=u(278),y=d.a.vec2;i.a.Shader.import(m.a);var x,w=1;l.a.extendChartView({type:"graphGL",__ecgl__:!0,init:function(M,C){this.groupGL=new i.a.Node,this.viewGL=new s.a("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new v.a(!0,C),this._forceEdgesMesh=new i.a.Mesh({material:new i.a.Material({shader:i.a.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new i.a.Geometry({attributes:{node:new i.a.Geometry.Attribute("node","float",2),color:new i.a.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:i.a.Mesh.LINES}),this._edgesMesh=new i.a.Mesh({material:new i.a.Material({shader:i.a.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new a.a({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new f.a({zr:C.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(M,C,A){this.groupGL.add(this._pointsBuilder.rootNode),this._model=M,this._api=A,this._initLayout(M,C,A),this._pointsBuilder.update(M,C,A),D(this._forceLayoutInstance,r.a)||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(M,A),this._control.off("update"),this._control.on("update",function(){A.dispatchAction({type:"graphGLRoam",seriesId:M.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(o.a.firstNotNull(M.get("zoom"),1)),this._control.setOffset(M.get("offset")||[0,0]);var P=this._pointsBuilder.getPointsMesh();if(P.off("mousemove",this._mousemoveHandler),P.off("mouseout",this._mouseOutHandler,this),A.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,M.get("focusNodeAdjacency")){var b=M.get("focusNodeAdjacencyOn");b==="click"?A.getZr().on("click",this._clickHandler):b==="mouseover"?(P.on("mousemove",this._mousemoveHandler,this),P.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1):console.warn("Unkown focusNodeAdjacencyOn value s"+b)}this._lastMouseOverDataIndex=-1},_clickHandler:function(M){if(!this._layouting){var C=this._pointsBuilder.getPointsMesh().dataIndex;C>=0?this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:C}):this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(M){if(!this._layouting){var C=this._pointsBuilder.getPointsMesh().dataIndex;C>=0?C!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:C}):this._mouseOutHandler(M),this._lastMouseOverDataIndex=C}},_mouseOutHandler:function(M){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(M,C){var A=this._forceEdgesMesh.geometry,P=C.getEdgeData(),b=0,N=this._forceLayoutInstance,B=2*P.count();A.attributes.node.init(B),A.attributes.color.init(B),P.each(function(z){var F=M[z];A.attributes.node.set(b,N.getNodeUV(F.node1)),A.attributes.node.set(b+1,N.getNodeUV(F.node2));var V=P.getItemVisual(F.dataIndex,"color"),H=i.a.parseColor(V);H[3]*=o.a.firstNotNull(P.getItemVisual(F.dataIndex,"opacity"),1),A.attributes.color.set(b,H),A.attributes.color.set(b+1,H),b+=2}),A.dirty()},_updateMeshLinesGeometry:function(){var M=this._model.getEdgeData(),C=this._edgesMesh.geometry,A=(M=this._model.getEdgeData(),this._model.getData().getLayout("points"));C.resetOffset(),C.setVertexCount(M.count()*C.getLineVertexCount()),C.setTriangleCount(M.count()*C.getLineTriangleCount());var P=[],b=[],N=["lineStyle","width"];this._originalEdgeColors=new Float32Array(4*M.count()),this._edgeIndicesMap=new Float32Array(M.count()),M.each(function(B){var z=M.graph.getEdgeByIndex(B),F=2*z.node1.dataIndex,V=2*z.node2.dataIndex;P[0]=A[F],P[1]=A[F+1],b[0]=A[V],b[1]=A[V+1];var H=M.getItemVisual(z.dataIndex,"color"),U=i.a.parseColor(H);U[3]*=o.a.firstNotNull(M.getItemVisual(z.dataIndex,"opacity"),1);var j=M.getItemModel(z.dataIndex),X=o.a.firstNotNull(j.get(N),1)*this._api.getDevicePixelRatio();C.addLine(P,b,U,X);for(var Y=0;Y<4;Y++)this._originalEdgeColors[4*z.dataIndex+Y]=U[Y];this._edgeIndicesMap[z.dataIndex]=B},this),C.dirty()},_updateForceNodesGeometry:function(M){for(var C=this._pointsBuilder.getPointsMesh(),A=[],P=0;P<M.count();P++)this._forceLayoutInstance.getNodeUV(P,A),C.geometry.attributes.position.set(P,A);C.geometry.dirty("position")},_initLayout:function(M,C,A){var P=M.get("layout"),b=M.getGraph(),N=M.getBoxLayoutParams(),B=t.a.getLayoutRect(N,{width:A.getWidth(),height:A.getHeight()});P==="force"&&(console.warn("Currently only forceAtlas2 layout supported."),P="forceAtlas2"),this.stopLayout(M,C,A,{beforeLayout:!0});var z=M.getData(),F=M.getData();if(P==="forceAtlas2"){var V=M.getModel("forceAtlas2"),H=this._forceLayoutInstance,U=[],j=[],X=z.getDataExtent("value"),Y=F.getDataExtent("value"),J=o.a.firstNotNull(V.get("edgeWeight"),1),K=o.a.firstNotNull(V.get("nodeWeight"),1);typeof J=="number"&&(J=[J,J]),typeof K=="number"&&(K=[K,K]);var Q=0,Z={},q=new Float32Array(2*z.count());if(b.eachNode(function($){var rt,et,it=$.dataIndex,ot=z.get("value",it);if(z.hasItemOption){var st=z.getItemModel(it);rt=st.get("x"),et=st.get("y")}rt==null&&(rt=B.x+Math.random()*B.width,et=B.y+Math.random()*B.height),q[2*Q]=rt,q[2*Q+1]=et,Z[$.id]=Q++;var at=l.a.number.linearMap(ot,X,K);isNaN(at)&&(at=isNaN(K[0])?1:K[0]),U.push({x:rt,y:et,mass:at,size:z.getItemVisual(it,"symbolSize")})}),z.setLayout("points",q),b.eachEdge(function($){var rt=$.dataIndex,et=z.get("value",rt),it=l.a.number.linearMap(et,Y,J);isNaN(it)&&(it=isNaN(J[0])?1:J[0]),j.push({node1:Z[$.node1.id],node2:Z[$.node2.id],weight:it,dataIndex:rt})}),!H){var tt=V.get("GPU");this._forceLayoutInstance&&(tt&&!D(this._forceLayoutInstance,r.a)||!tt&&!D(this._forceLayoutInstance,n.a))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),H=this._forceLayoutInstance=tt?new r.a:new n.a}H.initData(U,j),H.updateOption(V.option),this._updateForceEdgesGeometry(H.getEdges(),M),this._updatePositionTexture(),A.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else q=new Float32Array(2*z.count()),Q=0,b.eachNode(function($){var rt,et,it=$.dataIndex;if(z.hasItemOption){var ot=z.getItemModel(it);rt=ot.get("x"),et=ot.get("y")}q[Q++]=rt,q[Q++]=et}),z.setLayout("points",q),this._updateAfterLayout(M,C,A)},_updatePositionTexture:function(){var M=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(M),this._forceEdgesMesh.material.set("positionTex",M)},startLayout:function(M,C,A,P){if(!P||P.from==null||P.from===this.uid){var b=this.viewGL,N=(A=this._api,this._forceLayoutInstance),B=this._model.getData(),z=this._model.getModel("forceAtlas2");if(N){if(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),this._forceLayoutInstance){this._updateForceNodesGeometry(M.getData()),this._pointsBuilder.hideLabels();var F=this,V=this._layoutId=w++,H=z.getShallow("maxSteps"),U=z.getShallow("steps"),j=0,X=Math.max(2*U,20),Y=function J(K){if(K===F._layoutId)return N.isFinished(H)?(A.dispatchAction({type:"graphGLStopLayout",from:F.uid}),void A.dispatchAction({type:"graphGLFinishLayout",points:B.getLayout("points"),from:F.uid})):void N.update(b.layer.renderer,U,function(){F._updatePositionTexture(),(j+=U)>=X&&(F._syncNodePosition(M),j=0),A.getZr().refresh(),p()(function(){J(K)})})};p()(function(){F._forceLayoutInstanceToDispose&&(F._forceLayoutInstanceToDispose.dispose(b.layer.renderer),F._forceLayoutInstanceToDispose=null),Y(V)}),this._layouting=!0}}else console.error("None layout don't have startLayout action")}},stopLayout:function(M,C,A,P){P&&P.from!=null&&P.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&this.viewGL.layer&&(P&&P.beforeLayout||(this._syncNodePosition(M),this._updateAfterLayout(M,C,A)),this._api.getZr().refresh(),this._layouting=!1))},_syncNodePosition:function(M){var C=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);M.getData().setLayout("points",C),M.setNodePosition(C)},_updateAfterLayout:function(M,C,A){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(M,C,A),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(M,C,A,P){var b=this._model.getData();this._downplayAll();var N=P.dataIndex,B=b.graph,z=[],F=B.getNodeByIndex(N);z.push(F),F.edges.forEach(function(H){H.dataIndex<0||(H.node1!==F&&z.push(H.node1),H.node2!==F&&z.push(H.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),z.forEach(function(H){this._pointsBuilder.highlight(b,H.dataIndex)},this),this._pointsBuilder.updateLabels(z.map(function(H){return H.dataIndex}));var V=[];F.edges.forEach(function(H){H.dataIndex>=0&&(this._highlightEdge(H.dataIndex),V.push(H))},this),this._focusNodes=z,this._focusEdges=V},unfocusNodeAdjacency:function(M,C,A,P){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(M){var C=this._model.getEdgeData().getItemModel(M),A=i.a.parseColor(C.get("emphasis.lineStyle.color")||C.get("lineStyle.color")),P=o.a.firstNotNull(C.get("emphasis.lineStyle.opacity"),C.get("lineStyle.opacity"),1);A[3]*=P,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[M],A)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(M){this._pointsBuilder.downplay(this._model.getData(),M.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(M){this._downplayEdge(M.dataIndex)},this)},_downplayEdge:function(M){var C=this._getColor(M,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[M],C)},_setEdgeFade:(x=[],function(M,C){this._getColor(M,x),x[3]*=C,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[M],x)}),_getColor:function(M,C){for(var A=0;A<4;A++)C[A]=this._originalEdgeColors[4*M+A];return C},_fadeOutEdgesAll:function(M){this._model.getData().graph.eachEdge(function(C){this._setEdgeFade(C.dataIndex,M)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(M,C){this.viewGL.setViewport(0,0,C.getWidth(),C.getHeight(),C.getDevicePixelRatio());for(var A=this.viewGL.camera,P=M.getData().getLayout("points"),b=y.create(1/0,1/0),N=y.create(-1/0,-1/0),B=[],z=0;z<P.length;)B[0]=P[z++],B[1]=P[z++],y.min(b,b,B),y.max(N,N,B);var F=(N[1]+b[1])/2,V=(N[0]+b[0])/2;if(!(V>A.left&&V<A.right&&F<A.bottom&&F>A.top)){var H=Math.max(N[0]-b[0],10),U=H/C.getWidth()*C.getHeight();H*=1.4,U*=1.4,b[0]-=.2*H,A.left=b[0],A.top=F-U/2,A.bottom=F+U/2,A.right=H+b[0],A.near=0,A.far=100}},dispose:function(){var M=this.viewGL.layer.renderer;this._forceLayoutInstance&&this._forceLayoutInstance.dispose(M),this.groupGL.removeAll(),this._layoutId=-1},remove:function(){this.groupGL.removeAll(),this._control.dispose()}})},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(15),i=u(10),s=u(274);e.a.Shader.import(s.a);var a={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function o(r){var n={type:e.a.Texture.FLOAT,minFilter:e.a.Texture.NEAREST,magFilter:e.a.Texture.NEAREST};this._positionSourceTex=new e.a.Texture2D(n),this._positionSourceTex.flipY=!1,this._positionTex=new e.a.Texture2D(n),this._positionPrevTex=new e.a.Texture2D(n),this._forceTex=new e.a.Texture2D(n),this._forcePrevTex=new e.a.Texture2D(n),this._weightedSumTex=new e.a.Texture2D(n),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new e.a.Texture2D(n),this._globalSpeedPrevTex=new e.a.Texture2D(n),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new t.a({fragment:e.a.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new t.a({fragment:e.a.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new t.a({fragment:e.a.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new t.a({fragment:e.a.Shader.source("clay.compositor.output")});var h=function(p){p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE)};this._edgeForceMesh=new e.a.Mesh({geometry:new e.a.Geometry({attributes:{node1:new e.a.Geometry.Attribute("node1","float",2),node2:new e.a.Geometry.Attribute("node2","float",2),weight:new e.a.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new e.a.Material({transparent:!0,shader:e.a.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:h,depthMask:!1,depthText:!1}),mode:e.a.Mesh.POINTS}),this._weightedSumMesh=new e.a.Mesh({geometry:new e.a.Geometry({attributes:{node:new e.a.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new e.a.Material({transparent:!0,shader:e.a.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:h,depthMask:!1,depthText:!1}),mode:e.a.Mesh.POINTS}),this._framebuffer=new i.a({depthBuffer:!1}),this._dummyCamera=new e.a.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}o.prototype.updateOption=function(r){for(var n in a)this[n]=a[n];var h=this._nodes.length;if(this.jitterTolerence=h>5e4?10:h>5e3?1:.1,this.scaling=h>100?2:10,r)for(var n in a)r[n]!=null&&(this[n]=r[n]);if(this.repulsionByDegree)for(var p=this._positionSourceTex.pixels,d=0;d<this._nodes.length;d++)p[4*d+2]=(this._nodes[d].degree||0)+1},o.prototype._updateGravityCenter=function(r){var n=this._nodes,h=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var p=[1/0,1/0],d=[-1/0,-1/0],f=0;f<n.length;f++)p[0]=Math.min(n[f].x,p[0]),p[1]=Math.min(n[f].y,p[1]),d[0]=Math.max(n[f].x,d[0]),d[1]=Math.max(n[f].y,d[1]);this._gravityCenter=[.5*(p[0]+d[0]),.5*(p[1]+d[1])]}for(f=0;f<h.length;f++){var v=h[f].node1,m=h[f].node2;n[v].degree=(n[v].degree||0)+1,n[m].degree=(n[m].degree||0)+1}},o.prototype.initData=function(r,n){this._nodes=r,this._edges=n,this._updateGravityCenter();var h=Math.ceil(Math.sqrt(r.length)),p=h,d=new Float32Array(h*p*4);this._resize(h,p);for(var f=0,v=0;v<r.length;v++){var m=r[v];d[f++]=m.x||0,d[f++]=m.y||0,d[f++]=m.mass||1,d[f++]=m.size||1}this._positionSourceTex.pixels=d;var y=this._edgeForceMesh.geometry,x=n.length;y.attributes.node1.init(2*x),y.attributes.node2.init(2*x),y.attributes.weight.init(2*x);var w=[];for(v=0;v<n.length;v++){var M=y.attributes,C=n[v].weight;C==null&&(C=1),M.node1.set(v,this.getNodeUV(n[v].node1,w)),M.node2.set(v,this.getNodeUV(n[v].node2,w)),M.weight.set(v,C),M.node1.set(v+x,this.getNodeUV(n[v].node2,w)),M.node2.set(v+x,this.getNodeUV(n[v].node1,w)),M.weight.set(v+x,C)}var A=this._weightedSumMesh.geometry;for(A.attributes.node.init(r.length),v=0;v<r.length;v++)A.attributes.node.set(v,this.getNodeUV(v,w));y.dirty(),A.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",r.length),this._nodeRepulsionPass.material.setUniform("textureSize",[h,p]),this._inited=!1,this._frame=0},o.prototype.getNodes=function(){return this._nodes},o.prototype.getEdges=function(){return this._edges},o.prototype.step=function(r){this._inited||(this._initFromSource(r),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(r);var n=this._nodeRepulsionPass;n.setUniform("strongGravityMode",this.strongGravityMode),n.setUniform("gravity",this.gravity),n.setUniform("gravityCenter",this._gravityCenter),n.setUniform("scaling",this.scaling),n.setUniform("preventOverlap",this.preventOverlap),n.setUniform("positionTex",this._positionPrevTex),n.render(r);var h=this._edgeForceMesh;h.material.set("linLogMode",this.linLogMode),h.material.set("edgeWeightInfluence",this.edgeWeightInfluence),h.material.set("preventOverlap",this.preventOverlap),h.material.set("positionTex",this._positionPrevTex),r.gl.enable(r.gl.BLEND),r.renderPass([h],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),r.gl.clearColor(0,0,0,0),r.gl.clear(r.gl.COLOR_BUFFER_BIT),r.gl.enable(r.gl.BLEND);var p=this._weightedSumMesh;p.material.set("positionTex",this._positionPrevTex),p.material.set("forceTex",this._forceTex),p.material.set("forcePrevTex",this._forcePrevTex),r.renderPass([p],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var d=this._globalSpeedPass;d.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),d.setUniform("weightedSumTex",this._weightedSumTex),d.setUniform("jitterTolerence",this.jitterTolerence),r.gl.disable(r.gl.BLEND),d.render(r);var f=this._positionPass;this._framebuffer.attach(this._positionTex),f.setUniform("globalSpeedTex",this._globalSpeedTex),f.setUniform("positionTex",this._positionPrevTex),f.setUniform("forceTex",this._forceTex),f.setUniform("forcePrevTex",this._forcePrevTex),f.render(r),this._framebuffer.unbind(r),this._swapTexture()},o.prototype.update=function(r,n,h){n==null&&(n=1),n=Math.max(n,1);for(var p=0;p<n;p++)this.step(r);h&&h()},o.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex},o.prototype.getNodeUV=function(r,n){n=n||[];var h=this._positionTex.width,p=this._positionTex.height;return n[0]=r%h/(h-1),n[1]=Math.floor(r/h)/(p-1)||0,n},o.prototype.getNodePosition=function(r,n){var h=this._positionArr,p=this._positionTex.width,d=this._positionTex.height,f=p*d;h&&h.length===4*f||(h=this._positionArr=new Float32Array(4*f)),this._framebuffer.bind(r),this._framebuffer.attach(this._positionPrevTex),r.gl.readPixels(0,0,p,d,r.gl.RGBA,r.gl.FLOAT,h),this._framebuffer.unbind(r),n||(n=new Float32Array(2*this._nodes.length));for(var v=0;v<this._nodes.length;v++)n[2*v]=h[4*v],n[2*v+1]=h[4*v+1];return n},o.prototype.getTextureData=function(r,n){var h=this["_"+n+"Tex"],p=h.width,d=h.height;this._framebuffer.bind(r),this._framebuffer.attach(h);var f=new Float32Array(p*d*4);return r.gl.readPixels(0,0,p,d,r.gl.RGBA,r.gl.FLOAT,f),this._framebuffer.unbind(r),f},o.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}},o.prototype.isFinished=function(r){return this._frame>r},o.prototype._swapTexture=function(){var r=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=r,r=this._forcePrevTex,this._forcePrevTex=this._forceTex,this._forceTex=r,r=this._globalSpeedPrevTex,this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=r},o.prototype._initFromSource=function(r){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(r),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(r),r.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),r.gl.clear(r.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),r.gl.clear(r.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(r)},o.prototype._resize=function(r,n){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(h){this[h].width=r,this[h].height=n,this[h].dirty()},this)},o.prototype.dispose=function(r){this._framebuffer.dispose(r),this._copyPass.dispose(r),this._nodeRepulsionPass.dispose(r),this._positionPass.dispose(r),this._globalSpeedPass.dispose(r),this._edgeForceMesh.geometry.dispose(r),this._weightedSumMesh.geometry.dispose(r),this._positionSourceTex.dispose(r),this._positionTex.dispose(r),this._positionPrevTex.dispose(r),this._forceTex.dispose(r),this._forcePrevTex.dispose(r),this._weightedSumTex.dispose(r),this._globalSpeedTex.dispose(r),this._globalSpeedPrevTex.dispose(r)},l.a.ForceAtlas2GPU=o,g.a=o},function(_,g,u){g.a=`@export ecgl.forceAtlas2.updateNodeRepulsion

#define NODE_COUNT 0

uniform sampler2D positionTex;

uniform vec2 textureSize;
uniform float gravity;
uniform float scaling;
uniform vec2 gravityCenter;

uniform bool strongGravityMode;
uniform bool preventOverlap;

varying vec2 v_Texcoord;

void main() {

 vec4 n0 = texture2D(positionTex, v_Texcoord);

 vec2 force = vec2(0.0);
 for (int i = 0; i < NODE_COUNT; i++) {
 vec2 uv = vec2(
 mod(float(i), textureSize.x) / (textureSize.x - 1.0),
 floor(float(i) / textureSize.x) / (textureSize.y - 1.0)
 );
 vec4 n1 = texture2D(positionTex, uv);

 vec2 dir = n0.xy - n1.xy;
 float d2 = dot(dir, dir);

 if (d2 > 0.0) {
 float factor = 0.0;
 if (preventOverlap) {
 float d = sqrt(d2);
 d = d - n0.w - n1.w;
 if (d > 0.0) {
 factor = scaling * n0.z * n1.z / (d * d);
 }
 else if (d < 0.0) {
 factor = scaling * 100.0 * n0.z * n1.z;
 }
 }
 else {
 factor = scaling * n0.z * n1.z / d2;
 }
 force += dir * factor;
 }
 }

 vec2 dir = gravityCenter - n0.xy;
 float d = 1.0;
 if (!strongGravityMode) {
 d = length(dir);
 }

 force += dir * n0.z * gravity / (d + 1.0);

 gl_FragColor = vec4(force, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.vertex

attribute vec2 node1;
attribute vec2 node2;
attribute float weight;

uniform sampler2D positionTex;
uniform float edgeWeightInfluence;
uniform bool preventOverlap;
uniform bool linLogMode;

uniform vec2 windowSize: WINDOW_SIZE;

varying vec2 v_Force;

void main() {

 vec4 n0 = texture2D(positionTex, node1);
 vec4 n1 = texture2D(positionTex, node2);

 vec2 dir = n1.xy - n0.xy;
 float d = length(dir);
 float w;
 if (edgeWeightInfluence == 0.0) {
 w = 1.0;
 }
 else if (edgeWeightInfluence == 1.0) {
 w = weight;
 }
 else {
 w = pow(weight, edgeWeightInfluence);
 }
 vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);
 vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);
 vec2 pos = node1 * scale * 2.0 - 1.0;
 gl_Position = vec4(pos + offset, 0.0, 1.0);
 gl_PointSize = 1.0;

 float factor;
 if (preventOverlap) {
 d = d - n1.w - n0.w;
 }
 if (d <= 0.0) {
 v_Force = vec2(0.0);
 return;
 }

 if (linLogMode) {
 factor = w * log(d) / d;
 }
 else {
 factor = w;
 }
 v_Force = dir * factor;
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.fragment

varying vec2 v_Force;

void main() {
 gl_FragColor = vec4(v_Force, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.vertex

attribute vec2 node;

varying vec2 v_NodeUv;

void main() {

 v_NodeUv = node;
 gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
 gl_PointSize = 1.0;
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.fragment

varying vec2 v_NodeUv;

uniform sampler2D positionTex;
uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;

void main() {
 vec2 force = texture2D(forceTex, v_NodeUv).rg;
 vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;

 float mass = texture2D(positionTex, v_NodeUv).z;
 float swing = length(force - forcePrev) * mass;
 float traction = length(force + forcePrev) * 0.5 * mass;

 gl_FragColor = vec4(swing, traction, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcGlobalSpeed

uniform sampler2D globalSpeedPrevTex;
uniform sampler2D weightedSumTex;
uniform float jitterTolerence;

void main() {
 vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;
 float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;
 float globalSpeed = jitterTolerence * jitterTolerence
 * weightedSum.y / weightedSum.x;
 if (prevGlobalSpeed > 0.0) {
 globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;
 }
 gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updatePosition

uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;
uniform sampler2D positionTex;
uniform sampler2D globalSpeedTex;

varying vec2 v_Texcoord;

void main() {
 vec2 force = texture2D(forceTex, v_Texcoord).xy;
 vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;
 vec4 node = texture2D(positionTex, v_Texcoord);

 float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;
 float swing = length(force - forcePrev);
 float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));

 float df = length(force);
 if (df > 0.0) {
 speed = min(df * speed, 10.0) / df;

 gl_FragColor = vec4(node.xy + speed * force, node.zw);
 }
 else {
 gl_FragColor = node;
 }
}
@end

@export ecgl.forceAtlas2.edges.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 node;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

uniform sampler2D positionTex;

void main()
{
 gl_Position = worldViewProjection * vec4(
 texture2D(positionTex, node).xy, -10.0, 1.0
 );
 v_Color = a_Color;
}
@end

@export ecgl.forceAtlas2.edges.fragment
uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
varying vec4 v_Color;
void main() {
 gl_FragColor = color * v_Color;
}
@end`},function(_,g,u){var c=u(5),l=u(4),e=u(276).a.toString();e=e.slice(e.indexOf("{")+1,e.lastIndexOf("}"));var t={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},i=function(s){for(var a in t)this[a]=t[a];if(s)for(var a in s)this[a]=s[a];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new c.a({type:l.a.FLOAT,flipY:!1,minFilter:l.a.NEAREST,magFilter:l.a.NEAREST})};i.prototype.initData=function(s,a){var o=new Blob([e]),r=window.URL.createObjectURL(o);this._worker=new Worker(r),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=s,this._edges=a,this._frame=0;for(var n=s.length,h=a.length,p=new Float32Array(2*n),d=new Float32Array(n),f=new Float32Array(n),v=new Float32Array(2*h),m=new Float32Array(h),y=0;y<s.length;y++){var x=s[y];p[2*y]=x.x,p[2*y+1]=x.y,d[y]=x.mass==null?1:x.mass,f[y]=x.size==null?1:x.size}for(y=0;y<a.length;y++){var w=a[y],M=w.node1,C=w.node2;v[2*y]=M,v[2*y+1]=C,m[y]=w.weight==null?1:w.weight}var A=Math.ceil(Math.sqrt(s.length)),P=A,b=new Float32Array(A*P*4),N=this._positionTex;N.width=A,N.height=P,N.pixels=b,this._worker.postMessage({cmd:"init",nodesPosition:p,nodesMass:d,nodesSize:f,edges:v,edgesWeight:m}),this._globalSpeed=1/0},i.prototype.updateOption=function(s){var a={};for(var o in t)a[o]=t[o];var r=this._nodes,n=this._edges,h=r.length;if(a.jitterTolerence=h>5e4?10:h>5e3?1:.1,a.scaling=h>100?2:10,a.barnesHutOptimize=h>1e3,s)for(var o in t)s[o]!=null&&(a[o]=s[o]);if(!a.gravityCenter){for(var p=[1/0,1/0],d=[-1/0,-1/0],f=0;f<r.length;f++)p[0]=Math.min(r[f].x,p[0]),p[1]=Math.min(r[f].y,p[1]),d[0]=Math.max(r[f].x,d[0]),d[1]=Math.max(r[f].y,d[1]);a.gravityCenter=[.5*(p[0]+d[0]),.5*(p[1]+d[1])]}for(f=0;f<n.length;f++){var v=n[f].node1,m=n[f].node2;r[v].degree=(r[v].degree||0)+1,r[m].degree=(r[m].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:a})},i.prototype.update=function(s,a,o){a==null&&(a=1),a=Math.max(a,1),this._frame+=a,this._onupdate=o,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(a)})},i.prototype._$onupdate=function(s){if(!this._disposed){var a=new Float32Array(s.data.buffer);this._globalSpeed=s.data.globalSpeed,this._positionArr=a,this._updateTexture(a),this._onupdate&&this._onupdate()}},i.prototype.getNodePositionTexture=function(){return this._positionTex},i.prototype.getNodeUV=function(s,a){a=a||[];var o=this._positionTex.width,r=this._positionTex.height;return a[0]=s%o/(o-1),a[1]=Math.floor(s/o)/(r-1),a},i.prototype.getNodes=function(){return this._nodes},i.prototype.getEdges=function(){return this._edges},i.prototype.isFinished=function(s){return this._frame>s},i.prototype.getNodePosition=function(s,a){if(a||(a=new Float32Array(2*this._nodes.length)),this._positionArr)for(var o=0;o<this._positionArr.length;o++)a[o]=this._positionArr[o];return a},i.prototype._updateTexture=function(s){for(var a=this._positionTex.pixels,o=0,r=0;r<s.length;)a[o++]=s[r++],a[o++]=s[r++],a[o++]=1,a[o++]=1;this._positionTex.dirty()},i.prototype.dispose=function(s){this._disposed=!0,this._worker=null},g.a=i},function(_,g,u){g.a=function(){var c=function(){return new Float32Array(2)},l=function(m,y){var x=y[0]-m[0],w=y[1]-m[1];return Math.sqrt(x*x+w*w)},e=function(m){var y=m[0],x=m[1];return Math.sqrt(y*y+x*x)},t=function(m,y,x,w){return m[0]=y[0]+x[0]*w,m[1]=y[1]+x[1]*w,m},i=function(m,y,x){return m[0]=y[0]+x[0],m[1]=y[1]+x[1],m},s=function(m,y,x){return m[0]=y[0]-x[0],m[1]=y[1]-x[1],m},a=function(m,y,x){return m[0]=y,m[1]=x,m};function o(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var r=o.prototype;function n(){this.position=new Float32Array(2),this.force=c(),this.forcePrev=c(),this.mass=1,this.inDegree=0,this.outDegree=0}function h(m,y){this.source=m,this.target=y,this.weight=1}function p(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new o,this.rootRegion.centerOfMass=c(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}r.beforeUpdate=function(){for(var m=0;m<this.nSubRegions;m++)this.subRegions[m].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},r.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var m=0;m<this.nSubRegions;m++)this.subRegions[m].afterUpdate()},r.addNode=function(m){if(this.nSubRegions===0){if(this.node==null)return void(this.node=m);this._addNodeToSubRegion(this.node),this.node=null}this._addNodeToSubRegion(m),this._updateCenterOfMass(m)},r.findSubRegion=function(m,y){for(var x=0;x<this.nSubRegions;x++){var w=this.subRegions[x];if(w.contain(m,y))return w}},r.contain=function(m,y){return this.bbox[0]<=m&&this.bbox[2]>=m&&this.bbox[1]<=y&&this.bbox[3]>=y},r.setBBox=function(m,y,x,w){this.bbox[0]=m,this.bbox[1]=y,this.bbox[2]=x,this.bbox[3]=w,this.size=(x-m+w-y)/2},r._newSubRegion=function(){var m=this.subRegions[this.nSubRegions];return m||(m=new o,this.subRegions[this.nSubRegions]=m),this.nSubRegions++,m},r._addNodeToSubRegion=function(m){var y=this.findSubRegion(m.position[0],m.position[1]),x=this.bbox;if(!y){var w=(x[0]+x[2])/2,M=(x[1]+x[3])/2,C=(x[2]-x[0])/2,A=(x[3]-x[1])/2,P=m.position[0]>=w?1:0,b=m.position[1]>=M?1:0;(y=this._newSubRegion()).setBBox(P*C+x[0],b*A+x[1],(P+1)*C+x[0],(b+1)*A+x[1])}y.addNode(m)},r._updateCenterOfMass=function(m){this.centerOfMass==null&&(this.centerOfMass=new Float32Array(2));var y=this.centerOfMass[0]*this.mass,x=this.centerOfMass[1]*this.mass;y+=m.position[0]*m.mass,x+=m.position[1]*m.mass,this.mass+=m.mass,this.centerOfMass[0]=y/this.mass,this.centerOfMass[1]=x/this.mass};var d,f=p.prototype;f.initNodes=function(m,y,x){var w=y.length;this.nodes.length=0;for(var M=x!==void 0,C=0;C<w;C++){var A=new n;A.position[0]=m[2*C],A.position[1]=m[2*C+1],A.mass=y[C],M&&(A.size=x[C]),this.nodes.push(A)}this._massArr=y,this._swingingArr=new Float32Array(w),M&&(this._sizeArr=x)},f.initEdges=function(m,y){var x=m.length/2;this.edges.length=0;for(var w=0;w<x;w++){var M=m[2*w],C=m[2*w+1],A=this.nodes[M],P=this.nodes[C];if(!A||!P)return void console.error("Node not exists, try initNodes before initEdges");A.outDegree++,P.inDegree++;var b=new h(A,P);y&&(b.weight=y[w]),this.edges.push(b)}},f.updateSettings=function(){if(this.repulsionByDegree)for(var m=0;m<this.nodes.length;m++)(y=this.nodes[m]).mass=y.inDegree+y.outDegree+1;else for(m=0;m<this.nodes.length;m++){var y;(y=this.nodes[m]).mass=this._massArr[m]}},f.update=function(){var m,y,x=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var w=0;w<x;w++)this.rootRegion.addNode(this.nodes[w]);this.rootRegion.afterUpdate()}for(w=0;w<x;w++){var M=this.nodes[w];m=M.forcePrev,y=M.force,m[0]=y[0],m[1]=y[1],a(M.force,0,0)}for(w=0;w<x;w++){var C=this.nodes[w];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,C);else for(var A=w+1;A<x;A++){var P=this.nodes[A];this.applyNodeToNodeRepulsion(C,P,!1)}this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(C):this.applyNodeGravity(C))}for(w=0;w<this.edges.length;w++)this.applyEdgeAttraction(this.edges[w]);var b=0,N=0,B=c();for(w=0;w<x;w++)M=this.nodes[w],b+=(F=l(M.force,M.forcePrev))*M.mass,i(B,M.force,M.forcePrev),N+=.5*e(B)*M.mass,this._swingingArr[w]=F;var z=this.jitterTolerence*this.jitterTolerence*N/b;for(this._globalSpeed>0&&(z=Math.min(z/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=z,w=0;w<x;w++){M=this.nodes[w];var F=this._swingingArr[w],V=.1*z/(1+z*Math.sqrt(F)),H=e(M.force);H>0&&(V=Math.min(H*V,10)/H,t(M.position,M.position,M.force,V))}},f.applyRegionToNodeRepulsion=(d=c(),function(m,y){if(m.node)this.applyNodeToNodeRepulsion(m.node,y,!0);else{s(d,y.position,m.centerOfMass);var x=d[0]*d[0]+d[1]*d[1];if(x>this.barnesHutTheta*m.size*m.size){var w=this.scaling*y.mass*m.mass/x;t(y.force,y.force,d,w)}else for(var M=0;M<m.nSubRegions;M++)this.applyRegionToNodeRepulsion(m.subRegions[M],y)}}),f.applyNodeToNodeRepulsion=function(){var m=c();return function(y,x,w){if(y!=x){s(m,y.position,x.position);var M=m[0]*m[0]+m[1]*m[1];if(M!==0){var C;if(this.preventOverlap){var A=Math.sqrt(M);if((A=A-y.size-x.size)>0)C=this.scaling*y.mass*x.mass/(A*A);else{if(!(A<0))return;C=100*this.scaling*y.mass*x.mass}}else C=this.scaling*y.mass*x.mass/M;t(y.force,y.force,m,C),t(x.force,x.force,m,-C)}}}}(),f.applyEdgeAttraction=function(){var m=c();return function(y){var x=y.source,w=y.target;s(m,x.position,w.position);var M,C,A=e(m);M=this.edgeWeightInfluence===0?1:this.edgeWeightInfluence===1?y.weight:Math.pow(y.weight,this.edgeWeightInfluence),this.preventOverlap&&(A=A-x.size-w.size)<=0||(C=this.linLogMode?-M*Math.log(A+1)/(A+1):-M,t(x.force,x.force,m,C),t(w.force,w.force,m,-C))}}(),f.applyNodeGravity=function(){var m=c();return function(y){s(m,this.gravityCenter,y.position);var x=e(m);t(y.force,y.force,m,this.gravity*y.mass/(x+1))}}(),f.applyNodeStrongGravity=function(){var m=c();return function(y){s(m,this.gravityCenter,y.position),t(y.force,y.force,m,this.gravity*y.mass)}}(),f.updateBBox=function(){for(var m=1/0,y=1/0,x=-1/0,w=-1/0,M=0;M<this.nodes.length;M++){var C=this.nodes[M].position;m=Math.min(m,C[0]),y=Math.min(y,C[1]),x=Math.max(x,C[0]),w=Math.max(w,C[1])}this.bbox[0]=m,this.bbox[1]=y,this.bbox[2]=x,this.bbox[3]=w},f.getGlobalSpeed=function(){return this._globalSpeed};var v=null;self.onmessage=function(m){switch(m.data.cmd){case"init":(v=new p).initNodes(m.data.nodesPosition,m.data.nodesMass,m.data.nodesSize),v.initEdges(m.data.edges,m.data.edgesWeight);break;case"updateConfig":if(v)for(var y in m.data.config)v[y]=m.data.config[y];break;case"update":var x=m.data.steps;if(v){for(var w=0;w<x;w++)v.update();var M=v.nodes.length,C=new Float32Array(2*M);for(w=0;w<M;w++){var A=v.nodes[w];C[2*w]=A.position[0],C[2*w+1]=A.position[1]}self.postMessage({buffer:C.buffer,globalSpeed:v.getGlobalSpeed()},[C.buffer])}else{var P=new Float32Array;self.postMessage({buffer:P.buffer,globalSpeed:v.getGlobalSpeed()},[P.buffer])}}}}},function(_,g,u){var c=u(8),l=(u(2),c.a.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var e=this.zr;e.on("mousedown",this._mouseDownHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("globalout",this._mouseUpHandler),e.animation.on("frame",this._update)},setTarget:function(e){this._target=e},setZoom:function(e){this._zoom=Math.max(Math.min(e,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(e){this._dx=e[0],this._dy=e[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(this._target&&this._needsUpdate){var e=this._target,t=this._zoom;e.position.x=this._dx,e.position.y=this._dy,e.scale.set(t,t,t),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(e){if(!e.target){var t=e.offsetX,i=e.offsetY;if(!this.viewGL||this.viewGL.containPoint(t,i)){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var s=this._convertPos(t,i);this._x=s.x,this._y=s.y}}},_convertPos:function(e,t){var i=this.viewGL.camera,s=this.viewGL.viewport;return{x:(e-s.x)/s.width*(i.right-i.left)+i.left,y:(t-s.y)/s.height*(i.bottom-i.top)+i.top}},_mouseMoveHandler:function(e){var t=this._convertPos(e.offsetX,e.offsetY);this._dx+=t.x-this._x,this._dy+=t.y-this._y,this._x=t.x,this._y=t.y,this._needsUpdate=!0},_mouseUpHandler:function(e){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(e){var t=(e=e.event).wheelDelta||-e.detail;if(t!==0){var i=e.offsetX,s=e.offsetY;if(!this.viewGL||this.viewGL.containPoint(i,s)){var a=t>0?1.1:.9,o=Math.max(Math.min(this._zoom*a,this.maxZoom),this.minZoom);a=o/this._zoom;var r=this._convertPos(i,s),n=(r.x-this._dx)*(a-1),h=(r.y-this._dy)*(a-1);this._dx-=n,this._dy-=h,this._zoom=o,this._needsUpdate=!0}}},dispose:function(){var e=this.zr;e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("globalout",this._mouseUpHandler),e.animation.off("frame",this._update)}}));g.a=l},function(_,g,u){g.a=`@export ecgl.lines2D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

void main()
{
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 v_Color = a_Color;
}

@end

@export ecgl.lines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

void main()
{
 gl_FragColor = color * v_Color;
}
@end


@export ecgl.meshLines2D.vertex

attribute vec2 position: POSITION;
attribute vec2 normal;
attribute float offset;
attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 p2.xy /= p2.w;
 gl_Position.xy /= gl_Position.w;

 vec2 N = normalize(p2.xy - gl_Position.xy);
 gl_Position.xy += N * offset / viewport.zw * 2.0;

 gl_Position.xy *= gl_Position.w;

 v_Color = a_Color;
}
@end


@export ecgl.meshLines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 gl_FragColor = color * v_Color;
}

@end`},function(_,g,u){var c=u(0);u.n(c),u(280),u(284)},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(2),i=u(22),s=u(281);l.a.extendChartView({type:"flowGL",__ecgl__:!0,init:function(a,o){this.viewGL=new i.a("orthographic"),this.groupGL=new e.a.Node,this.viewGL.add(this.groupGL),this._particleSurface=new s.a;var r=new e.a.Mesh({geometry:new e.a.PlaneGeometry,material:new e.a.Material({shader:new e.a.Shader({vertex:e.a.Shader.source("ecgl.color.vertex"),fragment:e.a.Shader.source("ecgl.color.fragment")}),transparent:!0})});r.material.enableTexture("diffuseMap"),this.groupGL.add(r),this._planeMesh=r},render:function(a,o,r){var n=this._particleSurface;n.setParticleType(a.get("particleType")),n.setSupersampling(a.get("supersampling")),this._updateData(a,r),this._updateCamera(r.getWidth(),r.getHeight(),r.getDevicePixelRatio());var h=t.a.firstNotNull(a.get("particleDensity"),128);n.setParticleDensity(h,h);var p=this._planeMesh,d=+new Date,f=this,v=!0;p.__percent=0,p.stopAnimation(),p.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var x=+new Date,w=Math.min(x-d,20);d+=w,f._renderer&&(n.update(f._renderer,r,w/1e3,v),p.material.set("diffuseMap",n.getSurfaceTexture())),v=!1}).start();var m=a.getModel("itemStyle"),y=e.a.parseColor(m.get("color"));y[3]*=t.a.firstNotNull(m.get("opacity"),1),p.material.set("color",y),n.setColorTextureImage(a.get("colorTexture"),r),n.setParticleSize(a.get("particleSize")),n.particleSpeedScaling=a.get("particleSpeed"),n.motionBlurFactor=1-Math.pow(.1,a.get("particleTrail"))},updateTransform:function(a,o,r){this._updateData(a,r)},afterRender:function(a,o,r,n){var h=n.renderer;this._renderer=h},_updateData:function(a,o){var r=a.coordinateSystem,n=r.dimensions.map(function(N){return a.coordDimToDataDim(N)[0]}),h=a.getData(),p=h.getDataExtent(n[0]),d=h.getDataExtent(n[1]),f=a.get("gridWidth"),v=a.get("gridHeight");if(f==null||f==="auto"){var m=(p[1]-p[0])/(d[1]-d[0]);f=Math.round(Math.sqrt(m*h.count()))}v!=null&&v!=="auto"||(v=Math.ceil(h.count()/f));var y=this._particleSurface.vectorFieldTexture,x=y.pixels;if(x&&x.length===v*f*4)for(var w=0;w<x.length;w++)x[w]=0;else x=y.pixels=new Float32Array(f*v*4);var M=0,C=1/0,A=new Float32Array(2*h.count()),P=0,b=[[1/0,1/0],[-1/0,-1/0]];h.each([n[0],n[1],"vx","vy"],function(N,B,z,F){var V=r.dataToPoint([N,B]);A[P++]=V[0],A[P++]=V[1],b[0][0]=Math.min(V[0],b[0][0]),b[0][1]=Math.min(V[1],b[0][1]),b[1][0]=Math.max(V[0],b[1][0]),b[1][1]=Math.max(V[1],b[1][1]);var H=Math.sqrt(z*z+F*F);M=Math.max(M,H),C=Math.min(C,H)}),h.each(["vx","vy"],function(N,B,z){var F=Math.round((A[2*z]-b[0][0])/(b[1][0]-b[0][0])*(f-1)),V=4*((v-1-Math.round((A[2*z+1]-b[0][1])/(b[1][1]-b[0][1])*(v-1)))*f+F);x[V]=N/M*.5+.5,x[V+1]=B/M*.5+.5,x[V+3]=1}),y.width=f,y.height=v,a.get("coordinateSystem")==="bmap"&&this._fillEmptyPixels(y),y.dirty(),this._updatePlanePosition(b[0],b[1],a,o),this._updateGradientTexture(h.getVisual("visualMeta"),[C,M])},_fillEmptyPixels:function(a){var o=a.pixels,r=a.width,n=a.height;function h(A,P,b){A=Math.max(Math.min(A,r-1),0);var N=4*((P=Math.max(Math.min(P,n-1),0))*(r-1)+A);return o[N+3]!==0&&(b[0]=o[N],b[1]=o[N+1],!0)}function p(A,P,b){b[0]=A[0]+P[0],b[1]=A[1]+P[1]}for(var d=[],f=[],v=[],m=[],y=[],x=0,w=0;w<n;w++)for(var M=0;M<r;M++){var C=4*(w*(r-1)+M);o[C+3]===0&&(x=d[0]=d[1]=0,h(M-1,w,f)&&(x++,p(f,d,d)),h(M+1,w,v)&&(x++,p(v,d,d)),h(M,w-1,m)&&(x++,p(m,d,d)),h(M,w+1,y)&&(x++,p(y,d,d)),d[0]/=x,d[1]/=x,o[C]=d[0],o[C+1]=d[1]),o[C+3]=1}},_updateGradientTexture:function(a,o){if(a&&a.length){this._gradientTexture=this._gradientTexture||new e.a.Texture2D({image:document.createElement("canvas")});var r=this._gradientTexture,n=r.image;n.width=200,n.height=1;var h=n.getContext("2d"),p=h.createLinearGradient(0,.5,n.width,.5);a[0].stops.forEach(function(d){var f;o[1]===o[0]?f=0:(f=d.value/o[1],f=Math.min(Math.max(f,0),1)),p.addColorStop(f,d.color)}),h.fillStyle=p,h.fillRect(0,0,n.width,n.height),r.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)}else this._particleSurface.setGradientTexture(null)},_updatePlanePosition:function(a,o,r,n){var h=this._limitInViewportAndFullFill(a,o,r,n);a=h.leftTop,o=h.rightBottom,this._particleSurface.setRegion(h.region),this._planeMesh.position.set((a[0]+o[0])/2,n.getHeight()-(a[1]+o[1])/2,0);var p=o[0]-a[0],d=o[1]-a[1];this._planeMesh.scale.set(p/2,d/2,1),this._particleSurface.resize(Math.max(Math.min(p,2048),1),Math.max(Math.min(d,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(a,o,r,n){var h=[Math.max(a[0],0),Math.max(a[1],0)],p=[Math.min(o[0],n.getWidth()),Math.min(o[1],n.getHeight())];if(r.get("coordinateSystem")==="bmap"){var d=r.getData().getDataExtent(r.coordDimToDataDim("lng")[0]);Math.floor(d[1]-d[0])>=359&&(h[0]>0&&(h[0]=0),p[0]<n.getWidth()&&(p[0]=n.getWidth()))}var f=o[0]-a[0],v=o[1]-a[1],m=p[0]-h[0],y=p[1]-h[1];return{leftTop:h,rightBottom:p,region:[(h[0]-a[0])/f,1-y/v-(h[1]-a[1])/v,m/f,y/v]}},_updateCamera:function(a,o,r){this.viewGL.setViewport(0,0,a,o,r);var n=this.viewGL.camera;n.left=n.bottom=0,n.top=o,n.right=a,n.near=0,n.far=100,n.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}})},function(_,g,u){var c=u(15),l=u(14),e=u(41),t=u(19),i=u(9),s=u(5),a=u(4),o=u(38),r=u(43),n=u(10),h=u(282),p=u(283);i.a.import(p.a);var d=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new s.a({type:a.a.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};d.prototype={constructor:d,init:function(){var f={type:a.a.FLOAT,minFilter:a.a.NEAREST,magFilter:a.a.NEAREST,useMipmap:!1};this._spawnTexture=new s.a(f),this._particleTexture0=new s.a(f),this._particleTexture1=new s.a(f),this._frameBuffer=new n.a({depthBuffer:!1}),this._particlePass=new c.a({fragment:i.a.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new c.a({fragment:i.a.source("clay.compositor.downsample")});var v=new e.a({renderOrder:10,material:new t.a({shader:new i.a(i.a.source("ecgl.vfParticle.renderPoints.vertex"),i.a.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:e.a.POINTS,geometry:new l.a({dynamic:!0,mainAttribute:"texcoord0"})}),m=new e.a({renderOrder:10,material:new t.a({shader:new i.a(i.a.source("ecgl.vfParticle.renderLines.vertex"),i.a.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new h.a,culling:!1}),y=new e.a({material:new t.a({shader:new i.a(i.a.source("ecgl.color.vertex"),i.a.source("ecgl.color.fragment"))}),geometry:new r.a});y.material.enableTexture("diffuseMap"),this._particlePointsMesh=v,this._particleLinesMesh=m,this._lastFrameFullQuadMesh=y,this._camera=new o.a,this._thisFrameTexture=new s.a,this._lastFrameTexture=new s.a},setParticleDensity:function(f,v){for(var m=new Float32Array(f*v*4),y=0,x=this.particleLife,w=0;w<f;w++)for(var M=0;M<v;M++,y++){m[4*y]=Math.random(),m[4*y+1]=Math.random(),m[4*y+2]=Math.random();var C=(x[1]-x[0])*Math.random()+x[0];m[4*y+3]=C}this._particleType==="line"?this._setLineGeometry(f,v):this._setPointsGeometry(f,v),this._spawnTexture.width=f,this._spawnTexture.height=v,this._spawnTexture.pixels=m,this._particleTexture0.width=this._particleTexture1.width=f,this._particleTexture0.height=this._particleTexture1.height=v,this._particlePass.setUniform("textureSize",[f,v])},_setPointsGeometry:function(f,v){var m=f*v,y=this._particlePointsMesh.geometry,x=y.attributes;x.texcoord0.init(m);for(var w=0,M=0;M<f;M++)for(var C=0;C<v;C++,w++)x.texcoord0.value[2*w]=M/f,x.texcoord0.value[2*w+1]=C/v;y.dirty()},_setLineGeometry:function(f,v){var m=f*v,y=this._getParticleMesh().geometry;y.setLineCount(m),y.resetOffset();for(var x=0;x<f;x++)for(var w=0;w<v;w++)y.addLine([x/f,w/v]);y.dirty()},_getParticleMesh:function(){return this._particleType==="line"?this._particleLinesMesh:this._particlePointsMesh},update:function(f,v,m,y){var x=this._getParticleMesh(),w=this._frameBuffer,M=this._particlePass;y&&this._updateDownsampleTextures(f,v),x.material.set("size",this._particleSize*this._supersampling),x.material.set("color",this.particleColor),M.setUniform("speedScaling",this.particleSpeedScaling),w.attach(this._particleTexture1),M.setUniform("firstFrameTime",y?(this.particleLife[1]+this.particleLife[0])/2:0),M.setUniform("particleTexture",this._particleTexture0),M.setUniform("deltaTime",m),M.setUniform("elapsedTime",this._elapsedTime),M.render(f,w),x.material.set("particleTexture",this._particleTexture1),x.material.set("prevParticleTexture",this._particleTexture0),w.attach(this._thisFrameTexture),w.bind(f),f.gl.clear(f.gl.DEPTH_BUFFER_BIT|f.gl.COLOR_BUFFER_BIT);var C=this._lastFrameFullQuadMesh;C.material.set("diffuseMap",this._lastFrameTexture),C.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),f.renderPass([C,x],this._camera),w.unbind(f),this._downsample(f),this._swapTexture(),this._elapsedTime+=m},_downsample:function(f){var v=this._downsampleTextures;if(v.length!==0)for(var m=0,y=this._thisFrameTexture,x=v[m];x;)this._frameBuffer.attach(x),this._downsamplePass.setUniform("texture",y),this._downsamplePass.setUniform("textureSize",[y.width,y.height]),this._downsamplePass.render(f,this._frameBuffer),y=x,x=v[++m]},getSurfaceTexture:function(){var f=this._downsampleTextures;return f.length>0?f[f.length-1]:this._lastFrameTexture},setRegion:function(f){this._particlePass.setUniform("region",f)},resize:function(f,v){this._lastFrameTexture.width=f*this._supersampling,this._lastFrameTexture.height=v*this._supersampling,this._thisFrameTexture.width=f*this._supersampling,this._thisFrameTexture.height=v*this._supersampling,this._width=f,this._height=v},setParticleSize:function(f){var v=this._getParticleMesh();if(f<=2)return v.material.disableTexture("spriteTexture"),void(v.material.transparent=!1);this._spriteTexture||(this._spriteTexture=new s.a),this._spriteTexture.image&&this._spriteTexture.image.width===f||(this._spriteTexture.image=function(m){var y=document.createElement("canvas");y.width=y.height=m;var x=y.getContext("2d");return x.fillStyle="#fff",x.arc(m/2,m/2,m/2,0,2*Math.PI),x.fill(),y}(f),this._spriteTexture.dirty()),v.material.transparent=!0,v.material.enableTexture("spriteTexture"),v.material.set("spriteTexture",this._spriteTexture),this._particleSize=f},setGradientTexture:function(f){var v=this._getParticleMesh().material;v[f?"enableTexture":"disableTexture"]("gradientTexture"),v.setUniform("gradientTexture",f)},setColorTextureImage:function(f,v){this._getParticleMesh().material.setTextureImage("colorTexture",f,v,{flipY:!0})},setParticleType:function(f){this._particleType=f},clearFrame:function(f){var v=this._frameBuffer;v.attach(this._lastFrameTexture),v.bind(f),f.gl.clear(f.gl.DEPTH_BUFFER_BIT|f.gl.COLOR_BUFFER_BIT),v.unbind(f)},setSupersampling:function(f){this._supersampling=f,this.resize(this._width,this._height)},_updateDownsampleTextures:function(f,v){for(var m=this._downsampleTextures,y=Math.max(Math.floor(Math.log(this._supersampling/v.getDevicePixelRatio())/Math.log(2)),0),x=2,w=this._width*this._supersampling,M=this._height*this._supersampling,C=0;C<y;C++)m[C]=m[C]||new s.a,m[C].width=w/x,m[C].height=M/x,x*=2;for(;C<m.length;C++)m[C].dispose(f);m.length=y},_swapTexture:function(){var f=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=f,f=this._thisFrameTexture,this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=f},dispose:function(f){f.disposeFrameBuffer(this._frameBuffer),f.disposeTexture(this.vectorFieldTexture),f.disposeTexture(this._spawnTexture),f.disposeTexture(this._particleTexture0),f.disposeTexture(this._particleTexture1),f.disposeTexture(this._thisFrameTexture),f.disposeTexture(this._lastFrameTexture),f.disposeGeometry(this._particleLinesMesh.geometry),f.disposeGeometry(this._particlePointsMesh.geometry),f.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&f.disposeTexture(this._spriteTexture),this._particlePass.dispose(f),this._downsamplePass.dispose(f),this._downsampleTextures.forEach(function(v){v.dispose(f)})}},g.a=d},function(_,g,u){var c=u(14),l=u(0),e=(u.n(l),c.a.extend(function(){return{dynamic:!0,attributes:{position:new c.a.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(t){var i=this.attributes,s=4*t,a=2*t;this.vertexCount!==s&&i.position.init(s),this.triangleCount!==a&&(this.indices=a===0?null:this.vertexCount>65535?new Uint32Array(3*a):new Uint16Array(3*a))},addLine:function(t){var i=this._vertexOffset;this.attributes.position.set(i,[t[0],t[1],1]),this.attributes.position.set(i+1,[t[0],t[1],-1]),this.attributes.position.set(i+2,[t[0],t[1],2]),this.attributes.position.set(i+3,[t[0],t[1],-2]),this.setTriangleIndices(this._faceOffset++,[i,i+1,i+2]),this.setTriangleIndices(this._faceOffset++,[i+1,i+2,i+3]),this._vertexOffset+=4}}));g.a=e},function(_,g,u){g.a=`@export ecgl.vfParticle.particle.fragment

uniform sampler2D particleTexture;
uniform sampler2D spawnTexture;
uniform sampler2D velocityTexture;

uniform float deltaTime;
uniform float elapsedTime;

uniform float speedScaling : 1.0;

uniform vec2 textureSize;
uniform vec4 region : [0, 0, 1, 1];
uniform float firstFrameTime;

varying vec2 v_Texcoord;


void main()
{
 vec4 p = texture2D(particleTexture, v_Texcoord);
 bool spawn = false;
 if (p.w <= 0.0) {
 p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));
 p.w -= firstFrameTime;
 spawn = true;
 }
 vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;
 v = (v - 0.5) * 2.0;
 p.z = length(v);
 p.xy += v * deltaTime / 10.0 * speedScaling;
 p.w -= deltaTime;

 if (spawn || p.xy != fract(p.xy)) {
 p.z = 0.0;
 }
 p.xy = fract(p.xy);

 gl_FragColor = p;
}
@end

@export ecgl.vfParticle.renderPoints.vertex

#define PI 3.1415926

attribute vec2 texcoord : TEXCOORD_0;

uniform sampler2D particleTexture;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

uniform float size : 1.0;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 vec4 p = texture2D(particleTexture, texcoord);

 if (p.w > 0.0 && p.z > 1e-5) {
 gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }

 v_Mag = p.z;
 v_Uv = p.xy;

 gl_PointSize = size;
}

@end

@export ecgl.vfParticle.renderPoints.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;
uniform sampler2D spriteTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
#ifdef SPRITETEXTURE_ENABLED
 gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);
 if (color.a == 0.0) {
 discard;
 }
#endif
#ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end

@export ecgl.vfParticle.renderLines.vertex

#define PI 3.1415926

attribute vec3 position : POSITION;

uniform sampler2D particleTexture;
uniform sampler2D prevParticleTexture;

uniform float size : 1.0;
uniform vec4 vp: VIEWPORT;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

varying float v_Mag;
varying vec2 v_Uv;

@import clay.util.rand

void main()
{
 vec4 p = texture2D(particleTexture, position.xy);
 vec4 p2 = texture2D(prevParticleTexture, position.xy);

 p.xy = p.xy * 2.0 - 1.0;
 p2.xy = p2.xy * 2.0 - 1.0;

 if (p.w > 0.0 && p.z > 1e-5) {
 vec2 dir = normalize(p.xy - p2.xy);
 vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;
 if (abs(position.z) == 2.0) {
 gl_Position = vec4(p.xy + norm, 0.0, 1.0);
 v_Uv = p.xy;
 v_Mag = p.z;
 }
 else {
 gl_Position = vec4(p2.xy + norm, 0.0, 1.0);
 v_Mag = p2.z;
 v_Uv = p2.xy;
 }
 gl_Position = worldViewProjection * gl_Position;
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }
}

@end

@export ecgl.vfParticle.renderLines.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
 #ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end
`},function(_,g,u){var c=u(0),l=u.n(c);l.a.extendSeriesModel({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualColorAccessPath:"itemStyle.color",getInitialData:function(e,t){var i=l.a.getCoordinateSystemDimensions(this.get("coordinateSystem"))||["x","y"];if(i.length>2)throw new Error("flowGL can only be used on 2d coordinate systems.");i.push("vx","vy");var s=l.a.helper.completeDimensions(i,this.getSource(),{encodeDef:this.get("encode"),dimsDef:this.get("dimensions")}),a=new l.a.List(s,this);return a.initData(this.getSource()),a},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}})},function(_,g,u){var c=u(0),l=u.n(c),e=(u(286),u(287),u(17));l.a.registerVisual(Object(e.a)("linesGL"))},function(_,g,u){var c=u(0),l=u.n(c),e=u(80),t=(u.n(e),l.a.extendSeriesModel({type:"series.linesGL",dependencies:["grid","geo"],visualColorAccessPath:"lineStyle.color",streamEnabled:!0,init:function(i){var s=this._processFlatCoordsArray(i.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(i.data=new Float32Array(s.count)),t.superApply(this,"init",arguments)},mergeOption:function(i){var s=this._processFlatCoordsArray(i.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(i.data=new Float32Array(s.count)),t.superApply(this,"mergeOption",arguments)},appendData:function(i){var s=this._processFlatCoordsArray(i.data);s.flatCoords&&(this._flatCoords?(this._flatCoords=Object(e.concatArray)(this._flatCoords,s.flatCoords),this._flatCoordsOffset=Object(e.concatArray)(this._flatCoordsOffset,s.flatCoordsOffset)):(this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset),i.data=new Float32Array(s.count)),this.getRawData().appendData(i.data)},_getCoordsFromItemModel:function(i){var s=this.getData().getItemModel(i),a=D(s.option,Array)?s.option:s.getShallow("coords");if(!(D(a,Array)&&a.length>0&&D(a[0],Array)))throw new Error("Invalid coords "+JSON.stringify(a)+". Lines must have 2d coords array in data item.");return a},getLineCoordsCount:function(i){return this._flatCoordsOffset?this._flatCoordsOffset[2*i+1]:this._getCoordsFromItemModel(i).length},getLineCoords:function(i,s){if(this._flatCoordsOffset){for(var a=this._flatCoordsOffset[2*i],o=this._flatCoordsOffset[2*i+1],r=0;r<o;r++)s[r]=s[r]||[],s[r][0]=this._flatCoords[a+2*r],s[r][1]=this._flatCoords[a+2*r+1];return o}var n=this._getCoordsFromItemModel(i);for(r=0;r<n.length;r++)s[r]=s[r]||[],s[r][0]=n[r][0],s[r][1]=n[r][1];return n.length},_processFlatCoordsArray:function(i){var s=0;if(this._flatCoords&&(s=this._flatCoords.length),typeof i[0]=="number"){for(var a=i.length,o=new Uint32Array(a),r=new Float64Array(a),n=0,h=0,p=0,d=0;d<a;){p++;var f=i[d++];o[h++]=n+s,o[h++]=f;for(var v=0;v<f;v++){var m=i[d++],y=i[d++];if(r[n++]=m,r[n++]=y,d>a)throw new Error("Invalid data format.")}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,h),flatCoords:r,count:p}}return{flatCoordsOffset:null,flatCoords:null,count:i.length}},getInitialData:function(i,s){var a=new l.a.List(["value"],this);return a.hasItemOption=!1,a.initData(i.data,[],function(o,r,n,h){if(D(o,Array))return NaN;a.hasItemOption=!0;var p=o.value;return p!=null?D(p,Array)?p[h]:p:void 0}),a},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}))},function(_,g,u){var c=u(0),l=u.n(c),e=u(1),t=u(22),i=u(104),s=u(102),a=u(2);l.a.extendChartView({type:"linesGL",__ecgl__:!0,init:function(o,r){this.groupGL=new e.a.Node,this.viewGL=new t.a("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new s.a(this.viewGL),this._nativeLinesShader=e.a.createShader("ecgl.lines3D"),this._meshLinesShader=e.a.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(o,r,n){this.groupGL.removeAll(),this._glViewHelper.reset(o,n);var h=this._linesMeshes[0];h||(h=this._linesMeshes[0]=this._createLinesMesh(o)),this._linesMeshes.length=1,this.groupGL.add(h),this._updateLinesMesh(o,h,0,o.getData().count()),this.viewGL.setPostEffect(o.getModel("postEffect"),n)},incrementalPrepareRender:function(o,r,n){this.groupGL.removeAll(),this._glViewHelper.reset(o,n),this._currentStep=0,this.viewGL.setPostEffect(o.getModel("postEffect"),n)},incrementalRender:function(o,r,n,h){var p=this._linesMeshes[this._currentStep];p||(p=this._createLinesMesh(r),this._linesMeshes[this._currentStep]=p),this._updateLinesMesh(r,p,o.start,o.end),this.groupGL.add(p),h.getZr().refresh(),this._currentStep++},updateTransform:function(o,r,n){o.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(o,n)},_createLinesMesh:function(o){return new e.a.Mesh({$ignorePicking:!0,material:new e.a.Material({shader:e.a.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new i.a({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:e.a.Mesh.LINES,culling:!1})},_updateLinesMesh:function(o,r,n,h){var p=o.getData();r.material.blend=o.get("blendMode")==="lighter"?e.a.additiveBlend:null;var d=o.get("lineStyle.curveness")||0,f=o.get("polyline"),v=r.geometry,m=o.coordinateSystem,y=a.a.firstNotNull(o.get("lineStyle.width"),1);y>1?(r.material.shader!==this._meshLinesShader&&r.material.attachShader(this._meshLinesShader),r.mode=e.a.Mesh.TRIANGLES):(r.material.shader!==this._nativeLinesShader&&r.material.attachShader(this._nativeLinesShader),r.mode=e.a.Mesh.LINES),n=n||0,h=h||p.count(),v.resetOffset();var x=0,w=0,M=[],C=[],A=[],P=[],b=[],N=.3,B=.7;function z(){C[0]=M[0]*B+P[0]*N-(M[1]-P[1])*d,C[1]=M[1]*B+P[1]*N-(P[0]-M[0])*d,A[0]=M[0]*N+P[0]*B-(M[1]-P[1])*d,A[1]=M[1]*N+P[1]*B-(P[0]-M[0])*d}if(f||d!==0)for(var F=n;F<h;F++)if(f){var V=o.getLineCoordsCount(F);x+=v.getPolylineVertexCount(V),w+=v.getPolylineTriangleCount(V)}else o.getLineCoords(F,b),this._glViewHelper.dataToPoint(m,b[0],M),this._glViewHelper.dataToPoint(m,b[1],P),z(),x+=v.getCubicCurveVertexCount(M,C,A,P),w+=v.getCubicCurveTriangleCount(M,C,A,P);else{var H=h-n;x+=H*v.getLineVertexCount(),w+=H*v.getLineVertexCount()}v.setVertexCount(x),v.setTriangleCount(w);var U=n,j=[];for(F=n;F<h;F++){e.a.parseColor(p.getItemVisual(U,"color"),j);var X=a.a.firstNotNull(p.getItemVisual(U,"opacity"),1);j[3]*=X,V=o.getLineCoords(F,b);for(var Y=0;Y<V;Y++)this._glViewHelper.dataToPoint(m,b[Y],b[Y]);f?v.addPolyline(b,j,y,0,V):d!==0?(M=b[0],P=b[1],z(),v.addCubicCurve(M,C,A,P,j,y)):v.addPolyline(b,j,y,0,2),U++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}})}])},E(G)==="object"&&E(W)==="object"?W.exports=O(T(70596)):(R=[T(70596)],(k=typeof(L=O)=="function"?L.apply(G,R):L)===void 0||(W.exports=k))}},Vt={};function Ut(W){var G=Vt[W];if(G!==void 0)return G.exports;var T=Vt[W]={id:W,loaded:!1,exports:{}};return jt[W](T,T.exports,Ut),T.loaded=!0,T.exports}Ut.d=(W,G)=>{for(var T in G)Ut.o(G,T)&&!Ut.o(W,T)&&Object.defineProperty(W,T,{enumerable:!0,get:G[T]})},Ut.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ut.o=(W,G)=>Object.prototype.hasOwnProperty.call(W,G),Ut.r=W=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})},Ut.nmd=W=>(W.paths=[],W.children||(W.children=[]),W);var Jt={};return(()=>{Ut.r(Jt),Ut.d(Jt,{aMapMap:()=>O,getMouseover:()=>E,getPosition:()=>G,getScrollTop:()=>T,isPointInRing:()=>I,judgmentMethod:()=>m,loadJs:()=>S,mapClearInfo:()=>D,objMapsInit:()=>e,updateData:()=>f,updateParameters:()=>c});var W=Ut(70596);Ut(92649);const G=(w,M=!0)=>{M?window.addEventListener("mousemove",w):window.removeEventListener("mousemove",w)},T=()=>document.documentElement.scrollTop||document.body.scrollTop;let L={},R=[],k=null;const O=w=>{const M={mapStyleId:"e47e15c670ff9a9a4f2f9e0ffdffd3b7",opts:{subdistrict:0,extensions:"all",level:"district"},mapMaps:{disableSocket:!0,showLabel:!0,labelzIndex:130,pitch:55,zoom:2,rotation:1,skyColor:"#020B14"},thinLineColor:{color:"#0055ff"},transparentColor:{height:-1e4,color:"#095462"},polyColor:{strokeColor:"#00e4ff",strokeWeight:6},combination:{zoom:10,zoomMax:20,panByX:1,panByY:-100}},{placeId:C,longitude:A,latitude:P,AMap:b,amapParams:N,callback:B}=w;if(N)for(let z in N){const F=M[z];M[z]={...F,...N[z]}}return L=M.combination,new Promise(z=>{const{mapStyleId:F,opts:V,mapMaps:H,thinLineColor:U,transparentColor:j,polyColor:X}=M;new b.DistrictSearch(V).search(String(C),(Y,J)=>{const K=J.districtList[0].boundaries,Q=[],Z=new b.Map("container",{viewMode:"3D",mask:Q,center:[A,P],mapStyle:"amap://styles/"+F,...H}),q=[],tt=new b.Object3DLayer({zIndex:1});for(let et=0;et<K.length;et+=1){const it=K[et];Q.push([it]),new b.Polyline({path:it,map:Z,...X});const ot=new b.Object3D.ThinLine({path:it,...U});tt.add(ot);const st=JSON.parse(JSON.stringify(it));q.push(st)}const $=new b.Object3D.Wall({path:K,...j});$.transparent=!0,tt.add($),Z.add(tt),R=q.length==1?q:B?B(q):[q[1]],k=b,Z.on("complete",()=>{D(Z),z(Z)})})})},D=(w,M)=>{w.clearInfoWindow();const{zoom:C,zoomMax:A,panByX:P,panByY:b}=L;w.setFitView(),w.setZoom(C),w.setZooms([C-1,A]),P&&w.panBy(P,b),M&&M()},E=(w,M=[],C="adjacentUiId",A={})=>{let P=0,b=0;const N=document.getElementById(C),B=N.children,z=A.event?A.event:"onmouseenter",F=N.offsetWidth;for(let V=0;V<B.length;V++){const H=B[V];H[z]=()=>{b=V,w&&w({element:H,item:M[V],widthLeft:F,heigitTop:P,...A})},H.onmouseleave=()=>{B[b].classList.remove("active"),H.classList.remove("active")}}N.onscroll=function(V){V.preventDefault(),V.stopPropagation(),P=N.scrollTop,B[b].classList.remove("active");for(let H=0;H<B.length;H++){const U=B[H];U.classList.remove("active"),U.onmouseenter=null;const j=setTimeout(()=>{clearTimeout(j),U[z]=()=>{b=H,w&&w({element:U,item:M[H],widthLeft:F,heigitTop:P,...A})}},500)}}},I=w=>k.GeometryUtil.isPointInRing(w,R),S=(w,M="loadId",C="https://yu668.gitee.io/")=>{if(!document.getElementById(M))return new Promise((A,P)=>{let b=document.createElement("script");b.type="text/javascript",b.src=C+w,b.id=M,document.body.appendChild(b),b.onload=()=>A(),b.onerror=()=>P()})},_={myChart:null,urlJson:null,defaultUrlJson:null,paramsName:"",maplevel:"00",mapNameAndValue:{},backName:"",mapOutline:"",mapTooltip:!1},g=w=>{const{fnCallback:M,mapNameAndValue:C,mapTooltip:A}=_;if(!M||!w)return;const{name:P,data:b}=w;switch(P){case"mapMousemove":if(A)return;const N=b.params.name;_.paramsName=N,M({name:"mapTooltip",data:{...C[N],paramsName:N}});break;case"mapMouseout":M({name:"mapMouseout"});break;default:M({name:"mapDefault"})}},u={map3dParam:{autoRotate:!0,regionHeight:5,boxHeight:8,detailTexture:"",islines:!1,isOutline:!0,isTooltip:!1,provincesAndCitiesUrlLast2:"00"},map3dLabelStyle1:{label:{show:!1,textStyle:{color:"#fff",backgroundColor:"rgba(7, 28, 38, 0.7)",fontSize:12}},itemStyle:{color:"#fff",opacity:1,borderWidth:1.5,borderColor:"#47c2d7"},fnWatch:g,emphasis:{label:{formatter:()=>_.mapTooltip=!1,textStyle:{opacity:0}},itemStyle:{opacity:.2,color:"#092440"}},light:{main:{color:"#00E4FF",intensity:1.5,shadowQuality:"high"}}},map3dLabelStyle2:{label:{show:!1},itemStyle:{opacity:1,color:"#2387ff"},emphasis:{label:{show:!1}}},map3dLabelStyle3:{boxHeight:1,label:{show:!1},itemStyle:{color:"#2387ff",opacity:0,borderWidth:5,borderColor:"#00e4ff"}},map3DControl:{autoRotateSpeed:1,animationDurationUpdate:10,projection:"orthographic",orthographicSize:1e3,maxOrthographicSize:1e3,minOrthographicSize:30,distance:100,minAlpha:20,maxAlpha:60,minBeta:-10,maxBeta:34,alpha:40,beta:20},orthographicSize:{orthographicSize:100,maxOrthographicSize:200,minOrthographicSize:30},zoomAnimationParam:{zoomSizeStart:1e3,zoomSizeEnd:100,zoomSizeCut:200,boxHeight:8},labelSubAndText:{color:"",label2Sub:"",label2Text:"",placeName:"placeName"},map3dLabelfinished:{label:{show:!0},emphasis:{label:{textStyle:{opacity:1},formatter:w=>w.name}}},provincesAndCitiesLabelPosition:{show:!0,distance:-5,position:"top"},provincesAndCitiesLabelSymbol:{symbol:"path://M1211.27,649.06c-32.67-15.31-78.65-28.89-136.66-40.39-50.89-10.08-109-18.18-172.07-24.11l-6,59.67c61.34,5.74,117.81,13.6,167.12,23.37,51,10.11,91.33,21.65,119.76,34.29,23,10.25,31,18,33.59,21.3-2.56,3.26-10.55,11.06-33.59,21.31-28.43,12.64-68.72,24.18-119.76,34.29-112.92,22.37-263.43,34.69-423.8,34.69S329,801.16,216,778.79c-51-10.11-91.34-21.65-119.76-34.29-23-10.25-31-18-33.59-21.31,2.55-3.26,10.55-11.05,33.59-21.3C124.7,689.25,165,677.71,216,667.6,324.23,646.16,466.94,634,619.78,633L624,673.66c-56.2,2.57-99.46,18.42-99.46,37.6,0,21,51.71,38,115.49,38s115.49-17,115.49-38c0-19.18-43.26-35-99.46-37.6L660.2,633h.33l6-60h-.21L725.21,0H554.77l58.85,573c-154.14,1.28-298.37,13.82-408.56,35.65-58,11.5-104,25.08-136.65,40.39-43,20.13-64.77,45.07-64.77,74.13s21.79,54,64.77,74.14c32.67,15.3,78.64,28.89,136.65,40.38,116.42,23.07,270.83,35.77,434.78,35.77s318.35-12.7,434.77-35.77c58-11.49,104-25.08,136.66-40.38,43-20.13,64.76-45.08,64.76-74.14S1254.24,669.19,1211.27,649.06Z",symbolSize:20},provincesAndCitiesTextStylelabel1:{opacity:1,borderRadius:60,borderWidth:1.4,fontSize:14,color:"#ffffff",backgroundColor:"#010546",borderColor:"#009DE5"},provincesAndCitiesTextAndLabelStyle:{itemStyle:{opacity:.7,color:"#00E4EF"},abnormalColor:{textStyle:{backgroundColor:"#260607",borderColor:"#FC777C"},columnStyle:{opacity:1,color:"#FC777C"}},greenColor:{textStyle:{backgroundColor:"#02190f",borderColor:"#00fc8e"},columnStyle:{opacity:1,color:"#00fc8e"}},orangeColor:{textStyle:{backgroundColor:"#120d01",borderColor:"#ffba00"},columnStyle:{opacity:1,color:"#ffba00"}}},provincesAndCitiesTextStylelabel2:{fontWeight:500,color:"#FFD905",fontSize:14},scatter1LabelStyle:{symbol:"path://M511.999488 65.290005c-152.771429 0-276.532127 124.982526-276.532127 279.193747 0 154.210197 276.532127 614.225219 276.532127 614.225219s276.532127-460.015022 276.532127-614.225219C788.531616 190.251042 664.726915 65.290005 511.999488 65.290005L511.999488 65.290005zM511.999488 512c-91.609441 0-165.901471-75.033927-165.901471-167.516248 0-92.482321 74.29203-167.516248 165.901471-167.516248 91.610464 0 165.945473 75.033927 165.945473 167.516248C677.944961 436.966073 603.609952 512 511.999488 512L511.999488 512zM511.999488 512",symbolSize:[10,18],geo3DIndex:1,itemStyle:{opacity:1,color:"#77b0f7"},label:{show:!1},emphasis:{label:{show:!1}}},maplabelDate:[],linesLabelStyle:{geo3DIndex:1,effect:{show:!0,constantSpeed:30,trailWidth:4,trailLength:.4,trailColor:"rgba(255, 249, 73, 1)",trailOpacity:.6},lineStyle:{color:"rgba(154, 207, 235, 1)",opacity:.8,width:2},blendMode:"lighter"},linesDate:[],anchorPointLabelStyle:{barSize:3,minHeight:5,itemStyle:{opacity:.01},label:{show:!1},emphasis:{label:{show:!1}}}},c=w=>{for(let M in w){const C=u[M];u[M]={...C,...w[M]}}},l=w=>{const M=w[0].properties.name,C=_.mapNameAndValue;if(C[M])return C;const A={};w.forEach(b=>{const{name:N,adcode:B,centroid:z}=b.properties;A[N]={adcode:B,centroid:z}});const P=Object.assign(C,A);return _.mapNameAndValue=P,P},e=async w=>{const{mapRequest:M,id:C,urlJson:A,fnCallback:P,resize:b}=w;_.urlJson=A,_.fnCallback=P;const N=await M(A);W.registerMap(A,N);const B=W.init(document.getElementById(C));_.defaultUrlJson=A,_.myChart=B,_.id=C,_.mapRequest=M,_.maplevel=u.map3dParam.provincesAndCitiesUrlLast2,await h(A),t();const z=l(N.features);return b!=0&&window.addEventListener("resize",()=>B.resize()),{urlJson:A,mapNameAndValue:z}},t=()=>{const{myChart:w,urlJson:M}=_,{map3DControl:C,map3dLabelStyle1:A,map3dParam:P}=u,{boxHeight:b,regionHeight:N,detailTexture:B,isTooltip:z}=P,F={tooltip:z?{trigger:"item",formatter:V=>_.fnCallback({name:"tooltip",data:V.data})}:null,geo3D:[{show:!0,map:M,instancing:!0,boxHeight:b,regionHeight:N,shading:"realistic",realisticMaterial:{detailTexture:B,textureTiling:1},...A,viewControl:{...C,distance:C.distance+.03}}],series:[]};w.setOption(F,!0),g()},i=()=>{const{provincesAndCitiesLabelPosition:w,provincesAndCitiesLabelSymbol:M,provincesAndCitiesTextAndLabelStyle:C,provincesAndCitiesTextStylelabel1:A,provincesAndCitiesTextStylelabel2:P,maplabelDate:b,labelSubAndText:N}=u,{color:B,label2Sub:z,label2Text:F,placeName:V}=N;if(!b||!b.length)return{type:"scatter3D",coordinateSystem:"geo3D"};const H=C.itemStyle;B||(M.itemStyle=H);const U=[],j=s(P),X=_.mapNameAndValue;return b.forEach(Y=>{const J=Y[V],K=X[J];if(K){const Q=[...K.centroid,.1],Z=z?(Y[z]||0)+F:" ",q=z?((st,at)=>{const vt=document.createElement("canvas").getContext("2d");return vt.font='14px/1.6 "Microsoft Yahei"',vt.measureText(st).width})(Z)+20:10,tt=J,$=C[Y.color],rt=$?$.textStyle:{},et=$?$.columnStyle:H,it={name:J,value:Q,...Y,label:{...w,formatter:()=>tt,textStyle:{...A,...rt,padding:[6,q,5,10]}}},ot={name:J,value:Q,...Y,label:{...w,formatter:()=>Z,textStyle:j},emphasis:{label:{...w,textStyle:j}},itemStyle:et};U.push(it),U.push(ot)}}),{type:"scatter3D",coordinateSystem:"geo3D",...M,geo3DIndex:u.map3dParam.isOutline?2:1,data:U}},s=(w,M=50)=>({opacity:1,padding:[6,0,5,M],backgroundColor:"transparent",...w}),a=()=>{const{scatter1LabelStyle:w,maplabelDate:M}=u;return{type:"scatter3D",coordinateSystem:"geo3D",...w,data:M}},o=()=>{const{anchorPointLabelStyle:w,maplabelDate:M}=u;return{type:"bar3D",coordinateSystem:"geo3D",...w,data:M}},r=(w=u.zoomAnimationParam.zoomSizeStart)=>{const{zoomSizeEnd:M,zoomSizeCut:C}=u.zoomAnimationParam;if((w-=C)>M)window.requestAnimationFrame(()=>r(w));else{const{myChart:A}=_,P=[{viewControl:{orthographicSize:M}}];A.setOption({geo3D:P}),A.on("finished",()=>d(A))}},n=w=>{const{map3dParam:M,map3dLabelStyle2:C,map3dLabelStyle3:A,map3DControl:P}=u,{mapOutline:b,urlJson:N}=_,B={instancing:!0,regionHeight:M.regionHeight-.1,boxHeight:M.boxHeight,viewControl:{...P,...w}},z=[{map:b||N,...C,...B}];return b&&z.push({map:b,...A,...B}),z},h=async(w,M)=>{if(u.map3dParam.isOutline){if(M&&M!=u.map3dParam.provincesAndCitiesUrlLast2)return void(_.mapOutline=w);const C=w+"Outline",A=await _.mapRequest(C);A&&(W.registerMap(C,A),_.mapOutline=C)}else _.mapOutline=""},p=async()=>{const{mapRequest:w,urlJson:M,myChart:C,paramsName:A,fnCallback:P}=_,b=await w(M);if(!b)return void P({name:"click",data:"noData"});C.clear();const N=l(b.features);u.maplabelDate=await P({name:"getMapPositionDate",data:{paramsName:A,urlJson:M,mapNameAndValue:N}}),W.registerMap(M,b);const B=m(M,2);B!=u.map3dParam.provincesAndCitiesUrlLast2&&(_.maplevel=B),t(),await h(M,B),r()},d=w=>{const{boxHeight:M}=u.zoomAnimationParam,{islines:C,orthographicSize:A,map3dParam:P,map3dLabelfinished:b}=u,{autoRotate:N,provincesAndCitiesUrlLast2:B}=P,{maplevel:z}=_,F={...A,autoRotate:N},V=[{viewControl:F},...n(F)];z!=B&&(V[0]={...V[0],...b},V[1].boxHeight=M);const H=z!=B?[o(),a()]:[i()];C&&H.push((()=>{const{linesLabelStyle:j,linesDate:X}=u;return{type:"lines3D",name:"lines3D",coordinateSystem:"geo3D",...j,data:X}})());const U={geo3D:V,series:H};w.setOption(U),w.off("finished")},f=w=>{const M=w.nameType,C=_.myChart;switch(M){case"labelText":return w.data&&(u.maplabelDate=w.data),void C.setOption({series:[i()]});case"backOn":return _.paramsName=w.paramsName,void v(w.paramsName);case"callbackDate":return void(({maplabelDate:A})=>{u.maplabelDate=A,r(),(()=>{const P=_.myChart;P.getZr().on("click",()=>{const{maplevel:b,paramsName:N,id:B,fnCallback:z,mapNameAndValue:F,mapTooltip:V}=_;if(V)return;const H=u.map3dParam.provincesAndCitiesUrlLast2;if(b!=H)return;const U=document.querySelector("#"+B+">div").style.cursor,j=F[N];if(U=="default"||!j)return;const X=j.adcode;if(m(X,2)!=H)return P.clear(),void z({name:"districtAndCounty",data:{urlJson:X,paramsName:N}});N&&X?(_.backName=N,_.urlJson=String(X),p(),_.mapTooltip=!0):z({name:"click",data:"noData"})})})()})(w);case"destroy":return void x();case"reset":return void y();default:return void _.fnCallback({name:"default",data:null})}},v=w=>{const{mapNameAndValue:M,defaultUrlJson:C}=_;_.mapTooltip=!0,_.maplevel=u.map3dParam.provincesAndCitiesUrlLast2,_.urlJson=w?String(M[w].adcode):C,p()},m=(w,M)=>{const C=String(w);return C.substring(C.length-M)},y=()=>{v(),_.fnCallback({name:"reset",data:null})},x=()=>{_.myChart.dispose(),_.fnCallback({name:"destroy",data:null})}})(),Jt})())})(Kt);const Ie=ge("mapData",{state:()=>({stateMapData:[]}),actions:{async actionsMapData(Ht){const{features:Wt}=await de(Ht);if(Wt.length){const jt=Wt.map(Vt=>Vt.properties.adcode==433100?"\u6E58\u897F":Vt.properties.name);this.stateMapData=jt}}}}),Ce=Ie(),$t=re({}),fe={};let oe="";const De=async({data:Ht,urlJson:Wt="430000"})=>{Ce.actionsMapData(Wt),Kt.exports.updateParameters(Ae());const jt=await Kt.exports.objMapsInit({id:"main",urlJson:Wt,mapRequest:de,fnCallback:Le}),Vt=Ee(jt.mapNameAndValue);Kt.exports.updateData({nameType:"callbackDate",urlJson:Wt,maplabelDate:Vt})},Ee=Ht=>{const Wt=[];for(const jt in Ht){const Vt=Ht[jt];Vt.placeId||(Vt.placeId=Vt.adcode,Vt.placeName=jt),fe[Vt.placeId]=Vt,Wt.push(Vt)}return Wt},Le=Ht=>{const{name:Wt,data:jt}=Ht;if(Wt=="mapTooltip"){const Vt=fe[jt.adcode],Ut=Vt?Vt.adcode:jt.adcode;if(oe==Ut)return;oe=Ut,$t.value=Vt;return}$t.value={}},Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAoCAYAAABXRRJPAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUE2ODg1RUY5ODVEMTFFQzg0RjRFODVBMUQ3NkJDODAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUE2ODg1RjA5ODVEMTFFQzg0RjRFODVBMUQ3NkJDODAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQTY4ODVFRDk4NUQxMUVDODRGNEU4NUExRDc2QkM4MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQTY4ODVFRTk4NUQxMUVDODRGNEU4NUExRDc2QkM4MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pk9t05AAAAGdSURBVHja7Nc/KEVhHMbx372UP0nYdFelKKIkBguLMLBQZECKGMUgWQwk0fUnZmVXBovJJgOSsqIMSlKS6Pi+dcbruu4573veV/epz3Trnp7ze9/znhOTe080pweHOi8Q11ygGEm0I6aL7hILOMWJzovka/zvGoygTvd61TUJNeYdLOLR1RLDKMKuGEhMw9OpAtfoxrmrJdTd/8C0GErYG7sFXagVg4mHfEO2MYMXV0uo5fOEAzGcsPZEAhdoxa3pEmFNYgObURQIa2N3oh5DElGClij0JzCJ96hKBF1O8zjDsUSYIJOoxjgaJOIEmYQ6E5bw4GqJQZT7+yHyZLOcyrCCPnzZUCKbw27Ln+CEWJK/TqIJvaZf8MLcE3n+19osnl0toZbPK/bFsmS6JypxiTbc2FYi00msYc/GAplu7A40Y1QszW+TKPBPZvXB8+ZqiTlc4UgsTrrlVIUpNIrlSTcJ9V60jDtXS/T7j9V1cSCpllMpVjGATxdKpDrs1N0vwZg4ElXC+/E3RxKXf5BciVwJUy+AXsKNEt8CDACQ/0Wmlxu84wAAAABJRU5ErkJggg==",pe=Ht=>(le("data-v-94c25bea"),Ht=Ht(),ue(),Ht),Ne=pe(()=>te("img",{class:"tooltip0",src:Pe},null,-1)),Re=pe(()=>te("div",{class:"tooltip_top_img"},null,-1)),Oe={class:"paramsName"},ke=be('<div class="map_tooltip_conter" data-v-94c25bea><div class="flexSBCenter" data-v-94c25bea><div class="map_tooltip_conter_left flex" data-v-94c25bea><div data-v-94c25bea><span data-v-94c25bea>\u6570\u636E\u4E0A\u62A5\u91CF\uFF08\u6761\uFF09</span><div class="fifawelcome" data-v-94c25bea>248</div></div><div data-v-94c25bea><span data-v-94c25bea>\u6570\u636E\u4E0A\u62A5\u4F01\u4E1A\uFF08\u5BB6\uFF09</span><div class="fifawelcome" data-v-94c25bea>117</div></div></div><div class="map_tooltip_conter_right flexSBCenter" data-v-94c25bea><div class="fenGeXian" data-v-94c25bea></div><div class="map_tooltip_conter_right_box" data-v-94c25bea><div class="fifawelcome" data-v-94c25bea>67.60%</div><span data-v-94c25bea>\u6570\u636E\u4E0A\u62A5\u6709\u6548\u7387</span></div></div></div><div class="map_tooltip_conter_botton flexSBCenter" data-v-94c25bea><div class="map_tooltip_conter_botton_left" data-v-94c25bea><div data-v-94c25bea><div class="fifawelcome" data-v-94c25bea>124</div><span data-v-94c25bea>\u4F01\u4E1A\u603B\u6570\uFF08\u5BB6\uFF09</span></div></div><div class="fenGeXian" data-v-94c25bea></div><div class="map_tooltip_conter_botton_right" data-v-94c25bea><span data-v-94c25bea>\u4F01\u4E1A\u4FE1\u7528\u8BC4\u7EA7\uFF08\u5BB6\uFF09</span><ul class="flex" data-v-94c25bea><li data-v-94c25bea>A\u7EA7 <span data-v-94c25bea>36</span></li><li data-v-94c25bea>B\u7EA7 <span data-v-94c25bea>87</span></li><li data-v-94c25bea>C\u7EA7 <span data-v-94c25bea>1</span></li><li data-v-94c25bea>D\u7EA7 <span data-v-94c25bea>0</span></li></ul></div></div></div><div class="tooltip_bottom_img" data-v-94c25bea></div>',2),Be=ie({__name:"provincesAndCitiesTooltip",setup(Ht){let Wt=re(0),jt=re(0);const Vt=({pageX:Ut,pageY:Jt})=>{const W=Kt.exports.getScrollTop();Wt.value=Ut+48,jt.value=Jt-80-W};return me($t,Ut=>Ut?Kt.exports.getPosition(Vt):Kt.exports.getPosition(Vt,!1)),(Ut,Jt)=>ve((ae(),se("div",{class:"map_tooltip",style:xe({left:ee(Wt)+"px",top:ee(jt)+"px"})},[Ne,Re,te("div",Oe,[te("span",null,_e(ee($t).placeName),1)]),ke],4)),[[ye,ee($t).placeName]])}});const ze=he(Be,[["__scopeId","data-v-94c25bea"]]),Fe=Ht=>(le("data-v-098ccf25"),Ht=Ht(),ue(),Ht),Ve=Fe(()=>te("div",{id:"main",class:"maps_box"},null,-1)),Ge=ie({__name:"provincesAndCitiesMap",setup(Ht){return De({data:[{placeId:431300,color:"textColor",placeName:"\u5A04\u5E95\u5E02",saleVolume:null,longitude:"118.317325",latitude:"29.709239",mainBodyCount:457,reportMainBodyCount:2,reportMainBodyPercent:"0%",reportRecordCount:10,onSaleProductCount:0}]}),(Wt,jt)=>(ae(),se(we,null,[Ve,ce(ze)],64))}});const He=he(Ge,[["__scopeId","data-v-098ccf25"]]),We=ie({__name:"index",setup(Ht){return(Wt,jt)=>(ae(),Te(Se,null,[ce(He)],1024))}});export{We as _,Ie as u};
